"use strict";const Bt={ComponentBuilder:"ComponentBuilder",SavingService:"SavingService",TagsService:"TagsService",InputCreator:"InputCreator",FileService:"FileService",OnStart:"OnStart",InputCollector:"InputCollector",ValueExtractor:"ValueExtractor",DbService:"DbService",StatisticsService:"StatisticsService"},D0={[Bt.ComponentBuilder]:{dev:!1,info:!0,warn:!0,error:!0},[Bt.SavingService]:{dev:!0,info:!0,warn:!0,error:!0},[Bt.TagsService]:{dev:!1,info:!0,warn:!0,error:!0},[Bt.InputCreator]:{dev:!1,info:!0,warn:!0,error:!0},[Bt.FileService]:{dev:!0,info:!0,warn:!0,error:!0},[Bt.OnStart]:{dev:!0,info:!0,warn:!0,error:!0},[Bt.InputCollector]:{dev:!0,info:!0,warn:!0,error:!0},[Bt.ValueExtractor]:{dev:!0,info:!0,warn:!0,error:!0},[Bt.DbService]:{dev:!0,info:!0,warn:!0,error:!0},[Bt.StatisticsService]:{dev:!0,info:!0,warn:!0,error:!0}},$n={reset:"\x1B[0m",bold:"\x1B[1m",gray:"\x1B[90m",purple:"\x1B[35m"},N0={dev:"\x1B[44m\x1B[37m",info:"\x1B[42m\x1B[30m",warn:"\x1B[43m\x1B[30m",error:"\x1B[41m\x1B[37m"},B0={dev:"🛠",info:"ℹ️",warn:"⚠️",error:"❌"},ta={},bl=["\x1B[36m","\x1B[33m","\x1B[32m","\x1B[34m","\x1B[31m","\x1B[95m","\x1B[96m","\x1B[92m","\x1B[93m"];let vl=0;function $0(t){return ta[t]||(ta[t]=bl[vl%bl.length],vl++),ta[t]}class La{constructor(r,n){this.logs=[],this.serviceConfig={},this.getConfig=r,this.prefix=n??"global"}setServiceConfig(r){this.serviceConfig=r}addLog(r,n,o){const a={timestamp:new Date,level:r,service:this.prefix,message:n,meta:o};if(this.logs.push(a),!((this.serviceConfig[this.prefix]??{})[r]??!0))return;const c=a.timestamp.toISOString().split("T")[1].split(".")[0],d=`${$n.gray}${c}${$n.reset}`,f=`${$n.purple}[PJ]${$n.reset}`,p=`${$0(this.prefix)}${$n.bold}[${this.prefix}]${$n.reset}`,g=`${N0[r]}[${B0[r]} ${r.toUpperCase().padEnd(5)}]${$n.reset}`,b=`${d} ${f}${p}${g} ${n}`;try{r==="warn"?console.warn(b,o??""):r==="error"?console.error(b,o??""):console.log(b,o??"")}catch{console.log(`${d} ${f}[${this.prefix}][${r.toUpperCase()}] ${n}`,o??"")}}dev(r,n){this.addLog("dev",r,n)}info(r,n){this.addLog("info",r,n)}warn(r,n){this.addLog("warn",r,n)}error(r,n){this.addLog("error",r,n)}getAllLogs(){return this.logs}withPrefix(r){const n=new La(this.getConfig,r);return n.setServiceConfig(this.serviceConfig),n}}let je;function W0(t,r){je=r}const hc=new La(()=>je);hc.setServiceConfig(D0);function jt(t){return hc.withPrefix(t)}const Kt=Bt,xe=app;var Ii=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Er={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var z0=Er.exports,xl;function q0(){return xl||(xl=1,(function(t,r){(function(){var n,o="4.17.21",a=200,l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",c="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",f=500,p="__lodash_placeholder__",g=1,b=2,y=4,T=1,M=2,B=1,D=2,G=4,z=8,W=16,F=32,E=64,U=128,Q=256,ee=512,he=30,j="...",V=800,me=16,Ee=1,ce=2,Ne=3,Se=1/0,Re=9007199254740991,Pt=17976931348623157e292,_=NaN,Ae=4294967295,Mt=Ae-1,S=Ae>>>1,at=[["ary",U],["bind",B],["bindKey",D],["curry",z],["curryRight",W],["flip",ee],["partial",F],["partialRight",E],["rearg",Q]],Ke="[object Arguments]",Pe="[object Array]",En="[object AsyncFunction]",Xe="[object Boolean]",yt="[object Date]",fn="[object DOMException]",Xt="[object Error]",Un="[object Function]",Rr="[object GeneratorFunction]",st="[object Map]",hn="[object Number]",Lr="[object Null]",wt="[object Object]",Dr="[object Promise]",Nr="[object Proxy]",dn="[object RegExp]",ut="[object Set]",Tn="[object String]",Yn="[object Symbol]",zi="[object Undefined]",An="[object WeakMap]",O="[object WeakSet]",$="[object ArrayBuffer]",X="[object DataView]",ae="[object Float32Array]",de="[object Float64Array]",Ye="[object Int8Array]",Ot="[object Int16Array]",lt="[object Int32Array]",Jt="[object Uint8Array]",Zt="[object Uint8ClampedArray]",$e="[object Uint16Array]",zt="[object Uint32Array]",Ft=/\b__p \+= '';/g,rf=/\b(__p \+=) '' \+/g,of=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ua=/&(?:amp|lt|gt|quot|#39);/g,Ya=/[&<>"']/g,af=RegExp(Ua.source),sf=RegExp(Ya.source),uf=/<%-([\s\S]+?)%>/g,lf=/<%([\s\S]+?)%>/g,Ga=/<%=([\s\S]+?)%>/g,cf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ff=/^\w*$/,hf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qi=/[\\^$.*+?()[\]{}|]/g,df=RegExp(qi.source),Hi=/^\s+/,pf=/\s/,gf=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,mf=/\{\n\/\* \[wrapped with (.+)\] \*/,yf=/,? & /,wf=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,bf=/[()=,{}\[\]\/\s]/,vf=/\\(\\)?/g,xf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Va=/\w*$/,_f=/^[-+]0x[0-9a-f]+$/i,kf=/^0b[01]+$/i,Sf=/^\[object .+?Constructor\]$/,Cf=/^0o[0-7]+$/i,If=/^(?:0|[1-9]\d*)$/,Ef=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Br=/($^)/,Tf=/['\n\r\u2028\u2029\\]/g,$r="\\ud800-\\udfff",Af="\\u0300-\\u036f",Pf="\\ufe20-\\ufe2f",Mf="\\u20d0-\\u20ff",Qa=Af+Pf+Mf,ja="\\u2700-\\u27bf",Ka="a-z\\xdf-\\xf6\\xf8-\\xff",Of="\\xac\\xb1\\xd7\\xf7",Ff="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Rf="\\u2000-\\u206f",Lf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Xa="A-Z\\xc0-\\xd6\\xd8-\\xde",Ja="\\ufe0e\\ufe0f",Za=Of+Ff+Rf+Lf,Ui="['’]",Df="["+$r+"]",es="["+Za+"]",Wr="["+Qa+"]",ts="\\d+",Nf="["+ja+"]",ns="["+Ka+"]",rs="[^"+$r+Za+ts+ja+Ka+Xa+"]",Yi="\\ud83c[\\udffb-\\udfff]",Bf="(?:"+Wr+"|"+Yi+")",is="[^"+$r+"]",Gi="(?:\\ud83c[\\udde6-\\uddff]){2}",Vi="[\\ud800-\\udbff][\\udc00-\\udfff]",Gn="["+Xa+"]",os="\\u200d",as="(?:"+ns+"|"+rs+")",$f="(?:"+Gn+"|"+rs+")",ss="(?:"+Ui+"(?:d|ll|m|re|s|t|ve))?",us="(?:"+Ui+"(?:D|LL|M|RE|S|T|VE))?",ls=Bf+"?",cs="["+Ja+"]?",Wf="(?:"+os+"(?:"+[is,Gi,Vi].join("|")+")"+cs+ls+")*",zf="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",qf="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",fs=cs+ls+Wf,Hf="(?:"+[Nf,Gi,Vi].join("|")+")"+fs,Uf="(?:"+[is+Wr+"?",Wr,Gi,Vi,Df].join("|")+")",Yf=RegExp(Ui,"g"),Gf=RegExp(Wr,"g"),Qi=RegExp(Yi+"(?="+Yi+")|"+Uf+fs,"g"),Vf=RegExp([Gn+"?"+ns+"+"+ss+"(?="+[es,Gn,"$"].join("|")+")",$f+"+"+us+"(?="+[es,Gn+as,"$"].join("|")+")",Gn+"?"+as+"+"+ss,Gn+"+"+us,qf,zf,ts,Hf].join("|"),"g"),Qf=RegExp("["+os+$r+Qa+Ja+"]"),jf=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Kf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Xf=-1,Ce={};Ce[ae]=Ce[de]=Ce[Ye]=Ce[Ot]=Ce[lt]=Ce[Jt]=Ce[Zt]=Ce[$e]=Ce[zt]=!0,Ce[Ke]=Ce[Pe]=Ce[$]=Ce[Xe]=Ce[X]=Ce[yt]=Ce[Xt]=Ce[Un]=Ce[st]=Ce[hn]=Ce[wt]=Ce[dn]=Ce[ut]=Ce[Tn]=Ce[An]=!1;var _e={};_e[Ke]=_e[Pe]=_e[$]=_e[X]=_e[Xe]=_e[yt]=_e[ae]=_e[de]=_e[Ye]=_e[Ot]=_e[lt]=_e[st]=_e[hn]=_e[wt]=_e[dn]=_e[ut]=_e[Tn]=_e[Yn]=_e[Jt]=_e[Zt]=_e[$e]=_e[zt]=!0,_e[Xt]=_e[Un]=_e[An]=!1;var Jf={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Zf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},eh={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},th={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},nh=parseFloat,rh=parseInt,hs=typeof Ii=="object"&&Ii&&Ii.Object===Object&&Ii,ih=typeof self=="object"&&self&&self.Object===Object&&self,We=hs||ih||Function("return this")(),ji=r&&!r.nodeType&&r,Pn=ji&&!0&&t&&!t.nodeType&&t,ds=Pn&&Pn.exports===ji,Ki=ds&&hs.process,bt=(function(){try{var C=Pn&&Pn.require&&Pn.require("util").types;return C||Ki&&Ki.binding&&Ki.binding("util")}catch{}})(),ps=bt&&bt.isArrayBuffer,gs=bt&&bt.isDate,ms=bt&&bt.isMap,ys=bt&&bt.isRegExp,ws=bt&&bt.isSet,bs=bt&&bt.isTypedArray;function ct(C,P,A){switch(A.length){case 0:return C.call(P);case 1:return C.call(P,A[0]);case 2:return C.call(P,A[0],A[1]);case 3:return C.call(P,A[0],A[1],A[2])}return C.apply(P,A)}function oh(C,P,A,H){for(var ne=-1,pe=C==null?0:C.length;++ne<pe;){var Le=C[ne];P(H,Le,A(Le),C)}return H}function vt(C,P){for(var A=-1,H=C==null?0:C.length;++A<H&&P(C[A],A,C)!==!1;);return C}function ah(C,P){for(var A=C==null?0:C.length;A--&&P(C[A],A,C)!==!1;);return C}function vs(C,P){for(var A=-1,H=C==null?0:C.length;++A<H;)if(!P(C[A],A,C))return!1;return!0}function pn(C,P){for(var A=-1,H=C==null?0:C.length,ne=0,pe=[];++A<H;){var Le=C[A];P(Le,A,C)&&(pe[ne++]=Le)}return pe}function zr(C,P){var A=C==null?0:C.length;return!!A&&Vn(C,P,0)>-1}function Xi(C,P,A){for(var H=-1,ne=C==null?0:C.length;++H<ne;)if(A(P,C[H]))return!0;return!1}function Ie(C,P){for(var A=-1,H=C==null?0:C.length,ne=Array(H);++A<H;)ne[A]=P(C[A],A,C);return ne}function gn(C,P){for(var A=-1,H=P.length,ne=C.length;++A<H;)C[ne+A]=P[A];return C}function Ji(C,P,A,H){var ne=-1,pe=C==null?0:C.length;for(H&&pe&&(A=C[++ne]);++ne<pe;)A=P(A,C[ne],ne,C);return A}function sh(C,P,A,H){var ne=C==null?0:C.length;for(H&&ne&&(A=C[--ne]);ne--;)A=P(A,C[ne],ne,C);return A}function Zi(C,P){for(var A=-1,H=C==null?0:C.length;++A<H;)if(P(C[A],A,C))return!0;return!1}var uh=eo("length");function lh(C){return C.split("")}function ch(C){return C.match(wf)||[]}function xs(C,P,A){var H;return A(C,function(ne,pe,Le){if(P(ne,pe,Le))return H=pe,!1}),H}function qr(C,P,A,H){for(var ne=C.length,pe=A+(H?1:-1);H?pe--:++pe<ne;)if(P(C[pe],pe,C))return pe;return-1}function Vn(C,P,A){return P===P?_h(C,P,A):qr(C,_s,A)}function fh(C,P,A,H){for(var ne=A-1,pe=C.length;++ne<pe;)if(H(C[ne],P))return ne;return-1}function _s(C){return C!==C}function ks(C,P){var A=C==null?0:C.length;return A?no(C,P)/A:_}function eo(C){return function(P){return P==null?n:P[C]}}function to(C){return function(P){return C==null?n:C[P]}}function Ss(C,P,A,H,ne){return ne(C,function(pe,Le,ve){A=H?(H=!1,pe):P(A,pe,Le,ve)}),A}function hh(C,P){var A=C.length;for(C.sort(P);A--;)C[A]=C[A].value;return C}function no(C,P){for(var A,H=-1,ne=C.length;++H<ne;){var pe=P(C[H]);pe!==n&&(A=A===n?pe:A+pe)}return A}function ro(C,P){for(var A=-1,H=Array(C);++A<C;)H[A]=P(A);return H}function dh(C,P){return Ie(P,function(A){return[A,C[A]]})}function Cs(C){return C&&C.slice(0,As(C)+1).replace(Hi,"")}function ft(C){return function(P){return C(P)}}function io(C,P){return Ie(P,function(A){return C[A]})}function ur(C,P){return C.has(P)}function Is(C,P){for(var A=-1,H=C.length;++A<H&&Vn(P,C[A],0)>-1;);return A}function Es(C,P){for(var A=C.length;A--&&Vn(P,C[A],0)>-1;);return A}function ph(C,P){for(var A=C.length,H=0;A--;)C[A]===P&&++H;return H}var gh=to(Jf),mh=to(Zf);function yh(C){return"\\"+th[C]}function wh(C,P){return C==null?n:C[P]}function Qn(C){return Qf.test(C)}function bh(C){return jf.test(C)}function vh(C){for(var P,A=[];!(P=C.next()).done;)A.push(P.value);return A}function oo(C){var P=-1,A=Array(C.size);return C.forEach(function(H,ne){A[++P]=[ne,H]}),A}function Ts(C,P){return function(A){return C(P(A))}}function mn(C,P){for(var A=-1,H=C.length,ne=0,pe=[];++A<H;){var Le=C[A];(Le===P||Le===p)&&(C[A]=p,pe[ne++]=A)}return pe}function Hr(C){var P=-1,A=Array(C.size);return C.forEach(function(H){A[++P]=H}),A}function xh(C){var P=-1,A=Array(C.size);return C.forEach(function(H){A[++P]=[H,H]}),A}function _h(C,P,A){for(var H=A-1,ne=C.length;++H<ne;)if(C[H]===P)return H;return-1}function kh(C,P,A){for(var H=A+1;H--;)if(C[H]===P)return H;return H}function jn(C){return Qn(C)?Ch(C):uh(C)}function Rt(C){return Qn(C)?Ih(C):lh(C)}function As(C){for(var P=C.length;P--&&pf.test(C.charAt(P)););return P}var Sh=to(eh);function Ch(C){for(var P=Qi.lastIndex=0;Qi.test(C);)++P;return P}function Ih(C){return C.match(Qi)||[]}function Eh(C){return C.match(Vf)||[]}var Th=(function C(P){P=P==null?We:Kn.defaults(We.Object(),P,Kn.pick(We,Kf));var A=P.Array,H=P.Date,ne=P.Error,pe=P.Function,Le=P.Math,ve=P.Object,ao=P.RegExp,Ah=P.String,xt=P.TypeError,Ur=A.prototype,Ph=pe.prototype,Xn=ve.prototype,Yr=P["__core-js_shared__"],Gr=Ph.toString,we=Xn.hasOwnProperty,Mh=0,Ps=(function(){var e=/[^.]+$/.exec(Yr&&Yr.keys&&Yr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})(),Vr=Xn.toString,Oh=Gr.call(ve),Fh=We._,Rh=ao("^"+Gr.call(we).replace(qi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qr=ds?P.Buffer:n,yn=P.Symbol,jr=P.Uint8Array,Ms=Qr?Qr.allocUnsafe:n,Kr=Ts(ve.getPrototypeOf,ve),Os=ve.create,Fs=Xn.propertyIsEnumerable,Xr=Ur.splice,Rs=yn?yn.isConcatSpreadable:n,lr=yn?yn.iterator:n,Mn=yn?yn.toStringTag:n,Jr=(function(){try{var e=Dn(ve,"defineProperty");return e({},"",{}),e}catch{}})(),Lh=P.clearTimeout!==We.clearTimeout&&P.clearTimeout,Dh=H&&H.now!==We.Date.now&&H.now,Nh=P.setTimeout!==We.setTimeout&&P.setTimeout,Zr=Le.ceil,ei=Le.floor,so=ve.getOwnPropertySymbols,Bh=Qr?Qr.isBuffer:n,Ls=P.isFinite,$h=Ur.join,Wh=Ts(ve.keys,ve),De=Le.max,He=Le.min,zh=H.now,qh=P.parseInt,Ds=Le.random,Hh=Ur.reverse,uo=Dn(P,"DataView"),cr=Dn(P,"Map"),lo=Dn(P,"Promise"),Jn=Dn(P,"Set"),fr=Dn(P,"WeakMap"),hr=Dn(ve,"create"),ti=fr&&new fr,Zn={},Uh=Nn(uo),Yh=Nn(cr),Gh=Nn(lo),Vh=Nn(Jn),Qh=Nn(fr),ni=yn?yn.prototype:n,dr=ni?ni.valueOf:n,Ns=ni?ni.toString:n;function w(e){if(Me(e)&&!re(e)&&!(e instanceof le)){if(e instanceof _t)return e;if(we.call(e,"__wrapped__"))return Bu(e)}return new _t(e)}var er=(function(){function e(){}return function(i){if(!Te(i))return{};if(Os)return Os(i);e.prototype=i;var s=new e;return e.prototype=n,s}})();function ri(){}function _t(e,i){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=n}w.templateSettings={escape:uf,evaluate:lf,interpolate:Ga,variable:"",imports:{_:w}},w.prototype=ri.prototype,w.prototype.constructor=w,_t.prototype=er(ri.prototype),_t.prototype.constructor=_t;function le(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ae,this.__views__=[]}function jh(){var e=new le(this.__wrapped__);return e.__actions__=Je(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Je(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Je(this.__views__),e}function Kh(){if(this.__filtered__){var e=new le(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Xh(){var e=this.__wrapped__.value(),i=this.__dir__,s=re(e),h=i<0,m=s?e.length:0,v=lp(0,m,this.__views__),x=v.start,k=v.end,I=k-x,R=h?k:x-1,L=this.__iteratees__,N=L.length,q=0,Y=He(I,this.__takeCount__);if(!s||!h&&m==I&&Y==I)return su(e,this.__actions__);var J=[];e:for(;I--&&q<Y;){R+=i;for(var oe=-1,Z=e[R];++oe<N;){var ue=L[oe],fe=ue.iteratee,pt=ue.type,Qe=fe(Z);if(pt==ce)Z=Qe;else if(!Qe){if(pt==Ee)continue e;break e}}J[q++]=Z}return J}le.prototype=er(ri.prototype),le.prototype.constructor=le;function On(e){var i=-1,s=e==null?0:e.length;for(this.clear();++i<s;){var h=e[i];this.set(h[0],h[1])}}function Jh(){this.__data__=hr?hr(null):{},this.size=0}function Zh(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}function ed(e){var i=this.__data__;if(hr){var s=i[e];return s===d?n:s}return we.call(i,e)?i[e]:n}function td(e){var i=this.__data__;return hr?i[e]!==n:we.call(i,e)}function nd(e,i){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=hr&&i===n?d:i,this}On.prototype.clear=Jh,On.prototype.delete=Zh,On.prototype.get=ed,On.prototype.has=td,On.prototype.set=nd;function en(e){var i=-1,s=e==null?0:e.length;for(this.clear();++i<s;){var h=e[i];this.set(h[0],h[1])}}function rd(){this.__data__=[],this.size=0}function id(e){var i=this.__data__,s=ii(i,e);if(s<0)return!1;var h=i.length-1;return s==h?i.pop():Xr.call(i,s,1),--this.size,!0}function od(e){var i=this.__data__,s=ii(i,e);return s<0?n:i[s][1]}function ad(e){return ii(this.__data__,e)>-1}function sd(e,i){var s=this.__data__,h=ii(s,e);return h<0?(++this.size,s.push([e,i])):s[h][1]=i,this}en.prototype.clear=rd,en.prototype.delete=id,en.prototype.get=od,en.prototype.has=ad,en.prototype.set=sd;function tn(e){var i=-1,s=e==null?0:e.length;for(this.clear();++i<s;){var h=e[i];this.set(h[0],h[1])}}function ud(){this.size=0,this.__data__={hash:new On,map:new(cr||en),string:new On}}function ld(e){var i=mi(this,e).delete(e);return this.size-=i?1:0,i}function cd(e){return mi(this,e).get(e)}function fd(e){return mi(this,e).has(e)}function hd(e,i){var s=mi(this,e),h=s.size;return s.set(e,i),this.size+=s.size==h?0:1,this}tn.prototype.clear=ud,tn.prototype.delete=ld,tn.prototype.get=cd,tn.prototype.has=fd,tn.prototype.set=hd;function Fn(e){var i=-1,s=e==null?0:e.length;for(this.__data__=new tn;++i<s;)this.add(e[i])}function dd(e){return this.__data__.set(e,d),this}function pd(e){return this.__data__.has(e)}Fn.prototype.add=Fn.prototype.push=dd,Fn.prototype.has=pd;function Lt(e){var i=this.__data__=new en(e);this.size=i.size}function gd(){this.__data__=new en,this.size=0}function md(e){var i=this.__data__,s=i.delete(e);return this.size=i.size,s}function yd(e){return this.__data__.get(e)}function wd(e){return this.__data__.has(e)}function bd(e,i){var s=this.__data__;if(s instanceof en){var h=s.__data__;if(!cr||h.length<a-1)return h.push([e,i]),this.size=++s.size,this;s=this.__data__=new tn(h)}return s.set(e,i),this.size=s.size,this}Lt.prototype.clear=gd,Lt.prototype.delete=md,Lt.prototype.get=yd,Lt.prototype.has=wd,Lt.prototype.set=bd;function Bs(e,i){var s=re(e),h=!s&&Bn(e),m=!s&&!h&&_n(e),v=!s&&!h&&!m&&ir(e),x=s||h||m||v,k=x?ro(e.length,Ah):[],I=k.length;for(var R in e)(i||we.call(e,R))&&!(x&&(R=="length"||m&&(R=="offset"||R=="parent")||v&&(R=="buffer"||R=="byteLength"||R=="byteOffset")||an(R,I)))&&k.push(R);return k}function $s(e){var i=e.length;return i?e[xo(0,i-1)]:n}function vd(e,i){return yi(Je(e),Rn(i,0,e.length))}function xd(e){return yi(Je(e))}function co(e,i,s){(s!==n&&!Dt(e[i],s)||s===n&&!(i in e))&&nn(e,i,s)}function pr(e,i,s){var h=e[i];(!(we.call(e,i)&&Dt(h,s))||s===n&&!(i in e))&&nn(e,i,s)}function ii(e,i){for(var s=e.length;s--;)if(Dt(e[s][0],i))return s;return-1}function _d(e,i,s,h){return wn(e,function(m,v,x){i(h,m,s(m),x)}),h}function Ws(e,i){return e&&Ht(i,Be(i),e)}function kd(e,i){return e&&Ht(i,et(i),e)}function nn(e,i,s){i=="__proto__"&&Jr?Jr(e,i,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[i]=s}function fo(e,i){for(var s=-1,h=i.length,m=A(h),v=e==null;++s<h;)m[s]=v?n:Go(e,i[s]);return m}function Rn(e,i,s){return e===e&&(s!==n&&(e=e<=s?e:s),i!==n&&(e=e>=i?e:i)),e}function kt(e,i,s,h,m,v){var x,k=i&g,I=i&b,R=i&y;if(s&&(x=m?s(e,h,m,v):s(e)),x!==n)return x;if(!Te(e))return e;var L=re(e);if(L){if(x=fp(e),!k)return Je(e,x)}else{var N=Ue(e),q=N==Un||N==Rr;if(_n(e))return cu(e,k);if(N==wt||N==Ke||q&&!m){if(x=I||q?{}:Au(e),!k)return I?ep(e,kd(x,e)):Zd(e,Ws(x,e))}else{if(!_e[N])return m?e:{};x=hp(e,N,k)}}v||(v=new Lt);var Y=v.get(e);if(Y)return Y;v.set(e,x),il(e)?e.forEach(function(Z){x.add(kt(Z,i,s,Z,e,v))}):nl(e)&&e.forEach(function(Z,ue){x.set(ue,kt(Z,i,s,ue,e,v))});var J=R?I?Oo:Mo:I?et:Be,oe=L?n:J(e);return vt(oe||e,function(Z,ue){oe&&(ue=Z,Z=e[ue]),pr(x,ue,kt(Z,i,s,ue,e,v))}),x}function Sd(e){var i=Be(e);return function(s){return zs(s,e,i)}}function zs(e,i,s){var h=s.length;if(e==null)return!h;for(e=ve(e);h--;){var m=s[h],v=i[m],x=e[m];if(x===n&&!(m in e)||!v(x))return!1}return!0}function qs(e,i,s){if(typeof e!="function")throw new xt(u);return xr(function(){e.apply(n,s)},i)}function gr(e,i,s,h){var m=-1,v=zr,x=!0,k=e.length,I=[],R=i.length;if(!k)return I;s&&(i=Ie(i,ft(s))),h?(v=Xi,x=!1):i.length>=a&&(v=ur,x=!1,i=new Fn(i));e:for(;++m<k;){var L=e[m],N=s==null?L:s(L);if(L=h||L!==0?L:0,x&&N===N){for(var q=R;q--;)if(i[q]===N)continue e;I.push(L)}else v(i,N,h)||I.push(L)}return I}var wn=gu(qt),Hs=gu(po,!0);function Cd(e,i){var s=!0;return wn(e,function(h,m,v){return s=!!i(h,m,v),s}),s}function oi(e,i,s){for(var h=-1,m=e.length;++h<m;){var v=e[h],x=i(v);if(x!=null&&(k===n?x===x&&!dt(x):s(x,k)))var k=x,I=v}return I}function Id(e,i,s,h){var m=e.length;for(s=ie(s),s<0&&(s=-s>m?0:m+s),h=h===n||h>m?m:ie(h),h<0&&(h+=m),h=s>h?0:al(h);s<h;)e[s++]=i;return e}function Us(e,i){var s=[];return wn(e,function(h,m,v){i(h,m,v)&&s.push(h)}),s}function ze(e,i,s,h,m){var v=-1,x=e.length;for(s||(s=pp),m||(m=[]);++v<x;){var k=e[v];i>0&&s(k)?i>1?ze(k,i-1,s,h,m):gn(m,k):h||(m[m.length]=k)}return m}var ho=mu(),Ys=mu(!0);function qt(e,i){return e&&ho(e,i,Be)}function po(e,i){return e&&Ys(e,i,Be)}function ai(e,i){return pn(i,function(s){return sn(e[s])})}function Ln(e,i){i=vn(i,e);for(var s=0,h=i.length;e!=null&&s<h;)e=e[Ut(i[s++])];return s&&s==h?e:n}function Gs(e,i,s){var h=i(e);return re(e)?h:gn(h,s(e))}function Ge(e){return e==null?e===n?zi:Lr:Mn&&Mn in ve(e)?up(e):xp(e)}function go(e,i){return e>i}function Ed(e,i){return e!=null&&we.call(e,i)}function Td(e,i){return e!=null&&i in ve(e)}function Ad(e,i,s){return e>=He(i,s)&&e<De(i,s)}function mo(e,i,s){for(var h=s?Xi:zr,m=e[0].length,v=e.length,x=v,k=A(v),I=1/0,R=[];x--;){var L=e[x];x&&i&&(L=Ie(L,ft(i))),I=He(L.length,I),k[x]=!s&&(i||m>=120&&L.length>=120)?new Fn(x&&L):n}L=e[0];var N=-1,q=k[0];e:for(;++N<m&&R.length<I;){var Y=L[N],J=i?i(Y):Y;if(Y=s||Y!==0?Y:0,!(q?ur(q,J):h(R,J,s))){for(x=v;--x;){var oe=k[x];if(!(oe?ur(oe,J):h(e[x],J,s)))continue e}q&&q.push(J),R.push(Y)}}return R}function Pd(e,i,s,h){return qt(e,function(m,v,x){i(h,s(m),v,x)}),h}function mr(e,i,s){i=vn(i,e),e=Fu(e,i);var h=e==null?e:e[Ut(Ct(i))];return h==null?n:ct(h,e,s)}function Vs(e){return Me(e)&&Ge(e)==Ke}function Md(e){return Me(e)&&Ge(e)==$}function Od(e){return Me(e)&&Ge(e)==yt}function yr(e,i,s,h,m){return e===i?!0:e==null||i==null||!Me(e)&&!Me(i)?e!==e&&i!==i:Fd(e,i,s,h,yr,m)}function Fd(e,i,s,h,m,v){var x=re(e),k=re(i),I=x?Pe:Ue(e),R=k?Pe:Ue(i);I=I==Ke?wt:I,R=R==Ke?wt:R;var L=I==wt,N=R==wt,q=I==R;if(q&&_n(e)){if(!_n(i))return!1;x=!0,L=!1}if(q&&!L)return v||(v=new Lt),x||ir(e)?Iu(e,i,s,h,m,v):ap(e,i,I,s,h,m,v);if(!(s&T)){var Y=L&&we.call(e,"__wrapped__"),J=N&&we.call(i,"__wrapped__");if(Y||J){var oe=Y?e.value():e,Z=J?i.value():i;return v||(v=new Lt),m(oe,Z,s,h,v)}}return q?(v||(v=new Lt),sp(e,i,s,h,m,v)):!1}function Rd(e){return Me(e)&&Ue(e)==st}function yo(e,i,s,h){var m=s.length,v=m,x=!h;if(e==null)return!v;for(e=ve(e);m--;){var k=s[m];if(x&&k[2]?k[1]!==e[k[0]]:!(k[0]in e))return!1}for(;++m<v;){k=s[m];var I=k[0],R=e[I],L=k[1];if(x&&k[2]){if(R===n&&!(I in e))return!1}else{var N=new Lt;if(h)var q=h(R,L,I,e,i,N);if(!(q===n?yr(L,R,T|M,h,N):q))return!1}}return!0}function Qs(e){if(!Te(e)||mp(e))return!1;var i=sn(e)?Rh:Sf;return i.test(Nn(e))}function Ld(e){return Me(e)&&Ge(e)==dn}function Dd(e){return Me(e)&&Ue(e)==ut}function Nd(e){return Me(e)&&ki(e.length)&&!!Ce[Ge(e)]}function js(e){return typeof e=="function"?e:e==null?tt:typeof e=="object"?re(e)?Js(e[0],e[1]):Xs(e):yl(e)}function wo(e){if(!vr(e))return Wh(e);var i=[];for(var s in ve(e))we.call(e,s)&&s!="constructor"&&i.push(s);return i}function Bd(e){if(!Te(e))return vp(e);var i=vr(e),s=[];for(var h in e)h=="constructor"&&(i||!we.call(e,h))||s.push(h);return s}function bo(e,i){return e<i}function Ks(e,i){var s=-1,h=Ze(e)?A(e.length):[];return wn(e,function(m,v,x){h[++s]=i(m,v,x)}),h}function Xs(e){var i=Ro(e);return i.length==1&&i[0][2]?Mu(i[0][0],i[0][1]):function(s){return s===e||yo(s,e,i)}}function Js(e,i){return Do(e)&&Pu(i)?Mu(Ut(e),i):function(s){var h=Go(s,e);return h===n&&h===i?Vo(s,e):yr(i,h,T|M)}}function si(e,i,s,h,m){e!==i&&ho(i,function(v,x){if(m||(m=new Lt),Te(v))$d(e,i,x,s,si,h,m);else{var k=h?h(Bo(e,x),v,x+"",e,i,m):n;k===n&&(k=v),co(e,x,k)}},et)}function $d(e,i,s,h,m,v,x){var k=Bo(e,s),I=Bo(i,s),R=x.get(I);if(R){co(e,s,R);return}var L=v?v(k,I,s+"",e,i,x):n,N=L===n;if(N){var q=re(I),Y=!q&&_n(I),J=!q&&!Y&&ir(I);L=I,q||Y||J?re(k)?L=k:Oe(k)?L=Je(k):Y?(N=!1,L=cu(I,!0)):J?(N=!1,L=fu(I,!0)):L=[]:_r(I)||Bn(I)?(L=k,Bn(k)?L=sl(k):(!Te(k)||sn(k))&&(L=Au(I))):N=!1}N&&(x.set(I,L),m(L,I,h,v,x),x.delete(I)),co(e,s,L)}function Zs(e,i){var s=e.length;if(s)return i+=i<0?s:0,an(i,s)?e[i]:n}function eu(e,i,s){i.length?i=Ie(i,function(v){return re(v)?function(x){return Ln(x,v.length===1?v[0]:v)}:v}):i=[tt];var h=-1;i=Ie(i,ft(K()));var m=Ks(e,function(v,x,k){var I=Ie(i,function(R){return R(v)});return{criteria:I,index:++h,value:v}});return hh(m,function(v,x){return Jd(v,x,s)})}function Wd(e,i){return tu(e,i,function(s,h){return Vo(e,h)})}function tu(e,i,s){for(var h=-1,m=i.length,v={};++h<m;){var x=i[h],k=Ln(e,x);s(k,x)&&wr(v,vn(x,e),k)}return v}function zd(e){return function(i){return Ln(i,e)}}function vo(e,i,s,h){var m=h?fh:Vn,v=-1,x=i.length,k=e;for(e===i&&(i=Je(i)),s&&(k=Ie(e,ft(s)));++v<x;)for(var I=0,R=i[v],L=s?s(R):R;(I=m(k,L,I,h))>-1;)k!==e&&Xr.call(k,I,1),Xr.call(e,I,1);return e}function nu(e,i){for(var s=e?i.length:0,h=s-1;s--;){var m=i[s];if(s==h||m!==v){var v=m;an(m)?Xr.call(e,m,1):So(e,m)}}return e}function xo(e,i){return e+ei(Ds()*(i-e+1))}function qd(e,i,s,h){for(var m=-1,v=De(Zr((i-e)/(s||1)),0),x=A(v);v--;)x[h?v:++m]=e,e+=s;return x}function _o(e,i){var s="";if(!e||i<1||i>Re)return s;do i%2&&(s+=e),i=ei(i/2),i&&(e+=e);while(i);return s}function se(e,i){return $o(Ou(e,i,tt),e+"")}function Hd(e){return $s(or(e))}function Ud(e,i){var s=or(e);return yi(s,Rn(i,0,s.length))}function wr(e,i,s,h){if(!Te(e))return e;i=vn(i,e);for(var m=-1,v=i.length,x=v-1,k=e;k!=null&&++m<v;){var I=Ut(i[m]),R=s;if(I==="__proto__"||I==="constructor"||I==="prototype")return e;if(m!=x){var L=k[I];R=h?h(L,I,k):n,R===n&&(R=Te(L)?L:an(i[m+1])?[]:{})}pr(k,I,R),k=k[I]}return e}var ru=ti?function(e,i){return ti.set(e,i),e}:tt,Yd=Jr?function(e,i){return Jr(e,"toString",{configurable:!0,enumerable:!1,value:jo(i),writable:!0})}:tt;function Gd(e){return yi(or(e))}function St(e,i,s){var h=-1,m=e.length;i<0&&(i=-i>m?0:m+i),s=s>m?m:s,s<0&&(s+=m),m=i>s?0:s-i>>>0,i>>>=0;for(var v=A(m);++h<m;)v[h]=e[h+i];return v}function Vd(e,i){var s;return wn(e,function(h,m,v){return s=i(h,m,v),!s}),!!s}function ui(e,i,s){var h=0,m=e==null?h:e.length;if(typeof i=="number"&&i===i&&m<=S){for(;h<m;){var v=h+m>>>1,x=e[v];x!==null&&!dt(x)&&(s?x<=i:x<i)?h=v+1:m=v}return m}return ko(e,i,tt,s)}function ko(e,i,s,h){var m=0,v=e==null?0:e.length;if(v===0)return 0;i=s(i);for(var x=i!==i,k=i===null,I=dt(i),R=i===n;m<v;){var L=ei((m+v)/2),N=s(e[L]),q=N!==n,Y=N===null,J=N===N,oe=dt(N);if(x)var Z=h||J;else R?Z=J&&(h||q):k?Z=J&&q&&(h||!Y):I?Z=J&&q&&!Y&&(h||!oe):Y||oe?Z=!1:Z=h?N<=i:N<i;Z?m=L+1:v=L}return He(v,Mt)}function iu(e,i){for(var s=-1,h=e.length,m=0,v=[];++s<h;){var x=e[s],k=i?i(x):x;if(!s||!Dt(k,I)){var I=k;v[m++]=x===0?0:x}}return v}function ou(e){return typeof e=="number"?e:dt(e)?_:+e}function ht(e){if(typeof e=="string")return e;if(re(e))return Ie(e,ht)+"";if(dt(e))return Ns?Ns.call(e):"";var i=e+"";return i=="0"&&1/e==-Se?"-0":i}function bn(e,i,s){var h=-1,m=zr,v=e.length,x=!0,k=[],I=k;if(s)x=!1,m=Xi;else if(v>=a){var R=i?null:ip(e);if(R)return Hr(R);x=!1,m=ur,I=new Fn}else I=i?[]:k;e:for(;++h<v;){var L=e[h],N=i?i(L):L;if(L=s||L!==0?L:0,x&&N===N){for(var q=I.length;q--;)if(I[q]===N)continue e;i&&I.push(N),k.push(L)}else m(I,N,s)||(I!==k&&I.push(N),k.push(L))}return k}function So(e,i){return i=vn(i,e),e=Fu(e,i),e==null||delete e[Ut(Ct(i))]}function au(e,i,s,h){return wr(e,i,s(Ln(e,i)),h)}function li(e,i,s,h){for(var m=e.length,v=h?m:-1;(h?v--:++v<m)&&i(e[v],v,e););return s?St(e,h?0:v,h?v+1:m):St(e,h?v+1:0,h?m:v)}function su(e,i){var s=e;return s instanceof le&&(s=s.value()),Ji(i,function(h,m){return m.func.apply(m.thisArg,gn([h],m.args))},s)}function Co(e,i,s){var h=e.length;if(h<2)return h?bn(e[0]):[];for(var m=-1,v=A(h);++m<h;)for(var x=e[m],k=-1;++k<h;)k!=m&&(v[m]=gr(v[m]||x,e[k],i,s));return bn(ze(v,1),i,s)}function uu(e,i,s){for(var h=-1,m=e.length,v=i.length,x={};++h<m;){var k=h<v?i[h]:n;s(x,e[h],k)}return x}function Io(e){return Oe(e)?e:[]}function Eo(e){return typeof e=="function"?e:tt}function vn(e,i){return re(e)?e:Do(e,i)?[e]:Nu(ye(e))}var Qd=se;function xn(e,i,s){var h=e.length;return s=s===n?h:s,!i&&s>=h?e:St(e,i,s)}var lu=Lh||function(e){return We.clearTimeout(e)};function cu(e,i){if(i)return e.slice();var s=e.length,h=Ms?Ms(s):new e.constructor(s);return e.copy(h),h}function To(e){var i=new e.constructor(e.byteLength);return new jr(i).set(new jr(e)),i}function jd(e,i){var s=i?To(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.byteLength)}function Kd(e){var i=new e.constructor(e.source,Va.exec(e));return i.lastIndex=e.lastIndex,i}function Xd(e){return dr?ve(dr.call(e)):{}}function fu(e,i){var s=i?To(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}function hu(e,i){if(e!==i){var s=e!==n,h=e===null,m=e===e,v=dt(e),x=i!==n,k=i===null,I=i===i,R=dt(i);if(!k&&!R&&!v&&e>i||v&&x&&I&&!k&&!R||h&&x&&I||!s&&I||!m)return 1;if(!h&&!v&&!R&&e<i||R&&s&&m&&!h&&!v||k&&s&&m||!x&&m||!I)return-1}return 0}function Jd(e,i,s){for(var h=-1,m=e.criteria,v=i.criteria,x=m.length,k=s.length;++h<x;){var I=hu(m[h],v[h]);if(I){if(h>=k)return I;var R=s[h];return I*(R=="desc"?-1:1)}}return e.index-i.index}function du(e,i,s,h){for(var m=-1,v=e.length,x=s.length,k=-1,I=i.length,R=De(v-x,0),L=A(I+R),N=!h;++k<I;)L[k]=i[k];for(;++m<x;)(N||m<v)&&(L[s[m]]=e[m]);for(;R--;)L[k++]=e[m++];return L}function pu(e,i,s,h){for(var m=-1,v=e.length,x=-1,k=s.length,I=-1,R=i.length,L=De(v-k,0),N=A(L+R),q=!h;++m<L;)N[m]=e[m];for(var Y=m;++I<R;)N[Y+I]=i[I];for(;++x<k;)(q||m<v)&&(N[Y+s[x]]=e[m++]);return N}function Je(e,i){var s=-1,h=e.length;for(i||(i=A(h));++s<h;)i[s]=e[s];return i}function Ht(e,i,s,h){var m=!s;s||(s={});for(var v=-1,x=i.length;++v<x;){var k=i[v],I=h?h(s[k],e[k],k,s,e):n;I===n&&(I=e[k]),m?nn(s,k,I):pr(s,k,I)}return s}function Zd(e,i){return Ht(e,Lo(e),i)}function ep(e,i){return Ht(e,Eu(e),i)}function ci(e,i){return function(s,h){var m=re(s)?oh:_d,v=i?i():{};return m(s,e,K(h,2),v)}}function tr(e){return se(function(i,s){var h=-1,m=s.length,v=m>1?s[m-1]:n,x=m>2?s[2]:n;for(v=e.length>3&&typeof v=="function"?(m--,v):n,x&&Ve(s[0],s[1],x)&&(v=m<3?n:v,m=1),i=ve(i);++h<m;){var k=s[h];k&&e(i,k,h,v)}return i})}function gu(e,i){return function(s,h){if(s==null)return s;if(!Ze(s))return e(s,h);for(var m=s.length,v=i?m:-1,x=ve(s);(i?v--:++v<m)&&h(x[v],v,x)!==!1;);return s}}function mu(e){return function(i,s,h){for(var m=-1,v=ve(i),x=h(i),k=x.length;k--;){var I=x[e?k:++m];if(s(v[I],I,v)===!1)break}return i}}function tp(e,i,s){var h=i&B,m=br(e);function v(){var x=this&&this!==We&&this instanceof v?m:e;return x.apply(h?s:this,arguments)}return v}function yu(e){return function(i){i=ye(i);var s=Qn(i)?Rt(i):n,h=s?s[0]:i.charAt(0),m=s?xn(s,1).join(""):i.slice(1);return h[e]()+m}}function nr(e){return function(i){return Ji(gl(pl(i).replace(Yf,"")),e,"")}}function br(e){return function(){var i=arguments;switch(i.length){case 0:return new e;case 1:return new e(i[0]);case 2:return new e(i[0],i[1]);case 3:return new e(i[0],i[1],i[2]);case 4:return new e(i[0],i[1],i[2],i[3]);case 5:return new e(i[0],i[1],i[2],i[3],i[4]);case 6:return new e(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new e(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var s=er(e.prototype),h=e.apply(s,i);return Te(h)?h:s}}function np(e,i,s){var h=br(e);function m(){for(var v=arguments.length,x=A(v),k=v,I=rr(m);k--;)x[k]=arguments[k];var R=v<3&&x[0]!==I&&x[v-1]!==I?[]:mn(x,I);if(v-=R.length,v<s)return _u(e,i,fi,m.placeholder,n,x,R,n,n,s-v);var L=this&&this!==We&&this instanceof m?h:e;return ct(L,this,x)}return m}function wu(e){return function(i,s,h){var m=ve(i);if(!Ze(i)){var v=K(s,3);i=Be(i),s=function(k){return v(m[k],k,m)}}var x=e(i,s,h);return x>-1?m[v?i[x]:x]:n}}function bu(e){return on(function(i){var s=i.length,h=s,m=_t.prototype.thru;for(e&&i.reverse();h--;){var v=i[h];if(typeof v!="function")throw new xt(u);if(m&&!x&&gi(v)=="wrapper")var x=new _t([],!0)}for(h=x?h:s;++h<s;){v=i[h];var k=gi(v),I=k=="wrapper"?Fo(v):n;I&&No(I[0])&&I[1]==(U|z|F|Q)&&!I[4].length&&I[9]==1?x=x[gi(I[0])].apply(x,I[3]):x=v.length==1&&No(v)?x[k]():x.thru(v)}return function(){var R=arguments,L=R[0];if(x&&R.length==1&&re(L))return x.plant(L).value();for(var N=0,q=s?i[N].apply(this,R):L;++N<s;)q=i[N].call(this,q);return q}})}function fi(e,i,s,h,m,v,x,k,I,R){var L=i&U,N=i&B,q=i&D,Y=i&(z|W),J=i&ee,oe=q?n:br(e);function Z(){for(var ue=arguments.length,fe=A(ue),pt=ue;pt--;)fe[pt]=arguments[pt];if(Y)var Qe=rr(Z),gt=ph(fe,Qe);if(h&&(fe=du(fe,h,m,Y)),v&&(fe=pu(fe,v,x,Y)),ue-=gt,Y&&ue<R){var Fe=mn(fe,Qe);return _u(e,i,fi,Z.placeholder,s,fe,Fe,k,I,R-ue)}var Nt=N?s:this,ln=q?Nt[e]:e;return ue=fe.length,k?fe=_p(fe,k):J&&ue>1&&fe.reverse(),L&&I<ue&&(fe.length=I),this&&this!==We&&this instanceof Z&&(ln=oe||br(ln)),ln.apply(Nt,fe)}return Z}function vu(e,i){return function(s,h){return Pd(s,e,i(h),{})}}function hi(e,i){return function(s,h){var m;if(s===n&&h===n)return i;if(s!==n&&(m=s),h!==n){if(m===n)return h;typeof s=="string"||typeof h=="string"?(s=ht(s),h=ht(h)):(s=ou(s),h=ou(h)),m=e(s,h)}return m}}function Ao(e){return on(function(i){return i=Ie(i,ft(K())),se(function(s){var h=this;return e(i,function(m){return ct(m,h,s)})})})}function di(e,i){i=i===n?" ":ht(i);var s=i.length;if(s<2)return s?_o(i,e):i;var h=_o(i,Zr(e/jn(i)));return Qn(i)?xn(Rt(h),0,e).join(""):h.slice(0,e)}function rp(e,i,s,h){var m=i&B,v=br(e);function x(){for(var k=-1,I=arguments.length,R=-1,L=h.length,N=A(L+I),q=this&&this!==We&&this instanceof x?v:e;++R<L;)N[R]=h[R];for(;I--;)N[R++]=arguments[++k];return ct(q,m?s:this,N)}return x}function xu(e){return function(i,s,h){return h&&typeof h!="number"&&Ve(i,s,h)&&(s=h=n),i=un(i),s===n?(s=i,i=0):s=un(s),h=h===n?i<s?1:-1:un(h),qd(i,s,h,e)}}function pi(e){return function(i,s){return typeof i=="string"&&typeof s=="string"||(i=It(i),s=It(s)),e(i,s)}}function _u(e,i,s,h,m,v,x,k,I,R){var L=i&z,N=L?x:n,q=L?n:x,Y=L?v:n,J=L?n:v;i|=L?F:E,i&=~(L?E:F),i&G||(i&=-4);var oe=[e,i,m,Y,N,J,q,k,I,R],Z=s.apply(n,oe);return No(e)&&Ru(Z,oe),Z.placeholder=h,Lu(Z,e,i)}function Po(e){var i=Le[e];return function(s,h){if(s=It(s),h=h==null?0:He(ie(h),292),h&&Ls(s)){var m=(ye(s)+"e").split("e"),v=i(m[0]+"e"+(+m[1]+h));return m=(ye(v)+"e").split("e"),+(m[0]+"e"+(+m[1]-h))}return i(s)}}var ip=Jn&&1/Hr(new Jn([,-0]))[1]==Se?function(e){return new Jn(e)}:Jo;function ku(e){return function(i){var s=Ue(i);return s==st?oo(i):s==ut?xh(i):dh(i,e(i))}}function rn(e,i,s,h,m,v,x,k){var I=i&D;if(!I&&typeof e!="function")throw new xt(u);var R=h?h.length:0;if(R||(i&=-97,h=m=n),x=x===n?x:De(ie(x),0),k=k===n?k:ie(k),R-=m?m.length:0,i&E){var L=h,N=m;h=m=n}var q=I?n:Fo(e),Y=[e,i,s,h,m,L,N,v,x,k];if(q&&bp(Y,q),e=Y[0],i=Y[1],s=Y[2],h=Y[3],m=Y[4],k=Y[9]=Y[9]===n?I?0:e.length:De(Y[9]-R,0),!k&&i&(z|W)&&(i&=-25),!i||i==B)var J=tp(e,i,s);else i==z||i==W?J=np(e,i,k):(i==F||i==(B|F))&&!m.length?J=rp(e,i,s,h):J=fi.apply(n,Y);var oe=q?ru:Ru;return Lu(oe(J,Y),e,i)}function Su(e,i,s,h){return e===n||Dt(e,Xn[s])&&!we.call(h,s)?i:e}function Cu(e,i,s,h,m,v){return Te(e)&&Te(i)&&(v.set(i,e),si(e,i,n,Cu,v),v.delete(i)),e}function op(e){return _r(e)?n:e}function Iu(e,i,s,h,m,v){var x=s&T,k=e.length,I=i.length;if(k!=I&&!(x&&I>k))return!1;var R=v.get(e),L=v.get(i);if(R&&L)return R==i&&L==e;var N=-1,q=!0,Y=s&M?new Fn:n;for(v.set(e,i),v.set(i,e);++N<k;){var J=e[N],oe=i[N];if(h)var Z=x?h(oe,J,N,i,e,v):h(J,oe,N,e,i,v);if(Z!==n){if(Z)continue;q=!1;break}if(Y){if(!Zi(i,function(ue,fe){if(!ur(Y,fe)&&(J===ue||m(J,ue,s,h,v)))return Y.push(fe)})){q=!1;break}}else if(!(J===oe||m(J,oe,s,h,v))){q=!1;break}}return v.delete(e),v.delete(i),q}function ap(e,i,s,h,m,v,x){switch(s){case X:if(e.byteLength!=i.byteLength||e.byteOffset!=i.byteOffset)return!1;e=e.buffer,i=i.buffer;case $:return!(e.byteLength!=i.byteLength||!v(new jr(e),new jr(i)));case Xe:case yt:case hn:return Dt(+e,+i);case Xt:return e.name==i.name&&e.message==i.message;case dn:case Tn:return e==i+"";case st:var k=oo;case ut:var I=h&T;if(k||(k=Hr),e.size!=i.size&&!I)return!1;var R=x.get(e);if(R)return R==i;h|=M,x.set(e,i);var L=Iu(k(e),k(i),h,m,v,x);return x.delete(e),L;case Yn:if(dr)return dr.call(e)==dr.call(i)}return!1}function sp(e,i,s,h,m,v){var x=s&T,k=Mo(e),I=k.length,R=Mo(i),L=R.length;if(I!=L&&!x)return!1;for(var N=I;N--;){var q=k[N];if(!(x?q in i:we.call(i,q)))return!1}var Y=v.get(e),J=v.get(i);if(Y&&J)return Y==i&&J==e;var oe=!0;v.set(e,i),v.set(i,e);for(var Z=x;++N<I;){q=k[N];var ue=e[q],fe=i[q];if(h)var pt=x?h(fe,ue,q,i,e,v):h(ue,fe,q,e,i,v);if(!(pt===n?ue===fe||m(ue,fe,s,h,v):pt)){oe=!1;break}Z||(Z=q=="constructor")}if(oe&&!Z){var Qe=e.constructor,gt=i.constructor;Qe!=gt&&"constructor"in e&&"constructor"in i&&!(typeof Qe=="function"&&Qe instanceof Qe&&typeof gt=="function"&&gt instanceof gt)&&(oe=!1)}return v.delete(e),v.delete(i),oe}function on(e){return $o(Ou(e,n,zu),e+"")}function Mo(e){return Gs(e,Be,Lo)}function Oo(e){return Gs(e,et,Eu)}var Fo=ti?function(e){return ti.get(e)}:Jo;function gi(e){for(var i=e.name+"",s=Zn[i],h=we.call(Zn,i)?s.length:0;h--;){var m=s[h],v=m.func;if(v==null||v==e)return m.name}return i}function rr(e){var i=we.call(w,"placeholder")?w:e;return i.placeholder}function K(){var e=w.iteratee||Ko;return e=e===Ko?js:e,arguments.length?e(arguments[0],arguments[1]):e}function mi(e,i){var s=e.__data__;return gp(i)?s[typeof i=="string"?"string":"hash"]:s.map}function Ro(e){for(var i=Be(e),s=i.length;s--;){var h=i[s],m=e[h];i[s]=[h,m,Pu(m)]}return i}function Dn(e,i){var s=wh(e,i);return Qs(s)?s:n}function up(e){var i=we.call(e,Mn),s=e[Mn];try{e[Mn]=n;var h=!0}catch{}var m=Vr.call(e);return h&&(i?e[Mn]=s:delete e[Mn]),m}var Lo=so?function(e){return e==null?[]:(e=ve(e),pn(so(e),function(i){return Fs.call(e,i)}))}:Zo,Eu=so?function(e){for(var i=[];e;)gn(i,Lo(e)),e=Kr(e);return i}:Zo,Ue=Ge;(uo&&Ue(new uo(new ArrayBuffer(1)))!=X||cr&&Ue(new cr)!=st||lo&&Ue(lo.resolve())!=Dr||Jn&&Ue(new Jn)!=ut||fr&&Ue(new fr)!=An)&&(Ue=function(e){var i=Ge(e),s=i==wt?e.constructor:n,h=s?Nn(s):"";if(h)switch(h){case Uh:return X;case Yh:return st;case Gh:return Dr;case Vh:return ut;case Qh:return An}return i});function lp(e,i,s){for(var h=-1,m=s.length;++h<m;){var v=s[h],x=v.size;switch(v.type){case"drop":e+=x;break;case"dropRight":i-=x;break;case"take":i=He(i,e+x);break;case"takeRight":e=De(e,i-x);break}}return{start:e,end:i}}function cp(e){var i=e.match(mf);return i?i[1].split(yf):[]}function Tu(e,i,s){i=vn(i,e);for(var h=-1,m=i.length,v=!1;++h<m;){var x=Ut(i[h]);if(!(v=e!=null&&s(e,x)))break;e=e[x]}return v||++h!=m?v:(m=e==null?0:e.length,!!m&&ki(m)&&an(x,m)&&(re(e)||Bn(e)))}function fp(e){var i=e.length,s=new e.constructor(i);return i&&typeof e[0]=="string"&&we.call(e,"index")&&(s.index=e.index,s.input=e.input),s}function Au(e){return typeof e.constructor=="function"&&!vr(e)?er(Kr(e)):{}}function hp(e,i,s){var h=e.constructor;switch(i){case $:return To(e);case Xe:case yt:return new h(+e);case X:return jd(e,s);case ae:case de:case Ye:case Ot:case lt:case Jt:case Zt:case $e:case zt:return fu(e,s);case st:return new h;case hn:case Tn:return new h(e);case dn:return Kd(e);case ut:return new h;case Yn:return Xd(e)}}function dp(e,i){var s=i.length;if(!s)return e;var h=s-1;return i[h]=(s>1?"& ":"")+i[h],i=i.join(s>2?", ":" "),e.replace(gf,`{
/* [wrapped with `+i+`] */
`)}function pp(e){return re(e)||Bn(e)||!!(Rs&&e&&e[Rs])}function an(e,i){var s=typeof e;return i=i??Re,!!i&&(s=="number"||s!="symbol"&&If.test(e))&&e>-1&&e%1==0&&e<i}function Ve(e,i,s){if(!Te(s))return!1;var h=typeof i;return(h=="number"?Ze(s)&&an(i,s.length):h=="string"&&i in s)?Dt(s[i],e):!1}function Do(e,i){if(re(e))return!1;var s=typeof e;return s=="number"||s=="symbol"||s=="boolean"||e==null||dt(e)?!0:ff.test(e)||!cf.test(e)||i!=null&&e in ve(i)}function gp(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null}function No(e){var i=gi(e),s=w[i];if(typeof s!="function"||!(i in le.prototype))return!1;if(e===s)return!0;var h=Fo(s);return!!h&&e===h[0]}function mp(e){return!!Ps&&Ps in e}var yp=Yr?sn:ea;function vr(e){var i=e&&e.constructor,s=typeof i=="function"&&i.prototype||Xn;return e===s}function Pu(e){return e===e&&!Te(e)}function Mu(e,i){return function(s){return s==null?!1:s[e]===i&&(i!==n||e in ve(s))}}function wp(e){var i=xi(e,function(h){return s.size===f&&s.clear(),h}),s=i.cache;return i}function bp(e,i){var s=e[1],h=i[1],m=s|h,v=m<(B|D|U),x=h==U&&s==z||h==U&&s==Q&&e[7].length<=i[8]||h==(U|Q)&&i[7].length<=i[8]&&s==z;if(!(v||x))return e;h&B&&(e[2]=i[2],m|=s&B?0:G);var k=i[3];if(k){var I=e[3];e[3]=I?du(I,k,i[4]):k,e[4]=I?mn(e[3],p):i[4]}return k=i[5],k&&(I=e[5],e[5]=I?pu(I,k,i[6]):k,e[6]=I?mn(e[5],p):i[6]),k=i[7],k&&(e[7]=k),h&U&&(e[8]=e[8]==null?i[8]:He(e[8],i[8])),e[9]==null&&(e[9]=i[9]),e[0]=i[0],e[1]=m,e}function vp(e){var i=[];if(e!=null)for(var s in ve(e))i.push(s);return i}function xp(e){return Vr.call(e)}function Ou(e,i,s){return i=De(i===n?e.length-1:i,0),function(){for(var h=arguments,m=-1,v=De(h.length-i,0),x=A(v);++m<v;)x[m]=h[i+m];m=-1;for(var k=A(i+1);++m<i;)k[m]=h[m];return k[i]=s(x),ct(e,this,k)}}function Fu(e,i){return i.length<2?e:Ln(e,St(i,0,-1))}function _p(e,i){for(var s=e.length,h=He(i.length,s),m=Je(e);h--;){var v=i[h];e[h]=an(v,s)?m[v]:n}return e}function Bo(e,i){if(!(i==="constructor"&&typeof e[i]=="function")&&i!="__proto__")return e[i]}var Ru=Du(ru),xr=Nh||function(e,i){return We.setTimeout(e,i)},$o=Du(Yd);function Lu(e,i,s){var h=i+"";return $o(e,dp(h,kp(cp(h),s)))}function Du(e){var i=0,s=0;return function(){var h=zh(),m=me-(h-s);if(s=h,m>0){if(++i>=V)return arguments[0]}else i=0;return e.apply(n,arguments)}}function yi(e,i){var s=-1,h=e.length,m=h-1;for(i=i===n?h:i;++s<i;){var v=xo(s,m),x=e[v];e[v]=e[s],e[s]=x}return e.length=i,e}var Nu=wp(function(e){var i=[];return e.charCodeAt(0)===46&&i.push(""),e.replace(hf,function(s,h,m,v){i.push(m?v.replace(vf,"$1"):h||s)}),i});function Ut(e){if(typeof e=="string"||dt(e))return e;var i=e+"";return i=="0"&&1/e==-Se?"-0":i}function Nn(e){if(e!=null){try{return Gr.call(e)}catch{}try{return e+""}catch{}}return""}function kp(e,i){return vt(at,function(s){var h="_."+s[0];i&s[1]&&!zr(e,h)&&e.push(h)}),e.sort()}function Bu(e){if(e instanceof le)return e.clone();var i=new _t(e.__wrapped__,e.__chain__);return i.__actions__=Je(e.__actions__),i.__index__=e.__index__,i.__values__=e.__values__,i}function Sp(e,i,s){(s?Ve(e,i,s):i===n)?i=1:i=De(ie(i),0);var h=e==null?0:e.length;if(!h||i<1)return[];for(var m=0,v=0,x=A(Zr(h/i));m<h;)x[v++]=St(e,m,m+=i);return x}function Cp(e){for(var i=-1,s=e==null?0:e.length,h=0,m=[];++i<s;){var v=e[i];v&&(m[h++]=v)}return m}function Ip(){var e=arguments.length;if(!e)return[];for(var i=A(e-1),s=arguments[0],h=e;h--;)i[h-1]=arguments[h];return gn(re(s)?Je(s):[s],ze(i,1))}var Ep=se(function(e,i){return Oe(e)?gr(e,ze(i,1,Oe,!0)):[]}),Tp=se(function(e,i){var s=Ct(i);return Oe(s)&&(s=n),Oe(e)?gr(e,ze(i,1,Oe,!0),K(s,2)):[]}),Ap=se(function(e,i){var s=Ct(i);return Oe(s)&&(s=n),Oe(e)?gr(e,ze(i,1,Oe,!0),n,s):[]});function Pp(e,i,s){var h=e==null?0:e.length;return h?(i=s||i===n?1:ie(i),St(e,i<0?0:i,h)):[]}function Mp(e,i,s){var h=e==null?0:e.length;return h?(i=s||i===n?1:ie(i),i=h-i,St(e,0,i<0?0:i)):[]}function Op(e,i){return e&&e.length?li(e,K(i,3),!0,!0):[]}function Fp(e,i){return e&&e.length?li(e,K(i,3),!0):[]}function Rp(e,i,s,h){var m=e==null?0:e.length;return m?(s&&typeof s!="number"&&Ve(e,i,s)&&(s=0,h=m),Id(e,i,s,h)):[]}function $u(e,i,s){var h=e==null?0:e.length;if(!h)return-1;var m=s==null?0:ie(s);return m<0&&(m=De(h+m,0)),qr(e,K(i,3),m)}function Wu(e,i,s){var h=e==null?0:e.length;if(!h)return-1;var m=h-1;return s!==n&&(m=ie(s),m=s<0?De(h+m,0):He(m,h-1)),qr(e,K(i,3),m,!0)}function zu(e){var i=e==null?0:e.length;return i?ze(e,1):[]}function Lp(e){var i=e==null?0:e.length;return i?ze(e,Se):[]}function Dp(e,i){var s=e==null?0:e.length;return s?(i=i===n?1:ie(i),ze(e,i)):[]}function Np(e){for(var i=-1,s=e==null?0:e.length,h={};++i<s;){var m=e[i];h[m[0]]=m[1]}return h}function qu(e){return e&&e.length?e[0]:n}function Bp(e,i,s){var h=e==null?0:e.length;if(!h)return-1;var m=s==null?0:ie(s);return m<0&&(m=De(h+m,0)),Vn(e,i,m)}function $p(e){var i=e==null?0:e.length;return i?St(e,0,-1):[]}var Wp=se(function(e){var i=Ie(e,Io);return i.length&&i[0]===e[0]?mo(i):[]}),zp=se(function(e){var i=Ct(e),s=Ie(e,Io);return i===Ct(s)?i=n:s.pop(),s.length&&s[0]===e[0]?mo(s,K(i,2)):[]}),qp=se(function(e){var i=Ct(e),s=Ie(e,Io);return i=typeof i=="function"?i:n,i&&s.pop(),s.length&&s[0]===e[0]?mo(s,n,i):[]});function Hp(e,i){return e==null?"":$h.call(e,i)}function Ct(e){var i=e==null?0:e.length;return i?e[i-1]:n}function Up(e,i,s){var h=e==null?0:e.length;if(!h)return-1;var m=h;return s!==n&&(m=ie(s),m=m<0?De(h+m,0):He(m,h-1)),i===i?kh(e,i,m):qr(e,_s,m,!0)}function Yp(e,i){return e&&e.length?Zs(e,ie(i)):n}var Gp=se(Hu);function Hu(e,i){return e&&e.length&&i&&i.length?vo(e,i):e}function Vp(e,i,s){return e&&e.length&&i&&i.length?vo(e,i,K(s,2)):e}function Qp(e,i,s){return e&&e.length&&i&&i.length?vo(e,i,n,s):e}var jp=on(function(e,i){var s=e==null?0:e.length,h=fo(e,i);return nu(e,Ie(i,function(m){return an(m,s)?+m:m}).sort(hu)),h});function Kp(e,i){var s=[];if(!(e&&e.length))return s;var h=-1,m=[],v=e.length;for(i=K(i,3);++h<v;){var x=e[h];i(x,h,e)&&(s.push(x),m.push(h))}return nu(e,m),s}function Wo(e){return e==null?e:Hh.call(e)}function Xp(e,i,s){var h=e==null?0:e.length;return h?(s&&typeof s!="number"&&Ve(e,i,s)?(i=0,s=h):(i=i==null?0:ie(i),s=s===n?h:ie(s)),St(e,i,s)):[]}function Jp(e,i){return ui(e,i)}function Zp(e,i,s){return ko(e,i,K(s,2))}function eg(e,i){var s=e==null?0:e.length;if(s){var h=ui(e,i);if(h<s&&Dt(e[h],i))return h}return-1}function tg(e,i){return ui(e,i,!0)}function ng(e,i,s){return ko(e,i,K(s,2),!0)}function rg(e,i){var s=e==null?0:e.length;if(s){var h=ui(e,i,!0)-1;if(Dt(e[h],i))return h}return-1}function ig(e){return e&&e.length?iu(e):[]}function og(e,i){return e&&e.length?iu(e,K(i,2)):[]}function ag(e){var i=e==null?0:e.length;return i?St(e,1,i):[]}function sg(e,i,s){return e&&e.length?(i=s||i===n?1:ie(i),St(e,0,i<0?0:i)):[]}function ug(e,i,s){var h=e==null?0:e.length;return h?(i=s||i===n?1:ie(i),i=h-i,St(e,i<0?0:i,h)):[]}function lg(e,i){return e&&e.length?li(e,K(i,3),!1,!0):[]}function cg(e,i){return e&&e.length?li(e,K(i,3)):[]}var fg=se(function(e){return bn(ze(e,1,Oe,!0))}),hg=se(function(e){var i=Ct(e);return Oe(i)&&(i=n),bn(ze(e,1,Oe,!0),K(i,2))}),dg=se(function(e){var i=Ct(e);return i=typeof i=="function"?i:n,bn(ze(e,1,Oe,!0),n,i)});function pg(e){return e&&e.length?bn(e):[]}function gg(e,i){return e&&e.length?bn(e,K(i,2)):[]}function mg(e,i){return i=typeof i=="function"?i:n,e&&e.length?bn(e,n,i):[]}function zo(e){if(!(e&&e.length))return[];var i=0;return e=pn(e,function(s){if(Oe(s))return i=De(s.length,i),!0}),ro(i,function(s){return Ie(e,eo(s))})}function Uu(e,i){if(!(e&&e.length))return[];var s=zo(e);return i==null?s:Ie(s,function(h){return ct(i,n,h)})}var yg=se(function(e,i){return Oe(e)?gr(e,i):[]}),wg=se(function(e){return Co(pn(e,Oe))}),bg=se(function(e){var i=Ct(e);return Oe(i)&&(i=n),Co(pn(e,Oe),K(i,2))}),vg=se(function(e){var i=Ct(e);return i=typeof i=="function"?i:n,Co(pn(e,Oe),n,i)}),xg=se(zo);function _g(e,i){return uu(e||[],i||[],pr)}function kg(e,i){return uu(e||[],i||[],wr)}var Sg=se(function(e){var i=e.length,s=i>1?e[i-1]:n;return s=typeof s=="function"?(e.pop(),s):n,Uu(e,s)});function Yu(e){var i=w(e);return i.__chain__=!0,i}function Cg(e,i){return i(e),e}function wi(e,i){return i(e)}var Ig=on(function(e){var i=e.length,s=i?e[0]:0,h=this.__wrapped__,m=function(v){return fo(v,e)};return i>1||this.__actions__.length||!(h instanceof le)||!an(s)?this.thru(m):(h=h.slice(s,+s+(i?1:0)),h.__actions__.push({func:wi,args:[m],thisArg:n}),new _t(h,this.__chain__).thru(function(v){return i&&!v.length&&v.push(n),v}))});function Eg(){return Yu(this)}function Tg(){return new _t(this.value(),this.__chain__)}function Ag(){this.__values__===n&&(this.__values__=ol(this.value()));var e=this.__index__>=this.__values__.length,i=e?n:this.__values__[this.__index__++];return{done:e,value:i}}function Pg(){return this}function Mg(e){for(var i,s=this;s instanceof ri;){var h=Bu(s);h.__index__=0,h.__values__=n,i?m.__wrapped__=h:i=h;var m=h;s=s.__wrapped__}return m.__wrapped__=e,i}function Og(){var e=this.__wrapped__;if(e instanceof le){var i=e;return this.__actions__.length&&(i=new le(this)),i=i.reverse(),i.__actions__.push({func:wi,args:[Wo],thisArg:n}),new _t(i,this.__chain__)}return this.thru(Wo)}function Fg(){return su(this.__wrapped__,this.__actions__)}var Rg=ci(function(e,i,s){we.call(e,s)?++e[s]:nn(e,s,1)});function Lg(e,i,s){var h=re(e)?vs:Cd;return s&&Ve(e,i,s)&&(i=n),h(e,K(i,3))}function Dg(e,i){var s=re(e)?pn:Us;return s(e,K(i,3))}var Ng=wu($u),Bg=wu(Wu);function $g(e,i){return ze(bi(e,i),1)}function Wg(e,i){return ze(bi(e,i),Se)}function zg(e,i,s){return s=s===n?1:ie(s),ze(bi(e,i),s)}function Gu(e,i){var s=re(e)?vt:wn;return s(e,K(i,3))}function Vu(e,i){var s=re(e)?ah:Hs;return s(e,K(i,3))}var qg=ci(function(e,i,s){we.call(e,s)?e[s].push(i):nn(e,s,[i])});function Hg(e,i,s,h){e=Ze(e)?e:or(e),s=s&&!h?ie(s):0;var m=e.length;return s<0&&(s=De(m+s,0)),Si(e)?s<=m&&e.indexOf(i,s)>-1:!!m&&Vn(e,i,s)>-1}var Ug=se(function(e,i,s){var h=-1,m=typeof i=="function",v=Ze(e)?A(e.length):[];return wn(e,function(x){v[++h]=m?ct(i,x,s):mr(x,i,s)}),v}),Yg=ci(function(e,i,s){nn(e,s,i)});function bi(e,i){var s=re(e)?Ie:Ks;return s(e,K(i,3))}function Gg(e,i,s,h){return e==null?[]:(re(i)||(i=i==null?[]:[i]),s=h?n:s,re(s)||(s=s==null?[]:[s]),eu(e,i,s))}var Vg=ci(function(e,i,s){e[s?0:1].push(i)},function(){return[[],[]]});function Qg(e,i,s){var h=re(e)?Ji:Ss,m=arguments.length<3;return h(e,K(i,4),s,m,wn)}function jg(e,i,s){var h=re(e)?sh:Ss,m=arguments.length<3;return h(e,K(i,4),s,m,Hs)}function Kg(e,i){var s=re(e)?pn:Us;return s(e,_i(K(i,3)))}function Xg(e){var i=re(e)?$s:Hd;return i(e)}function Jg(e,i,s){(s?Ve(e,i,s):i===n)?i=1:i=ie(i);var h=re(e)?vd:Ud;return h(e,i)}function Zg(e){var i=re(e)?xd:Gd;return i(e)}function em(e){if(e==null)return 0;if(Ze(e))return Si(e)?jn(e):e.length;var i=Ue(e);return i==st||i==ut?e.size:wo(e).length}function tm(e,i,s){var h=re(e)?Zi:Vd;return s&&Ve(e,i,s)&&(i=n),h(e,K(i,3))}var nm=se(function(e,i){if(e==null)return[];var s=i.length;return s>1&&Ve(e,i[0],i[1])?i=[]:s>2&&Ve(i[0],i[1],i[2])&&(i=[i[0]]),eu(e,ze(i,1),[])}),vi=Dh||function(){return We.Date.now()};function rm(e,i){if(typeof i!="function")throw new xt(u);return e=ie(e),function(){if(--e<1)return i.apply(this,arguments)}}function Qu(e,i,s){return i=s?n:i,i=e&&i==null?e.length:i,rn(e,U,n,n,n,n,i)}function ju(e,i){var s;if(typeof i!="function")throw new xt(u);return e=ie(e),function(){return--e>0&&(s=i.apply(this,arguments)),e<=1&&(i=n),s}}var qo=se(function(e,i,s){var h=B;if(s.length){var m=mn(s,rr(qo));h|=F}return rn(e,h,i,s,m)}),Ku=se(function(e,i,s){var h=B|D;if(s.length){var m=mn(s,rr(Ku));h|=F}return rn(i,h,e,s,m)});function Xu(e,i,s){i=s?n:i;var h=rn(e,z,n,n,n,n,n,i);return h.placeholder=Xu.placeholder,h}function Ju(e,i,s){i=s?n:i;var h=rn(e,W,n,n,n,n,n,i);return h.placeholder=Ju.placeholder,h}function Zu(e,i,s){var h,m,v,x,k,I,R=0,L=!1,N=!1,q=!0;if(typeof e!="function")throw new xt(u);i=It(i)||0,Te(s)&&(L=!!s.leading,N="maxWait"in s,v=N?De(It(s.maxWait)||0,i):v,q="trailing"in s?!!s.trailing:q);function Y(Fe){var Nt=h,ln=m;return h=m=n,R=Fe,x=e.apply(ln,Nt),x}function J(Fe){return R=Fe,k=xr(ue,i),L?Y(Fe):x}function oe(Fe){var Nt=Fe-I,ln=Fe-R,wl=i-Nt;return N?He(wl,v-ln):wl}function Z(Fe){var Nt=Fe-I,ln=Fe-R;return I===n||Nt>=i||Nt<0||N&&ln>=v}function ue(){var Fe=vi();if(Z(Fe))return fe(Fe);k=xr(ue,oe(Fe))}function fe(Fe){return k=n,q&&h?Y(Fe):(h=m=n,x)}function pt(){k!==n&&lu(k),R=0,h=I=m=k=n}function Qe(){return k===n?x:fe(vi())}function gt(){var Fe=vi(),Nt=Z(Fe);if(h=arguments,m=this,I=Fe,Nt){if(k===n)return J(I);if(N)return lu(k),k=xr(ue,i),Y(I)}return k===n&&(k=xr(ue,i)),x}return gt.cancel=pt,gt.flush=Qe,gt}var im=se(function(e,i){return qs(e,1,i)}),om=se(function(e,i,s){return qs(e,It(i)||0,s)});function am(e){return rn(e,ee)}function xi(e,i){if(typeof e!="function"||i!=null&&typeof i!="function")throw new xt(u);var s=function(){var h=arguments,m=i?i.apply(this,h):h[0],v=s.cache;if(v.has(m))return v.get(m);var x=e.apply(this,h);return s.cache=v.set(m,x)||v,x};return s.cache=new(xi.Cache||tn),s}xi.Cache=tn;function _i(e){if(typeof e!="function")throw new xt(u);return function(){var i=arguments;switch(i.length){case 0:return!e.call(this);case 1:return!e.call(this,i[0]);case 2:return!e.call(this,i[0],i[1]);case 3:return!e.call(this,i[0],i[1],i[2])}return!e.apply(this,i)}}function sm(e){return ju(2,e)}var um=Qd(function(e,i){i=i.length==1&&re(i[0])?Ie(i[0],ft(K())):Ie(ze(i,1),ft(K()));var s=i.length;return se(function(h){for(var m=-1,v=He(h.length,s);++m<v;)h[m]=i[m].call(this,h[m]);return ct(e,this,h)})}),Ho=se(function(e,i){var s=mn(i,rr(Ho));return rn(e,F,n,i,s)}),el=se(function(e,i){var s=mn(i,rr(el));return rn(e,E,n,i,s)}),lm=on(function(e,i){return rn(e,Q,n,n,n,i)});function cm(e,i){if(typeof e!="function")throw new xt(u);return i=i===n?i:ie(i),se(e,i)}function fm(e,i){if(typeof e!="function")throw new xt(u);return i=i==null?0:De(ie(i),0),se(function(s){var h=s[i],m=xn(s,0,i);return h&&gn(m,h),ct(e,this,m)})}function hm(e,i,s){var h=!0,m=!0;if(typeof e!="function")throw new xt(u);return Te(s)&&(h="leading"in s?!!s.leading:h,m="trailing"in s?!!s.trailing:m),Zu(e,i,{leading:h,maxWait:i,trailing:m})}function dm(e){return Qu(e,1)}function pm(e,i){return Ho(Eo(i),e)}function gm(){if(!arguments.length)return[];var e=arguments[0];return re(e)?e:[e]}function mm(e){return kt(e,y)}function ym(e,i){return i=typeof i=="function"?i:n,kt(e,y,i)}function wm(e){return kt(e,g|y)}function bm(e,i){return i=typeof i=="function"?i:n,kt(e,g|y,i)}function vm(e,i){return i==null||zs(e,i,Be(i))}function Dt(e,i){return e===i||e!==e&&i!==i}var xm=pi(go),_m=pi(function(e,i){return e>=i}),Bn=Vs((function(){return arguments})())?Vs:function(e){return Me(e)&&we.call(e,"callee")&&!Fs.call(e,"callee")},re=A.isArray,km=ps?ft(ps):Md;function Ze(e){return e!=null&&ki(e.length)&&!sn(e)}function Oe(e){return Me(e)&&Ze(e)}function Sm(e){return e===!0||e===!1||Me(e)&&Ge(e)==Xe}var _n=Bh||ea,Cm=gs?ft(gs):Od;function Im(e){return Me(e)&&e.nodeType===1&&!_r(e)}function Em(e){if(e==null)return!0;if(Ze(e)&&(re(e)||typeof e=="string"||typeof e.splice=="function"||_n(e)||ir(e)||Bn(e)))return!e.length;var i=Ue(e);if(i==st||i==ut)return!e.size;if(vr(e))return!wo(e).length;for(var s in e)if(we.call(e,s))return!1;return!0}function Tm(e,i){return yr(e,i)}function Am(e,i,s){s=typeof s=="function"?s:n;var h=s?s(e,i):n;return h===n?yr(e,i,n,s):!!h}function Uo(e){if(!Me(e))return!1;var i=Ge(e);return i==Xt||i==fn||typeof e.message=="string"&&typeof e.name=="string"&&!_r(e)}function Pm(e){return typeof e=="number"&&Ls(e)}function sn(e){if(!Te(e))return!1;var i=Ge(e);return i==Un||i==Rr||i==En||i==Nr}function tl(e){return typeof e=="number"&&e==ie(e)}function ki(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Re}function Te(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}function Me(e){return e!=null&&typeof e=="object"}var nl=ms?ft(ms):Rd;function Mm(e,i){return e===i||yo(e,i,Ro(i))}function Om(e,i,s){return s=typeof s=="function"?s:n,yo(e,i,Ro(i),s)}function Fm(e){return rl(e)&&e!=+e}function Rm(e){if(yp(e))throw new ne(l);return Qs(e)}function Lm(e){return e===null}function Dm(e){return e==null}function rl(e){return typeof e=="number"||Me(e)&&Ge(e)==hn}function _r(e){if(!Me(e)||Ge(e)!=wt)return!1;var i=Kr(e);if(i===null)return!0;var s=we.call(i,"constructor")&&i.constructor;return typeof s=="function"&&s instanceof s&&Gr.call(s)==Oh}var Yo=ys?ft(ys):Ld;function Nm(e){return tl(e)&&e>=-Re&&e<=Re}var il=ws?ft(ws):Dd;function Si(e){return typeof e=="string"||!re(e)&&Me(e)&&Ge(e)==Tn}function dt(e){return typeof e=="symbol"||Me(e)&&Ge(e)==Yn}var ir=bs?ft(bs):Nd;function Bm(e){return e===n}function $m(e){return Me(e)&&Ue(e)==An}function Wm(e){return Me(e)&&Ge(e)==O}var zm=pi(bo),qm=pi(function(e,i){return e<=i});function ol(e){if(!e)return[];if(Ze(e))return Si(e)?Rt(e):Je(e);if(lr&&e[lr])return vh(e[lr]());var i=Ue(e),s=i==st?oo:i==ut?Hr:or;return s(e)}function un(e){if(!e)return e===0?e:0;if(e=It(e),e===Se||e===-Se){var i=e<0?-1:1;return i*Pt}return e===e?e:0}function ie(e){var i=un(e),s=i%1;return i===i?s?i-s:i:0}function al(e){return e?Rn(ie(e),0,Ae):0}function It(e){if(typeof e=="number")return e;if(dt(e))return _;if(Te(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=Te(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=Cs(e);var s=kf.test(e);return s||Cf.test(e)?rh(e.slice(2),s?2:8):_f.test(e)?_:+e}function sl(e){return Ht(e,et(e))}function Hm(e){return e?Rn(ie(e),-Re,Re):e===0?e:0}function ye(e){return e==null?"":ht(e)}var Um=tr(function(e,i){if(vr(i)||Ze(i)){Ht(i,Be(i),e);return}for(var s in i)we.call(i,s)&&pr(e,s,i[s])}),ul=tr(function(e,i){Ht(i,et(i),e)}),Ci=tr(function(e,i,s,h){Ht(i,et(i),e,h)}),Ym=tr(function(e,i,s,h){Ht(i,Be(i),e,h)}),Gm=on(fo);function Vm(e,i){var s=er(e);return i==null?s:Ws(s,i)}var Qm=se(function(e,i){e=ve(e);var s=-1,h=i.length,m=h>2?i[2]:n;for(m&&Ve(i[0],i[1],m)&&(h=1);++s<h;)for(var v=i[s],x=et(v),k=-1,I=x.length;++k<I;){var R=x[k],L=e[R];(L===n||Dt(L,Xn[R])&&!we.call(e,R))&&(e[R]=v[R])}return e}),jm=se(function(e){return e.push(n,Cu),ct(ll,n,e)});function Km(e,i){return xs(e,K(i,3),qt)}function Xm(e,i){return xs(e,K(i,3),po)}function Jm(e,i){return e==null?e:ho(e,K(i,3),et)}function Zm(e,i){return e==null?e:Ys(e,K(i,3),et)}function e1(e,i){return e&&qt(e,K(i,3))}function t1(e,i){return e&&po(e,K(i,3))}function n1(e){return e==null?[]:ai(e,Be(e))}function r1(e){return e==null?[]:ai(e,et(e))}function Go(e,i,s){var h=e==null?n:Ln(e,i);return h===n?s:h}function i1(e,i){return e!=null&&Tu(e,i,Ed)}function Vo(e,i){return e!=null&&Tu(e,i,Td)}var o1=vu(function(e,i,s){i!=null&&typeof i.toString!="function"&&(i=Vr.call(i)),e[i]=s},jo(tt)),a1=vu(function(e,i,s){i!=null&&typeof i.toString!="function"&&(i=Vr.call(i)),we.call(e,i)?e[i].push(s):e[i]=[s]},K),s1=se(mr);function Be(e){return Ze(e)?Bs(e):wo(e)}function et(e){return Ze(e)?Bs(e,!0):Bd(e)}function u1(e,i){var s={};return i=K(i,3),qt(e,function(h,m,v){nn(s,i(h,m,v),h)}),s}function l1(e,i){var s={};return i=K(i,3),qt(e,function(h,m,v){nn(s,m,i(h,m,v))}),s}var c1=tr(function(e,i,s){si(e,i,s)}),ll=tr(function(e,i,s,h){si(e,i,s,h)}),f1=on(function(e,i){var s={};if(e==null)return s;var h=!1;i=Ie(i,function(v){return v=vn(v,e),h||(h=v.length>1),v}),Ht(e,Oo(e),s),h&&(s=kt(s,g|b|y,op));for(var m=i.length;m--;)So(s,i[m]);return s});function h1(e,i){return cl(e,_i(K(i)))}var d1=on(function(e,i){return e==null?{}:Wd(e,i)});function cl(e,i){if(e==null)return{};var s=Ie(Oo(e),function(h){return[h]});return i=K(i),tu(e,s,function(h,m){return i(h,m[0])})}function p1(e,i,s){i=vn(i,e);var h=-1,m=i.length;for(m||(m=1,e=n);++h<m;){var v=e==null?n:e[Ut(i[h])];v===n&&(h=m,v=s),e=sn(v)?v.call(e):v}return e}function g1(e,i,s){return e==null?e:wr(e,i,s)}function m1(e,i,s,h){return h=typeof h=="function"?h:n,e==null?e:wr(e,i,s,h)}var fl=ku(Be),hl=ku(et);function y1(e,i,s){var h=re(e),m=h||_n(e)||ir(e);if(i=K(i,4),s==null){var v=e&&e.constructor;m?s=h?new v:[]:Te(e)?s=sn(v)?er(Kr(e)):{}:s={}}return(m?vt:qt)(e,function(x,k,I){return i(s,x,k,I)}),s}function w1(e,i){return e==null?!0:So(e,i)}function b1(e,i,s){return e==null?e:au(e,i,Eo(s))}function v1(e,i,s,h){return h=typeof h=="function"?h:n,e==null?e:au(e,i,Eo(s),h)}function or(e){return e==null?[]:io(e,Be(e))}function x1(e){return e==null?[]:io(e,et(e))}function _1(e,i,s){return s===n&&(s=i,i=n),s!==n&&(s=It(s),s=s===s?s:0),i!==n&&(i=It(i),i=i===i?i:0),Rn(It(e),i,s)}function k1(e,i,s){return i=un(i),s===n?(s=i,i=0):s=un(s),e=It(e),Ad(e,i,s)}function S1(e,i,s){if(s&&typeof s!="boolean"&&Ve(e,i,s)&&(i=s=n),s===n&&(typeof i=="boolean"?(s=i,i=n):typeof e=="boolean"&&(s=e,e=n)),e===n&&i===n?(e=0,i=1):(e=un(e),i===n?(i=e,e=0):i=un(i)),e>i){var h=e;e=i,i=h}if(s||e%1||i%1){var m=Ds();return He(e+m*(i-e+nh("1e-"+((m+"").length-1))),i)}return xo(e,i)}var C1=nr(function(e,i,s){return i=i.toLowerCase(),e+(s?dl(i):i)});function dl(e){return Qo(ye(e).toLowerCase())}function pl(e){return e=ye(e),e&&e.replace(Ef,gh).replace(Gf,"")}function I1(e,i,s){e=ye(e),i=ht(i);var h=e.length;s=s===n?h:Rn(ie(s),0,h);var m=s;return s-=i.length,s>=0&&e.slice(s,m)==i}function E1(e){return e=ye(e),e&&sf.test(e)?e.replace(Ya,mh):e}function T1(e){return e=ye(e),e&&df.test(e)?e.replace(qi,"\\$&"):e}var A1=nr(function(e,i,s){return e+(s?"-":"")+i.toLowerCase()}),P1=nr(function(e,i,s){return e+(s?" ":"")+i.toLowerCase()}),M1=yu("toLowerCase");function O1(e,i,s){e=ye(e),i=ie(i);var h=i?jn(e):0;if(!i||h>=i)return e;var m=(i-h)/2;return di(ei(m),s)+e+di(Zr(m),s)}function F1(e,i,s){e=ye(e),i=ie(i);var h=i?jn(e):0;return i&&h<i?e+di(i-h,s):e}function R1(e,i,s){e=ye(e),i=ie(i);var h=i?jn(e):0;return i&&h<i?di(i-h,s)+e:e}function L1(e,i,s){return s||i==null?i=0:i&&(i=+i),qh(ye(e).replace(Hi,""),i||0)}function D1(e,i,s){return(s?Ve(e,i,s):i===n)?i=1:i=ie(i),_o(ye(e),i)}function N1(){var e=arguments,i=ye(e[0]);return e.length<3?i:i.replace(e[1],e[2])}var B1=nr(function(e,i,s){return e+(s?"_":"")+i.toLowerCase()});function $1(e,i,s){return s&&typeof s!="number"&&Ve(e,i,s)&&(i=s=n),s=s===n?Ae:s>>>0,s?(e=ye(e),e&&(typeof i=="string"||i!=null&&!Yo(i))&&(i=ht(i),!i&&Qn(e))?xn(Rt(e),0,s):e.split(i,s)):[]}var W1=nr(function(e,i,s){return e+(s?" ":"")+Qo(i)});function z1(e,i,s){return e=ye(e),s=s==null?0:Rn(ie(s),0,e.length),i=ht(i),e.slice(s,s+i.length)==i}function q1(e,i,s){var h=w.templateSettings;s&&Ve(e,i,s)&&(i=n),e=ye(e),i=Ci({},i,h,Su);var m=Ci({},i.imports,h.imports,Su),v=Be(m),x=io(m,v),k,I,R=0,L=i.interpolate||Br,N="__p += '",q=ao((i.escape||Br).source+"|"+L.source+"|"+(L===Ga?xf:Br).source+"|"+(i.evaluate||Br).source+"|$","g"),Y="//# sourceURL="+(we.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Xf+"]")+`
`;e.replace(q,function(Z,ue,fe,pt,Qe,gt){return fe||(fe=pt),N+=e.slice(R,gt).replace(Tf,yh),ue&&(k=!0,N+=`' +
__e(`+ue+`) +
'`),Qe&&(I=!0,N+=`';
`+Qe+`;
__p += '`),fe&&(N+=`' +
((__t = (`+fe+`)) == null ? '' : __t) +
'`),R=gt+Z.length,Z}),N+=`';
`;var J=we.call(i,"variable")&&i.variable;if(!J)N=`with (obj) {
`+N+`
}
`;else if(bf.test(J))throw new ne(c);N=(I?N.replace(Ft,""):N).replace(rf,"$1").replace(of,"$1;"),N="function("+(J||"obj")+`) {
`+(J?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(k?", __e = _.escape":"")+(I?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+N+`return __p
}`;var oe=ml(function(){return pe(v,Y+"return "+N).apply(n,x)});if(oe.source=N,Uo(oe))throw oe;return oe}function H1(e){return ye(e).toLowerCase()}function U1(e){return ye(e).toUpperCase()}function Y1(e,i,s){if(e=ye(e),e&&(s||i===n))return Cs(e);if(!e||!(i=ht(i)))return e;var h=Rt(e),m=Rt(i),v=Is(h,m),x=Es(h,m)+1;return xn(h,v,x).join("")}function G1(e,i,s){if(e=ye(e),e&&(s||i===n))return e.slice(0,As(e)+1);if(!e||!(i=ht(i)))return e;var h=Rt(e),m=Es(h,Rt(i))+1;return xn(h,0,m).join("")}function V1(e,i,s){if(e=ye(e),e&&(s||i===n))return e.replace(Hi,"");if(!e||!(i=ht(i)))return e;var h=Rt(e),m=Is(h,Rt(i));return xn(h,m).join("")}function Q1(e,i){var s=he,h=j;if(Te(i)){var m="separator"in i?i.separator:m;s="length"in i?ie(i.length):s,h="omission"in i?ht(i.omission):h}e=ye(e);var v=e.length;if(Qn(e)){var x=Rt(e);v=x.length}if(s>=v)return e;var k=s-jn(h);if(k<1)return h;var I=x?xn(x,0,k).join(""):e.slice(0,k);if(m===n)return I+h;if(x&&(k+=I.length-k),Yo(m)){if(e.slice(k).search(m)){var R,L=I;for(m.global||(m=ao(m.source,ye(Va.exec(m))+"g")),m.lastIndex=0;R=m.exec(L);)var N=R.index;I=I.slice(0,N===n?k:N)}}else if(e.indexOf(ht(m),k)!=k){var q=I.lastIndexOf(m);q>-1&&(I=I.slice(0,q))}return I+h}function j1(e){return e=ye(e),e&&af.test(e)?e.replace(Ua,Sh):e}var K1=nr(function(e,i,s){return e+(s?" ":"")+i.toUpperCase()}),Qo=yu("toUpperCase");function gl(e,i,s){return e=ye(e),i=s?n:i,i===n?bh(e)?Eh(e):ch(e):e.match(i)||[]}var ml=se(function(e,i){try{return ct(e,n,i)}catch(s){return Uo(s)?s:new ne(s)}}),X1=on(function(e,i){return vt(i,function(s){s=Ut(s),nn(e,s,qo(e[s],e))}),e});function J1(e){var i=e==null?0:e.length,s=K();return e=i?Ie(e,function(h){if(typeof h[1]!="function")throw new xt(u);return[s(h[0]),h[1]]}):[],se(function(h){for(var m=-1;++m<i;){var v=e[m];if(ct(v[0],this,h))return ct(v[1],this,h)}})}function Z1(e){return Sd(kt(e,g))}function jo(e){return function(){return e}}function e0(e,i){return e==null||e!==e?i:e}var t0=bu(),n0=bu(!0);function tt(e){return e}function Ko(e){return js(typeof e=="function"?e:kt(e,g))}function r0(e){return Xs(kt(e,g))}function i0(e,i){return Js(e,kt(i,g))}var o0=se(function(e,i){return function(s){return mr(s,e,i)}}),a0=se(function(e,i){return function(s){return mr(e,s,i)}});function Xo(e,i,s){var h=Be(i),m=ai(i,h);s==null&&!(Te(i)&&(m.length||!h.length))&&(s=i,i=e,e=this,m=ai(i,Be(i)));var v=!(Te(s)&&"chain"in s)||!!s.chain,x=sn(e);return vt(m,function(k){var I=i[k];e[k]=I,x&&(e.prototype[k]=function(){var R=this.__chain__;if(v||R){var L=e(this.__wrapped__),N=L.__actions__=Je(this.__actions__);return N.push({func:I,args:arguments,thisArg:e}),L.__chain__=R,L}return I.apply(e,gn([this.value()],arguments))})}),e}function s0(){return We._===this&&(We._=Fh),this}function Jo(){}function u0(e){return e=ie(e),se(function(i){return Zs(i,e)})}var l0=Ao(Ie),c0=Ao(vs),f0=Ao(Zi);function yl(e){return Do(e)?eo(Ut(e)):zd(e)}function h0(e){return function(i){return e==null?n:Ln(e,i)}}var d0=xu(),p0=xu(!0);function Zo(){return[]}function ea(){return!1}function g0(){return{}}function m0(){return""}function y0(){return!0}function w0(e,i){if(e=ie(e),e<1||e>Re)return[];var s=Ae,h=He(e,Ae);i=K(i),e-=Ae;for(var m=ro(h,i);++s<e;)i(s);return m}function b0(e){return re(e)?Ie(e,Ut):dt(e)?[e]:Je(Nu(ye(e)))}function v0(e){var i=++Mh;return ye(e)+i}var x0=hi(function(e,i){return e+i},0),_0=Po("ceil"),k0=hi(function(e,i){return e/i},1),S0=Po("floor");function C0(e){return e&&e.length?oi(e,tt,go):n}function I0(e,i){return e&&e.length?oi(e,K(i,2),go):n}function E0(e){return ks(e,tt)}function T0(e,i){return ks(e,K(i,2))}function A0(e){return e&&e.length?oi(e,tt,bo):n}function P0(e,i){return e&&e.length?oi(e,K(i,2),bo):n}var M0=hi(function(e,i){return e*i},1),O0=Po("round"),F0=hi(function(e,i){return e-i},0);function R0(e){return e&&e.length?no(e,tt):0}function L0(e,i){return e&&e.length?no(e,K(i,2)):0}return w.after=rm,w.ary=Qu,w.assign=Um,w.assignIn=ul,w.assignInWith=Ci,w.assignWith=Ym,w.at=Gm,w.before=ju,w.bind=qo,w.bindAll=X1,w.bindKey=Ku,w.castArray=gm,w.chain=Yu,w.chunk=Sp,w.compact=Cp,w.concat=Ip,w.cond=J1,w.conforms=Z1,w.constant=jo,w.countBy=Rg,w.create=Vm,w.curry=Xu,w.curryRight=Ju,w.debounce=Zu,w.defaults=Qm,w.defaultsDeep=jm,w.defer=im,w.delay=om,w.difference=Ep,w.differenceBy=Tp,w.differenceWith=Ap,w.drop=Pp,w.dropRight=Mp,w.dropRightWhile=Op,w.dropWhile=Fp,w.fill=Rp,w.filter=Dg,w.flatMap=$g,w.flatMapDeep=Wg,w.flatMapDepth=zg,w.flatten=zu,w.flattenDeep=Lp,w.flattenDepth=Dp,w.flip=am,w.flow=t0,w.flowRight=n0,w.fromPairs=Np,w.functions=n1,w.functionsIn=r1,w.groupBy=qg,w.initial=$p,w.intersection=Wp,w.intersectionBy=zp,w.intersectionWith=qp,w.invert=o1,w.invertBy=a1,w.invokeMap=Ug,w.iteratee=Ko,w.keyBy=Yg,w.keys=Be,w.keysIn=et,w.map=bi,w.mapKeys=u1,w.mapValues=l1,w.matches=r0,w.matchesProperty=i0,w.memoize=xi,w.merge=c1,w.mergeWith=ll,w.method=o0,w.methodOf=a0,w.mixin=Xo,w.negate=_i,w.nthArg=u0,w.omit=f1,w.omitBy=h1,w.once=sm,w.orderBy=Gg,w.over=l0,w.overArgs=um,w.overEvery=c0,w.overSome=f0,w.partial=Ho,w.partialRight=el,w.partition=Vg,w.pick=d1,w.pickBy=cl,w.property=yl,w.propertyOf=h0,w.pull=Gp,w.pullAll=Hu,w.pullAllBy=Vp,w.pullAllWith=Qp,w.pullAt=jp,w.range=d0,w.rangeRight=p0,w.rearg=lm,w.reject=Kg,w.remove=Kp,w.rest=cm,w.reverse=Wo,w.sampleSize=Jg,w.set=g1,w.setWith=m1,w.shuffle=Zg,w.slice=Xp,w.sortBy=nm,w.sortedUniq=ig,w.sortedUniqBy=og,w.split=$1,w.spread=fm,w.tail=ag,w.take=sg,w.takeRight=ug,w.takeRightWhile=lg,w.takeWhile=cg,w.tap=Cg,w.throttle=hm,w.thru=wi,w.toArray=ol,w.toPairs=fl,w.toPairsIn=hl,w.toPath=b0,w.toPlainObject=sl,w.transform=y1,w.unary=dm,w.union=fg,w.unionBy=hg,w.unionWith=dg,w.uniq=pg,w.uniqBy=gg,w.uniqWith=mg,w.unset=w1,w.unzip=zo,w.unzipWith=Uu,w.update=b1,w.updateWith=v1,w.values=or,w.valuesIn=x1,w.without=yg,w.words=gl,w.wrap=pm,w.xor=wg,w.xorBy=bg,w.xorWith=vg,w.zip=xg,w.zipObject=_g,w.zipObjectDeep=kg,w.zipWith=Sg,w.entries=fl,w.entriesIn=hl,w.extend=ul,w.extendWith=Ci,Xo(w,w),w.add=x0,w.attempt=ml,w.camelCase=C1,w.capitalize=dl,w.ceil=_0,w.clamp=_1,w.clone=mm,w.cloneDeep=wm,w.cloneDeepWith=bm,w.cloneWith=ym,w.conformsTo=vm,w.deburr=pl,w.defaultTo=e0,w.divide=k0,w.endsWith=I1,w.eq=Dt,w.escape=E1,w.escapeRegExp=T1,w.every=Lg,w.find=Ng,w.findIndex=$u,w.findKey=Km,w.findLast=Bg,w.findLastIndex=Wu,w.findLastKey=Xm,w.floor=S0,w.forEach=Gu,w.forEachRight=Vu,w.forIn=Jm,w.forInRight=Zm,w.forOwn=e1,w.forOwnRight=t1,w.get=Go,w.gt=xm,w.gte=_m,w.has=i1,w.hasIn=Vo,w.head=qu,w.identity=tt,w.includes=Hg,w.indexOf=Bp,w.inRange=k1,w.invoke=s1,w.isArguments=Bn,w.isArray=re,w.isArrayBuffer=km,w.isArrayLike=Ze,w.isArrayLikeObject=Oe,w.isBoolean=Sm,w.isBuffer=_n,w.isDate=Cm,w.isElement=Im,w.isEmpty=Em,w.isEqual=Tm,w.isEqualWith=Am,w.isError=Uo,w.isFinite=Pm,w.isFunction=sn,w.isInteger=tl,w.isLength=ki,w.isMap=nl,w.isMatch=Mm,w.isMatchWith=Om,w.isNaN=Fm,w.isNative=Rm,w.isNil=Dm,w.isNull=Lm,w.isNumber=rl,w.isObject=Te,w.isObjectLike=Me,w.isPlainObject=_r,w.isRegExp=Yo,w.isSafeInteger=Nm,w.isSet=il,w.isString=Si,w.isSymbol=dt,w.isTypedArray=ir,w.isUndefined=Bm,w.isWeakMap=$m,w.isWeakSet=Wm,w.join=Hp,w.kebabCase=A1,w.last=Ct,w.lastIndexOf=Up,w.lowerCase=P1,w.lowerFirst=M1,w.lt=zm,w.lte=qm,w.max=C0,w.maxBy=I0,w.mean=E0,w.meanBy=T0,w.min=A0,w.minBy=P0,w.stubArray=Zo,w.stubFalse=ea,w.stubObject=g0,w.stubString=m0,w.stubTrue=y0,w.multiply=M0,w.nth=Yp,w.noConflict=s0,w.noop=Jo,w.now=vi,w.pad=O1,w.padEnd=F1,w.padStart=R1,w.parseInt=L1,w.random=S1,w.reduce=Qg,w.reduceRight=jg,w.repeat=D1,w.replace=N1,w.result=p1,w.round=O0,w.runInContext=C,w.sample=Xg,w.size=em,w.snakeCase=B1,w.some=tm,w.sortedIndex=Jp,w.sortedIndexBy=Zp,w.sortedIndexOf=eg,w.sortedLastIndex=tg,w.sortedLastIndexBy=ng,w.sortedLastIndexOf=rg,w.startCase=W1,w.startsWith=z1,w.subtract=F0,w.sum=R0,w.sumBy=L0,w.template=q1,w.times=w0,w.toFinite=un,w.toInteger=ie,w.toLength=al,w.toLower=H1,w.toNumber=It,w.toSafeInteger=Hm,w.toString=ye,w.toUpper=U1,w.trim=Y1,w.trimEnd=G1,w.trimStart=V1,w.truncate=Q1,w.unescape=j1,w.uniqueId=v0,w.upperCase=K1,w.upperFirst=Qo,w.each=Gu,w.eachRight=Vu,w.first=qu,Xo(w,(function(){var e={};return qt(w,function(i,s){we.call(w.prototype,s)||(e[s]=i)}),e})(),{chain:!1}),w.VERSION=o,vt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){w[e].placeholder=w}),vt(["drop","take"],function(e,i){le.prototype[e]=function(s){s=s===n?1:De(ie(s),0);var h=this.__filtered__&&!i?new le(this):this.clone();return h.__filtered__?h.__takeCount__=He(s,h.__takeCount__):h.__views__.push({size:He(s,Ae),type:e+(h.__dir__<0?"Right":"")}),h},le.prototype[e+"Right"]=function(s){return this.reverse()[e](s).reverse()}}),vt(["filter","map","takeWhile"],function(e,i){var s=i+1,h=s==Ee||s==Ne;le.prototype[e]=function(m){var v=this.clone();return v.__iteratees__.push({iteratee:K(m,3),type:s}),v.__filtered__=v.__filtered__||h,v}}),vt(["head","last"],function(e,i){var s="take"+(i?"Right":"");le.prototype[e]=function(){return this[s](1).value()[0]}}),vt(["initial","tail"],function(e,i){var s="drop"+(i?"":"Right");le.prototype[e]=function(){return this.__filtered__?new le(this):this[s](1)}}),le.prototype.compact=function(){return this.filter(tt)},le.prototype.find=function(e){return this.filter(e).head()},le.prototype.findLast=function(e){return this.reverse().find(e)},le.prototype.invokeMap=se(function(e,i){return typeof e=="function"?new le(this):this.map(function(s){return mr(s,e,i)})}),le.prototype.reject=function(e){return this.filter(_i(K(e)))},le.prototype.slice=function(e,i){e=ie(e);var s=this;return s.__filtered__&&(e>0||i<0)?new le(s):(e<0?s=s.takeRight(-e):e&&(s=s.drop(e)),i!==n&&(i=ie(i),s=i<0?s.dropRight(-i):s.take(i-e)),s)},le.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},le.prototype.toArray=function(){return this.take(Ae)},qt(le.prototype,function(e,i){var s=/^(?:filter|find|map|reject)|While$/.test(i),h=/^(?:head|last)$/.test(i),m=w[h?"take"+(i=="last"?"Right":""):i],v=h||/^find/.test(i);m&&(w.prototype[i]=function(){var x=this.__wrapped__,k=h?[1]:arguments,I=x instanceof le,R=k[0],L=I||re(x),N=function(ue){var fe=m.apply(w,gn([ue],k));return h&&q?fe[0]:fe};L&&s&&typeof R=="function"&&R.length!=1&&(I=L=!1);var q=this.__chain__,Y=!!this.__actions__.length,J=v&&!q,oe=I&&!Y;if(!v&&L){x=oe?x:new le(this);var Z=e.apply(x,k);return Z.__actions__.push({func:wi,args:[N],thisArg:n}),new _t(Z,q)}return J&&oe?e.apply(this,k):(Z=this.thru(N),J?h?Z.value()[0]:Z.value():Z)})}),vt(["pop","push","shift","sort","splice","unshift"],function(e){var i=Ur[e],s=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",h=/^(?:pop|shift)$/.test(e);w.prototype[e]=function(){var m=arguments;if(h&&!this.__chain__){var v=this.value();return i.apply(re(v)?v:[],m)}return this[s](function(x){return i.apply(re(x)?x:[],m)})}}),qt(le.prototype,function(e,i){var s=w[i];if(s){var h=s.name+"";we.call(Zn,h)||(Zn[h]=[]),Zn[h].push({name:i,func:s})}}),Zn[fi(n,D).name]=[{name:"wrapper",func:n}],le.prototype.clone=jh,le.prototype.reverse=Kh,le.prototype.value=Xh,w.prototype.at=Ig,w.prototype.chain=Eg,w.prototype.commit=Tg,w.prototype.next=Ag,w.prototype.plant=Mg,w.prototype.reverse=Og,w.prototype.toJSON=w.prototype.valueOf=w.prototype.value=Fg,w.prototype.first=w.prototype.head,lr&&(w.prototype[lr]=Pg),w}),Kn=Th();Pn?((Pn.exports=Kn)._=Kn,ji._=Kn):We._=Kn}).call(z0)})(Er,Er.exports)),Er.exports}var H0=q0();const U0=[{id:"dayPlanning",label:"Planning my day",cue:"After breakfast",reward:"More productive and organized day",targetCount:1,periodicityMultiplier:1,periodicityUnit:"day",active:!0},{id:"exercise",label:"Exercise",cue:"After work or in the morning",reward:"Better health, more energy, and improved mood",targetCount:1,periodicityMultiplier:1,periodicityUnit:"day",active:!0},{id:"havingFun",label:"Having fun",cue:"In the evening or during free time",reward:"Relaxation, joy, and stress relief",targetCount:1,periodicityMultiplier:1,periodicityUnit:"day",active:!0},{id:"fpf",label:"FPF",cue:"At a consistent scheduled time",reward:"Sense of progress and satisfaction",targetCount:1,periodicityMultiplier:1,periodicityUnit:"day",active:!0}],Y0=[{id:"positiveEmotions",label:"Positive Emotions",info:"Feelings of joy, gratitude, contentment, hope, and pleasure. Includes savoring the moment, reflecting on past positives, and hopeful anticipation of the future.",active:!0},{id:"engagement",label:"Engagement",info:"Deep involvement in activities; being absorbed, losing sense of time (‘flow’). Doing work or hobbies that challenge your skills just enough that you’re fully present.",active:!0},{id:"relationships",label:"Relationships",info:"Supportive, meaningful social connections. Feeling loved, valued, belonging; giving and receiving support. Close friendships, family bonds, community ties.",active:!0},{id:"meaning",label:"Meaning",info:"Having a sense of purpose, belonging to something bigger than yourself. Knowing what matters in your life and using your strengths in service of values, causes or goals.",active:!0},{id:"accomplishment",label:"Accomplishment",info:"Mastery, achievement, working toward goals. Sense of progress, competence, whether or not it brings immediate joy—achieving things that matter to you.",active:!0},{id:"physicalCondition",label:"Physical Condition",info:"Your bodily health: exercise, sleep quality, nutrition; energy levels and how physically capable you feel.",active:!0},{id:"mindset",label:"Mindset",info:"Cultivating optimism, resilience, self-efficacy, and a growth mindset. A positive mindset shapes how you interpret setbacks, sustain motivation, and approach challenges.",active:!0},{id:"environment",label:"Environment",info:"Living and working in spaces that feel safe, comfortable, and supportive of wellbeing. Includes access to nature, orderliness, and resources that help you thrive.",active:!0},{id:"economicSecurity",label:"Economic Security",info:"Having financial stability, freedom from chronic money stress, and satisfaction with work. Economic security supports autonomy and reduces background stress that erodes wellbeing.",active:!0}],na={projectDir:"powerJournal",outputDir:"reports",coreDir:"core",devLogging:!0,habits:U0,wellbeingParameters:Y0,devMode:!0,reportFileExtension:".pjf.md"};async function G0(t){if(!t||typeof t!="object"||Array.isArray(t))return na;try{return H0.merge({},na,t)}catch(r){return console.warn("[PowerJournal] Failed to merge user config, using defaults.",r),na}}const pc=6048e5,V0=864e5,_l=Symbol.for("constructDateFrom");function cn(t,r){return typeof t=="function"?t(r):t&&typeof t=="object"&&_l in t?t[_l](r):t instanceof Date?new t.constructor(r):new Date(r)}function At(t,r){return cn(r||t,t)}function Q0(t,r,n){const o=At(t,n?.in);return isNaN(r)?cn(t,NaN):(r&&o.setDate(o.getDate()+r),o)}let j0={};function Bi(){return j0}function Pr(t,r){const n=Bi(),o=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=At(t,r?.in),l=a.getDay(),u=(l<o?7:0)+l-o;return a.setDate(a.getDate()-u),a.setHours(0,0,0,0),a}function Fi(t,r){return Pr(t,{...r,weekStartsOn:1})}function gc(t,r){const n=At(t,r?.in),o=n.getFullYear(),a=cn(n,0);a.setFullYear(o+1,0,4),a.setHours(0,0,0,0);const l=Fi(a),u=cn(n,0);u.setFullYear(o,0,4),u.setHours(0,0,0,0);const c=Fi(u);return n.getTime()>=l.getTime()?o+1:n.getTime()>=c.getTime()?o:o-1}function kl(t){const r=At(t),n=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return n.setUTCFullYear(r.getFullYear()),+t-+n}function mc(t,...r){const n=cn.bind(null,r.find(o=>typeof o=="object"));return r.map(n)}function Sl(t,r){const n=At(t,r?.in);return n.setHours(0,0,0,0),n}function yc(t,r,n){const[o,a]=mc(n?.in,t,r),l=Sl(o),u=Sl(a),c=+l-kl(l),d=+u-kl(u);return Math.round((c-d)/V0)}function K0(t,r){const n=gc(t,r),o=cn(t,0);return o.setFullYear(n,0,4),o.setHours(0,0,0,0),Fi(o)}function X0(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function J0(t){return!(!X0(t)&&typeof t!="number"||isNaN(+At(t)))}function Z0(t,r,n){const[o,a]=mc(n?.in,t,r),l=Cl(o,a),u=Math.abs(yc(o,a));o.setDate(o.getDate()-l*u);const c=+(Cl(o,a)===-l),d=l*(u-c);return d===0?0:d}function Cl(t,r){const n=t.getFullYear()-r.getFullYear()||t.getMonth()-r.getMonth()||t.getDate()-r.getDate()||t.getHours()-r.getHours()||t.getMinutes()-r.getMinutes()||t.getSeconds()-r.getSeconds()||t.getMilliseconds()-r.getMilliseconds();return n<0?-1:n>0?1:n}function ey(t,r){const n=At(t,r?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const ty={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ny=(t,r,n)=>{let o;const a=ty[t];return typeof a=="string"?o=a:r===1?o=a.one:o=a.other.replace("{{count}}",r.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+o:o+" ago":o};function ra(t){return(r={})=>{const n=r.width?String(r.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const ry={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},iy={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},oy={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ay={date:ra({formats:ry,defaultWidth:"full"}),time:ra({formats:iy,defaultWidth:"full"}),dateTime:ra({formats:oy,defaultWidth:"full"})},sy={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},uy=(t,r,n,o)=>sy[t];function kr(t){return(r,n)=>{const o=n?.context?String(n.context):"standalone";let a;if(o==="formatting"&&t.formattingValues){const u=t.defaultFormattingWidth||t.defaultWidth,c=n?.width?String(n.width):u;a=t.formattingValues[c]||t.formattingValues[u]}else{const u=t.defaultWidth,c=n?.width?String(n.width):t.defaultWidth;a=t.values[c]||t.values[u]}const l=t.argumentCallback?t.argumentCallback(r):r;return a[l]}}const ly={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},cy={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},fy={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},hy={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dy={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},py={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},gy=(t,r)=>{const n=Number(t),o=n%100;if(o>20||o<10)switch(o%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},my={ordinalNumber:gy,era:kr({values:ly,defaultWidth:"wide"}),quarter:kr({values:cy,defaultWidth:"wide",argumentCallback:t=>t-1}),month:kr({values:fy,defaultWidth:"wide"}),day:kr({values:hy,defaultWidth:"wide"}),dayPeriod:kr({values:dy,defaultWidth:"wide",formattingValues:py,defaultFormattingWidth:"wide"})};function Sr(t){return(r,n={})=>{const o=n.width,a=o&&t.matchPatterns[o]||t.matchPatterns[t.defaultMatchWidth],l=r.match(a);if(!l)return null;const u=l[0],c=o&&t.parsePatterns[o]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(c)?wy(c,g=>g.test(u)):yy(c,g=>g.test(u));let f;f=t.valueCallback?t.valueCallback(d):d,f=n.valueCallback?n.valueCallback(f):f;const p=r.slice(u.length);return{value:f,rest:p}}}function yy(t,r){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r(t[n]))return n}function wy(t,r){for(let n=0;n<t.length;n++)if(r(t[n]))return n}function by(t){return(r,n={})=>{const o=r.match(t.matchPattern);if(!o)return null;const a=o[0],l=r.match(t.parsePattern);if(!l)return null;let u=t.valueCallback?t.valueCallback(l[0]):l[0];u=n.valueCallback?n.valueCallback(u):u;const c=r.slice(a.length);return{value:u,rest:c}}}const vy=/^(\d+)(th|st|nd|rd)?/i,xy=/\d+/i,_y={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ky={any:[/^b/i,/^(a|c)/i]},Sy={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Cy={any:[/1/i,/2/i,/3/i,/4/i]},Iy={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ey={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ty={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ay={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Py={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},My={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Oy={ordinalNumber:by({matchPattern:vy,parsePattern:xy,valueCallback:t=>parseInt(t,10)}),era:Sr({matchPatterns:_y,defaultMatchWidth:"wide",parsePatterns:ky,defaultParseWidth:"any"}),quarter:Sr({matchPatterns:Sy,defaultMatchWidth:"wide",parsePatterns:Cy,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Sr({matchPatterns:Iy,defaultMatchWidth:"wide",parsePatterns:Ey,defaultParseWidth:"any"}),day:Sr({matchPatterns:Ty,defaultMatchWidth:"wide",parsePatterns:Ay,defaultParseWidth:"any"}),dayPeriod:Sr({matchPatterns:Py,defaultMatchWidth:"any",parsePatterns:My,defaultParseWidth:"any"})},Fy={code:"en-US",formatDistance:ny,formatLong:ay,formatRelative:uy,localize:my,match:Oy,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ry(t,r){const n=At(t,r?.in);return yc(n,ey(n))+1}function Ly(t,r){const n=At(t,r?.in),o=+Fi(n)-+K0(n);return Math.round(o/pc)+1}function wc(t,r){const n=At(t,r?.in),o=n.getFullYear(),a=Bi(),l=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,u=cn(r?.in||t,0);u.setFullYear(o+1,0,l),u.setHours(0,0,0,0);const c=Pr(u,r),d=cn(r?.in||t,0);d.setFullYear(o,0,l),d.setHours(0,0,0,0);const f=Pr(d,r);return+n>=+c?o+1:+n>=+f?o:o-1}function Dy(t,r){const n=Bi(),o=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,a=wc(t,r),l=cn(r?.in||t,0);return l.setFullYear(a,0,o),l.setHours(0,0,0,0),Pr(l,r)}function Ny(t,r){const n=At(t,r?.in),o=+Pr(n,r)-+Dy(n,r);return Math.round(o/pc)+1}function be(t,r){const n=t<0?"-":"",o=Math.abs(t).toString().padStart(r,"0");return n+o}const kn={y(t,r){const n=t.getFullYear(),o=n>0?n:1-n;return be(r==="yy"?o%100:o,r.length)},M(t,r){const n=t.getMonth();return r==="M"?String(n+1):be(n+1,2)},d(t,r){return be(t.getDate(),r.length)},a(t,r){const n=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,r){return be(t.getHours()%12||12,r.length)},H(t,r){return be(t.getHours(),r.length)},m(t,r){return be(t.getMinutes(),r.length)},s(t,r){return be(t.getSeconds(),r.length)},S(t,r){const n=r.length,o=t.getMilliseconds(),a=Math.trunc(o*Math.pow(10,n-3));return be(a,r.length)}},ar={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Il={G:function(t,r,n){const o=t.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(o,{width:"abbreviated"});case"GGGGG":return n.era(o,{width:"narrow"});case"GGGG":default:return n.era(o,{width:"wide"})}},y:function(t,r,n){if(r==="yo"){const o=t.getFullYear(),a=o>0?o:1-o;return n.ordinalNumber(a,{unit:"year"})}return kn.y(t,r)},Y:function(t,r,n,o){const a=wc(t,o),l=a>0?a:1-a;if(r==="YY"){const u=l%100;return be(u,2)}return r==="Yo"?n.ordinalNumber(l,{unit:"year"}):be(l,r.length)},R:function(t,r){const n=gc(t);return be(n,r.length)},u:function(t,r){const n=t.getFullYear();return be(n,r.length)},Q:function(t,r,n){const o=Math.ceil((t.getMonth()+1)/3);switch(r){case"Q":return String(o);case"QQ":return be(o,2);case"Qo":return n.ordinalNumber(o,{unit:"quarter"});case"QQQ":return n.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(o,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(o,{width:"wide",context:"formatting"})}},q:function(t,r,n){const o=Math.ceil((t.getMonth()+1)/3);switch(r){case"q":return String(o);case"qq":return be(o,2);case"qo":return n.ordinalNumber(o,{unit:"quarter"});case"qqq":return n.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(o,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(o,{width:"wide",context:"standalone"})}},M:function(t,r,n){const o=t.getMonth();switch(r){case"M":case"MM":return kn.M(t,r);case"Mo":return n.ordinalNumber(o+1,{unit:"month"});case"MMM":return n.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(o,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(o,{width:"wide",context:"formatting"})}},L:function(t,r,n){const o=t.getMonth();switch(r){case"L":return String(o+1);case"LL":return be(o+1,2);case"Lo":return n.ordinalNumber(o+1,{unit:"month"});case"LLL":return n.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(o,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(o,{width:"wide",context:"standalone"})}},w:function(t,r,n,o){const a=Ny(t,o);return r==="wo"?n.ordinalNumber(a,{unit:"week"}):be(a,r.length)},I:function(t,r,n){const o=Ly(t);return r==="Io"?n.ordinalNumber(o,{unit:"week"}):be(o,r.length)},d:function(t,r,n){return r==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):kn.d(t,r)},D:function(t,r,n){const o=Ry(t);return r==="Do"?n.ordinalNumber(o,{unit:"dayOfYear"}):be(o,r.length)},E:function(t,r,n){const o=t.getDay();switch(r){case"E":case"EE":case"EEE":return n.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(o,{width:"short",context:"formatting"});case"EEEE":default:return n.day(o,{width:"wide",context:"formatting"})}},e:function(t,r,n,o){const a=t.getDay(),l=(a-o.weekStartsOn+8)%7||7;switch(r){case"e":return String(l);case"ee":return be(l,2);case"eo":return n.ordinalNumber(l,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(t,r,n,o){const a=t.getDay(),l=(a-o.weekStartsOn+8)%7||7;switch(r){case"c":return String(l);case"cc":return be(l,r.length);case"co":return n.ordinalNumber(l,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(t,r,n){const o=t.getDay(),a=o===0?7:o;switch(r){case"i":return String(a);case"ii":return be(a,r.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(o,{width:"short",context:"formatting"});case"iiii":default:return n.day(o,{width:"wide",context:"formatting"})}},a:function(t,r,n){const a=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,r,n){const o=t.getHours();let a;switch(o===12?a=ar.noon:o===0?a=ar.midnight:a=o/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,r,n){const o=t.getHours();let a;switch(o>=17?a=ar.evening:o>=12?a=ar.afternoon:o>=4?a=ar.morning:a=ar.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,r,n){if(r==="ho"){let o=t.getHours()%12;return o===0&&(o=12),n.ordinalNumber(o,{unit:"hour"})}return kn.h(t,r)},H:function(t,r,n){return r==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):kn.H(t,r)},K:function(t,r,n){const o=t.getHours()%12;return r==="Ko"?n.ordinalNumber(o,{unit:"hour"}):be(o,r.length)},k:function(t,r,n){let o=t.getHours();return o===0&&(o=24),r==="ko"?n.ordinalNumber(o,{unit:"hour"}):be(o,r.length)},m:function(t,r,n){return r==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):kn.m(t,r)},s:function(t,r,n){return r==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):kn.s(t,r)},S:function(t,r){return kn.S(t,r)},X:function(t,r,n){const o=t.getTimezoneOffset();if(o===0)return"Z";switch(r){case"X":return Tl(o);case"XXXX":case"XX":return qn(o);case"XXXXX":case"XXX":default:return qn(o,":")}},x:function(t,r,n){const o=t.getTimezoneOffset();switch(r){case"x":return Tl(o);case"xxxx":case"xx":return qn(o);case"xxxxx":case"xxx":default:return qn(o,":")}},O:function(t,r,n){const o=t.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+El(o,":");case"OOOO":default:return"GMT"+qn(o,":")}},z:function(t,r,n){const o=t.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+El(o,":");case"zzzz":default:return"GMT"+qn(o,":")}},t:function(t,r,n){const o=Math.trunc(+t/1e3);return be(o,r.length)},T:function(t,r,n){return be(+t,r.length)}};function El(t,r=""){const n=t>0?"-":"+",o=Math.abs(t),a=Math.trunc(o/60),l=o%60;return l===0?n+String(a):n+String(a)+r+be(l,2)}function Tl(t,r){return t%60===0?(t>0?"-":"+")+be(Math.abs(t)/60,2):qn(t,r)}function qn(t,r=""){const n=t>0?"-":"+",o=Math.abs(t),a=be(Math.trunc(o/60),2),l=be(o%60,2);return n+a+r+l}const Al=(t,r)=>{switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},bc=(t,r)=>{switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},By=(t,r)=>{const n=t.match(/(P+)(p+)?/)||[],o=n[1],a=n[2];if(!a)return Al(t,r);let l;switch(o){case"P":l=r.dateTime({width:"short"});break;case"PP":l=r.dateTime({width:"medium"});break;case"PPP":l=r.dateTime({width:"long"});break;case"PPPP":default:l=r.dateTime({width:"full"});break}return l.replace("{{date}}",Al(o,r)).replace("{{time}}",bc(a,r))},$y={p:bc,P:By},Wy=/^D+$/,zy=/^Y+$/,qy=["D","DD","YY","YYYY"];function Hy(t){return Wy.test(t)}function Uy(t){return zy.test(t)}function Yy(t,r,n){const o=Gy(t,r,n);if(console.warn(o),qy.includes(t))throw new RangeError(o)}function Gy(t,r,n){const o=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${r}\`) for formatting ${o} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Vy=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Qy=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,jy=/^'([^]*?)'?$/,Ky=/''/g,Xy=/[a-zA-Z]/;function Ri(t,r,n){const o=Bi(),a=o.locale??Fy,l=o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,u=o.weekStartsOn??o.locale?.options?.weekStartsOn??0,c=At(t,n?.in);if(!J0(c))throw new RangeError("Invalid time value");let d=r.match(Qy).map(p=>{const g=p[0];if(g==="p"||g==="P"){const b=$y[g];return b(p,a.formatLong)}return p}).join("").match(Vy).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const g=p[0];if(g==="'")return{isToken:!1,value:Jy(p)};if(Il[g])return{isToken:!0,value:p};if(g.match(Xy))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:p}});a.localize.preprocessor&&(d=a.localize.preprocessor(c,d));const f={firstWeekContainsDate:l,weekStartsOn:u,locale:a};return d.map(p=>{if(!p.isToken)return p.value;const g=p.value;(Uy(g)||Hy(g))&&Yy(g,r,String(t));const b=Il[g[0]];return b(c,g,a.localize,f)}).join("")}function Jy(t){const r=t.match(jy);return r?r[1].replace(Ky,"'"):t}function Zy(t,r,n){return Q0(t,-r,n)}const vc={almostDailyReport:{folder:"l1almostDailyReport",name:"Daily Report"},"10daysReport":{folder:"l2tenL1ReportsReview",name:"10 Days Review"},"30daysReport":{folder:"l3ThreeL2Review",name:"30 Days Review"},"150daysReport":{folder:"l4FiveL3Review",name:"150 Days Review"}},mt=jt(Kt.SavingService),Mr={get baseOutput(){return`${je?.projectDir??"vault"}/${je?.outputDir??"outputs"}`},get fileExtension(){return je?.reportFileExtension??".md"},get reportFolders(){const t={};for(const[r,{folder:n}]of Object.entries(vc))t[r]=`${this.baseOutput}/${n}`;return t},_today(){return Ri(new Date,"yyyyMMdd")},_getFormattedDate(){return Ri(new Date,"dd.MM.yyyy")},_getDaysRemainingInYear(){const t=new Date,n=new Date(t.getFullYear(),11,31).getTime()-t.getTime(),o=Math.ceil(n/(1e3*60*60*24));return String(o).padStart(3,"0")},async _ensureFolder(t){xe.vault.getAbstractFileByPath(t)||(mt.dev(`Creating folder: ${t}`),await xe.vault.createFolder(t))},async _listFiles(t){await this._ensureFolder(t);const r=xe.vault.getAbstractFileByPath(t);return!r||!r.children?[]:r.children.filter(n=>"extension"in n&&n.extension==="md").map(n=>n.name)},async _openFile(t){try{mt.dev(`_openFile start: ${t.path}`);const r=xe.workspace.getLeaf(!0);if(await r.openFile(t),mt.dev(`Main leaf opened file: ${t.path}`),je?.devMode){const n=xe.workspace.createLeafBySplit(r,"vertical",!1);await n.openFile(t);const o={type:"markdown",state:{file:t.path,mode:"source"}};try{await n.setViewState(o),mt.dev("DevMode: right leaf forced to source mode")}catch(a){mt.warn(`Failed to force right leaf to source mode: ${a.message}`)}}}catch(r){mt.error(`Failed to open file ${t.path}: ${r.message}`)}},async write(t){const r=t.data??t.content;if(!r)throw new Error("No content provided for write()");const n=this.reportFolders[t.type];if(!n)throw new Error(`Unknown report type: ${t.type}`);await this._ensureFolder(n);const o=this._getDaysRemainingInYear(),a=this._getFormattedDate(),u=(await this._listFiles(n)).length+1,c=String(u).padStart(5,"0"),d=`${o}-${a}-${c}-${t.type}${this.fileExtension}`,f=`${n}/${d}`;if(xe.vault.getAbstractFileByPath(f))return mt.warn(`File already exists: ${f}. Skipping write.`),f;mt.info(`Writing new file: ${f}`);const g=await xe.vault.create(f,r);return t?.open!==!1&&await this._openFile(g),f},async writeGeneral(t,r,n=!1){let o;const a=xe.vault.getAbstractFileByPath(t);if(a)if("extension"in a)mt.info(`Overwriting existing file: ${t}`),await xe.vault.modify(a,r),o=a;else throw mt.error(`Path exists but is not a file: ${t}`),new Error(`Path exists but is not a file: ${t}`);else mt.info(`Creating new file: ${t}`),o=await xe.vault.create(t,r);return n&&await this._openFile(o),t},async delete(t){const r=xe.vault.getAbstractFileByPath(t);r?(mt.info(`Deleting file: ${t}`),await xe.vault.delete(r)):mt.warn(`Cannot delete; file not found: ${t}`)}};function Pl(t){if(t)throw t}var ia,Ml;function ew(){if(Ml)return ia;Ml=1;var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=function(f){return typeof Array.isArray=="function"?Array.isArray(f):r.call(f)==="[object Array]"},l=function(f){if(!f||r.call(f)!=="[object Object]")return!1;var p=t.call(f,"constructor"),g=f.constructor&&f.constructor.prototype&&t.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!p&&!g)return!1;var b;for(b in f);return typeof b>"u"||t.call(f,b)},u=function(f,p){n&&p.name==="__proto__"?n(f,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):f[p.name]=p.newValue},c=function(f,p){if(p==="__proto__")if(t.call(f,p)){if(o)return o(f,p).value}else return;return f[p]};return ia=function d(){var f,p,g,b,y,T,M=arguments[0],B=1,D=arguments.length,G=!1;for(typeof M=="boolean"&&(G=M,M=arguments[1]||{},B=2),(M==null||typeof M!="object"&&typeof M!="function")&&(M={});B<D;++B)if(f=arguments[B],f!=null)for(p in f)g=c(M,p),b=c(f,p),M!==b&&(G&&b&&(l(b)||(y=a(b)))?(y?(y=!1,T=g&&a(g)?g:[]):T=g&&l(g)?g:{},u(M,{name:p,newValue:d(G,T,b)})):typeof b<"u"&&u(M,{name:p,newValue:b}));return M},ia}var tw=ew();const oa=dc(tw);function Sa(t){if(typeof t!="object"||t===null)return!1;const r=Object.getPrototypeOf(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function nw(){const t=[],r={run:n,use:o};return r;function n(...a){let l=-1;const u=a.pop();if(typeof u!="function")throw new TypeError("Expected function as last argument, not "+u);c(null,...a);function c(d,...f){const p=t[++l];let g=-1;if(d){u(d);return}for(;++g<a.length;)(f[g]===null||f[g]===void 0)&&(f[g]=a[g]);a=f,p?rw(p,c)(...f):u(null,...f)}}function o(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return t.push(a),r}}function rw(t,r){let n;return o;function o(...u){const c=t.length>u.length;let d;c&&u.push(a);try{d=t.apply(this,u)}catch(f){const p=f;if(c&&n)throw p;return a(p)}c||(d&&d.then&&typeof d.then=="function"?d.then(l,a):d instanceof Error?a(d):l(d))}function a(u,...c){n||(n=!0,r(u,...c))}function l(u){a(null,u)}}function Tr(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Ol(t.position):"start"in t||"end"in t?Ol(t):"line"in t||"column"in t?Ca(t):""}function Ca(t){return Fl(t&&t.line)+":"+Fl(t&&t.column)}function Ol(t){return Ca(t&&t.start)+"-"+Ca(t&&t.end)}function Fl(t){return t&&typeof t=="number"?t:1}class ot extends Error{constructor(r,n,o){super(),typeof n=="string"&&(o=n,n=void 0);let a="",l={},u=!1;if(n&&("line"in n&&"column"in n?l={place:n}:"start"in n&&"end"in n?l={place:n}:"type"in n?l={ancestors:[n],place:n.position}:l={...n}),typeof r=="string"?a=r:!l.cause&&r&&(u=!0,a=r.message,l.cause=r),!l.ruleId&&!l.source&&typeof o=="string"){const d=o.indexOf(":");d===-1?l.ruleId=o:(l.source=o.slice(0,d),l.ruleId=o.slice(d+1))}if(!l.place&&l.ancestors&&l.ancestors){const d=l.ancestors[l.ancestors.length-1];d&&(l.place=d.position)}const c=l.place&&"start"in l.place?l.place.start:l.place;this.ancestors=l.ancestors||void 0,this.cause=l.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=c?c.line:void 0,this.name=Tr(l.place)||"1:1",this.place=l.place||void 0,this.reason=this.message,this.ruleId=l.ruleId||void 0,this.source=l.source||void 0,this.stack=u&&l.cause&&typeof l.cause.stack=="string"?l.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}ot.prototype.file="";ot.prototype.name="";ot.prototype.reason="";ot.prototype.message="";ot.prototype.stack="";ot.prototype.column=void 0;ot.prototype.line=void 0;ot.prototype.ancestors=void 0;ot.prototype.cause=void 0;ot.prototype.fatal=void 0;ot.prototype.place=void 0;ot.prototype.ruleId=void 0;ot.prototype.source=void 0;const Gt={basename:iw,dirname:ow,extname:aw,join:sw,sep:"/"};function iw(t,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');Or(t);let n=0,o=-1,a=t.length,l;if(r===void 0||r.length===0||r.length>t.length){for(;a--;)if(t.codePointAt(a)===47){if(l){n=a+1;break}}else o<0&&(l=!0,o=a+1);return o<0?"":t.slice(n,o)}if(r===t)return"";let u=-1,c=r.length-1;for(;a--;)if(t.codePointAt(a)===47){if(l){n=a+1;break}}else u<0&&(l=!0,u=a+1),c>-1&&(t.codePointAt(a)===r.codePointAt(c--)?c<0&&(o=a):(c=-1,o=u));return n===o?o=u:o<0&&(o=t.length),t.slice(n,o)}function ow(t){if(Or(t),t.length===0)return".";let r=-1,n=t.length,o;for(;--n;)if(t.codePointAt(n)===47){if(o){r=n;break}}else o||(o=!0);return r<0?t.codePointAt(0)===47?"/":".":r===1&&t.codePointAt(0)===47?"//":t.slice(0,r)}function aw(t){Or(t);let r=t.length,n=-1,o=0,a=-1,l=0,u;for(;r--;){const c=t.codePointAt(r);if(c===47){if(u){o=r+1;break}continue}n<0&&(u=!0,n=r+1),c===46?a<0?a=r:l!==1&&(l=1):a>-1&&(l=-1)}return a<0||n<0||l===0||l===1&&a===n-1&&a===o+1?"":t.slice(a,n)}function sw(...t){let r=-1,n;for(;++r<t.length;)Or(t[r]),t[r]&&(n=n===void 0?t[r]:n+"/"+t[r]);return n===void 0?".":uw(n)}function uw(t){Or(t);const r=t.codePointAt(0)===47;let n=lw(t,!r);return n.length===0&&!r&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),r?"/"+n:n}function lw(t,r){let n="",o=0,a=-1,l=0,u=-1,c,d;for(;++u<=t.length;){if(u<t.length)c=t.codePointAt(u);else{if(c===47)break;c=47}if(c===47){if(!(a===u-1||l===1))if(a!==u-1&&l===2){if(n.length<2||o!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(d=n.lastIndexOf("/"),d!==n.length-1){d<0?(n="",o=0):(n=n.slice(0,d),o=n.length-1-n.lastIndexOf("/")),a=u,l=0;continue}}else if(n.length>0){n="",o=0,a=u,l=0;continue}}r&&(n=n.length>0?n+"/..":"..",o=2)}else n.length>0?n+="/"+t.slice(a+1,u):n=t.slice(a+1,u),o=u-a-1;a=u,l=0}else c===46&&l>-1?l++:l=-1}return n}function Or(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const cw={cwd:fw};function fw(){return"/"}function Ia(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function hw(t){if(typeof t=="string")t=new URL(t);else if(!Ia(t)){const r=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw r.code="ERR_INVALID_ARG_TYPE",r}if(t.protocol!=="file:"){const r=new TypeError("The URL must be of scheme file");throw r.code="ERR_INVALID_URL_SCHEME",r}return dw(t)}function dw(t){if(t.hostname!==""){const o=new TypeError('File URL host must be "localhost" or empty on darwin');throw o.code="ERR_INVALID_FILE_URL_HOST",o}const r=t.pathname;let n=-1;for(;++n<r.length;)if(r.codePointAt(n)===37&&r.codePointAt(n+1)===50){const o=r.codePointAt(n+2);if(o===70||o===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(r)}const aa=["history","path","basename","stem","extname","dirname"];class pw{constructor(r){let n;r?Ia(r)?n={path:r}:typeof r=="string"||gw(r)?n={value:r}:n=r:n={},this.cwd="cwd"in n?"":cw.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let o=-1;for(;++o<aa.length;){const l=aa[o];l in n&&n[l]!==void 0&&n[l]!==null&&(this[l]=l==="history"?[...n[l]]:n[l])}let a;for(a in n)aa.includes(a)||(this[a]=n[a])}get basename(){return typeof this.path=="string"?Gt.basename(this.path):void 0}set basename(r){ua(r,"basename"),sa(r,"basename"),this.path=Gt.join(this.dirname||"",r)}get dirname(){return typeof this.path=="string"?Gt.dirname(this.path):void 0}set dirname(r){Rl(this.basename,"dirname"),this.path=Gt.join(r||"",this.basename)}get extname(){return typeof this.path=="string"?Gt.extname(this.path):void 0}set extname(r){if(sa(r,"extname"),Rl(this.dirname,"extname"),r){if(r.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(r.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Gt.join(this.dirname,this.stem+(r||""))}get path(){return this.history[this.history.length-1]}set path(r){Ia(r)&&(r=hw(r)),ua(r,"path"),this.path!==r&&this.history.push(r)}get stem(){return typeof this.path=="string"?Gt.basename(this.path,this.extname):void 0}set stem(r){ua(r,"stem"),sa(r,"stem"),this.path=Gt.join(this.dirname||"",r+(this.extname||""))}fail(r,n,o){const a=this.message(r,n,o);throw a.fatal=!0,a}info(r,n,o){const a=this.message(r,n,o);return a.fatal=void 0,a}message(r,n,o){const a=new ot(r,n,o);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(r){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(r||void 0).decode(this.value)}}function sa(t,r){if(t&&t.includes(Gt.sep))throw new Error("`"+r+"` cannot be a path: did not expect `"+Gt.sep+"`")}function ua(t,r){if(!t)throw new Error("`"+r+"` cannot be empty")}function Rl(t,r){if(!t)throw new Error("Setting `"+r+"` requires `path` to be set too")}function gw(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const mw=(function(t){const o=this.constructor.prototype,a=o[t],l=function(){return a.apply(l,arguments)};return Object.setPrototypeOf(l,o),l}),yw={}.hasOwnProperty;class Da extends mw{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=nw()}copy(){const r=new Da;let n=-1;for(;++n<this.attachers.length;){const o=this.attachers[n];r.use(...o)}return r.data(oa(!0,{},this.namespace)),r}data(r,n){return typeof r=="string"?arguments.length===2?(fa("data",this.frozen),this.namespace[r]=n,this):yw.call(this.namespace,r)&&this.namespace[r]||void 0:r?(fa("data",this.frozen),this.namespace=r,this):this.namespace}freeze(){if(this.frozen)return this;const r=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...o]=this.attachers[this.freezeIndex];if(o[0]===!1)continue;o[0]===!0&&(o[0]=void 0);const a=n.call(r,...o);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(r){this.freeze();const n=Ei(r),o=this.parser||this.Parser;return la("parse",o),o(String(n),n)}process(r,n){const o=this;return this.freeze(),la("process",this.parser||this.Parser),ca("process",this.compiler||this.Compiler),n?a(void 0,n):new Promise(a);function a(l,u){const c=Ei(r),d=o.parse(c);o.run(d,c,function(p,g,b){if(p||!g||!b)return f(p);const y=g,T=o.stringify(y,b);bw(T)?b.value=T:b.result=T,f(p,b)});function f(p,g){p||!g?u(p):l?l(g):n(void 0,g)}}}processSync(r){let n=!1,o;return this.freeze(),la("processSync",this.parser||this.Parser),ca("processSync",this.compiler||this.Compiler),this.process(r,a),Dl("processSync","process",n),o;function a(l,u){n=!0,Pl(l),o=u}}run(r,n,o){Ll(r),this.freeze();const a=this.transformers;return!o&&typeof n=="function"&&(o=n,n=void 0),o?l(void 0,o):new Promise(l);function l(u,c){const d=Ei(n);a.run(r,d,f);function f(p,g,b){const y=g||r;p?c(p):u?u(y):o(void 0,y,b)}}}runSync(r,n){let o=!1,a;return this.run(r,n,l),Dl("runSync","run",o),a;function l(u,c){Pl(u),a=c,o=!0}}stringify(r,n){this.freeze();const o=Ei(n),a=this.compiler||this.Compiler;return ca("stringify",a),Ll(r),a(r,o)}use(r,...n){const o=this.attachers,a=this.namespace;if(fa("use",this.frozen),r!=null)if(typeof r=="function")d(r,n);else if(typeof r=="object")Array.isArray(r)?c(r):u(r);else throw new TypeError("Expected usable value, not `"+r+"`");return this;function l(f){if(typeof f=="function")d(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[p,...g]=f;d(p,g)}else u(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function u(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(f.plugins),f.settings&&(a.settings=oa(!0,a.settings,f.settings))}function c(f){let p=-1;if(f!=null)if(Array.isArray(f))for(;++p<f.length;){const g=f[p];l(g)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function d(f,p){let g=-1,b=-1;for(;++g<o.length;)if(o[g][0]===f){b=g;break}if(b===-1)o.push([f,...p]);else if(p.length>0){let[y,...T]=p;const M=o[b][1];Sa(M)&&Sa(y)&&(y=oa(!0,M,y)),o[b]=[f,y,...T]}}}}const Ea=new Da().freeze();function la(t,r){if(typeof r!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function ca(t,r){if(typeof r!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function fa(t,r){if(r)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Ll(t){if(!Sa(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function Dl(t,r,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+r+"` instead")}function Ei(t){return ww(t)?t:new pw(t)}function ww(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function bw(t){return typeof t=="string"||vw(t)}function vw(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const xw={};function Na(t,r){const n=xw,o=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,a=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return xc(t,o,a)}function xc(t,r,n){if(_w(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(r&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Nl(t.children,r,n)}return Array.isArray(t)?Nl(t,r,n):""}function Nl(t,r,n){const o=[];let a=-1;for(;++a<t.length;)o[a]=xc(t[a],r,n);return o.join("")}function _w(t){return!!(t&&typeof t=="object")}const Bl=document.createElement("i");function Ba(t){const r="&"+t+";";Bl.innerHTML=r;const n=Bl.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===r?!1:n}function Qt(t,r,n,o){const a=t.length;let l=0,u;if(r<0?r=-r>a?0:a+r:r=r>a?a:r,n=n>0?n:0,o.length<1e4)u=Array.from(o),u.unshift(r,n),t.splice(...u);else for(n&&t.splice(r,n);l<o.length;)u=o.slice(l,l+1e4),u.unshift(r,0),t.splice(...u),l+=1e4,r+=1e4}function Tt(t,r){return t.length>0?(Qt(t,t.length,0,r),t):r}const $l={}.hasOwnProperty;function kw(t){const r={};let n=-1;for(;++n<t.length;)Sw(r,t[n]);return r}function Sw(t,r){let n;for(n in r){const a=($l.call(t,n)?t[n]:void 0)||(t[n]={}),l=r[n];let u;if(l)for(u in l){$l.call(a,u)||(a[u]=[]);const c=l[u];Cw(a[u],Array.isArray(c)?c:c?[c]:[])}}}function Cw(t,r){let n=-1;const o=[];for(;++n<r.length;)(r[n].add==="after"?t:o).push(r[n]);Qt(t,0,0,o)}function _c(t,r){const n=Number.parseInt(t,r);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function sr(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Vt=In(/[A-Za-z]/),Wt=In(/[\dA-Za-z]/),Iw=In(/[#-'*+\--9=?A-Z^-~]/);function Ta(t){return t!==null&&(t<32||t===127)}const Aa=In(/\d/),Ew=In(/[\dA-Fa-f]/),Tw=In(/[!-/:-@[-`{-~]/);function te(t){return t!==null&&t<-2}function it(t){return t!==null&&(t<0||t===32)}function ge(t){return t===-2||t===-1||t===32}const Aw=In(new RegExp("\\p{P}|\\p{S}","u")),Pw=In(/\s/);function In(t){return r;function r(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function ke(t,r,n,o){const a=o?o-1:Number.POSITIVE_INFINITY;let l=0;return u;function u(d){return ge(d)?(t.enter(n),c(d)):r(d)}function c(d){return ge(d)&&l++<a?(t.consume(d),c):(t.exit(n),r(d))}}const Mw={tokenize:Ow};function Ow(t){const r=t.attempt(this.parser.constructs.contentInitial,o,a);let n;return r;function o(c){if(c===null){t.consume(c);return}return t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),ke(t,r,"linePrefix")}function a(c){return t.enter("paragraph"),l(c)}function l(c){const d=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=d),n=d,u(c)}function u(c){if(c===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(c);return}return te(c)?(t.consume(c),t.exit("chunkText"),l):(t.consume(c),u)}}const Fw={tokenize:Rw},Wl={tokenize:Lw};function Rw(t){const r=this,n=[];let o=0,a,l,u;return c;function c(z){if(o<n.length){const W=n[o];return r.containerState=W[1],t.attempt(W[0].continuation,d,f)(z)}return f(z)}function d(z){if(o++,r.containerState._closeFlow){r.containerState._closeFlow=void 0,a&&G();const W=r.events.length;let F=W,E;for(;F--;)if(r.events[F][0]==="exit"&&r.events[F][1].type==="chunkFlow"){E=r.events[F][1].end;break}D(o);let U=W;for(;U<r.events.length;)r.events[U][1].end={...E},U++;return Qt(r.events,F+1,0,r.events.slice(W)),r.events.length=U,f(z)}return c(z)}function f(z){if(o===n.length){if(!a)return b(z);if(a.currentConstruct&&a.currentConstruct.concrete)return T(z);r.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return r.containerState={},t.check(Wl,p,g)(z)}function p(z){return a&&G(),D(o),b(z)}function g(z){return r.parser.lazy[r.now().line]=o!==n.length,u=r.now().offset,T(z)}function b(z){return r.containerState={},t.attempt(Wl,y,T)(z)}function y(z){return o++,n.push([r.currentConstruct,r.containerState]),b(z)}function T(z){if(z===null){a&&G(),D(0),t.consume(z);return}return a=a||r.parser.flow(r.now()),t.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:l}),M(z)}function M(z){if(z===null){B(t.exit("chunkFlow"),!0),D(0),t.consume(z);return}return te(z)?(t.consume(z),B(t.exit("chunkFlow")),o=0,r.interrupt=void 0,c):(t.consume(z),M)}function B(z,W){const F=r.sliceStream(z);if(W&&F.push(null),z.previous=l,l&&(l.next=z),l=z,a.defineSkip(z.start),a.write(F),r.parser.lazy[z.start.line]){let E=a.events.length;for(;E--;)if(a.events[E][1].start.offset<u&&(!a.events[E][1].end||a.events[E][1].end.offset>u))return;const U=r.events.length;let Q=U,ee,he;for(;Q--;)if(r.events[Q][0]==="exit"&&r.events[Q][1].type==="chunkFlow"){if(ee){he=r.events[Q][1].end;break}ee=!0}for(D(o),E=U;E<r.events.length;)r.events[E][1].end={...he},E++;Qt(r.events,Q+1,0,r.events.slice(U)),r.events.length=E}}function D(z){let W=n.length;for(;W-- >z;){const F=n[W];r.containerState=F[1],F[0].exit.call(r,t)}n.length=z}function G(){a.write([null]),l=void 0,a=void 0,r.containerState._closeFlow=void 0}}function Lw(t,r,n){return ke(t,t.attempt(this.parser.constructs.document,r,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Li(t){if(t===null||it(t)||Pw(t))return 1;if(Aw(t))return 2}function $a(t,r,n){const o=[];let a=-1;for(;++a<t.length;){const l=t[a].resolveAll;l&&!o.includes(l)&&(r=l(r,n),o.push(l))}return r}const Pa={name:"attention",resolveAll:Dw,tokenize:Nw};function Dw(t,r){let n=-1,o,a,l,u,c,d,f,p;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(o=n;o--;)if(t[o][0]==="exit"&&t[o][1].type==="attentionSequence"&&t[o][1]._open&&r.sliceSerialize(t[o][1]).charCodeAt(0)===r.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[o][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[o][1].end.offset-t[o][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;d=t[o][1].end.offset-t[o][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const g={...t[o][1].end},b={...t[n][1].start};zl(g,-d),zl(b,d),u={type:d>1?"strongSequence":"emphasisSequence",start:g,end:{...t[o][1].end}},c={type:d>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:b},l={type:d>1?"strongText":"emphasisText",start:{...t[o][1].end},end:{...t[n][1].start}},a={type:d>1?"strong":"emphasis",start:{...u.start},end:{...c.end}},t[o][1].end={...u.start},t[n][1].start={...c.end},f=[],t[o][1].end.offset-t[o][1].start.offset&&(f=Tt(f,[["enter",t[o][1],r],["exit",t[o][1],r]])),f=Tt(f,[["enter",a,r],["enter",u,r],["exit",u,r],["enter",l,r]]),f=Tt(f,$a(r.parser.constructs.insideSpan.null,t.slice(o+1,n),r)),f=Tt(f,[["exit",l,r],["enter",c,r],["exit",c,r],["exit",a,r]]),t[n][1].end.offset-t[n][1].start.offset?(p=2,f=Tt(f,[["enter",t[n][1],r],["exit",t[n][1],r]])):p=0,Qt(t,o-1,n-o+3,f),n=o+f.length-p-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function Nw(t,r){const n=this.parser.constructs.attentionMarkers.null,o=this.previous,a=Li(o);let l;return u;function u(d){return l=d,t.enter("attentionSequence"),c(d)}function c(d){if(d===l)return t.consume(d),c;const f=t.exit("attentionSequence"),p=Li(d),g=!p||p===2&&a||n.includes(d),b=!a||a===2&&p||n.includes(o);return f._open=!!(l===42?g:g&&(a||!b)),f._close=!!(l===42?b:b&&(p||!g)),r(d)}}function zl(t,r){t.column+=r,t.offset+=r,t._bufferIndex+=r}const Bw={name:"autolink",tokenize:$w};function $w(t,r,n){let o=0;return a;function a(y){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),l}function l(y){return Vt(y)?(t.consume(y),u):y===64?n(y):f(y)}function u(y){return y===43||y===45||y===46||Wt(y)?(o=1,c(y)):f(y)}function c(y){return y===58?(t.consume(y),o=0,d):(y===43||y===45||y===46||Wt(y))&&o++<32?(t.consume(y),c):(o=0,f(y))}function d(y){return y===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),r):y===null||y===32||y===60||Ta(y)?n(y):(t.consume(y),d)}function f(y){return y===64?(t.consume(y),p):Iw(y)?(t.consume(y),f):n(y)}function p(y){return Wt(y)?g(y):n(y)}function g(y){return y===46?(t.consume(y),o=0,p):y===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),r):b(y)}function b(y){if((y===45||Wt(y))&&o++<63){const T=y===45?b:g;return t.consume(y),T}return n(y)}}const $i={partial:!0,tokenize:Ww};function Ww(t,r,n){return o;function o(l){return ge(l)?ke(t,a,"linePrefix")(l):a(l)}function a(l){return l===null||te(l)?r(l):n(l)}}const kc={continuation:{tokenize:qw},exit:Hw,name:"blockQuote",tokenize:zw};function zw(t,r,n){const o=this;return a;function a(u){if(u===62){const c=o.containerState;return c.open||(t.enter("blockQuote",{_container:!0}),c.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(u),t.exit("blockQuoteMarker"),l}return n(u)}function l(u){return ge(u)?(t.enter("blockQuotePrefixWhitespace"),t.consume(u),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),r):(t.exit("blockQuotePrefix"),r(u))}}function qw(t,r,n){const o=this;return a;function a(u){return ge(u)?ke(t,l,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u):l(u)}function l(u){return t.attempt(kc,r,n)(u)}}function Hw(t){t.exit("blockQuote")}const Sc={name:"characterEscape",tokenize:Uw};function Uw(t,r,n){return o;function o(l){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(l),t.exit("escapeMarker"),a}function a(l){return Tw(l)?(t.enter("characterEscapeValue"),t.consume(l),t.exit("characterEscapeValue"),t.exit("characterEscape"),r):n(l)}}const Cc={name:"characterReference",tokenize:Yw};function Yw(t,r,n){const o=this;let a=0,l,u;return c;function c(g){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(g),t.exit("characterReferenceMarker"),d}function d(g){return g===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(g),t.exit("characterReferenceMarkerNumeric"),f):(t.enter("characterReferenceValue"),l=31,u=Wt,p(g))}function f(g){return g===88||g===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(g),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),l=6,u=Ew,p):(t.enter("characterReferenceValue"),l=7,u=Aa,p(g))}function p(g){if(g===59&&a){const b=t.exit("characterReferenceValue");return u===Wt&&!Ba(o.sliceSerialize(b))?n(g):(t.enter("characterReferenceMarker"),t.consume(g),t.exit("characterReferenceMarker"),t.exit("characterReference"),r)}return u(g)&&a++<l?(t.consume(g),p):n(g)}}const ql={partial:!0,tokenize:Vw},Hl={concrete:!0,name:"codeFenced",tokenize:Gw};function Gw(t,r,n){const o=this,a={partial:!0,tokenize:F};let l=0,u=0,c;return d;function d(E){return f(E)}function f(E){const U=o.events[o.events.length-1];return l=U&&U[1].type==="linePrefix"?U[2].sliceSerialize(U[1],!0).length:0,c=E,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),p(E)}function p(E){return E===c?(u++,t.consume(E),p):u<3?n(E):(t.exit("codeFencedFenceSequence"),ge(E)?ke(t,g,"whitespace")(E):g(E))}function g(E){return E===null||te(E)?(t.exit("codeFencedFence"),o.interrupt?r(E):t.check(ql,M,W)(E)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),b(E))}function b(E){return E===null||te(E)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),g(E)):ge(E)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),ke(t,y,"whitespace")(E)):E===96&&E===c?n(E):(t.consume(E),b)}function y(E){return E===null||te(E)?g(E):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),T(E))}function T(E){return E===null||te(E)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),g(E)):E===96&&E===c?n(E):(t.consume(E),T)}function M(E){return t.attempt(a,W,B)(E)}function B(E){return t.enter("lineEnding"),t.consume(E),t.exit("lineEnding"),D}function D(E){return l>0&&ge(E)?ke(t,G,"linePrefix",l+1)(E):G(E)}function G(E){return E===null||te(E)?t.check(ql,M,W)(E):(t.enter("codeFlowValue"),z(E))}function z(E){return E===null||te(E)?(t.exit("codeFlowValue"),G(E)):(t.consume(E),z)}function W(E){return t.exit("codeFenced"),r(E)}function F(E,U,Q){let ee=0;return he;function he(ce){return E.enter("lineEnding"),E.consume(ce),E.exit("lineEnding"),j}function j(ce){return E.enter("codeFencedFence"),ge(ce)?ke(E,V,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ce):V(ce)}function V(ce){return ce===c?(E.enter("codeFencedFenceSequence"),me(ce)):Q(ce)}function me(ce){return ce===c?(ee++,E.consume(ce),me):ee>=u?(E.exit("codeFencedFenceSequence"),ge(ce)?ke(E,Ee,"whitespace")(ce):Ee(ce)):Q(ce)}function Ee(ce){return ce===null||te(ce)?(E.exit("codeFencedFence"),U(ce)):Q(ce)}}}function Vw(t,r,n){const o=this;return a;function a(u){return u===null?n(u):(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),l)}function l(u){return o.parser.lazy[o.now().line]?n(u):r(u)}}const ha={name:"codeIndented",tokenize:jw},Qw={partial:!0,tokenize:Kw};function jw(t,r,n){const o=this;return a;function a(f){return t.enter("codeIndented"),ke(t,l,"linePrefix",5)(f)}function l(f){const p=o.events[o.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?u(f):n(f)}function u(f){return f===null?d(f):te(f)?t.attempt(Qw,u,d)(f):(t.enter("codeFlowValue"),c(f))}function c(f){return f===null||te(f)?(t.exit("codeFlowValue"),u(f)):(t.consume(f),c)}function d(f){return t.exit("codeIndented"),r(f)}}function Kw(t,r,n){const o=this;return a;function a(u){return o.parser.lazy[o.now().line]?n(u):te(u)?(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),a):ke(t,l,"linePrefix",5)(u)}function l(u){const c=o.events[o.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?r(u):te(u)?a(u):n(u)}}const Xw={name:"codeText",previous:Zw,resolve:Jw,tokenize:eb};function Jw(t){let r=t.length-4,n=3,o,a;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[r][1].type==="lineEnding"||t[r][1].type==="space")){for(o=n;++o<r;)if(t[o][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[r][1].type="codeTextPadding",n+=2,r-=2;break}}for(o=n-1,r++;++o<=r;)a===void 0?o!==r&&t[o][1].type!=="lineEnding"&&(a=o):(o===r||t[o][1].type==="lineEnding")&&(t[a][1].type="codeTextData",o!==a+2&&(t[a][1].end=t[o-1][1].end,t.splice(a+2,o-a-2),r-=o-a-2,o=a+2),a=void 0);return t}function Zw(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function eb(t,r,n){let o=0,a,l;return u;function u(g){return t.enter("codeText"),t.enter("codeTextSequence"),c(g)}function c(g){return g===96?(t.consume(g),o++,c):(t.exit("codeTextSequence"),d(g))}function d(g){return g===null?n(g):g===32?(t.enter("space"),t.consume(g),t.exit("space"),d):g===96?(l=t.enter("codeTextSequence"),a=0,p(g)):te(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),d):(t.enter("codeTextData"),f(g))}function f(g){return g===null||g===32||g===96||te(g)?(t.exit("codeTextData"),d(g)):(t.consume(g),f)}function p(g){return g===96?(t.consume(g),a++,p):a===o?(t.exit("codeTextSequence"),t.exit("codeText"),r(g)):(l.type="codeTextData",f(g))}}class tb{constructor(r){this.left=r?[...r]:[],this.right=[]}get(r){if(r<0||r>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+r+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return r<this.left.length?this.left[r]:this.right[this.right.length-r+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(r,n){const o=n??Number.POSITIVE_INFINITY;return o<this.left.length?this.left.slice(r,o):r>this.left.length?this.right.slice(this.right.length-o+this.left.length,this.right.length-r+this.left.length).reverse():this.left.slice(r).concat(this.right.slice(this.right.length-o+this.left.length).reverse())}splice(r,n,o){const a=n||0;this.setCursor(Math.trunc(r));const l=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return o&&Cr(this.left,o),l.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(r){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(r)}pushMany(r){this.setCursor(Number.POSITIVE_INFINITY),Cr(this.left,r)}unshift(r){this.setCursor(0),this.right.push(r)}unshiftMany(r){this.setCursor(0),Cr(this.right,r.reverse())}setCursor(r){if(!(r===this.left.length||r>this.left.length&&this.right.length===0||r<0&&this.left.length===0))if(r<this.left.length){const n=this.left.splice(r,Number.POSITIVE_INFINITY);Cr(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-r,Number.POSITIVE_INFINITY);Cr(this.left,n.reverse())}}}function Cr(t,r){let n=0;if(r.length<1e4)t.push(...r);else for(;n<r.length;)t.push(...r.slice(n,n+1e4)),n+=1e4}function Ic(t){const r={};let n=-1,o,a,l,u,c,d,f;const p=new tb(t);for(;++n<p.length;){for(;n in r;)n=r[n];if(o=p.get(n),n&&o[1].type==="chunkFlow"&&p.get(n-1)[1].type==="listItemPrefix"&&(d=o[1]._tokenizer.events,l=0,l<d.length&&d[l][1].type==="lineEndingBlank"&&(l+=2),l<d.length&&d[l][1].type==="content"))for(;++l<d.length&&d[l][1].type!=="content";)d[l][1].type==="chunkText"&&(d[l][1]._isInFirstContentOfListItem=!0,l++);if(o[0]==="enter")o[1].contentType&&(Object.assign(r,nb(p,n)),n=r[n],f=!0);else if(o[1]._container){for(l=n,a=void 0;l--;)if(u=p.get(l),u[1].type==="lineEnding"||u[1].type==="lineEndingBlank")u[0]==="enter"&&(a&&(p.get(a)[1].type="lineEndingBlank"),u[1].type="lineEnding",a=l);else if(!(u[1].type==="linePrefix"||u[1].type==="listItemIndent"))break;a&&(o[1].end={...p.get(a)[1].start},c=p.slice(a,n),c.unshift(o),p.splice(a,n-a+1,c))}}return Qt(t,0,Number.POSITIVE_INFINITY,p.slice(0)),!f}function nb(t,r){const n=t.get(r)[1],o=t.get(r)[2];let a=r-1;const l=[];let u=n._tokenizer;u||(u=o.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(u._contentTypeTextTrailing=!0));const c=u.events,d=[],f={};let p,g,b=-1,y=n,T=0,M=0;const B=[M];for(;y;){for(;t.get(++a)[1]!==y;);l.push(a),y._tokenizer||(p=o.sliceStream(y),y.next||p.push(null),g&&u.defineSkip(y.start),y._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=!0),u.write(p),y._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=void 0)),g=y,y=y.next}for(y=n;++b<c.length;)c[b][0]==="exit"&&c[b-1][0]==="enter"&&c[b][1].type===c[b-1][1].type&&c[b][1].start.line!==c[b][1].end.line&&(M=b+1,B.push(M),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(u.events=[],y?(y._tokenizer=void 0,y.previous=void 0):B.pop(),b=B.length;b--;){const D=c.slice(B[b],B[b+1]),G=l.pop();d.push([G,G+D.length-1]),t.splice(G,2,D)}for(d.reverse(),b=-1;++b<d.length;)f[T+d[b][0]]=T+d[b][1],T+=d[b][1]-d[b][0]-1;return f}const rb={resolve:ob,tokenize:ab},ib={partial:!0,tokenize:sb};function ob(t){return Ic(t),t}function ab(t,r){let n;return o;function o(c){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),a(c)}function a(c){return c===null?l(c):te(c)?t.check(ib,u,l)(c):(t.consume(c),a)}function l(c){return t.exit("chunkContent"),t.exit("content"),r(c)}function u(c){return t.consume(c),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function sb(t,r,n){const o=this;return a;function a(u){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),ke(t,l,"linePrefix")}function l(u){if(u===null||te(u))return n(u);const c=o.events[o.events.length-1];return!o.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?r(u):t.interrupt(o.parser.constructs.flow,n,r)(u)}}function Ec(t,r,n,o,a,l,u,c,d){const f=d||Number.POSITIVE_INFINITY;let p=0;return g;function g(D){return D===60?(t.enter(o),t.enter(a),t.enter(l),t.consume(D),t.exit(l),b):D===null||D===32||D===41||Ta(D)?n(D):(t.enter(o),t.enter(u),t.enter(c),t.enter("chunkString",{contentType:"string"}),M(D))}function b(D){return D===62?(t.enter(l),t.consume(D),t.exit(l),t.exit(a),t.exit(o),r):(t.enter(c),t.enter("chunkString",{contentType:"string"}),y(D))}function y(D){return D===62?(t.exit("chunkString"),t.exit(c),b(D)):D===null||D===60||te(D)?n(D):(t.consume(D),D===92?T:y)}function T(D){return D===60||D===62||D===92?(t.consume(D),y):y(D)}function M(D){return!p&&(D===null||D===41||it(D))?(t.exit("chunkString"),t.exit(c),t.exit(u),t.exit(o),r(D)):p<f&&D===40?(t.consume(D),p++,M):D===41?(t.consume(D),p--,M):D===null||D===32||D===40||Ta(D)?n(D):(t.consume(D),D===92?B:M)}function B(D){return D===40||D===41||D===92?(t.consume(D),M):M(D)}}function Tc(t,r,n,o,a,l){const u=this;let c=0,d;return f;function f(y){return t.enter(o),t.enter(a),t.consume(y),t.exit(a),t.enter(l),p}function p(y){return c>999||y===null||y===91||y===93&&!d||y===94&&!c&&"_hiddenFootnoteSupport"in u.parser.constructs?n(y):y===93?(t.exit(l),t.enter(a),t.consume(y),t.exit(a),t.exit(o),r):te(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),p):(t.enter("chunkString",{contentType:"string"}),g(y))}function g(y){return y===null||y===91||y===93||te(y)||c++>999?(t.exit("chunkString"),p(y)):(t.consume(y),d||(d=!ge(y)),y===92?b:g)}function b(y){return y===91||y===92||y===93?(t.consume(y),c++,g):g(y)}}function Ac(t,r,n,o,a,l){let u;return c;function c(b){return b===34||b===39||b===40?(t.enter(o),t.enter(a),t.consume(b),t.exit(a),u=b===40?41:b,d):n(b)}function d(b){return b===u?(t.enter(a),t.consume(b),t.exit(a),t.exit(o),r):(t.enter(l),f(b))}function f(b){return b===u?(t.exit(l),d(u)):b===null?n(b):te(b)?(t.enter("lineEnding"),t.consume(b),t.exit("lineEnding"),ke(t,f,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),p(b))}function p(b){return b===u||b===null||te(b)?(t.exit("chunkString"),f(b)):(t.consume(b),b===92?g:p)}function g(b){return b===u||b===92?(t.consume(b),p):p(b)}}function Ar(t,r){let n;return o;function o(a){return te(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),n=!0,o):ge(a)?ke(t,o,n?"linePrefix":"lineSuffix")(a):r(a)}}const ub={name:"definition",tokenize:cb},lb={partial:!0,tokenize:fb};function cb(t,r,n){const o=this;let a;return l;function l(y){return t.enter("definition"),u(y)}function u(y){return Tc.call(o,t,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function c(y){return a=sr(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)),y===58?(t.enter("definitionMarker"),t.consume(y),t.exit("definitionMarker"),d):n(y)}function d(y){return it(y)?Ar(t,f)(y):f(y)}function f(y){return Ec(t,p,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function p(y){return t.attempt(lb,g,g)(y)}function g(y){return ge(y)?ke(t,b,"whitespace")(y):b(y)}function b(y){return y===null||te(y)?(t.exit("definition"),o.parser.defined.push(a),r(y)):n(y)}}function fb(t,r,n){return o;function o(c){return it(c)?Ar(t,a)(c):n(c)}function a(c){return Ac(t,l,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function l(c){return ge(c)?ke(t,u,"whitespace")(c):u(c)}function u(c){return c===null||te(c)?r(c):n(c)}}const hb={name:"hardBreakEscape",tokenize:db};function db(t,r,n){return o;function o(l){return t.enter("hardBreakEscape"),t.consume(l),a}function a(l){return te(l)?(t.exit("hardBreakEscape"),r(l)):n(l)}}const pb={name:"headingAtx",resolve:gb,tokenize:mb};function gb(t,r){let n=t.length-2,o=3,a,l;return t[o][1].type==="whitespace"&&(o+=2),n-2>o&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(o===n-1||n-4>o&&t[n-2][1].type==="whitespace")&&(n-=o+1===n?2:4),n>o&&(a={type:"atxHeadingText",start:t[o][1].start,end:t[n][1].end},l={type:"chunkText",start:t[o][1].start,end:t[n][1].end,contentType:"text"},Qt(t,o,n-o+1,[["enter",a,r],["enter",l,r],["exit",l,r],["exit",a,r]])),t}function mb(t,r,n){let o=0;return a;function a(p){return t.enter("atxHeading"),l(p)}function l(p){return t.enter("atxHeadingSequence"),u(p)}function u(p){return p===35&&o++<6?(t.consume(p),u):p===null||it(p)?(t.exit("atxHeadingSequence"),c(p)):n(p)}function c(p){return p===35?(t.enter("atxHeadingSequence"),d(p)):p===null||te(p)?(t.exit("atxHeading"),r(p)):ge(p)?ke(t,c,"whitespace")(p):(t.enter("atxHeadingText"),f(p))}function d(p){return p===35?(t.consume(p),d):(t.exit("atxHeadingSequence"),c(p))}function f(p){return p===null||p===35||it(p)?(t.exit("atxHeadingText"),c(p)):(t.consume(p),f)}}const yb=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Ul=["pre","script","style","textarea"],wb={concrete:!0,name:"htmlFlow",resolveTo:xb,tokenize:_b},bb={partial:!0,tokenize:Sb},vb={partial:!0,tokenize:kb};function xb(t){let r=t.length;for(;r--&&!(t[r][0]==="enter"&&t[r][1].type==="htmlFlow"););return r>1&&t[r-2][1].type==="linePrefix"&&(t[r][1].start=t[r-2][1].start,t[r+1][1].start=t[r-2][1].start,t.splice(r-2,2)),t}function _b(t,r,n){const o=this;let a,l,u,c,d;return f;function f(S){return p(S)}function p(S){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(S),g}function g(S){return S===33?(t.consume(S),b):S===47?(t.consume(S),l=!0,M):S===63?(t.consume(S),a=3,o.interrupt?r:_):Vt(S)?(t.consume(S),u=String.fromCharCode(S),B):n(S)}function b(S){return S===45?(t.consume(S),a=2,y):S===91?(t.consume(S),a=5,c=0,T):Vt(S)?(t.consume(S),a=4,o.interrupt?r:_):n(S)}function y(S){return S===45?(t.consume(S),o.interrupt?r:_):n(S)}function T(S){const at="CDATA[";return S===at.charCodeAt(c++)?(t.consume(S),c===at.length?o.interrupt?r:V:T):n(S)}function M(S){return Vt(S)?(t.consume(S),u=String.fromCharCode(S),B):n(S)}function B(S){if(S===null||S===47||S===62||it(S)){const at=S===47,Ke=u.toLowerCase();return!at&&!l&&Ul.includes(Ke)?(a=1,o.interrupt?r(S):V(S)):yb.includes(u.toLowerCase())?(a=6,at?(t.consume(S),D):o.interrupt?r(S):V(S)):(a=7,o.interrupt&&!o.parser.lazy[o.now().line]?n(S):l?G(S):z(S))}return S===45||Wt(S)?(t.consume(S),u+=String.fromCharCode(S),B):n(S)}function D(S){return S===62?(t.consume(S),o.interrupt?r:V):n(S)}function G(S){return ge(S)?(t.consume(S),G):he(S)}function z(S){return S===47?(t.consume(S),he):S===58||S===95||Vt(S)?(t.consume(S),W):ge(S)?(t.consume(S),z):he(S)}function W(S){return S===45||S===46||S===58||S===95||Wt(S)?(t.consume(S),W):F(S)}function F(S){return S===61?(t.consume(S),E):ge(S)?(t.consume(S),F):z(S)}function E(S){return S===null||S===60||S===61||S===62||S===96?n(S):S===34||S===39?(t.consume(S),d=S,U):ge(S)?(t.consume(S),E):Q(S)}function U(S){return S===d?(t.consume(S),d=null,ee):S===null||te(S)?n(S):(t.consume(S),U)}function Q(S){return S===null||S===34||S===39||S===47||S===60||S===61||S===62||S===96||it(S)?F(S):(t.consume(S),Q)}function ee(S){return S===47||S===62||ge(S)?z(S):n(S)}function he(S){return S===62?(t.consume(S),j):n(S)}function j(S){return S===null||te(S)?V(S):ge(S)?(t.consume(S),j):n(S)}function V(S){return S===45&&a===2?(t.consume(S),Ne):S===60&&a===1?(t.consume(S),Se):S===62&&a===4?(t.consume(S),Ae):S===63&&a===3?(t.consume(S),_):S===93&&a===5?(t.consume(S),Pt):te(S)&&(a===6||a===7)?(t.exit("htmlFlowData"),t.check(bb,Mt,me)(S)):S===null||te(S)?(t.exit("htmlFlowData"),me(S)):(t.consume(S),V)}function me(S){return t.check(vb,Ee,Mt)(S)}function Ee(S){return t.enter("lineEnding"),t.consume(S),t.exit("lineEnding"),ce}function ce(S){return S===null||te(S)?me(S):(t.enter("htmlFlowData"),V(S))}function Ne(S){return S===45?(t.consume(S),_):V(S)}function Se(S){return S===47?(t.consume(S),u="",Re):V(S)}function Re(S){if(S===62){const at=u.toLowerCase();return Ul.includes(at)?(t.consume(S),Ae):V(S)}return Vt(S)&&u.length<8?(t.consume(S),u+=String.fromCharCode(S),Re):V(S)}function Pt(S){return S===93?(t.consume(S),_):V(S)}function _(S){return S===62?(t.consume(S),Ae):S===45&&a===2?(t.consume(S),_):V(S)}function Ae(S){return S===null||te(S)?(t.exit("htmlFlowData"),Mt(S)):(t.consume(S),Ae)}function Mt(S){return t.exit("htmlFlow"),r(S)}}function kb(t,r,n){const o=this;return a;function a(u){return te(u)?(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),l):n(u)}function l(u){return o.parser.lazy[o.now().line]?n(u):r(u)}}function Sb(t,r,n){return o;function o(a){return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),t.attempt($i,r,n)}}const Cb={name:"htmlText",tokenize:Ib};function Ib(t,r,n){const o=this;let a,l,u;return c;function c(_){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(_),d}function d(_){return _===33?(t.consume(_),f):_===47?(t.consume(_),F):_===63?(t.consume(_),z):Vt(_)?(t.consume(_),Q):n(_)}function f(_){return _===45?(t.consume(_),p):_===91?(t.consume(_),l=0,T):Vt(_)?(t.consume(_),G):n(_)}function p(_){return _===45?(t.consume(_),y):n(_)}function g(_){return _===null?n(_):_===45?(t.consume(_),b):te(_)?(u=g,Se(_)):(t.consume(_),g)}function b(_){return _===45?(t.consume(_),y):g(_)}function y(_){return _===62?Ne(_):_===45?b(_):g(_)}function T(_){const Ae="CDATA[";return _===Ae.charCodeAt(l++)?(t.consume(_),l===Ae.length?M:T):n(_)}function M(_){return _===null?n(_):_===93?(t.consume(_),B):te(_)?(u=M,Se(_)):(t.consume(_),M)}function B(_){return _===93?(t.consume(_),D):M(_)}function D(_){return _===62?Ne(_):_===93?(t.consume(_),D):M(_)}function G(_){return _===null||_===62?Ne(_):te(_)?(u=G,Se(_)):(t.consume(_),G)}function z(_){return _===null?n(_):_===63?(t.consume(_),W):te(_)?(u=z,Se(_)):(t.consume(_),z)}function W(_){return _===62?Ne(_):z(_)}function F(_){return Vt(_)?(t.consume(_),E):n(_)}function E(_){return _===45||Wt(_)?(t.consume(_),E):U(_)}function U(_){return te(_)?(u=U,Se(_)):ge(_)?(t.consume(_),U):Ne(_)}function Q(_){return _===45||Wt(_)?(t.consume(_),Q):_===47||_===62||it(_)?ee(_):n(_)}function ee(_){return _===47?(t.consume(_),Ne):_===58||_===95||Vt(_)?(t.consume(_),he):te(_)?(u=ee,Se(_)):ge(_)?(t.consume(_),ee):Ne(_)}function he(_){return _===45||_===46||_===58||_===95||Wt(_)?(t.consume(_),he):j(_)}function j(_){return _===61?(t.consume(_),V):te(_)?(u=j,Se(_)):ge(_)?(t.consume(_),j):ee(_)}function V(_){return _===null||_===60||_===61||_===62||_===96?n(_):_===34||_===39?(t.consume(_),a=_,me):te(_)?(u=V,Se(_)):ge(_)?(t.consume(_),V):(t.consume(_),Ee)}function me(_){return _===a?(t.consume(_),a=void 0,ce):_===null?n(_):te(_)?(u=me,Se(_)):(t.consume(_),me)}function Ee(_){return _===null||_===34||_===39||_===60||_===61||_===96?n(_):_===47||_===62||it(_)?ee(_):(t.consume(_),Ee)}function ce(_){return _===47||_===62||it(_)?ee(_):n(_)}function Ne(_){return _===62?(t.consume(_),t.exit("htmlTextData"),t.exit("htmlText"),r):n(_)}function Se(_){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(_),t.exit("lineEnding"),Re}function Re(_){return ge(_)?ke(t,Pt,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_):Pt(_)}function Pt(_){return t.enter("htmlTextData"),u(_)}}const Wa={name:"labelEnd",resolveAll:Pb,resolveTo:Mb,tokenize:Ob},Eb={tokenize:Fb},Tb={tokenize:Rb},Ab={tokenize:Lb};function Pb(t){let r=-1;const n=[];for(;++r<t.length;){const o=t[r][1];if(n.push(t[r]),o.type==="labelImage"||o.type==="labelLink"||o.type==="labelEnd"){const a=o.type==="labelImage"?4:2;o.type="data",r+=a}}return t.length!==n.length&&Qt(t,0,t.length,n),t}function Mb(t,r){let n=t.length,o=0,a,l,u,c;for(;n--;)if(a=t[n][1],l){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;t[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(u){if(t[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(l=n,a.type!=="labelLink")){o=2;break}}else a.type==="labelEnd"&&(u=n);const d={type:t[l][1].type==="labelLink"?"link":"image",start:{...t[l][1].start},end:{...t[t.length-1][1].end}},f={type:"label",start:{...t[l][1].start},end:{...t[u][1].end}},p={type:"labelText",start:{...t[l+o+2][1].end},end:{...t[u-2][1].start}};return c=[["enter",d,r],["enter",f,r]],c=Tt(c,t.slice(l+1,l+o+3)),c=Tt(c,[["enter",p,r]]),c=Tt(c,$a(r.parser.constructs.insideSpan.null,t.slice(l+o+4,u-3),r)),c=Tt(c,[["exit",p,r],t[u-2],t[u-1],["exit",f,r]]),c=Tt(c,t.slice(u+1)),c=Tt(c,[["exit",d,r]]),Qt(t,l,t.length,c),t}function Ob(t,r,n){const o=this;let a=o.events.length,l,u;for(;a--;)if((o.events[a][1].type==="labelImage"||o.events[a][1].type==="labelLink")&&!o.events[a][1]._balanced){l=o.events[a][1];break}return c;function c(b){return l?l._inactive?g(b):(u=o.parser.defined.includes(sr(o.sliceSerialize({start:l.end,end:o.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(b),t.exit("labelMarker"),t.exit("labelEnd"),d):n(b)}function d(b){return b===40?t.attempt(Eb,p,u?p:g)(b):b===91?t.attempt(Tb,p,u?f:g)(b):u?p(b):g(b)}function f(b){return t.attempt(Ab,p,g)(b)}function p(b){return r(b)}function g(b){return l._balanced=!0,n(b)}}function Fb(t,r,n){return o;function o(g){return t.enter("resource"),t.enter("resourceMarker"),t.consume(g),t.exit("resourceMarker"),a}function a(g){return it(g)?Ar(t,l)(g):l(g)}function l(g){return g===41?p(g):Ec(t,u,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function u(g){return it(g)?Ar(t,d)(g):p(g)}function c(g){return n(g)}function d(g){return g===34||g===39||g===40?Ac(t,f,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):p(g)}function f(g){return it(g)?Ar(t,p)(g):p(g)}function p(g){return g===41?(t.enter("resourceMarker"),t.consume(g),t.exit("resourceMarker"),t.exit("resource"),r):n(g)}}function Rb(t,r,n){const o=this;return a;function a(c){return Tc.call(o,t,l,u,"reference","referenceMarker","referenceString")(c)}function l(c){return o.parser.defined.includes(sr(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)))?r(c):n(c)}function u(c){return n(c)}}function Lb(t,r,n){return o;function o(l){return t.enter("reference"),t.enter("referenceMarker"),t.consume(l),t.exit("referenceMarker"),a}function a(l){return l===93?(t.enter("referenceMarker"),t.consume(l),t.exit("referenceMarker"),t.exit("reference"),r):n(l)}}const Db={name:"labelStartImage",resolveAll:Wa.resolveAll,tokenize:Nb};function Nb(t,r,n){const o=this;return a;function a(c){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(c),t.exit("labelImageMarker"),l}function l(c){return c===91?(t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelImage"),u):n(c)}function u(c){return c===94&&"_hiddenFootnoteSupport"in o.parser.constructs?n(c):r(c)}}const Bb={name:"labelStartLink",resolveAll:Wa.resolveAll,tokenize:$b};function $b(t,r,n){const o=this;return a;function a(u){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(u),t.exit("labelMarker"),t.exit("labelLink"),l}function l(u){return u===94&&"_hiddenFootnoteSupport"in o.parser.constructs?n(u):r(u)}}const da={name:"lineEnding",tokenize:Wb};function Wb(t,r){return n;function n(o){return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),ke(t,r,"linePrefix")}}const Pi={name:"thematicBreak",tokenize:zb};function zb(t,r,n){let o=0,a;return l;function l(f){return t.enter("thematicBreak"),u(f)}function u(f){return a=f,c(f)}function c(f){return f===a?(t.enter("thematicBreakSequence"),d(f)):o>=3&&(f===null||te(f))?(t.exit("thematicBreak"),r(f)):n(f)}function d(f){return f===a?(t.consume(f),o++,d):(t.exit("thematicBreakSequence"),ge(f)?ke(t,c,"whitespace")(f):c(f))}}const nt={continuation:{tokenize:Yb},exit:Vb,name:"list",tokenize:Ub},qb={partial:!0,tokenize:Qb},Hb={partial:!0,tokenize:Gb};function Ub(t,r,n){const o=this,a=o.events[o.events.length-1];let l=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,u=0;return c;function c(y){const T=o.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(T==="listUnordered"?!o.containerState.marker||y===o.containerState.marker:Aa(y)){if(o.containerState.type||(o.containerState.type=T,t.enter(T,{_container:!0})),T==="listUnordered")return t.enter("listItemPrefix"),y===42||y===45?t.check(Pi,n,f)(y):f(y);if(!o.interrupt||y===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),d(y)}return n(y)}function d(y){return Aa(y)&&++u<10?(t.consume(y),d):(!o.interrupt||u<2)&&(o.containerState.marker?y===o.containerState.marker:y===41||y===46)?(t.exit("listItemValue"),f(y)):n(y)}function f(y){return t.enter("listItemMarker"),t.consume(y),t.exit("listItemMarker"),o.containerState.marker=o.containerState.marker||y,t.check($i,o.interrupt?n:p,t.attempt(qb,b,g))}function p(y){return o.containerState.initialBlankLine=!0,l++,b(y)}function g(y){return ge(y)?(t.enter("listItemPrefixWhitespace"),t.consume(y),t.exit("listItemPrefixWhitespace"),b):n(y)}function b(y){return o.containerState.size=l+o.sliceSerialize(t.exit("listItemPrefix"),!0).length,r(y)}}function Yb(t,r,n){const o=this;return o.containerState._closeFlow=void 0,t.check($i,a,l);function a(c){return o.containerState.furtherBlankLines=o.containerState.furtherBlankLines||o.containerState.initialBlankLine,ke(t,r,"listItemIndent",o.containerState.size+1)(c)}function l(c){return o.containerState.furtherBlankLines||!ge(c)?(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,u(c)):(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,t.attempt(Hb,r,u)(c))}function u(c){return o.containerState._closeFlow=!0,o.interrupt=void 0,ke(t,t.attempt(nt,r,n),"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function Gb(t,r,n){const o=this;return ke(t,a,"listItemIndent",o.containerState.size+1);function a(l){const u=o.events[o.events.length-1];return u&&u[1].type==="listItemIndent"&&u[2].sliceSerialize(u[1],!0).length===o.containerState.size?r(l):n(l)}}function Vb(t){t.exit(this.containerState.type)}function Qb(t,r,n){const o=this;return ke(t,a,"listItemPrefixWhitespace",o.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(l){const u=o.events[o.events.length-1];return!ge(l)&&u&&u[1].type==="listItemPrefixWhitespace"?r(l):n(l)}}const Yl={name:"setextUnderline",resolveTo:jb,tokenize:Kb};function jb(t,r){let n=t.length,o,a,l;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){o=n;break}t[n][1].type==="paragraph"&&(a=n)}else t[n][1].type==="content"&&t.splice(n,1),!l&&t[n][1].type==="definition"&&(l=n);const u={type:"setextHeading",start:{...t[o][1].start},end:{...t[t.length-1][1].end}};return t[a][1].type="setextHeadingText",l?(t.splice(a,0,["enter",u,r]),t.splice(l+1,0,["exit",t[o][1],r]),t[o][1].end={...t[l][1].end}):t[o][1]=u,t.push(["exit",u,r]),t}function Kb(t,r,n){const o=this;let a;return l;function l(f){let p=o.events.length,g;for(;p--;)if(o.events[p][1].type!=="lineEnding"&&o.events[p][1].type!=="linePrefix"&&o.events[p][1].type!=="content"){g=o.events[p][1].type==="paragraph";break}return!o.parser.lazy[o.now().line]&&(o.interrupt||g)?(t.enter("setextHeadingLine"),a=f,u(f)):n(f)}function u(f){return t.enter("setextHeadingLineSequence"),c(f)}function c(f){return f===a?(t.consume(f),c):(t.exit("setextHeadingLineSequence"),ge(f)?ke(t,d,"lineSuffix")(f):d(f))}function d(f){return f===null||te(f)?(t.exit("setextHeadingLine"),r(f)):n(f)}}const Xb={tokenize:Jb};function Jb(t){const r=this,n=t.attempt($i,o,t.attempt(this.parser.constructs.flowInitial,a,ke(t,t.attempt(this.parser.constructs.flow,a,t.attempt(rb,a)),"linePrefix")));return n;function o(l){if(l===null){t.consume(l);return}return t.enter("lineEndingBlank"),t.consume(l),t.exit("lineEndingBlank"),r.currentConstruct=void 0,n}function a(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),r.currentConstruct=void 0,n}}const Zb={resolveAll:Mc()},ev=Pc("string"),tv=Pc("text");function Pc(t){return{resolveAll:Mc(t==="text"?nv:void 0),tokenize:r};function r(n){const o=this,a=this.parser.constructs[t],l=n.attempt(a,u,c);return u;function u(p){return f(p)?l(p):c(p)}function c(p){if(p===null){n.consume(p);return}return n.enter("data"),n.consume(p),d}function d(p){return f(p)?(n.exit("data"),l(p)):(n.consume(p),d)}function f(p){if(p===null)return!0;const g=a[p];let b=-1;if(g)for(;++b<g.length;){const y=g[b];if(!y.previous||y.previous.call(o,o.previous))return!0}return!1}}}function Mc(t){return r;function r(n,o){let a=-1,l;for(;++a<=n.length;)l===void 0?n[a]&&n[a][1].type==="data"&&(l=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==l+2&&(n[l][1].end=n[a-1][1].end,n.splice(l+2,a-l-2),a=l+2),l=void 0);return t?t(n,o):n}}function nv(t,r){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const o=t[n-1][1],a=r.sliceStream(o);let l=a.length,u=-1,c=0,d;for(;l--;){const f=a[l];if(typeof f=="string"){for(u=f.length;f.charCodeAt(u-1)===32;)c++,u--;if(u)break;u=-1}else if(f===-2)d=!0,c++;else if(f!==-1){l++;break}}if(r._contentTypeTextTrailing&&n===t.length&&(c=0),c){const f={type:n===t.length||d||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:l?u:o.start._bufferIndex+u,_index:o.start._index+l,line:o.end.line,column:o.end.column-c,offset:o.end.offset-c},end:{...o.end}};o.end={...f.start},o.start.offset===o.end.offset?Object.assign(o,f):(t.splice(n,0,["enter",f,r],["exit",f,r]),n+=2)}n++}return t}const rv={42:nt,43:nt,45:nt,48:nt,49:nt,50:nt,51:nt,52:nt,53:nt,54:nt,55:nt,56:nt,57:nt,62:kc},iv={91:ub},ov={[-2]:ha,[-1]:ha,32:ha},av={35:pb,42:Pi,45:[Yl,Pi],60:wb,61:Yl,95:Pi,96:Hl,126:Hl},sv={38:Cc,92:Sc},uv={[-5]:da,[-4]:da,[-3]:da,33:Db,38:Cc,42:Pa,60:[Bw,Cb],91:Bb,92:[hb,Sc],93:Wa,95:Pa,96:Xw},lv={null:[Pa,Zb]},cv={null:[42,95]},fv={null:[]},hv=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:cv,contentInitial:iv,disable:fv,document:rv,flow:av,flowInitial:ov,insideSpan:lv,string:sv,text:uv},Symbol.toStringTag,{value:"Module"}));function dv(t,r,n){let o={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const a={},l=[];let u=[],c=[];const d={attempt:U(F),check:U(E),consume:G,enter:z,exit:W,interrupt:U(E,{interrupt:!0})},f={code:null,containerState:{},defineSkip:M,events:[],now:T,parser:t,previous:null,sliceSerialize:b,sliceStream:y,write:g};let p=r.tokenize.call(f,d);return r.resolveAll&&l.push(r),f;function g(j){return u=Tt(u,j),B(),u[u.length-1]!==null?[]:(Q(r,0),f.events=$a(l,f.events,f),f.events)}function b(j,V){return gv(y(j),V)}function y(j){return pv(u,j)}function T(){const{_bufferIndex:j,_index:V,line:me,column:Ee,offset:ce}=o;return{_bufferIndex:j,_index:V,line:me,column:Ee,offset:ce}}function M(j){a[j.line]=j.column,he()}function B(){let j;for(;o._index<u.length;){const V=u[o._index];if(typeof V=="string")for(j=o._index,o._bufferIndex<0&&(o._bufferIndex=0);o._index===j&&o._bufferIndex<V.length;)D(V.charCodeAt(o._bufferIndex));else D(V)}}function D(j){p=p(j)}function G(j){te(j)?(o.line++,o.column=1,o.offset+=j===-3?2:1,he()):j!==-1&&(o.column++,o.offset++),o._bufferIndex<0?o._index++:(o._bufferIndex++,o._bufferIndex===u[o._index].length&&(o._bufferIndex=-1,o._index++)),f.previous=j}function z(j,V){const me=V||{};return me.type=j,me.start=T(),f.events.push(["enter",me,f]),c.push(me),me}function W(j){const V=c.pop();return V.end=T(),f.events.push(["exit",V,f]),V}function F(j,V){Q(j,V.from)}function E(j,V){V.restore()}function U(j,V){return me;function me(Ee,ce,Ne){let Se,Re,Pt,_;return Array.isArray(Ee)?Mt(Ee):"tokenize"in Ee?Mt([Ee]):Ae(Ee);function Ae(Pe){return En;function En(Xe){const yt=Xe!==null&&Pe[Xe],fn=Xe!==null&&Pe.null,Xt=[...Array.isArray(yt)?yt:yt?[yt]:[],...Array.isArray(fn)?fn:fn?[fn]:[]];return Mt(Xt)(Xe)}}function Mt(Pe){return Se=Pe,Re=0,Pe.length===0?Ne:S(Pe[Re])}function S(Pe){return En;function En(Xe){return _=ee(),Pt=Pe,Pe.partial||(f.currentConstruct=Pe),Pe.name&&f.parser.constructs.disable.null.includes(Pe.name)?Ke():Pe.tokenize.call(V?Object.assign(Object.create(f),V):f,d,at,Ke)(Xe)}}function at(Pe){return j(Pt,_),ce}function Ke(Pe){return _.restore(),++Re<Se.length?S(Se[Re]):Ne}}}function Q(j,V){j.resolveAll&&!l.includes(j)&&l.push(j),j.resolve&&Qt(f.events,V,f.events.length-V,j.resolve(f.events.slice(V),f)),j.resolveTo&&(f.events=j.resolveTo(f.events,f))}function ee(){const j=T(),V=f.previous,me=f.currentConstruct,Ee=f.events.length,ce=Array.from(c);return{from:Ee,restore:Ne};function Ne(){o=j,f.previous=V,f.currentConstruct=me,f.events.length=Ee,c=ce,he()}}function he(){o.line in a&&o.column<2&&(o.column=a[o.line],o.offset+=a[o.line]-1)}}function pv(t,r){const n=r.start._index,o=r.start._bufferIndex,a=r.end._index,l=r.end._bufferIndex;let u;if(n===a)u=[t[n].slice(o,l)];else{if(u=t.slice(n,a),o>-1){const c=u[0];typeof c=="string"?u[0]=c.slice(o):u.shift()}l>0&&u.push(t[a].slice(0,l))}return u}function gv(t,r){let n=-1;const o=[];let a;for(;++n<t.length;){const l=t[n];let u;if(typeof l=="string")u=l;else switch(l){case-5:{u="\r";break}case-4:{u=`
`;break}case-3:{u=`\r
`;break}case-2:{u=r?" ":"	";break}case-1:{if(!r&&a)continue;u=" ";break}default:u=String.fromCharCode(l)}a=l===-2,o.push(u)}return o.join("")}function mv(t){const o={constructs:kw([hv,...(t||{}).extensions||[]]),content:a(Mw),defined:[],document:a(Fw),flow:a(Xb),lazy:{},string:a(ev),text:a(tv)};return o;function a(l){return u;function u(c){return dv(o,l,c)}}}function yv(t){for(;!Ic(t););return t}const Gl=/[\0\t\n\r]/g;function wv(){let t=1,r="",n=!0,o;return a;function a(l,u,c){const d=[];let f,p,g,b,y;for(l=r+(typeof l=="string"?l.toString():new TextDecoder(u||void 0).decode(l)),g=0,r="",n&&(l.charCodeAt(0)===65279&&g++,n=void 0);g<l.length;){if(Gl.lastIndex=g,f=Gl.exec(l),b=f&&f.index!==void 0?f.index:l.length,y=l.charCodeAt(b),!f){r=l.slice(g);break}if(y===10&&g===b&&o)d.push(-3),o=void 0;else switch(o&&(d.push(-5),o=void 0),g<b&&(d.push(l.slice(g,b)),t+=b-g),y){case 0:{d.push(65533),t++;break}case 9:{for(p=Math.ceil(t/4)*4,d.push(-2);t++<p;)d.push(-1);break}case 10:{d.push(-4),t=1;break}default:o=!0,t=1}g=b+1}return c&&(o&&d.push(-5),r&&d.push(r),d.push(null)),d}}const bv=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Oc(t){return t.replace(bv,vv)}function vv(t,r,n){if(r)return r;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),l=a===120||a===88;return _c(n.slice(l?2:1),l?16:10)}return Ba(n)||t}const Fc={}.hasOwnProperty;function xv(t,r,n){return typeof r!="string"&&(n=r,r=void 0),_v(n)(yv(mv(n).document().write(wv()(t,r,!0))))}function _v(t){const r={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:l(Nr),autolinkProtocol:ee,autolinkEmail:ee,atxHeading:l(hn),blockQuote:l(fn),characterEscape:ee,characterReference:ee,codeFenced:l(Xt),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:l(Xt,u),codeText:l(Un,u),codeTextData:ee,data:ee,codeFlowValue:ee,definition:l(Rr),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:l(st),hardBreakEscape:l(Lr),hardBreakTrailing:l(Lr),htmlFlow:l(wt,u),htmlFlowData:ee,htmlText:l(wt,u),htmlTextData:ee,image:l(Dr),label:u,link:l(Nr),listItem:l(ut),listItemValue:b,listOrdered:l(dn,g),listUnordered:l(dn),paragraph:l(Tn),reference:S,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:l(hn),strong:l(Yn),thematicBreak:l(An)},exit:{atxHeading:d(),atxHeadingSequence:F,autolink:d(),autolinkEmail:yt,autolinkProtocol:Xe,blockQuote:d(),characterEscapeValue:he,characterReferenceMarkerHexadecimal:Ke,characterReferenceMarkerNumeric:Ke,characterReferenceValue:Pe,characterReference:En,codeFenced:d(B),codeFencedFence:M,codeFencedFenceInfo:y,codeFencedFenceMeta:T,codeFlowValue:he,codeIndented:d(D),codeText:d(ce),codeTextData:he,data:he,definition:d(),definitionDestinationString:W,definitionLabelString:G,definitionTitleString:z,emphasis:d(),hardBreakEscape:d(V),hardBreakTrailing:d(V),htmlFlow:d(me),htmlFlowData:he,htmlText:d(Ee),htmlTextData:he,image:d(Se),label:Pt,labelText:Re,lineEnding:j,link:d(Ne),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:at,resourceDestinationString:_,resourceTitleString:Ae,resource:Mt,setextHeading:d(Q),setextHeadingLineSequence:U,setextHeadingText:E,strong:d(),thematicBreak:d()}};Rc(r,(t||{}).mdastExtensions||[]);const n={};return o;function o(O){let $={type:"root",children:[]};const X={stack:[$],tokenStack:[],config:r,enter:c,exit:f,buffer:u,resume:p,data:n},ae=[];let de=-1;for(;++de<O.length;)if(O[de][1].type==="listOrdered"||O[de][1].type==="listUnordered")if(O[de][0]==="enter")ae.push(de);else{const Ye=ae.pop();de=a(O,Ye,de)}for(de=-1;++de<O.length;){const Ye=r[O[de][0]];Fc.call(Ye,O[de][1].type)&&Ye[O[de][1].type].call(Object.assign({sliceSerialize:O[de][2].sliceSerialize},X),O[de][1])}if(X.tokenStack.length>0){const Ye=X.tokenStack[X.tokenStack.length-1];(Ye[1]||Vl).call(X,void 0,Ye[0])}for($.position={start:Sn(O.length>0?O[0][1].start:{line:1,column:1,offset:0}),end:Sn(O.length>0?O[O.length-2][1].end:{line:1,column:1,offset:0})},de=-1;++de<r.transforms.length;)$=r.transforms[de]($)||$;return $}function a(O,$,X){let ae=$-1,de=-1,Ye=!1,Ot,lt,Jt,Zt;for(;++ae<=X;){const $e=O[ae];switch($e[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{$e[0]==="enter"?de++:de--,Zt=void 0;break}case"lineEndingBlank":{$e[0]==="enter"&&(Ot&&!Zt&&!de&&!Jt&&(Jt=ae),Zt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Zt=void 0}if(!de&&$e[0]==="enter"&&$e[1].type==="listItemPrefix"||de===-1&&$e[0]==="exit"&&($e[1].type==="listUnordered"||$e[1].type==="listOrdered")){if(Ot){let zt=ae;for(lt=void 0;zt--;){const Ft=O[zt];if(Ft[1].type==="lineEnding"||Ft[1].type==="lineEndingBlank"){if(Ft[0]==="exit")continue;lt&&(O[lt][1].type="lineEndingBlank",Ye=!0),Ft[1].type="lineEnding",lt=zt}else if(!(Ft[1].type==="linePrefix"||Ft[1].type==="blockQuotePrefix"||Ft[1].type==="blockQuotePrefixWhitespace"||Ft[1].type==="blockQuoteMarker"||Ft[1].type==="listItemIndent"))break}Jt&&(!lt||Jt<lt)&&(Ot._spread=!0),Ot.end=Object.assign({},lt?O[lt][1].start:$e[1].end),O.splice(lt||ae,0,["exit",Ot,$e[2]]),ae++,X++}if($e[1].type==="listItemPrefix"){const zt={type:"listItem",_spread:!1,start:Object.assign({},$e[1].start),end:void 0};Ot=zt,O.splice(ae,0,["enter",zt,$e[2]]),ae++,X++,Jt=void 0,Zt=!0}}}return O[$][1]._spread=Ye,X}function l(O,$){return X;function X(ae){c.call(this,O(ae),ae),$&&$.call(this,ae)}}function u(){this.stack.push({type:"fragment",children:[]})}function c(O,$,X){this.stack[this.stack.length-1].children.push(O),this.stack.push(O),this.tokenStack.push([$,X||void 0]),O.position={start:Sn($.start),end:void 0}}function d(O){return $;function $(X){O&&O.call(this,X),f.call(this,X)}}function f(O,$){const X=this.stack.pop(),ae=this.tokenStack.pop();if(ae)ae[0].type!==O.type&&($?$.call(this,O,ae[0]):(ae[1]||Vl).call(this,O,ae[0]));else throw new Error("Cannot close `"+O.type+"` ("+Tr({start:O.start,end:O.end})+"): it’s not open");X.position.end=Sn(O.end)}function p(){return Na(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function b(O){if(this.data.expectingFirstListItemValue){const $=this.stack[this.stack.length-2];$.start=Number.parseInt(this.sliceSerialize(O),10),this.data.expectingFirstListItemValue=void 0}}function y(){const O=this.resume(),$=this.stack[this.stack.length-1];$.lang=O}function T(){const O=this.resume(),$=this.stack[this.stack.length-1];$.meta=O}function M(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function B(){const O=this.resume(),$=this.stack[this.stack.length-1];$.value=O.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function D(){const O=this.resume(),$=this.stack[this.stack.length-1];$.value=O.replace(/(\r?\n|\r)$/g,"")}function G(O){const $=this.resume(),X=this.stack[this.stack.length-1];X.label=$,X.identifier=sr(this.sliceSerialize(O)).toLowerCase()}function z(){const O=this.resume(),$=this.stack[this.stack.length-1];$.title=O}function W(){const O=this.resume(),$=this.stack[this.stack.length-1];$.url=O}function F(O){const $=this.stack[this.stack.length-1];if(!$.depth){const X=this.sliceSerialize(O).length;$.depth=X}}function E(){this.data.setextHeadingSlurpLineEnding=!0}function U(O){const $=this.stack[this.stack.length-1];$.depth=this.sliceSerialize(O).codePointAt(0)===61?1:2}function Q(){this.data.setextHeadingSlurpLineEnding=void 0}function ee(O){const X=this.stack[this.stack.length-1].children;let ae=X[X.length-1];(!ae||ae.type!=="text")&&(ae=zi(),ae.position={start:Sn(O.start),end:void 0},X.push(ae)),this.stack.push(ae)}function he(O){const $=this.stack.pop();$.value+=this.sliceSerialize(O),$.position.end=Sn(O.end)}function j(O){const $=this.stack[this.stack.length-1];if(this.data.atHardBreak){const X=$.children[$.children.length-1];X.position.end=Sn(O.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&r.canContainEols.includes($.type)&&(ee.call(this,O),he.call(this,O))}function V(){this.data.atHardBreak=!0}function me(){const O=this.resume(),$=this.stack[this.stack.length-1];$.value=O}function Ee(){const O=this.resume(),$=this.stack[this.stack.length-1];$.value=O}function ce(){const O=this.resume(),$=this.stack[this.stack.length-1];$.value=O}function Ne(){const O=this.stack[this.stack.length-1];if(this.data.inReference){const $=this.data.referenceType||"shortcut";O.type+="Reference",O.referenceType=$,delete O.url,delete O.title}else delete O.identifier,delete O.label;this.data.referenceType=void 0}function Se(){const O=this.stack[this.stack.length-1];if(this.data.inReference){const $=this.data.referenceType||"shortcut";O.type+="Reference",O.referenceType=$,delete O.url,delete O.title}else delete O.identifier,delete O.label;this.data.referenceType=void 0}function Re(O){const $=this.sliceSerialize(O),X=this.stack[this.stack.length-2];X.label=Oc($),X.identifier=sr($).toLowerCase()}function Pt(){const O=this.stack[this.stack.length-1],$=this.resume(),X=this.stack[this.stack.length-1];if(this.data.inReference=!0,X.type==="link"){const ae=O.children;X.children=ae}else X.alt=$}function _(){const O=this.resume(),$=this.stack[this.stack.length-1];$.url=O}function Ae(){const O=this.resume(),$=this.stack[this.stack.length-1];$.title=O}function Mt(){this.data.inReference=void 0}function S(){this.data.referenceType="collapsed"}function at(O){const $=this.resume(),X=this.stack[this.stack.length-1];X.label=$,X.identifier=sr(this.sliceSerialize(O)).toLowerCase(),this.data.referenceType="full"}function Ke(O){this.data.characterReferenceType=O.type}function Pe(O){const $=this.sliceSerialize(O),X=this.data.characterReferenceType;let ae;X?(ae=_c($,X==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ae=Ba($);const de=this.stack[this.stack.length-1];de.value+=ae}function En(O){const $=this.stack.pop();$.position.end=Sn(O.end)}function Xe(O){he.call(this,O);const $=this.stack[this.stack.length-1];$.url=this.sliceSerialize(O)}function yt(O){he.call(this,O);const $=this.stack[this.stack.length-1];$.url="mailto:"+this.sliceSerialize(O)}function fn(){return{type:"blockquote",children:[]}}function Xt(){return{type:"code",lang:null,meta:null,value:""}}function Un(){return{type:"inlineCode",value:""}}function Rr(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function st(){return{type:"emphasis",children:[]}}function hn(){return{type:"heading",depth:0,children:[]}}function Lr(){return{type:"break"}}function wt(){return{type:"html",value:""}}function Dr(){return{type:"image",title:null,url:"",alt:null}}function Nr(){return{type:"link",title:null,url:"",children:[]}}function dn(O){return{type:"list",ordered:O.type==="listOrdered",start:null,spread:O._spread,children:[]}}function ut(O){return{type:"listItem",spread:O._spread,checked:null,children:[]}}function Tn(){return{type:"paragraph",children:[]}}function Yn(){return{type:"strong",children:[]}}function zi(){return{type:"text",value:""}}function An(){return{type:"thematicBreak"}}}function Sn(t){return{line:t.line,column:t.column,offset:t.offset}}function Rc(t,r){let n=-1;for(;++n<r.length;){const o=r[n];Array.isArray(o)?Rc(t,o):kv(t,o)}}function kv(t,r){let n;for(n in r)if(Fc.call(r,n))switch(n){case"canContainEols":{const o=r[n];o&&t[n].push(...o);break}case"transforms":{const o=r[n];o&&t[n].push(...o);break}case"enter":case"exit":{const o=r[n];o&&Object.assign(t[n],o);break}}}function Vl(t,r){throw t?new Error("Cannot close `"+t.type+"` ("+Tr({start:t.start,end:t.end})+"): a different token (`"+r.type+"`, "+Tr({start:r.start,end:r.end})+") is open"):new Error("Cannot close document, a token (`"+r.type+"`, "+Tr({start:r.start,end:r.end})+") is still open")}function Lc(t){const r=this;r.parser=n;function n(o){return xv(o,{...r.data("settings"),...t,extensions:r.data("micromarkExtensions")||[],mdastExtensions:r.data("fromMarkdownExtensions")||[]})}}const za=(function(t){if(t==null)return Ev;if(typeof t=="function")return Wi(t);if(typeof t=="object")return Array.isArray(t)?Sv(t):Cv(t);if(typeof t=="string")return Iv(t);throw new Error("Expected function, string, or object as test")});function Sv(t){const r=[];let n=-1;for(;++n<t.length;)r[n]=za(t[n]);return Wi(o);function o(...a){let l=-1;for(;++l<r.length;)if(r[l].apply(this,a))return!0;return!1}}function Cv(t){const r=t;return Wi(n);function n(o){const a=o;let l;for(l in t)if(a[l]!==r[l])return!1;return!0}}function Iv(t){return Wi(r);function r(n){return n&&n.type===t}}function Wi(t){return r;function r(n,o,a){return!!(Tv(n)&&t.call(this,n,typeof o=="number"?o:void 0,a||void 0))}}function Ev(){return!0}function Tv(t){return t!==null&&typeof t=="object"&&"type"in t}const Dc=[],Av=!0,Ma=!1,Pv="skip";function Mv(t,r,n,o){let a;typeof r=="function"&&typeof n!="function"?(o=n,n=r):a=r;const l=za(a),u=o?-1:1;c(t,void 0,[])();function c(d,f,p){const g=d&&typeof d=="object"?d:{};if(typeof g.type=="string"){const y=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(b,"name",{value:"node ("+(d.type+(y?"<"+y+">":""))+")"})}return b;function b(){let y=Dc,T,M,B;if((!r||l(d,f,p[p.length-1]||void 0))&&(y=Ov(n(d,p)),y[0]===Ma))return y;if("children"in d&&d.children){const D=d;if(D.children&&y[0]!==Pv)for(M=(o?D.children.length:-1)+u,B=p.concat(D);M>-1&&M<D.children.length;){const G=D.children[M];if(T=c(G,M,B)(),T[0]===Ma)return T;M=typeof T[1]=="number"?T[1]:M+u}}return y}}}function Ov(t){return Array.isArray(t)?t:typeof t=="number"?[Av,t]:t==null?Dc:[t]}function Nc(t,r,n,o){let a,l,u;typeof r=="function"&&typeof n!="function"?(l=void 0,u=r,a=n):(l=r,u=n,a=o),Mv(t,l,c,a);function c(d,f){const p=f[f.length-1],g=p?p.children.indexOf(d):void 0;return u(d,g,p)}}const Hn={component:"mdc-component",input:"mdc-input",hiddenValue:"mdc-hidden-value"};class Fv{constructor(){this.logger=jt(Kt.TagsService),this.component={start:r=>{const n={componentName:r};return this.logger.dev("Component start",n),`<span class="${Hn.component} start" data-meta='${JSON.stringify(n)}' style="display:none"></span>`},end:r=>{const n={componentName:r};return this.logger.dev("Component end",n),`<span class="${Hn.component} end" data-meta='${JSON.stringify(n)}' style="display:none"></span>`},wrap:(r,n,o=!0)=>{const a=o?`
${n}
`:n;return this.logger.dev("Component wrap",{componentName:r,content:n}),this.component.start(r)+a+this.component.end(r)}},this.input={start:(r,n,o)=>{const a={componentName:r,inputName:n,inputType:o};return this.logger.dev("Input start",a),`<span class="${Hn.input}" data-meta='${JSON.stringify(a)}' style="display:none"></span>`},end:(r,n,o)=>{const a={componentName:r,inputName:n,inputType:o};return this.logger.dev("Input end",a),`<span class="${Hn.input} end" data-meta='${JSON.stringify(a)}' style="display:none"></span>`},wrap:r=>{const{componentName:n,inputName:o,inputType:a,content:l,withNewLines:u=!0}=r,c=u?`
${l}
`:l;return this.logger.dev("Input wrap",{componentName:n,inputName:o,content:l}),this.input.start(n,o,a)+c+this.input.end(n,o,a)}},this.hiddenValue=(r,n,o)=>{const a={componentName:r,inputName:n,value:o};return this.logger.dev("Hidden value set",a),`<span class="${Hn.hiddenValue}" data-meta='${JSON.stringify(a)}' style="display:none"></span>`}}}const Oa=new Fv,pa=jt(Kt.ValueExtractor);class Rv{extract(r){const n=Ea().use(Lc).parse(r),o=[],a=[],l={};Nc(n,u=>{if(u.type==="html"&&u.position){const c=u.value,d=u.position.start.offset;if(c.includes(Hn.input)){const f=this.getMeta(c);if(f){const p=this.key(f);c.includes('end"')?l[p]?l[p].endPos=u.position.start.offset:l[p]={meta:f,startPos:-1,endPos:u.position.start.offset,hiddenValues:[]}:l[p]?l[p].startPos=u.position.end.offset:l[p]={meta:f,startPos:u.position.end.offset,endPos:-1,hiddenValues:[]}}}else if(c.includes(Hn.hiddenValue)){const f=this.getMeta(c);if(f&&f.value){const p=this.key(f);l[p]||(l[p]={meta:f,startPos:-1,endPos:-1,hiddenValues:[]}),l[p].hiddenValues.push({value:f.value,pos:d})}}}});for(const u in l){const{meta:c,startPos:d,endPos:f,hiddenValues:p}=l[u];if(d===-1||f===-1){pa.warn(`Input ${u} missing start or end tag, skipping`);continue}const b=r.substring(d,f).trim().replace(/<span[^>]*>.*?<\/span>/gs,"").trim(),y=p.filter(M=>M.pos>=d&&M.pos<f).map(M=>M.value),T=this.extractValue(c.inputType,b,y,c);T.errors.length>0&&a.push(...T.errors),o.push({componentName:c.componentName,inputName:c.inputName,inputType:c.inputType,value:T.value,errors:T.errors})}return pa.dev("Extracted values",o),a.length>0&&pa.error("Extraction errors:",a),o}getMeta(r){const n=r.match(/data-meta=(?:'([^']+)'|"([^"]+)")/);if(!n)return null;try{return JSON.parse(n[1]||n[2])}catch{return null}}key(r){return`${r.componentName}::${r.inputName}`}extractValue(r,n,o,a){const l=[];let u=null;switch(r){case"boolean":{n.includes("[x]")||n.includes("[X]")?u=!0:n.includes("[ ]")?u=!1:(l.push("Boolean input must be a markdown checkbox"),u=null);break}case"text":{const c=n.replace(/^>\s?/gm,"").replace(/<[^>]+>/g,"").trim();a.required&&!c&&l.push("Text input is required"),a.placeholder&&c===a.placeholder?u=null:u=c;break}case"richText":{const c=n.replace(/<[^>]+>/g,"").trim();a.required&&!c&&l.push("Rich text input is required"),a.placeholder&&c===a.placeholder?u=null:u=c;break}case"multicheckbox":{const c=[],d=n.split(`
`);let f=0;d.forEach(p=>{p.match(/\[(x|X)\]/)&&f<o.length&&c.push(o[f]),p.match(/\[[ xX]\]/)&&f++}),a.required&&c.length===0&&l.push("At least one option must be selected"),a.singleChoice?(c.length>1&&l.push(`Multiple checked values for singleChoice input: ${a.componentName}::${a.inputName} [${c.join(", ")}]`),u=c[0]??null):u=c;break}case"number":{const c=n.match(new RegExp("(?<!\\d)(\\d+(?:[.,]\\d+)?)"));c?(u=parseFloat(c[1].replace(",",".")),a.required&&(u==null||isNaN(u))&&l.push("Number input is required"),typeof u=="number"&&a.min!==void 0&&u<a.min&&l.push(`Number must be >= ${a.min}`),typeof u=="number"&&a.max!==void 0&&u>a.max&&l.push(`Number must be <= ${a.max}`)):(a.required&&l.push("Number input is required"),u=null);break}default:u=n}return{value:u,errors:l}}}const Lv=new Rv,Yt=jt(Kt.InputCollector);class Dv{constructor(r){this.getConfig=r}async collectFromYesterday(){Yt.dev("Starting collection of inputs from yesterday’s reports");const r={};this.getConfig();for(const[n,{folder:o,name:a}]of Object.entries(vc))try{const l=`${Mr.baseOutput}/${o}`;Yt.dev(`Checking folder "${l}" for report: ${n}`);const u=await Mr._listFiles(l);if(!u.length){Yt.warn(`No files found in "${l}" for report: ${n}`);continue}const c=u.sort().reverse()[0];if(!c.includes(n)){Yt.warn(`Newest file "${c}" in folder "${l}" does not match report type: ${n}`);continue}const d=`${l}/${c}`,f=xe.vault.getAbstractFileByPath(d);if(!f||!("vault"in xe)){Yt.error(`Could not load file for report ${n}`,{filePath:d});continue}const p=c.match(/^(\d{8})-(\d{5})-/);let g="",b="";p&&(g=`${p[1].slice(0,4)}-${p[1].slice(4,6)}-${p[1].slice(6,8)}`,b=p[2]),Yt.dev(`Reading file: "${d}"`);const y=await xe.vault.read(f),M=Lv.extract(y).map(B=>({componentName:B.componentName,inputName:B.inputName,type:B.inputType??"unknown",value:B.value,errors:B.errors&&B.errors.length>0?B.errors:void 0,reportType:n,reportDate:g,reportNumber:b}));r[n]=M,Yt.dev(`Parsed ${M.length} inputs for report: ${n}`)}catch(l){Yt.error(`Failed collecting inputs for ${n}`,{error:l})}return Yt.info(`InputCollector finished. Collected reports: ${Object.keys(r).length}`),Yt.dev("Collected inputs summary:",{collectedByReport:r}),r}}const Nv=new Dv(()=>je);function Bv(t,r){if(t===void 0)throw new Error("lowdb: missing adapter");if(r===void 0)throw new Error("lowdb: missing default data")}class $v{adapter;data;constructor(r,n){Bv(r,n),this.adapter=r,this.data=n}async read(){const r=await this.adapter.read();r&&(this.data=r)}async write(){this.data&&await this.adapter.write(this.data)}async update(r){r(this.data),await this.write()}}const rt=jt(Kt.DbService);class Wv{constructor(r){this.dbPath=r}async read(){try{const r=xe.vault.getAbstractFileByPath(this.dbPath);if(r&&"extension"in r){const n=await xe.vault.read(r);return JSON.parse(n)}return null}catch(r){return rt.error("Error reading database",{error:r}),null}}async write(r){try{const n=JSON.stringify(r,null,2),o=xe.vault.getAbstractFileByPath(this.dbPath);o&&"extension"in o?(await xe.vault.modify(o,n),rt.dev(`Database saved to ${this.dbPath}`)):(await xe.vault.create(this.dbPath,n),rt.info(`Database created at ${this.dbPath}`))}catch(n){rt.error("Error writing database",{error:n})}}}class zv{constructor(){this.db=null}getDbPath(){return`${je.projectDir}/${je.coreDir}/powerjournal-db.json`}async ensureCoreDir(){const r=`${je.projectDir}/${je.coreDir}`;xe.vault.getAbstractFileByPath(r)||(rt.dev(`Creating core directory: ${r}`),await xe.vault.createFolder(r))}async ensureDb(){if(!this.db){await this.ensureCoreDir();const r=this.getDbPath(),n=new Wv(r);this.db=new $v(n,{reports:{}}),rt.dev(`Database adapter initialized for ${r}`)}return this.db}async init(){const r=await this.ensureDb();await r.read(),r.data||={reports:{}},rt.dev("Database initialized")}async saveReportInputs(r,n){await this.init();const o=await this.ensureDb();o.data.reports[r]=n,await o.write(),rt.info(`Saved ${n.length} inputs for report type: ${r}`)}async appendReportInputs(r,n){await this.init();const o=await this.ensureDb();o.data.reports[r]||(o.data.reports[r]=[]),o.data.reports[r].push(...n),await o.write(),rt.info(`Appended ${n.length} inputs to report type: ${r}`)}async upsertReportInputs(r,n){await this.init();const o=await this.ensureDb();o.data.reports[r]||(o.data.reports[r]=[]);const a=new Set(n.map(u=>`${u.reportDate}-${u.reportNumber}`)),l=o.data.reports[r].filter(u=>{const c=`${u.reportDate}-${u.reportNumber}`;return!a.has(c)});o.data.reports[r]=[...l,...n],await o.write(),rt.info(`Upserted ${n.length} inputs for ${r} (removed duplicates)`)}async getReportInputs(r){await this.init();const o=(await this.ensureDb()).data.reports[r]||[];return rt.dev(`Retrieved ${o.length} inputs for report type: ${r}`),o}async getInputsByName(r,n,o){await this.init();const l=(await this.ensureDb()).data.reports[r]||[],u=Array.isArray(n)?n:[n],c=l.filter(d=>{const f=u.includes(d.inputName),p=o?d.componentName===o:!0;return f&&p});return rt.dev(`Filtered ${c.length} inputs for ${u.join(", ")}${o?` in ${o}`:""}`),c}async getInputsLastNReports(r,n,o,a){const u=(await this.getInputsByName(r,n,a)).sort((p,g)=>{const b=(g.reportDate||"").localeCompare(p.reportDate||"");return b!==0?b:(g.reportNumber||"0").localeCompare(p.reportNumber||"0")}),d=Array.from(new Set(u.map(p=>p.reportDate))).slice(0,o),f=u.filter(p=>d.includes(p.reportDate));return rt.info(`Retrieved ${f.length} inputs from last ${o} reports`),f}async getInputsInDateRange(r,n,o,a,l){const c=(await this.getInputsByName(r,n,l)).filter(d=>{const f=d.reportDate||"";return f>=o&&f<=a});return rt.info(`Retrieved ${c.length} inputs between ${o} and ${a}`),c}async getAvailableInputs(r,n){await this.init();const a=(await this.ensureDb()).data.reports[r]||[],l=new Set(a.filter(u=>u.componentName===n).map(u=>u.inputName));return Array.from(l)}}const Fr=new zv,Ql={}.hasOwnProperty;function qv(t,r){const n=r||{};function o(a,...l){let u=o.invalid;const c=o.handlers;if(a&&Ql.call(a,t)){const d=String(a[t]);u=Ql.call(c,d)?c[d]:o.unknown}if(u)return u.call(this,a,...l)}return o.handlers=n.handlers||{},o.invalid=n.invalid,o.unknown=n.unknown,o}const Hv={}.hasOwnProperty;function Bc(t,r){let n=-1,o;if(r.extensions)for(;++n<r.extensions.length;)Bc(t,r.extensions[n]);for(o in r)if(Hv.call(r,o))switch(o){case"extensions":break;case"unsafe":{jl(t[o],r[o]);break}case"join":{jl(t[o],r[o]);break}case"handlers":{Uv(t[o],r[o]);break}default:t.options[o]=r[o]}return t}function jl(t,r){r&&t.push(...r)}function Uv(t,r){r&&Object.assign(t,r)}function Yv(t,r,n,o){const a=n.enter("blockquote"),l=n.createTracker(o);l.move("> "),l.shift(2);const u=n.indentLines(n.containerFlow(t,l.current()),Gv);return a(),u}function Gv(t,r,n){return">"+(n?"":" ")+t}function $c(t,r){return Kl(t,r.inConstruct,!0)&&!Kl(t,r.notInConstruct,!1)}function Kl(t,r,n){if(typeof r=="string"&&(r=[r]),!r||r.length===0)return n;let o=-1;for(;++o<r.length;)if(t.includes(r[o]))return!0;return!1}function Xl(t,r,n,o){let a=-1;for(;++a<n.unsafe.length;)if(n.unsafe[a].character===`
`&&$c(n.stack,n.unsafe[a]))return/[ \t]/.test(o.before)?"":" ";return`\\
`}function Vv(t,r){const n=String(t);let o=n.indexOf(r),a=o,l=0,u=0;if(typeof r!="string")throw new TypeError("Expected substring");for(;o!==-1;)o===a?++l>u&&(u=l):l=1,a=o+r.length,o=n.indexOf(r,a);return u}function Fa(t,r){return!!(r.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function Qv(t){const r=t.options.fence||"`";if(r!=="`"&&r!=="~")throw new Error("Cannot serialize code with `"+r+"` for `options.fence`, expected `` ` `` or `~`");return r}function jv(t,r,n,o){const a=Qv(n),l=t.value||"",u=a==="`"?"GraveAccent":"Tilde";if(Fa(t,n)){const g=n.enter("codeIndented"),b=n.indentLines(l,Kv);return g(),b}const c=n.createTracker(o),d=a.repeat(Math.max(Vv(l,a)+1,3)),f=n.enter("codeFenced");let p=c.move(d);if(t.lang){const g=n.enter(`codeFencedLang${u}`);p+=c.move(n.safe(t.lang,{before:p,after:" ",encode:["`"],...c.current()})),g()}if(t.lang&&t.meta){const g=n.enter(`codeFencedMeta${u}`);p+=c.move(" "),p+=c.move(n.safe(t.meta,{before:p,after:`
`,encode:["`"],...c.current()})),g()}return p+=c.move(`
`),l&&(p+=c.move(l+`
`)),p+=c.move(d),f(),p}function Kv(t,r,n){return(n?"":"    ")+t}function qa(t){const r=t.options.quote||'"';if(r!=='"'&&r!=="'")throw new Error("Cannot serialize title with `"+r+"` for `options.quote`, expected `\"`, or `'`");return r}function Xv(t,r,n,o){const a=qa(n),l=a==='"'?"Quote":"Apostrophe",u=n.enter("definition");let c=n.enter("label");const d=n.createTracker(o);let f=d.move("[");return f+=d.move(n.safe(n.associationId(t),{before:f,after:"]",...d.current()})),f+=d.move("]: "),c(),!t.url||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),f+=d.move("<"),f+=d.move(n.safe(t.url,{before:f,after:">",...d.current()})),f+=d.move(">")):(c=n.enter("destinationRaw"),f+=d.move(n.safe(t.url,{before:f,after:t.title?" ":`
`,...d.current()}))),c(),t.title&&(c=n.enter(`title${l}`),f+=d.move(" "+a),f+=d.move(n.safe(t.title,{before:f,after:a,...d.current()})),f+=d.move(a),c()),u(),f}function Jv(t){const r=t.options.emphasis||"*";if(r!=="*"&&r!=="_")throw new Error("Cannot serialize emphasis with `"+r+"` for `options.emphasis`, expected `*`, or `_`");return r}function Cn(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Di(t,r,n){const o=Li(t),a=Li(r);return o===void 0?a===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:o===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Wc.peek=Zv;function Wc(t,r,n,o){const a=Jv(n),l=n.enter("emphasis"),u=n.createTracker(o),c=u.move(a);let d=u.move(n.containerPhrasing(t,{after:a,before:c,...u.current()}));const f=d.charCodeAt(0),p=Di(o.before.charCodeAt(o.before.length-1),f,a);p.inside&&(d=Cn(f)+d.slice(1));const g=d.charCodeAt(d.length-1),b=Di(o.after.charCodeAt(0),g,a);b.inside&&(d=d.slice(0,-1)+Cn(g));const y=u.move(a);return l(),n.attentionEncodeSurroundingInfo={after:b.outside,before:p.outside},c+d+y}function Zv(t,r,n){return n.options.emphasis||"*"}function zc(t,r){let n=!1;return Nc(t,function(o){if("value"in o&&/\r?\n|\r/.test(o.value)||o.type==="break")return n=!0,Ma}),!!((!t.depth||t.depth<3)&&Na(t)&&(r.options.setext||n))}function ex(t,r,n,o){const a=Math.max(Math.min(6,t.depth||1),1),l=n.createTracker(o);if(zc(t,n)){const p=n.enter("headingSetext"),g=n.enter("phrasing"),b=n.containerPhrasing(t,{...l.current(),before:`
`,after:`
`});return g(),p(),b+`
`+(a===1?"=":"-").repeat(b.length-(Math.max(b.lastIndexOf("\r"),b.lastIndexOf(`
`))+1))}const u="#".repeat(a),c=n.enter("headingAtx"),d=n.enter("phrasing");l.move(u+" ");let f=n.containerPhrasing(t,{before:"# ",after:`
`,...l.current()});return/^[\t ]/.test(f)&&(f=Cn(f.charCodeAt(0))+f.slice(1)),f=f?u+" "+f:u,n.options.closeAtx&&(f+=" "+u),d(),c(),f}qc.peek=tx;function qc(t){return t.value||""}function tx(){return"<"}Hc.peek=nx;function Hc(t,r,n,o){const a=qa(n),l=a==='"'?"Quote":"Apostrophe",u=n.enter("image");let c=n.enter("label");const d=n.createTracker(o);let f=d.move("![");return f+=d.move(n.safe(t.alt,{before:f,after:"]",...d.current()})),f+=d.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),f+=d.move("<"),f+=d.move(n.safe(t.url,{before:f,after:">",...d.current()})),f+=d.move(">")):(c=n.enter("destinationRaw"),f+=d.move(n.safe(t.url,{before:f,after:t.title?" ":")",...d.current()}))),c(),t.title&&(c=n.enter(`title${l}`),f+=d.move(" "+a),f+=d.move(n.safe(t.title,{before:f,after:a,...d.current()})),f+=d.move(a),c()),f+=d.move(")"),u(),f}function nx(){return"!"}Uc.peek=rx;function Uc(t,r,n,o){const a=t.referenceType,l=n.enter("imageReference");let u=n.enter("label");const c=n.createTracker(o);let d=c.move("![");const f=n.safe(t.alt,{before:d,after:"]",...c.current()});d+=c.move(f+"]["),u();const p=n.stack;n.stack=[],u=n.enter("reference");const g=n.safe(n.associationId(t),{before:d,after:"]",...c.current()});return u(),n.stack=p,l(),a==="full"||!f||f!==g?d+=c.move(g+"]"):a==="shortcut"?d=d.slice(0,-1):d+=c.move("]"),d}function rx(){return"!"}Yc.peek=ix;function Yc(t,r,n){let o=t.value||"",a="`",l=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(o);)a+="`";for(/[^ \r\n]/.test(o)&&(/^[ \r\n]/.test(o)&&/[ \r\n]$/.test(o)||/^`|`$/.test(o))&&(o=" "+o+" ");++l<n.unsafe.length;){const u=n.unsafe[l],c=n.compilePattern(u);let d;if(u.atBreak)for(;d=c.exec(o);){let f=d.index;o.charCodeAt(f)===10&&o.charCodeAt(f-1)===13&&f--,o=o.slice(0,f)+" "+o.slice(d.index+1)}}return a+o+a}function ix(){return"`"}function Gc(t,r){const n=Na(t);return!!(!r.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}Vc.peek=ox;function Vc(t,r,n,o){const a=qa(n),l=a==='"'?"Quote":"Apostrophe",u=n.createTracker(o);let c,d;if(Gc(t,n)){const p=n.stack;n.stack=[],c=n.enter("autolink");let g=u.move("<");return g+=u.move(n.containerPhrasing(t,{before:g,after:">",...u.current()})),g+=u.move(">"),c(),n.stack=p,g}c=n.enter("link"),d=n.enter("label");let f=u.move("[");return f+=u.move(n.containerPhrasing(t,{before:f,after:"](",...u.current()})),f+=u.move("]("),d(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(d=n.enter("destinationLiteral"),f+=u.move("<"),f+=u.move(n.safe(t.url,{before:f,after:">",...u.current()})),f+=u.move(">")):(d=n.enter("destinationRaw"),f+=u.move(n.safe(t.url,{before:f,after:t.title?" ":")",...u.current()}))),d(),t.title&&(d=n.enter(`title${l}`),f+=u.move(" "+a),f+=u.move(n.safe(t.title,{before:f,after:a,...u.current()})),f+=u.move(a),d()),f+=u.move(")"),c(),f}function ox(t,r,n){return Gc(t,n)?"<":"["}Qc.peek=ax;function Qc(t,r,n,o){const a=t.referenceType,l=n.enter("linkReference");let u=n.enter("label");const c=n.createTracker(o);let d=c.move("[");const f=n.containerPhrasing(t,{before:d,after:"]",...c.current()});d+=c.move(f+"]["),u();const p=n.stack;n.stack=[],u=n.enter("reference");const g=n.safe(n.associationId(t),{before:d,after:"]",...c.current()});return u(),n.stack=p,l(),a==="full"||!f||f!==g?d+=c.move(g+"]"):a==="shortcut"?d=d.slice(0,-1):d+=c.move("]"),d}function ax(){return"["}function Ha(t){const r=t.options.bullet||"*";if(r!=="*"&&r!=="+"&&r!=="-")throw new Error("Cannot serialize items with `"+r+"` for `options.bullet`, expected `*`, `+`, or `-`");return r}function sx(t){const r=Ha(t),n=t.options.bulletOther;if(!n)return r==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===r)throw new Error("Expected `bullet` (`"+r+"`) and `bulletOther` (`"+n+"`) to be different");return n}function ux(t){const r=t.options.bulletOrdered||".";if(r!=="."&&r!==")")throw new Error("Cannot serialize items with `"+r+"` for `options.bulletOrdered`, expected `.` or `)`");return r}function jc(t){const r=t.options.rule||"*";if(r!=="*"&&r!=="-"&&r!=="_")throw new Error("Cannot serialize rules with `"+r+"` for `options.rule`, expected `*`, `-`, or `_`");return r}function lx(t,r,n,o){const a=n.enter("list"),l=n.bulletCurrent;let u=t.ordered?ux(n):Ha(n);const c=t.ordered?u==="."?")":".":sx(n);let d=r&&n.bulletLastUsed?u===n.bulletLastUsed:!1;if(!t.ordered){const p=t.children?t.children[0]:void 0;if((u==="*"||u==="-")&&p&&(!p.children||!p.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(d=!0),jc(n)===u&&p){let g=-1;for(;++g<t.children.length;){const b=t.children[g];if(b&&b.type==="listItem"&&b.children&&b.children[0]&&b.children[0].type==="thematicBreak"){d=!0;break}}}}d&&(u=c),n.bulletCurrent=u;const f=n.containerFlow(t,o);return n.bulletLastUsed=u,n.bulletCurrent=l,a(),f}function cx(t){const r=t.options.listItemIndent||"one";if(r!=="tab"&&r!=="one"&&r!=="mixed")throw new Error("Cannot serialize items with `"+r+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return r}function fx(t,r,n,o){const a=cx(n);let l=n.bulletCurrent||Ha(n);r&&r.type==="list"&&r.ordered&&(l=(typeof r.start=="number"&&r.start>-1?r.start:1)+(n.options.incrementListMarker===!1?0:r.children.indexOf(t))+l);let u=l.length+1;(a==="tab"||a==="mixed"&&(r&&r.type==="list"&&r.spread||t.spread))&&(u=Math.ceil(u/4)*4);const c=n.createTracker(o);c.move(l+" ".repeat(u-l.length)),c.shift(u);const d=n.enter("listItem"),f=n.indentLines(n.containerFlow(t,c.current()),p);return d(),f;function p(g,b,y){return b?(y?"":" ".repeat(u))+g:(y?l:l+" ".repeat(u-l.length))+g}}function hx(t,r,n,o){const a=n.enter("paragraph"),l=n.enter("phrasing"),u=n.containerPhrasing(t,o);return l(),a(),u}const dx=za(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function px(t,r,n,o){return(t.children.some(function(u){return dx(u)})?n.containerPhrasing:n.containerFlow).call(n,t,o)}function gx(t){const r=t.options.strong||"*";if(r!=="*"&&r!=="_")throw new Error("Cannot serialize strong with `"+r+"` for `options.strong`, expected `*`, or `_`");return r}Kc.peek=mx;function Kc(t,r,n,o){const a=gx(n),l=n.enter("strong"),u=n.createTracker(o),c=u.move(a+a);let d=u.move(n.containerPhrasing(t,{after:a,before:c,...u.current()}));const f=d.charCodeAt(0),p=Di(o.before.charCodeAt(o.before.length-1),f,a);p.inside&&(d=Cn(f)+d.slice(1));const g=d.charCodeAt(d.length-1),b=Di(o.after.charCodeAt(0),g,a);b.inside&&(d=d.slice(0,-1)+Cn(g));const y=u.move(a+a);return l(),n.attentionEncodeSurroundingInfo={after:b.outside,before:p.outside},c+d+y}function mx(t,r,n){return n.options.strong||"*"}function yx(t,r,n,o){return n.safe(t.value,o)}function wx(t){const r=t.options.ruleRepetition||3;if(r<3)throw new Error("Cannot serialize rules with repetition `"+r+"` for `options.ruleRepetition`, expected `3` or more");return r}function bx(t,r,n){const o=(jc(n)+(n.options.ruleSpaces?" ":"")).repeat(wx(n));return n.options.ruleSpaces?o.slice(0,-1):o}const vx={blockquote:Yv,break:Xl,code:jv,definition:Xv,emphasis:Wc,hardBreak:Xl,heading:ex,html:qc,image:Hc,imageReference:Uc,inlineCode:Yc,link:Vc,linkReference:Qc,list:lx,listItem:fx,paragraph:hx,root:px,strong:Kc,text:yx,thematicBreak:bx},xx=[_x];function _x(t,r,n,o){if(r.type==="code"&&Fa(r,o)&&(t.type==="list"||t.type===r.type&&Fa(t,o)))return!1;if("spread"in n&&typeof n.spread=="boolean")return t.type==="paragraph"&&(t.type===r.type||r.type==="definition"||r.type==="heading"&&zc(r,o))?void 0:n.spread?1:0}const Wn=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],kx=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:Wn},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:Wn},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:Wn},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:Wn},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:Wn},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:Wn},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:Wn},{atBreak:!0,character:"~"}];function Sx(t){return t.label||!t.identifier?t.label||"":Oc(t.identifier)}function Cx(t){if(!t._compiled){const r=(t.atBreak?"[\\r\\n][\\t ]*":"")+(t.before?"(?:"+t.before+")":"");t._compiled=new RegExp((r?"("+r+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(t.character)?"\\":"")+t.character+(t.after?"(?:"+t.after+")":""),"g")}return t._compiled}function Ix(t,r,n){const o=r.indexStack,a=t.children||[],l=[];let u=-1,c=n.before,d;o.push(-1);let f=r.createTracker(n);for(;++u<a.length;){const p=a[u];let g;if(o[o.length-1]=u,u+1<a.length){let T=r.handle.handlers[a[u+1].type];T&&T.peek&&(T=T.peek),g=T?T(a[u+1],t,r,{before:"",after:"",...f.current()}).charAt(0):""}else g=n.after;l.length>0&&(c==="\r"||c===`
`)&&p.type==="html"&&(l[l.length-1]=l[l.length-1].replace(/(\r?\n|\r)$/," "),c=" ",f=r.createTracker(n),f.move(l.join("")));let b=r.handle(p,t,r,{...f.current(),after:g,before:c});d&&d===b.slice(0,1)&&(b=Cn(d.charCodeAt(0))+b.slice(1));const y=r.attentionEncodeSurroundingInfo;r.attentionEncodeSurroundingInfo=void 0,d=void 0,y&&(l.length>0&&y.before&&c===l[l.length-1].slice(-1)&&(l[l.length-1]=l[l.length-1].slice(0,-1)+Cn(c.charCodeAt(0))),y.after&&(d=g)),f.move(b),l.push(b),c=b.slice(-1)}return o.pop(),l.join("")}function Ex(t,r,n){const o=r.indexStack,a=t.children||[],l=r.createTracker(n),u=[];let c=-1;for(o.push(-1);++c<a.length;){const d=a[c];o[o.length-1]=c,u.push(l.move(r.handle(d,t,r,{before:`
`,after:`
`,...l.current()}))),d.type!=="list"&&(r.bulletLastUsed=void 0),c<a.length-1&&u.push(l.move(Tx(d,a[c+1],t,r)))}return o.pop(),u.join("")}function Tx(t,r,n,o){let a=o.join.length;for(;a--;){const l=o.join[a](t,r,n,o);if(l===!0||l===1)break;if(typeof l=="number")return`
`.repeat(1+l);if(l===!1)return`

<!---->

`}return`

`}const Ax=/\r?\n|\r/g;function Px(t,r){const n=[];let o=0,a=0,l;for(;l=Ax.exec(t);)u(t.slice(o,l.index)),n.push(l[0]),o=l.index+l[0].length,a++;return u(t.slice(o)),n.join("");function u(c){n.push(r(c,a,!c))}}function Mx(t,r,n){const o=(n.before||"")+(r||"")+(n.after||""),a=[],l=[],u={};let c=-1;for(;++c<t.unsafe.length;){const p=t.unsafe[c];if(!$c(t.stack,p))continue;const g=t.compilePattern(p);let b;for(;b=g.exec(o);){const y="before"in p||!!p.atBreak,T="after"in p,M=b.index+(y?b[1].length:0);a.includes(M)?(u[M].before&&!y&&(u[M].before=!1),u[M].after&&!T&&(u[M].after=!1)):(a.push(M),u[M]={before:y,after:T})}}a.sort(Ox);let d=n.before?n.before.length:0;const f=o.length-(n.after?n.after.length:0);for(c=-1;++c<a.length;){const p=a[c];p<d||p>=f||p+1<f&&a[c+1]===p+1&&u[p].after&&!u[p+1].before&&!u[p+1].after||a[c-1]===p-1&&u[p].before&&!u[p-1].before&&!u[p-1].after||(d!==p&&l.push(Jl(o.slice(d,p),"\\")),d=p,/[!-/:-@[-`{-~]/.test(o.charAt(p))&&(!n.encode||!n.encode.includes(o.charAt(p)))?l.push("\\"):(l.push(Cn(o.charCodeAt(p))),d++))}return l.push(Jl(o.slice(d,f),n.after)),l.join("")}function Ox(t,r){return t-r}function Jl(t,r){const n=/\\(?=[!-/:-@[-`{-~])/g,o=[],a=[],l=t+r;let u=-1,c=0,d;for(;d=n.exec(l);)o.push(d.index);for(;++u<o.length;)c!==o[u]&&a.push(t.slice(c,o[u])),a.push("\\"),c=o[u];return a.push(t.slice(c)),a.join("")}function Fx(t){const r=t||{},n=r.now||{};let o=r.lineShift||0,a=n.line||1,l=n.column||1;return{move:d,current:u,shift:c};function u(){return{now:{line:a,column:l},lineShift:o}}function c(f){o+=f}function d(f){const p=f||"",g=p.split(/\r?\n|\r/g),b=g[g.length-1];return a+=g.length-1,l=g.length===1?l+b.length:1+b.length+o,p}}function Rx(t,r){const n=r||{},o={associationId:Sx,containerPhrasing:Bx,containerFlow:$x,createTracker:Fx,compilePattern:Cx,enter:l,handlers:{...vx},handle:void 0,indentLines:Px,indexStack:[],join:[...xx],options:{},safe:Wx,stack:[],unsafe:[...kx]};Bc(o,n),o.options.tightDefinitions&&o.join.push(Nx),o.handle=qv("type",{invalid:Lx,unknown:Dx,handlers:o.handlers});let a=o.handle(t,void 0,o,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return a&&a.charCodeAt(a.length-1)!==10&&a.charCodeAt(a.length-1)!==13&&(a+=`
`),a;function l(u){return o.stack.push(u),c;function c(){o.stack.pop()}}}function Lx(t){throw new Error("Cannot handle value `"+t+"`, expected node")}function Dx(t){const r=t;throw new Error("Cannot handle unknown node `"+r.type+"`")}function Nx(t,r){if(t.type==="definition"&&t.type===r.type)return 0}function Bx(t,r){return Ix(t,this,r)}function $x(t,r){return Ex(t,this,r)}function Wx(t,r){return Mx(this,t,r)}function zx(t){const r=this;r.compiler=n;function n(o){return Rx(o,{...r.data("settings"),...t,extensions:r.data("toMarkdownExtensions")||[]})}}const $t={text:"text",boolean:"boolean",multicheckbox:"multicheckbox",richText:"richText",number:"number"};class qx{constructor(){this.logger=jt(Kt.InputCreator)}createInput(r){const{componentName:n,inputName:o,type:a}=r;let l="";try{switch(a){case $t.text:case $t.richText:{l=`> ${r.defaultValue??""}`;break}case $t.boolean:{const u=r.defaultValue===!0?"x":" ",c=r.label??"Checkbox";l=`- [${u}] ${c}`;break}case $t.multicheckbox:{const u=r.options??[];if(!u.length)throw this.logger.error("multicheckbox must have non-empty options array",{opts:r}),new Error("multicheckbox must have non-empty options array");l=u.map(c=>`- [ ] ${Oa.hiddenValue(n,o,c.value)} ${c.label}`).join(`
`);break}case $t.number:{l=`> {Number} ${r.defaultValue??""}`;break}default:throw this.logger.error(`Unknown input type: ${a}`,{opts:r}),new Error("Unknown input type: "+a)}}catch(u){throw this.logger.error("Failed to create input",{error:u,opts:r}),u}return Oa.input.wrap({componentName:n,inputName:o,content:l,inputType:a})}parseMarkdown(r){try{return Ea().use(Lc).parse(r)}catch(n){throw this.logger.error("Failed to parse Markdown",{error:n,md:r}),n}}stringifyMarkdown(r){try{return Ea().use(zx).stringify(r)}catch(n){throw this.logger.error("Failed to stringify Markdown",{error:n,ast:r}),n}}}const zn=new qx;class qe{constructor(r){this.content=[],this.logger=jt(Kt.ComponentBuilder),this.componentName=r}_md(r){const n=typeof r=="function"?r():r;return this.content.push(n),this}_divider(){return this.content.push("***"),this}_fancyDivider(r,n="⚛︎"){return r?(this.content.push("---"),this.content.push(`<center>${n} <strong>${r}</strong> ${n}</center>`),this.content.push("---")):this.content.push("---"),this}_themedDivider(r,n){return this.content.push(`### ${n} ${r}`),this}_blockquoteDivider(r){return r?this.content.push(`> ${r}`):this.content.push("> ---"),this}_guidance(r,n="Guidance"){const u=(r??`Keep it simple — research shows even a basic ticksheet improves habit consistency.
Prompts: Which habits do you want to track today?`).split(`
`).map(d=>`> ${d}`),c=`> [!note] ${n}
${u.join(`
`)}`;return this.content.push(c),this}_input(r){const n={...r,componentName:this.componentName};return this.content.push(zn.createInput(n)),this}_text(r,n,o){const a=zn.createInput({componentName:this.componentName,type:$t.text,inputName:r,defaultValue:n,placeholder:o});return this.content.push(a),this}_richText(r,n,o){this.content.push("<center>· · · · · · · · · · · · · · · ·</center>");const a=zn.createInput({componentName:this.componentName,type:$t.richText,inputName:r,defaultValue:n,placeholder:o});return this.content.push(a),this.content.push("<center>· · · · · · · · · · · · · · · ·</center>"),this}_boolean(r,n,o){const a=zn.createInput({componentName:this.componentName,type:$t.boolean,inputName:r,label:n,defaultValue:o});return this.content.push(a),this}_number(r,n){const o=zn.createInput({componentName:this.componentName,type:$t.number,inputName:r,defaultValue:n});return this.content.push(o),this}_multiCheckbox(r,n,o,a){const l=zn.createInput({componentName:this.componentName,type:$t.multicheckbox,inputName:r,options:n,defaultValue:o,collapsed:a});return this.content.push(l),this}_multiCheckboxSC(r,n,o,a){const l=zn.createInput({componentName:this.componentName,type:$t.multicheckbox,inputName:r,options:n,singleChoice:!0,defaultValue:o,collapsed:a});return this.content.push(l),this}render(){const r=Oa.component.wrap(this.componentName,this.content.join(`

`));return this.logger.dev("Component rendered",{outputLength:r.length}),r}}async function Hx(){const t=new qe("consistencyStats");try{const r=await Fr.getReportInputs("almostDailyReport");if(!r||r.length===0)return t._md("📊 **Consistency Tracker** · 🎯 Starting your journey today!"),t.render();const n=Array.from(new Set(r.map(y=>y.reportDate))).sort().reverse(),o=n[n.length-1],a=new Date(o),l=new Date,u=Z0(l,a)+1,d=[{days:7,label:"7d"},{days:30,label:"30d"},{days:90,label:"90d"}].map(({days:y,label:T})=>{const M=Ri(Zy(l,y-1),"yyyy-MM-dd"),B=n.filter(z=>z>=M).length,D=Math.min(y,u),G=Math.round(B/D*100);return{label:T,reports:B,days:D,percentage:G}}),f=n.length,p=Math.round(f/u*100),g=[];for(const y of d){const T=parseInt(y.label.replace("d",""));if(y.days<T)continue;const M=y.percentage>=80?"🎉":y.percentage>=60?"✅":y.percentage>=40?"📈":"🌱";g.push(`${M} ${y.label}: ${y.reports}/${y.days} (${y.percentage}%)`)}const b=p>=80?"🏆":p>=60?"⭐":"🎯";g.push(`${b} All: ${f}/${u} (${p}%)`),t._md(`📊 **Consistency Tracker** · ${g.join(" · ")}`)}catch{t._md("📊 **Consistency Tracker** · Starting fresh!")}return t.render()}function Ux(){const t="morningReflection",r=new qe(t);return r._md("## 🧘 Morning Reflection (⭐ RECOMMENDED - 2-3 min)"),r._guidance(`**The Dichotomy of Control** — The foundation of Stoic peace

**From Stoicism** — the Stoics teach that **all suffering comes from desiring things outside your control**. This morning meditation trains you to recognize what you can and cannot control, so you waste no energy on the unchangeable.

**Why this matters:**
- **Focus your power** — stop struggling against things you cannot change
- **Reduce anxiety** — let go of outcomes beyond your influence  
- **Build resilience** — accept reality as it is, not as you wish it were
- **Increase effectiveness** — channel all your energy into what you CAN control

**How to practice:**
1. Read the lists below slowly
2. Notice where you typically waste energy on things outside your control
3. Choose ONE virtue to embody today through your actions and responses

_"Make the best use of what is in your power, and take the rest as it happens."_ — Epictetus`,"Stoic Discipline of Desire"),r._md("### The Dichotomy of Control"),r._md(`
**✅ COMPLETELY IN YOUR CONTROL:**
- Your judgments and opinions
- Your responses to events
- Your character and virtues
- Your effort and attention
- How you treat others
- What you value

**❌ NOT IN YOUR CONTROL:**
- Other people's opinions and actions
- Outcomes and results
- Past and future events
- Your reputation
- The weather, traffic, luck
- Sickness, aging, death

**🌊 The Way of Water** (from Taoism - Wu Wei)

When you face obstacles today, ask:
- "Can I change this?" → If yes, take action. If no, accept it.
- "What can I learn from this obstacle?"
- "How would water flow around this?"

**🏔️ The Obstacle Is The Way** (from Stoicism)

Marcus Aurelius taught: **"The impediment to action advances action. What stands in the way becomes the way."**

Every obstacle contains an opportunity:
- **Obstacle blocks your plan?** → forces you to become more creative and resourceful
- **Person frustrates you?** → chance to practice patience and understanding  
- **Failure happens?** → data for learning and growth
- **Delay occurs?** → time to prepare better or rest

**The shift** — stop seeing obstacles as problems; start seeing them as **training equipment** for your character.

**Remember** — the obstacle is not the enemy; your resistance to it is.`),r._md("**Today's Character Intention:**"),r._md("*What virtue will I practice today? How will I embody it?*"),r._text("character_intention","","e.g., 'I will practice patience by pausing 3 seconds before responding'"),r.render()}function Yx(){const t="negativeVisualization",r=new qe(t);return r._md("## 🪞 Negative Visualization (💡 OPTIONAL - 2 min)"),r._guidance(`**Praemeditatio Malorum** — Ancient Stoic gratitude practice

This is NOT pessimism. This is **appreciation training** that the Stoics practiced daily.

**The Problem** — we take everything for granted. Your health, your home, your loved ones — you stop seeing them. Hedonic adaptation makes you numb to your blessings.

**The Solution** — briefly imagine losing what you value. When you mentally "lose" something, you suddenly SEE it again with fresh eyes.

**What this practice does:**
- **Breaks hedonic adaptation** — stop taking good things for granted
- **Generates genuine gratitude** — feel appreciation, not just think it  
- **Prepares you mentally** — if loss happens, the shock is less severe
- **Increases present joy** — savor what you have RIGHT NOW

**How to practice:**
1. Close your eyes for 10-20 seconds
2. Vividly imagine ONE thing you value being gone (person, health, home, ability)
3. Feel the loss — let it be uncomfortable for a moment
4. Open your eyes and appreciate that you STILL HAVE IT

This isn't dwelling on loss. It's a quick mental exercise to restore wonder.

_"He robs present ills of their power who has perceived their coming beforehand."_ — Seneca`,"Stoic Gratitude Practice"),r._md("**Practice Steps:**"),r._md("1. **Close your eyes** — take a slow breath"),r._md("2. **Imagine the loss** — picture losing someone/something you love (10 seconds)"),r._md("3. **Feel it** — don't rush past the discomfort"),r._md("4. **Open your eyes** — look around. You still have them. Feel that relief."),r._boolean("negative_visualization_done","I have practiced negative visualization",!1),r.render()}function Gx(){const t="mementoMori",r=new qe(t);return r._md("## ☠️ Memento Mori: What Truly Matters (💡 OPTIONAL - 2-3 min)"),r._guidance(`**Remember You Will Die** — The ultimate clarifying lens

Memento Mori means "remember death." This isn't morbid — it's LIBERATING.

**The Problem** — we live as if we have infinite time. We postpone what matters. We stress over trivialities. We forget what's truly important.

**The Stoic Solution** — use death as a focusing tool. When you remember you will die, suddenly you see clearly.

**What this practice does:**
- **Clarifies priorities** — cuts through noise to what actually matters
- **Dissolves petty concerns** — that argument? That embarrassment? Irrelevant.
- **Motivates action** — tomorrow isn't guaranteed. Act NOW on what matters.
- **Creates gratitude** — every day alive is a gift to use well
- **Builds courage** — fear of judgment fades when you remember death

**The Four Pillars of Life** (from Stoic philosophy):
1. **Happiness & Peace of Mind** — inner tranquility and joy
2. **Body & Health** — physical wellbeing and vitality  
3. **People & Relationships** — love, connection, community
4. **Meaningful Work** — contributing something valuable

**How to practice:**
Ask yourself: "If today were my last day, would I waste it worrying about ___?" 
Usually, the answer is no. Then stop worrying about it.

_"You could leave life right now. Let that determine what you do and say and think."_ — Marcus Aurelius`,"Stoic Memento Mori"),r._md('> **The Death Question**: "If I died tonight, would I regret not doing _____ today?"'),r._md("**Which of the four pillars needs your attention today?**"),r._text("priority_area_today","","e.g., 'Relationships - I'll call my mom tonight and tell her I love her'"),r.render()}function Vx(){const t="priorityPlanning",r=new qe(t);return r._md("## 🎯 Priority Planning (📌 CORE - 3 min)"),r._guidance(`**Atomic Habits Principle** — implementation intentions double success rates.

**Template** — "I will [BEHAVIOR] at [TIME] in [LOCATION]."

Be specific. Clarity creates commitment.`,"Implementation Intentions"),r._md("**My #1 Priority Today** (the ONE thing that matters most):"),r._text("priority_today","","e.g., 'Finish the project proposal'"),r._md("**When & Where** (be specific):"),r._text("when_where","","e.g., 'At 9 AM in my home office with phone on airplane mode'"),r._md("**If-Then Plan** (prepare for obstacles):"),r._md("*If [OBSTACLE], then I will [SOLUTION]*"),r._text("obstacle_plan","","e.g., 'If I feel distracted, then I'll take a 5-minute walk and return'"),r.render()}function Qx(){const t="voluntaryDiscomfort",r=new qe(t);return r._md("## 🧊 Voluntary Discomfort (💡 OPTIONAL - 2 min)"),r._guidance(`**Practicing Poverty** — Seneca's resilience training

The Stoics deliberately practiced small discomforts. Not to punish themselves, but to build mental strength and appreciation.

**The Problem** — modern life is TOO comfortable. We become weak, dependent on luxuries, and terrified of any discomfort. When hardship comes, we collapse.

**The Stoic Solution** — regularly choose small, voluntary discomforts. This trains your mind that discomfort is survivable—even beneficial.

**What this practice does:**
1. **Builds resilience** — when real hardship comes, you're prepared
2. **Breaks hedonic adaptation** — you stop taking comfort for granted
3. **Strengthens willpower** — you prove you can control urges  
4. **Increases appreciation** — comfort feels AMAZING after voluntary discomfort
5. **Reduces fear** — you learn: "Discomfort won't kill me. I'm stronger than I thought."

**The Science** — your brain predicts suffering based on past experience. If you've never been uncomfortable, small discomforts feel catastrophic. If you practice discomfort, your brain learns: "This is manageable."

**How to practice:**
Choose ONE small discomfort today. Not as punishment — as TRAINING.
- Physical: cold shower, skip a meal, exercise when tired
- Social: have the difficult conversation, say no to someone
- Habitual: skip coffee, no phone for 2 hours, sit in silence

**Key** — the discomfort should be VOLUNTARY and MILD. You're training, not torturing.

_"We suffer more often in imagination than in reality."_ — Seneca
_"Set aside a certain number of days to be content with little and practice poverty."_ — Seneca`,"Stoic Resilience Training"),r._md("**Today's Voluntary Discomfort** (choose ONE):"),r._md("- **Physical** — cold shower (30-60 sec), skip dessert, walk instead of drive"),r._md("- **Social** — difficult conversation, saying no, asking for what you need"),r._md("- **Habitual** — skip coffee/treat, no phone for 2 hrs, wake 30 min earlier"),r._md("- **Environmental** — sit on floor, less heat/AC, simpler meal"),r._md("**Your choice** (be specific about what, when, and for how long):"),r._text("voluntary_discomfort_choice","","e.g., 'Cold shower for 60 seconds after regular shower, at 7am'"),r._boolean("voluntary_discomfort_done","I practiced voluntary discomfort today",!1),r.render()}function Xc(t){if(t.length===0)return 0;var r=t[0],n=0,o;if(typeof r!="number")return Number.NaN;for(var a=1;a<t.length;a++){if(typeof t[a]!="number")return Number.NaN;o=r+t[a],Math.abs(r)>=Math.abs(t[a])?n+=r-o+t[a]:n+=t[a]-o+r,r=o}return r+n}function Jc(t){if(t.length===0)throw new Error("mean requires at least one data point");return Xc(t)/t.length}function jx(t,r){var n=Jc(t),o=0,a,l;for(l=0;l<t.length;l++)a=t[l]-n,o+=a*a;return o}function Zc(t){if(t.length===0)throw new Error("variance requires at least one data point");return jx(t)/t.length}function Kx(t){if(t.length===1)return 0;var r=Zc(t);return Math.sqrt(r)}function Xx(t){if(t.length===0)throw new Error("mode requires at least one data point");if(t.length===1)return t[0];for(var r=t[0],n=Number.NaN,o=0,a=1,l=1;l<t.length+1;l++)t[l]!==r?(a>o&&(o=a,n=r),a=1,r=t[l]):a++;return n}function Jx(t){return t.slice().sort(function(r,n){return r-n})}function Zx(t){return Xx(Jx(t))}function Zl(t){if(t.length===0)throw new Error("min requires at least one data point");for(var r=t[0],n=1;n<t.length;n++)t[n]<r&&(r=t[n]);return r}function ec(t){if(t.length===0)throw new Error("max requires at least one data point");for(var r=t[0],n=1;n<t.length;n++)t[n]>r&&(r=t[n]);return r}function tc(t,r){var n=t.length*r;if(t.length===0)throw new Error("quantile requires at least one data point.");if(r<0||r>1)throw new Error("quantiles must be between 0 and 1");return r===1?t[t.length-1]:r===0?t[0]:n%1!==0?t[Math.ceil(n)-1]:t.length%2===0?(t[n-1]+t[n])/2:t[n]}function Mi(t,r,n,o){for(n=n||0,o=o||t.length-1;o>n;){if(o-n>600){var a=o-n+1,l=r-n+1,u=Math.log(a),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(a-c)/a);l-a/2<0&&(d*=-1);var f=Math.max(n,Math.floor(r-l*c/a+d)),p=Math.min(o,Math.floor(r+(a-l)*c/a+d));Mi(t,r,f,p)}var g=t[r],b=n,y=o;for(Ir(t,n,r),t[o]>g&&Ir(t,n,o);b<y;){for(Ir(t,b,y),b++,y--;t[b]<g;)b++;for(;t[y]>g;)y--}t[n]===g?Ir(t,n,y):(y++,Ir(t,y,o)),y<=r&&(n=y+1),r<=y&&(o=y-1)}}function Ir(t,r,n){var o=t[r];t[r]=t[n],t[n]=o}function Ra(t,r){var n=t.slice();if(Array.isArray(r)){e_(n,r);for(var o=[],a=0;a<r.length;a++)o[a]=tc(n,r[a]);return o}else{var l=tf(n.length,r);return ef(n,l,0,n.length-1),tc(n,r)}}function ef(t,r,n,o){r%1===0?Mi(t,r,n,o):(r=Math.floor(r),Mi(t,r,n,o),Mi(t,r+1,r+1,o))}function e_(t,r){for(var n=[0],o=0;o<r.length;o++)n.push(tf(t.length,r[o]));n.push(t.length-1),n.sort(t_);for(var a=[0,n.length-1];a.length;){var l=Math.ceil(a.pop()),u=Math.floor(a.pop());if(!(l-u<=1)){var c=Math.floor((u+l)/2);ef(t,n[c],Math.floor(n[u]),Math.ceil(n[l])),a.push(u,c,c,l)}}}function t_(t,r){return t-r}function tf(t,r){var n=t*r;return r===1?t-1:r===0?0:n%1!==0?Math.ceil(n)-1:t%2===0?n-.5:n}function n_(t){return+Ra(t,.5)}var ga={},nc;function r_(){return nc||(nc=1,(function(t){(function(r){r.black="\x1B[30m",r.red="\x1B[31m",r.green="\x1B[32m",r.yellow="\x1B[33m",r.blue="\x1B[34m",r.magenta="\x1B[35m",r.cyan="\x1B[36m",r.lightgray="\x1B[37m",r.default="\x1B[39m",r.darkgray="\x1B[90m",r.lightred="\x1B[91m",r.lightgreen="\x1B[92m",r.lightyellow="\x1B[93m",r.lightblue="\x1B[94m",r.lightmagenta="\x1B[95m",r.lightcyan="\x1B[96m",r.white="\x1B[97m",r.reset="\x1B[0m";function n(o,a){return a===void 0?o:a+o+r.reset}r.colored=n,r.plot=function(o,a=void 0){typeof o[0]=="number"&&(o=[o]),a=typeof a<"u"?a:{};let l=typeof a.min<"u"?a.min:o[0][0],u=typeof a.max<"u"?a.max:o[0][0];for(let F=0;F<o.length;F++)for(let E=0;E<o[F].length;E++)l=Math.min(l,o[F][E]),u=Math.max(u,o[F][E]);let c=["┼","┤","╶","╴","─","╰","╭","╮","╯","│"],d=Math.abs(u-l),f=typeof a.offset<"u"?a.offset:3,p=typeof a.padding<"u"?a.padding:"           ",g=typeof a.height<"u"?a.height:d,b=typeof a.colors<"u"?a.colors:[],y=d!==0?g/d:1,T=Math.round(l*y),M=Math.round(u*y),B=Math.abs(M-T),D=0;for(let F=0;F<o.length;F++)D=Math.max(D,o[F].length);D=D+f;let G=typeof a.symbols<"u"?a.symbols:c,z=typeof a.format<"u"?a.format:function(F){return(p+F.toFixed(2)).slice(-p.length)},W=new Array(B+1);for(let F=0;F<=B;F++){W[F]=new Array(D);for(let E=0;E<D;E++)W[F][E]=" "}for(let F=T;F<=M;++F){let E=z(B>0?u-(F-T)*d/B:F,F-T);W[F-T][Math.max(f-E.length,0)]=E,W[F-T][f-1]=F==0?G[0]:G[1]}for(let F=0;F<o.length;F++){let E=b[F%b.length],U=Math.round(o[F][0]*y)-T;W[B-U][f-1]=n(G[0],E);for(let Q=0;Q<o[F].length-1;Q++){let ee=Math.round(o[F][Q+0]*y)-T,he=Math.round(o[F][Q+1]*y)-T;if(ee==he)W[B-ee][Q+f]=n(G[4],E);else{W[B-he][Q+f]=n(ee>he?G[5]:G[6],E),W[B-ee][Q+f]=n(ee>he?G[7]:G[8],E);let j=Math.min(ee,he),V=Math.max(ee,he);for(let me=j+1;me<V;me++)W[B-me][Q+f]=n(G[9],E)}}}return W.map(function(F){return F.join("")}).join(`
`)}})(t)})(ga)),ga}var i_=r_(),Oi={exports:{}},ma,rc;function o_(){return rc||(rc=1,ma={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),ma}var ya,ic;function nf(){if(ic)return ya;ic=1;const t=o_(),r={};for(const a of Object.keys(t))r[t[a]]=a;const n={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};ya=n;for(const a of Object.keys(n)){if(!("channels"in n[a]))throw new Error("missing channels property: "+a);if(!("labels"in n[a]))throw new Error("missing channel labels property: "+a);if(n[a].labels.length!==n[a].channels)throw new Error("channel and label counts mismatch: "+a);const{channels:l,labels:u}=n[a];delete n[a].channels,delete n[a].labels,Object.defineProperty(n[a],"channels",{value:l}),Object.defineProperty(n[a],"labels",{value:u})}n.rgb.hsl=function(a){const l=a[0]/255,u=a[1]/255,c=a[2]/255,d=Math.min(l,u,c),f=Math.max(l,u,c),p=f-d;let g,b;f===d?g=0:l===f?g=(u-c)/p:u===f?g=2+(c-l)/p:c===f&&(g=4+(l-u)/p),g=Math.min(g*60,360),g<0&&(g+=360);const y=(d+f)/2;return f===d?b=0:y<=.5?b=p/(f+d):b=p/(2-f-d),[g,b*100,y*100]},n.rgb.hsv=function(a){let l,u,c,d,f;const p=a[0]/255,g=a[1]/255,b=a[2]/255,y=Math.max(p,g,b),T=y-Math.min(p,g,b),M=function(B){return(y-B)/6/T+1/2};return T===0?(d=0,f=0):(f=T/y,l=M(p),u=M(g),c=M(b),p===y?d=c-u:g===y?d=1/3+l-c:b===y&&(d=2/3+u-l),d<0?d+=1:d>1&&(d-=1)),[d*360,f*100,y*100]},n.rgb.hwb=function(a){const l=a[0],u=a[1];let c=a[2];const d=n.rgb.hsl(a)[0],f=1/255*Math.min(l,Math.min(u,c));return c=1-1/255*Math.max(l,Math.max(u,c)),[d,f*100,c*100]},n.rgb.cmyk=function(a){const l=a[0]/255,u=a[1]/255,c=a[2]/255,d=Math.min(1-l,1-u,1-c),f=(1-l-d)/(1-d)||0,p=(1-u-d)/(1-d)||0,g=(1-c-d)/(1-d)||0;return[f*100,p*100,g*100,d*100]};function o(a,l){return(a[0]-l[0])**2+(a[1]-l[1])**2+(a[2]-l[2])**2}return n.rgb.keyword=function(a){const l=r[a];if(l)return l;let u=1/0,c;for(const d of Object.keys(t)){const f=t[d],p=o(a,f);p<u&&(u=p,c=d)}return c},n.keyword.rgb=function(a){return t[a]},n.rgb.xyz=function(a){let l=a[0]/255,u=a[1]/255,c=a[2]/255;l=l>.04045?((l+.055)/1.055)**2.4:l/12.92,u=u>.04045?((u+.055)/1.055)**2.4:u/12.92,c=c>.04045?((c+.055)/1.055)**2.4:c/12.92;const d=l*.4124+u*.3576+c*.1805,f=l*.2126+u*.7152+c*.0722,p=l*.0193+u*.1192+c*.9505;return[d*100,f*100,p*100]},n.rgb.lab=function(a){const l=n.rgb.xyz(a);let u=l[0],c=l[1],d=l[2];u/=95.047,c/=100,d/=108.883,u=u>.008856?u**(1/3):7.787*u+16/116,c=c>.008856?c**(1/3):7.787*c+16/116,d=d>.008856?d**(1/3):7.787*d+16/116;const f=116*c-16,p=500*(u-c),g=200*(c-d);return[f,p,g]},n.hsl.rgb=function(a){const l=a[0]/360,u=a[1]/100,c=a[2]/100;let d,f,p;if(u===0)return p=c*255,[p,p,p];c<.5?d=c*(1+u):d=c+u-c*u;const g=2*c-d,b=[0,0,0];for(let y=0;y<3;y++)f=l+1/3*-(y-1),f<0&&f++,f>1&&f--,6*f<1?p=g+(d-g)*6*f:2*f<1?p=d:3*f<2?p=g+(d-g)*(2/3-f)*6:p=g,b[y]=p*255;return b},n.hsl.hsv=function(a){const l=a[0];let u=a[1]/100,c=a[2]/100,d=u;const f=Math.max(c,.01);c*=2,u*=c<=1?c:2-c,d*=f<=1?f:2-f;const p=(c+u)/2,g=c===0?2*d/(f+d):2*u/(c+u);return[l,g*100,p*100]},n.hsv.rgb=function(a){const l=a[0]/60,u=a[1]/100;let c=a[2]/100;const d=Math.floor(l)%6,f=l-Math.floor(l),p=255*c*(1-u),g=255*c*(1-u*f),b=255*c*(1-u*(1-f));switch(c*=255,d){case 0:return[c,b,p];case 1:return[g,c,p];case 2:return[p,c,b];case 3:return[p,g,c];case 4:return[b,p,c];case 5:return[c,p,g]}},n.hsv.hsl=function(a){const l=a[0],u=a[1]/100,c=a[2]/100,d=Math.max(c,.01);let f,p;p=(2-u)*c;const g=(2-u)*d;return f=u*d,f/=g<=1?g:2-g,f=f||0,p/=2,[l,f*100,p*100]},n.hwb.rgb=function(a){const l=a[0]/360;let u=a[1]/100,c=a[2]/100;const d=u+c;let f;d>1&&(u/=d,c/=d);const p=Math.floor(6*l),g=1-c;f=6*l-p,(p&1)!==0&&(f=1-f);const b=u+f*(g-u);let y,T,M;switch(p){default:case 6:case 0:y=g,T=b,M=u;break;case 1:y=b,T=g,M=u;break;case 2:y=u,T=g,M=b;break;case 3:y=u,T=b,M=g;break;case 4:y=b,T=u,M=g;break;case 5:y=g,T=u,M=b;break}return[y*255,T*255,M*255]},n.cmyk.rgb=function(a){const l=a[0]/100,u=a[1]/100,c=a[2]/100,d=a[3]/100,f=1-Math.min(1,l*(1-d)+d),p=1-Math.min(1,u*(1-d)+d),g=1-Math.min(1,c*(1-d)+d);return[f*255,p*255,g*255]},n.xyz.rgb=function(a){const l=a[0]/100,u=a[1]/100,c=a[2]/100;let d,f,p;return d=l*3.2406+u*-1.5372+c*-.4986,f=l*-.9689+u*1.8758+c*.0415,p=l*.0557+u*-.204+c*1.057,d=d>.0031308?1.055*d**(1/2.4)-.055:d*12.92,f=f>.0031308?1.055*f**(1/2.4)-.055:f*12.92,p=p>.0031308?1.055*p**(1/2.4)-.055:p*12.92,d=Math.min(Math.max(0,d),1),f=Math.min(Math.max(0,f),1),p=Math.min(Math.max(0,p),1),[d*255,f*255,p*255]},n.xyz.lab=function(a){let l=a[0],u=a[1],c=a[2];l/=95.047,u/=100,c/=108.883,l=l>.008856?l**(1/3):7.787*l+16/116,u=u>.008856?u**(1/3):7.787*u+16/116,c=c>.008856?c**(1/3):7.787*c+16/116;const d=116*u-16,f=500*(l-u),p=200*(u-c);return[d,f,p]},n.lab.xyz=function(a){const l=a[0],u=a[1],c=a[2];let d,f,p;f=(l+16)/116,d=u/500+f,p=f-c/200;const g=f**3,b=d**3,y=p**3;return f=g>.008856?g:(f-16/116)/7.787,d=b>.008856?b:(d-16/116)/7.787,p=y>.008856?y:(p-16/116)/7.787,d*=95.047,f*=100,p*=108.883,[d,f,p]},n.lab.lch=function(a){const l=a[0],u=a[1],c=a[2];let d;d=Math.atan2(c,u)*360/2/Math.PI,d<0&&(d+=360);const p=Math.sqrt(u*u+c*c);return[l,p,d]},n.lch.lab=function(a){const l=a[0],u=a[1],d=a[2]/360*2*Math.PI,f=u*Math.cos(d),p=u*Math.sin(d);return[l,f,p]},n.rgb.ansi16=function(a,l=null){const[u,c,d]=a;let f=l===null?n.rgb.hsv(a)[2]:l;if(f=Math.round(f/50),f===0)return 30;let p=30+(Math.round(d/255)<<2|Math.round(c/255)<<1|Math.round(u/255));return f===2&&(p+=60),p},n.hsv.ansi16=function(a){return n.rgb.ansi16(n.hsv.rgb(a),a[2])},n.rgb.ansi256=function(a){const l=a[0],u=a[1],c=a[2];return l===u&&u===c?l<8?16:l>248?231:Math.round((l-8)/247*24)+232:16+36*Math.round(l/255*5)+6*Math.round(u/255*5)+Math.round(c/255*5)},n.ansi16.rgb=function(a){let l=a%10;if(l===0||l===7)return a>50&&(l+=3.5),l=l/10.5*255,[l,l,l];const u=(~~(a>50)+1)*.5,c=(l&1)*u*255,d=(l>>1&1)*u*255,f=(l>>2&1)*u*255;return[c,d,f]},n.ansi256.rgb=function(a){if(a>=232){const f=(a-232)*10+8;return[f,f,f]}a-=16;let l;const u=Math.floor(a/36)/5*255,c=Math.floor((l=a%36)/6)/5*255,d=l%6/5*255;return[u,c,d]},n.rgb.hex=function(a){const u=(((Math.round(a[0])&255)<<16)+((Math.round(a[1])&255)<<8)+(Math.round(a[2])&255)).toString(16).toUpperCase();return"000000".substring(u.length)+u},n.hex.rgb=function(a){const l=a.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!l)return[0,0,0];let u=l[0];l[0].length===3&&(u=u.split("").map(g=>g+g).join(""));const c=parseInt(u,16),d=c>>16&255,f=c>>8&255,p=c&255;return[d,f,p]},n.rgb.hcg=function(a){const l=a[0]/255,u=a[1]/255,c=a[2]/255,d=Math.max(Math.max(l,u),c),f=Math.min(Math.min(l,u),c),p=d-f;let g,b;return p<1?g=f/(1-p):g=0,p<=0?b=0:d===l?b=(u-c)/p%6:d===u?b=2+(c-l)/p:b=4+(l-u)/p,b/=6,b%=1,[b*360,p*100,g*100]},n.hsl.hcg=function(a){const l=a[1]/100,u=a[2]/100,c=u<.5?2*l*u:2*l*(1-u);let d=0;return c<1&&(d=(u-.5*c)/(1-c)),[a[0],c*100,d*100]},n.hsv.hcg=function(a){const l=a[1]/100,u=a[2]/100,c=l*u;let d=0;return c<1&&(d=(u-c)/(1-c)),[a[0],c*100,d*100]},n.hcg.rgb=function(a){const l=a[0]/360,u=a[1]/100,c=a[2]/100;if(u===0)return[c*255,c*255,c*255];const d=[0,0,0],f=l%1*6,p=f%1,g=1-p;let b=0;switch(Math.floor(f)){case 0:d[0]=1,d[1]=p,d[2]=0;break;case 1:d[0]=g,d[1]=1,d[2]=0;break;case 2:d[0]=0,d[1]=1,d[2]=p;break;case 3:d[0]=0,d[1]=g,d[2]=1;break;case 4:d[0]=p,d[1]=0,d[2]=1;break;default:d[0]=1,d[1]=0,d[2]=g}return b=(1-u)*c,[(u*d[0]+b)*255,(u*d[1]+b)*255,(u*d[2]+b)*255]},n.hcg.hsv=function(a){const l=a[1]/100,u=a[2]/100,c=l+u*(1-l);let d=0;return c>0&&(d=l/c),[a[0],d*100,c*100]},n.hcg.hsl=function(a){const l=a[1]/100,c=a[2]/100*(1-l)+.5*l;let d=0;return c>0&&c<.5?d=l/(2*c):c>=.5&&c<1&&(d=l/(2*(1-c))),[a[0],d*100,c*100]},n.hcg.hwb=function(a){const l=a[1]/100,u=a[2]/100,c=l+u*(1-l);return[a[0],(c-l)*100,(1-c)*100]},n.hwb.hcg=function(a){const l=a[1]/100,c=1-a[2]/100,d=c-l;let f=0;return d<1&&(f=(c-d)/(1-d)),[a[0],d*100,f*100]},n.apple.rgb=function(a){return[a[0]/65535*255,a[1]/65535*255,a[2]/65535*255]},n.rgb.apple=function(a){return[a[0]/255*65535,a[1]/255*65535,a[2]/255*65535]},n.gray.rgb=function(a){return[a[0]/100*255,a[0]/100*255,a[0]/100*255]},n.gray.hsl=function(a){return[0,0,a[0]]},n.gray.hsv=n.gray.hsl,n.gray.hwb=function(a){return[0,100,a[0]]},n.gray.cmyk=function(a){return[0,0,0,a[0]]},n.gray.lab=function(a){return[a[0],0,0]},n.gray.hex=function(a){const l=Math.round(a[0]/100*255)&255,c=((l<<16)+(l<<8)+l).toString(16).toUpperCase();return"000000".substring(c.length)+c},n.rgb.gray=function(a){return[(a[0]+a[1]+a[2])/3/255*100]},ya}var wa,oc;function a_(){if(oc)return wa;oc=1;const t=nf();function r(){const l={},u=Object.keys(t);for(let c=u.length,d=0;d<c;d++)l[u[d]]={distance:-1,parent:null};return l}function n(l){const u=r(),c=[l];for(u[l].distance=0;c.length;){const d=c.pop(),f=Object.keys(t[d]);for(let p=f.length,g=0;g<p;g++){const b=f[g],y=u[b];y.distance===-1&&(y.distance=u[d].distance+1,y.parent=d,c.unshift(b))}}return u}function o(l,u){return function(c){return u(l(c))}}function a(l,u){const c=[u[l].parent,l];let d=t[u[l].parent][l],f=u[l].parent;for(;u[f].parent;)c.unshift(u[f].parent),d=o(t[u[f].parent][f],d),f=u[f].parent;return d.conversion=c,d}return wa=function(l){const u=n(l),c={},d=Object.keys(u);for(let f=d.length,p=0;p<f;p++){const g=d[p];u[g].parent!==null&&(c[g]=a(g,u))}return c},wa}var ba,ac;function s_(){if(ac)return ba;ac=1;const t=nf(),r=a_(),n={},o=Object.keys(t);function a(u){const c=function(...d){const f=d[0];return f==null?f:(f.length>1&&(d=f),u(d))};return"conversion"in u&&(c.conversion=u.conversion),c}function l(u){const c=function(...d){const f=d[0];if(f==null)return f;f.length>1&&(d=f);const p=u(d);if(typeof p=="object")for(let g=p.length,b=0;b<g;b++)p[b]=Math.round(p[b]);return p};return"conversion"in u&&(c.conversion=u.conversion),c}return o.forEach(u=>{n[u]={},Object.defineProperty(n[u],"channels",{value:t[u].channels}),Object.defineProperty(n[u],"labels",{value:t[u].labels});const c=r(u);Object.keys(c).forEach(f=>{const p=c[f];n[u][f]=l(p),n[u][f].raw=a(p)})}),ba=n,ba}Oi.exports;var sc;function u_(){return sc||(sc=1,(function(t){const r=(p,g)=>(...b)=>`\x1B[${p(...b)+g}m`,n=(p,g)=>(...b)=>{const y=p(...b);return`\x1B[${38+g};5;${y}m`},o=(p,g)=>(...b)=>{const y=p(...b);return`\x1B[${38+g};2;${y[0]};${y[1]};${y[2]}m`},a=p=>p,l=(p,g,b)=>[p,g,b],u=(p,g,b)=>{Object.defineProperty(p,g,{get:()=>{const y=b();return Object.defineProperty(p,g,{value:y,enumerable:!0,configurable:!0}),y},enumerable:!0,configurable:!0})};let c;const d=(p,g,b,y)=>{c===void 0&&(c=s_());const T=y?10:0,M={};for(const[B,D]of Object.entries(c)){const G=B==="ansi16"?"ansi":B;B===g?M[G]=p(b,T):typeof D=="object"&&(M[G]=p(D[g],T))}return M};function f(){const p=new Map,g={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};g.color.gray=g.color.blackBright,g.bgColor.bgGray=g.bgColor.bgBlackBright,g.color.grey=g.color.blackBright,g.bgColor.bgGrey=g.bgColor.bgBlackBright;for(const[b,y]of Object.entries(g)){for(const[T,M]of Object.entries(y))g[T]={open:`\x1B[${M[0]}m`,close:`\x1B[${M[1]}m`},y[T]=g[T],p.set(M[0],M[1]);Object.defineProperty(g,b,{value:y,enumerable:!1})}return Object.defineProperty(g,"codes",{value:p,enumerable:!1}),g.color.close="\x1B[39m",g.bgColor.close="\x1B[49m",u(g.color,"ansi",()=>d(r,"ansi16",a,!1)),u(g.color,"ansi256",()=>d(n,"ansi256",a,!1)),u(g.color,"ansi16m",()=>d(o,"rgb",l,!1)),u(g.bgColor,"ansi",()=>d(r,"ansi16",a,!0)),u(g.bgColor,"ansi256",()=>d(n,"ansi256",a,!0)),u(g.bgColor,"ansi16m",()=>d(o,"rgb",l,!0)),g}Object.defineProperty(t,"exports",{enumerable:!0,get:f})})(Oi)),Oi.exports}var va,uc;function l_(){return uc||(uc=1,va={stdout:!1,stderr:!1}),va}var xa,lc;function c_(){return lc||(lc=1,xa={stringReplaceAll:(n,o,a)=>{let l=n.indexOf(o);if(l===-1)return n;const u=o.length;let c=0,d="";do d+=n.substr(c,l-c)+o+a,c=l+u,l=n.indexOf(o,c);while(l!==-1);return d+=n.substr(c),d},stringEncaseCRLFWithFirstIndex:(n,o,a,l)=>{let u=0,c="";do{const d=n[l-1]==="\r";c+=n.substr(u,(d?l-1:l)-u)+o+(d?`\r
`:`
`)+a,u=l+1,l=n.indexOf(`
`,u)}while(l!==-1);return c+=n.substr(u),c}}),xa}var _a,cc;function f_(){if(cc)return _a;cc=1;const t=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,r=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,n=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,o=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,a=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function l(f){const p=f[0]==="u",g=f[1]==="{";return p&&!g&&f.length===5||f[0]==="x"&&f.length===3?String.fromCharCode(parseInt(f.slice(1),16)):p&&g?String.fromCodePoint(parseInt(f.slice(2,-1),16)):a.get(f)||f}function u(f,p){const g=[],b=p.trim().split(/\s*,\s*/g);let y;for(const T of b){const M=Number(T);if(!Number.isNaN(M))g.push(M);else if(y=T.match(n))g.push(y[2].replace(o,(B,D,G)=>D?l(D):G));else throw new Error(`Invalid Chalk template style argument: ${T} (in style '${f}')`)}return g}function c(f){r.lastIndex=0;const p=[];let g;for(;(g=r.exec(f))!==null;){const b=g[1];if(g[2]){const y=u(b,g[2]);p.push([b].concat(y))}else p.push([b])}return p}function d(f,p){const g={};for(const y of p)for(const T of y.styles)g[T[0]]=y.inverse?null:T.slice(1);let b=f;for(const[y,T]of Object.entries(g))if(Array.isArray(T)){if(!(y in b))throw new Error(`Unknown Chalk style: ${y}`);b=T.length>0?b[y](...T):b[y]}return b}return _a=(f,p)=>{const g=[],b=[];let y=[];if(p.replace(t,(T,M,B,D,G,z)=>{if(M)y.push(l(M));else if(D){const W=y.join("");y=[],b.push(g.length===0?W:d(f,g)(W)),g.push({inverse:B,styles:c(D)})}else if(G){if(g.length===0)throw new Error("Found extraneous } in Chalk template literal");b.push(d(f,g)(y.join(""))),y=[],g.pop()}else y.push(z)}),b.push(y.join("")),g.length>0){const T=`Chalk template literal is missing ${g.length} closing bracket${g.length===1?"":"s"} (\`}\`)`;throw new Error(T)}return b.join("")},_a}var ka,fc;function h_(){if(fc)return ka;fc=1;const t=u_(),{stdout:r,stderr:n}=l_(),{stringReplaceAll:o,stringEncaseCRLFWithFirstIndex:a}=c_(),{isArray:l}=Array,u=["ansi","ansi","ansi256","ansi16m"],c=Object.create(null),d=(W,F={})=>{if(F.level&&!(Number.isInteger(F.level)&&F.level>=0&&F.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const E=r?r.level:0;W.level=F.level===void 0?E:F.level};class f{constructor(F){return p(F)}}const p=W=>{const F={};return d(F,W),F.template=(...E)=>G(F.template,...E),Object.setPrototypeOf(F,g.prototype),Object.setPrototypeOf(F.template,F),F.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},F.template.Instance=f,F.template};function g(W){return p(W)}for(const[W,F]of Object.entries(t))c[W]={get(){const E=M(this,T(F.open,F.close,this._styler),this._isEmpty);return Object.defineProperty(this,W,{value:E}),E}};c.visible={get(){const W=M(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:W}),W}};const b=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(const W of b)c[W]={get(){const{level:F}=this;return function(...E){const U=T(t.color[u[F]][W](...E),t.color.close,this._styler);return M(this,U,this._isEmpty)}}};for(const W of b){const F="bg"+W[0].toUpperCase()+W.slice(1);c[F]={get(){const{level:E}=this;return function(...U){const Q=T(t.bgColor[u[E]][W](...U),t.bgColor.close,this._styler);return M(this,Q,this._isEmpty)}}}}const y=Object.defineProperties(()=>{},{...c,level:{enumerable:!0,get(){return this._generator.level},set(W){this._generator.level=W}}}),T=(W,F,E)=>{let U,Q;return E===void 0?(U=W,Q=F):(U=E.openAll+W,Q=F+E.closeAll),{open:W,close:F,openAll:U,closeAll:Q,parent:E}},M=(W,F,E)=>{const U=(...Q)=>l(Q[0])&&l(Q[0].raw)?B(U,G(U,...Q)):B(U,Q.length===1?""+Q[0]:Q.join(" "));return Object.setPrototypeOf(U,y),U._generator=W,U._styler=F,U._isEmpty=E,U},B=(W,F)=>{if(W.level<=0||!F)return W._isEmpty?"":F;let E=W._styler;if(E===void 0)return F;const{openAll:U,closeAll:Q}=E;if(F.indexOf("\x1B")!==-1)for(;E!==void 0;)F=o(F,E.close,E.open),E=E.parent;const ee=F.indexOf(`
`);return ee!==-1&&(F=a(F,Q,U,ee)),U+F+Q};let D;const G=(W,...F)=>{const[E]=F;if(!l(E)||!l(E.raw))return F.join(" ");const U=F.slice(1),Q=[E.raw[0]];for(let ee=1;ee<E.length;ee++)Q.push(String(U[ee-1]).replace(/[{}\\]/g,"\\$&"),String(E.raw[ee]));return D===void 0&&(D=f_()),D(W,Q.join(""))};Object.defineProperties(g.prototype,c);const z=g();return z.supportsColor=r,z.stderr=g({level:n?n.level:0}),z.stderr.supportsColor=n,ka=z,ka}var d_=h_();const p_=dc(d_);function g_(t,r={}){if(!Array.isArray(t))throw new TypeError("Expected an array");let n=["▁","▂","▃","▄","▅","▆","▇","█"];const o=[[5,5,4],[5,5,3],[5,5,0],[5,4,0],[5,3,0],[5,2,0],[5,1,0],[5,0,0]],a=t.filter(c=>Number.isFinite(c)),l=typeof r.minimum=="number"?r.minimum:typeof r.maximum=="number"?0:Math.min(...a),u=typeof r.maximum=="number"?r.maximum:Math.max(...a);return l===u&&u!==0&&(n=[n[4]]),t.map(c=>{if(!Number.isFinite(c))return" ";let d;return l===u?d=0:d=Math.ceil((c-l)/(u-l)*n.length)-1,d<0&&(d=0),r.style==="fire"?p_.rgb(...o[d])(n[d]):n[d]}).join("")}const Ti=jt(Kt.StatisticsService);class m_{descriptiveStatistics(r,n){const o=r.filter(a=>typeof a=="number"&&!isNaN(a));if(o.length===0)return Ti.warn("No valid numeric values found for descriptive statistics"),null;try{const a=Ra(o,.25),l=Ra(o,.75),u={count:o.length,sum:Xc(o),mean:Jc(o),median:n_(o),mode:Zx(o),min:Zl(o),max:ec(o),range:ec(o)-Zl(o),variance:Zc(o),standardDeviation:Kx(o),q1:a,q3:l,iqr:l-a};if(n?.includeVisualization){const c=n.chartHeight||10,d=this.createSparkline(o),f=this.createLineChart(o,c);u.visualization=`
**Sparkline:** ${d}

**Trend Chart:**
\`\`\`
${f}
\`\`\`
`.trim()}return Ti.dev("Calculated descriptive statistics",{stats:u}),u}catch(a){return Ti.error("Error calculating descriptive statistics",{error:a}),null}}booleanStatistics(r){const n=r.filter(T=>T===!0).length,o=r.filter(T=>T===!1).length,a=r.filter(T=>T===null).length,l=r.length;let u=0,c=0,d=0,f=null,p=0,g=0;for(const T of r)T===!0?(p++,g=0):T===!1&&(g++,p=0),u=Math.max(u,p),c=Math.max(c,g);const b=r[r.length-1];b===!0?(d=p,f="true"):b===!1&&(d=g,f="false");const y={count:l,trueCount:n,falseCount:o,nullCount:a,truePercentage:l>0?n/l*100:0,falsePercentage:l>0?o/l*100:0,longestTrueStreak:u,longestFalseStreak:c,currentStreak:d,currentStreakType:f};return Ti.dev("Calculated boolean statistics",{stats:y}),y}formatDescriptiveStats(r){return`
**Count:** ${r.count}
**Sum:** ${r.sum.toFixed(2)}
**Mean:** ${r.mean.toFixed(2)}
**Median:** ${r.median.toFixed(2)}
**Mode:** ${Array.isArray(r.mode)?r.mode.join(", "):r.mode}
**Min:** ${r.min.toFixed(2)}
**Max:** ${r.max.toFixed(2)}
**Range:** ${r.range.toFixed(2)}
**Std Dev:** ${r.standardDeviation.toFixed(2)}
**Variance:** ${r.variance.toFixed(2)}
**Q1 (25%):** ${r.q1.toFixed(2)}
**Q3 (75%):** ${r.q3.toFixed(2)}
**IQR:** ${r.iqr.toFixed(2)}
`.trim()}formatBooleanStats(r,n){const o=r.currentStreakType==="true"?"✨":"❄️";return`
**${n} Statistics**
- Total tracked: ${r.count} days
- Success rate: ${r.truePercentage.toFixed(1)}% (${r.trueCount}/${r.count})
- Longest streak: ${r.longestTrueStreak} days 🏆
- Current streak: ${o} ${r.currentStreak} days
`.trim()}createLineChart(r,n=10,o){if(r.length===0)return"No data to display";const a={height:n};return o&&(a.width=o),i_.plot(r,a)}createSparkline(r){return r.length===0?"—":g_(r)}createBooleanBarChart(r,n=30){return r.slice(-n).map(l=>l===!0?"✅":l===!1?"❌":"⬜").join("")}createBooleanPieChart(r,n){return`\`\`\`mermaid
pie title ${n}
    "Completed" : ${r.trueCount}
    "Skipped" : ${r.falseCount}
    ${r.nullCount>0?`"Not Tracked" : ${r.nullCount}`:""}
\`\`\``}createBooleanVisualReport(r,n,o={}){const{showSparkline:a=!0,showBarChart:l=!0,showAsciiChart:u=!0,showPieChart:c=!1,dates:d=[]}=o,f=this.booleanStatistics(r),p=r.map(b=>b===!0?1:0);let g=`## 📊 ${n}

`;if(g+=this.formatBooleanStats(f,n)+`

`,a&&(g+=`**Trend:** ${this.createSparkline(p)}

`),l&&(g+=`**Last ${Math.min(r.length,30)} days:**
`,g+=this.createBooleanBarChart(r,30)+`

`,d.length>0)){const b=d[0],y=d[d.length-1];g+=`*From ${b} to ${y}*

`}return u&&p.length>=3&&(g+="**Trend Chart:**\n```\n",g+=this.createLineChart(p,6),g+="\n```\n\n"),c&&(g+=this.createBooleanPieChart(f,`${n} Distribution`)+`

`),g}createNumericVisualReport(r,n,o={}){const{showSparkline:a=!0,showAsciiChart:l=!0,showStats:u=!0}=o,c=this.descriptiveStatistics(r);if(!c)return`## ${n}

No data available`;let d=`## 📈 ${n}

`;return u&&(d+=this.formatDescriptiveStats(c)+`

`),a&&(d+=`**Trend:** ${this.createSparkline(r)}

`),l&&(d+="**Trend Chart:**\n```\n",d+=this.createLineChart(r,10),d+="\n```\n\n"),d}}const Ni=new m_;async function y_(){const t="habitTracking",r=new qe(t),o=je.habits.filter(u=>u.active),a=o.map(u=>u.id);let l=!1;try{const u=await Fr.getInputsLastNReports("almostDailyReport",a,10);if(l=u.length>0,l){r._md("## 📊 Habit Statistics (Last 10 Reports)");for(const c of o){const d=u.filter(f=>f.inputName===c.id);if(d.length>=2){const f=d.map(b=>b.value),p=Ni.booleanStatistics(f),g=Ni.createSparkline(f.map(b=>b===!0?1:0));r._md(`**${c.label}:** ${p.truePercentage.toFixed(0)}% (${p.trueCount}/${p.count}) · ${g} · ${p.currentStreakType==="true"?"✨":"❄️"} ${p.currentStreak} streak`)}}r._divider()}}catch(u){console.error("Failed to fetch habit statistics:",u)}return r._md("## ✅ Today's Habits (📌 CORE - 1 min)"),r._guidance(`**Atomic Habits** — every habit = Cue → Craving → Response → Reward.
**Taoist Wu Wei** — not perfection, but flow. Missed habits are okay—just return gently.
**Power of Habit** — the cue and reward make habits stick, not willpower alone.

**Check when complete:**`),o.forEach(u=>{r._boolean(u.id,u.label),r._md(`*Cue*: ${u.cue} · *Reward*: ${u.reward}`)}),o.length>0?r._md("> **Wisdom** — missing once is an accident. Missing twice is the start of a pattern. Return gently."):r._md("*No active habits configured. Add habits in your config file.*"),r.render()}async function w_(){const t="messageFromYesterday",r=new qe(t),n=await Fr.getInputsLastNReports("almostDailyReport",["message_for_tomorrow","tomorrow_priority"],1),o=n.find(c=>c.inputName==="message_for_tomorrow"),a=n.find(c=>c.inputName==="tomorrow_priority"),l=o&&o.value?.trim().length>0,u=a&&a.value?.trim().length>0;if(!l&&!u)return"";if(r._md("## 📨 Message from Your Past Self (⭐ RECOMMENDED - 30 sec)"),u){const c=a.value;r._md(`### 🎯 Today's Priority (set ${a.reportDate})`),r._md(`> ${c}`)}if(l){const c=o.value;r._md(`### 💌 Message (from ${o.reportDate})`),r._md(`> ${c}`)}return r._guidance("Your past self sent you guidance! Take a moment to reflect on it.","A Gift from Yesterday"),r.render()}function b_(){const t="accomplishmentsAndObstacles",r=new qe(t);return r._md("## 📊 Today's Wins & Lessons (⭐ RECOMMENDED - 3-5 min)"),r._guidance(`**Progress Principle** — tracking wins boosts motivation. Reframing setbacks builds resilience.
**Stoicism** — focus on what you CONTROLLED—your effort, not the outcome. "The obstacle is the way."
**Growth Mindset** — reflecting on WHY you succeeded or failed builds self-awareness.

Celebrate your wins. Learn from your setbacks. Both shape your character.`),r._fancyDivider("Wins & Accomplishments","🏆"),r._md("**Which win am I most proud of today?**"),r._text("proudest_win","","e.g., Finally finished that difficult task"),r._md("**Why did this matter to me?** (Connect to your values)"),r._text("why_it_mattered","","e.g., It showed I can push through resistance"),r._md("**What virtue did I practice today?** (courage, wisdom, justice, self-control)"),r._text("virtue_practiced","","e.g., Self-control: I paused before reacting in anger"),r._fancyDivider("Obstacles & Lessons","🌊"),r._md("**What obstacle or failure did I face today?**"),r._text("obstacle_today","","e.g., Procrastinated for 3 hours, missed deadline"),r._md("**How did I respond?** (With resistance or acceptance?)"),r._text("obstacle_response","","e.g., Got frustrated, then took a break to reset"),r._md("**What can this teach me?** (The hidden opportunity)"),r._text("obstacle_lesson","","e.g., I need better environment design to avoid distractions"),r._md('> **Stoic Reminder**: _"The impediment to action advances action. What stands in the way becomes the way."_ — Marcus Aurelius'),r.render()}function v_(){const t="attentionAndWillpower",r=new qe(t);return r._md("## 🎯 Attention & Willpower Check (💡 OPTIONAL - 3-5 min)"),r._guidance(`**Hyperfocus** — attention is your most valuable resource. Protect it fiercely.
**The Willpower Instinct** — willpower depletes throughout the day and needs recovery (rest, breaks, nature).
**Atomic Habits** — environment shapes behavior more than motivation.

Track patterns. Design better environments. Restore your willpower.`),r._fancyDivider("Attention Reflection","👁️"),r._md("**What distracted me most today?**"),r._text("main_distraction","","e.g., Social media notifications, colleague interruptions"),r._md("**When was I most focused?** (Flow state moments)"),r._text("flow_moments","","e.g., Morning deep work session from 9-11am"),r._md("**What made my focus possible?** (Environment, time, task type)"),r._text("flow_enablers","","e.g., Quiet office, early morning energy, challenging but doable task"),r._fancyDivider("Willpower Reflection","💪"),r._md("**What was my biggest temptation/willpower challenge?**"),r._text("willpower_challenge","","e.g., Urge to check phone during work, skip workout"),r._md("**What time did my willpower feel weakest?** (Morning/afternoon/evening)"),r._text("willpower_time","","e.g., Late afternoon around 4pm"),r._md("**Did I resist or give in?** (No judgment—just awareness)"),r._text("willpower_outcome","","e.g., Gave in after lunch, resisted in the morning"),r._md("**How did I restore my willpower today?** (Rest, breaks, nature, nourishment)"),r._text("willpower_recovery","","e.g., Took a walk outside, ate a healthy snack, got good sleep"),r._md("**Environmental fix** — what can I change tomorrow to make the right choice easier?"),r._text("environment_fix","","e.g., Put phone in another room, lay out workout clothes tonight"),r._md("> **Insight** — you can't control urges, but you can control your environment. Make good choices the easy choices."),r.render()}function x_(){const t="gratitudeAndSavoring",r=new qe(t);return r._md("## 🙏 Gratitude & Savoring (⭐ RECOMMENDED - 3-7 min)"),r._guidance(`**Three Good Things Intervention** — writing WHY things went well is crucial for wellbeing.
**Stoicism** — negative visualization—appreciate what you have by imagining its loss.
**Positive Psychology** — gratitude is one of the strongest wellbeing predictors.

Savor simple pleasures: friendship, beauty, learning, nature. Your role matters.`),r._md("### Three Good Things Today"),r._md("**1. What happened:**"),r._text("gratitude_1_what","","e.g., Had a great conversation with a friend"),r._md("**Why it was good:**"),r._text("gratitude_1_why","","e.g., Felt understood and connected"),r._md("**My role in making it happen:**"),r._text("gratitude_1_role","","e.g., I reached out and asked how they were doing"),r._divider(),r._md("**2. What happened:**"),r._text("gratitude_2_what","","e.g., Enjoyed a beautiful sunset"),r._md("**Why it was good:**"),r._text("gratitude_2_why","","e.g., Felt peaceful and present"),r._md("**My role in making it happen:**"),r._text("gratitude_2_role","","e.g., I paused my work to step outside and notice it"),r._divider(),r._md("**3. What happened:**"),r._text("gratitude_3_what","","e.g., Made progress on a difficult task"),r._md("**Why it was good:**"),r._text("gratitude_3_why","","e.g., Felt capable and proud of my effort"),r._md("**My role in making it happen:**"),r._text("gratitude_3_role","","e.g., I stayed focused and didn't give up"),r._md("> **Practice** — before sleep, briefly imagine losing one thing you're grateful for. Then appreciate that you still have it."),r.render()}function __(){const t="mindfulMoment",r=new qe(t);return r._md("## 🧘 Mindful Moment (💡 OPTIONAL - 2-3 min)"),r._guidance(`**Present Moment Awareness** — The antidote to anxiety

Anxiety lives in the future (what if?). Regret lives in the past (if only...). Peace lives in NOW.

**The Problem** — your mind is NEVER here. You eat lunch while planning dinner. You're with friends while mentally at work. You miss your ENTIRE LIFE because you're always somewhere else.

**The Solution** — train yourself to return to the present moment—over and over.

**What this practice does:**
- **Reduces anxiety** — the present moment is usually fine. Suffering is in your head.
- **Increases joy** — life's beauty exists NOW, not in memory or anticipation
- **Improves focus** — your attention is your most valuable resource
- **Creates calm** — presence is inherently peaceful
- **Builds gratitude** — you notice what you usually miss

**Why it works** (neuroscience):
Your brain has two modes:
- **Default Mode** (wandering mind) — predicts, plans, worries, ruminates = stress
- **Present Mode** (focused attention) — observes, senses, experiences = calm

This practice trains you to shift from Default to Present mode at will.

**How to practice:**
This is NOT about emptying your mind. It's about NOTICING when you were present today, and appreciating that moment.

When you recall being fully present—even for 5 seconds—you're training your brain to recognize and seek presence.`,"Mindfulness Practice"),r._md("### Practice (2 minutes)"),r._md("**Step 1** — ground yourself"),r._md("Close your eyes or soften your gaze. Take three slow, deep breaths. Feel your body in the chair."),r._md("**Step 2** — recall one present moment"),r._md("Remember ONE moment from today when you were fully HERE — no past, no future, just NOW:"),r._md("- Morning coffee warmth on your hands"),r._md("- A genuine laugh with someone"),r._md("- Sunlight on your skin"),r._md("- The taste of your lunch"),r._md("- Wind in your hair"),r._md("- A moment of quiet"),r._md("**Step 3** — explore the memory"),r._md("Hold that memory. Notice the details:"),r._md("- What did you SEE? (Colors, light, movement)"),r._md("- What did you HEAR? (Sounds, silence, rhythm)"),r._md("- What did you FEEL? (Temperature, texture, sensation)"),r._md("- What did you SMELL? TASTE?"),r._md("**Step 4** — appreciate"),r._md("That simple moment—THAT is life. Not achievements or plans. Just being fully alive, right here, right now."),r._boolean("mindful_pause_taken","I have taken a mindful pause",!1),r._md('> _"The present moment is all you ever have."_ — Eckhart Tolle'),r._md('> _"When you wash the dishes, wash the dishes."_ — Thích Nhất Hạnh'),r.render()}function k_(){const t="emotionAwareness",r=new qe(t);return r._md("## 💭 Emotion Awareness (💡 OPTIONAL - 3-5 min)"),r._guidance(`**Emotional Intelligence** — recognizing emotions is the first step to managing them.
**Stoicism** — you can't control feelings arising, but you can control your response.
**Neuroscience** — naming emotions reduces their intensity (affect labeling).

No judgment—just awareness and learning.`),r._md("### Today's Emotional Landscape"),r._md("**What was the strongest emotion I felt today?**"),r._text("strongest_emotion","","e.g., Frustration, joy, anxiety, pride"),r._md("**What triggered it?**"),r._text("emotion_trigger","","e.g., Criticism from colleague, completing a goal"),r._md("**How did I respond?** (What did I do/say?)"),r._text("emotion_response","","e.g., Snapped back, withdrew, celebrated"),r._md("**On reflection, was this in my control or outside my control?**"),r._text("emotion_control_assessment","","e.g., The trigger was outside; my response was in my control"),r._md("**What would my 'wise self' do next time?**"),r._text("emotion_wise_response","","e.g., Pause and breathe before responding, express needs calmly"),r._md(`> **Practice** — when strong emotions arise, pause and label: _"I'm feeling [emotion]."_ This creates space between feeling and reaction.`),r.render()}async function S_(){const t="permaPlus",r=new qe(t),n=je.wellbeingParameters.filter(f=>f.active),o=n.map(f=>f.id);let a=new Map,l=new Map,u=new Map,c={first:"",last:"",reportCount:0};try{const f=await Fr.getInputsLastNReports("almostDailyReport",o,20);if(f.length>0){const p=Array.from(new Set(f.map(g=>g.reportDate||""))).sort();c={first:p[0],last:p[p.length-1],reportCount:p.length}}n.forEach(p=>{const g=f.filter(b=>b.inputName===p.id).map(b=>{const y=Array.isArray(b.value)?b.value[0]:b.value;return typeof y=="string"?parseFloat(y):y}).filter(b=>!isNaN(b));if(a.set(p.id,g),g.length>0){const b=g.slice(-5),y=b.reduce((M,B)=>M+B,0)/b.length;l.set(p.id,y);const T=g.reduce((M,B)=>M+B,0)/g.length;u.set(p.id,T)}})}catch(f){console.error("Failed to fetch PERMA historical data:",f)}r._md("## 💚 PERMA+4 Wellbeing Check (📌 CORE - 1-2 min)"),r._guidance(`**PERMA+4 Model**: Extended wellbeing framework with 9 dimensions (Positive Emotions, Engagement, Relationships, Meaning, Accomplishment, Physical Condition, Mindset, Environment, Economic Security).
Rate honestly—awareness is the first step to change.

**Rate each dimension** (3 = Great, 2 = Adequate, 1 = Struggling):`);const d=[{label:"3 - Great",value:"3"},{label:"2 - Adequate",value:"2"},{label:"1 - Struggling",value:"1"}];if(n.forEach(f=>{const p=l.get(f.id),g=p!==void 0?` (last 5 reports: ${p.toFixed(1)})`:"";r._md(`### ${f.label}${g}`),r._md(`*${f.info}*`),r._multiCheckboxSC(f.id,d,void 0,!1)}),a.size>0&&Array.from(a.values()).some(f=>f.length>=3)){r._themedDivider("Wellbeing Trends","📊");const f=[];if(a.forEach(p=>{f.push(...p)}),f.length>0){const p=f.reduce((y,T)=>y+T,0)/f.length,g=Ni.createSparkline(Array.from(a.values())[0]);r._md(`**Overall Wellbeing (last ${c.reportCount} reports): ${p.toFixed(1)}/3.0** ${g}`),c.first&&c.last&&r._md(`*Data from ${c.first} to ${c.last}*`);const b=n.map(y=>({param:y,avg:u.get(y.id)||0,dataPoints:a.get(y.id)?.length||0})).filter(y=>y.dataPoints>=3).sort((y,T)=>y.avg-T.avg);if(b.length>0){const y=b[0],T=b[b.length-1];r._md("**Insights:**"),y.avg<2&&r._md(`- ⚠️ **Needs attention**: ${y.param.label} (avg: ${y.avg.toFixed(1)}) — Consider prioritizing this area`),T.avg>=2.5&&r._md(`- ✨ **Strength area**: ${T.param.label} (avg: ${T.avg.toFixed(1)}) — Keep up the good work!`),r._md(`**Trends (last ${c.reportCount} reports):**`),n.forEach(M=>{const B=a.get(M.id);if(B&&B.length>=3){const D=u.get(M.id)||0,G=Ni.createSparkline(B),z=B.length>=2?B[B.length-1]>B[B.length-2]?"↗":B[B.length-1]<B[B.length-2]?"↘":"→":"→";r._md(`- ${M.label}: ${D.toFixed(1)} ${G} ${z}`)}})}}}return r._divider(),r._md("**Quick Reflection**: Which area needs attention tomorrow?"),r._text("perma_focus_tomorrow","","e.g., Relationships, Physical Wellbeing..."),r.render()}function C_(){const t="eveningReflection",r=new qe(t);return r._md("## 🌙 Evening Reflection (⭐ RECOMMENDED - 2-3 min)"),r._guidance(`**The Stoic Evening Review** — Ancient wisdom for modern peace

The Stoics ended each day with self-examination. Not to judge themselves harshly, but to **learn, release, and sleep peacefully**.

**The Problem** — most people replay their day with regret or worry. They obsess over what they said, what went wrong, what others think. They carry the whole day into their sleep—and wake up still carrying it.

**The Stoic Solution** — examine your day through the lens of CONTROL. Did you do your best with what you COULD control? If yes—peace. If no—learn and release.

**What this practice does:**
- **Ends the day cleanly** — nothing carried into tomorrow that doesn't belong
- **Promotes learning** — every day becomes data for improvement
- **Reduces rumination** — you examined it once, mindfully. No need to replay endlessly.
- **Cultivates self-compassion** — you did your best with what you knew and what you could control
- **Improves sleep** — a peaceful mind sleeps deeply

**The Daily Question** (from Marcus Aurelius):
Not "Was I perfect?" but "Did I show up with virtue?"

**How to practice:**
Take 2 minutes. Review your day through the Dichotomy of Control:
- What was IN your control? (Your actions, responses, effort, character)
- What was NOT in your control? (Outcomes, other people, circumstances)
- Did you do your best with what you COULD control?

Then: learn if needed. Release what wasn't yours. Sleep in peace.`,"Stoic Review"),r._md("**The Stoic Evening Question:**"),r._md("_Did I do my best with what was in my control today?_"),r._multiCheckboxSC("stoic_evening_reflection",[{label:"Yes - I showed up with virtue",value:"virtue"},{label:"No - But I learned something valuable",value:"learned"},{label:"Partially - Progress, not perfection",value:"progress"}],void 0,!1),r._md("**What's one thing I'm better at today than yesterday?**"),r._text("daily_improvement","","Even 1% improvement compounds. e.g., More patient, better listener, clearer thinking"),r._md('> _"When you lie down, review your day. What did I do well? What could I improve? What did I leave undone?"_ — Epictetus'),r._md('> _"I release what I cannot control. I am grateful for this day."_'),r.render()}function I_(){const t="sleepPreparation",r=new qe(t);return r._md("## 💤 Sleep Preparation (💡 OPTIONAL - 2-3 min)"),r._guidance(`**Atomic Habits**: Make tomorrow's good habits obvious and easy tonight.
**Sleep Science**: Evening routine signals the brain to prepare for rest.

Set yourself up for success tomorrow. Prepare your environment tonight.`,"Tomorrow's Setup"),r._md("### Make Tomorrow Easy"),r._md("**What can I prepare tonight to make tomorrow easier?**"),r._md("_Examples: Lay out workout clothes, prep lunch, charge devices, set out book_"),r._text("tomorrow_prep_action","","e.g., Lay out gym clothes, prepare breakfast ingredients"),r._boolean("tomorrow_prep_done","I have prepared something for tomorrow",!1),r._md("### Sleep Environment"),r._boolean("sleep_environment_ready","I have prepared my sleep environment (devices away, room cool/dark)",!1),r._md('> _"Tomorrow is a new opportunity to live with wisdom, courage, and kindness."_'),r.render()}function E_(){const t="messageForTomorrow",r=new qe(t);return r._md("## 💌 Message & Intention for Tomorrow (� CORE - 2 min)"),r._guidance(`Set yourself up for success tomorrow with clarity and encouragement.

**Tomorrow's Priority**: What's the ONE thing that matters most? When and where will you do it?
**Message to Future Self**: A reminder, encouragement, or lesson you don't want to forget.

Keep it short and meaningful. Your future self will thank you. �`),r._md("**Tomorrow's #1 Priority**"),r._text("tomorrow_priority"),r._md("**Message for Tomorrow**"),r._richText("message_for_tomorrow"),r.render()}async function T_(){const t=[];t.push(await Hx()),t.push("---"),t.push("# 🌅 MORNING: Set the Day"),t.push("*Win the morning, win the day. Start with intention and clarity.*"),t.push("---");const r=await w_();r&&t.push(r),t.push(Ux()),t.push(Yx()),t.push(Gx()),t.push(Vx()),t.push(Qx()),t.push("---"),t.push("# 📋 DAILY HABITS"),t.push("*Small actions, repeated daily, create remarkable results.*"),t.push("---"),t.push(await y_()),t.push("---"),t.push("# 🌙 EVENING: Reflect & Close the Day"),t.push("*Review your day with honesty and gratitude. Learn, grow, prepare.*"),t.push("---"),t.push(b_()),t.push(v_()),t.push(x_()),t.push(__()),t.push(k_()),t.push(await S_()),t.push(C_()),t.push(I_()),t.push(E_()),Mr.write({type:"almostDailyReport",data:t.join(`

`)})}const Et=jt(Kt.FileService);async function A_(){try{const t=`${Ri(new Date,"dd.MM.yyyy")}.md`,r=await P_();Et.dev("Input collection and empty report cleanup completed");const n=xe.workspace.getLeavesOfType("markdown"),o=[];for(const u of n){const d=u.view.file;d&&(o.push(d.path),d.path.endsWith(t)&&(Et.dev("Closing today's note: "+d.path),await u.detach()))}Et.dev("Currently open files: "+o.join(", "));const a=`${je.projectDir}/${je.coreDir}`,l=xe.vault.getAbstractFileByPath(a);if(l&&"children"in l){const u=/^\d{2}\.\d{2}\.\d{4}\.md$/;for(const c of l.children)"extension"in c&&c.extension==="md"&&u.test(c.name)&&c.name!==t&&(Et.dev("Deleting old app-triggering note: "+c.path),await xe.vault.delete(c))}if(r)for(const[u,c]of Object.entries(r))c&&c.length>0&&(await Fr.upsertReportInputs(u,c),Et.info(`Saved ${c.length} inputs for ${u} to database`));await T_(),Et.info("Daily report built successfully")}catch(t){Et.error("Failed to run onStart:",t)}}async function P_(){try{Et.dev("Checking for empty reports from yesterday...");const t=await Nv.collectFromYesterday();for(const[r,n]of Object.entries(t)){if(!n||n.length===0){Et.dev(`No inputs found for report: ${r}`);continue}if(n.every(a=>!!(a.value===null||a.value===void 0||typeof a.value=="string"&&a.value.trim()===""||Array.isArray(a.value)&&a.value.length===0||typeof a.value=="boolean"&&a.value===!1||typeof a.value=="number"&&a.value===0))){const a=Mr.reportFolders[r],l=await Mr._listFiles(a);if(l.length>0){const u=l.sort().reverse()[0],c=n[0];if(c&&u.includes(c.reportDate.replace(/-/g,""))&&u.includes(c.reportNumber)){const d=`${a}/${u}`,f=xe.vault.getAbstractFileByPath(d);f&&"extension"in f&&(Et.info(`Deleting empty report: ${u}`),await xe.vault.delete(f))}}}else Et.dev(`Report ${r} has content - keeping it`)}return t}catch(t){return Et.error("Failed to delete empty reports:",t),{}}}const Ai=jt(Kt.FileService);async function M_(t,r){Ai.info("runPowerJournal started");const n=await G0(r);W0(t,n),Ai.dev("Globals set, config loaded");try{await A_(),Ai.info("Power Journal workflow completed successfully")}catch(o){Ai.error("Error in Power Journal workflow",{error:o})}}module.exports=M_;
