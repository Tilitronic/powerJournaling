"use strict";const Vt={ComponentBuilder:"ComponentBuilder",SavingService:"SavingService",TagsService:"TagsService",InputCreator:"InputCreator",FileService:"FileService",OnStart:"OnStart",InputCollector:"InputCollector",ValueExtractor:"ValueExtractor",DbService:"DbService",StatisticsService:"StatisticsService"},fy={[Vt.ComponentBuilder]:{dev:!1,info:!0,warn:!0,error:!0},[Vt.SavingService]:{dev:!0,info:!0,warn:!0,error:!0},[Vt.TagsService]:{dev:!1,info:!0,warn:!0,error:!0},[Vt.InputCreator]:{dev:!1,info:!0,warn:!0,error:!0},[Vt.FileService]:{dev:!0,info:!0,warn:!0,error:!0},[Vt.OnStart]:{dev:!0,info:!0,warn:!0,error:!0},[Vt.InputCollector]:{dev:!0,info:!0,warn:!0,error:!0},[Vt.ValueExtractor]:{dev:!0,info:!0,warn:!0,error:!0},[Vt.DbService]:{dev:!0,info:!0,warn:!0,error:!0},[Vt.StatisticsService]:{dev:!0,info:!0,warn:!0,error:!0}},Jn={reset:"\x1B[0m",bold:"\x1B[1m",gray:"\x1B[90m",purple:"\x1B[35m"},hy={dev:"\x1B[44m\x1B[37m",info:"\x1B[42m\x1B[30m",warn:"\x1B[43m\x1B[30m",error:"\x1B[41m\x1B[37m"},dy={dev:"🛠",info:"ℹ️",warn:"⚠️",error:"❌"},ya={},zl=["\x1B[36m","\x1B[33m","\x1B[32m","\x1B[34m","\x1B[31m","\x1B[95m","\x1B[96m","\x1B[92m","\x1B[93m"];let ql=0;function py(r){return ya[r]||(ya[r]=zl[ql%zl.length],ql++),ya[r]}class Za{constructor(t,n){this.logs=[],this.serviceConfig={},this.getConfig=t,this.prefix=n??"global"}setServiceConfig(t){this.serviceConfig=t}addLog(t,n,o){const a={timestamp:new Date,level:t,service:this.prefix,message:n,meta:o};if(this.logs.push(a),!((this.serviceConfig[this.prefix]??{})[t]??!0))return;const c=a.timestamp.toISOString().split("T")[1].split(".")[0],f=`${Jn.gray}${c}${Jn.reset}`,h=`${Jn.purple}[PJ]${Jn.reset}`,g=`${py(this.prefix)}${Jn.bold}[${this.prefix}]${Jn.reset}`,p=`${hy[t]}[${dy[t]} ${t.toUpperCase().padEnd(5)}]${Jn.reset}`,b=`${f} ${h}${g}${p} ${n}`;try{t==="warn"?console.warn(b,o??""):t==="error"?console.error(b,o??""):console.log(b,o??"")}catch{console.log(`${f} ${h}[${this.prefix}][${t.toUpperCase()}] ${n}`,o??"")}}dev(t,n){this.addLog("dev",t,n)}info(t,n){this.addLog("info",t,n)}warn(t,n){this.addLog("warn",t,n)}error(t,n){this.addLog("error",t,n)}getAllLogs(){return this.logs}withPrefix(t){const n=new Za(this.getConfig,t);return n.setServiceConfig(this.serviceConfig),n}}let Tt;function gy(r,t){Tt=t}const Rc=new Za(()=>Tt);Rc.setServiceConfig(fy);function sn(r){return Rc.withPrefix(r)}const un=Vt,Ie=app;var Wi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lc(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var zr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var my=zr.exports,Hl;function yy(){return Hl||(Hl=1,(function(r,t){(function(){var n,o="4.17.21",a=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",h=500,g="__lodash_placeholder__",p=1,b=2,y=4,C=1,P=2,F=1,A=2,N=4,z=8,W=16,O=32,E=64,U=128,V=256,ee=512,de=30,X="...",Q=800,be=16,Ae=1,fe=2,Ge=3,Te=1/0,qe=9007199254740991,Wt=17976931348623157e292,_=NaN,Fe=4294967295,zt=Fe-1,I=Fe>>>1,yt=[["ary",U],["bind",F],["bindKey",A],["curry",z],["curryRight",W],["flip",ee],["partial",O],["partialRight",E],["rearg",V]],at="[object Arguments]",Re="[object Array]",Wn="[object AsyncFunction]",st="[object Boolean]",Et="[object Date]",_n="[object DOMException]",ln="[object Error]",tr="[object Function]",Vr="[object GeneratorFunction]",wt="[object Map]",kn="[object Number]",Xr="[object Null]",Pt="[object Object]",jr="[object Promise]",Kr="[object Proxy]",In="[object RegExp]",bt="[object Set]",zn="[object String]",nr="[object Symbol]",ro="[object Undefined]",qn="[object WeakMap]",R="[object WeakSet]",q="[object ArrayBuffer]",K="[object DataView]",ae="[object Float32Array]",ge="[object Float64Array]",nt="[object Int8Array]",qt="[object Int16Array]",xt="[object Int32Array]",cn="[object Uint8Array]",fn="[object Uint8ClampedArray]",Xe="[object Uint16Array]",jt="[object Uint32Array]",Ht=/\b__p \+= '';/g,Df=/\b(__p \+=) '' \+/g,Ff=/(__e\(.*?\)|\b__t\)) \+\n'';/g,hs=/&(?:amp|lt|gt|quot|#39);/g,ds=/[&<>"']/g,Rf=RegExp(hs.source),Lf=RegExp(ds.source),$f=/<%-([\s\S]+?)%>/g,Bf=/<%([\s\S]+?)%>/g,ps=/<%=([\s\S]+?)%>/g,Nf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wf=/^\w*$/,zf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,io=/[\\^$.*+?()[\]{}|]/g,qf=RegExp(io.source),oo=/^\s+/,Hf=/\s/,Yf=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Uf=/\{\n\/\* \[wrapped with (.+)\] \*/,Gf=/,? & /,Qf=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Vf=/[()=,{}\[\]\/\s]/,Xf=/\\(\\)?/g,jf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,gs=/\w*$/,Kf=/^[-+]0x[0-9a-f]+$/i,Jf=/^0b[01]+$/i,Zf=/^\[object .+?Constructor\]$/,eh=/^0o[0-7]+$/i,th=/^(?:0|[1-9]\d*)$/,nh=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Jr=/($^)/,rh=/['\n\r\u2028\u2029\\]/g,Zr="\\ud800-\\udfff",ih="\\u0300-\\u036f",oh="\\ufe20-\\ufe2f",ah="\\u20d0-\\u20ff",ms=ih+oh+ah,ys="\\u2700-\\u27bf",ws="a-z\\xdf-\\xf6\\xf8-\\xff",sh="\\xac\\xb1\\xd7\\xf7",uh="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",lh="\\u2000-\\u206f",ch=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",bs="A-Z\\xc0-\\xd6\\xd8-\\xde",xs="\\ufe0e\\ufe0f",vs=sh+uh+lh+ch,ao="['’]",fh="["+Zr+"]",_s="["+vs+"]",ei="["+ms+"]",ks="\\d+",hh="["+ys+"]",Is="["+ws+"]",Ss="[^"+Zr+vs+ks+ys+ws+bs+"]",so="\\ud83c[\\udffb-\\udfff]",dh="(?:"+ei+"|"+so+")",Cs="[^"+Zr+"]",uo="(?:\\ud83c[\\udde6-\\uddff]){2}",lo="[\\ud800-\\udbff][\\udc00-\\udfff]",rr="["+bs+"]",Ts="\\u200d",Es="(?:"+Is+"|"+Ss+")",ph="(?:"+rr+"|"+Ss+")",Ps="(?:"+ao+"(?:d|ll|m|re|s|t|ve))?",As="(?:"+ao+"(?:D|LL|M|RE|S|T|VE))?",Ms=dh+"?",Os="["+xs+"]?",gh="(?:"+Ts+"(?:"+[Cs,uo,lo].join("|")+")"+Os+Ms+")*",mh="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",yh="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ds=Os+Ms+gh,wh="(?:"+[hh,uo,lo].join("|")+")"+Ds,bh="(?:"+[Cs+ei+"?",ei,uo,lo,fh].join("|")+")",xh=RegExp(ao,"g"),vh=RegExp(ei,"g"),co=RegExp(so+"(?="+so+")|"+bh+Ds,"g"),_h=RegExp([rr+"?"+Is+"+"+Ps+"(?="+[_s,rr,"$"].join("|")+")",ph+"+"+As+"(?="+[_s,rr+Es,"$"].join("|")+")",rr+"?"+Es+"+"+Ps,rr+"+"+As,yh,mh,ks,wh].join("|"),"g"),kh=RegExp("["+Ts+Zr+ms+xs+"]"),Ih=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Sh=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ch=-1,Ee={};Ee[ae]=Ee[ge]=Ee[nt]=Ee[qt]=Ee[xt]=Ee[cn]=Ee[fn]=Ee[Xe]=Ee[jt]=!0,Ee[at]=Ee[Re]=Ee[q]=Ee[st]=Ee[K]=Ee[Et]=Ee[ln]=Ee[tr]=Ee[wt]=Ee[kn]=Ee[Pt]=Ee[In]=Ee[bt]=Ee[zn]=Ee[qn]=!1;var Se={};Se[at]=Se[Re]=Se[q]=Se[K]=Se[st]=Se[Et]=Se[ae]=Se[ge]=Se[nt]=Se[qt]=Se[xt]=Se[wt]=Se[kn]=Se[Pt]=Se[In]=Se[bt]=Se[zn]=Se[nr]=Se[cn]=Se[fn]=Se[Xe]=Se[jt]=!0,Se[ln]=Se[tr]=Se[qn]=!1;var Th={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Eh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ph={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ah={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Mh=parseFloat,Oh=parseInt,Fs=typeof Wi=="object"&&Wi&&Wi.Object===Object&&Wi,Dh=typeof self=="object"&&self&&self.Object===Object&&self,je=Fs||Dh||Function("return this")(),fo=t&&!t.nodeType&&t,Hn=fo&&!0&&r&&!r.nodeType&&r,Rs=Hn&&Hn.exports===fo,ho=Rs&&Fs.process,At=(function(){try{var S=Hn&&Hn.require&&Hn.require("util").types;return S||ho&&ho.binding&&ho.binding("util")}catch{}})(),Ls=At&&At.isArrayBuffer,$s=At&&At.isDate,Bs=At&&At.isMap,Ns=At&&At.isRegExp,Ws=At&&At.isSet,zs=At&&At.isTypedArray;function vt(S,D,M){switch(M.length){case 0:return S.call(D);case 1:return S.call(D,M[0]);case 2:return S.call(D,M[0],M[1]);case 3:return S.call(D,M[0],M[1],M[2])}return S.apply(D,M)}function Fh(S,D,M,Y){for(var ne=-1,me=S==null?0:S.length;++ne<me;){var He=S[ne];D(Y,He,M(He),S)}return Y}function Mt(S,D){for(var M=-1,Y=S==null?0:S.length;++M<Y&&D(S[M],M,S)!==!1;);return S}function Rh(S,D){for(var M=S==null?0:S.length;M--&&D(S[M],M,S)!==!1;);return S}function qs(S,D){for(var M=-1,Y=S==null?0:S.length;++M<Y;)if(!D(S[M],M,S))return!1;return!0}function Sn(S,D){for(var M=-1,Y=S==null?0:S.length,ne=0,me=[];++M<Y;){var He=S[M];D(He,M,S)&&(me[ne++]=He)}return me}function ti(S,D){var M=S==null?0:S.length;return!!M&&ir(S,D,0)>-1}function po(S,D,M){for(var Y=-1,ne=S==null?0:S.length;++Y<ne;)if(M(D,S[Y]))return!0;return!1}function Pe(S,D){for(var M=-1,Y=S==null?0:S.length,ne=Array(Y);++M<Y;)ne[M]=D(S[M],M,S);return ne}function Cn(S,D){for(var M=-1,Y=D.length,ne=S.length;++M<Y;)S[ne+M]=D[M];return S}function go(S,D,M,Y){var ne=-1,me=S==null?0:S.length;for(Y&&me&&(M=S[++ne]);++ne<me;)M=D(M,S[ne],ne,S);return M}function Lh(S,D,M,Y){var ne=S==null?0:S.length;for(Y&&ne&&(M=S[--ne]);ne--;)M=D(M,S[ne],ne,S);return M}function mo(S,D){for(var M=-1,Y=S==null?0:S.length;++M<Y;)if(D(S[M],M,S))return!0;return!1}var $h=yo("length");function Bh(S){return S.split("")}function Nh(S){return S.match(Qf)||[]}function Hs(S,D,M){var Y;return M(S,function(ne,me,He){if(D(ne,me,He))return Y=me,!1}),Y}function ni(S,D,M,Y){for(var ne=S.length,me=M+(Y?1:-1);Y?me--:++me<ne;)if(D(S[me],me,S))return me;return-1}function ir(S,D,M){return D===D?Kh(S,D,M):ni(S,Ys,M)}function Wh(S,D,M,Y){for(var ne=M-1,me=S.length;++ne<me;)if(Y(S[ne],D))return ne;return-1}function Ys(S){return S!==S}function Us(S,D){var M=S==null?0:S.length;return M?bo(S,D)/M:_}function yo(S){return function(D){return D==null?n:D[S]}}function wo(S){return function(D){return S==null?n:S[D]}}function Gs(S,D,M,Y,ne){return ne(S,function(me,He,ke){M=Y?(Y=!1,me):D(M,me,He,ke)}),M}function zh(S,D){var M=S.length;for(S.sort(D);M--;)S[M]=S[M].value;return S}function bo(S,D){for(var M,Y=-1,ne=S.length;++Y<ne;){var me=D(S[Y]);me!==n&&(M=M===n?me:M+me)}return M}function xo(S,D){for(var M=-1,Y=Array(S);++M<S;)Y[M]=D(M);return Y}function qh(S,D){return Pe(D,function(M){return[M,S[M]]})}function Qs(S){return S&&S.slice(0,Ks(S)+1).replace(oo,"")}function _t(S){return function(D){return S(D)}}function vo(S,D){return Pe(D,function(M){return S[M]})}function _r(S,D){return S.has(D)}function Vs(S,D){for(var M=-1,Y=S.length;++M<Y&&ir(D,S[M],0)>-1;);return M}function Xs(S,D){for(var M=S.length;M--&&ir(D,S[M],0)>-1;);return M}function Hh(S,D){for(var M=S.length,Y=0;M--;)S[M]===D&&++Y;return Y}var Yh=wo(Th),Uh=wo(Eh);function Gh(S){return"\\"+Ah[S]}function Qh(S,D){return S==null?n:S[D]}function or(S){return kh.test(S)}function Vh(S){return Ih.test(S)}function Xh(S){for(var D,M=[];!(D=S.next()).done;)M.push(D.value);return M}function _o(S){var D=-1,M=Array(S.size);return S.forEach(function(Y,ne){M[++D]=[ne,Y]}),M}function js(S,D){return function(M){return S(D(M))}}function Tn(S,D){for(var M=-1,Y=S.length,ne=0,me=[];++M<Y;){var He=S[M];(He===D||He===g)&&(S[M]=g,me[ne++]=M)}return me}function ri(S){var D=-1,M=Array(S.size);return S.forEach(function(Y){M[++D]=Y}),M}function jh(S){var D=-1,M=Array(S.size);return S.forEach(function(Y){M[++D]=[Y,Y]}),M}function Kh(S,D,M){for(var Y=M-1,ne=S.length;++Y<ne;)if(S[Y]===D)return Y;return-1}function Jh(S,D,M){for(var Y=M+1;Y--;)if(S[Y]===D)return Y;return Y}function ar(S){return or(S)?ed(S):$h(S)}function Yt(S){return or(S)?td(S):Bh(S)}function Ks(S){for(var D=S.length;D--&&Hf.test(S.charAt(D)););return D}var Zh=wo(Ph);function ed(S){for(var D=co.lastIndex=0;co.test(S);)++D;return D}function td(S){return S.match(co)||[]}function nd(S){return S.match(_h)||[]}var rd=(function S(D){D=D==null?je:sr.defaults(je.Object(),D,sr.pick(je,Sh));var M=D.Array,Y=D.Date,ne=D.Error,me=D.Function,He=D.Math,ke=D.Object,ko=D.RegExp,id=D.String,Ot=D.TypeError,ii=M.prototype,od=me.prototype,ur=ke.prototype,oi=D["__core-js_shared__"],ai=od.toString,ve=ur.hasOwnProperty,ad=0,Js=(function(){var e=/[^.]+$/.exec(oi&&oi.keys&&oi.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})(),si=ur.toString,sd=ai.call(ke),ud=je._,ld=ko("^"+ai.call(ve).replace(io,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ui=Rs?D.Buffer:n,En=D.Symbol,li=D.Uint8Array,Zs=ui?ui.allocUnsafe:n,ci=js(ke.getPrototypeOf,ke),eu=ke.create,tu=ur.propertyIsEnumerable,fi=ii.splice,nu=En?En.isConcatSpreadable:n,kr=En?En.iterator:n,Yn=En?En.toStringTag:n,hi=(function(){try{var e=Xn(ke,"defineProperty");return e({},"",{}),e}catch{}})(),cd=D.clearTimeout!==je.clearTimeout&&D.clearTimeout,fd=Y&&Y.now!==je.Date.now&&Y.now,hd=D.setTimeout!==je.setTimeout&&D.setTimeout,di=He.ceil,pi=He.floor,Io=ke.getOwnPropertySymbols,dd=ui?ui.isBuffer:n,ru=D.isFinite,pd=ii.join,gd=js(ke.keys,ke),Ye=He.max,Ze=He.min,md=Y.now,yd=D.parseInt,iu=He.random,wd=ii.reverse,So=Xn(D,"DataView"),Ir=Xn(D,"Map"),Co=Xn(D,"Promise"),lr=Xn(D,"Set"),Sr=Xn(D,"WeakMap"),Cr=Xn(ke,"create"),gi=Sr&&new Sr,cr={},bd=jn(So),xd=jn(Ir),vd=jn(Co),_d=jn(lr),kd=jn(Sr),mi=En?En.prototype:n,Tr=mi?mi.valueOf:n,ou=mi?mi.toString:n;function w(e){if(Le(e)&&!re(e)&&!(e instanceof ce)){if(e instanceof Dt)return e;if(ve.call(e,"__wrapped__"))return al(e)}return new Dt(e)}var fr=(function(){function e(){}return function(i){if(!Me(i))return{};if(eu)return eu(i);e.prototype=i;var s=new e;return e.prototype=n,s}})();function yi(){}function Dt(e,i){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=n}w.templateSettings={escape:$f,evaluate:Bf,interpolate:ps,variable:"",imports:{_:w}},w.prototype=yi.prototype,w.prototype.constructor=w,Dt.prototype=fr(yi.prototype),Dt.prototype.constructor=Dt;function ce(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Fe,this.__views__=[]}function Id(){var e=new ce(this.__wrapped__);return e.__actions__=ut(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ut(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ut(this.__views__),e}function Sd(){if(this.__filtered__){var e=new ce(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Cd(){var e=this.__wrapped__.value(),i=this.__dir__,s=re(e),d=i<0,m=s?e.length:0,x=Bp(0,m,this.__views__),v=x.start,k=x.end,T=k-v,L=d?k:v-1,$=this.__iteratees__,B=$.length,H=0,G=Ze(T,this.__takeCount__);if(!s||!d&&m==T&&G==T)return Pu(e,this.__actions__);var J=[];e:for(;T--&&H<G;){L+=i;for(var oe=-1,Z=e[L];++oe<B;){var le=$[oe],he=le.iteratee,St=le.type,ot=he(Z);if(St==fe)Z=ot;else if(!ot){if(St==Ae)continue e;break e}}J[H++]=Z}return J}ce.prototype=fr(yi.prototype),ce.prototype.constructor=ce;function Un(e){var i=-1,s=e==null?0:e.length;for(this.clear();++i<s;){var d=e[i];this.set(d[0],d[1])}}function Td(){this.__data__=Cr?Cr(null):{},this.size=0}function Ed(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}function Pd(e){var i=this.__data__;if(Cr){var s=i[e];return s===f?n:s}return ve.call(i,e)?i[e]:n}function Ad(e){var i=this.__data__;return Cr?i[e]!==n:ve.call(i,e)}function Md(e,i){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=Cr&&i===n?f:i,this}Un.prototype.clear=Td,Un.prototype.delete=Ed,Un.prototype.get=Pd,Un.prototype.has=Ad,Un.prototype.set=Md;function hn(e){var i=-1,s=e==null?0:e.length;for(this.clear();++i<s;){var d=e[i];this.set(d[0],d[1])}}function Od(){this.__data__=[],this.size=0}function Dd(e){var i=this.__data__,s=wi(i,e);if(s<0)return!1;var d=i.length-1;return s==d?i.pop():fi.call(i,s,1),--this.size,!0}function Fd(e){var i=this.__data__,s=wi(i,e);return s<0?n:i[s][1]}function Rd(e){return wi(this.__data__,e)>-1}function Ld(e,i){var s=this.__data__,d=wi(s,e);return d<0?(++this.size,s.push([e,i])):s[d][1]=i,this}hn.prototype.clear=Od,hn.prototype.delete=Dd,hn.prototype.get=Fd,hn.prototype.has=Rd,hn.prototype.set=Ld;function dn(e){var i=-1,s=e==null?0:e.length;for(this.clear();++i<s;){var d=e[i];this.set(d[0],d[1])}}function $d(){this.size=0,this.__data__={hash:new Un,map:new(Ir||hn),string:new Un}}function Bd(e){var i=Ai(this,e).delete(e);return this.size-=i?1:0,i}function Nd(e){return Ai(this,e).get(e)}function Wd(e){return Ai(this,e).has(e)}function zd(e,i){var s=Ai(this,e),d=s.size;return s.set(e,i),this.size+=s.size==d?0:1,this}dn.prototype.clear=$d,dn.prototype.delete=Bd,dn.prototype.get=Nd,dn.prototype.has=Wd,dn.prototype.set=zd;function Gn(e){var i=-1,s=e==null?0:e.length;for(this.__data__=new dn;++i<s;)this.add(e[i])}function qd(e){return this.__data__.set(e,f),this}function Hd(e){return this.__data__.has(e)}Gn.prototype.add=Gn.prototype.push=qd,Gn.prototype.has=Hd;function Ut(e){var i=this.__data__=new hn(e);this.size=i.size}function Yd(){this.__data__=new hn,this.size=0}function Ud(e){var i=this.__data__,s=i.delete(e);return this.size=i.size,s}function Gd(e){return this.__data__.get(e)}function Qd(e){return this.__data__.has(e)}function Vd(e,i){var s=this.__data__;if(s instanceof hn){var d=s.__data__;if(!Ir||d.length<a-1)return d.push([e,i]),this.size=++s.size,this;s=this.__data__=new dn(d)}return s.set(e,i),this.size=s.size,this}Ut.prototype.clear=Yd,Ut.prototype.delete=Ud,Ut.prototype.get=Gd,Ut.prototype.has=Qd,Ut.prototype.set=Vd;function au(e,i){var s=re(e),d=!s&&Kn(e),m=!s&&!d&&Dn(e),x=!s&&!d&&!m&&gr(e),v=s||d||m||x,k=v?xo(e.length,id):[],T=k.length;for(var L in e)(i||ve.call(e,L))&&!(v&&(L=="length"||m&&(L=="offset"||L=="parent")||x&&(L=="buffer"||L=="byteLength"||L=="byteOffset")||yn(L,T)))&&k.push(L);return k}function su(e){var i=e.length;return i?e[$o(0,i-1)]:n}function Xd(e,i){return Mi(ut(e),Qn(i,0,e.length))}function jd(e){return Mi(ut(e))}function To(e,i,s){(s!==n&&!Gt(e[i],s)||s===n&&!(i in e))&&pn(e,i,s)}function Er(e,i,s){var d=e[i];(!(ve.call(e,i)&&Gt(d,s))||s===n&&!(i in e))&&pn(e,i,s)}function wi(e,i){for(var s=e.length;s--;)if(Gt(e[s][0],i))return s;return-1}function Kd(e,i,s,d){return Pn(e,function(m,x,v){i(d,m,s(m),v)}),d}function uu(e,i){return e&&Jt(i,Qe(i),e)}function Jd(e,i){return e&&Jt(i,ct(i),e)}function pn(e,i,s){i=="__proto__"&&hi?hi(e,i,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[i]=s}function Eo(e,i){for(var s=-1,d=i.length,m=M(d),x=e==null;++s<d;)m[s]=x?n:ua(e,i[s]);return m}function Qn(e,i,s){return e===e&&(s!==n&&(e=e<=s?e:s),i!==n&&(e=e>=i?e:i)),e}function Ft(e,i,s,d,m,x){var v,k=i&p,T=i&b,L=i&y;if(s&&(v=m?s(e,d,m,x):s(e)),v!==n)return v;if(!Me(e))return e;var $=re(e);if($){if(v=Wp(e),!k)return ut(e,v)}else{var B=et(e),H=B==tr||B==Vr;if(Dn(e))return Ou(e,k);if(B==Pt||B==at||H&&!m){if(v=T||H?{}:Ku(e),!k)return T?Pp(e,Jd(v,e)):Ep(e,uu(v,e))}else{if(!Se[B])return m?e:{};v=zp(e,B,k)}}x||(x=new Ut);var G=x.get(e);if(G)return G;x.set(e,v),Cl(e)?e.forEach(function(Z){v.add(Ft(Z,i,s,Z,e,x))}):Il(e)&&e.forEach(function(Z,le){v.set(le,Ft(Z,i,s,le,e,x))});var J=L?T?Vo:Qo:T?ct:Qe,oe=$?n:J(e);return Mt(oe||e,function(Z,le){oe&&(le=Z,Z=e[le]),Er(v,le,Ft(Z,i,s,le,e,x))}),v}function Zd(e){var i=Qe(e);return function(s){return lu(s,e,i)}}function lu(e,i,s){var d=s.length;if(e==null)return!d;for(e=ke(e);d--;){var m=s[d],x=i[m],v=e[m];if(v===n&&!(m in e)||!x(v))return!1}return!0}function cu(e,i,s){if(typeof e!="function")throw new Ot(l);return Rr(function(){e.apply(n,s)},i)}function Pr(e,i,s,d){var m=-1,x=ti,v=!0,k=e.length,T=[],L=i.length;if(!k)return T;s&&(i=Pe(i,_t(s))),d?(x=po,v=!1):i.length>=a&&(x=_r,v=!1,i=new Gn(i));e:for(;++m<k;){var $=e[m],B=s==null?$:s($);if($=d||$!==0?$:0,v&&B===B){for(var H=L;H--;)if(i[H]===B)continue e;T.push($)}else x(i,B,d)||T.push($)}return T}var Pn=$u(Kt),fu=$u(Ao,!0);function ep(e,i){var s=!0;return Pn(e,function(d,m,x){return s=!!i(d,m,x),s}),s}function bi(e,i,s){for(var d=-1,m=e.length;++d<m;){var x=e[d],v=i(x);if(v!=null&&(k===n?v===v&&!It(v):s(v,k)))var k=v,T=x}return T}function tp(e,i,s,d){var m=e.length;for(s=ie(s),s<0&&(s=-s>m?0:m+s),d=d===n||d>m?m:ie(d),d<0&&(d+=m),d=s>d?0:El(d);s<d;)e[s++]=i;return e}function hu(e,i){var s=[];return Pn(e,function(d,m,x){i(d,m,x)&&s.push(d)}),s}function Ke(e,i,s,d,m){var x=-1,v=e.length;for(s||(s=Hp),m||(m=[]);++x<v;){var k=e[x];i>0&&s(k)?i>1?Ke(k,i-1,s,d,m):Cn(m,k):d||(m[m.length]=k)}return m}var Po=Bu(),du=Bu(!0);function Kt(e,i){return e&&Po(e,i,Qe)}function Ao(e,i){return e&&du(e,i,Qe)}function xi(e,i){return Sn(i,function(s){return wn(e[s])})}function Vn(e,i){i=Mn(i,e);for(var s=0,d=i.length;e!=null&&s<d;)e=e[Zt(i[s++])];return s&&s==d?e:n}function pu(e,i,s){var d=i(e);return re(e)?d:Cn(d,s(e))}function rt(e){return e==null?e===n?ro:Xr:Yn&&Yn in ke(e)?$p(e):jp(e)}function Mo(e,i){return e>i}function np(e,i){return e!=null&&ve.call(e,i)}function rp(e,i){return e!=null&&i in ke(e)}function ip(e,i,s){return e>=Ze(i,s)&&e<Ye(i,s)}function Oo(e,i,s){for(var d=s?po:ti,m=e[0].length,x=e.length,v=x,k=M(x),T=1/0,L=[];v--;){var $=e[v];v&&i&&($=Pe($,_t(i))),T=Ze($.length,T),k[v]=!s&&(i||m>=120&&$.length>=120)?new Gn(v&&$):n}$=e[0];var B=-1,H=k[0];e:for(;++B<m&&L.length<T;){var G=$[B],J=i?i(G):G;if(G=s||G!==0?G:0,!(H?_r(H,J):d(L,J,s))){for(v=x;--v;){var oe=k[v];if(!(oe?_r(oe,J):d(e[v],J,s)))continue e}H&&H.push(J),L.push(G)}}return L}function op(e,i,s,d){return Kt(e,function(m,x,v){i(d,s(m),x,v)}),d}function Ar(e,i,s){i=Mn(i,e),e=tl(e,i);var d=e==null?e:e[Zt(Lt(i))];return d==null?n:vt(d,e,s)}function gu(e){return Le(e)&&rt(e)==at}function ap(e){return Le(e)&&rt(e)==q}function sp(e){return Le(e)&&rt(e)==Et}function Mr(e,i,s,d,m){return e===i?!0:e==null||i==null||!Le(e)&&!Le(i)?e!==e&&i!==i:up(e,i,s,d,Mr,m)}function up(e,i,s,d,m,x){var v=re(e),k=re(i),T=v?Re:et(e),L=k?Re:et(i);T=T==at?Pt:T,L=L==at?Pt:L;var $=T==Pt,B=L==Pt,H=T==L;if(H&&Dn(e)){if(!Dn(i))return!1;v=!0,$=!1}if(H&&!$)return x||(x=new Ut),v||gr(e)?Vu(e,i,s,d,m,x):Rp(e,i,T,s,d,m,x);if(!(s&C)){var G=$&&ve.call(e,"__wrapped__"),J=B&&ve.call(i,"__wrapped__");if(G||J){var oe=G?e.value():e,Z=J?i.value():i;return x||(x=new Ut),m(oe,Z,s,d,x)}}return H?(x||(x=new Ut),Lp(e,i,s,d,m,x)):!1}function lp(e){return Le(e)&&et(e)==wt}function Do(e,i,s,d){var m=s.length,x=m,v=!d;if(e==null)return!x;for(e=ke(e);m--;){var k=s[m];if(v&&k[2]?k[1]!==e[k[0]]:!(k[0]in e))return!1}for(;++m<x;){k=s[m];var T=k[0],L=e[T],$=k[1];if(v&&k[2]){if(L===n&&!(T in e))return!1}else{var B=new Ut;if(d)var H=d(L,$,T,e,i,B);if(!(H===n?Mr($,L,C|P,d,B):H))return!1}}return!0}function mu(e){if(!Me(e)||Up(e))return!1;var i=wn(e)?ld:Zf;return i.test(jn(e))}function cp(e){return Le(e)&&rt(e)==In}function fp(e){return Le(e)&&et(e)==bt}function hp(e){return Le(e)&&$i(e.length)&&!!Ee[rt(e)]}function yu(e){return typeof e=="function"?e:e==null?ft:typeof e=="object"?re(e)?xu(e[0],e[1]):bu(e):Nl(e)}function Fo(e){if(!Fr(e))return gd(e);var i=[];for(var s in ke(e))ve.call(e,s)&&s!="constructor"&&i.push(s);return i}function dp(e){if(!Me(e))return Xp(e);var i=Fr(e),s=[];for(var d in e)d=="constructor"&&(i||!ve.call(e,d))||s.push(d);return s}function Ro(e,i){return e<i}function wu(e,i){var s=-1,d=lt(e)?M(e.length):[];return Pn(e,function(m,x,v){d[++s]=i(m,x,v)}),d}function bu(e){var i=jo(e);return i.length==1&&i[0][2]?Zu(i[0][0],i[0][1]):function(s){return s===e||Do(s,e,i)}}function xu(e,i){return Jo(e)&&Ju(i)?Zu(Zt(e),i):function(s){var d=ua(s,e);return d===n&&d===i?la(s,e):Mr(i,d,C|P)}}function vi(e,i,s,d,m){e!==i&&Po(i,function(x,v){if(m||(m=new Ut),Me(x))pp(e,i,v,s,vi,d,m);else{var k=d?d(ea(e,v),x,v+"",e,i,m):n;k===n&&(k=x),To(e,v,k)}},ct)}function pp(e,i,s,d,m,x,v){var k=ea(e,s),T=ea(i,s),L=v.get(T);if(L){To(e,s,L);return}var $=x?x(k,T,s+"",e,i,v):n,B=$===n;if(B){var H=re(T),G=!H&&Dn(T),J=!H&&!G&&gr(T);$=T,H||G||J?re(k)?$=k:Be(k)?$=ut(k):G?(B=!1,$=Ou(T,!0)):J?(B=!1,$=Du(T,!0)):$=[]:Lr(T)||Kn(T)?($=k,Kn(k)?$=Pl(k):(!Me(k)||wn(k))&&($=Ku(T))):B=!1}B&&(v.set(T,$),m($,T,d,x,v),v.delete(T)),To(e,s,$)}function vu(e,i){var s=e.length;if(s)return i+=i<0?s:0,yn(i,s)?e[i]:n}function _u(e,i,s){i.length?i=Pe(i,function(x){return re(x)?function(v){return Vn(v,x.length===1?x[0]:x)}:x}):i=[ft];var d=-1;i=Pe(i,_t(j()));var m=wu(e,function(x,v,k){var T=Pe(i,function(L){return L(x)});return{criteria:T,index:++d,value:x}});return zh(m,function(x,v){return Tp(x,v,s)})}function gp(e,i){return ku(e,i,function(s,d){return la(e,d)})}function ku(e,i,s){for(var d=-1,m=i.length,x={};++d<m;){var v=i[d],k=Vn(e,v);s(k,v)&&Or(x,Mn(v,e),k)}return x}function mp(e){return function(i){return Vn(i,e)}}function Lo(e,i,s,d){var m=d?Wh:ir,x=-1,v=i.length,k=e;for(e===i&&(i=ut(i)),s&&(k=Pe(e,_t(s)));++x<v;)for(var T=0,L=i[x],$=s?s(L):L;(T=m(k,$,T,d))>-1;)k!==e&&fi.call(k,T,1),fi.call(e,T,1);return e}function Iu(e,i){for(var s=e?i.length:0,d=s-1;s--;){var m=i[s];if(s==d||m!==x){var x=m;yn(m)?fi.call(e,m,1):Wo(e,m)}}return e}function $o(e,i){return e+pi(iu()*(i-e+1))}function yp(e,i,s,d){for(var m=-1,x=Ye(di((i-e)/(s||1)),0),v=M(x);x--;)v[d?x:++m]=e,e+=s;return v}function Bo(e,i){var s="";if(!e||i<1||i>qe)return s;do i%2&&(s+=e),i=pi(i/2),i&&(e+=e);while(i);return s}function se(e,i){return ta(el(e,i,ft),e+"")}function wp(e){return su(mr(e))}function bp(e,i){var s=mr(e);return Mi(s,Qn(i,0,s.length))}function Or(e,i,s,d){if(!Me(e))return e;i=Mn(i,e);for(var m=-1,x=i.length,v=x-1,k=e;k!=null&&++m<x;){var T=Zt(i[m]),L=s;if(T==="__proto__"||T==="constructor"||T==="prototype")return e;if(m!=v){var $=k[T];L=d?d($,T,k):n,L===n&&(L=Me($)?$:yn(i[m+1])?[]:{})}Er(k,T,L),k=k[T]}return e}var Su=gi?function(e,i){return gi.set(e,i),e}:ft,xp=hi?function(e,i){return hi(e,"toString",{configurable:!0,enumerable:!1,value:fa(i),writable:!0})}:ft;function vp(e){return Mi(mr(e))}function Rt(e,i,s){var d=-1,m=e.length;i<0&&(i=-i>m?0:m+i),s=s>m?m:s,s<0&&(s+=m),m=i>s?0:s-i>>>0,i>>>=0;for(var x=M(m);++d<m;)x[d]=e[d+i];return x}function _p(e,i){var s;return Pn(e,function(d,m,x){return s=i(d,m,x),!s}),!!s}function _i(e,i,s){var d=0,m=e==null?d:e.length;if(typeof i=="number"&&i===i&&m<=I){for(;d<m;){var x=d+m>>>1,v=e[x];v!==null&&!It(v)&&(s?v<=i:v<i)?d=x+1:m=x}return m}return No(e,i,ft,s)}function No(e,i,s,d){var m=0,x=e==null?0:e.length;if(x===0)return 0;i=s(i);for(var v=i!==i,k=i===null,T=It(i),L=i===n;m<x;){var $=pi((m+x)/2),B=s(e[$]),H=B!==n,G=B===null,J=B===B,oe=It(B);if(v)var Z=d||J;else L?Z=J&&(d||H):k?Z=J&&H&&(d||!G):T?Z=J&&H&&!G&&(d||!oe):G||oe?Z=!1:Z=d?B<=i:B<i;Z?m=$+1:x=$}return Ze(x,zt)}function Cu(e,i){for(var s=-1,d=e.length,m=0,x=[];++s<d;){var v=e[s],k=i?i(v):v;if(!s||!Gt(k,T)){var T=k;x[m++]=v===0?0:v}}return x}function Tu(e){return typeof e=="number"?e:It(e)?_:+e}function kt(e){if(typeof e=="string")return e;if(re(e))return Pe(e,kt)+"";if(It(e))return ou?ou.call(e):"";var i=e+"";return i=="0"&&1/e==-Te?"-0":i}function An(e,i,s){var d=-1,m=ti,x=e.length,v=!0,k=[],T=k;if(s)v=!1,m=po;else if(x>=a){var L=i?null:Dp(e);if(L)return ri(L);v=!1,m=_r,T=new Gn}else T=i?[]:k;e:for(;++d<x;){var $=e[d],B=i?i($):$;if($=s||$!==0?$:0,v&&B===B){for(var H=T.length;H--;)if(T[H]===B)continue e;i&&T.push(B),k.push($)}else m(T,B,s)||(T!==k&&T.push(B),k.push($))}return k}function Wo(e,i){return i=Mn(i,e),e=tl(e,i),e==null||delete e[Zt(Lt(i))]}function Eu(e,i,s,d){return Or(e,i,s(Vn(e,i)),d)}function ki(e,i,s,d){for(var m=e.length,x=d?m:-1;(d?x--:++x<m)&&i(e[x],x,e););return s?Rt(e,d?0:x,d?x+1:m):Rt(e,d?x+1:0,d?m:x)}function Pu(e,i){var s=e;return s instanceof ce&&(s=s.value()),go(i,function(d,m){return m.func.apply(m.thisArg,Cn([d],m.args))},s)}function zo(e,i,s){var d=e.length;if(d<2)return d?An(e[0]):[];for(var m=-1,x=M(d);++m<d;)for(var v=e[m],k=-1;++k<d;)k!=m&&(x[m]=Pr(x[m]||v,e[k],i,s));return An(Ke(x,1),i,s)}function Au(e,i,s){for(var d=-1,m=e.length,x=i.length,v={};++d<m;){var k=d<x?i[d]:n;s(v,e[d],k)}return v}function qo(e){return Be(e)?e:[]}function Ho(e){return typeof e=="function"?e:ft}function Mn(e,i){return re(e)?e:Jo(e,i)?[e]:ol(xe(e))}var kp=se;function On(e,i,s){var d=e.length;return s=s===n?d:s,!i&&s>=d?e:Rt(e,i,s)}var Mu=cd||function(e){return je.clearTimeout(e)};function Ou(e,i){if(i)return e.slice();var s=e.length,d=Zs?Zs(s):new e.constructor(s);return e.copy(d),d}function Yo(e){var i=new e.constructor(e.byteLength);return new li(i).set(new li(e)),i}function Ip(e,i){var s=i?Yo(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.byteLength)}function Sp(e){var i=new e.constructor(e.source,gs.exec(e));return i.lastIndex=e.lastIndex,i}function Cp(e){return Tr?ke(Tr.call(e)):{}}function Du(e,i){var s=i?Yo(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}function Fu(e,i){if(e!==i){var s=e!==n,d=e===null,m=e===e,x=It(e),v=i!==n,k=i===null,T=i===i,L=It(i);if(!k&&!L&&!x&&e>i||x&&v&&T&&!k&&!L||d&&v&&T||!s&&T||!m)return 1;if(!d&&!x&&!L&&e<i||L&&s&&m&&!d&&!x||k&&s&&m||!v&&m||!T)return-1}return 0}function Tp(e,i,s){for(var d=-1,m=e.criteria,x=i.criteria,v=m.length,k=s.length;++d<v;){var T=Fu(m[d],x[d]);if(T){if(d>=k)return T;var L=s[d];return T*(L=="desc"?-1:1)}}return e.index-i.index}function Ru(e,i,s,d){for(var m=-1,x=e.length,v=s.length,k=-1,T=i.length,L=Ye(x-v,0),$=M(T+L),B=!d;++k<T;)$[k]=i[k];for(;++m<v;)(B||m<x)&&($[s[m]]=e[m]);for(;L--;)$[k++]=e[m++];return $}function Lu(e,i,s,d){for(var m=-1,x=e.length,v=-1,k=s.length,T=-1,L=i.length,$=Ye(x-k,0),B=M($+L),H=!d;++m<$;)B[m]=e[m];for(var G=m;++T<L;)B[G+T]=i[T];for(;++v<k;)(H||m<x)&&(B[G+s[v]]=e[m++]);return B}function ut(e,i){var s=-1,d=e.length;for(i||(i=M(d));++s<d;)i[s]=e[s];return i}function Jt(e,i,s,d){var m=!s;s||(s={});for(var x=-1,v=i.length;++x<v;){var k=i[x],T=d?d(s[k],e[k],k,s,e):n;T===n&&(T=e[k]),m?pn(s,k,T):Er(s,k,T)}return s}function Ep(e,i){return Jt(e,Ko(e),i)}function Pp(e,i){return Jt(e,Xu(e),i)}function Ii(e,i){return function(s,d){var m=re(s)?Fh:Kd,x=i?i():{};return m(s,e,j(d,2),x)}}function hr(e){return se(function(i,s){var d=-1,m=s.length,x=m>1?s[m-1]:n,v=m>2?s[2]:n;for(x=e.length>3&&typeof x=="function"?(m--,x):n,v&&it(s[0],s[1],v)&&(x=m<3?n:x,m=1),i=ke(i);++d<m;){var k=s[d];k&&e(i,k,d,x)}return i})}function $u(e,i){return function(s,d){if(s==null)return s;if(!lt(s))return e(s,d);for(var m=s.length,x=i?m:-1,v=ke(s);(i?x--:++x<m)&&d(v[x],x,v)!==!1;);return s}}function Bu(e){return function(i,s,d){for(var m=-1,x=ke(i),v=d(i),k=v.length;k--;){var T=v[e?k:++m];if(s(x[T],T,x)===!1)break}return i}}function Ap(e,i,s){var d=i&F,m=Dr(e);function x(){var v=this&&this!==je&&this instanceof x?m:e;return v.apply(d?s:this,arguments)}return x}function Nu(e){return function(i){i=xe(i);var s=or(i)?Yt(i):n,d=s?s[0]:i.charAt(0),m=s?On(s,1).join(""):i.slice(1);return d[e]()+m}}function dr(e){return function(i){return go($l(Ll(i).replace(xh,"")),e,"")}}function Dr(e){return function(){var i=arguments;switch(i.length){case 0:return new e;case 1:return new e(i[0]);case 2:return new e(i[0],i[1]);case 3:return new e(i[0],i[1],i[2]);case 4:return new e(i[0],i[1],i[2],i[3]);case 5:return new e(i[0],i[1],i[2],i[3],i[4]);case 6:return new e(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new e(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var s=fr(e.prototype),d=e.apply(s,i);return Me(d)?d:s}}function Mp(e,i,s){var d=Dr(e);function m(){for(var x=arguments.length,v=M(x),k=x,T=pr(m);k--;)v[k]=arguments[k];var L=x<3&&v[0]!==T&&v[x-1]!==T?[]:Tn(v,T);if(x-=L.length,x<s)return Yu(e,i,Si,m.placeholder,n,v,L,n,n,s-x);var $=this&&this!==je&&this instanceof m?d:e;return vt($,this,v)}return m}function Wu(e){return function(i,s,d){var m=ke(i);if(!lt(i)){var x=j(s,3);i=Qe(i),s=function(k){return x(m[k],k,m)}}var v=e(i,s,d);return v>-1?m[x?i[v]:v]:n}}function zu(e){return mn(function(i){var s=i.length,d=s,m=Dt.prototype.thru;for(e&&i.reverse();d--;){var x=i[d];if(typeof x!="function")throw new Ot(l);if(m&&!v&&Pi(x)=="wrapper")var v=new Dt([],!0)}for(d=v?d:s;++d<s;){x=i[d];var k=Pi(x),T=k=="wrapper"?Xo(x):n;T&&Zo(T[0])&&T[1]==(U|z|O|V)&&!T[4].length&&T[9]==1?v=v[Pi(T[0])].apply(v,T[3]):v=x.length==1&&Zo(x)?v[k]():v.thru(x)}return function(){var L=arguments,$=L[0];if(v&&L.length==1&&re($))return v.plant($).value();for(var B=0,H=s?i[B].apply(this,L):$;++B<s;)H=i[B].call(this,H);return H}})}function Si(e,i,s,d,m,x,v,k,T,L){var $=i&U,B=i&F,H=i&A,G=i&(z|W),J=i&ee,oe=H?n:Dr(e);function Z(){for(var le=arguments.length,he=M(le),St=le;St--;)he[St]=arguments[St];if(G)var ot=pr(Z),Ct=Hh(he,ot);if(d&&(he=Ru(he,d,m,G)),x&&(he=Lu(he,x,v,G)),le-=Ct,G&&le<L){var Ne=Tn(he,ot);return Yu(e,i,Si,Z.placeholder,s,he,Ne,k,T,L-le)}var Qt=B?s:this,xn=H?Qt[e]:e;return le=he.length,k?he=Kp(he,k):J&&le>1&&he.reverse(),$&&T<le&&(he.length=T),this&&this!==je&&this instanceof Z&&(xn=oe||Dr(xn)),xn.apply(Qt,he)}return Z}function qu(e,i){return function(s,d){return op(s,e,i(d),{})}}function Ci(e,i){return function(s,d){var m;if(s===n&&d===n)return i;if(s!==n&&(m=s),d!==n){if(m===n)return d;typeof s=="string"||typeof d=="string"?(s=kt(s),d=kt(d)):(s=Tu(s),d=Tu(d)),m=e(s,d)}return m}}function Uo(e){return mn(function(i){return i=Pe(i,_t(j())),se(function(s){var d=this;return e(i,function(m){return vt(m,d,s)})})})}function Ti(e,i){i=i===n?" ":kt(i);var s=i.length;if(s<2)return s?Bo(i,e):i;var d=Bo(i,di(e/ar(i)));return or(i)?On(Yt(d),0,e).join(""):d.slice(0,e)}function Op(e,i,s,d){var m=i&F,x=Dr(e);function v(){for(var k=-1,T=arguments.length,L=-1,$=d.length,B=M($+T),H=this&&this!==je&&this instanceof v?x:e;++L<$;)B[L]=d[L];for(;T--;)B[L++]=arguments[++k];return vt(H,m?s:this,B)}return v}function Hu(e){return function(i,s,d){return d&&typeof d!="number"&&it(i,s,d)&&(s=d=n),i=bn(i),s===n?(s=i,i=0):s=bn(s),d=d===n?i<s?1:-1:bn(d),yp(i,s,d,e)}}function Ei(e){return function(i,s){return typeof i=="string"&&typeof s=="string"||(i=$t(i),s=$t(s)),e(i,s)}}function Yu(e,i,s,d,m,x,v,k,T,L){var $=i&z,B=$?v:n,H=$?n:v,G=$?x:n,J=$?n:x;i|=$?O:E,i&=~($?E:O),i&N||(i&=-4);var oe=[e,i,m,G,B,J,H,k,T,L],Z=s.apply(n,oe);return Zo(e)&&nl(Z,oe),Z.placeholder=d,rl(Z,e,i)}function Go(e){var i=He[e];return function(s,d){if(s=$t(s),d=d==null?0:Ze(ie(d),292),d&&ru(s)){var m=(xe(s)+"e").split("e"),x=i(m[0]+"e"+(+m[1]+d));return m=(xe(x)+"e").split("e"),+(m[0]+"e"+(+m[1]-d))}return i(s)}}var Dp=lr&&1/ri(new lr([,-0]))[1]==Te?function(e){return new lr(e)}:pa;function Uu(e){return function(i){var s=et(i);return s==wt?_o(i):s==bt?jh(i):qh(i,e(i))}}function gn(e,i,s,d,m,x,v,k){var T=i&A;if(!T&&typeof e!="function")throw new Ot(l);var L=d?d.length:0;if(L||(i&=-97,d=m=n),v=v===n?v:Ye(ie(v),0),k=k===n?k:ie(k),L-=m?m.length:0,i&E){var $=d,B=m;d=m=n}var H=T?n:Xo(e),G=[e,i,s,d,m,$,B,x,v,k];if(H&&Vp(G,H),e=G[0],i=G[1],s=G[2],d=G[3],m=G[4],k=G[9]=G[9]===n?T?0:e.length:Ye(G[9]-L,0),!k&&i&(z|W)&&(i&=-25),!i||i==F)var J=Ap(e,i,s);else i==z||i==W?J=Mp(e,i,k):(i==O||i==(F|O))&&!m.length?J=Op(e,i,s,d):J=Si.apply(n,G);var oe=H?Su:nl;return rl(oe(J,G),e,i)}function Gu(e,i,s,d){return e===n||Gt(e,ur[s])&&!ve.call(d,s)?i:e}function Qu(e,i,s,d,m,x){return Me(e)&&Me(i)&&(x.set(i,e),vi(e,i,n,Qu,x),x.delete(i)),e}function Fp(e){return Lr(e)?n:e}function Vu(e,i,s,d,m,x){var v=s&C,k=e.length,T=i.length;if(k!=T&&!(v&&T>k))return!1;var L=x.get(e),$=x.get(i);if(L&&$)return L==i&&$==e;var B=-1,H=!0,G=s&P?new Gn:n;for(x.set(e,i),x.set(i,e);++B<k;){var J=e[B],oe=i[B];if(d)var Z=v?d(oe,J,B,i,e,x):d(J,oe,B,e,i,x);if(Z!==n){if(Z)continue;H=!1;break}if(G){if(!mo(i,function(le,he){if(!_r(G,he)&&(J===le||m(J,le,s,d,x)))return G.push(he)})){H=!1;break}}else if(!(J===oe||m(J,oe,s,d,x))){H=!1;break}}return x.delete(e),x.delete(i),H}function Rp(e,i,s,d,m,x,v){switch(s){case K:if(e.byteLength!=i.byteLength||e.byteOffset!=i.byteOffset)return!1;e=e.buffer,i=i.buffer;case q:return!(e.byteLength!=i.byteLength||!x(new li(e),new li(i)));case st:case Et:case kn:return Gt(+e,+i);case ln:return e.name==i.name&&e.message==i.message;case In:case zn:return e==i+"";case wt:var k=_o;case bt:var T=d&C;if(k||(k=ri),e.size!=i.size&&!T)return!1;var L=v.get(e);if(L)return L==i;d|=P,v.set(e,i);var $=Vu(k(e),k(i),d,m,x,v);return v.delete(e),$;case nr:if(Tr)return Tr.call(e)==Tr.call(i)}return!1}function Lp(e,i,s,d,m,x){var v=s&C,k=Qo(e),T=k.length,L=Qo(i),$=L.length;if(T!=$&&!v)return!1;for(var B=T;B--;){var H=k[B];if(!(v?H in i:ve.call(i,H)))return!1}var G=x.get(e),J=x.get(i);if(G&&J)return G==i&&J==e;var oe=!0;x.set(e,i),x.set(i,e);for(var Z=v;++B<T;){H=k[B];var le=e[H],he=i[H];if(d)var St=v?d(he,le,H,i,e,x):d(le,he,H,e,i,x);if(!(St===n?le===he||m(le,he,s,d,x):St)){oe=!1;break}Z||(Z=H=="constructor")}if(oe&&!Z){var ot=e.constructor,Ct=i.constructor;ot!=Ct&&"constructor"in e&&"constructor"in i&&!(typeof ot=="function"&&ot instanceof ot&&typeof Ct=="function"&&Ct instanceof Ct)&&(oe=!1)}return x.delete(e),x.delete(i),oe}function mn(e){return ta(el(e,n,ll),e+"")}function Qo(e){return pu(e,Qe,Ko)}function Vo(e){return pu(e,ct,Xu)}var Xo=gi?function(e){return gi.get(e)}:pa;function Pi(e){for(var i=e.name+"",s=cr[i],d=ve.call(cr,i)?s.length:0;d--;){var m=s[d],x=m.func;if(x==null||x==e)return m.name}return i}function pr(e){var i=ve.call(w,"placeholder")?w:e;return i.placeholder}function j(){var e=w.iteratee||ha;return e=e===ha?yu:e,arguments.length?e(arguments[0],arguments[1]):e}function Ai(e,i){var s=e.__data__;return Yp(i)?s[typeof i=="string"?"string":"hash"]:s.map}function jo(e){for(var i=Qe(e),s=i.length;s--;){var d=i[s],m=e[d];i[s]=[d,m,Ju(m)]}return i}function Xn(e,i){var s=Qh(e,i);return mu(s)?s:n}function $p(e){var i=ve.call(e,Yn),s=e[Yn];try{e[Yn]=n;var d=!0}catch{}var m=si.call(e);return d&&(i?e[Yn]=s:delete e[Yn]),m}var Ko=Io?function(e){return e==null?[]:(e=ke(e),Sn(Io(e),function(i){return tu.call(e,i)}))}:ga,Xu=Io?function(e){for(var i=[];e;)Cn(i,Ko(e)),e=ci(e);return i}:ga,et=rt;(So&&et(new So(new ArrayBuffer(1)))!=K||Ir&&et(new Ir)!=wt||Co&&et(Co.resolve())!=jr||lr&&et(new lr)!=bt||Sr&&et(new Sr)!=qn)&&(et=function(e){var i=rt(e),s=i==Pt?e.constructor:n,d=s?jn(s):"";if(d)switch(d){case bd:return K;case xd:return wt;case vd:return jr;case _d:return bt;case kd:return qn}return i});function Bp(e,i,s){for(var d=-1,m=s.length;++d<m;){var x=s[d],v=x.size;switch(x.type){case"drop":e+=v;break;case"dropRight":i-=v;break;case"take":i=Ze(i,e+v);break;case"takeRight":e=Ye(e,i-v);break}}return{start:e,end:i}}function Np(e){var i=e.match(Uf);return i?i[1].split(Gf):[]}function ju(e,i,s){i=Mn(i,e);for(var d=-1,m=i.length,x=!1;++d<m;){var v=Zt(i[d]);if(!(x=e!=null&&s(e,v)))break;e=e[v]}return x||++d!=m?x:(m=e==null?0:e.length,!!m&&$i(m)&&yn(v,m)&&(re(e)||Kn(e)))}function Wp(e){var i=e.length,s=new e.constructor(i);return i&&typeof e[0]=="string"&&ve.call(e,"index")&&(s.index=e.index,s.input=e.input),s}function Ku(e){return typeof e.constructor=="function"&&!Fr(e)?fr(ci(e)):{}}function zp(e,i,s){var d=e.constructor;switch(i){case q:return Yo(e);case st:case Et:return new d(+e);case K:return Ip(e,s);case ae:case ge:case nt:case qt:case xt:case cn:case fn:case Xe:case jt:return Du(e,s);case wt:return new d;case kn:case zn:return new d(e);case In:return Sp(e);case bt:return new d;case nr:return Cp(e)}}function qp(e,i){var s=i.length;if(!s)return e;var d=s-1;return i[d]=(s>1?"& ":"")+i[d],i=i.join(s>2?", ":" "),e.replace(Yf,`{
/* [wrapped with `+i+`] */
`)}function Hp(e){return re(e)||Kn(e)||!!(nu&&e&&e[nu])}function yn(e,i){var s=typeof e;return i=i??qe,!!i&&(s=="number"||s!="symbol"&&th.test(e))&&e>-1&&e%1==0&&e<i}function it(e,i,s){if(!Me(s))return!1;var d=typeof i;return(d=="number"?lt(s)&&yn(i,s.length):d=="string"&&i in s)?Gt(s[i],e):!1}function Jo(e,i){if(re(e))return!1;var s=typeof e;return s=="number"||s=="symbol"||s=="boolean"||e==null||It(e)?!0:Wf.test(e)||!Nf.test(e)||i!=null&&e in ke(i)}function Yp(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null}function Zo(e){var i=Pi(e),s=w[i];if(typeof s!="function"||!(i in ce.prototype))return!1;if(e===s)return!0;var d=Xo(s);return!!d&&e===d[0]}function Up(e){return!!Js&&Js in e}var Gp=oi?wn:ma;function Fr(e){var i=e&&e.constructor,s=typeof i=="function"&&i.prototype||ur;return e===s}function Ju(e){return e===e&&!Me(e)}function Zu(e,i){return function(s){return s==null?!1:s[e]===i&&(i!==n||e in ke(s))}}function Qp(e){var i=Ri(e,function(d){return s.size===h&&s.clear(),d}),s=i.cache;return i}function Vp(e,i){var s=e[1],d=i[1],m=s|d,x=m<(F|A|U),v=d==U&&s==z||d==U&&s==V&&e[7].length<=i[8]||d==(U|V)&&i[7].length<=i[8]&&s==z;if(!(x||v))return e;d&F&&(e[2]=i[2],m|=s&F?0:N);var k=i[3];if(k){var T=e[3];e[3]=T?Ru(T,k,i[4]):k,e[4]=T?Tn(e[3],g):i[4]}return k=i[5],k&&(T=e[5],e[5]=T?Lu(T,k,i[6]):k,e[6]=T?Tn(e[5],g):i[6]),k=i[7],k&&(e[7]=k),d&U&&(e[8]=e[8]==null?i[8]:Ze(e[8],i[8])),e[9]==null&&(e[9]=i[9]),e[0]=i[0],e[1]=m,e}function Xp(e){var i=[];if(e!=null)for(var s in ke(e))i.push(s);return i}function jp(e){return si.call(e)}function el(e,i,s){return i=Ye(i===n?e.length-1:i,0),function(){for(var d=arguments,m=-1,x=Ye(d.length-i,0),v=M(x);++m<x;)v[m]=d[i+m];m=-1;for(var k=M(i+1);++m<i;)k[m]=d[m];return k[i]=s(v),vt(e,this,k)}}function tl(e,i){return i.length<2?e:Vn(e,Rt(i,0,-1))}function Kp(e,i){for(var s=e.length,d=Ze(i.length,s),m=ut(e);d--;){var x=i[d];e[d]=yn(x,s)?m[x]:n}return e}function ea(e,i){if(!(i==="constructor"&&typeof e[i]=="function")&&i!="__proto__")return e[i]}var nl=il(Su),Rr=hd||function(e,i){return je.setTimeout(e,i)},ta=il(xp);function rl(e,i,s){var d=i+"";return ta(e,qp(d,Jp(Np(d),s)))}function il(e){var i=0,s=0;return function(){var d=md(),m=be-(d-s);if(s=d,m>0){if(++i>=Q)return arguments[0]}else i=0;return e.apply(n,arguments)}}function Mi(e,i){var s=-1,d=e.length,m=d-1;for(i=i===n?d:i;++s<i;){var x=$o(s,m),v=e[x];e[x]=e[s],e[s]=v}return e.length=i,e}var ol=Qp(function(e){var i=[];return e.charCodeAt(0)===46&&i.push(""),e.replace(zf,function(s,d,m,x){i.push(m?x.replace(Xf,"$1"):d||s)}),i});function Zt(e){if(typeof e=="string"||It(e))return e;var i=e+"";return i=="0"&&1/e==-Te?"-0":i}function jn(e){if(e!=null){try{return ai.call(e)}catch{}try{return e+""}catch{}}return""}function Jp(e,i){return Mt(yt,function(s){var d="_."+s[0];i&s[1]&&!ti(e,d)&&e.push(d)}),e.sort()}function al(e){if(e instanceof ce)return e.clone();var i=new Dt(e.__wrapped__,e.__chain__);return i.__actions__=ut(e.__actions__),i.__index__=e.__index__,i.__values__=e.__values__,i}function Zp(e,i,s){(s?it(e,i,s):i===n)?i=1:i=Ye(ie(i),0);var d=e==null?0:e.length;if(!d||i<1)return[];for(var m=0,x=0,v=M(di(d/i));m<d;)v[x++]=Rt(e,m,m+=i);return v}function eg(e){for(var i=-1,s=e==null?0:e.length,d=0,m=[];++i<s;){var x=e[i];x&&(m[d++]=x)}return m}function tg(){var e=arguments.length;if(!e)return[];for(var i=M(e-1),s=arguments[0],d=e;d--;)i[d-1]=arguments[d];return Cn(re(s)?ut(s):[s],Ke(i,1))}var ng=se(function(e,i){return Be(e)?Pr(e,Ke(i,1,Be,!0)):[]}),rg=se(function(e,i){var s=Lt(i);return Be(s)&&(s=n),Be(e)?Pr(e,Ke(i,1,Be,!0),j(s,2)):[]}),ig=se(function(e,i){var s=Lt(i);return Be(s)&&(s=n),Be(e)?Pr(e,Ke(i,1,Be,!0),n,s):[]});function og(e,i,s){var d=e==null?0:e.length;return d?(i=s||i===n?1:ie(i),Rt(e,i<0?0:i,d)):[]}function ag(e,i,s){var d=e==null?0:e.length;return d?(i=s||i===n?1:ie(i),i=d-i,Rt(e,0,i<0?0:i)):[]}function sg(e,i){return e&&e.length?ki(e,j(i,3),!0,!0):[]}function ug(e,i){return e&&e.length?ki(e,j(i,3),!0):[]}function lg(e,i,s,d){var m=e==null?0:e.length;return m?(s&&typeof s!="number"&&it(e,i,s)&&(s=0,d=m),tp(e,i,s,d)):[]}function sl(e,i,s){var d=e==null?0:e.length;if(!d)return-1;var m=s==null?0:ie(s);return m<0&&(m=Ye(d+m,0)),ni(e,j(i,3),m)}function ul(e,i,s){var d=e==null?0:e.length;if(!d)return-1;var m=d-1;return s!==n&&(m=ie(s),m=s<0?Ye(d+m,0):Ze(m,d-1)),ni(e,j(i,3),m,!0)}function ll(e){var i=e==null?0:e.length;return i?Ke(e,1):[]}function cg(e){var i=e==null?0:e.length;return i?Ke(e,Te):[]}function fg(e,i){var s=e==null?0:e.length;return s?(i=i===n?1:ie(i),Ke(e,i)):[]}function hg(e){for(var i=-1,s=e==null?0:e.length,d={};++i<s;){var m=e[i];d[m[0]]=m[1]}return d}function cl(e){return e&&e.length?e[0]:n}function dg(e,i,s){var d=e==null?0:e.length;if(!d)return-1;var m=s==null?0:ie(s);return m<0&&(m=Ye(d+m,0)),ir(e,i,m)}function pg(e){var i=e==null?0:e.length;return i?Rt(e,0,-1):[]}var gg=se(function(e){var i=Pe(e,qo);return i.length&&i[0]===e[0]?Oo(i):[]}),mg=se(function(e){var i=Lt(e),s=Pe(e,qo);return i===Lt(s)?i=n:s.pop(),s.length&&s[0]===e[0]?Oo(s,j(i,2)):[]}),yg=se(function(e){var i=Lt(e),s=Pe(e,qo);return i=typeof i=="function"?i:n,i&&s.pop(),s.length&&s[0]===e[0]?Oo(s,n,i):[]});function wg(e,i){return e==null?"":pd.call(e,i)}function Lt(e){var i=e==null?0:e.length;return i?e[i-1]:n}function bg(e,i,s){var d=e==null?0:e.length;if(!d)return-1;var m=d;return s!==n&&(m=ie(s),m=m<0?Ye(d+m,0):Ze(m,d-1)),i===i?Jh(e,i,m):ni(e,Ys,m,!0)}function xg(e,i){return e&&e.length?vu(e,ie(i)):n}var vg=se(fl);function fl(e,i){return e&&e.length&&i&&i.length?Lo(e,i):e}function _g(e,i,s){return e&&e.length&&i&&i.length?Lo(e,i,j(s,2)):e}function kg(e,i,s){return e&&e.length&&i&&i.length?Lo(e,i,n,s):e}var Ig=mn(function(e,i){var s=e==null?0:e.length,d=Eo(e,i);return Iu(e,Pe(i,function(m){return yn(m,s)?+m:m}).sort(Fu)),d});function Sg(e,i){var s=[];if(!(e&&e.length))return s;var d=-1,m=[],x=e.length;for(i=j(i,3);++d<x;){var v=e[d];i(v,d,e)&&(s.push(v),m.push(d))}return Iu(e,m),s}function na(e){return e==null?e:wd.call(e)}function Cg(e,i,s){var d=e==null?0:e.length;return d?(s&&typeof s!="number"&&it(e,i,s)?(i=0,s=d):(i=i==null?0:ie(i),s=s===n?d:ie(s)),Rt(e,i,s)):[]}function Tg(e,i){return _i(e,i)}function Eg(e,i,s){return No(e,i,j(s,2))}function Pg(e,i){var s=e==null?0:e.length;if(s){var d=_i(e,i);if(d<s&&Gt(e[d],i))return d}return-1}function Ag(e,i){return _i(e,i,!0)}function Mg(e,i,s){return No(e,i,j(s,2),!0)}function Og(e,i){var s=e==null?0:e.length;if(s){var d=_i(e,i,!0)-1;if(Gt(e[d],i))return d}return-1}function Dg(e){return e&&e.length?Cu(e):[]}function Fg(e,i){return e&&e.length?Cu(e,j(i,2)):[]}function Rg(e){var i=e==null?0:e.length;return i?Rt(e,1,i):[]}function Lg(e,i,s){return e&&e.length?(i=s||i===n?1:ie(i),Rt(e,0,i<0?0:i)):[]}function $g(e,i,s){var d=e==null?0:e.length;return d?(i=s||i===n?1:ie(i),i=d-i,Rt(e,i<0?0:i,d)):[]}function Bg(e,i){return e&&e.length?ki(e,j(i,3),!1,!0):[]}function Ng(e,i){return e&&e.length?ki(e,j(i,3)):[]}var Wg=se(function(e){return An(Ke(e,1,Be,!0))}),zg=se(function(e){var i=Lt(e);return Be(i)&&(i=n),An(Ke(e,1,Be,!0),j(i,2))}),qg=se(function(e){var i=Lt(e);return i=typeof i=="function"?i:n,An(Ke(e,1,Be,!0),n,i)});function Hg(e){return e&&e.length?An(e):[]}function Yg(e,i){return e&&e.length?An(e,j(i,2)):[]}function Ug(e,i){return i=typeof i=="function"?i:n,e&&e.length?An(e,n,i):[]}function ra(e){if(!(e&&e.length))return[];var i=0;return e=Sn(e,function(s){if(Be(s))return i=Ye(s.length,i),!0}),xo(i,function(s){return Pe(e,yo(s))})}function hl(e,i){if(!(e&&e.length))return[];var s=ra(e);return i==null?s:Pe(s,function(d){return vt(i,n,d)})}var Gg=se(function(e,i){return Be(e)?Pr(e,i):[]}),Qg=se(function(e){return zo(Sn(e,Be))}),Vg=se(function(e){var i=Lt(e);return Be(i)&&(i=n),zo(Sn(e,Be),j(i,2))}),Xg=se(function(e){var i=Lt(e);return i=typeof i=="function"?i:n,zo(Sn(e,Be),n,i)}),jg=se(ra);function Kg(e,i){return Au(e||[],i||[],Er)}function Jg(e,i){return Au(e||[],i||[],Or)}var Zg=se(function(e){var i=e.length,s=i>1?e[i-1]:n;return s=typeof s=="function"?(e.pop(),s):n,hl(e,s)});function dl(e){var i=w(e);return i.__chain__=!0,i}function em(e,i){return i(e),e}function Oi(e,i){return i(e)}var tm=mn(function(e){var i=e.length,s=i?e[0]:0,d=this.__wrapped__,m=function(x){return Eo(x,e)};return i>1||this.__actions__.length||!(d instanceof ce)||!yn(s)?this.thru(m):(d=d.slice(s,+s+(i?1:0)),d.__actions__.push({func:Oi,args:[m],thisArg:n}),new Dt(d,this.__chain__).thru(function(x){return i&&!x.length&&x.push(n),x}))});function nm(){return dl(this)}function rm(){return new Dt(this.value(),this.__chain__)}function im(){this.__values__===n&&(this.__values__=Tl(this.value()));var e=this.__index__>=this.__values__.length,i=e?n:this.__values__[this.__index__++];return{done:e,value:i}}function om(){return this}function am(e){for(var i,s=this;s instanceof yi;){var d=al(s);d.__index__=0,d.__values__=n,i?m.__wrapped__=d:i=d;var m=d;s=s.__wrapped__}return m.__wrapped__=e,i}function sm(){var e=this.__wrapped__;if(e instanceof ce){var i=e;return this.__actions__.length&&(i=new ce(this)),i=i.reverse(),i.__actions__.push({func:Oi,args:[na],thisArg:n}),new Dt(i,this.__chain__)}return this.thru(na)}function um(){return Pu(this.__wrapped__,this.__actions__)}var lm=Ii(function(e,i,s){ve.call(e,s)?++e[s]:pn(e,s,1)});function cm(e,i,s){var d=re(e)?qs:ep;return s&&it(e,i,s)&&(i=n),d(e,j(i,3))}function fm(e,i){var s=re(e)?Sn:hu;return s(e,j(i,3))}var hm=Wu(sl),dm=Wu(ul);function pm(e,i){return Ke(Di(e,i),1)}function gm(e,i){return Ke(Di(e,i),Te)}function mm(e,i,s){return s=s===n?1:ie(s),Ke(Di(e,i),s)}function pl(e,i){var s=re(e)?Mt:Pn;return s(e,j(i,3))}function gl(e,i){var s=re(e)?Rh:fu;return s(e,j(i,3))}var ym=Ii(function(e,i,s){ve.call(e,s)?e[s].push(i):pn(e,s,[i])});function wm(e,i,s,d){e=lt(e)?e:mr(e),s=s&&!d?ie(s):0;var m=e.length;return s<0&&(s=Ye(m+s,0)),Bi(e)?s<=m&&e.indexOf(i,s)>-1:!!m&&ir(e,i,s)>-1}var bm=se(function(e,i,s){var d=-1,m=typeof i=="function",x=lt(e)?M(e.length):[];return Pn(e,function(v){x[++d]=m?vt(i,v,s):Ar(v,i,s)}),x}),xm=Ii(function(e,i,s){pn(e,s,i)});function Di(e,i){var s=re(e)?Pe:wu;return s(e,j(i,3))}function vm(e,i,s,d){return e==null?[]:(re(i)||(i=i==null?[]:[i]),s=d?n:s,re(s)||(s=s==null?[]:[s]),_u(e,i,s))}var _m=Ii(function(e,i,s){e[s?0:1].push(i)},function(){return[[],[]]});function km(e,i,s){var d=re(e)?go:Gs,m=arguments.length<3;return d(e,j(i,4),s,m,Pn)}function Im(e,i,s){var d=re(e)?Lh:Gs,m=arguments.length<3;return d(e,j(i,4),s,m,fu)}function Sm(e,i){var s=re(e)?Sn:hu;return s(e,Li(j(i,3)))}function Cm(e){var i=re(e)?su:wp;return i(e)}function Tm(e,i,s){(s?it(e,i,s):i===n)?i=1:i=ie(i);var d=re(e)?Xd:bp;return d(e,i)}function Em(e){var i=re(e)?jd:vp;return i(e)}function Pm(e){if(e==null)return 0;if(lt(e))return Bi(e)?ar(e):e.length;var i=et(e);return i==wt||i==bt?e.size:Fo(e).length}function Am(e,i,s){var d=re(e)?mo:_p;return s&&it(e,i,s)&&(i=n),d(e,j(i,3))}var Mm=se(function(e,i){if(e==null)return[];var s=i.length;return s>1&&it(e,i[0],i[1])?i=[]:s>2&&it(i[0],i[1],i[2])&&(i=[i[0]]),_u(e,Ke(i,1),[])}),Fi=fd||function(){return je.Date.now()};function Om(e,i){if(typeof i!="function")throw new Ot(l);return e=ie(e),function(){if(--e<1)return i.apply(this,arguments)}}function ml(e,i,s){return i=s?n:i,i=e&&i==null?e.length:i,gn(e,U,n,n,n,n,i)}function yl(e,i){var s;if(typeof i!="function")throw new Ot(l);return e=ie(e),function(){return--e>0&&(s=i.apply(this,arguments)),e<=1&&(i=n),s}}var ia=se(function(e,i,s){var d=F;if(s.length){var m=Tn(s,pr(ia));d|=O}return gn(e,d,i,s,m)}),wl=se(function(e,i,s){var d=F|A;if(s.length){var m=Tn(s,pr(wl));d|=O}return gn(i,d,e,s,m)});function bl(e,i,s){i=s?n:i;var d=gn(e,z,n,n,n,n,n,i);return d.placeholder=bl.placeholder,d}function xl(e,i,s){i=s?n:i;var d=gn(e,W,n,n,n,n,n,i);return d.placeholder=xl.placeholder,d}function vl(e,i,s){var d,m,x,v,k,T,L=0,$=!1,B=!1,H=!0;if(typeof e!="function")throw new Ot(l);i=$t(i)||0,Me(s)&&($=!!s.leading,B="maxWait"in s,x=B?Ye($t(s.maxWait)||0,i):x,H="trailing"in s?!!s.trailing:H);function G(Ne){var Qt=d,xn=m;return d=m=n,L=Ne,v=e.apply(xn,Qt),v}function J(Ne){return L=Ne,k=Rr(le,i),$?G(Ne):v}function oe(Ne){var Qt=Ne-T,xn=Ne-L,Wl=i-Qt;return B?Ze(Wl,x-xn):Wl}function Z(Ne){var Qt=Ne-T,xn=Ne-L;return T===n||Qt>=i||Qt<0||B&&xn>=x}function le(){var Ne=Fi();if(Z(Ne))return he(Ne);k=Rr(le,oe(Ne))}function he(Ne){return k=n,H&&d?G(Ne):(d=m=n,v)}function St(){k!==n&&Mu(k),L=0,d=T=m=k=n}function ot(){return k===n?v:he(Fi())}function Ct(){var Ne=Fi(),Qt=Z(Ne);if(d=arguments,m=this,T=Ne,Qt){if(k===n)return J(T);if(B)return Mu(k),k=Rr(le,i),G(T)}return k===n&&(k=Rr(le,i)),v}return Ct.cancel=St,Ct.flush=ot,Ct}var Dm=se(function(e,i){return cu(e,1,i)}),Fm=se(function(e,i,s){return cu(e,$t(i)||0,s)});function Rm(e){return gn(e,ee)}function Ri(e,i){if(typeof e!="function"||i!=null&&typeof i!="function")throw new Ot(l);var s=function(){var d=arguments,m=i?i.apply(this,d):d[0],x=s.cache;if(x.has(m))return x.get(m);var v=e.apply(this,d);return s.cache=x.set(m,v)||x,v};return s.cache=new(Ri.Cache||dn),s}Ri.Cache=dn;function Li(e){if(typeof e!="function")throw new Ot(l);return function(){var i=arguments;switch(i.length){case 0:return!e.call(this);case 1:return!e.call(this,i[0]);case 2:return!e.call(this,i[0],i[1]);case 3:return!e.call(this,i[0],i[1],i[2])}return!e.apply(this,i)}}function Lm(e){return yl(2,e)}var $m=kp(function(e,i){i=i.length==1&&re(i[0])?Pe(i[0],_t(j())):Pe(Ke(i,1),_t(j()));var s=i.length;return se(function(d){for(var m=-1,x=Ze(d.length,s);++m<x;)d[m]=i[m].call(this,d[m]);return vt(e,this,d)})}),oa=se(function(e,i){var s=Tn(i,pr(oa));return gn(e,O,n,i,s)}),_l=se(function(e,i){var s=Tn(i,pr(_l));return gn(e,E,n,i,s)}),Bm=mn(function(e,i){return gn(e,V,n,n,n,i)});function Nm(e,i){if(typeof e!="function")throw new Ot(l);return i=i===n?i:ie(i),se(e,i)}function Wm(e,i){if(typeof e!="function")throw new Ot(l);return i=i==null?0:Ye(ie(i),0),se(function(s){var d=s[i],m=On(s,0,i);return d&&Cn(m,d),vt(e,this,m)})}function zm(e,i,s){var d=!0,m=!0;if(typeof e!="function")throw new Ot(l);return Me(s)&&(d="leading"in s?!!s.leading:d,m="trailing"in s?!!s.trailing:m),vl(e,i,{leading:d,maxWait:i,trailing:m})}function qm(e){return ml(e,1)}function Hm(e,i){return oa(Ho(i),e)}function Ym(){if(!arguments.length)return[];var e=arguments[0];return re(e)?e:[e]}function Um(e){return Ft(e,y)}function Gm(e,i){return i=typeof i=="function"?i:n,Ft(e,y,i)}function Qm(e){return Ft(e,p|y)}function Vm(e,i){return i=typeof i=="function"?i:n,Ft(e,p|y,i)}function Xm(e,i){return i==null||lu(e,i,Qe(i))}function Gt(e,i){return e===i||e!==e&&i!==i}var jm=Ei(Mo),Km=Ei(function(e,i){return e>=i}),Kn=gu((function(){return arguments})())?gu:function(e){return Le(e)&&ve.call(e,"callee")&&!tu.call(e,"callee")},re=M.isArray,Jm=Ls?_t(Ls):ap;function lt(e){return e!=null&&$i(e.length)&&!wn(e)}function Be(e){return Le(e)&&lt(e)}function Zm(e){return e===!0||e===!1||Le(e)&&rt(e)==st}var Dn=dd||ma,e0=$s?_t($s):sp;function t0(e){return Le(e)&&e.nodeType===1&&!Lr(e)}function n0(e){if(e==null)return!0;if(lt(e)&&(re(e)||typeof e=="string"||typeof e.splice=="function"||Dn(e)||gr(e)||Kn(e)))return!e.length;var i=et(e);if(i==wt||i==bt)return!e.size;if(Fr(e))return!Fo(e).length;for(var s in e)if(ve.call(e,s))return!1;return!0}function r0(e,i){return Mr(e,i)}function i0(e,i,s){s=typeof s=="function"?s:n;var d=s?s(e,i):n;return d===n?Mr(e,i,n,s):!!d}function aa(e){if(!Le(e))return!1;var i=rt(e);return i==ln||i==_n||typeof e.message=="string"&&typeof e.name=="string"&&!Lr(e)}function o0(e){return typeof e=="number"&&ru(e)}function wn(e){if(!Me(e))return!1;var i=rt(e);return i==tr||i==Vr||i==Wn||i==Kr}function kl(e){return typeof e=="number"&&e==ie(e)}function $i(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=qe}function Me(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}function Le(e){return e!=null&&typeof e=="object"}var Il=Bs?_t(Bs):lp;function a0(e,i){return e===i||Do(e,i,jo(i))}function s0(e,i,s){return s=typeof s=="function"?s:n,Do(e,i,jo(i),s)}function u0(e){return Sl(e)&&e!=+e}function l0(e){if(Gp(e))throw new ne(u);return mu(e)}function c0(e){return e===null}function f0(e){return e==null}function Sl(e){return typeof e=="number"||Le(e)&&rt(e)==kn}function Lr(e){if(!Le(e)||rt(e)!=Pt)return!1;var i=ci(e);if(i===null)return!0;var s=ve.call(i,"constructor")&&i.constructor;return typeof s=="function"&&s instanceof s&&ai.call(s)==sd}var sa=Ns?_t(Ns):cp;function h0(e){return kl(e)&&e>=-qe&&e<=qe}var Cl=Ws?_t(Ws):fp;function Bi(e){return typeof e=="string"||!re(e)&&Le(e)&&rt(e)==zn}function It(e){return typeof e=="symbol"||Le(e)&&rt(e)==nr}var gr=zs?_t(zs):hp;function d0(e){return e===n}function p0(e){return Le(e)&&et(e)==qn}function g0(e){return Le(e)&&rt(e)==R}var m0=Ei(Ro),y0=Ei(function(e,i){return e<=i});function Tl(e){if(!e)return[];if(lt(e))return Bi(e)?Yt(e):ut(e);if(kr&&e[kr])return Xh(e[kr]());var i=et(e),s=i==wt?_o:i==bt?ri:mr;return s(e)}function bn(e){if(!e)return e===0?e:0;if(e=$t(e),e===Te||e===-Te){var i=e<0?-1:1;return i*Wt}return e===e?e:0}function ie(e){var i=bn(e),s=i%1;return i===i?s?i-s:i:0}function El(e){return e?Qn(ie(e),0,Fe):0}function $t(e){if(typeof e=="number")return e;if(It(e))return _;if(Me(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=Me(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=Qs(e);var s=Jf.test(e);return s||eh.test(e)?Oh(e.slice(2),s?2:8):Kf.test(e)?_:+e}function Pl(e){return Jt(e,ct(e))}function w0(e){return e?Qn(ie(e),-qe,qe):e===0?e:0}function xe(e){return e==null?"":kt(e)}var b0=hr(function(e,i){if(Fr(i)||lt(i)){Jt(i,Qe(i),e);return}for(var s in i)ve.call(i,s)&&Er(e,s,i[s])}),Al=hr(function(e,i){Jt(i,ct(i),e)}),Ni=hr(function(e,i,s,d){Jt(i,ct(i),e,d)}),x0=hr(function(e,i,s,d){Jt(i,Qe(i),e,d)}),v0=mn(Eo);function _0(e,i){var s=fr(e);return i==null?s:uu(s,i)}var k0=se(function(e,i){e=ke(e);var s=-1,d=i.length,m=d>2?i[2]:n;for(m&&it(i[0],i[1],m)&&(d=1);++s<d;)for(var x=i[s],v=ct(x),k=-1,T=v.length;++k<T;){var L=v[k],$=e[L];($===n||Gt($,ur[L])&&!ve.call(e,L))&&(e[L]=x[L])}return e}),I0=se(function(e){return e.push(n,Qu),vt(Ml,n,e)});function S0(e,i){return Hs(e,j(i,3),Kt)}function C0(e,i){return Hs(e,j(i,3),Ao)}function T0(e,i){return e==null?e:Po(e,j(i,3),ct)}function E0(e,i){return e==null?e:du(e,j(i,3),ct)}function P0(e,i){return e&&Kt(e,j(i,3))}function A0(e,i){return e&&Ao(e,j(i,3))}function M0(e){return e==null?[]:xi(e,Qe(e))}function O0(e){return e==null?[]:xi(e,ct(e))}function ua(e,i,s){var d=e==null?n:Vn(e,i);return d===n?s:d}function D0(e,i){return e!=null&&ju(e,i,np)}function la(e,i){return e!=null&&ju(e,i,rp)}var F0=qu(function(e,i,s){i!=null&&typeof i.toString!="function"&&(i=si.call(i)),e[i]=s},fa(ft)),R0=qu(function(e,i,s){i!=null&&typeof i.toString!="function"&&(i=si.call(i)),ve.call(e,i)?e[i].push(s):e[i]=[s]},j),L0=se(Ar);function Qe(e){return lt(e)?au(e):Fo(e)}function ct(e){return lt(e)?au(e,!0):dp(e)}function $0(e,i){var s={};return i=j(i,3),Kt(e,function(d,m,x){pn(s,i(d,m,x),d)}),s}function B0(e,i){var s={};return i=j(i,3),Kt(e,function(d,m,x){pn(s,m,i(d,m,x))}),s}var N0=hr(function(e,i,s){vi(e,i,s)}),Ml=hr(function(e,i,s,d){vi(e,i,s,d)}),W0=mn(function(e,i){var s={};if(e==null)return s;var d=!1;i=Pe(i,function(x){return x=Mn(x,e),d||(d=x.length>1),x}),Jt(e,Vo(e),s),d&&(s=Ft(s,p|b|y,Fp));for(var m=i.length;m--;)Wo(s,i[m]);return s});function z0(e,i){return Ol(e,Li(j(i)))}var q0=mn(function(e,i){return e==null?{}:gp(e,i)});function Ol(e,i){if(e==null)return{};var s=Pe(Vo(e),function(d){return[d]});return i=j(i),ku(e,s,function(d,m){return i(d,m[0])})}function H0(e,i,s){i=Mn(i,e);var d=-1,m=i.length;for(m||(m=1,e=n);++d<m;){var x=e==null?n:e[Zt(i[d])];x===n&&(d=m,x=s),e=wn(x)?x.call(e):x}return e}function Y0(e,i,s){return e==null?e:Or(e,i,s)}function U0(e,i,s,d){return d=typeof d=="function"?d:n,e==null?e:Or(e,i,s,d)}var Dl=Uu(Qe),Fl=Uu(ct);function G0(e,i,s){var d=re(e),m=d||Dn(e)||gr(e);if(i=j(i,4),s==null){var x=e&&e.constructor;m?s=d?new x:[]:Me(e)?s=wn(x)?fr(ci(e)):{}:s={}}return(m?Mt:Kt)(e,function(v,k,T){return i(s,v,k,T)}),s}function Q0(e,i){return e==null?!0:Wo(e,i)}function V0(e,i,s){return e==null?e:Eu(e,i,Ho(s))}function X0(e,i,s,d){return d=typeof d=="function"?d:n,e==null?e:Eu(e,i,Ho(s),d)}function mr(e){return e==null?[]:vo(e,Qe(e))}function j0(e){return e==null?[]:vo(e,ct(e))}function K0(e,i,s){return s===n&&(s=i,i=n),s!==n&&(s=$t(s),s=s===s?s:0),i!==n&&(i=$t(i),i=i===i?i:0),Qn($t(e),i,s)}function J0(e,i,s){return i=bn(i),s===n?(s=i,i=0):s=bn(s),e=$t(e),ip(e,i,s)}function Z0(e,i,s){if(s&&typeof s!="boolean"&&it(e,i,s)&&(i=s=n),s===n&&(typeof i=="boolean"?(s=i,i=n):typeof e=="boolean"&&(s=e,e=n)),e===n&&i===n?(e=0,i=1):(e=bn(e),i===n?(i=e,e=0):i=bn(i)),e>i){var d=e;e=i,i=d}if(s||e%1||i%1){var m=iu();return Ze(e+m*(i-e+Mh("1e-"+((m+"").length-1))),i)}return $o(e,i)}var e1=dr(function(e,i,s){return i=i.toLowerCase(),e+(s?Rl(i):i)});function Rl(e){return ca(xe(e).toLowerCase())}function Ll(e){return e=xe(e),e&&e.replace(nh,Yh).replace(vh,"")}function t1(e,i,s){e=xe(e),i=kt(i);var d=e.length;s=s===n?d:Qn(ie(s),0,d);var m=s;return s-=i.length,s>=0&&e.slice(s,m)==i}function n1(e){return e=xe(e),e&&Lf.test(e)?e.replace(ds,Uh):e}function r1(e){return e=xe(e),e&&qf.test(e)?e.replace(io,"\\$&"):e}var i1=dr(function(e,i,s){return e+(s?"-":"")+i.toLowerCase()}),o1=dr(function(e,i,s){return e+(s?" ":"")+i.toLowerCase()}),a1=Nu("toLowerCase");function s1(e,i,s){e=xe(e),i=ie(i);var d=i?ar(e):0;if(!i||d>=i)return e;var m=(i-d)/2;return Ti(pi(m),s)+e+Ti(di(m),s)}function u1(e,i,s){e=xe(e),i=ie(i);var d=i?ar(e):0;return i&&d<i?e+Ti(i-d,s):e}function l1(e,i,s){e=xe(e),i=ie(i);var d=i?ar(e):0;return i&&d<i?Ti(i-d,s)+e:e}function c1(e,i,s){return s||i==null?i=0:i&&(i=+i),yd(xe(e).replace(oo,""),i||0)}function f1(e,i,s){return(s?it(e,i,s):i===n)?i=1:i=ie(i),Bo(xe(e),i)}function h1(){var e=arguments,i=xe(e[0]);return e.length<3?i:i.replace(e[1],e[2])}var d1=dr(function(e,i,s){return e+(s?"_":"")+i.toLowerCase()});function p1(e,i,s){return s&&typeof s!="number"&&it(e,i,s)&&(i=s=n),s=s===n?Fe:s>>>0,s?(e=xe(e),e&&(typeof i=="string"||i!=null&&!sa(i))&&(i=kt(i),!i&&or(e))?On(Yt(e),0,s):e.split(i,s)):[]}var g1=dr(function(e,i,s){return e+(s?" ":"")+ca(i)});function m1(e,i,s){return e=xe(e),s=s==null?0:Qn(ie(s),0,e.length),i=kt(i),e.slice(s,s+i.length)==i}function y1(e,i,s){var d=w.templateSettings;s&&it(e,i,s)&&(i=n),e=xe(e),i=Ni({},i,d,Gu);var m=Ni({},i.imports,d.imports,Gu),x=Qe(m),v=vo(m,x),k,T,L=0,$=i.interpolate||Jr,B="__p += '",H=ko((i.escape||Jr).source+"|"+$.source+"|"+($===ps?jf:Jr).source+"|"+(i.evaluate||Jr).source+"|$","g"),G="//# sourceURL="+(ve.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ch+"]")+`
`;e.replace(H,function(Z,le,he,St,ot,Ct){return he||(he=St),B+=e.slice(L,Ct).replace(rh,Gh),le&&(k=!0,B+=`' +
__e(`+le+`) +
'`),ot&&(T=!0,B+=`';
`+ot+`;
__p += '`),he&&(B+=`' +
((__t = (`+he+`)) == null ? '' : __t) +
'`),L=Ct+Z.length,Z}),B+=`';
`;var J=ve.call(i,"variable")&&i.variable;if(!J)B=`with (obj) {
`+B+`
}
`;else if(Vf.test(J))throw new ne(c);B=(T?B.replace(Ht,""):B).replace(Df,"$1").replace(Ff,"$1;"),B="function("+(J||"obj")+`) {
`+(J?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(k?", __e = _.escape":"")+(T?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+B+`return __p
}`;var oe=Bl(function(){return me(x,G+"return "+B).apply(n,v)});if(oe.source=B,aa(oe))throw oe;return oe}function w1(e){return xe(e).toLowerCase()}function b1(e){return xe(e).toUpperCase()}function x1(e,i,s){if(e=xe(e),e&&(s||i===n))return Qs(e);if(!e||!(i=kt(i)))return e;var d=Yt(e),m=Yt(i),x=Vs(d,m),v=Xs(d,m)+1;return On(d,x,v).join("")}function v1(e,i,s){if(e=xe(e),e&&(s||i===n))return e.slice(0,Ks(e)+1);if(!e||!(i=kt(i)))return e;var d=Yt(e),m=Xs(d,Yt(i))+1;return On(d,0,m).join("")}function _1(e,i,s){if(e=xe(e),e&&(s||i===n))return e.replace(oo,"");if(!e||!(i=kt(i)))return e;var d=Yt(e),m=Vs(d,Yt(i));return On(d,m).join("")}function k1(e,i){var s=de,d=X;if(Me(i)){var m="separator"in i?i.separator:m;s="length"in i?ie(i.length):s,d="omission"in i?kt(i.omission):d}e=xe(e);var x=e.length;if(or(e)){var v=Yt(e);x=v.length}if(s>=x)return e;var k=s-ar(d);if(k<1)return d;var T=v?On(v,0,k).join(""):e.slice(0,k);if(m===n)return T+d;if(v&&(k+=T.length-k),sa(m)){if(e.slice(k).search(m)){var L,$=T;for(m.global||(m=ko(m.source,xe(gs.exec(m))+"g")),m.lastIndex=0;L=m.exec($);)var B=L.index;T=T.slice(0,B===n?k:B)}}else if(e.indexOf(kt(m),k)!=k){var H=T.lastIndexOf(m);H>-1&&(T=T.slice(0,H))}return T+d}function I1(e){return e=xe(e),e&&Rf.test(e)?e.replace(hs,Zh):e}var S1=dr(function(e,i,s){return e+(s?" ":"")+i.toUpperCase()}),ca=Nu("toUpperCase");function $l(e,i,s){return e=xe(e),i=s?n:i,i===n?Vh(e)?nd(e):Nh(e):e.match(i)||[]}var Bl=se(function(e,i){try{return vt(e,n,i)}catch(s){return aa(s)?s:new ne(s)}}),C1=mn(function(e,i){return Mt(i,function(s){s=Zt(s),pn(e,s,ia(e[s],e))}),e});function T1(e){var i=e==null?0:e.length,s=j();return e=i?Pe(e,function(d){if(typeof d[1]!="function")throw new Ot(l);return[s(d[0]),d[1]]}):[],se(function(d){for(var m=-1;++m<i;){var x=e[m];if(vt(x[0],this,d))return vt(x[1],this,d)}})}function E1(e){return Zd(Ft(e,p))}function fa(e){return function(){return e}}function P1(e,i){return e==null||e!==e?i:e}var A1=zu(),M1=zu(!0);function ft(e){return e}function ha(e){return yu(typeof e=="function"?e:Ft(e,p))}function O1(e){return bu(Ft(e,p))}function D1(e,i){return xu(e,Ft(i,p))}var F1=se(function(e,i){return function(s){return Ar(s,e,i)}}),R1=se(function(e,i){return function(s){return Ar(e,s,i)}});function da(e,i,s){var d=Qe(i),m=xi(i,d);s==null&&!(Me(i)&&(m.length||!d.length))&&(s=i,i=e,e=this,m=xi(i,Qe(i)));var x=!(Me(s)&&"chain"in s)||!!s.chain,v=wn(e);return Mt(m,function(k){var T=i[k];e[k]=T,v&&(e.prototype[k]=function(){var L=this.__chain__;if(x||L){var $=e(this.__wrapped__),B=$.__actions__=ut(this.__actions__);return B.push({func:T,args:arguments,thisArg:e}),$.__chain__=L,$}return T.apply(e,Cn([this.value()],arguments))})}),e}function L1(){return je._===this&&(je._=ud),this}function pa(){}function $1(e){return e=ie(e),se(function(i){return vu(i,e)})}var B1=Uo(Pe),N1=Uo(qs),W1=Uo(mo);function Nl(e){return Jo(e)?yo(Zt(e)):mp(e)}function z1(e){return function(i){return e==null?n:Vn(e,i)}}var q1=Hu(),H1=Hu(!0);function ga(){return[]}function ma(){return!1}function Y1(){return{}}function U1(){return""}function G1(){return!0}function Q1(e,i){if(e=ie(e),e<1||e>qe)return[];var s=Fe,d=Ze(e,Fe);i=j(i),e-=Fe;for(var m=xo(d,i);++s<e;)i(s);return m}function V1(e){return re(e)?Pe(e,Zt):It(e)?[e]:ut(ol(xe(e)))}function X1(e){var i=++ad;return xe(e)+i}var j1=Ci(function(e,i){return e+i},0),K1=Go("ceil"),J1=Ci(function(e,i){return e/i},1),Z1=Go("floor");function ey(e){return e&&e.length?bi(e,ft,Mo):n}function ty(e,i){return e&&e.length?bi(e,j(i,2),Mo):n}function ny(e){return Us(e,ft)}function ry(e,i){return Us(e,j(i,2))}function iy(e){return e&&e.length?bi(e,ft,Ro):n}function oy(e,i){return e&&e.length?bi(e,j(i,2),Ro):n}var ay=Ci(function(e,i){return e*i},1),sy=Go("round"),uy=Ci(function(e,i){return e-i},0);function ly(e){return e&&e.length?bo(e,ft):0}function cy(e,i){return e&&e.length?bo(e,j(i,2)):0}return w.after=Om,w.ary=ml,w.assign=b0,w.assignIn=Al,w.assignInWith=Ni,w.assignWith=x0,w.at=v0,w.before=yl,w.bind=ia,w.bindAll=C1,w.bindKey=wl,w.castArray=Ym,w.chain=dl,w.chunk=Zp,w.compact=eg,w.concat=tg,w.cond=T1,w.conforms=E1,w.constant=fa,w.countBy=lm,w.create=_0,w.curry=bl,w.curryRight=xl,w.debounce=vl,w.defaults=k0,w.defaultsDeep=I0,w.defer=Dm,w.delay=Fm,w.difference=ng,w.differenceBy=rg,w.differenceWith=ig,w.drop=og,w.dropRight=ag,w.dropRightWhile=sg,w.dropWhile=ug,w.fill=lg,w.filter=fm,w.flatMap=pm,w.flatMapDeep=gm,w.flatMapDepth=mm,w.flatten=ll,w.flattenDeep=cg,w.flattenDepth=fg,w.flip=Rm,w.flow=A1,w.flowRight=M1,w.fromPairs=hg,w.functions=M0,w.functionsIn=O0,w.groupBy=ym,w.initial=pg,w.intersection=gg,w.intersectionBy=mg,w.intersectionWith=yg,w.invert=F0,w.invertBy=R0,w.invokeMap=bm,w.iteratee=ha,w.keyBy=xm,w.keys=Qe,w.keysIn=ct,w.map=Di,w.mapKeys=$0,w.mapValues=B0,w.matches=O1,w.matchesProperty=D1,w.memoize=Ri,w.merge=N0,w.mergeWith=Ml,w.method=F1,w.methodOf=R1,w.mixin=da,w.negate=Li,w.nthArg=$1,w.omit=W0,w.omitBy=z0,w.once=Lm,w.orderBy=vm,w.over=B1,w.overArgs=$m,w.overEvery=N1,w.overSome=W1,w.partial=oa,w.partialRight=_l,w.partition=_m,w.pick=q0,w.pickBy=Ol,w.property=Nl,w.propertyOf=z1,w.pull=vg,w.pullAll=fl,w.pullAllBy=_g,w.pullAllWith=kg,w.pullAt=Ig,w.range=q1,w.rangeRight=H1,w.rearg=Bm,w.reject=Sm,w.remove=Sg,w.rest=Nm,w.reverse=na,w.sampleSize=Tm,w.set=Y0,w.setWith=U0,w.shuffle=Em,w.slice=Cg,w.sortBy=Mm,w.sortedUniq=Dg,w.sortedUniqBy=Fg,w.split=p1,w.spread=Wm,w.tail=Rg,w.take=Lg,w.takeRight=$g,w.takeRightWhile=Bg,w.takeWhile=Ng,w.tap=em,w.throttle=zm,w.thru=Oi,w.toArray=Tl,w.toPairs=Dl,w.toPairsIn=Fl,w.toPath=V1,w.toPlainObject=Pl,w.transform=G0,w.unary=qm,w.union=Wg,w.unionBy=zg,w.unionWith=qg,w.uniq=Hg,w.uniqBy=Yg,w.uniqWith=Ug,w.unset=Q0,w.unzip=ra,w.unzipWith=hl,w.update=V0,w.updateWith=X0,w.values=mr,w.valuesIn=j0,w.without=Gg,w.words=$l,w.wrap=Hm,w.xor=Qg,w.xorBy=Vg,w.xorWith=Xg,w.zip=jg,w.zipObject=Kg,w.zipObjectDeep=Jg,w.zipWith=Zg,w.entries=Dl,w.entriesIn=Fl,w.extend=Al,w.extendWith=Ni,da(w,w),w.add=j1,w.attempt=Bl,w.camelCase=e1,w.capitalize=Rl,w.ceil=K1,w.clamp=K0,w.clone=Um,w.cloneDeep=Qm,w.cloneDeepWith=Vm,w.cloneWith=Gm,w.conformsTo=Xm,w.deburr=Ll,w.defaultTo=P1,w.divide=J1,w.endsWith=t1,w.eq=Gt,w.escape=n1,w.escapeRegExp=r1,w.every=cm,w.find=hm,w.findIndex=sl,w.findKey=S0,w.findLast=dm,w.findLastIndex=ul,w.findLastKey=C0,w.floor=Z1,w.forEach=pl,w.forEachRight=gl,w.forIn=T0,w.forInRight=E0,w.forOwn=P0,w.forOwnRight=A0,w.get=ua,w.gt=jm,w.gte=Km,w.has=D0,w.hasIn=la,w.head=cl,w.identity=ft,w.includes=wm,w.indexOf=dg,w.inRange=J0,w.invoke=L0,w.isArguments=Kn,w.isArray=re,w.isArrayBuffer=Jm,w.isArrayLike=lt,w.isArrayLikeObject=Be,w.isBoolean=Zm,w.isBuffer=Dn,w.isDate=e0,w.isElement=t0,w.isEmpty=n0,w.isEqual=r0,w.isEqualWith=i0,w.isError=aa,w.isFinite=o0,w.isFunction=wn,w.isInteger=kl,w.isLength=$i,w.isMap=Il,w.isMatch=a0,w.isMatchWith=s0,w.isNaN=u0,w.isNative=l0,w.isNil=f0,w.isNull=c0,w.isNumber=Sl,w.isObject=Me,w.isObjectLike=Le,w.isPlainObject=Lr,w.isRegExp=sa,w.isSafeInteger=h0,w.isSet=Cl,w.isString=Bi,w.isSymbol=It,w.isTypedArray=gr,w.isUndefined=d0,w.isWeakMap=p0,w.isWeakSet=g0,w.join=wg,w.kebabCase=i1,w.last=Lt,w.lastIndexOf=bg,w.lowerCase=o1,w.lowerFirst=a1,w.lt=m0,w.lte=y0,w.max=ey,w.maxBy=ty,w.mean=ny,w.meanBy=ry,w.min=iy,w.minBy=oy,w.stubArray=ga,w.stubFalse=ma,w.stubObject=Y1,w.stubString=U1,w.stubTrue=G1,w.multiply=ay,w.nth=xg,w.noConflict=L1,w.noop=pa,w.now=Fi,w.pad=s1,w.padEnd=u1,w.padStart=l1,w.parseInt=c1,w.random=Z0,w.reduce=km,w.reduceRight=Im,w.repeat=f1,w.replace=h1,w.result=H0,w.round=sy,w.runInContext=S,w.sample=Cm,w.size=Pm,w.snakeCase=d1,w.some=Am,w.sortedIndex=Tg,w.sortedIndexBy=Eg,w.sortedIndexOf=Pg,w.sortedLastIndex=Ag,w.sortedLastIndexBy=Mg,w.sortedLastIndexOf=Og,w.startCase=g1,w.startsWith=m1,w.subtract=uy,w.sum=ly,w.sumBy=cy,w.template=y1,w.times=Q1,w.toFinite=bn,w.toInteger=ie,w.toLength=El,w.toLower=w1,w.toNumber=$t,w.toSafeInteger=w0,w.toString=xe,w.toUpper=b1,w.trim=x1,w.trimEnd=v1,w.trimStart=_1,w.truncate=k1,w.unescape=I1,w.uniqueId=X1,w.upperCase=S1,w.upperFirst=ca,w.each=pl,w.eachRight=gl,w.first=cl,da(w,(function(){var e={};return Kt(w,function(i,s){ve.call(w.prototype,s)||(e[s]=i)}),e})(),{chain:!1}),w.VERSION=o,Mt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){w[e].placeholder=w}),Mt(["drop","take"],function(e,i){ce.prototype[e]=function(s){s=s===n?1:Ye(ie(s),0);var d=this.__filtered__&&!i?new ce(this):this.clone();return d.__filtered__?d.__takeCount__=Ze(s,d.__takeCount__):d.__views__.push({size:Ze(s,Fe),type:e+(d.__dir__<0?"Right":"")}),d},ce.prototype[e+"Right"]=function(s){return this.reverse()[e](s).reverse()}}),Mt(["filter","map","takeWhile"],function(e,i){var s=i+1,d=s==Ae||s==Ge;ce.prototype[e]=function(m){var x=this.clone();return x.__iteratees__.push({iteratee:j(m,3),type:s}),x.__filtered__=x.__filtered__||d,x}}),Mt(["head","last"],function(e,i){var s="take"+(i?"Right":"");ce.prototype[e]=function(){return this[s](1).value()[0]}}),Mt(["initial","tail"],function(e,i){var s="drop"+(i?"":"Right");ce.prototype[e]=function(){return this.__filtered__?new ce(this):this[s](1)}}),ce.prototype.compact=function(){return this.filter(ft)},ce.prototype.find=function(e){return this.filter(e).head()},ce.prototype.findLast=function(e){return this.reverse().find(e)},ce.prototype.invokeMap=se(function(e,i){return typeof e=="function"?new ce(this):this.map(function(s){return Ar(s,e,i)})}),ce.prototype.reject=function(e){return this.filter(Li(j(e)))},ce.prototype.slice=function(e,i){e=ie(e);var s=this;return s.__filtered__&&(e>0||i<0)?new ce(s):(e<0?s=s.takeRight(-e):e&&(s=s.drop(e)),i!==n&&(i=ie(i),s=i<0?s.dropRight(-i):s.take(i-e)),s)},ce.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},ce.prototype.toArray=function(){return this.take(Fe)},Kt(ce.prototype,function(e,i){var s=/^(?:filter|find|map|reject)|While$/.test(i),d=/^(?:head|last)$/.test(i),m=w[d?"take"+(i=="last"?"Right":""):i],x=d||/^find/.test(i);m&&(w.prototype[i]=function(){var v=this.__wrapped__,k=d?[1]:arguments,T=v instanceof ce,L=k[0],$=T||re(v),B=function(le){var he=m.apply(w,Cn([le],k));return d&&H?he[0]:he};$&&s&&typeof L=="function"&&L.length!=1&&(T=$=!1);var H=this.__chain__,G=!!this.__actions__.length,J=x&&!H,oe=T&&!G;if(!x&&$){v=oe?v:new ce(this);var Z=e.apply(v,k);return Z.__actions__.push({func:Oi,args:[B],thisArg:n}),new Dt(Z,H)}return J&&oe?e.apply(this,k):(Z=this.thru(B),J?d?Z.value()[0]:Z.value():Z)})}),Mt(["pop","push","shift","sort","splice","unshift"],function(e){var i=ii[e],s=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",d=/^(?:pop|shift)$/.test(e);w.prototype[e]=function(){var m=arguments;if(d&&!this.__chain__){var x=this.value();return i.apply(re(x)?x:[],m)}return this[s](function(v){return i.apply(re(v)?v:[],m)})}}),Kt(ce.prototype,function(e,i){var s=w[i];if(s){var d=s.name+"";ve.call(cr,d)||(cr[d]=[]),cr[d].push({name:i,func:s})}}),cr[Si(n,A).name]=[{name:"wrapper",func:n}],ce.prototype.clone=Id,ce.prototype.reverse=Sd,ce.prototype.value=Cd,w.prototype.at=tm,w.prototype.chain=nm,w.prototype.commit=rm,w.prototype.next=im,w.prototype.plant=am,w.prototype.reverse=sm,w.prototype.toJSON=w.prototype.valueOf=w.prototype.value=um,w.prototype.first=w.prototype.head,kr&&(w.prototype[kr]=om),w}),sr=rd();Hn?((Hn.exports=sr)._=sr,fo._=sr):je._=sr}).call(my)})(zr,zr.exports)),zr.exports}var wy=yy();const wa={projectDir:"powerJournal",outputDir:"reports",coreDir:"core",devLogging:!0,devMode:!1,reportFileExtension:".pjf.md"};async function by(r){if(!r||typeof r!="object"||Array.isArray(r))return wa;try{return wy.merge({},wa,r)}catch(t){return console.warn("[PowerJournal] Failed to merge user config, using defaults.",t),wa}}const $c=6048e5,xy=864e5,vy=6e4,_y=36e5,ky=1e3,Yl=Symbol.for("constructDateFrom");function Ve(r,t){return typeof r=="function"?r(t):r&&typeof r=="object"&&Yl in r?r[Yl](t):r instanceof Date?new r.constructor(t):new Date(t)}function Ue(r,t){return Ve(t||r,r)}function es(r,t,n){const o=Ue(r,n?.in);return isNaN(t)?Ve(n?.in||r,NaN):(t&&o.setDate(o.getDate()+t),o)}let Iy={};function vr(){return Iy}function $n(r,t){const n=vr(),o=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=Ue(r,t?.in),u=a.getDay(),l=(u<o?7:0)+u-o;return a.setDate(a.getDate()-l),a.setHours(0,0,0,0),a}function xr(r,t){return $n(r,{...t,weekStartsOn:1})}function Bc(r,t){const n=Ue(r,t?.in),o=n.getFullYear(),a=Ve(n,0);a.setFullYear(o+1,0,4),a.setHours(0,0,0,0);const u=xr(a),l=Ve(n,0);l.setFullYear(o,0,4),l.setHours(0,0,0,0);const c=xr(l);return n.getTime()>=u.getTime()?o+1:n.getTime()>=c.getTime()?o:o-1}function Vi(r){const t=Ue(r),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+r-+n}function Nc(r,...t){const n=Ve.bind(null,t.find(o=>typeof o=="object"));return t.map(n)}function Ul(r,t){const n=Ue(r,t?.in);return n.setHours(0,0,0,0),n}function Wc(r,t,n){const[o,a]=Nc(n?.in,r,t),u=Ul(o),l=Ul(a),c=+u-Vi(u),f=+l-Vi(l);return Math.round((c-f)/xy)}function Sy(r,t){const n=Bc(r,t),o=Ve(r,0);return o.setFullYear(n,0,4),o.setHours(0,0,0,0),xr(o)}function Cy(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function Ty(r){return!(!Cy(r)&&typeof r!="number"||isNaN(+Ue(r)))}function Ey(r,t,n){const[o,a]=Nc(n?.in,r,t),u=Gl(o,a),l=Math.abs(Wc(o,a));o.setDate(o.getDate()-u*l);const c=+(Gl(o,a)===-u),f=u*(l-c);return f===0?0:f}function Gl(r,t){const n=r.getFullYear()-t.getFullYear()||r.getMonth()-t.getMonth()||r.getDate()-t.getDate()||r.getHours()-t.getHours()||r.getMinutes()-t.getMinutes()||r.getSeconds()-t.getSeconds()||r.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function Py(r,t){const n=Ue(r,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Ay={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},My=(r,t,n)=>{let o;const a=Ay[r];return typeof a=="string"?o=a:t===1?o=a.one:o=a.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+o:o+" ago":o};function ba(r){return(t={})=>{const n=t.width?String(t.width):r.defaultWidth;return r.formats[n]||r.formats[r.defaultWidth]}}const Oy={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Dy={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Fy={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ry={date:ba({formats:Oy,defaultWidth:"full"}),time:ba({formats:Dy,defaultWidth:"full"}),dateTime:ba({formats:Fy,defaultWidth:"full"})},Ly={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},$y=(r,t,n,o)=>Ly[r];function $r(r){return(t,n)=>{const o=n?.context?String(n.context):"standalone";let a;if(o==="formatting"&&r.formattingValues){const l=r.defaultFormattingWidth||r.defaultWidth,c=n?.width?String(n.width):l;a=r.formattingValues[c]||r.formattingValues[l]}else{const l=r.defaultWidth,c=n?.width?String(n.width):r.defaultWidth;a=r.values[c]||r.values[l]}const u=r.argumentCallback?r.argumentCallback(t):t;return a[u]}}const By={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ny={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Wy={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},zy={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},qy={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Hy={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Yy=(r,t)=>{const n=Number(r),o=n%100;if(o>20||o<10)switch(o%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Uy={ordinalNumber:Yy,era:$r({values:By,defaultWidth:"wide"}),quarter:$r({values:Ny,defaultWidth:"wide",argumentCallback:r=>r-1}),month:$r({values:Wy,defaultWidth:"wide"}),day:$r({values:zy,defaultWidth:"wide"}),dayPeriod:$r({values:qy,defaultWidth:"wide",formattingValues:Hy,defaultFormattingWidth:"wide"})};function Br(r){return(t,n={})=>{const o=n.width,a=o&&r.matchPatterns[o]||r.matchPatterns[r.defaultMatchWidth],u=t.match(a);if(!u)return null;const l=u[0],c=o&&r.parsePatterns[o]||r.parsePatterns[r.defaultParseWidth],f=Array.isArray(c)?Qy(c,p=>p.test(l)):Gy(c,p=>p.test(l));let h;h=r.valueCallback?r.valueCallback(f):f,h=n.valueCallback?n.valueCallback(h):h;const g=t.slice(l.length);return{value:h,rest:g}}}function Gy(r,t){for(const n in r)if(Object.prototype.hasOwnProperty.call(r,n)&&t(r[n]))return n}function Qy(r,t){for(let n=0;n<r.length;n++)if(t(r[n]))return n}function Vy(r){return(t,n={})=>{const o=t.match(r.matchPattern);if(!o)return null;const a=o[0],u=t.match(r.parsePattern);if(!u)return null;let l=r.valueCallback?r.valueCallback(u[0]):u[0];l=n.valueCallback?n.valueCallback(l):l;const c=t.slice(a.length);return{value:l,rest:c}}}const Xy=/^(\d+)(th|st|nd|rd)?/i,jy=/\d+/i,Ky={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Jy={any:[/^b/i,/^(a|c)/i]},Zy={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ew={any:[/1/i,/2/i,/3/i,/4/i]},tw={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},nw={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},rw={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},iw={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ow={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},aw={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},sw={ordinalNumber:Vy({matchPattern:Xy,parsePattern:jy,valueCallback:r=>parseInt(r,10)}),era:Br({matchPatterns:Ky,defaultMatchWidth:"wide",parsePatterns:Jy,defaultParseWidth:"any"}),quarter:Br({matchPatterns:Zy,defaultMatchWidth:"wide",parsePatterns:ew,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Br({matchPatterns:tw,defaultMatchWidth:"wide",parsePatterns:nw,defaultParseWidth:"any"}),day:Br({matchPatterns:rw,defaultMatchWidth:"wide",parsePatterns:iw,defaultParseWidth:"any"}),dayPeriod:Br({matchPatterns:ow,defaultMatchWidth:"any",parsePatterns:aw,defaultParseWidth:"any"})},zc={code:"en-US",formatDistance:My,formatLong:Ry,formatRelative:$y,localize:Uy,match:sw,options:{weekStartsOn:0,firstWeekContainsDate:1}};function uw(r,t){const n=Ue(r,t?.in);return Wc(n,Py(n))+1}function qc(r,t){const n=Ue(r,t?.in),o=+xr(n)-+Sy(n);return Math.round(o/$c)+1}function ts(r,t){const n=Ue(r,t?.in),o=n.getFullYear(),a=vr(),u=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,l=Ve(t?.in||r,0);l.setFullYear(o+1,0,u),l.setHours(0,0,0,0);const c=$n(l,t),f=Ve(t?.in||r,0);f.setFullYear(o,0,u),f.setHours(0,0,0,0);const h=$n(f,t);return+n>=+c?o+1:+n>=+h?o:o-1}function lw(r,t){const n=vr(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,a=ts(r,t),u=Ve(t?.in||r,0);return u.setFullYear(a,0,o),u.setHours(0,0,0,0),$n(u,t)}function Hc(r,t){const n=Ue(r,t?.in),o=+$n(n,t)-+lw(n,t);return Math.round(o/$c)+1}function _e(r,t){const n=r<0?"-":"",o=Math.abs(r).toString().padStart(t,"0");return n+o}const Fn={y(r,t){const n=r.getFullYear(),o=n>0?n:1-n;return _e(t==="yy"?o%100:o,t.length)},M(r,t){const n=r.getMonth();return t==="M"?String(n+1):_e(n+1,2)},d(r,t){return _e(r.getDate(),t.length)},a(r,t){const n=r.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(r,t){return _e(r.getHours()%12||12,t.length)},H(r,t){return _e(r.getHours(),t.length)},m(r,t){return _e(r.getMinutes(),t.length)},s(r,t){return _e(r.getSeconds(),t.length)},S(r,t){const n=t.length,o=r.getMilliseconds(),a=Math.trunc(o*Math.pow(10,n-3));return _e(a,t.length)}},yr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ql={G:function(r,t,n){const o=r.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(o,{width:"abbreviated"});case"GGGGG":return n.era(o,{width:"narrow"});case"GGGG":default:return n.era(o,{width:"wide"})}},y:function(r,t,n){if(t==="yo"){const o=r.getFullYear(),a=o>0?o:1-o;return n.ordinalNumber(a,{unit:"year"})}return Fn.y(r,t)},Y:function(r,t,n,o){const a=ts(r,o),u=a>0?a:1-a;if(t==="YY"){const l=u%100;return _e(l,2)}return t==="Yo"?n.ordinalNumber(u,{unit:"year"}):_e(u,t.length)},R:function(r,t){const n=Bc(r);return _e(n,t.length)},u:function(r,t){const n=r.getFullYear();return _e(n,t.length)},Q:function(r,t,n){const o=Math.ceil((r.getMonth()+1)/3);switch(t){case"Q":return String(o);case"QQ":return _e(o,2);case"Qo":return n.ordinalNumber(o,{unit:"quarter"});case"QQQ":return n.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(o,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(o,{width:"wide",context:"formatting"})}},q:function(r,t,n){const o=Math.ceil((r.getMonth()+1)/3);switch(t){case"q":return String(o);case"qq":return _e(o,2);case"qo":return n.ordinalNumber(o,{unit:"quarter"});case"qqq":return n.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(o,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(o,{width:"wide",context:"standalone"})}},M:function(r,t,n){const o=r.getMonth();switch(t){case"M":case"MM":return Fn.M(r,t);case"Mo":return n.ordinalNumber(o+1,{unit:"month"});case"MMM":return n.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(o,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(o,{width:"wide",context:"formatting"})}},L:function(r,t,n){const o=r.getMonth();switch(t){case"L":return String(o+1);case"LL":return _e(o+1,2);case"Lo":return n.ordinalNumber(o+1,{unit:"month"});case"LLL":return n.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(o,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(o,{width:"wide",context:"standalone"})}},w:function(r,t,n,o){const a=Hc(r,o);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):_e(a,t.length)},I:function(r,t,n){const o=qc(r);return t==="Io"?n.ordinalNumber(o,{unit:"week"}):_e(o,t.length)},d:function(r,t,n){return t==="do"?n.ordinalNumber(r.getDate(),{unit:"date"}):Fn.d(r,t)},D:function(r,t,n){const o=uw(r);return t==="Do"?n.ordinalNumber(o,{unit:"dayOfYear"}):_e(o,t.length)},E:function(r,t,n){const o=r.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(o,{width:"short",context:"formatting"});case"EEEE":default:return n.day(o,{width:"wide",context:"formatting"})}},e:function(r,t,n,o){const a=r.getDay(),u=(a-o.weekStartsOn+8)%7||7;switch(t){case"e":return String(u);case"ee":return _e(u,2);case"eo":return n.ordinalNumber(u,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(r,t,n,o){const a=r.getDay(),u=(a-o.weekStartsOn+8)%7||7;switch(t){case"c":return String(u);case"cc":return _e(u,t.length);case"co":return n.ordinalNumber(u,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(r,t,n){const o=r.getDay(),a=o===0?7:o;switch(t){case"i":return String(a);case"ii":return _e(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(o,{width:"short",context:"formatting"});case"iiii":default:return n.day(o,{width:"wide",context:"formatting"})}},a:function(r,t,n){const a=r.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(r,t,n){const o=r.getHours();let a;switch(o===12?a=yr.noon:o===0?a=yr.midnight:a=o/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(r,t,n){const o=r.getHours();let a;switch(o>=17?a=yr.evening:o>=12?a=yr.afternoon:o>=4?a=yr.morning:a=yr.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(r,t,n){if(t==="ho"){let o=r.getHours()%12;return o===0&&(o=12),n.ordinalNumber(o,{unit:"hour"})}return Fn.h(r,t)},H:function(r,t,n){return t==="Ho"?n.ordinalNumber(r.getHours(),{unit:"hour"}):Fn.H(r,t)},K:function(r,t,n){const o=r.getHours()%12;return t==="Ko"?n.ordinalNumber(o,{unit:"hour"}):_e(o,t.length)},k:function(r,t,n){let o=r.getHours();return o===0&&(o=24),t==="ko"?n.ordinalNumber(o,{unit:"hour"}):_e(o,t.length)},m:function(r,t,n){return t==="mo"?n.ordinalNumber(r.getMinutes(),{unit:"minute"}):Fn.m(r,t)},s:function(r,t,n){return t==="so"?n.ordinalNumber(r.getSeconds(),{unit:"second"}):Fn.s(r,t)},S:function(r,t){return Fn.S(r,t)},X:function(r,t,n){const o=r.getTimezoneOffset();if(o===0)return"Z";switch(t){case"X":return Xl(o);case"XXXX":case"XX":return er(o);case"XXXXX":case"XXX":default:return er(o,":")}},x:function(r,t,n){const o=r.getTimezoneOffset();switch(t){case"x":return Xl(o);case"xxxx":case"xx":return er(o);case"xxxxx":case"xxx":default:return er(o,":")}},O:function(r,t,n){const o=r.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Vl(o,":");case"OOOO":default:return"GMT"+er(o,":")}},z:function(r,t,n){const o=r.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Vl(o,":");case"zzzz":default:return"GMT"+er(o,":")}},t:function(r,t,n){const o=Math.trunc(+r/1e3);return _e(o,t.length)},T:function(r,t,n){return _e(+r,t.length)}};function Vl(r,t=""){const n=r>0?"-":"+",o=Math.abs(r),a=Math.trunc(o/60),u=o%60;return u===0?n+String(a):n+String(a)+t+_e(u,2)}function Xl(r,t){return r%60===0?(r>0?"-":"+")+_e(Math.abs(r)/60,2):er(r,t)}function er(r,t=""){const n=r>0?"-":"+",o=Math.abs(r),a=_e(Math.trunc(o/60),2),u=_e(o%60,2);return n+a+t+u}const jl=(r,t)=>{switch(r){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Yc=(r,t)=>{switch(r){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},cw=(r,t)=>{const n=r.match(/(P+)(p+)?/)||[],o=n[1],a=n[2];if(!a)return jl(r,t);let u;switch(o){case"P":u=t.dateTime({width:"short"});break;case"PP":u=t.dateTime({width:"medium"});break;case"PPP":u=t.dateTime({width:"long"});break;case"PPPP":default:u=t.dateTime({width:"full"});break}return u.replace("{{date}}",jl(o,t)).replace("{{time}}",Yc(a,t))},Na={p:Yc,P:cw},fw=/^D+$/,hw=/^Y+$/,dw=["D","DD","YY","YYYY"];function Uc(r){return fw.test(r)}function Gc(r){return hw.test(r)}function Wa(r,t,n){const o=pw(r,t,n);if(console.warn(o),dw.includes(r))throw new RangeError(o)}function pw(r,t,n){const o=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${t}\`) for formatting ${o} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const gw=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,mw=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yw=/^'([^]*?)'?$/,ww=/''/g,bw=/[a-zA-Z]/;function wr(r,t,n){const o=vr(),a=o.locale??zc,u=o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,l=o.weekStartsOn??o.locale?.options?.weekStartsOn??0,c=Ue(r,n?.in);if(!Ty(c))throw new RangeError("Invalid time value");let f=t.match(mw).map(g=>{const p=g[0];if(p==="p"||p==="P"){const b=Na[p];return b(g,a.formatLong)}return g}).join("").match(gw).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const p=g[0];if(p==="'")return{isToken:!1,value:xw(g)};if(Ql[p])return{isToken:!0,value:g};if(p.match(bw))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:g}});a.localize.preprocessor&&(f=a.localize.preprocessor(c,f));const h={firstWeekContainsDate:u,weekStartsOn:l,locale:a};return f.map(g=>{if(!g.isToken)return g.value;const p=g.value;(Gc(p)||Uc(p))&&Wa(p,t,String(r));const b=Ql[p[0]];return b(c,p,a.localize,h)}).join("")}function xw(r){const t=r.match(yw);return t?t[1].replace(ww,"'"):r}function vw(){return Object.assign({},vr())}function _w(r,t){const n=Ue(r,t?.in).getDay();return n===0?7:n}function kw(r,t){const n=Iw(t)?new t(0):Ve(t,0);return n.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()),n.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),n}function Iw(r){return typeof r=="function"&&r.prototype?.constructor===r}const Sw=10;class Qc{subPriority=0;validate(t,n){return!0}}class Cw extends Qc{constructor(t,n,o,a,u){super(),this.value=t,this.validateValue=n,this.setValue=o,this.priority=a,u&&(this.subPriority=u)}validate(t,n){return this.validateValue(t,this.value,n)}set(t,n,o){return this.setValue(t,n,this.value,o)}}class Tw extends Qc{priority=Sw;subPriority=-1;constructor(t,n){super(),this.context=t||(o=>Ve(n,o))}set(t,n){return n.timestampIsSet?t:Ve(t,kw(t,this.context))}}class we{run(t,n,o,a){const u=this.parse(t,n,o,a);return u?{setter:new Cw(u.value,this.validate,this.set,this.priority,this.subPriority),rest:u.rest}:null}validate(t,n,o){return!0}}class Ew extends we{priority=140;parse(t,n,o){switch(n){case"G":case"GG":case"GGG":return o.era(t,{width:"abbreviated"})||o.era(t,{width:"narrow"});case"GGGGG":return o.era(t,{width:"narrow"});case"GGGG":default:return o.era(t,{width:"wide"})||o.era(t,{width:"abbreviated"})||o.era(t,{width:"narrow"})}}set(t,n,o){return n.era=o,t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["R","u","t","T"]}const We={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},nn={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function ze(r,t){return r&&{value:t(r.value),rest:r.rest}}function Oe(r,t){const n=t.match(r);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function rn(r,t){const n=t.match(r);if(!n)return null;if(n[0]==="Z")return{value:0,rest:t.slice(1)};const o=n[1]==="+"?1:-1,a=n[2]?parseInt(n[2],10):0,u=n[3]?parseInt(n[3],10):0,l=n[5]?parseInt(n[5],10):0;return{value:o*(a*_y+u*vy+l*ky),rest:t.slice(n[0].length)}}function Vc(r){return Oe(We.anyDigitsSigned,r)}function $e(r,t){switch(r){case 1:return Oe(We.singleDigit,t);case 2:return Oe(We.twoDigits,t);case 3:return Oe(We.threeDigits,t);case 4:return Oe(We.fourDigits,t);default:return Oe(new RegExp("^\\d{1,"+r+"}"),t)}}function Xi(r,t){switch(r){case 1:return Oe(We.singleDigitSigned,t);case 2:return Oe(We.twoDigitsSigned,t);case 3:return Oe(We.threeDigitsSigned,t);case 4:return Oe(We.fourDigitsSigned,t);default:return Oe(new RegExp("^-?\\d{1,"+r+"}"),t)}}function ns(r){switch(r){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Xc(r,t){const n=t>0,o=n?t:1-t;let a;if(o<=50)a=r||100;else{const u=o+50,l=Math.trunc(u/100)*100,c=r>=u%100;a=r+l-(c?100:0)}return n?a:1-a}function jc(r){return r%400===0||r%4===0&&r%100!==0}class Pw extends we{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(t,n,o){const a=u=>({year:u,isTwoDigitYear:n==="yy"});switch(n){case"y":return ze($e(4,t),a);case"yo":return ze(o.ordinalNumber(t,{unit:"year"}),a);default:return ze($e(n.length,t),a)}}validate(t,n){return n.isTwoDigitYear||n.year>0}set(t,n,o){const a=t.getFullYear();if(o.isTwoDigitYear){const l=Xc(o.year,a);return t.setFullYear(l,0,1),t.setHours(0,0,0,0),t}const u=!("era"in n)||n.era===1?o.year:1-o.year;return t.setFullYear(u,0,1),t.setHours(0,0,0,0),t}}class Aw extends we{priority=130;parse(t,n,o){const a=u=>({year:u,isTwoDigitYear:n==="YY"});switch(n){case"Y":return ze($e(4,t),a);case"Yo":return ze(o.ordinalNumber(t,{unit:"year"}),a);default:return ze($e(n.length,t),a)}}validate(t,n){return n.isTwoDigitYear||n.year>0}set(t,n,o,a){const u=ts(t,a);if(o.isTwoDigitYear){const c=Xc(o.year,u);return t.setFullYear(c,0,a.firstWeekContainsDate),t.setHours(0,0,0,0),$n(t,a)}const l=!("era"in n)||n.era===1?o.year:1-o.year;return t.setFullYear(l,0,a.firstWeekContainsDate),t.setHours(0,0,0,0),$n(t,a)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class Mw extends we{priority=130;parse(t,n){return Xi(n==="R"?4:n.length,t)}set(t,n,o){const a=Ve(t,0);return a.setFullYear(o,0,4),a.setHours(0,0,0,0),xr(a)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class Ow extends we{priority=130;parse(t,n){return Xi(n==="u"?4:n.length,t)}set(t,n,o){return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class Dw extends we{priority=120;parse(t,n,o){switch(n){case"Q":case"QQ":return $e(n.length,t);case"Qo":return o.ordinalNumber(t,{unit:"quarter"});case"QQQ":return o.quarter(t,{width:"abbreviated",context:"formatting"})||o.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(t,{width:"wide",context:"formatting"})||o.quarter(t,{width:"abbreviated",context:"formatting"})||o.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=1&&n<=4}set(t,n,o){return t.setMonth((o-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class Fw extends we{priority=120;parse(t,n,o){switch(n){case"q":case"qq":return $e(n.length,t);case"qo":return o.ordinalNumber(t,{unit:"quarter"});case"qqq":return o.quarter(t,{width:"abbreviated",context:"standalone"})||o.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(t,{width:"wide",context:"standalone"})||o.quarter(t,{width:"abbreviated",context:"standalone"})||o.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=1&&n<=4}set(t,n,o){return t.setMonth((o-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class Rw extends we{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(t,n,o){const a=u=>u-1;switch(n){case"M":return ze(Oe(We.month,t),a);case"MM":return ze($e(2,t),a);case"Mo":return ze(o.ordinalNumber(t,{unit:"month"}),a);case"MMM":return o.month(t,{width:"abbreviated",context:"formatting"})||o.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(t,{width:"wide",context:"formatting"})||o.month(t,{width:"abbreviated",context:"formatting"})||o.month(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=11}set(t,n,o){return t.setMonth(o,1),t.setHours(0,0,0,0),t}}class Lw extends we{priority=110;parse(t,n,o){const a=u=>u-1;switch(n){case"L":return ze(Oe(We.month,t),a);case"LL":return ze($e(2,t),a);case"Lo":return ze(o.ordinalNumber(t,{unit:"month"}),a);case"LLL":return o.month(t,{width:"abbreviated",context:"standalone"})||o.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(t,{width:"wide",context:"standalone"})||o.month(t,{width:"abbreviated",context:"standalone"})||o.month(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=0&&n<=11}set(t,n,o){return t.setMonth(o,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function $w(r,t,n){const o=Ue(r,n?.in),a=Hc(o,n)-t;return o.setDate(o.getDate()-a*7),Ue(o,n?.in)}class Bw extends we{priority=100;parse(t,n,o){switch(n){case"w":return Oe(We.week,t);case"wo":return o.ordinalNumber(t,{unit:"week"});default:return $e(n.length,t)}}validate(t,n){return n>=1&&n<=53}set(t,n,o,a){return $n($w(t,o,a),a)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function Nw(r,t,n){const o=Ue(r,n?.in),a=qc(o,n)-t;return o.setDate(o.getDate()-a*7),o}class Ww extends we{priority=100;parse(t,n,o){switch(n){case"I":return Oe(We.week,t);case"Io":return o.ordinalNumber(t,{unit:"week"});default:return $e(n.length,t)}}validate(t,n){return n>=1&&n<=53}set(t,n,o){return xr(Nw(t,o))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const zw=[31,28,31,30,31,30,31,31,30,31,30,31],qw=[31,29,31,30,31,30,31,31,30,31,30,31];class Hw extends we{priority=90;subPriority=1;parse(t,n,o){switch(n){case"d":return Oe(We.date,t);case"do":return o.ordinalNumber(t,{unit:"date"});default:return $e(n.length,t)}}validate(t,n){const o=t.getFullYear(),a=jc(o),u=t.getMonth();return a?n>=1&&n<=qw[u]:n>=1&&n<=zw[u]}set(t,n,o){return t.setDate(o),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class Yw extends we{priority=90;subpriority=1;parse(t,n,o){switch(n){case"D":case"DD":return Oe(We.dayOfYear,t);case"Do":return o.ordinalNumber(t,{unit:"date"});default:return $e(n.length,t)}}validate(t,n){const o=t.getFullYear();return jc(o)?n>=1&&n<=366:n>=1&&n<=365}set(t,n,o){return t.setMonth(0,o),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function rs(r,t,n){const o=vr(),a=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??o.weekStartsOn??o.locale?.options?.weekStartsOn??0,u=Ue(r,n?.in),l=u.getDay(),f=(t%7+7)%7,h=7-a,g=t<0||t>6?t-(l+h)%7:(f+h)%7-(l+h)%7;return es(u,g,n)}class Uw extends we{priority=90;parse(t,n,o){switch(n){case"E":case"EE":case"EEE":return o.day(t,{width:"abbreviated",context:"formatting"})||o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return o.day(t,{width:"wide",context:"formatting"})||o.day(t,{width:"abbreviated",context:"formatting"})||o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=6}set(t,n,o,a){return t=rs(t,o,a),t.setHours(0,0,0,0),t}incompatibleTokens=["D","i","e","c","t","T"]}class Gw extends we{priority=90;parse(t,n,o,a){const u=l=>{const c=Math.floor((l-1)/7)*7;return(l+a.weekStartsOn+6)%7+c};switch(n){case"e":case"ee":return ze($e(n.length,t),u);case"eo":return ze(o.ordinalNumber(t,{unit:"day"}),u);case"eee":return o.day(t,{width:"abbreviated",context:"formatting"})||o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"});case"eeeee":return o.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return o.day(t,{width:"wide",context:"formatting"})||o.day(t,{width:"abbreviated",context:"formatting"})||o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=6}set(t,n,o,a){return t=rs(t,o,a),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class Qw extends we{priority=90;parse(t,n,o,a){const u=l=>{const c=Math.floor((l-1)/7)*7;return(l+a.weekStartsOn+6)%7+c};switch(n){case"c":case"cc":return ze($e(n.length,t),u);case"co":return ze(o.ordinalNumber(t,{unit:"day"}),u);case"ccc":return o.day(t,{width:"abbreviated",context:"standalone"})||o.day(t,{width:"short",context:"standalone"})||o.day(t,{width:"narrow",context:"standalone"});case"ccccc":return o.day(t,{width:"narrow",context:"standalone"});case"cccccc":return o.day(t,{width:"short",context:"standalone"})||o.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return o.day(t,{width:"wide",context:"standalone"})||o.day(t,{width:"abbreviated",context:"standalone"})||o.day(t,{width:"short",context:"standalone"})||o.day(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=0&&n<=6}set(t,n,o,a){return t=rs(t,o,a),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function Vw(r,t,n){const o=Ue(r,n?.in),a=_w(o,n),u=t-a;return es(o,u,n)}class Xw extends we{priority=90;parse(t,n,o){const a=u=>u===0?7:u;switch(n){case"i":case"ii":return $e(n.length,t);case"io":return o.ordinalNumber(t,{unit:"day"});case"iii":return ze(o.day(t,{width:"abbreviated",context:"formatting"})||o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"}),a);case"iiiii":return ze(o.day(t,{width:"narrow",context:"formatting"}),a);case"iiiiii":return ze(o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"}),a);case"iiii":default:return ze(o.day(t,{width:"wide",context:"formatting"})||o.day(t,{width:"abbreviated",context:"formatting"})||o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"}),a)}}validate(t,n){return n>=1&&n<=7}set(t,n,o){return t=Vw(t,o),t.setHours(0,0,0,0),t}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class jw extends we{priority=80;parse(t,n,o){switch(n){case"a":case"aa":case"aaa":return o.dayPeriod(t,{width:"abbreviated",context:"formatting"})||o.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(t,{width:"wide",context:"formatting"})||o.dayPeriod(t,{width:"abbreviated",context:"formatting"})||o.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,o){return t.setHours(ns(o),0,0,0),t}incompatibleTokens=["b","B","H","k","t","T"]}class Kw extends we{priority=80;parse(t,n,o){switch(n){case"b":case"bb":case"bbb":return o.dayPeriod(t,{width:"abbreviated",context:"formatting"})||o.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(t,{width:"wide",context:"formatting"})||o.dayPeriod(t,{width:"abbreviated",context:"formatting"})||o.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,o){return t.setHours(ns(o),0,0,0),t}incompatibleTokens=["a","B","H","k","t","T"]}class Jw extends we{priority=80;parse(t,n,o){switch(n){case"B":case"BB":case"BBB":return o.dayPeriod(t,{width:"abbreviated",context:"formatting"})||o.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(t,{width:"wide",context:"formatting"})||o.dayPeriod(t,{width:"abbreviated",context:"formatting"})||o.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,o){return t.setHours(ns(o),0,0,0),t}incompatibleTokens=["a","b","t","T"]}class Zw extends we{priority=70;parse(t,n,o){switch(n){case"h":return Oe(We.hour12h,t);case"ho":return o.ordinalNumber(t,{unit:"hour"});default:return $e(n.length,t)}}validate(t,n){return n>=1&&n<=12}set(t,n,o){const a=t.getHours()>=12;return a&&o<12?t.setHours(o+12,0,0,0):!a&&o===12?t.setHours(0,0,0,0):t.setHours(o,0,0,0),t}incompatibleTokens=["H","K","k","t","T"]}class eb extends we{priority=70;parse(t,n,o){switch(n){case"H":return Oe(We.hour23h,t);case"Ho":return o.ordinalNumber(t,{unit:"hour"});default:return $e(n.length,t)}}validate(t,n){return n>=0&&n<=23}set(t,n,o){return t.setHours(o,0,0,0),t}incompatibleTokens=["a","b","h","K","k","t","T"]}class tb extends we{priority=70;parse(t,n,o){switch(n){case"K":return Oe(We.hour11h,t);case"Ko":return o.ordinalNumber(t,{unit:"hour"});default:return $e(n.length,t)}}validate(t,n){return n>=0&&n<=11}set(t,n,o){return t.getHours()>=12&&o<12?t.setHours(o+12,0,0,0):t.setHours(o,0,0,0),t}incompatibleTokens=["h","H","k","t","T"]}class nb extends we{priority=70;parse(t,n,o){switch(n){case"k":return Oe(We.hour24h,t);case"ko":return o.ordinalNumber(t,{unit:"hour"});default:return $e(n.length,t)}}validate(t,n){return n>=1&&n<=24}set(t,n,o){const a=o<=24?o%24:o;return t.setHours(a,0,0,0),t}incompatibleTokens=["a","b","h","H","K","t","T"]}class rb extends we{priority=60;parse(t,n,o){switch(n){case"m":return Oe(We.minute,t);case"mo":return o.ordinalNumber(t,{unit:"minute"});default:return $e(n.length,t)}}validate(t,n){return n>=0&&n<=59}set(t,n,o){return t.setMinutes(o,0,0),t}incompatibleTokens=["t","T"]}class ib extends we{priority=50;parse(t,n,o){switch(n){case"s":return Oe(We.second,t);case"so":return o.ordinalNumber(t,{unit:"second"});default:return $e(n.length,t)}}validate(t,n){return n>=0&&n<=59}set(t,n,o){return t.setSeconds(o,0),t}incompatibleTokens=["t","T"]}class ob extends we{priority=30;parse(t,n){const o=a=>Math.trunc(a*Math.pow(10,-n.length+3));return ze($e(n.length,t),o)}set(t,n,o){return t.setMilliseconds(o),t}incompatibleTokens=["t","T"]}class ab extends we{priority=10;parse(t,n){switch(n){case"X":return rn(nn.basicOptionalMinutes,t);case"XX":return rn(nn.basic,t);case"XXXX":return rn(nn.basicOptionalSeconds,t);case"XXXXX":return rn(nn.extendedOptionalSeconds,t);case"XXX":default:return rn(nn.extended,t)}}set(t,n,o){return n.timestampIsSet?t:Ve(t,t.getTime()-Vi(t)-o)}incompatibleTokens=["t","T","x"]}class sb extends we{priority=10;parse(t,n){switch(n){case"x":return rn(nn.basicOptionalMinutes,t);case"xx":return rn(nn.basic,t);case"xxxx":return rn(nn.basicOptionalSeconds,t);case"xxxxx":return rn(nn.extendedOptionalSeconds,t);case"xxx":default:return rn(nn.extended,t)}}set(t,n,o){return n.timestampIsSet?t:Ve(t,t.getTime()-Vi(t)-o)}incompatibleTokens=["t","T","X"]}class ub extends we{priority=40;parse(t){return Vc(t)}set(t,n,o){return[Ve(t,o*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class lb extends we{priority=20;parse(t){return Vc(t)}set(t,n,o){return[Ve(t,o),{timestampIsSet:!0}]}incompatibleTokens="*"}const cb={G:new Ew,y:new Pw,Y:new Aw,R:new Mw,u:new Ow,Q:new Dw,q:new Fw,M:new Rw,L:new Lw,w:new Bw,I:new Ww,d:new Hw,D:new Yw,E:new Uw,e:new Gw,c:new Qw,i:new Xw,a:new jw,b:new Kw,B:new Jw,h:new Zw,H:new eb,K:new tb,k:new nb,m:new rb,s:new ib,S:new ob,X:new ab,x:new sb,t:new ub,T:new lb},fb=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hb=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,db=/^'([^]*?)'?$/,pb=/''/g,gb=/\S/,mb=/[a-zA-Z]/;function yb(r,t,n,o){const a=()=>Ve(n,NaN),u=vw(),l=u.locale??zc,c=u.firstWeekContainsDate??u.locale?.options?.firstWeekContainsDate??1,f=u.weekStartsOn??u.locale?.options?.weekStartsOn??0,h={firstWeekContainsDate:c,weekStartsOn:f,locale:l},g=[new Tw(o?.in,n)],p=t.match(hb).map(F=>{const A=F[0];if(A in Na){const N=Na[A];return N(F,l.formatLong)}return F}).join("").match(fb),b=[];for(let F of p){Gc(F)&&Wa(F,t,r),Uc(F)&&Wa(F,t,r);const A=F[0],N=cb[A];if(N){const{incompatibleTokens:z}=N;if(Array.isArray(z)){const O=b.find(E=>z.includes(E.token)||E.token===A);if(O)throw new RangeError(`The format string mustn't contain \`${O.fullToken}\` and \`${F}\` at the same time`)}else if(N.incompatibleTokens==="*"&&b.length>0)throw new RangeError(`The format string mustn't contain \`${F}\` and any other token at the same time`);b.push({token:A,fullToken:F});const W=N.run(r,F,l.match,h);if(!W)return a();g.push(W.setter),r=W.rest}else{if(A.match(mb))throw new RangeError("Format string contains an unescaped latin alphabet character `"+A+"`");if(F==="''"?F="'":A==="'"&&(F=wb(F)),r.indexOf(F)===0)r=r.slice(F.length);else return a()}}if(r.length>0&&gb.test(r))return a();const y=g.map(F=>F.priority).sort((F,A)=>A-F).filter((F,A,N)=>N.indexOf(F)===A).map(F=>g.filter(A=>A.priority===F).sort((A,N)=>N.subPriority-A.subPriority)).map(F=>F[0]);let C=Ue(n,o?.in);if(isNaN(+C))return a();const P={};for(const F of y){if(!F.validate(C,h))return a();const A=F.set(C,P,h);Array.isArray(A)?(C=A[0],Object.assign(P,A[1])):C=A}return C}function wb(r){return r.match(db)[1].replace(pb,"'")}function bb(r,t,n){return es(r,-t,n)}const Kc={almostDailyReport:{folder:"l1almostDailyReport",name:"Daily Report"},"10daysReport":{folder:"l2tenL1ReportsReview",name:"10 Days Review"},"30daysReport":{folder:"l3ThreeL2Review",name:"30 Days Review"},"150daysReport":{folder:"l4FiveL3Review",name:"150 Days Review"}},Yr={ALMOST_DAILY:"almostDailyReport",TEN_DAYS:"10daysReport",THIRTY_DAYS:"30daysReport",ONE_FIFTY_DAYS:"150daysReport"},tn={component:"mdc-component",input:"mdc-input",hiddenValue:"mdc-hidden-value",reportMetadata:"mdc-report-metadata"};class xb{constructor(){this.logger=sn(un.TagsService),this.component={start:t=>{const n={componentId:t};return this.logger.dev("Component start",n),`<span class="$${tn.component} start" data-meta='${JSON.stringify(n)}' style="display:none"></span>`},end:t=>{const n={componentId:t};return this.logger.dev("Component end",n),`<span class="$${tn.component} end" data-meta='${JSON.stringify(n)}' style="display:none"></span>`},wrap:(t,n,o=!0)=>{const a=o?`
${n}
`:n;return this.logger.dev("Component wrap",{componentId:t,content:n}),this.component.start(t)+a+this.component.end(t)}},this.input={start:(t,n,o,a)=>{const u={componentId:t,inputId:n,inputType:o,technicalPrefix:a};return this.logger.dev("Input start",u),`<span class="$${tn.input}" data-meta='${JSON.stringify(u)}' style="display:none"></span>`},end:(t,n,o,a)=>{const u={componentId:t,inputId:n,inputType:o,technicalPrefix:a};return this.logger.dev("Input end",u),`<span class="$${tn.input} end" data-meta='${JSON.stringify(u)}' style="display:none"></span>`},wrap:t=>{const{componentId:n,inputId:o,inputType:a,content:u,withNewLines:l=!0,technicalPrefix:c}=t,f=l?`
${u}
`:u;return this.logger.dev("Input wrap",{componentId:n,inputId:o,content:u}),this.input.start(n,o,a,c)+f+this.input.end(n,o,a,c)}},this.hiddenValue=(t,n,o)=>{const a={componentId:t,inputId:n,value:o};return this.logger.dev("Hidden value set",a),`<span class="$${tn.hiddenValue}" data-meta='${JSON.stringify(a)}' style="display:none"></span>`},this.reportMetadata={wrap:t=>`<span class="$${tn.reportMetadata}" data-meta='${t}' style="display:none"></span>`}}}const ji=new xb,Je=sn(un.SavingService),Ur={get baseOutput(){return`${Tt?.projectDir??"vault"}/${Tt?.outputDir??"outputs"}`},get fileExtension(){return Tt?.reportFileExtension??".md"},get reportFolders(){const r={};for(const[t,{folder:n}]of Object.entries(Kc))r[t]=`${this.baseOutput}/${n}`;return r},_today(){return wr(new Date,"yyyyMMdd")},_getFormattedDate(){return wr(new Date,"dd.MM.yyyy")},_getDaysRemainingInYear(){const r=new Date,n=new Date(r.getFullYear(),11,31).getTime()-r.getTime(),o=Math.ceil(n/(1e3*60*60*24));return String(o).padStart(3,"0")},async _ensureFolder(r){Ie.vault.getAbstractFileByPath(r)||(Je.dev(`Creating folder: ${r}`),await Ie.vault.createFolder(r))},async _listFiles(r){await this._ensureFolder(r);const t=Ie.vault.getAbstractFileByPath(r);return!t||!t.children?[]:t.children.filter(n=>"extension"in n&&n.extension==="md").map(n=>n.name)},async _openFile(r){try{Je.dev(`_openFile start: ${r.path}`);const t=Ie.workspace.getLeaf(!0);if(await t.openFile(r),Je.dev(`Main leaf opened file: ${r.path}`),Tt?.devMode){const n=Ie.workspace.createLeafBySplit(t,"vertical",!1);await n.openFile(r);const o={type:"markdown",state:{file:r.path,mode:"source"}};try{await n.setViewState(o),Je.dev("DevMode: right leaf forced to source mode")}catch(a){Je.warn(`Failed to force right leaf to source mode: ${a.message}`)}}}catch(t){Je.error(`Failed to open file ${r.path}: ${t.message}`)}},async write(r){let t=r.data??r.content;if(!t)throw new Error("No content provided for write()");const n=this.reportFolders[r.type];if(!n)throw new Error(`Unknown report type: ${r.type}`);await this._ensureFolder(n);const o=this._getDaysRemainingInYear(),a=this._getFormattedDate(),l=(await this._listFiles(n)).length+1,c=String(l).padStart(5,"0"),f=`${o}-${a}-${c}-${r.type}${this.fileExtension}`,h=`${n}/${f}`;if(Ie.vault.getAbstractFileByPath(h))return Je.warn(`File already exists: ${h}. Skipping write.`),h;const b=wr(new Date,"yyyy-MM-dd"),y=c,C={reportType:r.type,reportDate:b,reportNumber:y};Je.info("[SavingService] Generated metadata",{metadata:C});const P=ji.reportMetadata.wrap(JSON.stringify(C));Je.info("[SavingService] Metadata tag created",{tagLength:P.length}),Je.dev(`[SavingService] Metadata tag content: ${P.substring(0,300)}`),t=P+`

`+t,Je.info(`[SavingService] Content length after adding metadata: ${t.length}`),Je.info(`Writing new file: ${h}`);const F=await Ie.vault.create(h,t);return r?.open!==!1&&await this._openFile(F),h},async writeGeneral(r,t,n=!1){let o;const a=Ie.vault.getAbstractFileByPath(r);if(a)if("extension"in a)Je.info(`Overwriting existing file: ${r}`),await Ie.vault.modify(a,t),o=a;else throw Je.error(`Path exists but is not a file: ${r}`),new Error(`Path exists but is not a file: ${r}`);else Je.info(`Creating new file: ${r}`),o=await Ie.vault.create(r,t);return n&&await this._openFile(o),r},async delete(r){const t=Ie.vault.getAbstractFileByPath(r);t?(Je.info(`Deleting file: ${r}`),await Ie.vault.delete(t)):Je.warn(`Cannot delete; file not found: ${r}`)}};function Kl(r){if(r)throw r}var xa,Jl;function vb(){if(Jl)return xa;Jl=1;var r=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=function(h){return typeof Array.isArray=="function"?Array.isArray(h):t.call(h)==="[object Array]"},u=function(h){if(!h||t.call(h)!=="[object Object]")return!1;var g=r.call(h,"constructor"),p=h.constructor&&h.constructor.prototype&&r.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!g&&!p)return!1;var b;for(b in h);return typeof b>"u"||r.call(h,b)},l=function(h,g){n&&g.name==="__proto__"?n(h,g.name,{enumerable:!0,configurable:!0,value:g.newValue,writable:!0}):h[g.name]=g.newValue},c=function(h,g){if(g==="__proto__")if(r.call(h,g)){if(o)return o(h,g).value}else return;return h[g]};return xa=function f(){var h,g,p,b,y,C,P=arguments[0],F=1,A=arguments.length,N=!1;for(typeof P=="boolean"&&(N=P,P=arguments[1]||{},F=2),(P==null||typeof P!="object"&&typeof P!="function")&&(P={});F<A;++F)if(h=arguments[F],h!=null)for(g in h)p=c(P,g),b=c(h,g),P!==b&&(N&&b&&(u(b)||(y=a(b)))?(y?(y=!1,C=p&&a(p)?p:[]):C=p&&u(p)?p:{},l(P,{name:g,newValue:f(N,C,b)})):typeof b<"u"&&l(P,{name:g,newValue:b}));return P},xa}var _b=vb();const va=Lc(_b);function za(r){if(typeof r!="object"||r===null)return!1;const t=Object.getPrototypeOf(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)}function kb(){const r=[],t={run:n,use:o};return t;function n(...a){let u=-1;const l=a.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);c(null,...a);function c(f,...h){const g=r[++u];let p=-1;if(f){l(f);return}for(;++p<a.length;)(h[p]===null||h[p]===void 0)&&(h[p]=a[p]);a=h,g?Ib(g,c)(...h):l(null,...h)}}function o(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return r.push(a),t}}function Ib(r,t){let n;return o;function o(...l){const c=r.length>l.length;let f;c&&l.push(a);try{f=r.apply(this,l)}catch(h){const g=h;if(c&&n)throw g;return a(g)}c||(f&&f.then&&typeof f.then=="function"?f.then(u,a):f instanceof Error?a(f):u(f))}function a(l,...c){n||(n=!0,t(l,...c))}function u(l){a(null,l)}}function qr(r){return!r||typeof r!="object"?"":"position"in r||"type"in r?Zl(r.position):"start"in r||"end"in r?Zl(r):"line"in r||"column"in r?qa(r):""}function qa(r){return ec(r&&r.line)+":"+ec(r&&r.column)}function Zl(r){return qa(r&&r.start)+"-"+qa(r&&r.end)}function ec(r){return r&&typeof r=="number"?r:1}class gt extends Error{constructor(t,n,o){super(),typeof n=="string"&&(o=n,n=void 0);let a="",u={},l=!1;if(n&&("line"in n&&"column"in n?u={place:n}:"start"in n&&"end"in n?u={place:n}:"type"in n?u={ancestors:[n],place:n.position}:u={...n}),typeof t=="string"?a=t:!u.cause&&t&&(l=!0,a=t.message,u.cause=t),!u.ruleId&&!u.source&&typeof o=="string"){const f=o.indexOf(":");f===-1?u.ruleId=o:(u.source=o.slice(0,f),u.ruleId=o.slice(f+1))}if(!u.place&&u.ancestors&&u.ancestors){const f=u.ancestors[u.ancestors.length-1];f&&(u.place=f.position)}const c=u.place&&"start"in u.place?u.place.start:u.place;this.ancestors=u.ancestors||void 0,this.cause=u.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=c?c.line:void 0,this.name=qr(u.place)||"1:1",this.place=u.place||void 0,this.reason=this.message,this.ruleId=u.ruleId||void 0,this.source=u.source||void 0,this.stack=l&&u.cause&&typeof u.cause.stack=="string"?u.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}gt.prototype.file="";gt.prototype.name="";gt.prototype.reason="";gt.prototype.message="";gt.prototype.stack="";gt.prototype.column=void 0;gt.prototype.line=void 0;gt.prototype.ancestors=void 0;gt.prototype.cause=void 0;gt.prototype.fatal=void 0;gt.prototype.place=void 0;gt.prototype.ruleId=void 0;gt.prototype.source=void 0;const en={basename:Sb,dirname:Cb,extname:Tb,join:Eb,sep:"/"};function Sb(r,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Qr(r);let n=0,o=-1,a=r.length,u;if(t===void 0||t.length===0||t.length>r.length){for(;a--;)if(r.codePointAt(a)===47){if(u){n=a+1;break}}else o<0&&(u=!0,o=a+1);return o<0?"":r.slice(n,o)}if(t===r)return"";let l=-1,c=t.length-1;for(;a--;)if(r.codePointAt(a)===47){if(u){n=a+1;break}}else l<0&&(u=!0,l=a+1),c>-1&&(r.codePointAt(a)===t.codePointAt(c--)?c<0&&(o=a):(c=-1,o=l));return n===o?o=l:o<0&&(o=r.length),r.slice(n,o)}function Cb(r){if(Qr(r),r.length===0)return".";let t=-1,n=r.length,o;for(;--n;)if(r.codePointAt(n)===47){if(o){t=n;break}}else o||(o=!0);return t<0?r.codePointAt(0)===47?"/":".":t===1&&r.codePointAt(0)===47?"//":r.slice(0,t)}function Tb(r){Qr(r);let t=r.length,n=-1,o=0,a=-1,u=0,l;for(;t--;){const c=r.codePointAt(t);if(c===47){if(l){o=t+1;break}continue}n<0&&(l=!0,n=t+1),c===46?a<0?a=t:u!==1&&(u=1):a>-1&&(u=-1)}return a<0||n<0||u===0||u===1&&a===n-1&&a===o+1?"":r.slice(a,n)}function Eb(...r){let t=-1,n;for(;++t<r.length;)Qr(r[t]),r[t]&&(n=n===void 0?r[t]:n+"/"+r[t]);return n===void 0?".":Pb(n)}function Pb(r){Qr(r);const t=r.codePointAt(0)===47;let n=Ab(r,!t);return n.length===0&&!t&&(n="."),n.length>0&&r.codePointAt(r.length-1)===47&&(n+="/"),t?"/"+n:n}function Ab(r,t){let n="",o=0,a=-1,u=0,l=-1,c,f;for(;++l<=r.length;){if(l<r.length)c=r.codePointAt(l);else{if(c===47)break;c=47}if(c===47){if(!(a===l-1||u===1))if(a!==l-1&&u===2){if(n.length<2||o!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",o=0):(n=n.slice(0,f),o=n.length-1-n.lastIndexOf("/")),a=l,u=0;continue}}else if(n.length>0){n="",o=0,a=l,u=0;continue}}t&&(n=n.length>0?n+"/..":"..",o=2)}else n.length>0?n+="/"+r.slice(a+1,l):n=r.slice(a+1,l),o=l-a-1;a=l,u=0}else c===46&&u>-1?u++:u=-1}return n}function Qr(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}const Mb={cwd:Ob};function Ob(){return"/"}function Ha(r){return!!(r!==null&&typeof r=="object"&&"href"in r&&r.href&&"protocol"in r&&r.protocol&&r.auth===void 0)}function Db(r){if(typeof r=="string")r=new URL(r);else if(!Ha(r)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+r+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(r.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Fb(r)}function Fb(r){if(r.hostname!==""){const o=new TypeError('File URL host must be "localhost" or empty on darwin');throw o.code="ERR_INVALID_FILE_URL_HOST",o}const t=r.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const o=t.codePointAt(n+2);if(o===70||o===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const _a=["history","path","basename","stem","extname","dirname"];class Rb{constructor(t){let n;t?Ha(t)?n={path:t}:typeof t=="string"||Lb(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":Mb.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let o=-1;for(;++o<_a.length;){const u=_a[o];u in n&&n[u]!==void 0&&n[u]!==null&&(this[u]=u==="history"?[...n[u]]:n[u])}let a;for(a in n)_a.includes(a)||(this[a]=n[a])}get basename(){return typeof this.path=="string"?en.basename(this.path):void 0}set basename(t){Ia(t,"basename"),ka(t,"basename"),this.path=en.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?en.dirname(this.path):void 0}set dirname(t){tc(this.basename,"dirname"),this.path=en.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?en.extname(this.path):void 0}set extname(t){if(ka(t,"extname"),tc(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=en.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Ha(t)&&(t=Db(t)),Ia(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?en.basename(this.path,this.extname):void 0}set stem(t){Ia(t,"stem"),ka(t,"stem"),this.path=en.join(this.dirname||"",t+(this.extname||""))}fail(t,n,o){const a=this.message(t,n,o);throw a.fatal=!0,a}info(t,n,o){const a=this.message(t,n,o);return a.fatal=void 0,a}message(t,n,o){const a=new gt(t,n,o);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function ka(r,t){if(r&&r.includes(en.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+en.sep+"`")}function Ia(r,t){if(!r)throw new Error("`"+t+"` cannot be empty")}function tc(r,t){if(!r)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Lb(r){return!!(r&&typeof r=="object"&&"byteLength"in r&&"byteOffset"in r)}const $b=(function(r){const o=this.constructor.prototype,a=o[r],u=function(){return a.apply(u,arguments)};return Object.setPrototypeOf(u,o),u}),Bb={}.hasOwnProperty;class is extends $b{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=kb()}copy(){const t=new is;let n=-1;for(;++n<this.attachers.length;){const o=this.attachers[n];t.use(...o)}return t.data(va(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Ta("data",this.frozen),this.namespace[t]=n,this):Bb.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Ta("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...o]=this.attachers[this.freezeIndex];if(o[0]===!1)continue;o[0]===!0&&(o[0]=void 0);const a=n.call(t,...o);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=zi(t),o=this.parser||this.Parser;return Sa("parse",o),o(String(n),n)}process(t,n){const o=this;return this.freeze(),Sa("process",this.parser||this.Parser),Ca("process",this.compiler||this.Compiler),n?a(void 0,n):new Promise(a);function a(u,l){const c=zi(t),f=o.parse(c);o.run(f,c,function(g,p,b){if(g||!p||!b)return h(g);const y=p,C=o.stringify(y,b);Wb(C)?b.value=C:b.result=C,h(g,b)});function h(g,p){g||!p?l(g):u?u(p):n(void 0,p)}}}processSync(t){let n=!1,o;return this.freeze(),Sa("processSync",this.parser||this.Parser),Ca("processSync",this.compiler||this.Compiler),this.process(t,a),rc("processSync","process",n),o;function a(u,l){n=!0,Kl(u),o=l}}run(t,n,o){nc(t),this.freeze();const a=this.transformers;return!o&&typeof n=="function"&&(o=n,n=void 0),o?u(void 0,o):new Promise(u);function u(l,c){const f=zi(n);a.run(t,f,h);function h(g,p,b){const y=p||t;g?c(g):l?l(y):o(void 0,y,b)}}}runSync(t,n){let o=!1,a;return this.run(t,n,u),rc("runSync","run",o),a;function u(l,c){Kl(l),a=c,o=!0}}stringify(t,n){this.freeze();const o=zi(n),a=this.compiler||this.Compiler;return Ca("stringify",a),nc(t),a(t,o)}use(t,...n){const o=this.attachers,a=this.namespace;if(Ta("use",this.frozen),t!=null)if(typeof t=="function")f(t,n);else if(typeof t=="object")Array.isArray(t)?c(t):l(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function u(h){if(typeof h=="function")f(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[g,...p]=h;f(g,p)}else l(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function l(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(h.plugins),h.settings&&(a.settings=va(!0,a.settings,h.settings))}function c(h){let g=-1;if(h!=null)if(Array.isArray(h))for(;++g<h.length;){const p=h[g];u(p)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function f(h,g){let p=-1,b=-1;for(;++p<o.length;)if(o[p][0]===h){b=p;break}if(b===-1)o.push([h,...g]);else if(g.length>0){let[y,...C]=g;const P=o[b][1];za(P)&&za(y)&&(y=va(!0,P,y)),o[b]=[h,y,...C]}}}}const Ki=new is().freeze();function Sa(r,t){if(typeof t!="function")throw new TypeError("Cannot `"+r+"` without `parser`")}function Ca(r,t){if(typeof t!="function")throw new TypeError("Cannot `"+r+"` without `compiler`")}function Ta(r,t){if(t)throw new Error("Cannot call `"+r+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function nc(r){if(!za(r)||typeof r.type!="string")throw new TypeError("Expected node, got `"+r+"`")}function rc(r,t,n){if(!n)throw new Error("`"+r+"` finished async. Use `"+t+"` instead")}function zi(r){return Nb(r)?r:new Rb(r)}function Nb(r){return!!(r&&typeof r=="object"&&"message"in r&&"messages"in r)}function Wb(r){return typeof r=="string"||zb(r)}function zb(r){return!!(r&&typeof r=="object"&&"byteLength"in r&&"byteOffset"in r)}const qb={};function os(r,t){const n=qb,o=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,a=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Jc(r,o,a)}function Jc(r,t,n){if(Hb(r)){if("value"in r)return r.type==="html"&&!n?"":r.value;if(t&&"alt"in r&&r.alt)return r.alt;if("children"in r)return ic(r.children,t,n)}return Array.isArray(r)?ic(r,t,n):""}function ic(r,t,n){const o=[];let a=-1;for(;++a<r.length;)o[a]=Jc(r[a],t,n);return o.join("")}function Hb(r){return!!(r&&typeof r=="object")}const oc=document.createElement("i");function as(r){const t="&"+r+";";oc.innerHTML=t;const n=oc.textContent;return n.charCodeAt(n.length-1)===59&&r!=="semi"||n===t?!1:n}function an(r,t,n,o){const a=r.length;let u=0,l;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,n=n>0?n:0,o.length<1e4)l=Array.from(o),l.unshift(t,n),r.splice(...l);else for(n&&r.splice(t,n);u<o.length;)l=o.slice(u,u+1e4),l.unshift(t,0),r.splice(...l),u+=1e4,t+=1e4}function Nt(r,t){return r.length>0?(an(r,r.length,0,t),r):t}const ac={}.hasOwnProperty;function Yb(r){const t={};let n=-1;for(;++n<r.length;)Ub(t,r[n]);return t}function Ub(r,t){let n;for(n in t){const a=(ac.call(r,n)?r[n]:void 0)||(r[n]={}),u=t[n];let l;if(u)for(l in u){ac.call(a,l)||(a[l]=[]);const c=u[l];Gb(a[l],Array.isArray(c)?c:c?[c]:[])}}}function Gb(r,t){let n=-1;const o=[];for(;++n<t.length;)(t[n].add==="after"?r:o).push(t[n]);an(r,0,0,o)}function Zc(r,t){const n=Number.parseInt(r,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function br(r){return r.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const on=Nn(/[A-Za-z]/),Xt=Nn(/[\dA-Za-z]/),Qb=Nn(/[#-'*+\--9=?A-Z^-~]/);function Ya(r){return r!==null&&(r<32||r===127)}const Ua=Nn(/\d/),Vb=Nn(/[\dA-Fa-f]/),Xb=Nn(/[!-/:-@[-`{-~]/);function te(r){return r!==null&&r<-2}function pt(r){return r!==null&&(r<0||r===32)}function ye(r){return r===-2||r===-1||r===32}const jb=Nn(new RegExp("\\p{P}|\\p{S}","u")),Kb=Nn(/\s/);function Nn(r){return t;function t(n){return n!==null&&n>-1&&r.test(String.fromCharCode(n))}}function Ce(r,t,n,o){const a=o?o-1:Number.POSITIVE_INFINITY;let u=0;return l;function l(f){return ye(f)?(r.enter(n),c(f)):t(f)}function c(f){return ye(f)&&u++<a?(r.consume(f),c):(r.exit(n),t(f))}}const Jb={tokenize:Zb};function Zb(r){const t=r.attempt(this.parser.constructs.contentInitial,o,a);let n;return t;function o(c){if(c===null){r.consume(c);return}return r.enter("lineEnding"),r.consume(c),r.exit("lineEnding"),Ce(r,t,"linePrefix")}function a(c){return r.enter("paragraph"),u(c)}function u(c){const f=r.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,l(c)}function l(c){if(c===null){r.exit("chunkText"),r.exit("paragraph"),r.consume(c);return}return te(c)?(r.consume(c),r.exit("chunkText"),u):(r.consume(c),l)}}const ex={tokenize:tx},sc={tokenize:nx};function tx(r){const t=this,n=[];let o=0,a,u,l;return c;function c(z){if(o<n.length){const W=n[o];return t.containerState=W[1],r.attempt(W[0].continuation,f,h)(z)}return h(z)}function f(z){if(o++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&N();const W=t.events.length;let O=W,E;for(;O--;)if(t.events[O][0]==="exit"&&t.events[O][1].type==="chunkFlow"){E=t.events[O][1].end;break}A(o);let U=W;for(;U<t.events.length;)t.events[U][1].end={...E},U++;return an(t.events,O+1,0,t.events.slice(W)),t.events.length=U,h(z)}return c(z)}function h(z){if(o===n.length){if(!a)return b(z);if(a.currentConstruct&&a.currentConstruct.concrete)return C(z);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},r.check(sc,g,p)(z)}function g(z){return a&&N(),A(o),b(z)}function p(z){return t.parser.lazy[t.now().line]=o!==n.length,l=t.now().offset,C(z)}function b(z){return t.containerState={},r.attempt(sc,y,C)(z)}function y(z){return o++,n.push([t.currentConstruct,t.containerState]),b(z)}function C(z){if(z===null){a&&N(),A(0),r.consume(z);return}return a=a||t.parser.flow(t.now()),r.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:u}),P(z)}function P(z){if(z===null){F(r.exit("chunkFlow"),!0),A(0),r.consume(z);return}return te(z)?(r.consume(z),F(r.exit("chunkFlow")),o=0,t.interrupt=void 0,c):(r.consume(z),P)}function F(z,W){const O=t.sliceStream(z);if(W&&O.push(null),z.previous=u,u&&(u.next=z),u=z,a.defineSkip(z.start),a.write(O),t.parser.lazy[z.start.line]){let E=a.events.length;for(;E--;)if(a.events[E][1].start.offset<l&&(!a.events[E][1].end||a.events[E][1].end.offset>l))return;const U=t.events.length;let V=U,ee,de;for(;V--;)if(t.events[V][0]==="exit"&&t.events[V][1].type==="chunkFlow"){if(ee){de=t.events[V][1].end;break}ee=!0}for(A(o),E=U;E<t.events.length;)t.events[E][1].end={...de},E++;an(t.events,V+1,0,t.events.slice(U)),t.events.length=E}}function A(z){let W=n.length;for(;W-- >z;){const O=n[W];t.containerState=O[1],O[0].exit.call(t,r)}n.length=z}function N(){a.write([null]),u=void 0,a=void 0,t.containerState._closeFlow=void 0}}function nx(r,t,n){return Ce(r,r.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ji(r){if(r===null||pt(r)||Kb(r))return 1;if(jb(r))return 2}function ss(r,t,n){const o=[];let a=-1;for(;++a<r.length;){const u=r[a].resolveAll;u&&!o.includes(u)&&(t=u(t,n),o.push(u))}return t}const Ga={name:"attention",resolveAll:rx,tokenize:ix};function rx(r,t){let n=-1,o,a,u,l,c,f,h,g;for(;++n<r.length;)if(r[n][0]==="enter"&&r[n][1].type==="attentionSequence"&&r[n][1]._close){for(o=n;o--;)if(r[o][0]==="exit"&&r[o][1].type==="attentionSequence"&&r[o][1]._open&&t.sliceSerialize(r[o][1]).charCodeAt(0)===t.sliceSerialize(r[n][1]).charCodeAt(0)){if((r[o][1]._close||r[n][1]._open)&&(r[n][1].end.offset-r[n][1].start.offset)%3&&!((r[o][1].end.offset-r[o][1].start.offset+r[n][1].end.offset-r[n][1].start.offset)%3))continue;f=r[o][1].end.offset-r[o][1].start.offset>1&&r[n][1].end.offset-r[n][1].start.offset>1?2:1;const p={...r[o][1].end},b={...r[n][1].start};uc(p,-f),uc(b,f),l={type:f>1?"strongSequence":"emphasisSequence",start:p,end:{...r[o][1].end}},c={type:f>1?"strongSequence":"emphasisSequence",start:{...r[n][1].start},end:b},u={type:f>1?"strongText":"emphasisText",start:{...r[o][1].end},end:{...r[n][1].start}},a={type:f>1?"strong":"emphasis",start:{...l.start},end:{...c.end}},r[o][1].end={...l.start},r[n][1].start={...c.end},h=[],r[o][1].end.offset-r[o][1].start.offset&&(h=Nt(h,[["enter",r[o][1],t],["exit",r[o][1],t]])),h=Nt(h,[["enter",a,t],["enter",l,t],["exit",l,t],["enter",u,t]]),h=Nt(h,ss(t.parser.constructs.insideSpan.null,r.slice(o+1,n),t)),h=Nt(h,[["exit",u,t],["enter",c,t],["exit",c,t],["exit",a,t]]),r[n][1].end.offset-r[n][1].start.offset?(g=2,h=Nt(h,[["enter",r[n][1],t],["exit",r[n][1],t]])):g=0,an(r,o-1,n-o+3,h),n=o+h.length-g-2;break}}for(n=-1;++n<r.length;)r[n][1].type==="attentionSequence"&&(r[n][1].type="data");return r}function ix(r,t){const n=this.parser.constructs.attentionMarkers.null,o=this.previous,a=Ji(o);let u;return l;function l(f){return u=f,r.enter("attentionSequence"),c(f)}function c(f){if(f===u)return r.consume(f),c;const h=r.exit("attentionSequence"),g=Ji(f),p=!g||g===2&&a||n.includes(f),b=!a||a===2&&g||n.includes(o);return h._open=!!(u===42?p:p&&(a||!b)),h._close=!!(u===42?b:b&&(g||!p)),t(f)}}function uc(r,t){r.column+=t,r.offset+=t,r._bufferIndex+=t}const ox={name:"autolink",tokenize:ax};function ax(r,t,n){let o=0;return a;function a(y){return r.enter("autolink"),r.enter("autolinkMarker"),r.consume(y),r.exit("autolinkMarker"),r.enter("autolinkProtocol"),u}function u(y){return on(y)?(r.consume(y),l):y===64?n(y):h(y)}function l(y){return y===43||y===45||y===46||Xt(y)?(o=1,c(y)):h(y)}function c(y){return y===58?(r.consume(y),o=0,f):(y===43||y===45||y===46||Xt(y))&&o++<32?(r.consume(y),c):(o=0,h(y))}function f(y){return y===62?(r.exit("autolinkProtocol"),r.enter("autolinkMarker"),r.consume(y),r.exit("autolinkMarker"),r.exit("autolink"),t):y===null||y===32||y===60||Ya(y)?n(y):(r.consume(y),f)}function h(y){return y===64?(r.consume(y),g):Qb(y)?(r.consume(y),h):n(y)}function g(y){return Xt(y)?p(y):n(y)}function p(y){return y===46?(r.consume(y),o=0,g):y===62?(r.exit("autolinkProtocol").type="autolinkEmail",r.enter("autolinkMarker"),r.consume(y),r.exit("autolinkMarker"),r.exit("autolink"),t):b(y)}function b(y){if((y===45||Xt(y))&&o++<63){const C=y===45?b:p;return r.consume(y),C}return n(y)}}const to={partial:!0,tokenize:sx};function sx(r,t,n){return o;function o(u){return ye(u)?Ce(r,a,"linePrefix")(u):a(u)}function a(u){return u===null||te(u)?t(u):n(u)}}const ef={continuation:{tokenize:lx},exit:cx,name:"blockQuote",tokenize:ux};function ux(r,t,n){const o=this;return a;function a(l){if(l===62){const c=o.containerState;return c.open||(r.enter("blockQuote",{_container:!0}),c.open=!0),r.enter("blockQuotePrefix"),r.enter("blockQuoteMarker"),r.consume(l),r.exit("blockQuoteMarker"),u}return n(l)}function u(l){return ye(l)?(r.enter("blockQuotePrefixWhitespace"),r.consume(l),r.exit("blockQuotePrefixWhitespace"),r.exit("blockQuotePrefix"),t):(r.exit("blockQuotePrefix"),t(l))}}function lx(r,t,n){const o=this;return a;function a(l){return ye(l)?Ce(r,u,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):u(l)}function u(l){return r.attempt(ef,t,n)(l)}}function cx(r){r.exit("blockQuote")}const tf={name:"characterEscape",tokenize:fx};function fx(r,t,n){return o;function o(u){return r.enter("characterEscape"),r.enter("escapeMarker"),r.consume(u),r.exit("escapeMarker"),a}function a(u){return Xb(u)?(r.enter("characterEscapeValue"),r.consume(u),r.exit("characterEscapeValue"),r.exit("characterEscape"),t):n(u)}}const nf={name:"characterReference",tokenize:hx};function hx(r,t,n){const o=this;let a=0,u,l;return c;function c(p){return r.enter("characterReference"),r.enter("characterReferenceMarker"),r.consume(p),r.exit("characterReferenceMarker"),f}function f(p){return p===35?(r.enter("characterReferenceMarkerNumeric"),r.consume(p),r.exit("characterReferenceMarkerNumeric"),h):(r.enter("characterReferenceValue"),u=31,l=Xt,g(p))}function h(p){return p===88||p===120?(r.enter("characterReferenceMarkerHexadecimal"),r.consume(p),r.exit("characterReferenceMarkerHexadecimal"),r.enter("characterReferenceValue"),u=6,l=Vb,g):(r.enter("characterReferenceValue"),u=7,l=Ua,g(p))}function g(p){if(p===59&&a){const b=r.exit("characterReferenceValue");return l===Xt&&!as(o.sliceSerialize(b))?n(p):(r.enter("characterReferenceMarker"),r.consume(p),r.exit("characterReferenceMarker"),r.exit("characterReference"),t)}return l(p)&&a++<u?(r.consume(p),g):n(p)}}const lc={partial:!0,tokenize:px},cc={concrete:!0,name:"codeFenced",tokenize:dx};function dx(r,t,n){const o=this,a={partial:!0,tokenize:O};let u=0,l=0,c;return f;function f(E){return h(E)}function h(E){const U=o.events[o.events.length-1];return u=U&&U[1].type==="linePrefix"?U[2].sliceSerialize(U[1],!0).length:0,c=E,r.enter("codeFenced"),r.enter("codeFencedFence"),r.enter("codeFencedFenceSequence"),g(E)}function g(E){return E===c?(l++,r.consume(E),g):l<3?n(E):(r.exit("codeFencedFenceSequence"),ye(E)?Ce(r,p,"whitespace")(E):p(E))}function p(E){return E===null||te(E)?(r.exit("codeFencedFence"),o.interrupt?t(E):r.check(lc,P,W)(E)):(r.enter("codeFencedFenceInfo"),r.enter("chunkString",{contentType:"string"}),b(E))}function b(E){return E===null||te(E)?(r.exit("chunkString"),r.exit("codeFencedFenceInfo"),p(E)):ye(E)?(r.exit("chunkString"),r.exit("codeFencedFenceInfo"),Ce(r,y,"whitespace")(E)):E===96&&E===c?n(E):(r.consume(E),b)}function y(E){return E===null||te(E)?p(E):(r.enter("codeFencedFenceMeta"),r.enter("chunkString",{contentType:"string"}),C(E))}function C(E){return E===null||te(E)?(r.exit("chunkString"),r.exit("codeFencedFenceMeta"),p(E)):E===96&&E===c?n(E):(r.consume(E),C)}function P(E){return r.attempt(a,W,F)(E)}function F(E){return r.enter("lineEnding"),r.consume(E),r.exit("lineEnding"),A}function A(E){return u>0&&ye(E)?Ce(r,N,"linePrefix",u+1)(E):N(E)}function N(E){return E===null||te(E)?r.check(lc,P,W)(E):(r.enter("codeFlowValue"),z(E))}function z(E){return E===null||te(E)?(r.exit("codeFlowValue"),N(E)):(r.consume(E),z)}function W(E){return r.exit("codeFenced"),t(E)}function O(E,U,V){let ee=0;return de;function de(fe){return E.enter("lineEnding"),E.consume(fe),E.exit("lineEnding"),X}function X(fe){return E.enter("codeFencedFence"),ye(fe)?Ce(E,Q,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(fe):Q(fe)}function Q(fe){return fe===c?(E.enter("codeFencedFenceSequence"),be(fe)):V(fe)}function be(fe){return fe===c?(ee++,E.consume(fe),be):ee>=l?(E.exit("codeFencedFenceSequence"),ye(fe)?Ce(E,Ae,"whitespace")(fe):Ae(fe)):V(fe)}function Ae(fe){return fe===null||te(fe)?(E.exit("codeFencedFence"),U(fe)):V(fe)}}}function px(r,t,n){const o=this;return a;function a(l){return l===null?n(l):(r.enter("lineEnding"),r.consume(l),r.exit("lineEnding"),u)}function u(l){return o.parser.lazy[o.now().line]?n(l):t(l)}}const Ea={name:"codeIndented",tokenize:mx},gx={partial:!0,tokenize:yx};function mx(r,t,n){const o=this;return a;function a(h){return r.enter("codeIndented"),Ce(r,u,"linePrefix",5)(h)}function u(h){const g=o.events[o.events.length-1];return g&&g[1].type==="linePrefix"&&g[2].sliceSerialize(g[1],!0).length>=4?l(h):n(h)}function l(h){return h===null?f(h):te(h)?r.attempt(gx,l,f)(h):(r.enter("codeFlowValue"),c(h))}function c(h){return h===null||te(h)?(r.exit("codeFlowValue"),l(h)):(r.consume(h),c)}function f(h){return r.exit("codeIndented"),t(h)}}function yx(r,t,n){const o=this;return a;function a(l){return o.parser.lazy[o.now().line]?n(l):te(l)?(r.enter("lineEnding"),r.consume(l),r.exit("lineEnding"),a):Ce(r,u,"linePrefix",5)(l)}function u(l){const c=o.events[o.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?t(l):te(l)?a(l):n(l)}}const wx={name:"codeText",previous:xx,resolve:bx,tokenize:vx};function bx(r){let t=r.length-4,n=3,o,a;if((r[n][1].type==="lineEnding"||r[n][1].type==="space")&&(r[t][1].type==="lineEnding"||r[t][1].type==="space")){for(o=n;++o<t;)if(r[o][1].type==="codeTextData"){r[n][1].type="codeTextPadding",r[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(o=n-1,t++;++o<=t;)a===void 0?o!==t&&r[o][1].type!=="lineEnding"&&(a=o):(o===t||r[o][1].type==="lineEnding")&&(r[a][1].type="codeTextData",o!==a+2&&(r[a][1].end=r[o-1][1].end,r.splice(a+2,o-a-2),t-=o-a-2,o=a+2),a=void 0);return r}function xx(r){return r!==96||this.events[this.events.length-1][1].type==="characterEscape"}function vx(r,t,n){let o=0,a,u;return l;function l(p){return r.enter("codeText"),r.enter("codeTextSequence"),c(p)}function c(p){return p===96?(r.consume(p),o++,c):(r.exit("codeTextSequence"),f(p))}function f(p){return p===null?n(p):p===32?(r.enter("space"),r.consume(p),r.exit("space"),f):p===96?(u=r.enter("codeTextSequence"),a=0,g(p)):te(p)?(r.enter("lineEnding"),r.consume(p),r.exit("lineEnding"),f):(r.enter("codeTextData"),h(p))}function h(p){return p===null||p===32||p===96||te(p)?(r.exit("codeTextData"),f(p)):(r.consume(p),h)}function g(p){return p===96?(r.consume(p),a++,g):a===o?(r.exit("codeTextSequence"),r.exit("codeText"),t(p)):(u.type="codeTextData",h(p))}}class _x{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const o=n??Number.POSITIVE_INFINITY;return o<this.left.length?this.left.slice(t,o):t>this.left.length?this.right.slice(this.right.length-o+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-o+this.left.length).reverse())}splice(t,n,o){const a=n||0;this.setCursor(Math.trunc(t));const u=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return o&&Nr(this.left,o),u.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Nr(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Nr(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Nr(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Nr(this.left,n.reverse())}}}function Nr(r,t){let n=0;if(t.length<1e4)r.push(...t);else for(;n<t.length;)r.push(...t.slice(n,n+1e4)),n+=1e4}function rf(r){const t={};let n=-1,o,a,u,l,c,f,h;const g=new _x(r);for(;++n<g.length;){for(;n in t;)n=t[n];if(o=g.get(n),n&&o[1].type==="chunkFlow"&&g.get(n-1)[1].type==="listItemPrefix"&&(f=o[1]._tokenizer.events,u=0,u<f.length&&f[u][1].type==="lineEndingBlank"&&(u+=2),u<f.length&&f[u][1].type==="content"))for(;++u<f.length&&f[u][1].type!=="content";)f[u][1].type==="chunkText"&&(f[u][1]._isInFirstContentOfListItem=!0,u++);if(o[0]==="enter")o[1].contentType&&(Object.assign(t,kx(g,n)),n=t[n],h=!0);else if(o[1]._container){for(u=n,a=void 0;u--;)if(l=g.get(u),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(a&&(g.get(a)[1].type="lineEndingBlank"),l[1].type="lineEnding",a=u);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;a&&(o[1].end={...g.get(a)[1].start},c=g.slice(a,n),c.unshift(o),g.splice(a,n-a+1,c))}}return an(r,0,Number.POSITIVE_INFINITY,g.slice(0)),!h}function kx(r,t){const n=r.get(t)[1],o=r.get(t)[2];let a=t-1;const u=[];let l=n._tokenizer;l||(l=o.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const c=l.events,f=[],h={};let g,p,b=-1,y=n,C=0,P=0;const F=[P];for(;y;){for(;r.get(++a)[1]!==y;);u.push(a),y._tokenizer||(g=o.sliceStream(y),y.next||g.push(null),p&&l.defineSkip(y.start),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(g),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),p=y,y=y.next}for(y=n;++b<c.length;)c[b][0]==="exit"&&c[b-1][0]==="enter"&&c[b][1].type===c[b-1][1].type&&c[b][1].start.line!==c[b][1].end.line&&(P=b+1,F.push(P),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(l.events=[],y?(y._tokenizer=void 0,y.previous=void 0):F.pop(),b=F.length;b--;){const A=c.slice(F[b],F[b+1]),N=u.pop();f.push([N,N+A.length-1]),r.splice(N,2,A)}for(f.reverse(),b=-1;++b<f.length;)h[C+f[b][0]]=C+f[b][1],C+=f[b][1]-f[b][0]-1;return h}const Ix={resolve:Cx,tokenize:Tx},Sx={partial:!0,tokenize:Ex};function Cx(r){return rf(r),r}function Tx(r,t){let n;return o;function o(c){return r.enter("content"),n=r.enter("chunkContent",{contentType:"content"}),a(c)}function a(c){return c===null?u(c):te(c)?r.check(Sx,l,u)(c):(r.consume(c),a)}function u(c){return r.exit("chunkContent"),r.exit("content"),t(c)}function l(c){return r.consume(c),r.exit("chunkContent"),n.next=r.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function Ex(r,t,n){const o=this;return a;function a(l){return r.exit("chunkContent"),r.enter("lineEnding"),r.consume(l),r.exit("lineEnding"),Ce(r,u,"linePrefix")}function u(l){if(l===null||te(l))return n(l);const c=o.events[o.events.length-1];return!o.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?t(l):r.interrupt(o.parser.constructs.flow,n,t)(l)}}function of(r,t,n,o,a,u,l,c,f){const h=f||Number.POSITIVE_INFINITY;let g=0;return p;function p(A){return A===60?(r.enter(o),r.enter(a),r.enter(u),r.consume(A),r.exit(u),b):A===null||A===32||A===41||Ya(A)?n(A):(r.enter(o),r.enter(l),r.enter(c),r.enter("chunkString",{contentType:"string"}),P(A))}function b(A){return A===62?(r.enter(u),r.consume(A),r.exit(u),r.exit(a),r.exit(o),t):(r.enter(c),r.enter("chunkString",{contentType:"string"}),y(A))}function y(A){return A===62?(r.exit("chunkString"),r.exit(c),b(A)):A===null||A===60||te(A)?n(A):(r.consume(A),A===92?C:y)}function C(A){return A===60||A===62||A===92?(r.consume(A),y):y(A)}function P(A){return!g&&(A===null||A===41||pt(A))?(r.exit("chunkString"),r.exit(c),r.exit(l),r.exit(o),t(A)):g<h&&A===40?(r.consume(A),g++,P):A===41?(r.consume(A),g--,P):A===null||A===32||A===40||Ya(A)?n(A):(r.consume(A),A===92?F:P)}function F(A){return A===40||A===41||A===92?(r.consume(A),P):P(A)}}function af(r,t,n,o,a,u){const l=this;let c=0,f;return h;function h(y){return r.enter(o),r.enter(a),r.consume(y),r.exit(a),r.enter(u),g}function g(y){return c>999||y===null||y===91||y===93&&!f||y===94&&!c&&"_hiddenFootnoteSupport"in l.parser.constructs?n(y):y===93?(r.exit(u),r.enter(a),r.consume(y),r.exit(a),r.exit(o),t):te(y)?(r.enter("lineEnding"),r.consume(y),r.exit("lineEnding"),g):(r.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===null||y===91||y===93||te(y)||c++>999?(r.exit("chunkString"),g(y)):(r.consume(y),f||(f=!ye(y)),y===92?b:p)}function b(y){return y===91||y===92||y===93?(r.consume(y),c++,p):p(y)}}function sf(r,t,n,o,a,u){let l;return c;function c(b){return b===34||b===39||b===40?(r.enter(o),r.enter(a),r.consume(b),r.exit(a),l=b===40?41:b,f):n(b)}function f(b){return b===l?(r.enter(a),r.consume(b),r.exit(a),r.exit(o),t):(r.enter(u),h(b))}function h(b){return b===l?(r.exit(u),f(l)):b===null?n(b):te(b)?(r.enter("lineEnding"),r.consume(b),r.exit("lineEnding"),Ce(r,h,"linePrefix")):(r.enter("chunkString",{contentType:"string"}),g(b))}function g(b){return b===l||b===null||te(b)?(r.exit("chunkString"),h(b)):(r.consume(b),b===92?p:g)}function p(b){return b===l||b===92?(r.consume(b),g):g(b)}}function Hr(r,t){let n;return o;function o(a){return te(a)?(r.enter("lineEnding"),r.consume(a),r.exit("lineEnding"),n=!0,o):ye(a)?Ce(r,o,n?"linePrefix":"lineSuffix")(a):t(a)}}const Px={name:"definition",tokenize:Mx},Ax={partial:!0,tokenize:Ox};function Mx(r,t,n){const o=this;let a;return u;function u(y){return r.enter("definition"),l(y)}function l(y){return af.call(o,r,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function c(y){return a=br(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)),y===58?(r.enter("definitionMarker"),r.consume(y),r.exit("definitionMarker"),f):n(y)}function f(y){return pt(y)?Hr(r,h)(y):h(y)}function h(y){return of(r,g,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function g(y){return r.attempt(Ax,p,p)(y)}function p(y){return ye(y)?Ce(r,b,"whitespace")(y):b(y)}function b(y){return y===null||te(y)?(r.exit("definition"),o.parser.defined.push(a),t(y)):n(y)}}function Ox(r,t,n){return o;function o(c){return pt(c)?Hr(r,a)(c):n(c)}function a(c){return sf(r,u,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function u(c){return ye(c)?Ce(r,l,"whitespace")(c):l(c)}function l(c){return c===null||te(c)?t(c):n(c)}}const Dx={name:"hardBreakEscape",tokenize:Fx};function Fx(r,t,n){return o;function o(u){return r.enter("hardBreakEscape"),r.consume(u),a}function a(u){return te(u)?(r.exit("hardBreakEscape"),t(u)):n(u)}}const Rx={name:"headingAtx",resolve:Lx,tokenize:$x};function Lx(r,t){let n=r.length-2,o=3,a,u;return r[o][1].type==="whitespace"&&(o+=2),n-2>o&&r[n][1].type==="whitespace"&&(n-=2),r[n][1].type==="atxHeadingSequence"&&(o===n-1||n-4>o&&r[n-2][1].type==="whitespace")&&(n-=o+1===n?2:4),n>o&&(a={type:"atxHeadingText",start:r[o][1].start,end:r[n][1].end},u={type:"chunkText",start:r[o][1].start,end:r[n][1].end,contentType:"text"},an(r,o,n-o+1,[["enter",a,t],["enter",u,t],["exit",u,t],["exit",a,t]])),r}function $x(r,t,n){let o=0;return a;function a(g){return r.enter("atxHeading"),u(g)}function u(g){return r.enter("atxHeadingSequence"),l(g)}function l(g){return g===35&&o++<6?(r.consume(g),l):g===null||pt(g)?(r.exit("atxHeadingSequence"),c(g)):n(g)}function c(g){return g===35?(r.enter("atxHeadingSequence"),f(g)):g===null||te(g)?(r.exit("atxHeading"),t(g)):ye(g)?Ce(r,c,"whitespace")(g):(r.enter("atxHeadingText"),h(g))}function f(g){return g===35?(r.consume(g),f):(r.exit("atxHeadingSequence"),c(g))}function h(g){return g===null||g===35||pt(g)?(r.exit("atxHeadingText"),c(g)):(r.consume(g),h)}}const Bx=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],fc=["pre","script","style","textarea"],Nx={concrete:!0,name:"htmlFlow",resolveTo:qx,tokenize:Hx},Wx={partial:!0,tokenize:Ux},zx={partial:!0,tokenize:Yx};function qx(r){let t=r.length;for(;t--&&!(r[t][0]==="enter"&&r[t][1].type==="htmlFlow"););return t>1&&r[t-2][1].type==="linePrefix"&&(r[t][1].start=r[t-2][1].start,r[t+1][1].start=r[t-2][1].start,r.splice(t-2,2)),r}function Hx(r,t,n){const o=this;let a,u,l,c,f;return h;function h(I){return g(I)}function g(I){return r.enter("htmlFlow"),r.enter("htmlFlowData"),r.consume(I),p}function p(I){return I===33?(r.consume(I),b):I===47?(r.consume(I),u=!0,P):I===63?(r.consume(I),a=3,o.interrupt?t:_):on(I)?(r.consume(I),l=String.fromCharCode(I),F):n(I)}function b(I){return I===45?(r.consume(I),a=2,y):I===91?(r.consume(I),a=5,c=0,C):on(I)?(r.consume(I),a=4,o.interrupt?t:_):n(I)}function y(I){return I===45?(r.consume(I),o.interrupt?t:_):n(I)}function C(I){const yt="CDATA[";return I===yt.charCodeAt(c++)?(r.consume(I),c===yt.length?o.interrupt?t:Q:C):n(I)}function P(I){return on(I)?(r.consume(I),l=String.fromCharCode(I),F):n(I)}function F(I){if(I===null||I===47||I===62||pt(I)){const yt=I===47,at=l.toLowerCase();return!yt&&!u&&fc.includes(at)?(a=1,o.interrupt?t(I):Q(I)):Bx.includes(l.toLowerCase())?(a=6,yt?(r.consume(I),A):o.interrupt?t(I):Q(I)):(a=7,o.interrupt&&!o.parser.lazy[o.now().line]?n(I):u?N(I):z(I))}return I===45||Xt(I)?(r.consume(I),l+=String.fromCharCode(I),F):n(I)}function A(I){return I===62?(r.consume(I),o.interrupt?t:Q):n(I)}function N(I){return ye(I)?(r.consume(I),N):de(I)}function z(I){return I===47?(r.consume(I),de):I===58||I===95||on(I)?(r.consume(I),W):ye(I)?(r.consume(I),z):de(I)}function W(I){return I===45||I===46||I===58||I===95||Xt(I)?(r.consume(I),W):O(I)}function O(I){return I===61?(r.consume(I),E):ye(I)?(r.consume(I),O):z(I)}function E(I){return I===null||I===60||I===61||I===62||I===96?n(I):I===34||I===39?(r.consume(I),f=I,U):ye(I)?(r.consume(I),E):V(I)}function U(I){return I===f?(r.consume(I),f=null,ee):I===null||te(I)?n(I):(r.consume(I),U)}function V(I){return I===null||I===34||I===39||I===47||I===60||I===61||I===62||I===96||pt(I)?O(I):(r.consume(I),V)}function ee(I){return I===47||I===62||ye(I)?z(I):n(I)}function de(I){return I===62?(r.consume(I),X):n(I)}function X(I){return I===null||te(I)?Q(I):ye(I)?(r.consume(I),X):n(I)}function Q(I){return I===45&&a===2?(r.consume(I),Ge):I===60&&a===1?(r.consume(I),Te):I===62&&a===4?(r.consume(I),Fe):I===63&&a===3?(r.consume(I),_):I===93&&a===5?(r.consume(I),Wt):te(I)&&(a===6||a===7)?(r.exit("htmlFlowData"),r.check(Wx,zt,be)(I)):I===null||te(I)?(r.exit("htmlFlowData"),be(I)):(r.consume(I),Q)}function be(I){return r.check(zx,Ae,zt)(I)}function Ae(I){return r.enter("lineEnding"),r.consume(I),r.exit("lineEnding"),fe}function fe(I){return I===null||te(I)?be(I):(r.enter("htmlFlowData"),Q(I))}function Ge(I){return I===45?(r.consume(I),_):Q(I)}function Te(I){return I===47?(r.consume(I),l="",qe):Q(I)}function qe(I){if(I===62){const yt=l.toLowerCase();return fc.includes(yt)?(r.consume(I),Fe):Q(I)}return on(I)&&l.length<8?(r.consume(I),l+=String.fromCharCode(I),qe):Q(I)}function Wt(I){return I===93?(r.consume(I),_):Q(I)}function _(I){return I===62?(r.consume(I),Fe):I===45&&a===2?(r.consume(I),_):Q(I)}function Fe(I){return I===null||te(I)?(r.exit("htmlFlowData"),zt(I)):(r.consume(I),Fe)}function zt(I){return r.exit("htmlFlow"),t(I)}}function Yx(r,t,n){const o=this;return a;function a(l){return te(l)?(r.enter("lineEnding"),r.consume(l),r.exit("lineEnding"),u):n(l)}function u(l){return o.parser.lazy[o.now().line]?n(l):t(l)}}function Ux(r,t,n){return o;function o(a){return r.enter("lineEnding"),r.consume(a),r.exit("lineEnding"),r.attempt(to,t,n)}}const Gx={name:"htmlText",tokenize:Qx};function Qx(r,t,n){const o=this;let a,u,l;return c;function c(_){return r.enter("htmlText"),r.enter("htmlTextData"),r.consume(_),f}function f(_){return _===33?(r.consume(_),h):_===47?(r.consume(_),O):_===63?(r.consume(_),z):on(_)?(r.consume(_),V):n(_)}function h(_){return _===45?(r.consume(_),g):_===91?(r.consume(_),u=0,C):on(_)?(r.consume(_),N):n(_)}function g(_){return _===45?(r.consume(_),y):n(_)}function p(_){return _===null?n(_):_===45?(r.consume(_),b):te(_)?(l=p,Te(_)):(r.consume(_),p)}function b(_){return _===45?(r.consume(_),y):p(_)}function y(_){return _===62?Ge(_):_===45?b(_):p(_)}function C(_){const Fe="CDATA[";return _===Fe.charCodeAt(u++)?(r.consume(_),u===Fe.length?P:C):n(_)}function P(_){return _===null?n(_):_===93?(r.consume(_),F):te(_)?(l=P,Te(_)):(r.consume(_),P)}function F(_){return _===93?(r.consume(_),A):P(_)}function A(_){return _===62?Ge(_):_===93?(r.consume(_),A):P(_)}function N(_){return _===null||_===62?Ge(_):te(_)?(l=N,Te(_)):(r.consume(_),N)}function z(_){return _===null?n(_):_===63?(r.consume(_),W):te(_)?(l=z,Te(_)):(r.consume(_),z)}function W(_){return _===62?Ge(_):z(_)}function O(_){return on(_)?(r.consume(_),E):n(_)}function E(_){return _===45||Xt(_)?(r.consume(_),E):U(_)}function U(_){return te(_)?(l=U,Te(_)):ye(_)?(r.consume(_),U):Ge(_)}function V(_){return _===45||Xt(_)?(r.consume(_),V):_===47||_===62||pt(_)?ee(_):n(_)}function ee(_){return _===47?(r.consume(_),Ge):_===58||_===95||on(_)?(r.consume(_),de):te(_)?(l=ee,Te(_)):ye(_)?(r.consume(_),ee):Ge(_)}function de(_){return _===45||_===46||_===58||_===95||Xt(_)?(r.consume(_),de):X(_)}function X(_){return _===61?(r.consume(_),Q):te(_)?(l=X,Te(_)):ye(_)?(r.consume(_),X):ee(_)}function Q(_){return _===null||_===60||_===61||_===62||_===96?n(_):_===34||_===39?(r.consume(_),a=_,be):te(_)?(l=Q,Te(_)):ye(_)?(r.consume(_),Q):(r.consume(_),Ae)}function be(_){return _===a?(r.consume(_),a=void 0,fe):_===null?n(_):te(_)?(l=be,Te(_)):(r.consume(_),be)}function Ae(_){return _===null||_===34||_===39||_===60||_===61||_===96?n(_):_===47||_===62||pt(_)?ee(_):(r.consume(_),Ae)}function fe(_){return _===47||_===62||pt(_)?ee(_):n(_)}function Ge(_){return _===62?(r.consume(_),r.exit("htmlTextData"),r.exit("htmlText"),t):n(_)}function Te(_){return r.exit("htmlTextData"),r.enter("lineEnding"),r.consume(_),r.exit("lineEnding"),qe}function qe(_){return ye(_)?Ce(r,Wt,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_):Wt(_)}function Wt(_){return r.enter("htmlTextData"),l(_)}}const us={name:"labelEnd",resolveAll:Kx,resolveTo:Jx,tokenize:Zx},Vx={tokenize:ev},Xx={tokenize:tv},jx={tokenize:nv};function Kx(r){let t=-1;const n=[];for(;++t<r.length;){const o=r[t][1];if(n.push(r[t]),o.type==="labelImage"||o.type==="labelLink"||o.type==="labelEnd"){const a=o.type==="labelImage"?4:2;o.type="data",t+=a}}return r.length!==n.length&&an(r,0,r.length,n),r}function Jx(r,t){let n=r.length,o=0,a,u,l,c;for(;n--;)if(a=r[n][1],u){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;r[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(l){if(r[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(u=n,a.type!=="labelLink")){o=2;break}}else a.type==="labelEnd"&&(l=n);const f={type:r[u][1].type==="labelLink"?"link":"image",start:{...r[u][1].start},end:{...r[r.length-1][1].end}},h={type:"label",start:{...r[u][1].start},end:{...r[l][1].end}},g={type:"labelText",start:{...r[u+o+2][1].end},end:{...r[l-2][1].start}};return c=[["enter",f,t],["enter",h,t]],c=Nt(c,r.slice(u+1,u+o+3)),c=Nt(c,[["enter",g,t]]),c=Nt(c,ss(t.parser.constructs.insideSpan.null,r.slice(u+o+4,l-3),t)),c=Nt(c,[["exit",g,t],r[l-2],r[l-1],["exit",h,t]]),c=Nt(c,r.slice(l+1)),c=Nt(c,[["exit",f,t]]),an(r,u,r.length,c),r}function Zx(r,t,n){const o=this;let a=o.events.length,u,l;for(;a--;)if((o.events[a][1].type==="labelImage"||o.events[a][1].type==="labelLink")&&!o.events[a][1]._balanced){u=o.events[a][1];break}return c;function c(b){return u?u._inactive?p(b):(l=o.parser.defined.includes(br(o.sliceSerialize({start:u.end,end:o.now()}))),r.enter("labelEnd"),r.enter("labelMarker"),r.consume(b),r.exit("labelMarker"),r.exit("labelEnd"),f):n(b)}function f(b){return b===40?r.attempt(Vx,g,l?g:p)(b):b===91?r.attempt(Xx,g,l?h:p)(b):l?g(b):p(b)}function h(b){return r.attempt(jx,g,p)(b)}function g(b){return t(b)}function p(b){return u._balanced=!0,n(b)}}function ev(r,t,n){return o;function o(p){return r.enter("resource"),r.enter("resourceMarker"),r.consume(p),r.exit("resourceMarker"),a}function a(p){return pt(p)?Hr(r,u)(p):u(p)}function u(p){return p===41?g(p):of(r,l,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function l(p){return pt(p)?Hr(r,f)(p):g(p)}function c(p){return n(p)}function f(p){return p===34||p===39||p===40?sf(r,h,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):g(p)}function h(p){return pt(p)?Hr(r,g)(p):g(p)}function g(p){return p===41?(r.enter("resourceMarker"),r.consume(p),r.exit("resourceMarker"),r.exit("resource"),t):n(p)}}function tv(r,t,n){const o=this;return a;function a(c){return af.call(o,r,u,l,"reference","referenceMarker","referenceString")(c)}function u(c){return o.parser.defined.includes(br(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)))?t(c):n(c)}function l(c){return n(c)}}function nv(r,t,n){return o;function o(u){return r.enter("reference"),r.enter("referenceMarker"),r.consume(u),r.exit("referenceMarker"),a}function a(u){return u===93?(r.enter("referenceMarker"),r.consume(u),r.exit("referenceMarker"),r.exit("reference"),t):n(u)}}const rv={name:"labelStartImage",resolveAll:us.resolveAll,tokenize:iv};function iv(r,t,n){const o=this;return a;function a(c){return r.enter("labelImage"),r.enter("labelImageMarker"),r.consume(c),r.exit("labelImageMarker"),u}function u(c){return c===91?(r.enter("labelMarker"),r.consume(c),r.exit("labelMarker"),r.exit("labelImage"),l):n(c)}function l(c){return c===94&&"_hiddenFootnoteSupport"in o.parser.constructs?n(c):t(c)}}const ov={name:"labelStartLink",resolveAll:us.resolveAll,tokenize:av};function av(r,t,n){const o=this;return a;function a(l){return r.enter("labelLink"),r.enter("labelMarker"),r.consume(l),r.exit("labelMarker"),r.exit("labelLink"),u}function u(l){return l===94&&"_hiddenFootnoteSupport"in o.parser.constructs?n(l):t(l)}}const Pa={name:"lineEnding",tokenize:sv};function sv(r,t){return n;function n(o){return r.enter("lineEnding"),r.consume(o),r.exit("lineEnding"),Ce(r,t,"linePrefix")}}const Ui={name:"thematicBreak",tokenize:uv};function uv(r,t,n){let o=0,a;return u;function u(h){return r.enter("thematicBreak"),l(h)}function l(h){return a=h,c(h)}function c(h){return h===a?(r.enter("thematicBreakSequence"),f(h)):o>=3&&(h===null||te(h))?(r.exit("thematicBreak"),t(h)):n(h)}function f(h){return h===a?(r.consume(h),o++,f):(r.exit("thematicBreakSequence"),ye(h)?Ce(r,c,"whitespace")(h):c(h))}}const ht={continuation:{tokenize:hv},exit:pv,name:"list",tokenize:fv},lv={partial:!0,tokenize:gv},cv={partial:!0,tokenize:dv};function fv(r,t,n){const o=this,a=o.events[o.events.length-1];let u=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,l=0;return c;function c(y){const C=o.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(C==="listUnordered"?!o.containerState.marker||y===o.containerState.marker:Ua(y)){if(o.containerState.type||(o.containerState.type=C,r.enter(C,{_container:!0})),C==="listUnordered")return r.enter("listItemPrefix"),y===42||y===45?r.check(Ui,n,h)(y):h(y);if(!o.interrupt||y===49)return r.enter("listItemPrefix"),r.enter("listItemValue"),f(y)}return n(y)}function f(y){return Ua(y)&&++l<10?(r.consume(y),f):(!o.interrupt||l<2)&&(o.containerState.marker?y===o.containerState.marker:y===41||y===46)?(r.exit("listItemValue"),h(y)):n(y)}function h(y){return r.enter("listItemMarker"),r.consume(y),r.exit("listItemMarker"),o.containerState.marker=o.containerState.marker||y,r.check(to,o.interrupt?n:g,r.attempt(lv,b,p))}function g(y){return o.containerState.initialBlankLine=!0,u++,b(y)}function p(y){return ye(y)?(r.enter("listItemPrefixWhitespace"),r.consume(y),r.exit("listItemPrefixWhitespace"),b):n(y)}function b(y){return o.containerState.size=u+o.sliceSerialize(r.exit("listItemPrefix"),!0).length,t(y)}}function hv(r,t,n){const o=this;return o.containerState._closeFlow=void 0,r.check(to,a,u);function a(c){return o.containerState.furtherBlankLines=o.containerState.furtherBlankLines||o.containerState.initialBlankLine,Ce(r,t,"listItemIndent",o.containerState.size+1)(c)}function u(c){return o.containerState.furtherBlankLines||!ye(c)?(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,l(c)):(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,r.attempt(cv,t,l)(c))}function l(c){return o.containerState._closeFlow=!0,o.interrupt=void 0,Ce(r,r.attempt(ht,t,n),"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function dv(r,t,n){const o=this;return Ce(r,a,"listItemIndent",o.containerState.size+1);function a(u){const l=o.events[o.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===o.containerState.size?t(u):n(u)}}function pv(r){r.exit(this.containerState.type)}function gv(r,t,n){const o=this;return Ce(r,a,"listItemPrefixWhitespace",o.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(u){const l=o.events[o.events.length-1];return!ye(u)&&l&&l[1].type==="listItemPrefixWhitespace"?t(u):n(u)}}const hc={name:"setextUnderline",resolveTo:mv,tokenize:yv};function mv(r,t){let n=r.length,o,a,u;for(;n--;)if(r[n][0]==="enter"){if(r[n][1].type==="content"){o=n;break}r[n][1].type==="paragraph"&&(a=n)}else r[n][1].type==="content"&&r.splice(n,1),!u&&r[n][1].type==="definition"&&(u=n);const l={type:"setextHeading",start:{...r[o][1].start},end:{...r[r.length-1][1].end}};return r[a][1].type="setextHeadingText",u?(r.splice(a,0,["enter",l,t]),r.splice(u+1,0,["exit",r[o][1],t]),r[o][1].end={...r[u][1].end}):r[o][1]=l,r.push(["exit",l,t]),r}function yv(r,t,n){const o=this;let a;return u;function u(h){let g=o.events.length,p;for(;g--;)if(o.events[g][1].type!=="lineEnding"&&o.events[g][1].type!=="linePrefix"&&o.events[g][1].type!=="content"){p=o.events[g][1].type==="paragraph";break}return!o.parser.lazy[o.now().line]&&(o.interrupt||p)?(r.enter("setextHeadingLine"),a=h,l(h)):n(h)}function l(h){return r.enter("setextHeadingLineSequence"),c(h)}function c(h){return h===a?(r.consume(h),c):(r.exit("setextHeadingLineSequence"),ye(h)?Ce(r,f,"lineSuffix")(h):f(h))}function f(h){return h===null||te(h)?(r.exit("setextHeadingLine"),t(h)):n(h)}}const wv={tokenize:bv};function bv(r){const t=this,n=r.attempt(to,o,r.attempt(this.parser.constructs.flowInitial,a,Ce(r,r.attempt(this.parser.constructs.flow,a,r.attempt(Ix,a)),"linePrefix")));return n;function o(u){if(u===null){r.consume(u);return}return r.enter("lineEndingBlank"),r.consume(u),r.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function a(u){if(u===null){r.consume(u);return}return r.enter("lineEnding"),r.consume(u),r.exit("lineEnding"),t.currentConstruct=void 0,n}}const xv={resolveAll:lf()},vv=uf("string"),_v=uf("text");function uf(r){return{resolveAll:lf(r==="text"?kv:void 0),tokenize:t};function t(n){const o=this,a=this.parser.constructs[r],u=n.attempt(a,l,c);return l;function l(g){return h(g)?u(g):c(g)}function c(g){if(g===null){n.consume(g);return}return n.enter("data"),n.consume(g),f}function f(g){return h(g)?(n.exit("data"),u(g)):(n.consume(g),f)}function h(g){if(g===null)return!0;const p=a[g];let b=-1;if(p)for(;++b<p.length;){const y=p[b];if(!y.previous||y.previous.call(o,o.previous))return!0}return!1}}}function lf(r){return t;function t(n,o){let a=-1,u;for(;++a<=n.length;)u===void 0?n[a]&&n[a][1].type==="data"&&(u=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==u+2&&(n[u][1].end=n[a-1][1].end,n.splice(u+2,a-u-2),a=u+2),u=void 0);return r?r(n,o):n}}function kv(r,t){let n=0;for(;++n<=r.length;)if((n===r.length||r[n][1].type==="lineEnding")&&r[n-1][1].type==="data"){const o=r[n-1][1],a=t.sliceStream(o);let u=a.length,l=-1,c=0,f;for(;u--;){const h=a[u];if(typeof h=="string"){for(l=h.length;h.charCodeAt(l-1)===32;)c++,l--;if(l)break;l=-1}else if(h===-2)f=!0,c++;else if(h!==-1){u++;break}}if(t._contentTypeTextTrailing&&n===r.length&&(c=0),c){const h={type:n===r.length||f||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:u?l:o.start._bufferIndex+l,_index:o.start._index+u,line:o.end.line,column:o.end.column-c,offset:o.end.offset-c},end:{...o.end}};o.end={...h.start},o.start.offset===o.end.offset?Object.assign(o,h):(r.splice(n,0,["enter",h,t],["exit",h,t]),n+=2)}n++}return r}const Iv={42:ht,43:ht,45:ht,48:ht,49:ht,50:ht,51:ht,52:ht,53:ht,54:ht,55:ht,56:ht,57:ht,62:ef},Sv={91:Px},Cv={[-2]:Ea,[-1]:Ea,32:Ea},Tv={35:Rx,42:Ui,45:[hc,Ui],60:Nx,61:hc,95:Ui,96:cc,126:cc},Ev={38:nf,92:tf},Pv={[-5]:Pa,[-4]:Pa,[-3]:Pa,33:rv,38:nf,42:Ga,60:[ox,Gx],91:ov,92:[Dx,tf],93:us,95:Ga,96:wx},Av={null:[Ga,xv]},Mv={null:[42,95]},Ov={null:[]},Dv=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Mv,contentInitial:Sv,disable:Ov,document:Iv,flow:Tv,flowInitial:Cv,insideSpan:Av,string:Ev,text:Pv},Symbol.toStringTag,{value:"Module"}));function Fv(r,t,n){let o={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const a={},u=[];let l=[],c=[];const f={attempt:U(O),check:U(E),consume:N,enter:z,exit:W,interrupt:U(E,{interrupt:!0})},h={code:null,containerState:{},defineSkip:P,events:[],now:C,parser:r,previous:null,sliceSerialize:b,sliceStream:y,write:p};let g=t.tokenize.call(h,f);return t.resolveAll&&u.push(t),h;function p(X){return l=Nt(l,X),F(),l[l.length-1]!==null?[]:(V(t,0),h.events=ss(u,h.events,h),h.events)}function b(X,Q){return Lv(y(X),Q)}function y(X){return Rv(l,X)}function C(){const{_bufferIndex:X,_index:Q,line:be,column:Ae,offset:fe}=o;return{_bufferIndex:X,_index:Q,line:be,column:Ae,offset:fe}}function P(X){a[X.line]=X.column,de()}function F(){let X;for(;o._index<l.length;){const Q=l[o._index];if(typeof Q=="string")for(X=o._index,o._bufferIndex<0&&(o._bufferIndex=0);o._index===X&&o._bufferIndex<Q.length;)A(Q.charCodeAt(o._bufferIndex));else A(Q)}}function A(X){g=g(X)}function N(X){te(X)?(o.line++,o.column=1,o.offset+=X===-3?2:1,de()):X!==-1&&(o.column++,o.offset++),o._bufferIndex<0?o._index++:(o._bufferIndex++,o._bufferIndex===l[o._index].length&&(o._bufferIndex=-1,o._index++)),h.previous=X}function z(X,Q){const be=Q||{};return be.type=X,be.start=C(),h.events.push(["enter",be,h]),c.push(be),be}function W(X){const Q=c.pop();return Q.end=C(),h.events.push(["exit",Q,h]),Q}function O(X,Q){V(X,Q.from)}function E(X,Q){Q.restore()}function U(X,Q){return be;function be(Ae,fe,Ge){let Te,qe,Wt,_;return Array.isArray(Ae)?zt(Ae):"tokenize"in Ae?zt([Ae]):Fe(Ae);function Fe(Re){return Wn;function Wn(st){const Et=st!==null&&Re[st],_n=st!==null&&Re.null,ln=[...Array.isArray(Et)?Et:Et?[Et]:[],...Array.isArray(_n)?_n:_n?[_n]:[]];return zt(ln)(st)}}function zt(Re){return Te=Re,qe=0,Re.length===0?Ge:I(Re[qe])}function I(Re){return Wn;function Wn(st){return _=ee(),Wt=Re,Re.partial||(h.currentConstruct=Re),Re.name&&h.parser.constructs.disable.null.includes(Re.name)?at():Re.tokenize.call(Q?Object.assign(Object.create(h),Q):h,f,yt,at)(st)}}function yt(Re){return X(Wt,_),fe}function at(Re){return _.restore(),++qe<Te.length?I(Te[qe]):Ge}}}function V(X,Q){X.resolveAll&&!u.includes(X)&&u.push(X),X.resolve&&an(h.events,Q,h.events.length-Q,X.resolve(h.events.slice(Q),h)),X.resolveTo&&(h.events=X.resolveTo(h.events,h))}function ee(){const X=C(),Q=h.previous,be=h.currentConstruct,Ae=h.events.length,fe=Array.from(c);return{from:Ae,restore:Ge};function Ge(){o=X,h.previous=Q,h.currentConstruct=be,h.events.length=Ae,c=fe,de()}}function de(){o.line in a&&o.column<2&&(o.column=a[o.line],o.offset+=a[o.line]-1)}}function Rv(r,t){const n=t.start._index,o=t.start._bufferIndex,a=t.end._index,u=t.end._bufferIndex;let l;if(n===a)l=[r[n].slice(o,u)];else{if(l=r.slice(n,a),o>-1){const c=l[0];typeof c=="string"?l[0]=c.slice(o):l.shift()}u>0&&l.push(r[a].slice(0,u))}return l}function Lv(r,t){let n=-1;const o=[];let a;for(;++n<r.length;){const u=r[n];let l;if(typeof u=="string")l=u;else switch(u){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=t?" ":"	";break}case-1:{if(!t&&a)continue;l=" ";break}default:l=String.fromCharCode(u)}a=u===-2,o.push(l)}return o.join("")}function $v(r){const o={constructs:Yb([Dv,...(r||{}).extensions||[]]),content:a(Jb),defined:[],document:a(ex),flow:a(wv),lazy:{},string:a(vv),text:a(_v)};return o;function a(u){return l;function l(c){return Fv(o,u,c)}}}function Bv(r){for(;!rf(r););return r}const dc=/[\0\t\n\r]/g;function Nv(){let r=1,t="",n=!0,o;return a;function a(u,l,c){const f=[];let h,g,p,b,y;for(u=t+(typeof u=="string"?u.toString():new TextDecoder(l||void 0).decode(u)),p=0,t="",n&&(u.charCodeAt(0)===65279&&p++,n=void 0);p<u.length;){if(dc.lastIndex=p,h=dc.exec(u),b=h&&h.index!==void 0?h.index:u.length,y=u.charCodeAt(b),!h){t=u.slice(p);break}if(y===10&&p===b&&o)f.push(-3),o=void 0;else switch(o&&(f.push(-5),o=void 0),p<b&&(f.push(u.slice(p,b)),r+=b-p),y){case 0:{f.push(65533),r++;break}case 9:{for(g=Math.ceil(r/4)*4,f.push(-2);r++<g;)f.push(-1);break}case 10:{f.push(-4),r=1;break}default:o=!0,r=1}p=b+1}return c&&(o&&f.push(-5),t&&f.push(t),f.push(null)),f}}const Wv=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function cf(r){return r.replace(Wv,zv)}function zv(r,t,n){if(t)return t;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),u=a===120||a===88;return Zc(n.slice(u?2:1),u?16:10)}return as(n)||r}const ff={}.hasOwnProperty;function qv(r,t,n){return typeof t!="string"&&(n=t,t=void 0),Hv(n)(Bv($v(n).document().write(Nv()(r,t,!0))))}function Hv(r){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:u(Kr),autolinkProtocol:ee,autolinkEmail:ee,atxHeading:u(kn),blockQuote:u(_n),characterEscape:ee,characterReference:ee,codeFenced:u(ln),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:u(ln,l),codeText:u(tr,l),codeTextData:ee,data:ee,codeFlowValue:ee,definition:u(Vr),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:u(wt),hardBreakEscape:u(Xr),hardBreakTrailing:u(Xr),htmlFlow:u(Pt,l),htmlFlowData:ee,htmlText:u(Pt,l),htmlTextData:ee,image:u(jr),label:l,link:u(Kr),listItem:u(bt),listItemValue:b,listOrdered:u(In,p),listUnordered:u(In),paragraph:u(zn),reference:I,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:u(kn),strong:u(nr),thematicBreak:u(qn)},exit:{atxHeading:f(),atxHeadingSequence:O,autolink:f(),autolinkEmail:Et,autolinkProtocol:st,blockQuote:f(),characterEscapeValue:de,characterReferenceMarkerHexadecimal:at,characterReferenceMarkerNumeric:at,characterReferenceValue:Re,characterReference:Wn,codeFenced:f(F),codeFencedFence:P,codeFencedFenceInfo:y,codeFencedFenceMeta:C,codeFlowValue:de,codeIndented:f(A),codeText:f(fe),codeTextData:de,data:de,definition:f(),definitionDestinationString:W,definitionLabelString:N,definitionTitleString:z,emphasis:f(),hardBreakEscape:f(Q),hardBreakTrailing:f(Q),htmlFlow:f(be),htmlFlowData:de,htmlText:f(Ae),htmlTextData:de,image:f(Te),label:Wt,labelText:qe,lineEnding:X,link:f(Ge),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:yt,resourceDestinationString:_,resourceTitleString:Fe,resource:zt,setextHeading:f(V),setextHeadingLineSequence:U,setextHeadingText:E,strong:f(),thematicBreak:f()}};hf(t,(r||{}).mdastExtensions||[]);const n={};return o;function o(R){let q={type:"root",children:[]};const K={stack:[q],tokenStack:[],config:t,enter:c,exit:h,buffer:l,resume:g,data:n},ae=[];let ge=-1;for(;++ge<R.length;)if(R[ge][1].type==="listOrdered"||R[ge][1].type==="listUnordered")if(R[ge][0]==="enter")ae.push(ge);else{const nt=ae.pop();ge=a(R,nt,ge)}for(ge=-1;++ge<R.length;){const nt=t[R[ge][0]];ff.call(nt,R[ge][1].type)&&nt[R[ge][1].type].call(Object.assign({sliceSerialize:R[ge][2].sliceSerialize},K),R[ge][1])}if(K.tokenStack.length>0){const nt=K.tokenStack[K.tokenStack.length-1];(nt[1]||pc).call(K,void 0,nt[0])}for(q.position={start:Rn(R.length>0?R[0][1].start:{line:1,column:1,offset:0}),end:Rn(R.length>0?R[R.length-2][1].end:{line:1,column:1,offset:0})},ge=-1;++ge<t.transforms.length;)q=t.transforms[ge](q)||q;return q}function a(R,q,K){let ae=q-1,ge=-1,nt=!1,qt,xt,cn,fn;for(;++ae<=K;){const Xe=R[ae];switch(Xe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Xe[0]==="enter"?ge++:ge--,fn=void 0;break}case"lineEndingBlank":{Xe[0]==="enter"&&(qt&&!fn&&!ge&&!cn&&(cn=ae),fn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:fn=void 0}if(!ge&&Xe[0]==="enter"&&Xe[1].type==="listItemPrefix"||ge===-1&&Xe[0]==="exit"&&(Xe[1].type==="listUnordered"||Xe[1].type==="listOrdered")){if(qt){let jt=ae;for(xt=void 0;jt--;){const Ht=R[jt];if(Ht[1].type==="lineEnding"||Ht[1].type==="lineEndingBlank"){if(Ht[0]==="exit")continue;xt&&(R[xt][1].type="lineEndingBlank",nt=!0),Ht[1].type="lineEnding",xt=jt}else if(!(Ht[1].type==="linePrefix"||Ht[1].type==="blockQuotePrefix"||Ht[1].type==="blockQuotePrefixWhitespace"||Ht[1].type==="blockQuoteMarker"||Ht[1].type==="listItemIndent"))break}cn&&(!xt||cn<xt)&&(qt._spread=!0),qt.end=Object.assign({},xt?R[xt][1].start:Xe[1].end),R.splice(xt||ae,0,["exit",qt,Xe[2]]),ae++,K++}if(Xe[1].type==="listItemPrefix"){const jt={type:"listItem",_spread:!1,start:Object.assign({},Xe[1].start),end:void 0};qt=jt,R.splice(ae,0,["enter",jt,Xe[2]]),ae++,K++,cn=void 0,fn=!0}}}return R[q][1]._spread=nt,K}function u(R,q){return K;function K(ae){c.call(this,R(ae),ae),q&&q.call(this,ae)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(R,q,K){this.stack[this.stack.length-1].children.push(R),this.stack.push(R),this.tokenStack.push([q,K||void 0]),R.position={start:Rn(q.start),end:void 0}}function f(R){return q;function q(K){R&&R.call(this,K),h.call(this,K)}}function h(R,q){const K=this.stack.pop(),ae=this.tokenStack.pop();if(ae)ae[0].type!==R.type&&(q?q.call(this,R,ae[0]):(ae[1]||pc).call(this,R,ae[0]));else throw new Error("Cannot close `"+R.type+"` ("+qr({start:R.start,end:R.end})+"): it’s not open");K.position.end=Rn(R.end)}function g(){return os(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function b(R){if(this.data.expectingFirstListItemValue){const q=this.stack[this.stack.length-2];q.start=Number.parseInt(this.sliceSerialize(R),10),this.data.expectingFirstListItemValue=void 0}}function y(){const R=this.resume(),q=this.stack[this.stack.length-1];q.lang=R}function C(){const R=this.resume(),q=this.stack[this.stack.length-1];q.meta=R}function P(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function F(){const R=this.resume(),q=this.stack[this.stack.length-1];q.value=R.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function A(){const R=this.resume(),q=this.stack[this.stack.length-1];q.value=R.replace(/(\r?\n|\r)$/g,"")}function N(R){const q=this.resume(),K=this.stack[this.stack.length-1];K.label=q,K.identifier=br(this.sliceSerialize(R)).toLowerCase()}function z(){const R=this.resume(),q=this.stack[this.stack.length-1];q.title=R}function W(){const R=this.resume(),q=this.stack[this.stack.length-1];q.url=R}function O(R){const q=this.stack[this.stack.length-1];if(!q.depth){const K=this.sliceSerialize(R).length;q.depth=K}}function E(){this.data.setextHeadingSlurpLineEnding=!0}function U(R){const q=this.stack[this.stack.length-1];q.depth=this.sliceSerialize(R).codePointAt(0)===61?1:2}function V(){this.data.setextHeadingSlurpLineEnding=void 0}function ee(R){const K=this.stack[this.stack.length-1].children;let ae=K[K.length-1];(!ae||ae.type!=="text")&&(ae=ro(),ae.position={start:Rn(R.start),end:void 0},K.push(ae)),this.stack.push(ae)}function de(R){const q=this.stack.pop();q.value+=this.sliceSerialize(R),q.position.end=Rn(R.end)}function X(R){const q=this.stack[this.stack.length-1];if(this.data.atHardBreak){const K=q.children[q.children.length-1];K.position.end=Rn(R.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(q.type)&&(ee.call(this,R),de.call(this,R))}function Q(){this.data.atHardBreak=!0}function be(){const R=this.resume(),q=this.stack[this.stack.length-1];q.value=R}function Ae(){const R=this.resume(),q=this.stack[this.stack.length-1];q.value=R}function fe(){const R=this.resume(),q=this.stack[this.stack.length-1];q.value=R}function Ge(){const R=this.stack[this.stack.length-1];if(this.data.inReference){const q=this.data.referenceType||"shortcut";R.type+="Reference",R.referenceType=q,delete R.url,delete R.title}else delete R.identifier,delete R.label;this.data.referenceType=void 0}function Te(){const R=this.stack[this.stack.length-1];if(this.data.inReference){const q=this.data.referenceType||"shortcut";R.type+="Reference",R.referenceType=q,delete R.url,delete R.title}else delete R.identifier,delete R.label;this.data.referenceType=void 0}function qe(R){const q=this.sliceSerialize(R),K=this.stack[this.stack.length-2];K.label=cf(q),K.identifier=br(q).toLowerCase()}function Wt(){const R=this.stack[this.stack.length-1],q=this.resume(),K=this.stack[this.stack.length-1];if(this.data.inReference=!0,K.type==="link"){const ae=R.children;K.children=ae}else K.alt=q}function _(){const R=this.resume(),q=this.stack[this.stack.length-1];q.url=R}function Fe(){const R=this.resume(),q=this.stack[this.stack.length-1];q.title=R}function zt(){this.data.inReference=void 0}function I(){this.data.referenceType="collapsed"}function yt(R){const q=this.resume(),K=this.stack[this.stack.length-1];K.label=q,K.identifier=br(this.sliceSerialize(R)).toLowerCase(),this.data.referenceType="full"}function at(R){this.data.characterReferenceType=R.type}function Re(R){const q=this.sliceSerialize(R),K=this.data.characterReferenceType;let ae;K?(ae=Zc(q,K==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ae=as(q);const ge=this.stack[this.stack.length-1];ge.value+=ae}function Wn(R){const q=this.stack.pop();q.position.end=Rn(R.end)}function st(R){de.call(this,R);const q=this.stack[this.stack.length-1];q.url=this.sliceSerialize(R)}function Et(R){de.call(this,R);const q=this.stack[this.stack.length-1];q.url="mailto:"+this.sliceSerialize(R)}function _n(){return{type:"blockquote",children:[]}}function ln(){return{type:"code",lang:null,meta:null,value:""}}function tr(){return{type:"inlineCode",value:""}}function Vr(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function wt(){return{type:"emphasis",children:[]}}function kn(){return{type:"heading",depth:0,children:[]}}function Xr(){return{type:"break"}}function Pt(){return{type:"html",value:""}}function jr(){return{type:"image",title:null,url:"",alt:null}}function Kr(){return{type:"link",title:null,url:"",children:[]}}function In(R){return{type:"list",ordered:R.type==="listOrdered",start:null,spread:R._spread,children:[]}}function bt(R){return{type:"listItem",spread:R._spread,checked:null,children:[]}}function zn(){return{type:"paragraph",children:[]}}function nr(){return{type:"strong",children:[]}}function ro(){return{type:"text",value:""}}function qn(){return{type:"thematicBreak"}}}function Rn(r){return{line:r.line,column:r.column,offset:r.offset}}function hf(r,t){let n=-1;for(;++n<t.length;){const o=t[n];Array.isArray(o)?hf(r,o):Yv(r,o)}}function Yv(r,t){let n;for(n in t)if(ff.call(t,n))switch(n){case"canContainEols":{const o=t[n];o&&r[n].push(...o);break}case"transforms":{const o=t[n];o&&r[n].push(...o);break}case"enter":case"exit":{const o=t[n];o&&Object.assign(r[n],o);break}}}function pc(r,t){throw r?new Error("Cannot close `"+r.type+"` ("+qr({start:r.start,end:r.end})+"): a different token (`"+t.type+"`, "+qr({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+qr({start:t.start,end:t.end})+") is still open")}function Qa(r){const t=this;t.parser=n;function n(o){return qv(o,{...t.data("settings"),...r,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}const ls=(function(r){if(r==null)return Vv;if(typeof r=="function")return no(r);if(typeof r=="object")return Array.isArray(r)?Uv(r):Gv(r);if(typeof r=="string")return Qv(r);throw new Error("Expected function, string, or object as test")});function Uv(r){const t=[];let n=-1;for(;++n<r.length;)t[n]=ls(r[n]);return no(o);function o(...a){let u=-1;for(;++u<t.length;)if(t[u].apply(this,a))return!0;return!1}}function Gv(r){const t=r;return no(n);function n(o){const a=o;let u;for(u in r)if(a[u]!==t[u])return!1;return!0}}function Qv(r){return no(t);function t(n){return n&&n.type===r}}function no(r){return t;function t(n,o,a){return!!(Xv(n)&&r.call(this,n,typeof o=="number"?o:void 0,a||void 0))}}function Vv(){return!0}function Xv(r){return r!==null&&typeof r=="object"&&"type"in r}const df=[],jv=!0,Va=!1,Kv="skip";function Jv(r,t,n,o){let a;typeof t=="function"&&typeof n!="function"?(o=n,n=t):a=t;const u=ls(a),l=o?-1:1;c(r,void 0,[])();function c(f,h,g){const p=f&&typeof f=="object"?f:{};if(typeof p.type=="string"){const y=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(b,"name",{value:"node ("+(f.type+(y?"<"+y+">":""))+")"})}return b;function b(){let y=df,C,P,F;if((!t||u(f,h,g[g.length-1]||void 0))&&(y=Zv(n(f,g)),y[0]===Va))return y;if("children"in f&&f.children){const A=f;if(A.children&&y[0]!==Kv)for(P=(o?A.children.length:-1)+l,F=g.concat(A);P>-1&&P<A.children.length;){const N=A.children[P];if(C=c(N,P,F)(),C[0]===Va)return C;P=typeof C[1]=="number"?C[1]:P+l}}return y}}}function Zv(r){return Array.isArray(r)?r:typeof r=="number"?[jv,r]:r==null?df:[r]}function Xa(r,t,n,o){let a,u,l;typeof t=="function"&&typeof n!="function"?(u=void 0,l=t,a=n):(u=t,l=n,a=o),Jv(r,u,c,a);function c(f,h){const g=h[h.length-1],p=g?g.children.indexOf(f):void 0;return l(f,p,g)}}const qi=sn(un.ValueExtractor);class e_{extract(t){const n=Ki().use(Qa).parse(t),o=[],a=[],u={};Xa(n,l=>{if(l.type==="html"&&l.position){const c=l.value,f=l.position.start.offset;if(c.includes(tn.input)){const h=this.getMeta(c);if(h){const g=this.key(h);c.includes('end"')?u[g]?u[g].endPos=l.position.start.offset:u[g]={meta:h,startPos:-1,endPos:l.position.start.offset,hiddenValues:[]}:u[g]?u[g].startPos=l.position.end.offset:u[g]={meta:h,startPos:l.position.end.offset,endPos:-1,hiddenValues:[]}}}else if(c.includes(tn.hiddenValue)){const h=this.getMeta(c);if(h&&h.value){const g=this.key(h);u[g]||(u[g]={meta:h,startPos:-1,endPos:-1,hiddenValues:[]}),u[g].hiddenValues.push({value:h.value,pos:f})}}}});for(const l in u){const{meta:c,startPos:f,endPos:h,hiddenValues:g}=u[l];if(f===-1||h===-1){if(c.inputType==="text"||c.inputType==="richText"){if(f!==-1&&h===-1){const P=this.findNextInputTagPosition(t,f);if(P!==-1){const A=t.substring(f,P).trim().replace(/^>\s?/gm,"").replace(/<[^>]+>/g,"").trim();if(!A||A===">"){o.push({componentId:c.componentId,inputId:c.inputId,inputType:c.inputType,value:null,errors:[]});continue}}}o.push({componentId:c.componentId,inputId:c.inputId,inputType:c.inputType,value:null,errors:[]});continue}qi.warn(`Input ${l} missing start or end tag, skipping`);continue}const b=t.substring(f,h).trim().replace(/<span[^>]*>.*?<\/span>/gs,"").trim(),y=g.filter(P=>P.pos>=f&&P.pos<h).map(P=>P.value),C=this.extractValue(c.inputType,b,y,c);C.errors.length>0&&a.push(...C.errors),o.push({componentId:c.componentId,inputId:c.inputId,inputType:c.inputType,value:C.value,errors:C.errors})}return qi.dev("Extracted values",o),a.length>0&&qi.error("Extraction errors:",a),o}findNextInputTagPosition(t,n){const o=new RegExp(`<span[^>]*class="\\$${tn.input}[^"]*"`,"g");o.lastIndex=n;const a=o.exec(t);return a?a.index:-1}getMeta(t){const n=t.match(/data-meta=(?:'([^']+)'|"([^"]+)")/);if(!n)return null;try{return JSON.parse(n[1]||n[2])}catch{return null}}key(t){return`${t.componentId}::${t.inputId}`}extractValue(t,n,o,a){const u=[];let l=null;switch(t){case"boolean":{n.includes("[x]")||n.includes("[X]")?l=!0:n.includes("[ ]")?l=!1:(u.push("Boolean input must be a markdown checkbox"),l=null);break}case"text":{let c=n;if(a.technicalPrefix){const h=a.technicalPrefix.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");c=c.replace(new RegExp(`^${h}`,"gm"),"")}const f=c.replace(/^>\s?/gm,"").replace(/<[^>]+>/g,"").trim();a.required&&!f&&u.push("Text input is required"),a.placeholder&&f===a.placeholder?l=null:l=f;break}case"richText":{let c=n;if(a.technicalPrefix){const h=a.technicalPrefix.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");c=c.replace(new RegExp(`^${h}`,"gm"),"")}const f=c.replace(/<[^>]+>/g,"").trim();a.required&&!f&&u.push("Rich text input is required"),a.placeholder&&f===a.placeholder?l=null:l=f;break}case"multicheckbox":{const c=[],f=n.split(`
`);let h=0;f.forEach(g=>{g.match(/\[(x|X)\]/)&&h<o.length&&c.push(o[h]),g.match(/\[[ xX]\]/)&&h++}),a.required&&c.length===0&&u.push("At least one option must be selected"),a.singleChoice?(c.length>1&&u.push(`Multiple checked values for singleChoice input: ${a.componentId}::${a.inputId} [${c.join(", ")}]`),l=c[0]??null):l=c;break}case"number":{let c=n;if(a.technicalPrefix){const h=a.technicalPrefix.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");c=c.replace(new RegExp(`^${h}`,"gm"),"")}const f=c.match(new RegExp("(?<!\\d)(\\d+(?:[.,]\\d+)?)"));f?(l=parseFloat(f[1].replace(",",".")),a.required&&(l==null||isNaN(l))&&u.push("Number input is required"),typeof l=="number"&&a.min!==void 0&&l<a.min&&u.push(`Number must be >= ${a.min}`),typeof l=="number"&&a.max!==void 0&&l>a.max&&u.push(`Number must be <= ${a.max}`)):(a.required&&u.push("Number input is required"),l=null);break}default:l=n}return{value:l,errors:u}}extractReportMetadata(t){try{const n=Ki().use(Qa).parse(t);let o=null;return Xa(n,a=>{if(a.type==="html"){const u=a.value;if(u.includes(tn.reportMetadata)){const l=this.getMeta(u);if(l)return o=l,!1}}}),o}catch(n){return qi.error("Failed to extract report metadata",{error:n}),null}}}const gc=new e_,tt=sn(un.InputCollector);class t_{constructor(t){this.getConfig=t}async collectFromYesterday(){tt.dev("Starting collection of inputs from yesterday’s reports");const t={};this.getConfig();for(const[n,{folder:o,name:a}]of Object.entries(Kc))try{const u=`${Ur.baseOutput}/${o}`;tt.dev(`Checking folder "${u}" for report: ${n}`);const l=await Ur._listFiles(u);if(!l.length){tt.warn(`No files found in "${u}" for report: ${n}`);continue}const f=l.sort((N,z)=>{const W=N.match(/-(\d{5})-/),O=z.match(/-(\d{5})-/);return!W||!O?0:parseInt(O[1])-parseInt(W[1])})[0];if(!f.includes(n)){tt.warn(`Newest file "${f}" in folder "${u}" does not match report type: ${n}`);continue}const h=`${u}/${f}`,g=Ie.vault.getAbstractFileByPath(h);if(!g||!("vault"in Ie)){tt.error(`Could not load file for report ${n}`,{filePath:h});continue}const p=f.match(/^(\d{8})-(\d{5})-/);let b="",y="";p&&(b=`${p[1].slice(0,4)}-${p[1].slice(4,6)}-${p[1].slice(6,8)}`,y=p[2]),tt.dev(`Reading file: "${h}"`);const C=await Ie.vault.read(g);tt.info(`[InputCollector] File content length: ${C.length}`),tt.dev(`[InputCollector] First 500 chars: ${C.substring(0,500)}`);const P=gc.extractReportMetadata(C);tt.info("[InputCollector] Extracted metadata",{reportMetadata:P}),P?(b=P.reportDate,y=P.reportNumber,tt.info(`[InputCollector] Using report metadata from file: date=${b}, number=${y}`)):(tt.warn(`[InputCollector] No metadata found in file, using filename parsing: ${f}`),tt.warn(`[InputCollector] Fallback - reportDate=${b}, reportNumber=${y}`));const A=gc.extract(C).map(N=>({componentId:N.componentId,inputId:N.inputId,type:N.inputType??"unknown",value:N.value,errors:N.errors&&N.errors.length>0?N.errors:void 0,reportType:n,reportDate:b,reportNumber:y}));t[n]=A,tt.dev(`Parsed ${A.length} inputs for report: ${n}`)}catch(u){tt.error(`Failed collecting inputs for ${n}`,{error:u})}return tt.info(`InputCollector finished. Collected reports: ${Object.keys(t).length}`),tt.dev("Collected inputs summary:",{collectedByReport:t}),t}}const n_=new t_(()=>Tt);function r_(r,t){if(r===void 0)throw new Error("lowdb: missing adapter");if(t===void 0)throw new Error("lowdb: missing default data")}class i_{adapter;data;constructor(t,n){r_(t,n),this.adapter=t,this.data=n}async read(){const t=await this.adapter.read();t&&(this.data=t)}async write(){this.data&&await this.adapter.write(this.data)}async update(t){t(this.data),await this.write()}}const dt=sn(un.DbService);class o_{constructor(t){this.dbPath=t}async read(){try{const t=Ie.vault.getAbstractFileByPath(this.dbPath);if(t&&"extension"in t){const n=await Ie.vault.read(t);return JSON.parse(n)}return null}catch(t){return dt.error("Error reading database",{error:t}),null}}async write(t){try{const n=JSON.stringify(t,null,2),o=Ie.vault.getAbstractFileByPath(this.dbPath);o&&"extension"in o?(await Ie.vault.modify(o,n),dt.dev(`Database saved to ${this.dbPath}`)):(await Ie.vault.create(this.dbPath,n),dt.info(`Database created at ${this.dbPath}`))}catch(n){dt.error("Error writing database",{error:n})}}}class a_{constructor(){this.db=null}getDbPath(){return`${Tt.projectDir}/${Tt.coreDir}/powerjournal-db.json`}async ensureCoreDir(){const t=`${Tt.projectDir}/${Tt.coreDir}`;Ie.vault.getAbstractFileByPath(t)||(dt.dev(`Creating core directory: ${t}`),await Ie.vault.createFolder(t))}async ensureDb(){if(!this.db){await this.ensureCoreDir();const t=this.getDbPath(),n=new o_(t);this.db=new i_(n,{reports:{}}),dt.dev(`Database adapter initialized for ${t}`)}return this.db}async init(){const t=await this.ensureDb();await t.read(),t.data||={reports:{}},dt.dev("Database initialized")}async saveReportInputs(t,n){await this.init();const o=await this.ensureDb();o.data.reports[t]=n,await o.write(),dt.info(`Saved ${n.length} inputs for report type: ${t}`)}async appendReportInputs(t,n){await this.init();const o=await this.ensureDb();o.data.reports[t]||(o.data.reports[t]=[]),o.data.reports[t].push(...n),await o.write(),dt.info(`Appended ${n.length} inputs to report type: ${t}`)}async upsertReportInputs(t,n){await this.init();const o=await this.ensureDb();o.data.reports[t]||(o.data.reports[t]=[]);const a=new Set(n.map(l=>`${l.reportDate}-${l.reportNumber}`)),u=o.data.reports[t].filter(l=>{const c=`${l.reportDate}-${l.reportNumber}`;return!a.has(c)});o.data.reports[t]=[...u,...n],await o.write(),dt.info(`Upserted ${n.length} inputs for ${t} (removed duplicates)`)}async getReportInputs(t){await this.init();const o=(await this.ensureDb()).data.reports[t]||[];return dt.dev(`Retrieved ${o.length} inputs for report type: ${t}`),o}async getInputsById(t,n,o){await this.init();const u=(await this.ensureDb()).data.reports[t]||[],l=Array.isArray(n)?n:[n],c=u.filter(f=>{const h=l.includes(f.inputId),g=o?f.componentId===o:!0;return h&&g});return dt.dev(`Filtered ${c.length} inputs for ${l.join(", ")}${o?` in ${o}`:""}`),c}async getInputsLastNReports(t){const{inputIds:n,count:o,componentId:a,reportType:u=Yr.ALMOST_DAILY}=t,c=(await this.getInputsById(u,n,a)).sort((p,b)=>{const y=(b.reportDate||"").localeCompare(p.reportDate||"");return y!==0?y:(b.reportNumber||"0").localeCompare(p.reportNumber||"0")}),h=Array.from(new Set(c.map(p=>p.reportDate))).slice(0,o),g=c.filter(p=>h.includes(p.reportDate));return dt.info(`Retrieved ${g.length} inputs from last ${o} reports`),g}async getInputsInDateRange(t,n,o,a,u){const c=(await this.getInputsById(t,n,u)).filter(f=>{const h=f.reportDate||"";return h>=o&&h<=a});return dt.info(`Retrieved ${c.length} inputs between ${o} and ${a}`),c}async getAvailableInputs(t,n){await this.init();const a=(await this.ensureDb()).data.reports[t]||[],u=new Set(a.filter(l=>l.componentId===n).map(l=>l.inputId));return Array.from(u)}}const vn=new a_,mc={}.hasOwnProperty;function s_(r,t){const n=t||{};function o(a,...u){let l=o.invalid;const c=o.handlers;if(a&&mc.call(a,r)){const f=String(a[r]);l=mc.call(c,f)?c[f]:o.unknown}if(l)return l.call(this,a,...u)}return o.handlers=n.handlers||{},o.invalid=n.invalid,o.unknown=n.unknown,o}const u_={}.hasOwnProperty;function pf(r,t){let n=-1,o;if(t.extensions)for(;++n<t.extensions.length;)pf(r,t.extensions[n]);for(o in t)if(u_.call(t,o))switch(o){case"extensions":break;case"unsafe":{yc(r[o],t[o]);break}case"join":{yc(r[o],t[o]);break}case"handlers":{l_(r[o],t[o]);break}default:r.options[o]=t[o]}return r}function yc(r,t){t&&r.push(...t)}function l_(r,t){t&&Object.assign(r,t)}function c_(r,t,n,o){const a=n.enter("blockquote"),u=n.createTracker(o);u.move("> "),u.shift(2);const l=n.indentLines(n.containerFlow(r,u.current()),f_);return a(),l}function f_(r,t,n){return">"+(n?"":" ")+r}function gf(r,t){return wc(r,t.inConstruct,!0)&&!wc(r,t.notInConstruct,!1)}function wc(r,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let o=-1;for(;++o<t.length;)if(r.includes(t[o]))return!0;return!1}function bc(r,t,n,o){let a=-1;for(;++a<n.unsafe.length;)if(n.unsafe[a].character===`
`&&gf(n.stack,n.unsafe[a]))return/[ \t]/.test(o.before)?"":" ";return`\\
`}function h_(r,t){const n=String(r);let o=n.indexOf(t),a=o,u=0,l=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;o!==-1;)o===a?++u>l&&(l=u):u=1,a=o+t.length,o=n.indexOf(t,a);return l}function ja(r,t){return!!(t.options.fences===!1&&r.value&&!r.lang&&/[^ \r\n]/.test(r.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(r.value))}function d_(r){const t=r.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function p_(r,t,n,o){const a=d_(n),u=r.value||"",l=a==="`"?"GraveAccent":"Tilde";if(ja(r,n)){const p=n.enter("codeIndented"),b=n.indentLines(u,g_);return p(),b}const c=n.createTracker(o),f=a.repeat(Math.max(h_(u,a)+1,3)),h=n.enter("codeFenced");let g=c.move(f);if(r.lang){const p=n.enter(`codeFencedLang${l}`);g+=c.move(n.safe(r.lang,{before:g,after:" ",encode:["`"],...c.current()})),p()}if(r.lang&&r.meta){const p=n.enter(`codeFencedMeta${l}`);g+=c.move(" "),g+=c.move(n.safe(r.meta,{before:g,after:`
`,encode:["`"],...c.current()})),p()}return g+=c.move(`
`),u&&(g+=c.move(u+`
`)),g+=c.move(f),h(),g}function g_(r,t,n){return(n?"":"    ")+r}function cs(r){const t=r.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function m_(r,t,n,o){const a=cs(n),u=a==='"'?"Quote":"Apostrophe",l=n.enter("definition");let c=n.enter("label");const f=n.createTracker(o);let h=f.move("[");return h+=f.move(n.safe(n.associationId(r),{before:h,after:"]",...f.current()})),h+=f.move("]: "),c(),!r.url||/[\0- \u007F]/.test(r.url)?(c=n.enter("destinationLiteral"),h+=f.move("<"),h+=f.move(n.safe(r.url,{before:h,after:">",...f.current()})),h+=f.move(">")):(c=n.enter("destinationRaw"),h+=f.move(n.safe(r.url,{before:h,after:r.title?" ":`
`,...f.current()}))),c(),r.title&&(c=n.enter(`title${u}`),h+=f.move(" "+a),h+=f.move(n.safe(r.title,{before:h,after:a,...f.current()})),h+=f.move(a),c()),l(),h}function y_(r){const t=r.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Bn(r){return"&#x"+r.toString(16).toUpperCase()+";"}function Zi(r,t,n){const o=Ji(r),a=Ji(t);return o===void 0?a===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:o===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}mf.peek=w_;function mf(r,t,n,o){const a=y_(n),u=n.enter("emphasis"),l=n.createTracker(o),c=l.move(a);let f=l.move(n.containerPhrasing(r,{after:a,before:c,...l.current()}));const h=f.charCodeAt(0),g=Zi(o.before.charCodeAt(o.before.length-1),h,a);g.inside&&(f=Bn(h)+f.slice(1));const p=f.charCodeAt(f.length-1),b=Zi(o.after.charCodeAt(0),p,a);b.inside&&(f=f.slice(0,-1)+Bn(p));const y=l.move(a);return u(),n.attentionEncodeSurroundingInfo={after:b.outside,before:g.outside},c+f+y}function w_(r,t,n){return n.options.emphasis||"*"}function yf(r,t){let n=!1;return Xa(r,function(o){if("value"in o&&/\r?\n|\r/.test(o.value)||o.type==="break")return n=!0,Va}),!!((!r.depth||r.depth<3)&&os(r)&&(t.options.setext||n))}function b_(r,t,n,o){const a=Math.max(Math.min(6,r.depth||1),1),u=n.createTracker(o);if(yf(r,n)){const g=n.enter("headingSetext"),p=n.enter("phrasing"),b=n.containerPhrasing(r,{...u.current(),before:`
`,after:`
`});return p(),g(),b+`
`+(a===1?"=":"-").repeat(b.length-(Math.max(b.lastIndexOf("\r"),b.lastIndexOf(`
`))+1))}const l="#".repeat(a),c=n.enter("headingAtx"),f=n.enter("phrasing");u.move(l+" ");let h=n.containerPhrasing(r,{before:"# ",after:`
`,...u.current()});return/^[\t ]/.test(h)&&(h=Bn(h.charCodeAt(0))+h.slice(1)),h=h?l+" "+h:l,n.options.closeAtx&&(h+=" "+l),f(),c(),h}wf.peek=x_;function wf(r){return r.value||""}function x_(){return"<"}bf.peek=v_;function bf(r,t,n,o){const a=cs(n),u=a==='"'?"Quote":"Apostrophe",l=n.enter("image");let c=n.enter("label");const f=n.createTracker(o);let h=f.move("![");return h+=f.move(n.safe(r.alt,{before:h,after:"]",...f.current()})),h+=f.move("]("),c(),!r.url&&r.title||/[\0- \u007F]/.test(r.url)?(c=n.enter("destinationLiteral"),h+=f.move("<"),h+=f.move(n.safe(r.url,{before:h,after:">",...f.current()})),h+=f.move(">")):(c=n.enter("destinationRaw"),h+=f.move(n.safe(r.url,{before:h,after:r.title?" ":")",...f.current()}))),c(),r.title&&(c=n.enter(`title${u}`),h+=f.move(" "+a),h+=f.move(n.safe(r.title,{before:h,after:a,...f.current()})),h+=f.move(a),c()),h+=f.move(")"),l(),h}function v_(){return"!"}xf.peek=__;function xf(r,t,n,o){const a=r.referenceType,u=n.enter("imageReference");let l=n.enter("label");const c=n.createTracker(o);let f=c.move("![");const h=n.safe(r.alt,{before:f,after:"]",...c.current()});f+=c.move(h+"]["),l();const g=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(r),{before:f,after:"]",...c.current()});return l(),n.stack=g,u(),a==="full"||!h||h!==p?f+=c.move(p+"]"):a==="shortcut"?f=f.slice(0,-1):f+=c.move("]"),f}function __(){return"!"}vf.peek=k_;function vf(r,t,n){let o=r.value||"",a="`",u=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(o);)a+="`";for(/[^ \r\n]/.test(o)&&(/^[ \r\n]/.test(o)&&/[ \r\n]$/.test(o)||/^`|`$/.test(o))&&(o=" "+o+" ");++u<n.unsafe.length;){const l=n.unsafe[u],c=n.compilePattern(l);let f;if(l.atBreak)for(;f=c.exec(o);){let h=f.index;o.charCodeAt(h)===10&&o.charCodeAt(h-1)===13&&h--,o=o.slice(0,h)+" "+o.slice(f.index+1)}}return a+o+a}function k_(){return"`"}function _f(r,t){const n=os(r);return!!(!t.options.resourceLink&&r.url&&!r.title&&r.children&&r.children.length===1&&r.children[0].type==="text"&&(n===r.url||"mailto:"+n===r.url)&&/^[a-z][a-z+.-]+:/i.test(r.url)&&!/[\0- <>\u007F]/.test(r.url))}kf.peek=I_;function kf(r,t,n,o){const a=cs(n),u=a==='"'?"Quote":"Apostrophe",l=n.createTracker(o);let c,f;if(_f(r,n)){const g=n.stack;n.stack=[],c=n.enter("autolink");let p=l.move("<");return p+=l.move(n.containerPhrasing(r,{before:p,after:">",...l.current()})),p+=l.move(">"),c(),n.stack=g,p}c=n.enter("link"),f=n.enter("label");let h=l.move("[");return h+=l.move(n.containerPhrasing(r,{before:h,after:"](",...l.current()})),h+=l.move("]("),f(),!r.url&&r.title||/[\0- \u007F]/.test(r.url)?(f=n.enter("destinationLiteral"),h+=l.move("<"),h+=l.move(n.safe(r.url,{before:h,after:">",...l.current()})),h+=l.move(">")):(f=n.enter("destinationRaw"),h+=l.move(n.safe(r.url,{before:h,after:r.title?" ":")",...l.current()}))),f(),r.title&&(f=n.enter(`title${u}`),h+=l.move(" "+a),h+=l.move(n.safe(r.title,{before:h,after:a,...l.current()})),h+=l.move(a),f()),h+=l.move(")"),c(),h}function I_(r,t,n){return _f(r,n)?"<":"["}If.peek=S_;function If(r,t,n,o){const a=r.referenceType,u=n.enter("linkReference");let l=n.enter("label");const c=n.createTracker(o);let f=c.move("[");const h=n.containerPhrasing(r,{before:f,after:"]",...c.current()});f+=c.move(h+"]["),l();const g=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(r),{before:f,after:"]",...c.current()});return l(),n.stack=g,u(),a==="full"||!h||h!==p?f+=c.move(p+"]"):a==="shortcut"?f=f.slice(0,-1):f+=c.move("]"),f}function S_(){return"["}function fs(r){const t=r.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function C_(r){const t=fs(r),n=r.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function T_(r){const t=r.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function Sf(r){const t=r.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function E_(r,t,n,o){const a=n.enter("list"),u=n.bulletCurrent;let l=r.ordered?T_(n):fs(n);const c=r.ordered?l==="."?")":".":C_(n);let f=t&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!r.ordered){const g=r.children?r.children[0]:void 0;if((l==="*"||l==="-")&&g&&(!g.children||!g.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(f=!0),Sf(n)===l&&g){let p=-1;for(;++p<r.children.length;){const b=r.children[p];if(b&&b.type==="listItem"&&b.children&&b.children[0]&&b.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(l=c),n.bulletCurrent=l;const h=n.containerFlow(r,o);return n.bulletLastUsed=l,n.bulletCurrent=u,a(),h}function P_(r){const t=r.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function A_(r,t,n,o){const a=P_(n);let u=n.bulletCurrent||fs(n);t&&t.type==="list"&&t.ordered&&(u=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(r))+u);let l=u.length+1;(a==="tab"||a==="mixed"&&(t&&t.type==="list"&&t.spread||r.spread))&&(l=Math.ceil(l/4)*4);const c=n.createTracker(o);c.move(u+" ".repeat(l-u.length)),c.shift(l);const f=n.enter("listItem"),h=n.indentLines(n.containerFlow(r,c.current()),g);return f(),h;function g(p,b,y){return b?(y?"":" ".repeat(l))+p:(y?u:u+" ".repeat(l-u.length))+p}}function M_(r,t,n,o){const a=n.enter("paragraph"),u=n.enter("phrasing"),l=n.containerPhrasing(r,o);return u(),a(),l}const O_=ls(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function D_(r,t,n,o){return(r.children.some(function(l){return O_(l)})?n.containerPhrasing:n.containerFlow).call(n,r,o)}function F_(r){const t=r.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}Cf.peek=R_;function Cf(r,t,n,o){const a=F_(n),u=n.enter("strong"),l=n.createTracker(o),c=l.move(a+a);let f=l.move(n.containerPhrasing(r,{after:a,before:c,...l.current()}));const h=f.charCodeAt(0),g=Zi(o.before.charCodeAt(o.before.length-1),h,a);g.inside&&(f=Bn(h)+f.slice(1));const p=f.charCodeAt(f.length-1),b=Zi(o.after.charCodeAt(0),p,a);b.inside&&(f=f.slice(0,-1)+Bn(p));const y=l.move(a+a);return u(),n.attentionEncodeSurroundingInfo={after:b.outside,before:g.outside},c+f+y}function R_(r,t,n){return n.options.strong||"*"}function L_(r,t,n,o){return n.safe(r.value,o)}function $_(r){const t=r.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function B_(r,t,n){const o=(Sf(n)+(n.options.ruleSpaces?" ":"")).repeat($_(n));return n.options.ruleSpaces?o.slice(0,-1):o}const N_={blockquote:c_,break:bc,code:p_,definition:m_,emphasis:mf,hardBreak:bc,heading:b_,html:wf,image:bf,imageReference:xf,inlineCode:vf,link:kf,linkReference:If,list:E_,listItem:A_,paragraph:M_,root:D_,strong:Cf,text:L_,thematicBreak:B_},W_=[z_];function z_(r,t,n,o){if(t.type==="code"&&ja(t,o)&&(r.type==="list"||r.type===t.type&&ja(r,o)))return!1;if("spread"in n&&typeof n.spread=="boolean")return r.type==="paragraph"&&(r.type===t.type||t.type==="definition"||t.type==="heading"&&yf(t,o))?void 0:n.spread?1:0}const Zn=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],q_=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:Zn},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:Zn},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:Zn},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:Zn},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:Zn},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:Zn},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:Zn},{atBreak:!0,character:"~"}];function H_(r){return r.label||!r.identifier?r.label||"":cf(r.identifier)}function Y_(r){if(!r._compiled){const t=(r.atBreak?"[\\r\\n][\\t ]*":"")+(r.before?"(?:"+r.before+")":"");r._compiled=new RegExp((t?"("+t+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(r.character)?"\\":"")+r.character+(r.after?"(?:"+r.after+")":""),"g")}return r._compiled}function U_(r,t,n){const o=t.indexStack,a=r.children||[],u=[];let l=-1,c=n.before,f;o.push(-1);let h=t.createTracker(n);for(;++l<a.length;){const g=a[l];let p;if(o[o.length-1]=l,l+1<a.length){let C=t.handle.handlers[a[l+1].type];C&&C.peek&&(C=C.peek),p=C?C(a[l+1],r,t,{before:"",after:"",...h.current()}).charAt(0):""}else p=n.after;u.length>0&&(c==="\r"||c===`
`)&&g.type==="html"&&(u[u.length-1]=u[u.length-1].replace(/(\r?\n|\r)$/," "),c=" ",h=t.createTracker(n),h.move(u.join("")));let b=t.handle(g,r,t,{...h.current(),after:p,before:c});f&&f===b.slice(0,1)&&(b=Bn(f.charCodeAt(0))+b.slice(1));const y=t.attentionEncodeSurroundingInfo;t.attentionEncodeSurroundingInfo=void 0,f=void 0,y&&(u.length>0&&y.before&&c===u[u.length-1].slice(-1)&&(u[u.length-1]=u[u.length-1].slice(0,-1)+Bn(c.charCodeAt(0))),y.after&&(f=p)),h.move(b),u.push(b),c=b.slice(-1)}return o.pop(),u.join("")}function G_(r,t,n){const o=t.indexStack,a=r.children||[],u=t.createTracker(n),l=[];let c=-1;for(o.push(-1);++c<a.length;){const f=a[c];o[o.length-1]=c,l.push(u.move(t.handle(f,r,t,{before:`
`,after:`
`,...u.current()}))),f.type!=="list"&&(t.bulletLastUsed=void 0),c<a.length-1&&l.push(u.move(Q_(f,a[c+1],r,t)))}return o.pop(),l.join("")}function Q_(r,t,n,o){let a=o.join.length;for(;a--;){const u=o.join[a](r,t,n,o);if(u===!0||u===1)break;if(typeof u=="number")return`
`.repeat(1+u);if(u===!1)return`

<!---->

`}return`

`}const V_=/\r?\n|\r/g;function X_(r,t){const n=[];let o=0,a=0,u;for(;u=V_.exec(r);)l(r.slice(o,u.index)),n.push(u[0]),o=u.index+u[0].length,a++;return l(r.slice(o)),n.join("");function l(c){n.push(t(c,a,!c))}}function j_(r,t,n){const o=(n.before||"")+(t||"")+(n.after||""),a=[],u=[],l={};let c=-1;for(;++c<r.unsafe.length;){const g=r.unsafe[c];if(!gf(r.stack,g))continue;const p=r.compilePattern(g);let b;for(;b=p.exec(o);){const y="before"in g||!!g.atBreak,C="after"in g,P=b.index+(y?b[1].length:0);a.includes(P)?(l[P].before&&!y&&(l[P].before=!1),l[P].after&&!C&&(l[P].after=!1)):(a.push(P),l[P]={before:y,after:C})}}a.sort(K_);let f=n.before?n.before.length:0;const h=o.length-(n.after?n.after.length:0);for(c=-1;++c<a.length;){const g=a[c];g<f||g>=h||g+1<h&&a[c+1]===g+1&&l[g].after&&!l[g+1].before&&!l[g+1].after||a[c-1]===g-1&&l[g].before&&!l[g-1].before&&!l[g-1].after||(f!==g&&u.push(xc(o.slice(f,g),"\\")),f=g,/[!-/:-@[-`{-~]/.test(o.charAt(g))&&(!n.encode||!n.encode.includes(o.charAt(g)))?u.push("\\"):(u.push(Bn(o.charCodeAt(g))),f++))}return u.push(xc(o.slice(f,h),n.after)),u.join("")}function K_(r,t){return r-t}function xc(r,t){const n=/\\(?=[!-/:-@[-`{-~])/g,o=[],a=[],u=r+t;let l=-1,c=0,f;for(;f=n.exec(u);)o.push(f.index);for(;++l<o.length;)c!==o[l]&&a.push(r.slice(c,o[l])),a.push("\\"),c=o[l];return a.push(r.slice(c)),a.join("")}function J_(r){const t=r||{},n=t.now||{};let o=t.lineShift||0,a=n.line||1,u=n.column||1;return{move:f,current:l,shift:c};function l(){return{now:{line:a,column:u},lineShift:o}}function c(h){o+=h}function f(h){const g=h||"",p=g.split(/\r?\n|\r/g),b=p[p.length-1];return a+=p.length-1,u=p.length===1?u+b.length:1+b.length+o,g}}function Z_(r,t){const n=t||{},o={associationId:H_,containerPhrasing:r2,containerFlow:i2,createTracker:J_,compilePattern:Y_,enter:u,handlers:{...N_},handle:void 0,indentLines:X_,indexStack:[],join:[...W_],options:{},safe:o2,stack:[],unsafe:[...q_]};pf(o,n),o.options.tightDefinitions&&o.join.push(n2),o.handle=s_("type",{invalid:e2,unknown:t2,handlers:o.handlers});let a=o.handle(r,void 0,o,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return a&&a.charCodeAt(a.length-1)!==10&&a.charCodeAt(a.length-1)!==13&&(a+=`
`),a;function u(l){return o.stack.push(l),c;function c(){o.stack.pop()}}}function e2(r){throw new Error("Cannot handle value `"+r+"`, expected node")}function t2(r){const t=r;throw new Error("Cannot handle unknown node `"+t.type+"`")}function n2(r,t){if(r.type==="definition"&&r.type===t.type)return 0}function r2(r,t){return U_(r,this,t)}function i2(r,t){return G_(r,this,t)}function o2(r,t){return j_(this,r,t)}function a2(r){const t=this;t.compiler=n;function n(o){return Z_(o,{...t.data("settings"),...r,extensions:t.data("toMarkdownExtensions")||[]})}}const ue={text:"text",boolean:"boolean",multicheckbox:"multicheckbox",richText:"richText",number:"number"};class s2{constructor(){this.logger=sn(un.InputCreator)}createInput(t){const{componentId:n,inputId:o,type:a}=t;let u="",l="";try{switch(a){case ue.text:case ue.richText:{const c=t.defaultValue??"";l="> ",u=`${l}${c}`;break}case ue.boolean:{const c=t.defaultValue===!0?"x":" ",f=t.label??"Checkbox";u=`- [${c}] ${f}`;break}case ue.multicheckbox:{const c=t.options??[];if(!c.length)throw this.logger.error("multicheckbox must have non-empty options array",{opts:t}),new Error("multicheckbox must have non-empty options array");u=c.map(f=>`- [ ] ${ji.hiddenValue(n,o,f.value)} ${f.label}`).join(`
`);break}case ue.number:{const c=t.defaultValue??"";l="> {Number} ",u=`${l}${c}`;break}default:throw this.logger.error(`Unknown input type: ${a}`,{opts:t}),new Error("Unknown input type: "+a)}}catch(c){throw this.logger.error("Failed to create input",{error:c,opts:t}),c}return ji.input.wrap({componentId:n,inputId:o,content:u,inputType:a,technicalPrefix:l})}parseMarkdown(t){try{return Ki().use(Qa).parse(t)}catch(n){throw this.logger.error("Failed to parse Markdown",{error:n,md:t}),n}}stringifyMarkdown(t){try{return Ki().use(a2).stringify(t)}catch(n){throw this.logger.error("Failed to stringify Markdown",{error:n,ast:t}),n}}}const Ln=new s2,pe={Day:"day",Week:"week",Month:"month",Quarter:"quarter",Year:"year",Decade:"decade"};class u2{async shouldShowInput(t,n=Yr.ALMOST_DAILY){const{id:o,schedule:a}=t;return a?!(a.active===!1||!this.isWithinTimeBoundaries(a)||!await this.checkDependencies(a,n)||a.condition&&!a.condition()||!this.shouldShowBasedOnPeriodicity(a)||a.target&&!a.target.keepShowing&&await this.isTargetMet(o,a,n)||a.limit&&await this.isLimitReached(o,a,n)):!0}async getInputProgress(t,n=Yr.ALMOST_DAILY){const{id:o,schedule:a}=t,u={};if(!a)return u;if(a.target){const l=this.getPeriodStartDate(a.target.per),c=await this.getCompletionCount(o,l,n);u.targetProgress={current:c,target:a.target.count,isComplete:c>=a.target.count}}if(a.limit){const l=this.getPeriodStartDate(a.limit.per),c=await this.getCompletionCount(o,l,n);u.limitProgress={current:c,limit:a.limit.max,percentage:c/a.limit.max*100}}return u}isWithinTimeBoundaries(t){const o=new Date().toISOString().split("T")[0];return!(t.startDate&&o<t.startDate||t.endDate&&o>t.endDate)}async checkDependencies(t,n){if(t.requiresCompleted&&t.requiresCompleted.length>0){const o=new Date().toISOString().split("T")[0];for(const a of t.requiresCompleted){const l=(await vn.getInputsById(n,a)).find(c=>c.reportDate===o);if(!l||l.value!==!0)return!1}}if(t.hideIfCompleted&&t.hideIfCompleted.length>0){const o=new Date().toISOString().split("T")[0];for(const a of t.hideIfCompleted){const l=(await vn.getInputsById(n,a)).find(c=>c.reportDate===o);if(l&&l.value===!0)return!1}}return!0}shouldShowBasedOnPeriodicity(t){const n=new Date;if(n.toISOString().split("T")[0],t.daysOfWeek&&t.daysOfWeek.length>0){const o=n.getDay();return t.daysOfWeek.map(u=>u===7?0:(u>=1&&u<=6,u)).includes(o)}if(t.datesOfMonth&&t.datesOfMonth.length>0){const o=n.getDate();return t.datesOfMonth.includes(o)}return t.showEvery?this.shouldShowBasedOnShowEvery(t.showEvery.count,t.showEvery.unit):!0}shouldShowBasedOnShowEvery(t,n){if(t===1)return!0;const o=new Date().toISOString().split("T")[0],a=this.getDayNumberFromEpoch(o);switch(n){case pe.Day:return a%t===0;case pe.Week:return Math.floor(a/7)%t===0;case pe.Month:return this.getMonthNumberFromEpoch(o)%t===0;case pe.Quarter:return this.getQuarterNumberFromEpoch(o)%t===0;case pe.Year:return this.getYearNumberFromEpoch(o)%t===0;default:return!0}}async isTargetMet(t,n,o){if(!n.target)return!1;const a=this.getPeriodStartDate(n.target.per);return await this.getCompletionCount(t,a,o)>=n.target.count}async isLimitReached(t,n,o){if(!n.limit)return!1;const a=this.getPeriodStartDate(n.limit.per);return await this.getCompletionCount(t,a,o)>=n.limit.max}async getCompletionCount(t,n,o){return(await vn.getInputsById(o,t)).filter(c=>c.reportDate&&c.reportDate>=n).filter(c=>c.value===!0).length}getPeriodStartDate(t){const n=new Date;switch(t.unit){case pe.Day:if(t.count===1)return n.toISOString().split("T")[0];const o=new Date(n);return o.setDate(n.getDate()-t.count),o.toISOString().split("T")[0];case pe.Week:if(t.count===1){const h=n.getDay(),g=new Date(n);return g.setDate(n.getDate()-(h===0?6:h-1)),g.toISOString().split("T")[0]}const a=new Date(n);return a.setDate(n.getDate()-t.count*7),a.toISOString().split("T")[0];case pe.Month:if(t.count===1)return`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-01`;const u=new Date(n);return u.setMonth(n.getMonth()-t.count),u.toISOString().split("T")[0];case pe.Quarter:if(t.count===1){const g=Math.floor(n.getMonth()/3)*3;return`${n.getFullYear()}-${String(g+1).padStart(2,"0")}-01`}const l=new Date(n);return l.setMonth(n.getMonth()-t.count*3),l.toISOString().split("T")[0];case pe.Year:if(t.count===1)return`${n.getFullYear()}-01-01`;const c=new Date(n);return c.setFullYear(n.getFullYear()-t.count),c.toISOString().split("T")[0];case pe.Decade:return`${Math.floor(n.getFullYear()/10)*10}-01-01`;default:return n.toISOString().split("T")[0]}}getDayNumberFromEpoch(t){const n=new Date("2020-01-01"),a=new Date(t).getTime()-n.getTime();return Math.floor(a/(1e3*60*60*24))}getMonthNumberFromEpoch(t){const n=new Date("2020-01-01"),o=new Date(t),a=o.getFullYear()-n.getFullYear(),u=o.getMonth()-n.getMonth();return a*12+u}getQuarterNumberFromEpoch(t){const n=this.getMonthNumberFromEpoch(t);return Math.floor(n/3)}getYearNumberFromEpoch(t){const n=new Date(t),o=new Date("2020-01-01");return n.getFullYear()-o.getFullYear()}}const Gr=new u2;class mt{constructor(t){this.content=[],this.logger=sn(un.ComponentBuilder),this.componentSchedule=null,this.componentId=t}_md(t,n){const o=typeof t=="function"?t():t;return this.content.push({md:o,schedule:n}),this}_divider(t){return this.content.push({md:`
***
`,schedule:t}),this}_fancyTitle(t,n="⚛︎",o){return t?this.content.push({md:`<center>${n} <strong>${t}</strong> ${n}</center>`,schedule:o}):this.content.push({md:"---",schedule:o}),this}_fancyDivider(t,n="⚛︎"){return this._fancyTitle(t,n)}_themedDivider(t,n,o){return this.content.push({md:`### ${n} ${t}`,schedule:o}),this}_blockquoteDivider(t,n){return t?this.content.push({md:`> ${t}`,schedule:n}):this.content.push({md:"> ---",schedule:n}),this}_foldable(t,n="Guidance",o){const u=t.split(`
`).map(c=>`> ${c}`),l=`> [!note]- ${n}
${u.join(`
`)}`;return this.content.push({md:l,schedule:o}),this.content.push({md:"",schedule:o}),this}schedule(t){return"schedule"in t&&t.schedule?this.componentSchedule=t.schedule:this.componentSchedule=t,this}_input(t){if("id"in t&&"inputOptions"in t){const o=t;o.inputOptions.type!==ue.boolean&&this._inputLabel(o.label,o.description);const a={...o.inputOptions,componentId:this.componentId};this.content.push({md:Ln.createInput(a),schedule:o.schedule,isInput:!0}),o.inputOptions.type!==ue.boolean&&o.inputOptions.type!==ue.multicheckbox&&this.content.push({md:""})}else{const o={...t,componentId:this.componentId};this.content.push({md:Ln.createInput(o),isInput:!0})}return this}_inputLabel(t,n){const o=n?`**${t}** ${n}`:`**${t}**`;return this.content.push({md:o}),this}_text(t,n,o){const a=Ln.createInput({componentId:this.componentId,type:ue.text,inputId:t,defaultValue:n,placeholder:o});return this.content.push({md:a}),this.content.push({md:""}),this}_richText(t,n,o){this.content.push({md:"<center>· · · · · · · · · · · · · · · ·</center>"});const a=Ln.createInput({componentId:this.componentId,type:ue.richText,inputId:t,defaultValue:n,placeholder:o});return this.content.push({md:a}),this.content.push({md:"<center>· · · · · · · · · · · · · · · ·</center>"}),this}_boolean(t,n,o){const a=Ln.createInput({componentId:this.componentId,type:ue.boolean,inputId:t,label:n,defaultValue:o});return this.content.push({md:a}),this}_number(t,n){const o=Ln.createInput({componentId:this.componentId,type:ue.number,inputId:t,defaultValue:n});return this.content.push({md:o}),this}_multiCheckbox(t,n,o,a){const u=Ln.createInput({componentId:this.componentId,type:ue.multicheckbox,inputId:t,options:n,defaultValue:o,collapsed:a});return this.content.push({md:u}),this}_multiCheckboxSC(t,n,o,a){const u=Ln.createInput({componentId:this.componentId,type:ue.multicheckbox,inputId:t,options:n,singleChoice:!0,defaultValue:o,collapsed:a});return this.content.push({md:u}),this}_nl(){return this.content.push({md:`
`}),this}async render(){if(this.componentSchedule&&!await Gr.shouldShowInput({id:this.componentId,inputOptions:{inputId:this.componentId,type:ue.text},label:this.componentId,schedule:this.componentSchedule}))return this.logger.dev("Component hidden by explicit schedule",{componentId:this.componentId}),"";const t=[];let n=!1,o=0;for(const u of this.content){if(u.isInput&&(n=!0),!u.schedule){t.push(u.md),u.isInput&&o++;continue}await Gr.shouldShowInput({id:`${this.componentId}_item`,inputOptions:{inputId:`${this.componentId}_item`,type:ue.text},label:`${this.componentId}_item`,schedule:u.schedule})&&(t.push(u.md),u.isInput&&o++)}if(n&&o===0)return this.logger.dev("Component hidden - has inputs but none passed schedule evaluation",{componentId:this.componentId}),"";if(t.length===0)return this.logger.dev("Component hidden - no content after schedule evaluation",{componentId:this.componentId}),"";const a=ji.component.wrap(this.componentId,t.join(`
`));return this.logger.dev("Component rendered",{outputLength:a.length,itemsEvaluated:this.content.length,itemsRendered:t.length,inputsRendered:o}),a}}async function l2(){const r=new mt("consistencyStats");try{const t=await vn.getReportInputs(Yr.ALMOST_DAILY);if(!t||t.length===0)return r._md("📊 **Consistency Tracker** · 🎯 Starting your journey today!"),r.render();const n=Array.from(new Set(t.map(C=>C.reportDate))).sort().reverse(),o=n[n.length-1],a=n[0],u=new Date(o),l=new Date(a),c=Ey(l,u)+1,h=[{days:7,label:"7d"},{days:30,label:"30d"},{days:90,label:"90d"}].map(({days:C,label:P})=>{const F=Math.min(C,c),A=wr(bb(l,F-1),"yyyy-MM-dd"),N=n.filter(W=>W>=A).length,z=Math.round(N/F*100);return{label:P,reports:N,days:F,percentage:z,shouldShow:F>=Math.min(C,7)}}),g=n.length,p=Math.round(g/c*100),b=[];for(const C of h){if(!C.shouldShow)continue;const P=C.percentage>=80?"🎉":C.percentage>=60?"✅":C.percentage>=40?"📈":"🌱";b.push(`${P} ${C.label}: ${C.reports}/${C.days} (${C.percentage}%)`)}const y=p>=80?"🏆":p>=60?"⭐":"🎯";b.push(`${y} All: ${g}/${c} (${p}%)`),r._md(`📊 **Consistency Tracker** · ${b.join(" · ")}`)}catch(t){console.error("Consistency stats error:",t),r._md("📊 **Consistency Tracker** · Starting fresh!")}return await r.render()}const c2=r=>({...r,inputOptions:{inputId:r.id,type:ue.boolean,label:r.label}}),f2=[{id:"dayPlanning",label:"Planning my day",cue:"After breakfast",reward:"More productive and organized day",schedule:{target:{count:1,per:{count:1,unit:pe.Day}}}},{id:"exercise",label:"Exercise",cue:"Any suitable time during the day",reward:"Better health, more energy, and improved mood",schedule:{target:{count:5,per:{count:1,unit:pe.Week},keepShowing:!0}}},{id:"morningWarmUp",label:"Morning Physical Warm-Up",cue:"After waking up",reward:"Increased energy and readiness for the day",schedule:{target:{count:1,per:{count:1,unit:pe.Day}}}},{id:"recreation",label:"Having fun",cue:"In the evening or during free time",reward:"Relaxation, joy, and stress relief",schedule:{target:{count:1,per:{count:1,unit:pe.Day}}}},{id:"selfPleasure",label:"FPF",cue:"At free from work personal time",reward:"Better focus and increasing ability to feel joy",schedule:{target:{count:7,per:{count:10,unit:pe.Day}}}},{id:"poetryEngaging",label:"Spend time with poetry",cue:"At leisure time",reward:"Happiness and healthy feelings expression from engaging with poetry",schedule:{daysOfWeek:[1,5,6,7],target:{count:3,per:{count:1,unit:pe.Month}}}},{id:"programmingLearning",label:"Programming study",cue:"Dedicated learning time",reward:"Skill development, career growth, and problem-solving mastery",schedule:{target:{count:3,per:{count:1,unit:pe.Week}}}},{id:"recreationalCannabis",label:"Getting high",cue:"Day off (if next day is also day off, then) in safe calm well prepared environment and mood",reward:"Self-care routine, relaxation, stress relief",schedule:{target:{count:1,per:{count:1,unit:pe.Week}},daysOfWeek:[5,6,7],limit:{max:20,per:{count:6,unit:pe.Month}}}},{id:"fastMorningEveningRoutine",label:"Complete morning & evening routine efficiently",cue:"During morning (breakfast, hygiene) and evening (cleaning teeth, preparing for bed) routines",reward:"Save up to 1 hour daily, more productive day, less stress"},{id:"phoneDetox",label:"No phone for 3 hours",cue:"During focused work or leisure time",reward:"Better focus, reduced distractions, mental clarity, reclaimed time",schedule:{target:{count:3,per:{count:1,unit:pe.Week},keepShowing:!0}}}],h2=f2.map(c2),d2=[{label:"3 - Great",value:"3"},{label:"2 - Adequate",value:"2"},{label:"1 - Struggling",value:"1"}],p2=r=>({...r,inputOptions:{inputId:r.id,type:ue.multicheckbox,options:d2,singleChoice:!0}}),g2=[{id:"positiveEmotions",label:"Positive Emotions",description:"Feelings of joy, gratitude, contentment, hope, and pleasure. Includes savoring the moment, reflecting on past positives, and hopeful anticipation of the future."},{id:"engagement",label:"Engagement",description:"Deep involvement in activities; being absorbed, losing sense of time (‘flow’). Doing work or hobbies that challenge your skills just enough that you’re fully present."},{id:"relationships",label:"Relationships",description:"Supportive, meaningful social connections. Feeling loved, valued, belonging; giving and receiving support. Close friendships, family bonds, community ties.",schedule:{showEvery:{count:2,unit:pe.Day}}},{id:"meaning",label:"Meaning",description:"Having a sense of purpose, belonging to something bigger than yourself. Knowing what matters in your life and using your strengths in service of values, causes or goals."},{id:"accomplishment",label:"Accomplishment",description:"Mastery, achievement, working toward goals. Sense of progress, competence, whether or not it brings immediate joy—achieving things that matter to you."},{id:"sleepQuality",label:"Sleep Quality",description:"How well-rested you feel. Quality of sleep, sufficient hours, feeling refreshed upon waking. Sleep is foundational to physical and mental wellbeing."},{id:"embodiment",label:"Embodiment",description:"Body acceptance and feeling at home in your body. Being present in your physical self, body image, self-compassion toward your body, feeling connected rather than disconnected from your physical form.",schedule:{showEvery:{count:3,unit:pe.Day}}},{id:"physicalPleasure",label:"Physical Pleasure",description:"Sensory experiences and bodily comfort. Enjoying food, warmth, movement, relaxation. The simple joys of physical existence—a hot shower, soft blanket, delicious meal, or stretching your body.",schedule:{showEvery:{count:2,unit:pe.Day}}},{id:"touchAndIntimacy",label:"Touch & Intimacy",description:"Physical affection, connection, and love. Hugs, cuddles, holding hands, sexual intimacy. The warmth and safety of physical closeness with loved ones. Human touch is a fundamental need.",schedule:{showEvery:{count:3,unit:pe.Day}}},{id:"physicalCondition",label:"Physical Condition",description:"Your bodily health: exercise, energy levels and how physically capable you feel. General fitness and vitality."},{id:"nutrition",label:"Nutrition",description:"Quality of your food choices and eating patterns. Nourishing your body with balanced meals, adequate hydration, and mindful eating. Good nutrition fuels energy, mood, and long-term health."},{id:"mindset",label:"Mindset",description:"Cultivating optimism, resilience, self-efficacy, and a growth mindset. A positive mindset shapes how you interpret setbacks, sustain motivation, and approach challenges."},{id:"environment",label:"Environment",description:"Living and working in spaces that feel safe, comfortable, and supportive of wellbeing. Includes access to nature, orderliness, and resources that help you thrive.",schedule:{showEvery:{count:3,unit:pe.Day}}},{id:"economicSecurity",label:"Economic Security",description:"Having financial stability, freedom from chronic money stress, and satisfaction with work. Economic security supports autonomy and reduces background stress that erodes wellbeing.",schedule:{showEvery:{count:10,unit:pe.Day}}}],Ka=g2.map(p2),m2=r=>({...r,inputOptions:{inputId:r.id,type:ue.boolean,label:r.label}}),y2=[{id:"dichotomy_of_control_practice",label:"Stoic Practice. The Dichotomy of Control",category:"stoic",component:"morningReflection",description:"Epictetus' core practice and foundational Stoic exercise that eliminates suffering by training you to focus only on what you can control",guide:`**The Core Principle:**
The Stoics discovered that **all suffering comes from desiring things outside your control**. When you stop struggling against the unchangeable and channel your energy into what you CAN control, you gain peace of mind.

**✅ COMPLETELY IN YOUR CONTROL:**
- Your judgments, opinions, and interpretations
- Your responses and reactions to events
- Your character, virtues, and values
- Your effort, attention, and choices
- How you treat others
- What you pursue and avoid

**❌ OUTSIDE YOUR CONTROL:**
- Other people's opinions, actions, and judgments
- Outcomes, results, and consequences
- Past events and future circumstances
- Your reputation and what others think
- External events (weather, traffic, delays)
- Natural processes (aging, sickness, death)

**How to Practice:**
When faced with any situation today, ask yourself: "Is this within my control?" If yes, take action. If no, accept it and focus on your response instead.

_"Make the best use of what is in your power, and take the rest as it happens."_ — Epictetus`},{id:"obstacle_is_way_practice",label:"Stoic Practice. The Obstacle Is The Way",category:"stoic",component:"morningReflection",description:"Marcus Aurelius' teaching: obstacles contain hidden opportunities for growth",guide:`**The Core Principle:**
Marcus Aurelius taught: **"The impediment to action advances action. What stands in the way becomes the way."**

This means every obstacle contains hidden opportunity:
- **Blocked plan?** → Forces you to become more creative and resourceful
- **Frustrating person?** → Opportunity to practice patience and understanding
- **Failure?** → Valuable data for learning and improvement
- **Delay?** → Gift of time to prepare better or rest

**The Reframe:**
Stop seeing obstacles as enemies. Start seeing them as **training equipment** for your character. Each challenge makes you stronger, wiser, more resilient.

**How to Practice:**
When you face a setback today, ask: "What opportunity is hidden in this obstacle? How is this making me better?"

_"The obstacle is not blocking your path – it IS your path. It's revealing where you need to grow."_ — Ryan Holiday`}],w2=y2.map(m2),b2=r=>{let t={id:r.inputOptions.inputId,...r,description:r.description||""};return r.inputOptions.type===ue.boolean&&(t.inputOptions.label=r.label),t},x2=[{label:"What Matters Most (Memento Mori)",inputOptions:{inputId:"memento_mori_focus",type:ue.text},description:"You will die. Your days are numbered. What truly matters? Which pillar deserves your limited time?"},{inputOptions:{inputId:"priority_plan",type:ue.text},label:"My #1 Task Today",description:"ONE concrete action serving what matters. When & where will I do it? What's my first 2-minute step?"},{inputOptions:{inputId:"tomorrow_priority",type:ue.text},label:"Tomorrow's #1 Priority"},{inputOptions:{inputId:"message_for_tomorrow",type:ue.richText},label:"Message for Tomorrow",description:"Short and meaningful message for your future self"},{inputOptions:{inputId:"plan_next_day",type:ue.boolean},label:"Plan next day",description:"Calendar events, tasks, notifications"},{inputOptions:{inputId:"accomplishments",type:ue.text},label:"My Win Today",description:"What was my proudest accomplishment? What effort/virtue made it possible?"},{inputOptions:{inputId:"obstacles",type:ue.text},label:"My Obstacle & Learning",description:"What happened? How did I respond? What did I learn? How will I use this?"},{inputOptions:{inputId:"if_then_plan",type:ue.text},label:"My Implementation Intention",description:"If this happens again, I will... (If [OBSTACLE], then I will [RESPONSE])"},{inputOptions:{inputId:"gratitudes",type:ue.richText,placeholder:" 1. "},label:"Three Good Things",description:"*What good happened? Why was it good? What was your role?*"},{inputOptions:{inputId:"main_distraction",type:ue.text},label:"What distracted me most today?",schedule:{showEvery:{count:2,unit:pe.Day}}},{inputOptions:{inputId:"flow_moments",type:ue.text},label:"What helped me focus?",description:"(Environment, time, task type)",schedule:{showEvery:{count:2,unit:pe.Day}}},{inputOptions:{inputId:"willpower_challenge",type:ue.text},label:"What was my biggest temptation/willpower challenge?",schedule:{showEvery:{count:2,unit:pe.Day}}},{inputOptions:{inputId:"strongest_emotion",type:ue.text},label:"What was my strongest emotion today?"},{inputOptions:{inputId:"emotion_trigger",type:ue.text},label:"What triggered it?",description:"Situation, person, thought"},{inputOptions:{inputId:"emotion_response",type:ue.text},label:"How did I respond?"},{inputOptions:{inputId:"better_emotion_response",type:ue.text},label:"What response would I choose next time?"},{inputOptions:{inputId:"negative_visualization_done",type:ue.boolean},label:"I practiced Negative Visualization",description:"5 min reflection on what I could lose",schedule:{daysOfWeek:[1,3,5]}},{inputOptions:{inputId:"voluntary_discomfort_practice",type:ue.multicheckbox,options:[{label:"Cold shower (30-60 sec)",value:"cold_shower"},{label:"Less heat/AC than comfortable",value:"less_climate_control"},{label:"Skip stimulants (coffee, guarana, etc.)",value:"skip_stimulants"}],singleChoice:!0},label:"Today's Voluntary Discomfort",description:"Choose ONE small discomfort to practice today",schedule:{daysOfWeek:[1,3,5]}},{inputOptions:{inputId:"mindful_pause_taken",type:ue.boolean},label:"I have taken a mindful pause",schedule:{daysOfWeek:[1,3,5]}}],v2=x2.map(b2),De=v2.reduce((r,t)=>({...r,[String(t.id)]:t}),{});async function _2(){const r="morningReflection",t=new mt(r);return t._md("## 🧘 Morning Reflection (⭐ RECOMMENDED)"),w2.filter(n=>n.component===r).forEach(n=>{t._foldable(n.guide,n.label),t._input(n.inputOptions)}),await t.render()}async function k2(){const r="negativeVisualization",t=new mt(r);return t._md("## 🪞 Negative Visualization (💡 OPTIONAL - 2 min)"),t._foldable(`**Praemeditatio Malorum** — Ancient Stoic gratitude practice

This is NOT pessimism. This is **appreciation training** that the Stoics practiced daily.

**The Problem** — we take everything for granted. Your health, your home, your loved ones — you stop seeing them. Hedonic adaptation makes you numb to your blessings.

**The Solution** — briefly imagine losing what you value. When you mentally "lose" something, you suddenly SEE it again with fresh eyes.

**What this practice does:**
- **Breaks hedonic adaptation** — stop taking good things for granted
- **Generates genuine gratitude** — feel appreciation, not just think it  
- **Prepares you mentally** — if loss happens, the shock is less severe
- **Increases present joy** — savor what you have RIGHT NOW

**How to practice:**
1. Close your eyes for 10-20 seconds
2. Vividly imagine ONE thing you value being gone (person, health, home, ability)
3. Feel the loss — let it be uncomfortable for a moment
4. Open your eyes and appreciate that you STILL HAVE IT

This isn't dwelling on loss. It's a quick mental exercise to restore wonder.

_"He robs present ills of their power who has perceived their coming beforehand."_ — Seneca`,"Stoic Gratitude Practice"),t._md("**Practice Steps:**"),t._md("1. **Close your eyes** — take a slow breath"),t._md("2. **Imagine the loss** — picture losing someone/something you love (10 seconds)"),t._md("3. **Feel it** — don't rush past the discomfort"),t._md("4. **Open your eyes** — look around. You still have them. Feel that relief."),t._input(De.negative_visualization_done),await t.render()}async function I2(){const r="priorityPlanning",t=new mt(r);return t._md("## 🎯 Priority Planning (📌 CORE - 3-5 min)"),t._foldable(`**Start with Death, Plan with Clarity**

**Memento Mori** (from Stoicism) — "Remember you will die." This isn't morbid—it's the ultimate focusing tool. When you remember death, trivialities fade and what truly matters becomes crystal clear.

**The Four Pillars of Life:**
1. **Happiness & Peace of Mind** — inner tranquility and joy
2. **Body & Health** — physical wellbeing and vitality  
3. **People & Relationships** — love, connection, community
4. **Meaningful Work** — contributing something valuable

_"You could leave life right now. Let that determine what you do and say and think."_ — Marcus Aurelius

**Implementation Intentions** (from Atomic Habits) — being specific doubles success rates:
"I will [BEHAVIOR] at [TIME] in [LOCATION]."

**The Process:**
1. Remember death → What pillar needs attention?
2. Choose ONE priority that serves that pillar
3. Make a specific plan with when/where
4. Prepare for obstacles`,"Memento Mori + Implementation Intentions"),t._input(De.memento_mori_focus),t._input(De.priority_plan),await t.render()}async function S2(){const r="voluntaryDiscomfort",t=new mt(r);return t._md("## 🧊 Voluntary Discomfort (💡 OPTIONAL - 2 min)"),t._foldable(`**Practicing Poverty** — Seneca's resilience training

The Stoics deliberately practiced small discomforts. Not to punish themselves, but to build mental strength and appreciation.

**The Problem** — modern life is TOO comfortable. We become weak, dependent on luxuries, and terrified of any discomfort. When hardship comes, we collapse.

**The Stoic Solution** — regularly choose small, voluntary discomforts. This trains your mind that discomfort is survivable—even beneficial.

**What this practice does:**
1. **Builds resilience** — when real hardship comes, you're prepared
2. **Breaks hedonic adaptation** — you stop taking comfort for granted
3. **Strengthens willpower** — you prove you can control urges  
4. **Increases appreciation** — comfort feels AMAZING after voluntary discomfort
5. **Reduces fear** — you learn: "Discomfort won't kill me. I'm stronger than I thought."

**The Science** — your brain predicts suffering based on past experience. If you've never been uncomfortable, small discomforts feel catastrophic. If you practice discomfort, your brain learns: "This is manageable."

**How to practice:**
Choose ONE small discomfort today. Not as punishment — as TRAINING.
- Physical: cold shower, skip a meal, exercise when tired
- Social: have the difficult conversation, say no to someone
- Habitual: skip coffee, no phone for 2 hours, sit in silence

**Key** — the discomfort should be VOLUNTARY and MILD. You're training, not torturing.

_"We suffer more often in imagination than in reality."_ — Seneca
_"Set aside a certain number of days to be content with little and practice poverty."_ — Seneca`,"Stoic Resilience Training"),t._input(De.voluntary_discomfort_practice),await t.render()}function Tf(r){if(r.length===0)return 0;var t=r[0],n=0,o;if(typeof t!="number")return Number.NaN;for(var a=1;a<r.length;a++){if(typeof r[a]!="number")return Number.NaN;o=t+r[a],Math.abs(t)>=Math.abs(r[a])?n+=t-o+r[a]:n+=r[a]-o+t,t=o}return t+n}function Ef(r){if(r.length===0)throw new Error("mean requires at least one data point");return Tf(r)/r.length}function C2(r,t){var n=Ef(r),o=0,a,u;for(u=0;u<r.length;u++)a=r[u]-n,o+=a*a;return o}function Pf(r){if(r.length===0)throw new Error("variance requires at least one data point");return C2(r)/r.length}function T2(r){if(r.length===1)return 0;var t=Pf(r);return Math.sqrt(t)}function E2(r){if(r.length===0)throw new Error("mode requires at least one data point");if(r.length===1)return r[0];for(var t=r[0],n=Number.NaN,o=0,a=1,u=1;u<r.length+1;u++)r[u]!==t?(a>o&&(o=a,n=t),a=1,t=r[u]):a++;return n}function P2(r){return r.slice().sort(function(t,n){return t-n})}function A2(r){return E2(P2(r))}function vc(r){if(r.length===0)throw new Error("min requires at least one data point");for(var t=r[0],n=1;n<r.length;n++)r[n]<t&&(t=r[n]);return t}function _c(r){if(r.length===0)throw new Error("max requires at least one data point");for(var t=r[0],n=1;n<r.length;n++)r[n]>t&&(t=r[n]);return t}function kc(r,t){var n=r.length*t;if(r.length===0)throw new Error("quantile requires at least one data point.");if(t<0||t>1)throw new Error("quantiles must be between 0 and 1");return t===1?r[r.length-1]:t===0?r[0]:n%1!==0?r[Math.ceil(n)-1]:r.length%2===0?(r[n-1]+r[n])/2:r[n]}function Gi(r,t,n,o){for(n=n||0,o=o||r.length-1;o>n;){if(o-n>600){var a=o-n+1,u=t-n+1,l=Math.log(a),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(a-c)/a);u-a/2<0&&(f*=-1);var h=Math.max(n,Math.floor(t-u*c/a+f)),g=Math.min(o,Math.floor(t+(a-u)*c/a+f));Gi(r,t,h,g)}var p=r[t],b=n,y=o;for(Wr(r,n,t),r[o]>p&&Wr(r,n,o);b<y;){for(Wr(r,b,y),b++,y--;r[b]<p;)b++;for(;r[y]>p;)y--}r[n]===p?Wr(r,n,y):(y++,Wr(r,y,o)),y<=t&&(n=y+1),t<=y&&(o=y-1)}}function Wr(r,t,n){var o=r[t];r[t]=r[n],r[n]=o}function Ja(r,t){var n=r.slice();if(Array.isArray(t)){M2(n,t);for(var o=[],a=0;a<t.length;a++)o[a]=kc(n,t[a]);return o}else{var u=Mf(n.length,t);return Af(n,u,0,n.length-1),kc(n,t)}}function Af(r,t,n,o){t%1===0?Gi(r,t,n,o):(t=Math.floor(t),Gi(r,t,n,o),Gi(r,t+1,t+1,o))}function M2(r,t){for(var n=[0],o=0;o<t.length;o++)n.push(Mf(r.length,t[o]));n.push(r.length-1),n.sort(O2);for(var a=[0,n.length-1];a.length;){var u=Math.ceil(a.pop()),l=Math.floor(a.pop());if(!(u-l<=1)){var c=Math.floor((l+u)/2);Af(r,n[c],Math.floor(n[l]),Math.ceil(n[u])),a.push(l,c,c,u)}}}function O2(r,t){return r-t}function Mf(r,t){var n=r*t;return t===1?r-1:t===0?0:n%1!==0?Math.ceil(n)-1:r%2===0?n-.5:n}function D2(r){return+Ja(r,.5)}var Aa={},Ic;function F2(){return Ic||(Ic=1,(function(r){(function(t){t.black="\x1B[30m",t.red="\x1B[31m",t.green="\x1B[32m",t.yellow="\x1B[33m",t.blue="\x1B[34m",t.magenta="\x1B[35m",t.cyan="\x1B[36m",t.lightgray="\x1B[37m",t.default="\x1B[39m",t.darkgray="\x1B[90m",t.lightred="\x1B[91m",t.lightgreen="\x1B[92m",t.lightyellow="\x1B[93m",t.lightblue="\x1B[94m",t.lightmagenta="\x1B[95m",t.lightcyan="\x1B[96m",t.white="\x1B[97m",t.reset="\x1B[0m";function n(o,a){return a===void 0?o:a+o+t.reset}t.colored=n,t.plot=function(o,a=void 0){typeof o[0]=="number"&&(o=[o]),a=typeof a<"u"?a:{};let u=typeof a.min<"u"?a.min:o[0][0],l=typeof a.max<"u"?a.max:o[0][0];for(let O=0;O<o.length;O++)for(let E=0;E<o[O].length;E++)u=Math.min(u,o[O][E]),l=Math.max(l,o[O][E]);let c=["┼","┤","╶","╴","─","╰","╭","╮","╯","│"],f=Math.abs(l-u),h=typeof a.offset<"u"?a.offset:3,g=typeof a.padding<"u"?a.padding:"           ",p=typeof a.height<"u"?a.height:f,b=typeof a.colors<"u"?a.colors:[],y=f!==0?p/f:1,C=Math.round(u*y),P=Math.round(l*y),F=Math.abs(P-C),A=0;for(let O=0;O<o.length;O++)A=Math.max(A,o[O].length);A=A+h;let N=typeof a.symbols<"u"?a.symbols:c,z=typeof a.format<"u"?a.format:function(O){return(g+O.toFixed(2)).slice(-g.length)},W=new Array(F+1);for(let O=0;O<=F;O++){W[O]=new Array(A);for(let E=0;E<A;E++)W[O][E]=" "}for(let O=C;O<=P;++O){let E=z(F>0?l-(O-C)*f/F:O,O-C);W[O-C][Math.max(h-E.length,0)]=E,W[O-C][h-1]=O==0?N[0]:N[1]}for(let O=0;O<o.length;O++){let E=b[O%b.length],U=Math.round(o[O][0]*y)-C;W[F-U][h-1]=n(N[0],E);for(let V=0;V<o[O].length-1;V++){let ee=Math.round(o[O][V+0]*y)-C,de=Math.round(o[O][V+1]*y)-C;if(ee==de)W[F-ee][V+h]=n(N[4],E);else{W[F-de][V+h]=n(ee>de?N[5]:N[6],E),W[F-ee][V+h]=n(ee>de?N[7]:N[8],E);let X=Math.min(ee,de),Q=Math.max(ee,de);for(let be=X+1;be<Q;be++)W[F-be][V+h]=n(N[9],E)}}}return W.map(function(O){return O.join("")}).join(`
`)}})(r)})(Aa)),Aa}var R2=F2(),Qi={exports:{}},Ma,Sc;function L2(){return Sc||(Sc=1,Ma={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),Ma}var Oa,Cc;function Of(){if(Cc)return Oa;Cc=1;const r=L2(),t={};for(const a of Object.keys(r))t[r[a]]=a;const n={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};Oa=n;for(const a of Object.keys(n)){if(!("channels"in n[a]))throw new Error("missing channels property: "+a);if(!("labels"in n[a]))throw new Error("missing channel labels property: "+a);if(n[a].labels.length!==n[a].channels)throw new Error("channel and label counts mismatch: "+a);const{channels:u,labels:l}=n[a];delete n[a].channels,delete n[a].labels,Object.defineProperty(n[a],"channels",{value:u}),Object.defineProperty(n[a],"labels",{value:l})}n.rgb.hsl=function(a){const u=a[0]/255,l=a[1]/255,c=a[2]/255,f=Math.min(u,l,c),h=Math.max(u,l,c),g=h-f;let p,b;h===f?p=0:u===h?p=(l-c)/g:l===h?p=2+(c-u)/g:c===h&&(p=4+(u-l)/g),p=Math.min(p*60,360),p<0&&(p+=360);const y=(f+h)/2;return h===f?b=0:y<=.5?b=g/(h+f):b=g/(2-h-f),[p,b*100,y*100]},n.rgb.hsv=function(a){let u,l,c,f,h;const g=a[0]/255,p=a[1]/255,b=a[2]/255,y=Math.max(g,p,b),C=y-Math.min(g,p,b),P=function(F){return(y-F)/6/C+1/2};return C===0?(f=0,h=0):(h=C/y,u=P(g),l=P(p),c=P(b),g===y?f=c-l:p===y?f=1/3+u-c:b===y&&(f=2/3+l-u),f<0?f+=1:f>1&&(f-=1)),[f*360,h*100,y*100]},n.rgb.hwb=function(a){const u=a[0],l=a[1];let c=a[2];const f=n.rgb.hsl(a)[0],h=1/255*Math.min(u,Math.min(l,c));return c=1-1/255*Math.max(u,Math.max(l,c)),[f,h*100,c*100]},n.rgb.cmyk=function(a){const u=a[0]/255,l=a[1]/255,c=a[2]/255,f=Math.min(1-u,1-l,1-c),h=(1-u-f)/(1-f)||0,g=(1-l-f)/(1-f)||0,p=(1-c-f)/(1-f)||0;return[h*100,g*100,p*100,f*100]};function o(a,u){return(a[0]-u[0])**2+(a[1]-u[1])**2+(a[2]-u[2])**2}return n.rgb.keyword=function(a){const u=t[a];if(u)return u;let l=1/0,c;for(const f of Object.keys(r)){const h=r[f],g=o(a,h);g<l&&(l=g,c=f)}return c},n.keyword.rgb=function(a){return r[a]},n.rgb.xyz=function(a){let u=a[0]/255,l=a[1]/255,c=a[2]/255;u=u>.04045?((u+.055)/1.055)**2.4:u/12.92,l=l>.04045?((l+.055)/1.055)**2.4:l/12.92,c=c>.04045?((c+.055)/1.055)**2.4:c/12.92;const f=u*.4124+l*.3576+c*.1805,h=u*.2126+l*.7152+c*.0722,g=u*.0193+l*.1192+c*.9505;return[f*100,h*100,g*100]},n.rgb.lab=function(a){const u=n.rgb.xyz(a);let l=u[0],c=u[1],f=u[2];l/=95.047,c/=100,f/=108.883,l=l>.008856?l**(1/3):7.787*l+16/116,c=c>.008856?c**(1/3):7.787*c+16/116,f=f>.008856?f**(1/3):7.787*f+16/116;const h=116*c-16,g=500*(l-c),p=200*(c-f);return[h,g,p]},n.hsl.rgb=function(a){const u=a[0]/360,l=a[1]/100,c=a[2]/100;let f,h,g;if(l===0)return g=c*255,[g,g,g];c<.5?f=c*(1+l):f=c+l-c*l;const p=2*c-f,b=[0,0,0];for(let y=0;y<3;y++)h=u+1/3*-(y-1),h<0&&h++,h>1&&h--,6*h<1?g=p+(f-p)*6*h:2*h<1?g=f:3*h<2?g=p+(f-p)*(2/3-h)*6:g=p,b[y]=g*255;return b},n.hsl.hsv=function(a){const u=a[0];let l=a[1]/100,c=a[2]/100,f=l;const h=Math.max(c,.01);c*=2,l*=c<=1?c:2-c,f*=h<=1?h:2-h;const g=(c+l)/2,p=c===0?2*f/(h+f):2*l/(c+l);return[u,p*100,g*100]},n.hsv.rgb=function(a){const u=a[0]/60,l=a[1]/100;let c=a[2]/100;const f=Math.floor(u)%6,h=u-Math.floor(u),g=255*c*(1-l),p=255*c*(1-l*h),b=255*c*(1-l*(1-h));switch(c*=255,f){case 0:return[c,b,g];case 1:return[p,c,g];case 2:return[g,c,b];case 3:return[g,p,c];case 4:return[b,g,c];case 5:return[c,g,p]}},n.hsv.hsl=function(a){const u=a[0],l=a[1]/100,c=a[2]/100,f=Math.max(c,.01);let h,g;g=(2-l)*c;const p=(2-l)*f;return h=l*f,h/=p<=1?p:2-p,h=h||0,g/=2,[u,h*100,g*100]},n.hwb.rgb=function(a){const u=a[0]/360;let l=a[1]/100,c=a[2]/100;const f=l+c;let h;f>1&&(l/=f,c/=f);const g=Math.floor(6*u),p=1-c;h=6*u-g,(g&1)!==0&&(h=1-h);const b=l+h*(p-l);let y,C,P;switch(g){default:case 6:case 0:y=p,C=b,P=l;break;case 1:y=b,C=p,P=l;break;case 2:y=l,C=p,P=b;break;case 3:y=l,C=b,P=p;break;case 4:y=b,C=l,P=p;break;case 5:y=p,C=l,P=b;break}return[y*255,C*255,P*255]},n.cmyk.rgb=function(a){const u=a[0]/100,l=a[1]/100,c=a[2]/100,f=a[3]/100,h=1-Math.min(1,u*(1-f)+f),g=1-Math.min(1,l*(1-f)+f),p=1-Math.min(1,c*(1-f)+f);return[h*255,g*255,p*255]},n.xyz.rgb=function(a){const u=a[0]/100,l=a[1]/100,c=a[2]/100;let f,h,g;return f=u*3.2406+l*-1.5372+c*-.4986,h=u*-.9689+l*1.8758+c*.0415,g=u*.0557+l*-.204+c*1.057,f=f>.0031308?1.055*f**(1/2.4)-.055:f*12.92,h=h>.0031308?1.055*h**(1/2.4)-.055:h*12.92,g=g>.0031308?1.055*g**(1/2.4)-.055:g*12.92,f=Math.min(Math.max(0,f),1),h=Math.min(Math.max(0,h),1),g=Math.min(Math.max(0,g),1),[f*255,h*255,g*255]},n.xyz.lab=function(a){let u=a[0],l=a[1],c=a[2];u/=95.047,l/=100,c/=108.883,u=u>.008856?u**(1/3):7.787*u+16/116,l=l>.008856?l**(1/3):7.787*l+16/116,c=c>.008856?c**(1/3):7.787*c+16/116;const f=116*l-16,h=500*(u-l),g=200*(l-c);return[f,h,g]},n.lab.xyz=function(a){const u=a[0],l=a[1],c=a[2];let f,h,g;h=(u+16)/116,f=l/500+h,g=h-c/200;const p=h**3,b=f**3,y=g**3;return h=p>.008856?p:(h-16/116)/7.787,f=b>.008856?b:(f-16/116)/7.787,g=y>.008856?y:(g-16/116)/7.787,f*=95.047,h*=100,g*=108.883,[f,h,g]},n.lab.lch=function(a){const u=a[0],l=a[1],c=a[2];let f;f=Math.atan2(c,l)*360/2/Math.PI,f<0&&(f+=360);const g=Math.sqrt(l*l+c*c);return[u,g,f]},n.lch.lab=function(a){const u=a[0],l=a[1],f=a[2]/360*2*Math.PI,h=l*Math.cos(f),g=l*Math.sin(f);return[u,h,g]},n.rgb.ansi16=function(a,u=null){const[l,c,f]=a;let h=u===null?n.rgb.hsv(a)[2]:u;if(h=Math.round(h/50),h===0)return 30;let g=30+(Math.round(f/255)<<2|Math.round(c/255)<<1|Math.round(l/255));return h===2&&(g+=60),g},n.hsv.ansi16=function(a){return n.rgb.ansi16(n.hsv.rgb(a),a[2])},n.rgb.ansi256=function(a){const u=a[0],l=a[1],c=a[2];return u===l&&l===c?u<8?16:u>248?231:Math.round((u-8)/247*24)+232:16+36*Math.round(u/255*5)+6*Math.round(l/255*5)+Math.round(c/255*5)},n.ansi16.rgb=function(a){let u=a%10;if(u===0||u===7)return a>50&&(u+=3.5),u=u/10.5*255,[u,u,u];const l=(~~(a>50)+1)*.5,c=(u&1)*l*255,f=(u>>1&1)*l*255,h=(u>>2&1)*l*255;return[c,f,h]},n.ansi256.rgb=function(a){if(a>=232){const h=(a-232)*10+8;return[h,h,h]}a-=16;let u;const l=Math.floor(a/36)/5*255,c=Math.floor((u=a%36)/6)/5*255,f=u%6/5*255;return[l,c,f]},n.rgb.hex=function(a){const l=(((Math.round(a[0])&255)<<16)+((Math.round(a[1])&255)<<8)+(Math.round(a[2])&255)).toString(16).toUpperCase();return"000000".substring(l.length)+l},n.hex.rgb=function(a){const u=a.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!u)return[0,0,0];let l=u[0];u[0].length===3&&(l=l.split("").map(p=>p+p).join(""));const c=parseInt(l,16),f=c>>16&255,h=c>>8&255,g=c&255;return[f,h,g]},n.rgb.hcg=function(a){const u=a[0]/255,l=a[1]/255,c=a[2]/255,f=Math.max(Math.max(u,l),c),h=Math.min(Math.min(u,l),c),g=f-h;let p,b;return g<1?p=h/(1-g):p=0,g<=0?b=0:f===u?b=(l-c)/g%6:f===l?b=2+(c-u)/g:b=4+(u-l)/g,b/=6,b%=1,[b*360,g*100,p*100]},n.hsl.hcg=function(a){const u=a[1]/100,l=a[2]/100,c=l<.5?2*u*l:2*u*(1-l);let f=0;return c<1&&(f=(l-.5*c)/(1-c)),[a[0],c*100,f*100]},n.hsv.hcg=function(a){const u=a[1]/100,l=a[2]/100,c=u*l;let f=0;return c<1&&(f=(l-c)/(1-c)),[a[0],c*100,f*100]},n.hcg.rgb=function(a){const u=a[0]/360,l=a[1]/100,c=a[2]/100;if(l===0)return[c*255,c*255,c*255];const f=[0,0,0],h=u%1*6,g=h%1,p=1-g;let b=0;switch(Math.floor(h)){case 0:f[0]=1,f[1]=g,f[2]=0;break;case 1:f[0]=p,f[1]=1,f[2]=0;break;case 2:f[0]=0,f[1]=1,f[2]=g;break;case 3:f[0]=0,f[1]=p,f[2]=1;break;case 4:f[0]=g,f[1]=0,f[2]=1;break;default:f[0]=1,f[1]=0,f[2]=p}return b=(1-l)*c,[(l*f[0]+b)*255,(l*f[1]+b)*255,(l*f[2]+b)*255]},n.hcg.hsv=function(a){const u=a[1]/100,l=a[2]/100,c=u+l*(1-u);let f=0;return c>0&&(f=u/c),[a[0],f*100,c*100]},n.hcg.hsl=function(a){const u=a[1]/100,c=a[2]/100*(1-u)+.5*u;let f=0;return c>0&&c<.5?f=u/(2*c):c>=.5&&c<1&&(f=u/(2*(1-c))),[a[0],f*100,c*100]},n.hcg.hwb=function(a){const u=a[1]/100,l=a[2]/100,c=u+l*(1-u);return[a[0],(c-u)*100,(1-c)*100]},n.hwb.hcg=function(a){const u=a[1]/100,c=1-a[2]/100,f=c-u;let h=0;return f<1&&(h=(c-f)/(1-f)),[a[0],f*100,h*100]},n.apple.rgb=function(a){return[a[0]/65535*255,a[1]/65535*255,a[2]/65535*255]},n.rgb.apple=function(a){return[a[0]/255*65535,a[1]/255*65535,a[2]/255*65535]},n.gray.rgb=function(a){return[a[0]/100*255,a[0]/100*255,a[0]/100*255]},n.gray.hsl=function(a){return[0,0,a[0]]},n.gray.hsv=n.gray.hsl,n.gray.hwb=function(a){return[0,100,a[0]]},n.gray.cmyk=function(a){return[0,0,0,a[0]]},n.gray.lab=function(a){return[a[0],0,0]},n.gray.hex=function(a){const u=Math.round(a[0]/100*255)&255,c=((u<<16)+(u<<8)+u).toString(16).toUpperCase();return"000000".substring(c.length)+c},n.rgb.gray=function(a){return[(a[0]+a[1]+a[2])/3/255*100]},Oa}var Da,Tc;function $2(){if(Tc)return Da;Tc=1;const r=Of();function t(){const u={},l=Object.keys(r);for(let c=l.length,f=0;f<c;f++)u[l[f]]={distance:-1,parent:null};return u}function n(u){const l=t(),c=[u];for(l[u].distance=0;c.length;){const f=c.pop(),h=Object.keys(r[f]);for(let g=h.length,p=0;p<g;p++){const b=h[p],y=l[b];y.distance===-1&&(y.distance=l[f].distance+1,y.parent=f,c.unshift(b))}}return l}function o(u,l){return function(c){return l(u(c))}}function a(u,l){const c=[l[u].parent,u];let f=r[l[u].parent][u],h=l[u].parent;for(;l[h].parent;)c.unshift(l[h].parent),f=o(r[l[h].parent][h],f),h=l[h].parent;return f.conversion=c,f}return Da=function(u){const l=n(u),c={},f=Object.keys(l);for(let h=f.length,g=0;g<h;g++){const p=f[g];l[p].parent!==null&&(c[p]=a(p,l))}return c},Da}var Fa,Ec;function B2(){if(Ec)return Fa;Ec=1;const r=Of(),t=$2(),n={},o=Object.keys(r);function a(l){const c=function(...f){const h=f[0];return h==null?h:(h.length>1&&(f=h),l(f))};return"conversion"in l&&(c.conversion=l.conversion),c}function u(l){const c=function(...f){const h=f[0];if(h==null)return h;h.length>1&&(f=h);const g=l(f);if(typeof g=="object")for(let p=g.length,b=0;b<p;b++)g[b]=Math.round(g[b]);return g};return"conversion"in l&&(c.conversion=l.conversion),c}return o.forEach(l=>{n[l]={},Object.defineProperty(n[l],"channels",{value:r[l].channels}),Object.defineProperty(n[l],"labels",{value:r[l].labels});const c=t(l);Object.keys(c).forEach(h=>{const g=c[h];n[l][h]=u(g),n[l][h].raw=a(g)})}),Fa=n,Fa}Qi.exports;var Pc;function N2(){return Pc||(Pc=1,(function(r){const t=(g,p)=>(...b)=>`\x1B[${g(...b)+p}m`,n=(g,p)=>(...b)=>{const y=g(...b);return`\x1B[${38+p};5;${y}m`},o=(g,p)=>(...b)=>{const y=g(...b);return`\x1B[${38+p};2;${y[0]};${y[1]};${y[2]}m`},a=g=>g,u=(g,p,b)=>[g,p,b],l=(g,p,b)=>{Object.defineProperty(g,p,{get:()=>{const y=b();return Object.defineProperty(g,p,{value:y,enumerable:!0,configurable:!0}),y},enumerable:!0,configurable:!0})};let c;const f=(g,p,b,y)=>{c===void 0&&(c=B2());const C=y?10:0,P={};for(const[F,A]of Object.entries(c)){const N=F==="ansi16"?"ansi":F;F===p?P[N]=g(b,C):typeof A=="object"&&(P[N]=g(A[p],C))}return P};function h(){const g=new Map,p={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};p.color.gray=p.color.blackBright,p.bgColor.bgGray=p.bgColor.bgBlackBright,p.color.grey=p.color.blackBright,p.bgColor.bgGrey=p.bgColor.bgBlackBright;for(const[b,y]of Object.entries(p)){for(const[C,P]of Object.entries(y))p[C]={open:`\x1B[${P[0]}m`,close:`\x1B[${P[1]}m`},y[C]=p[C],g.set(P[0],P[1]);Object.defineProperty(p,b,{value:y,enumerable:!1})}return Object.defineProperty(p,"codes",{value:g,enumerable:!1}),p.color.close="\x1B[39m",p.bgColor.close="\x1B[49m",l(p.color,"ansi",()=>f(t,"ansi16",a,!1)),l(p.color,"ansi256",()=>f(n,"ansi256",a,!1)),l(p.color,"ansi16m",()=>f(o,"rgb",u,!1)),l(p.bgColor,"ansi",()=>f(t,"ansi16",a,!0)),l(p.bgColor,"ansi256",()=>f(n,"ansi256",a,!0)),l(p.bgColor,"ansi16m",()=>f(o,"rgb",u,!0)),p}Object.defineProperty(r,"exports",{enumerable:!0,get:h})})(Qi)),Qi.exports}var Ra,Ac;function W2(){return Ac||(Ac=1,Ra={stdout:!1,stderr:!1}),Ra}var La,Mc;function z2(){return Mc||(Mc=1,La={stringReplaceAll:(n,o,a)=>{let u=n.indexOf(o);if(u===-1)return n;const l=o.length;let c=0,f="";do f+=n.substr(c,u-c)+o+a,c=u+l,u=n.indexOf(o,c);while(u!==-1);return f+=n.substr(c),f},stringEncaseCRLFWithFirstIndex:(n,o,a,u)=>{let l=0,c="";do{const f=n[u-1]==="\r";c+=n.substr(l,(f?u-1:u)-l)+o+(f?`\r
`:`
`)+a,l=u+1,u=n.indexOf(`
`,l)}while(u!==-1);return c+=n.substr(l),c}}),La}var $a,Oc;function q2(){if(Oc)return $a;Oc=1;const r=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,t=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,n=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,o=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,a=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function u(h){const g=h[0]==="u",p=h[1]==="{";return g&&!p&&h.length===5||h[0]==="x"&&h.length===3?String.fromCharCode(parseInt(h.slice(1),16)):g&&p?String.fromCodePoint(parseInt(h.slice(2,-1),16)):a.get(h)||h}function l(h,g){const p=[],b=g.trim().split(/\s*,\s*/g);let y;for(const C of b){const P=Number(C);if(!Number.isNaN(P))p.push(P);else if(y=C.match(n))p.push(y[2].replace(o,(F,A,N)=>A?u(A):N));else throw new Error(`Invalid Chalk template style argument: ${C} (in style '${h}')`)}return p}function c(h){t.lastIndex=0;const g=[];let p;for(;(p=t.exec(h))!==null;){const b=p[1];if(p[2]){const y=l(b,p[2]);g.push([b].concat(y))}else g.push([b])}return g}function f(h,g){const p={};for(const y of g)for(const C of y.styles)p[C[0]]=y.inverse?null:C.slice(1);let b=h;for(const[y,C]of Object.entries(p))if(Array.isArray(C)){if(!(y in b))throw new Error(`Unknown Chalk style: ${y}`);b=C.length>0?b[y](...C):b[y]}return b}return $a=(h,g)=>{const p=[],b=[];let y=[];if(g.replace(r,(C,P,F,A,N,z)=>{if(P)y.push(u(P));else if(A){const W=y.join("");y=[],b.push(p.length===0?W:f(h,p)(W)),p.push({inverse:F,styles:c(A)})}else if(N){if(p.length===0)throw new Error("Found extraneous } in Chalk template literal");b.push(f(h,p)(y.join(""))),y=[],p.pop()}else y.push(z)}),b.push(y.join("")),p.length>0){const C=`Chalk template literal is missing ${p.length} closing bracket${p.length===1?"":"s"} (\`}\`)`;throw new Error(C)}return b.join("")},$a}var Ba,Dc;function H2(){if(Dc)return Ba;Dc=1;const r=N2(),{stdout:t,stderr:n}=W2(),{stringReplaceAll:o,stringEncaseCRLFWithFirstIndex:a}=z2(),{isArray:u}=Array,l=["ansi","ansi","ansi256","ansi16m"],c=Object.create(null),f=(W,O={})=>{if(O.level&&!(Number.isInteger(O.level)&&O.level>=0&&O.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const E=t?t.level:0;W.level=O.level===void 0?E:O.level};class h{constructor(O){return g(O)}}const g=W=>{const O={};return f(O,W),O.template=(...E)=>N(O.template,...E),Object.setPrototypeOf(O,p.prototype),Object.setPrototypeOf(O.template,O),O.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},O.template.Instance=h,O.template};function p(W){return g(W)}for(const[W,O]of Object.entries(r))c[W]={get(){const E=P(this,C(O.open,O.close,this._styler),this._isEmpty);return Object.defineProperty(this,W,{value:E}),E}};c.visible={get(){const W=P(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:W}),W}};const b=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(const W of b)c[W]={get(){const{level:O}=this;return function(...E){const U=C(r.color[l[O]][W](...E),r.color.close,this._styler);return P(this,U,this._isEmpty)}}};for(const W of b){const O="bg"+W[0].toUpperCase()+W.slice(1);c[O]={get(){const{level:E}=this;return function(...U){const V=C(r.bgColor[l[E]][W](...U),r.bgColor.close,this._styler);return P(this,V,this._isEmpty)}}}}const y=Object.defineProperties(()=>{},{...c,level:{enumerable:!0,get(){return this._generator.level},set(W){this._generator.level=W}}}),C=(W,O,E)=>{let U,V;return E===void 0?(U=W,V=O):(U=E.openAll+W,V=O+E.closeAll),{open:W,close:O,openAll:U,closeAll:V,parent:E}},P=(W,O,E)=>{const U=(...V)=>u(V[0])&&u(V[0].raw)?F(U,N(U,...V)):F(U,V.length===1?""+V[0]:V.join(" "));return Object.setPrototypeOf(U,y),U._generator=W,U._styler=O,U._isEmpty=E,U},F=(W,O)=>{if(W.level<=0||!O)return W._isEmpty?"":O;let E=W._styler;if(E===void 0)return O;const{openAll:U,closeAll:V}=E;if(O.indexOf("\x1B")!==-1)for(;E!==void 0;)O=o(O,E.close,E.open),E=E.parent;const ee=O.indexOf(`
`);return ee!==-1&&(O=a(O,V,U,ee)),U+O+V};let A;const N=(W,...O)=>{const[E]=O;if(!u(E)||!u(E.raw))return O.join(" ");const U=O.slice(1),V=[E.raw[0]];for(let ee=1;ee<E.length;ee++)V.push(String(U[ee-1]).replace(/[{}\\]/g,"\\$&"),String(E.raw[ee]));return A===void 0&&(A=q2()),A(W,V.join(""))};Object.defineProperties(p.prototype,c);const z=p();return z.supportsColor=t,z.stderr=p({level:n?n.level:0}),z.stderr.supportsColor=n,Ba=z,Ba}var Y2=H2();const U2=Lc(Y2);function G2(r,t={}){if(!Array.isArray(r))throw new TypeError("Expected an array");let n=["▁","▂","▃","▄","▅","▆","▇","█"];const o=[[5,5,4],[5,5,3],[5,5,0],[5,4,0],[5,3,0],[5,2,0],[5,1,0],[5,0,0]],a=r.filter(c=>Number.isFinite(c)),u=typeof t.minimum=="number"?t.minimum:typeof t.maximum=="number"?0:Math.min(...a),l=typeof t.maximum=="number"?t.maximum:Math.max(...a);return u===l&&l!==0&&(n=[n[4]]),r.map(c=>{if(!Number.isFinite(c))return" ";let f;return u===l?f=0:f=Math.ceil((c-u)/(l-u)*n.length)-1,f<0&&(f=0),t.style==="fire"?U2.rgb(...o[f])(n[f]):n[f]}).join("")}const Hi=sn(un.StatisticsService);class Q2{descriptiveStatistics(t,n){const o=t.filter(a=>typeof a=="number"&&!isNaN(a));if(o.length===0)return Hi.warn("No valid numeric values found for descriptive statistics"),null;try{const a=Ja(o,.25),u=Ja(o,.75),l={count:o.length,sum:Tf(o),mean:Ef(o),median:D2(o),mode:A2(o),min:vc(o),max:_c(o),range:_c(o)-vc(o),variance:Pf(o),standardDeviation:T2(o),q1:a,q3:u,iqr:u-a};if(n?.includeVisualization){const c=n.chartHeight||10,f=this.createSparkline(o),h=this.createLineChart(o,c);l.visualization=`
**Sparkline:** ${f}

**Trend Chart:**
\`\`\`
${h}
\`\`\`
`.trim()}return Hi.dev("Calculated descriptive statistics",{stats:l}),l}catch(a){return Hi.error("Error calculating descriptive statistics",{error:a}),null}}booleanStatistics(t){const n=t.filter(C=>C===!0).length,o=t.filter(C=>C===!1).length,a=t.filter(C=>C===null).length,u=t.length;let l=0,c=0,f=0,h=null,g=0,p=0;for(const C of t)C===!0?(g++,p=0):C===!1&&(p++,g=0),l=Math.max(l,g),c=Math.max(c,p);const b=t[t.length-1];b===!0?(f=g,h="true"):b===!1&&(f=p,h="false");const y={count:u,trueCount:n,falseCount:o,nullCount:a,truePercentage:u>0?n/u*100:0,falsePercentage:u>0?o/u*100:0,longestTrueStreak:l,longestFalseStreak:c,currentStreak:f,currentStreakType:h};return Hi.dev("Calculated boolean statistics",{stats:y}),y}formatDescriptiveStats(t){return`
**Count:** ${t.count}
**Sum:** ${t.sum.toFixed(2)}
**Mean:** ${t.mean.toFixed(2)}
**Median:** ${t.median.toFixed(2)}
**Mode:** ${Array.isArray(t.mode)?t.mode.join(", "):t.mode}
**Min:** ${t.min.toFixed(2)}
**Max:** ${t.max.toFixed(2)}
**Range:** ${t.range.toFixed(2)}
**Std Dev:** ${t.standardDeviation.toFixed(2)}
**Variance:** ${t.variance.toFixed(2)}
**Q1 (25%):** ${t.q1.toFixed(2)}
**Q3 (75%):** ${t.q3.toFixed(2)}
**IQR:** ${t.iqr.toFixed(2)}
`.trim()}formatBooleanStats(t,n){const o=t.currentStreakType==="true"?"✨":"❄️";return`
**${n} Statistics**
- Total tracked: ${t.count} days
- Success rate: ${t.truePercentage.toFixed(1)}% (${t.trueCount}/${t.count})
- Longest streak: ${t.longestTrueStreak} days 🏆
- Current streak: ${o} ${t.currentStreak} days
`.trim()}createLineChart(t,n=10,o){if(t.length===0)return"No data to display";const a={height:n};return o&&(a.width=o),R2.plot(t,a)}createSparkline(t){return t.length===0?"—":G2(t)}createBooleanBarChart(t,n=30){return t.slice(-n).map(u=>u===!0?"✅":u===!1?"❌":"⬜").join("")}createBooleanPieChart(t,n){return`\`\`\`mermaid
pie title ${n}
    "Completed" : ${t.trueCount}
    "Skipped" : ${t.falseCount}
    ${t.nullCount>0?`"Not Tracked" : ${t.nullCount}`:""}
\`\`\``}createBooleanVisualReport(t,n,o={}){const{showSparkline:a=!0,showBarChart:u=!0,showAsciiChart:l=!0,showPieChart:c=!1,dates:f=[]}=o,h=this.booleanStatistics(t),g=t.map(b=>b===!0?1:0);let p=`## 📊 ${n}

`;if(p+=this.formatBooleanStats(h,n)+`

`,a&&(p+=`**Trend:** ${this.createSparkline(g)}

`),u&&(p+=`**Last ${Math.min(t.length,30)} days:**
`,p+=this.createBooleanBarChart(t,30)+`

`,f.length>0)){const b=f[0],y=f[f.length-1];p+=`*From ${b} to ${y}*

`}return l&&g.length>=3&&(p+="**Trend Chart:**\n```\n",p+=this.createLineChart(g,6),p+="\n```\n\n"),c&&(p+=this.createBooleanPieChart(h,`${n} Distribution`)+`

`),p}createNumericVisualReport(t,n,o={}){const{showSparkline:a=!0,showAsciiChart:u=!0,showStats:l=!0}=o,c=this.descriptiveStatistics(t);if(!c)return`## ${n}

No data available`;let f=`## 📈 ${n}

`;return l&&(f+=this.formatDescriptiveStats(c)+`

`),a&&(f+=`**Trend:** ${this.createSparkline(t)}

`),u&&(f+="**Trend Chart:**\n```\n",f+=this.createLineChart(t,10),f+="\n```\n\n"),f}}const eo=new Q2;async function V2(){const r="habitTracking",t=new mt(r),n=h2.map(async c=>{const f=await Gr.shouldShowInput(c);if(!f)return null;const h=await Gr.getInputProgress(c);return console.log(`[HabitTracking] ${c.id}:`,{shouldShow:f,daysOfWeek:c.schedule?.daysOfWeek||"none",targetCount:c.schedule?.target?.count||"none",completedCount:h.targetProgress?.current||0,targetPeriod:c.schedule?.target?.per?`${c.schedule.target.per.count} ${c.schedule.target.per.unit}`:"none"}),{habit:c,completedCount:h.targetProgress?.current||0,targetCount:c.schedule?.target?.count||1,isComplete:h.targetProgress?.isComplete||!1,shouldShow:!0,maxLimitProgress:h.limitProgress?{current:h.limitProgress.current,max:h.limitProgress.limit,percentage:h.limitProgress.percentage}:null}}),a=(await Promise.all(n)).filter(c=>c!==null);t._md("## ✅ Today's Habits (📌 CORE)"),t._foldable(`**Atomic Habits** — every habit = Cue → Craving → Response → Reward.
**Taoist Wu Wei** — not perfection, but flow. Missed habits are okay—just return gently.
**Power of Habit** — the cue and reward make habits stick, not willpower alone.

**Check when complete:**`),a.length>0?(a.forEach(({habit:c,completedCount:f,maxLimitProgress:h,targetCount:g})=>{const p=c.schedule?.target?.per.count||1,b=c.schedule?.target?.per.unit||pe.Day,y=g===1&&p===1&&b===pe.Day;let C=[c.label];if(!y){let F;p===1?F=b:F=`${p} ${b}s`,C.push(`target: ${f}/${g} per ${F}`)}if(h){const{current:F,max:A}=h,N=c.schedule?.limit?.per.count||1,z=c.schedule?.limit?.per.unit||"day",W=N===1?z:`${N} ${z}s`;C.push(`limit: ${F}/${A} per ${W}`)}const P={...c.inputOptions,label:C.join(" · ")};t._input(P),t._md(`*Cue*: ${c.cue} · *Reward*: ${c.reward}`)}),t._nl(),t._md("Missing once is an accident. Missing twice is the start of a pattern. Return gently.")):t._md("*🎉 All habits completed for this period! Well done!*");const u=a.map(c=>c.habit.id);let l=!1;try{const c=await vn.getInputsLastNReports({inputIds:u,count:10});if(l=c.length>0,l){t._divider();let f="";for(const{habit:h}of a){const g=c.filter(p=>p.inputId===h.id);if(g.length>=2){const p=g.map(C=>C.value),b=eo.booleanStatistics(p),y=eo.createSparkline(p.map(C=>C===!0?1:0));f+=`**${h.label}:** ${b.truePercentage.toFixed(0)}% (${b.trueCount}/${b.count}) · ${y} · ${b.currentStreakType==="true"?"✨":"❄️"} ${b.currentStreak} streak
`}}t._foldable(f.trim(),"📊 Habit Statistics (Last 10 Reports)")}}catch(c){console.error("Failed to fetch habit statistics:",c)}return await t.render()}const Fc=r=>{try{const t=yb(r,"yyyy-MM-dd",new Date);return wr(t,"dd.MM.yyyy")}catch{return r}};async function X2(){const r="messageFromYesterday",t=new mt(r),n=await vn.getInputsLastNReports({inputIds:[De.message_for_tomorrow.id,De.tomorrow_priority.id],count:1}),o=n.find(c=>c.inputId===De.message_for_tomorrow.id),a=n.find(c=>c.inputId===De.tomorrow_priority.id),u=o&&o.value?.trim().length>0,l=a&&a.value?.trim().length>0;if(!u&&!l)return"";if(t._md("## 📨 Message from Your Past Self (⭐ RECOMMENDED)"),l){const c=a.value,f=Fc(a.reportDate);t._md(`### 🎯 Today's Priority (set ${f})`),t._md(`> ${c}`)}if(u){const c=o.value,f=Fc(o.reportDate);t._md(`### 💌 Message (from ${f})`),t._md(`> ${c}`)}return await t.render()}async function j2(){const r="accomplishmentsAndObstacles",t=new mt(r);return t._md("## 📊 Wins & Obstacles (⭐ RECOMMENDED)"),t._foldable(`**The Stoic Path** — "The obstacle is the way." Every setback is training.

_"The impediment to action advances action. What stands in the way becomes the way."_ — Marcus Aurelius

**Three Questions for Obstacles:**
1. **What happened?** (The external event—not in your control)
2. **How did I respond?** (Your reaction—entirely in your control)
3. **How will I overcome this?** (Your action plan—growth through adversity)

**Atomic Habits:** Every obstacle reveals a system flaw. Fix the system, not just the symptom.
**Growth Mindset:** You haven't mastered this *yet*. Struggle = growth happening.

Remember: You control your **effort, attitude, and response** — not outcomes.`),t._fancyTitle("Wins & Accomplishments","🏆"),t._input(De.accomplishments),t._fancyTitle("Obstacles & The Way Forward","⚔️"),t._input(De.obstacles),t._input(De.if_then_plan),t._md("**Stoic Wisdom**: This obstacle is not blocking your path—it IS the path. It's revealing where you need to grow."),await t.render()}async function K2(){const r="attentionAndWillpower",t=new mt(r);return t._md("## 🎯 Attention & Willpower Check (💡 OPTIONAL - 3-5 min)"),t._foldable(`**Hyperfocus** — attention is your most valuable resource. Protect it fiercely.
**The Willpower Instinct** — willpower depletes throughout the day and needs recovery (rest, breaks, nature).
**Atomic Habits** — environment shapes behavior more than motivation.

Track patterns. Design better environments. Restore your willpower.`),t._fancyTitle("Attention Reflection","👁️"),t._input(De.main_distraction),t._input(De.flow_moments),t._fancyTitle("Willpower Reflection","💪"),t._input(De.willpower_challenge),t._md("**Insight** — you can't control urges, but you can control your environment. Make good choices the easy choices."),await t.render()}async function J2(){const r="gratitudeAndSavoring",t=new mt(r);return t._md("## 🙏 Gratitude & Savoring (⭐ RECOMMENDED)"),t._foldable(`**Three Good Things Intervention** — writing WHY things went well is crucial for wellbeing.
**Stoicism** — negative visualization—appreciate what you have by imagining its loss.
**Positive Psychology** — gratitude is one of the strongest wellbeing predictors.

Savor simple pleasures: friendship, beauty, learning, nature. Your role matters.`),t._md("### Three Good Things Today"),t._input(De.gratitudes),await t.render()}async function Z2(){const r="mindfulMoment",t=new mt(r);return t._md("## 🧘 Mindful Moment (💡 OPTIONAL - 2-3 min)"),t._foldable(`**Present Moment Awareness** — The antidote to anxiety

Anxiety lives in the future (what if?). Regret lives in the past (if only...). Peace lives in NOW.

**The Problem** — your mind is NEVER here. You eat lunch while planning dinner. You're with friends while mentally at work. You miss your ENTIRE LIFE because you're always somewhere else.

**The Solution** — train yourself to return to the present moment—over and over.

**What this practice does:**
- **Reduces anxiety** — the present moment is usually fine. Suffering is in your head.
- **Increases joy** — life's beauty exists NOW, not in memory or anticipation
- **Improves focus** — your attention is your most valuable resource
- **Creates calm** — presence is inherently peaceful
- **Builds gratitude** — you notice what you usually miss

**Why it works** (neuroscience):
Your brain has two modes:
- **Default Mode** (wandering mind) — predicts, plans, worries, ruminates = stress
- **Present Mode** (focused attention) — observes, senses, experiences = calm

This practice trains you to shift from Default to Present mode at will.

**How to practice:**
This is NOT about emptying your mind. It's about NOTICING when you were present today, and appreciating that moment.

When you recall being fully present—even for 5 seconds—you're training your brain to recognize and seek presence.`,"Mindfulness Practice"),t._md("### Practice (2 minutes)"),t._md("**Step 1** — ground yourself"),t._md("Close your eyes or soften your gaze. Take three slow, deep breaths. Feel your body in the chair."),t._md("**Step 2** — recall one present moment"),t._md("Remember ONE moment from today when you were fully HERE — no past, no future, just NOW:"),t._md("- Morning coffee warmth on your hands"),t._md("- A genuine laugh with someone"),t._md("- Sunlight on your skin"),t._md("- The taste of your lunch"),t._md("- Wind in your hair"),t._md("- A moment of quiet"),t._md("**Step 3** — explore the memory"),t._md("Hold that memory. Notice the details:"),t._md("- What did you SEE? (Colors, light, movement)"),t._md("- What did you HEAR? (Sounds, silence, rhythm)"),t._md("- What did you FEEL? (Temperature, texture, sensation)"),t._md("- What did you SMELL? TASTE?"),t._md("**Step 4** — appreciate"),t._md("That simple moment—THAT is life. Not achievements or plans. Just being fully alive, right here, right now."),t._input(De.mindful_pause_taken),t._md('> _"The present moment is all you ever have."_ — Eckhart Tolle'),t._md('> _"When you wash the dishes, wash the dishes."_ — Thích Nhất Hạnh'),await t.render()}async function ek(){const r="emotionAwareness",t=new mt(r);return t._md("## 💭 Emotion Awareness (💡 OPTIONAL - 3-5 min)"),t._foldable(`**Emotional Intelligence** — recognizing emotions is the first step to managing them.
**Stoicism** — you can't control feelings arising, but you can control your response.
**Neuroscience** — naming emotions reduces their intensity (affect labeling).

No judgment—just awareness and learning.`),t._md("### Today's Emotional Landscape"),t._input(De.strongest_emotion),t._input(De.emotion_trigger),t._input(De.emotion_response),t._input(De.better_emotion_response),t._md(`> **Practice** — when strong emotions arise, pause and label: _"I'm feeling [emotion]."_ This creates space between feeling and reaction.`),await t.render()}async function tk(){const r="permaPlus",t=new mt(r),n=Ka.map(async p=>await Gr.shouldShowInput(p)?p:null),o=(await Promise.all(n)).filter(p=>p!==null),a=new Map;o.forEach(p=>{p.schedule?.showEvery?.unit===pe.Day&&a.set(p.id,p.schedule.showEvery.count)});const u=Ka.filter(p=>!p.schedule||p.schedule.active!==!1),l=u.map(p=>p.id);let c=new Map,f=new Map,h=new Map,g={first:"",last:"",reportCount:0};try{const p=await vn.getInputsLastNReports({inputIds:l,count:20});if(p.length>0){const b=Array.from(new Set(p.map(y=>y.reportDate||""))).sort();g={first:b[0],last:b[b.length-1],reportCount:b.length}}u.forEach(b=>{const y=p.filter(C=>C.inputId===b.id).map(C=>{const P=Array.isArray(C.value)?C.value[0]:C.value;return typeof P=="string"?parseFloat(P):P}).filter(C=>!isNaN(C));if(c.set(b.id,y),y.length>0){const C=y.slice(-5),P=C.reduce((A,N)=>A+N,0)/C.length;f.set(b.id,P);const F=y.reduce((A,N)=>A+N,0)/y.length;h.set(b.id,F)}})}catch(p){console.error("Failed to fetch PERMA historical data:",p)}if(t._md("## 💚 PERMA+8 Wellbeing Check (📌 CORE - 2-3 min)"),t._foldable(`**PERMA+8 Model**: Comprehensive wellbeing framework covering 13 dimensions:

**Core PERMA:**
- Positive Emotions, Engagement, Relationships, Meaning, Accomplishment

**Body & Physical:**
- Sleep Quality, Embodiment (body acceptance), Physical Pleasure, Touch & Intimacy, Physical Condition

**Life Context:**
- Mindset, Environment, Economic Security

Rate honestly—awareness is the first step to change.

**Rate each dimension** (3 = Great, 2 = Adequate, 1 = Struggling):`),o.forEach(p=>{const b=f.get(p.id),y=b!==void 0?` (last 5 reports: ${b.toFixed(1)})`:"",C=p.schedule?.showEvery?` *(shown every ${p.schedule.showEvery.count} ${p.schedule.showEvery.unit}${p.schedule.showEvery.count>1?"s":""})*`:"";t._inputLabel(`${p.label}${y}${C}`,`*${p.description}*`),t._input(p.inputOptions)}),c.size>0&&Array.from(c.values()).some(p=>p.length>=3)){t._themedDivider("Wellbeing Trends","📊");const p=[];if(c.forEach(b=>{p.push(...b)}),p.length>0){const b=p.reduce((P,F)=>P+F,0)/p.length,y=eo.createSparkline(Array.from(c.values())[0]);t._md(`**Overall Wellbeing (last ${g.reportCount} reports): ${b.toFixed(1)}/3.0** ${y}`),g.first&&g.last&&t._md(`*Data from ${g.first} to ${g.last}*`);const C=u.map(P=>({param:P,avg:h.get(P.id)||0,dataPoints:c.get(P.id)?.length||0})).filter(P=>P.dataPoints>=3).sort((P,F)=>P.avg-F.avg);if(C.length>0){const P=C[0],F=C[C.length-1];t._md("**Insights:**"),P.avg<2&&t._md(`- ⚠️ **Needs attention**: ${P.param.label} (avg: ${P.avg.toFixed(1)}) — Consider prioritizing this area`),F.avg>=2.5&&t._md(`- ✨ **Strength area**: ${F.param.label} (avg: ${F.avg.toFixed(1)}) — Keep up the good work!`),t._md(`**Trends (last ${g.reportCount} reports):**`),u.forEach(A=>{const N=c.get(A.id);if(N&&N.length>=3){const z=h.get(A.id)||0,W=eo.createSparkline(N),O=N.length>=2?N[N.length-1]>N[N.length-2]?"↗":N[N.length-1]<N[N.length-2]?"↘":"→":"→";t._md(`- ${A.label}: ${z.toFixed(1)} ${W} ${O}`)}})}}}return await t.render()}async function nk(){const r="messageForTomorrow",t=new mt(r);return t._md("## 💌 Message & Intention for Tomorrow (📌 CORE - 2 min)"),t._foldable(`Set yourself up for success tomorrow with clarity and encouragement.

**Tomorrow's Priority**: What's the ONE thing that matters most? When and where will you do it?
**Message to Future Self**: A reminder, encouragement, or lesson you don't want to forget.

What can I prepare tonight to make tomorrow easier?

Which PERMA plus parameter needs special attention tomorrow?

Keep it short and meaningful. Your future self will thank you.`),t._input(De.tomorrow_priority),t._input(De.message_for_tomorrow),t._input(De.plan_next_day),await t.render()}async function rk(){const r=[];r.push(await l2()),r.push(`
---
`),r.push("# 🌅 MORNING: Set the Day"),r.push("*Win the morning, win the day. Start with intention and clarity.*"),r.push(`
---
`),r.push(await X2()),r.push(await _2()),r.push(await k2()),r.push(await Z2()),r.push(await I2()),r.push(`
---
`),r.push("# 📋 DAILY HABITS & PRACTICES"),r.push("*Small actions, repeated daily, create remarkable results.*"),r.push(`
---
`),r.push(await V2()),r.push(await S2()),r.push(`
---
`),r.push("# 🌙 EVENING: Reflect & Close the Day"),r.push("*Review your day with honesty and gratitude. Learn, grow, prepare.*"),r.push(`
---
`),r.push(await j2()),r.push(await K2()),r.push(await J2()),r.push(await ek()),r.push(await tk()),r.push(await nk()),Ur.write({type:Yr.ALMOST_DAILY,data:r.join(`
`)})}class ik{async backfillPeriodicParameters(t){const n=[];for(const o of t){const a=Ka.find(f=>f.id===o.inputId&&f.schedule?.active!==!1);if(!a||!a.schedule?.showEvery){n.push(o);continue}const u=a.schedule.showEvery.unit===pe.Day?a.schedule.showEvery.count:1,l=o.reportDate,c=await this.getReportDatesInPast(u,l);for(const f of c)n.push({...o,reportDate:f});n.push(o)}return n}async getReportDatesInPast(t,n){const o=[];try{const a=await vn.getReportInputs("almostDailyReport");for(let u=1;u<t;u++){const l=this.getDateDaysAgo(u,n);a.some(f=>f.reportDate===l)&&o.push(l)}}catch(a){console.error("Error fetching past report dates:",a)}return o}getDateDaysAgo(t,n){(!n||n.trim()==="")&&(console.warn(`Invalid fromDate provided to getDateDaysAgo: "${n}". Using today's date.`),n=new Date().toISOString().split("T")[0]);const o=new Date(n);return isNaN(o.getTime())?(console.error(`Invalid date string: "${n}". Using today's date.`),new Date().toISOString().split("T")[0]):(o.setDate(o.getDate()-t),o.toISOString().split("T")[0])}}const ok=new ik,Bt=sn(un.FileService);async function ak(){try{const r=`${wr(new Date,"dd.MM.yyyy")}.md`,t=await sk();Bt.dev("Input collection and empty report cleanup completed");const n=Ie.workspace.getLeavesOfType("markdown"),o=[];for(const l of n){const f=l.view.file;f&&(o.push(f.path),f.path.endsWith(r)&&(Bt.dev("Closing today's note: "+f.path),await l.detach()))}Bt.dev("Currently open files: "+o.join(", "));const a=`${Tt.projectDir}/${Tt.coreDir}`,u=Ie.vault.getAbstractFileByPath(a);if(u&&"children"in u){const l=/^\d{2}\.\d{2}\.\d{4}\.md$/;for(const c of u.children)"extension"in c&&c.extension==="md"&&l.test(c.name)&&c.name!==r&&(Bt.dev("Deleting old app-triggering note: "+c.path),await Ie.vault.delete(c))}if(t){for(const[l,c]of Object.entries(t))if(c&&c.length>0){const f=await ok.backfillPeriodicParameters(c);await vn.upsertReportInputs(l,f),Bt.info(`Saved ${f.length} inputs (${c.length} original + ${f.length-c.length} backfilled) for ${l} to database`)}}await rk(),Bt.info("Daily report built successfully")}catch(r){Bt.error("Failed to run onStart:",r)}}async function sk(){try{Bt.dev("Checking for empty reports from yesterday...");const r=await n_.collectFromYesterday();for(const[t,n]of Object.entries(r)){if(!n||n.length===0){Bt.dev(`No inputs found for report: ${t}`);continue}if(n.every(a=>!!(a.value===null||a.value===void 0||typeof a.value=="string"&&a.value.trim()===""||Array.isArray(a.value)&&a.value.length===0||typeof a.value=="boolean"&&a.value===!1||typeof a.value=="number"&&a.value===0))){const a=Ur.reportFolders[t],u=await Ur._listFiles(a);if(u.length>0){const l=u.sort().reverse()[0],c=n[0];if(c&&l.includes(c.reportDate.replace(/-/g,""))&&l.includes(c.reportNumber)){const f=`${a}/${l}`,h=Ie.vault.getAbstractFileByPath(f);h&&"extension"in h&&(Bt.info(`Deleting empty report: ${l}`),await Ie.vault.delete(h))}}}else Bt.dev(`Report ${t} has content - keeping it`)}return r}catch(r){return Bt.error("Failed to delete empty reports:",r),{}}}const Yi=sn(un.FileService);async function uk(r,t){Yi.info("runPowerJournal started");const n=await by(t);gy(r,n),Yi.dev("Globals set, config loaded");try{await ak(),Yi.info("Power Journal workflow completed successfully")}catch(o){Yi.error("Error in Power Journal workflow",{error:o})}}module.exports=uk;
