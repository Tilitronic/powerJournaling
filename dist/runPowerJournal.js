"use strict";const Rt={ComponentBuilder:"ComponentBuilder",SavingService:"SavingService",TagsService:"TagsService",InputCreator:"InputCreator",FileService:"FileService",OnStart:"OnStart",InputCollector:"InputCollector",ValueExtractor:"ValueExtractor",DbService:"DbService",StatisticsService:"StatisticsService"},F0={[Rt.ComponentBuilder]:{dev:!1,info:!0,warn:!0,error:!0},[Rt.SavingService]:{dev:!0,info:!0,warn:!0,error:!0},[Rt.TagsService]:{dev:!1,info:!0,warn:!0,error:!0},[Rt.InputCreator]:{dev:!1,info:!0,warn:!0,error:!0},[Rt.FileService]:{dev:!0,info:!0,warn:!0,error:!0},[Rt.OnStart]:{dev:!0,info:!0,warn:!0,error:!0},[Rt.InputCollector]:{dev:!0,info:!0,warn:!0,error:!0},[Rt.ValueExtractor]:{dev:!0,info:!0,warn:!0,error:!0},[Rt.DbService]:{dev:!0,info:!0,warn:!0,error:!0},[Rt.StatisticsService]:{dev:!0,info:!0,warn:!0,error:!0}},$n={reset:"\x1B[0m",bold:"\x1B[1m",gray:"\x1B[90m",purple:"\x1B[35m"},M0={dev:"\x1B[44m\x1B[37m",info:"\x1B[42m\x1B[30m",warn:"\x1B[43m\x1B[30m",error:"\x1B[41m\x1B[37m"},O0={dev:"🛠",info:"ℹ️",warn:"⚠️",error:"❌"},Ko={},gl=["\x1B[36m","\x1B[33m","\x1B[32m","\x1B[34m","\x1B[31m","\x1B[95m","\x1B[96m","\x1B[92m","\x1B[93m"];let ml=0;function L0(t){return Ko[t]||(Ko[t]=gl[ml%gl.length],ml++),Ko[t]}class Fu{constructor(i,n){this.logs=[],this.serviceConfig={},this.getConfig=i,this.prefix=n??"global"}setServiceConfig(i){this.serviceConfig=i}addLog(i,n,o){const u={timestamp:new Date,level:i,service:this.prefix,message:n,meta:o};if(this.logs.push(u),!((this.serviceConfig[this.prefix]??{})[i]??!0))return;const c=u.timestamp.toISOString().split("T")[1].split(".")[0],h=`${$n.gray}${c}${$n.reset}`,d=`${$n.purple}[PJ]${$n.reset}`,p=`${L0(this.prefix)}${$n.bold}[${this.prefix}]${$n.reset}`,g=`${M0[i]}[${O0[i]} ${i.toUpperCase().padEnd(5)}]${$n.reset}`,b=`${h} ${d}${p}${g} ${n}`;try{i==="warn"?console.warn(b,o??""):i==="error"?console.error(b,o??""):console.log(b,o??"")}catch{console.log(`${h} ${d}[${this.prefix}][${i.toUpperCase()}] ${n}`,o??"")}}dev(i,n){this.addLog("dev",i,n)}info(i,n){this.addLog("info",i,n)}warn(i,n){this.addLog("warn",i,n)}error(i,n){this.addLog("error",i,n)}getAllLogs(){return this.logs}withPrefix(i){const n=new Fu(this.getConfig,i);return n.setServiceConfig(this.serviceConfig),n}}let nt;function R0(t,i){nt=i}const ac=new Fu(()=>nt);ac.setServiceConfig(F0);function Vt(t){return ac.withPrefix(t)}const Qt=Rt,Ce=app;var ki=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ir={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var B0=Ir.exports,yl;function D0(){return yl||(yl=1,(function(t,i){(function(){var n,o="4.17.21",u=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",d=500,p="__lodash_placeholder__",g=1,b=2,w=4,T=1,R=2,q=1,B=2,X=4,W=8,N=16,M=32,E=64,H=128,V=256,ee=512,he=30,Q="...",G=800,me=16,Ee=1,ce=2,De=3,ke=1/0,Le=9007199254740991,Et=17976931348623157e292,_=NaN,Te=4294967295,At=Te-1,S=Te>>>1,ot=[["ary",H],["bind",q],["bindKey",B],["curry",W],["curryRight",N],["flip",ee],["partial",M],["partialRight",E],["rearg",V]],Qe="[object Arguments]",Pe="[object Array]",In="[object AsyncFunction]",Xe="[object Boolean]",mt="[object Date]",ln="[object DOMException]",Xt="[object Error]",qn="[object Function]",Fr="[object GeneratorFunction]",ut="[object Map]",cn="[object Number]",Mr="[object Null]",yt="[object Object]",Or="[object Promise]",Lr="[object Proxy]",fn="[object RegExp]",at="[object Set]",En="[object String]",Un="[object Symbol]",Bi="[object Undefined]",An="[object WeakMap]",F="[object WeakSet]",$="[object ArrayBuffer]",J="[object DataView]",ue="[object Float32Array]",de="[object Float64Array]",He="[object Int8Array]",Tt="[object Int16Array]",st="[object Int32Array]",Kt="[object Uint8Array]",Jt="[object Uint8ClampedArray]",Ne="[object Uint16Array]",$t="[object Uint32Array]",Pt=/\b__p \+= '';/g,jc=/\b(__p \+=) '' \+/g,Zc=/(__e\(.*?\)|\b__t\)) \+\n'';/g,zu=/&(?:amp|lt|gt|quot|#39);/g,Wu=/[&<>"']/g,ef=RegExp(zu.source),tf=RegExp(Wu.source),nf=/<%-([\s\S]+?)%>/g,rf=/<%([\s\S]+?)%>/g,qu=/<%=([\s\S]+?)%>/g,of=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,uf=/^\w*$/,af=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Di=/[\\^$.*+?()[\]{}|]/g,sf=RegExp(Di.source),$i=/^\s+/,lf=/\s/,cf=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ff=/\{\n\/\* \[wrapped with (.+)\] \*/,hf=/,? & /,df=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,pf=/[()=,{}\[\]\/\s]/,gf=/\\(\\)?/g,mf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Uu=/\w*$/,yf=/^[-+]0x[0-9a-f]+$/i,wf=/^0b[01]+$/i,xf=/^\[object .+?Constructor\]$/,bf=/^0o[0-7]+$/i,vf=/^(?:0|[1-9]\d*)$/,_f=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Rr=/($^)/,kf=/['\n\r\u2028\u2029\\]/g,Br="\\ud800-\\udfff",Sf="\\u0300-\\u036f",Cf="\\ufe20-\\ufe2f",If="\\u20d0-\\u20ff",Hu=Sf+Cf+If,Yu="\\u2700-\\u27bf",Gu="a-z\\xdf-\\xf6\\xf8-\\xff",Ef="\\xac\\xb1\\xd7\\xf7",Af="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Tf="\\u2000-\\u206f",Pf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Vu="A-Z\\xc0-\\xd6\\xd8-\\xde",Qu="\\ufe0e\\ufe0f",Xu=Ef+Af+Tf+Pf,Ni="['’]",Ff="["+Br+"]",Ku="["+Xu+"]",Dr="["+Hu+"]",Ju="\\d+",Mf="["+Yu+"]",ju="["+Gu+"]",Zu="[^"+Br+Xu+Ju+Yu+Gu+Vu+"]",zi="\\ud83c[\\udffb-\\udfff]",Of="(?:"+Dr+"|"+zi+")",ea="[^"+Br+"]",Wi="(?:\\ud83c[\\udde6-\\uddff]){2}",qi="[\\ud800-\\udbff][\\udc00-\\udfff]",Hn="["+Vu+"]",ta="\\u200d",na="(?:"+ju+"|"+Zu+")",Lf="(?:"+Hn+"|"+Zu+")",ra="(?:"+Ni+"(?:d|ll|m|re|s|t|ve))?",ia="(?:"+Ni+"(?:D|LL|M|RE|S|T|VE))?",oa=Of+"?",ua="["+Qu+"]?",Rf="(?:"+ta+"(?:"+[ea,Wi,qi].join("|")+")"+ua+oa+")*",Bf="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Df="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",aa=ua+oa+Rf,$f="(?:"+[Mf,Wi,qi].join("|")+")"+aa,Nf="(?:"+[ea+Dr+"?",Dr,Wi,qi,Ff].join("|")+")",zf=RegExp(Ni,"g"),Wf=RegExp(Dr,"g"),Ui=RegExp(zi+"(?="+zi+")|"+Nf+aa,"g"),qf=RegExp([Hn+"?"+ju+"+"+ra+"(?="+[Ku,Hn,"$"].join("|")+")",Lf+"+"+ia+"(?="+[Ku,Hn+na,"$"].join("|")+")",Hn+"?"+na+"+"+ra,Hn+"+"+ia,Df,Bf,Ju,$f].join("|"),"g"),Uf=RegExp("["+ta+Br+Hu+Qu+"]"),Hf=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Yf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Gf=-1,Se={};Se[ue]=Se[de]=Se[He]=Se[Tt]=Se[st]=Se[Kt]=Se[Jt]=Se[Ne]=Se[$t]=!0,Se[Qe]=Se[Pe]=Se[$]=Se[Xe]=Se[J]=Se[mt]=Se[Xt]=Se[qn]=Se[ut]=Se[cn]=Se[yt]=Se[fn]=Se[at]=Se[En]=Se[An]=!1;var ve={};ve[Qe]=ve[Pe]=ve[$]=ve[J]=ve[Xe]=ve[mt]=ve[ue]=ve[de]=ve[He]=ve[Tt]=ve[st]=ve[ut]=ve[cn]=ve[yt]=ve[fn]=ve[at]=ve[En]=ve[Un]=ve[Kt]=ve[Jt]=ve[Ne]=ve[$t]=!0,ve[Xt]=ve[qn]=ve[An]=!1;var Vf={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Qf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xf={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Kf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Jf=parseFloat,jf=parseInt,sa=typeof ki=="object"&&ki&&ki.Object===Object&&ki,Zf=typeof self=="object"&&self&&self.Object===Object&&self,ze=sa||Zf||Function("return this")(),Hi=i&&!i.nodeType&&i,Tn=Hi&&!0&&t&&!t.nodeType&&t,la=Tn&&Tn.exports===Hi,Yi=la&&sa.process,wt=(function(){try{var C=Tn&&Tn.require&&Tn.require("util").types;return C||Yi&&Yi.binding&&Yi.binding("util")}catch{}})(),ca=wt&&wt.isArrayBuffer,fa=wt&&wt.isDate,ha=wt&&wt.isMap,da=wt&&wt.isRegExp,pa=wt&&wt.isSet,ga=wt&&wt.isTypedArray;function lt(C,P,A){switch(A.length){case 0:return C.call(P);case 1:return C.call(P,A[0]);case 2:return C.call(P,A[0],A[1]);case 3:return C.call(P,A[0],A[1],A[2])}return C.apply(P,A)}function eh(C,P,A,U){for(var ne=-1,pe=C==null?0:C.length;++ne<pe;){var Re=C[ne];P(U,Re,A(Re),C)}return U}function xt(C,P){for(var A=-1,U=C==null?0:C.length;++A<U&&P(C[A],A,C)!==!1;);return C}function th(C,P){for(var A=C==null?0:C.length;A--&&P(C[A],A,C)!==!1;);return C}function ma(C,P){for(var A=-1,U=C==null?0:C.length;++A<U;)if(!P(C[A],A,C))return!1;return!0}function hn(C,P){for(var A=-1,U=C==null?0:C.length,ne=0,pe=[];++A<U;){var Re=C[A];P(Re,A,C)&&(pe[ne++]=Re)}return pe}function $r(C,P){var A=C==null?0:C.length;return!!A&&Yn(C,P,0)>-1}function Gi(C,P,A){for(var U=-1,ne=C==null?0:C.length;++U<ne;)if(A(P,C[U]))return!0;return!1}function Ie(C,P){for(var A=-1,U=C==null?0:C.length,ne=Array(U);++A<U;)ne[A]=P(C[A],A,C);return ne}function dn(C,P){for(var A=-1,U=P.length,ne=C.length;++A<U;)C[ne+A]=P[A];return C}function Vi(C,P,A,U){var ne=-1,pe=C==null?0:C.length;for(U&&pe&&(A=C[++ne]);++ne<pe;)A=P(A,C[ne],ne,C);return A}function nh(C,P,A,U){var ne=C==null?0:C.length;for(U&&ne&&(A=C[--ne]);ne--;)A=P(A,C[ne],ne,C);return A}function Qi(C,P){for(var A=-1,U=C==null?0:C.length;++A<U;)if(P(C[A],A,C))return!0;return!1}var rh=Xi("length");function ih(C){return C.split("")}function oh(C){return C.match(df)||[]}function ya(C,P,A){var U;return A(C,function(ne,pe,Re){if(P(ne,pe,Re))return U=pe,!1}),U}function Nr(C,P,A,U){for(var ne=C.length,pe=A+(U?1:-1);U?pe--:++pe<ne;)if(P(C[pe],pe,C))return pe;return-1}function Yn(C,P,A){return P===P?yh(C,P,A):Nr(C,wa,A)}function uh(C,P,A,U){for(var ne=A-1,pe=C.length;++ne<pe;)if(U(C[ne],P))return ne;return-1}function wa(C){return C!==C}function xa(C,P){var A=C==null?0:C.length;return A?Ji(C,P)/A:_}function Xi(C){return function(P){return P==null?n:P[C]}}function Ki(C){return function(P){return C==null?n:C[P]}}function ba(C,P,A,U,ne){return ne(C,function(pe,Re,be){A=U?(U=!1,pe):P(A,pe,Re,be)}),A}function ah(C,P){var A=C.length;for(C.sort(P);A--;)C[A]=C[A].value;return C}function Ji(C,P){for(var A,U=-1,ne=C.length;++U<ne;){var pe=P(C[U]);pe!==n&&(A=A===n?pe:A+pe)}return A}function ji(C,P){for(var A=-1,U=Array(C);++A<C;)U[A]=P(A);return U}function sh(C,P){return Ie(P,function(A){return[A,C[A]]})}function va(C){return C&&C.slice(0,Ca(C)+1).replace($i,"")}function ct(C){return function(P){return C(P)}}function Zi(C,P){return Ie(P,function(A){return C[A]})}function ar(C,P){return C.has(P)}function _a(C,P){for(var A=-1,U=C.length;++A<U&&Yn(P,C[A],0)>-1;);return A}function ka(C,P){for(var A=C.length;A--&&Yn(P,C[A],0)>-1;);return A}function lh(C,P){for(var A=C.length,U=0;A--;)C[A]===P&&++U;return U}var ch=Ki(Vf),fh=Ki(Qf);function hh(C){return"\\"+Kf[C]}function dh(C,P){return C==null?n:C[P]}function Gn(C){return Uf.test(C)}function ph(C){return Hf.test(C)}function gh(C){for(var P,A=[];!(P=C.next()).done;)A.push(P.value);return A}function eo(C){var P=-1,A=Array(C.size);return C.forEach(function(U,ne){A[++P]=[ne,U]}),A}function Sa(C,P){return function(A){return C(P(A))}}function pn(C,P){for(var A=-1,U=C.length,ne=0,pe=[];++A<U;){var Re=C[A];(Re===P||Re===p)&&(C[A]=p,pe[ne++]=A)}return pe}function zr(C){var P=-1,A=Array(C.size);return C.forEach(function(U){A[++P]=U}),A}function mh(C){var P=-1,A=Array(C.size);return C.forEach(function(U){A[++P]=[U,U]}),A}function yh(C,P,A){for(var U=A-1,ne=C.length;++U<ne;)if(C[U]===P)return U;return-1}function wh(C,P,A){for(var U=A+1;U--;)if(C[U]===P)return U;return U}function Vn(C){return Gn(C)?bh(C):rh(C)}function Ft(C){return Gn(C)?vh(C):ih(C)}function Ca(C){for(var P=C.length;P--&&lf.test(C.charAt(P)););return P}var xh=Ki(Xf);function bh(C){for(var P=Ui.lastIndex=0;Ui.test(C);)++P;return P}function vh(C){return C.match(Ui)||[]}function _h(C){return C.match(qf)||[]}var kh=(function C(P){P=P==null?ze:Qn.defaults(ze.Object(),P,Qn.pick(ze,Yf));var A=P.Array,U=P.Date,ne=P.Error,pe=P.Function,Re=P.Math,be=P.Object,to=P.RegExp,Sh=P.String,bt=P.TypeError,Wr=A.prototype,Ch=pe.prototype,Xn=be.prototype,qr=P["__core-js_shared__"],Ur=Ch.toString,we=Xn.hasOwnProperty,Ih=0,Ia=(function(){var e=/[^.]+$/.exec(qr&&qr.keys&&qr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})(),Hr=Xn.toString,Eh=Ur.call(be),Ah=ze._,Th=to("^"+Ur.call(we).replace(Di,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Yr=la?P.Buffer:n,gn=P.Symbol,Gr=P.Uint8Array,Ea=Yr?Yr.allocUnsafe:n,Vr=Sa(be.getPrototypeOf,be),Aa=be.create,Ta=Xn.propertyIsEnumerable,Qr=Wr.splice,Pa=gn?gn.isConcatSpreadable:n,sr=gn?gn.iterator:n,Pn=gn?gn.toStringTag:n,Xr=(function(){try{var e=Rn(be,"defineProperty");return e({},"",{}),e}catch{}})(),Ph=P.clearTimeout!==ze.clearTimeout&&P.clearTimeout,Fh=U&&U.now!==ze.Date.now&&U.now,Mh=P.setTimeout!==ze.setTimeout&&P.setTimeout,Kr=Re.ceil,Jr=Re.floor,no=be.getOwnPropertySymbols,Oh=Yr?Yr.isBuffer:n,Fa=P.isFinite,Lh=Wr.join,Rh=Sa(be.keys,be),Be=Re.max,qe=Re.min,Bh=U.now,Dh=P.parseInt,Ma=Re.random,$h=Wr.reverse,ro=Rn(P,"DataView"),lr=Rn(P,"Map"),io=Rn(P,"Promise"),Kn=Rn(P,"Set"),cr=Rn(P,"WeakMap"),fr=Rn(be,"create"),jr=cr&&new cr,Jn={},Nh=Bn(ro),zh=Bn(lr),Wh=Bn(io),qh=Bn(Kn),Uh=Bn(cr),Zr=gn?gn.prototype:n,hr=Zr?Zr.valueOf:n,Oa=Zr?Zr.toString:n;function y(e){if(Fe(e)&&!re(e)&&!(e instanceof le)){if(e instanceof vt)return e;if(we.call(e,"__wrapped__"))return Ls(e)}return new vt(e)}var jn=(function(){function e(){}return function(r){if(!Ae(r))return{};if(Aa)return Aa(r);e.prototype=r;var a=new e;return e.prototype=n,a}})();function ei(){}function vt(e,r){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=n}y.templateSettings={escape:nf,evaluate:rf,interpolate:qu,variable:"",imports:{_:y}},y.prototype=ei.prototype,y.prototype.constructor=y,vt.prototype=jn(ei.prototype),vt.prototype.constructor=vt;function le(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Te,this.__views__=[]}function Hh(){var e=new le(this.__wrapped__);return e.__actions__=Ke(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ke(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ke(this.__views__),e}function Yh(){if(this.__filtered__){var e=new le(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Gh(){var e=this.__wrapped__.value(),r=this.__dir__,a=re(e),f=r<0,m=a?e.length:0,x=ip(0,m,this.__views__),v=x.start,k=x.end,I=k-v,O=f?k:v-1,L=this.__iteratees__,D=L.length,z=0,Y=qe(I,this.__takeCount__);if(!a||!f&&m==I&&Y==I)return rs(e,this.__actions__);var j=[];e:for(;I--&&z<Y;){O+=r;for(var oe=-1,Z=e[O];++oe<D;){var se=L[oe],fe=se.iteratee,dt=se.type,Ve=fe(Z);if(dt==ce)Z=Ve;else if(!Ve){if(dt==Ee)continue e;break e}}j[z++]=Z}return j}le.prototype=jn(ei.prototype),le.prototype.constructor=le;function Fn(e){var r=-1,a=e==null?0:e.length;for(this.clear();++r<a;){var f=e[r];this.set(f[0],f[1])}}function Vh(){this.__data__=fr?fr(null):{},this.size=0}function Qh(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}function Xh(e){var r=this.__data__;if(fr){var a=r[e];return a===h?n:a}return we.call(r,e)?r[e]:n}function Kh(e){var r=this.__data__;return fr?r[e]!==n:we.call(r,e)}function Jh(e,r){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=fr&&r===n?h:r,this}Fn.prototype.clear=Vh,Fn.prototype.delete=Qh,Fn.prototype.get=Xh,Fn.prototype.has=Kh,Fn.prototype.set=Jh;function jt(e){var r=-1,a=e==null?0:e.length;for(this.clear();++r<a;){var f=e[r];this.set(f[0],f[1])}}function jh(){this.__data__=[],this.size=0}function Zh(e){var r=this.__data__,a=ti(r,e);if(a<0)return!1;var f=r.length-1;return a==f?r.pop():Qr.call(r,a,1),--this.size,!0}function ed(e){var r=this.__data__,a=ti(r,e);return a<0?n:r[a][1]}function td(e){return ti(this.__data__,e)>-1}function nd(e,r){var a=this.__data__,f=ti(a,e);return f<0?(++this.size,a.push([e,r])):a[f][1]=r,this}jt.prototype.clear=jh,jt.prototype.delete=Zh,jt.prototype.get=ed,jt.prototype.has=td,jt.prototype.set=nd;function Zt(e){var r=-1,a=e==null?0:e.length;for(this.clear();++r<a;){var f=e[r];this.set(f[0],f[1])}}function rd(){this.size=0,this.__data__={hash:new Fn,map:new(lr||jt),string:new Fn}}function id(e){var r=di(this,e).delete(e);return this.size-=r?1:0,r}function od(e){return di(this,e).get(e)}function ud(e){return di(this,e).has(e)}function ad(e,r){var a=di(this,e),f=a.size;return a.set(e,r),this.size+=a.size==f?0:1,this}Zt.prototype.clear=rd,Zt.prototype.delete=id,Zt.prototype.get=od,Zt.prototype.has=ud,Zt.prototype.set=ad;function Mn(e){var r=-1,a=e==null?0:e.length;for(this.__data__=new Zt;++r<a;)this.add(e[r])}function sd(e){return this.__data__.set(e,h),this}function ld(e){return this.__data__.has(e)}Mn.prototype.add=Mn.prototype.push=sd,Mn.prototype.has=ld;function Mt(e){var r=this.__data__=new jt(e);this.size=r.size}function cd(){this.__data__=new jt,this.size=0}function fd(e){var r=this.__data__,a=r.delete(e);return this.size=r.size,a}function hd(e){return this.__data__.get(e)}function dd(e){return this.__data__.has(e)}function pd(e,r){var a=this.__data__;if(a instanceof jt){var f=a.__data__;if(!lr||f.length<u-1)return f.push([e,r]),this.size=++a.size,this;a=this.__data__=new Zt(f)}return a.set(e,r),this.size=a.size,this}Mt.prototype.clear=cd,Mt.prototype.delete=fd,Mt.prototype.get=hd,Mt.prototype.has=dd,Mt.prototype.set=pd;function La(e,r){var a=re(e),f=!a&&Dn(e),m=!a&&!f&&bn(e),x=!a&&!f&&!m&&nr(e),v=a||f||m||x,k=v?ji(e.length,Sh):[],I=k.length;for(var O in e)(r||we.call(e,O))&&!(v&&(O=="length"||m&&(O=="offset"||O=="parent")||x&&(O=="buffer"||O=="byteLength"||O=="byteOffset")||rn(O,I)))&&k.push(O);return k}function Ra(e){var r=e.length;return r?e[mo(0,r-1)]:n}function gd(e,r){return pi(Ke(e),On(r,0,e.length))}function md(e){return pi(Ke(e))}function oo(e,r,a){(a!==n&&!Ot(e[r],a)||a===n&&!(r in e))&&en(e,r,a)}function dr(e,r,a){var f=e[r];(!(we.call(e,r)&&Ot(f,a))||a===n&&!(r in e))&&en(e,r,a)}function ti(e,r){for(var a=e.length;a--;)if(Ot(e[a][0],r))return a;return-1}function yd(e,r,a,f){return mn(e,function(m,x,v){r(f,m,a(m),v)}),f}function Ba(e,r){return e&&zt(r,$e(r),e)}function wd(e,r){return e&&zt(r,je(r),e)}function en(e,r,a){r=="__proto__"&&Xr?Xr(e,r,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[r]=a}function uo(e,r){for(var a=-1,f=r.length,m=A(f),x=e==null;++a<f;)m[a]=x?n:Wo(e,r[a]);return m}function On(e,r,a){return e===e&&(a!==n&&(e=e<=a?e:a),r!==n&&(e=e>=r?e:r)),e}function _t(e,r,a,f,m,x){var v,k=r&g,I=r&b,O=r&w;if(a&&(v=m?a(e,f,m,x):a(e)),v!==n)return v;if(!Ae(e))return e;var L=re(e);if(L){if(v=up(e),!k)return Ke(e,v)}else{var D=Ue(e),z=D==qn||D==Fr;if(bn(e))return us(e,k);if(D==yt||D==Qe||z&&!m){if(v=I||z?{}:Cs(e),!k)return I?Xd(e,wd(v,e)):Qd(e,Ba(v,e))}else{if(!ve[D])return m?e:{};v=ap(e,D,k)}}x||(x=new Mt);var Y=x.get(e);if(Y)return Y;x.set(e,v),el(e)?e.forEach(function(Z){v.add(_t(Z,r,a,Z,e,x))}):js(e)&&e.forEach(function(Z,se){v.set(se,_t(Z,r,a,se,e,x))});var j=O?I?Eo:Io:I?je:$e,oe=L?n:j(e);return xt(oe||e,function(Z,se){oe&&(se=Z,Z=e[se]),dr(v,se,_t(Z,r,a,se,e,x))}),v}function xd(e){var r=$e(e);return function(a){return Da(a,e,r)}}function Da(e,r,a){var f=a.length;if(e==null)return!f;for(e=be(e);f--;){var m=a[f],x=r[m],v=e[m];if(v===n&&!(m in e)||!x(v))return!1}return!0}function $a(e,r,a){if(typeof e!="function")throw new bt(l);return br(function(){e.apply(n,a)},r)}function pr(e,r,a,f){var m=-1,x=$r,v=!0,k=e.length,I=[],O=r.length;if(!k)return I;a&&(r=Ie(r,ct(a))),f?(x=Gi,v=!1):r.length>=u&&(x=ar,v=!1,r=new Mn(r));e:for(;++m<k;){var L=e[m],D=a==null?L:a(L);if(L=f||L!==0?L:0,v&&D===D){for(var z=O;z--;)if(r[z]===D)continue e;I.push(L)}else x(r,D,f)||I.push(L)}return I}var mn=fs(Nt),Na=fs(so,!0);function bd(e,r){var a=!0;return mn(e,function(f,m,x){return a=!!r(f,m,x),a}),a}function ni(e,r,a){for(var f=-1,m=e.length;++f<m;){var x=e[f],v=r(x);if(v!=null&&(k===n?v===v&&!ht(v):a(v,k)))var k=v,I=x}return I}function vd(e,r,a,f){var m=e.length;for(a=ie(a),a<0&&(a=-a>m?0:m+a),f=f===n||f>m?m:ie(f),f<0&&(f+=m),f=a>f?0:nl(f);a<f;)e[a++]=r;return e}function za(e,r){var a=[];return mn(e,function(f,m,x){r(f,m,x)&&a.push(f)}),a}function We(e,r,a,f,m){var x=-1,v=e.length;for(a||(a=lp),m||(m=[]);++x<v;){var k=e[x];r>0&&a(k)?r>1?We(k,r-1,a,f,m):dn(m,k):f||(m[m.length]=k)}return m}var ao=hs(),Wa=hs(!0);function Nt(e,r){return e&&ao(e,r,$e)}function so(e,r){return e&&Wa(e,r,$e)}function ri(e,r){return hn(r,function(a){return on(e[a])})}function Ln(e,r){r=wn(r,e);for(var a=0,f=r.length;e!=null&&a<f;)e=e[Wt(r[a++])];return a&&a==f?e:n}function qa(e,r,a){var f=r(e);return re(e)?f:dn(f,a(e))}function Ye(e){return e==null?e===n?Bi:Mr:Pn&&Pn in be(e)?rp(e):mp(e)}function lo(e,r){return e>r}function _d(e,r){return e!=null&&we.call(e,r)}function kd(e,r){return e!=null&&r in be(e)}function Sd(e,r,a){return e>=qe(r,a)&&e<Be(r,a)}function co(e,r,a){for(var f=a?Gi:$r,m=e[0].length,x=e.length,v=x,k=A(x),I=1/0,O=[];v--;){var L=e[v];v&&r&&(L=Ie(L,ct(r))),I=qe(L.length,I),k[v]=!a&&(r||m>=120&&L.length>=120)?new Mn(v&&L):n}L=e[0];var D=-1,z=k[0];e:for(;++D<m&&O.length<I;){var Y=L[D],j=r?r(Y):Y;if(Y=a||Y!==0?Y:0,!(z?ar(z,j):f(O,j,a))){for(v=x;--v;){var oe=k[v];if(!(oe?ar(oe,j):f(e[v],j,a)))continue e}z&&z.push(j),O.push(Y)}}return O}function Cd(e,r,a,f){return Nt(e,function(m,x,v){r(f,a(m),x,v)}),f}function gr(e,r,a){r=wn(r,e),e=Ts(e,r);var f=e==null?e:e[Wt(St(r))];return f==null?n:lt(f,e,a)}function Ua(e){return Fe(e)&&Ye(e)==Qe}function Id(e){return Fe(e)&&Ye(e)==$}function Ed(e){return Fe(e)&&Ye(e)==mt}function mr(e,r,a,f,m){return e===r?!0:e==null||r==null||!Fe(e)&&!Fe(r)?e!==e&&r!==r:Ad(e,r,a,f,mr,m)}function Ad(e,r,a,f,m,x){var v=re(e),k=re(r),I=v?Pe:Ue(e),O=k?Pe:Ue(r);I=I==Qe?yt:I,O=O==Qe?yt:O;var L=I==yt,D=O==yt,z=I==O;if(z&&bn(e)){if(!bn(r))return!1;v=!0,L=!1}if(z&&!L)return x||(x=new Mt),v||nr(e)?_s(e,r,a,f,m,x):tp(e,r,I,a,f,m,x);if(!(a&T)){var Y=L&&we.call(e,"__wrapped__"),j=D&&we.call(r,"__wrapped__");if(Y||j){var oe=Y?e.value():e,Z=j?r.value():r;return x||(x=new Mt),m(oe,Z,a,f,x)}}return z?(x||(x=new Mt),np(e,r,a,f,m,x)):!1}function Td(e){return Fe(e)&&Ue(e)==ut}function fo(e,r,a,f){var m=a.length,x=m,v=!f;if(e==null)return!x;for(e=be(e);m--;){var k=a[m];if(v&&k[2]?k[1]!==e[k[0]]:!(k[0]in e))return!1}for(;++m<x;){k=a[m];var I=k[0],O=e[I],L=k[1];if(v&&k[2]){if(O===n&&!(I in e))return!1}else{var D=new Mt;if(f)var z=f(O,L,I,e,r,D);if(!(z===n?mr(L,O,T|R,f,D):z))return!1}}return!0}function Ha(e){if(!Ae(e)||fp(e))return!1;var r=on(e)?Th:xf;return r.test(Bn(e))}function Pd(e){return Fe(e)&&Ye(e)==fn}function Fd(e){return Fe(e)&&Ue(e)==at}function Md(e){return Fe(e)&&bi(e.length)&&!!Se[Ye(e)]}function Ya(e){return typeof e=="function"?e:e==null?Ze:typeof e=="object"?re(e)?Qa(e[0],e[1]):Va(e):dl(e)}function ho(e){if(!xr(e))return Rh(e);var r=[];for(var a in be(e))we.call(e,a)&&a!="constructor"&&r.push(a);return r}function Od(e){if(!Ae(e))return gp(e);var r=xr(e),a=[];for(var f in e)f=="constructor"&&(r||!we.call(e,f))||a.push(f);return a}function po(e,r){return e<r}function Ga(e,r){var a=-1,f=Je(e)?A(e.length):[];return mn(e,function(m,x,v){f[++a]=r(m,x,v)}),f}function Va(e){var r=To(e);return r.length==1&&r[0][2]?Es(r[0][0],r[0][1]):function(a){return a===e||fo(a,e,r)}}function Qa(e,r){return Fo(e)&&Is(r)?Es(Wt(e),r):function(a){var f=Wo(a,e);return f===n&&f===r?qo(a,e):mr(r,f,T|R)}}function ii(e,r,a,f,m){e!==r&&ao(r,function(x,v){if(m||(m=new Mt),Ae(x))Ld(e,r,v,a,ii,f,m);else{var k=f?f(Oo(e,v),x,v+"",e,r,m):n;k===n&&(k=x),oo(e,v,k)}},je)}function Ld(e,r,a,f,m,x,v){var k=Oo(e,a),I=Oo(r,a),O=v.get(I);if(O){oo(e,a,O);return}var L=x?x(k,I,a+"",e,r,v):n,D=L===n;if(D){var z=re(I),Y=!z&&bn(I),j=!z&&!Y&&nr(I);L=I,z||Y||j?re(k)?L=k:Me(k)?L=Ke(k):Y?(D=!1,L=us(I,!0)):j?(D=!1,L=as(I,!0)):L=[]:vr(I)||Dn(I)?(L=k,Dn(k)?L=rl(k):(!Ae(k)||on(k))&&(L=Cs(I))):D=!1}D&&(v.set(I,L),m(L,I,f,x,v),v.delete(I)),oo(e,a,L)}function Xa(e,r){var a=e.length;if(a)return r+=r<0?a:0,rn(r,a)?e[r]:n}function Ka(e,r,a){r.length?r=Ie(r,function(x){return re(x)?function(v){return Ln(v,x.length===1?x[0]:x)}:x}):r=[Ze];var f=-1;r=Ie(r,ct(K()));var m=Ga(e,function(x,v,k){var I=Ie(r,function(O){return O(x)});return{criteria:I,index:++f,value:x}});return ah(m,function(x,v){return Vd(x,v,a)})}function Rd(e,r){return Ja(e,r,function(a,f){return qo(e,f)})}function Ja(e,r,a){for(var f=-1,m=r.length,x={};++f<m;){var v=r[f],k=Ln(e,v);a(k,v)&&yr(x,wn(v,e),k)}return x}function Bd(e){return function(r){return Ln(r,e)}}function go(e,r,a,f){var m=f?uh:Yn,x=-1,v=r.length,k=e;for(e===r&&(r=Ke(r)),a&&(k=Ie(e,ct(a)));++x<v;)for(var I=0,O=r[x],L=a?a(O):O;(I=m(k,L,I,f))>-1;)k!==e&&Qr.call(k,I,1),Qr.call(e,I,1);return e}function ja(e,r){for(var a=e?r.length:0,f=a-1;a--;){var m=r[a];if(a==f||m!==x){var x=m;rn(m)?Qr.call(e,m,1):xo(e,m)}}return e}function mo(e,r){return e+Jr(Ma()*(r-e+1))}function Dd(e,r,a,f){for(var m=-1,x=Be(Kr((r-e)/(a||1)),0),v=A(x);x--;)v[f?x:++m]=e,e+=a;return v}function yo(e,r){var a="";if(!e||r<1||r>Le)return a;do r%2&&(a+=e),r=Jr(r/2),r&&(e+=e);while(r);return a}function ae(e,r){return Lo(As(e,r,Ze),e+"")}function $d(e){return Ra(rr(e))}function Nd(e,r){var a=rr(e);return pi(a,On(r,0,a.length))}function yr(e,r,a,f){if(!Ae(e))return e;r=wn(r,e);for(var m=-1,x=r.length,v=x-1,k=e;k!=null&&++m<x;){var I=Wt(r[m]),O=a;if(I==="__proto__"||I==="constructor"||I==="prototype")return e;if(m!=v){var L=k[I];O=f?f(L,I,k):n,O===n&&(O=Ae(L)?L:rn(r[m+1])?[]:{})}dr(k,I,O),k=k[I]}return e}var Za=jr?function(e,r){return jr.set(e,r),e}:Ze,zd=Xr?function(e,r){return Xr(e,"toString",{configurable:!0,enumerable:!1,value:Ho(r),writable:!0})}:Ze;function Wd(e){return pi(rr(e))}function kt(e,r,a){var f=-1,m=e.length;r<0&&(r=-r>m?0:m+r),a=a>m?m:a,a<0&&(a+=m),m=r>a?0:a-r>>>0,r>>>=0;for(var x=A(m);++f<m;)x[f]=e[f+r];return x}function qd(e,r){var a;return mn(e,function(f,m,x){return a=r(f,m,x),!a}),!!a}function oi(e,r,a){var f=0,m=e==null?f:e.length;if(typeof r=="number"&&r===r&&m<=S){for(;f<m;){var x=f+m>>>1,v=e[x];v!==null&&!ht(v)&&(a?v<=r:v<r)?f=x+1:m=x}return m}return wo(e,r,Ze,a)}function wo(e,r,a,f){var m=0,x=e==null?0:e.length;if(x===0)return 0;r=a(r);for(var v=r!==r,k=r===null,I=ht(r),O=r===n;m<x;){var L=Jr((m+x)/2),D=a(e[L]),z=D!==n,Y=D===null,j=D===D,oe=ht(D);if(v)var Z=f||j;else O?Z=j&&(f||z):k?Z=j&&z&&(f||!Y):I?Z=j&&z&&!Y&&(f||!oe):Y||oe?Z=!1:Z=f?D<=r:D<r;Z?m=L+1:x=L}return qe(x,At)}function es(e,r){for(var a=-1,f=e.length,m=0,x=[];++a<f;){var v=e[a],k=r?r(v):v;if(!a||!Ot(k,I)){var I=k;x[m++]=v===0?0:v}}return x}function ts(e){return typeof e=="number"?e:ht(e)?_:+e}function ft(e){if(typeof e=="string")return e;if(re(e))return Ie(e,ft)+"";if(ht(e))return Oa?Oa.call(e):"";var r=e+"";return r=="0"&&1/e==-ke?"-0":r}function yn(e,r,a){var f=-1,m=$r,x=e.length,v=!0,k=[],I=k;if(a)v=!1,m=Gi;else if(x>=u){var O=r?null:Zd(e);if(O)return zr(O);v=!1,m=ar,I=new Mn}else I=r?[]:k;e:for(;++f<x;){var L=e[f],D=r?r(L):L;if(L=a||L!==0?L:0,v&&D===D){for(var z=I.length;z--;)if(I[z]===D)continue e;r&&I.push(D),k.push(L)}else m(I,D,a)||(I!==k&&I.push(D),k.push(L))}return k}function xo(e,r){return r=wn(r,e),e=Ts(e,r),e==null||delete e[Wt(St(r))]}function ns(e,r,a,f){return yr(e,r,a(Ln(e,r)),f)}function ui(e,r,a,f){for(var m=e.length,x=f?m:-1;(f?x--:++x<m)&&r(e[x],x,e););return a?kt(e,f?0:x,f?x+1:m):kt(e,f?x+1:0,f?m:x)}function rs(e,r){var a=e;return a instanceof le&&(a=a.value()),Vi(r,function(f,m){return m.func.apply(m.thisArg,dn([f],m.args))},a)}function bo(e,r,a){var f=e.length;if(f<2)return f?yn(e[0]):[];for(var m=-1,x=A(f);++m<f;)for(var v=e[m],k=-1;++k<f;)k!=m&&(x[m]=pr(x[m]||v,e[k],r,a));return yn(We(x,1),r,a)}function is(e,r,a){for(var f=-1,m=e.length,x=r.length,v={};++f<m;){var k=f<x?r[f]:n;a(v,e[f],k)}return v}function vo(e){return Me(e)?e:[]}function _o(e){return typeof e=="function"?e:Ze}function wn(e,r){return re(e)?e:Fo(e,r)?[e]:Os(ye(e))}var Ud=ae;function xn(e,r,a){var f=e.length;return a=a===n?f:a,!r&&a>=f?e:kt(e,r,a)}var os=Ph||function(e){return ze.clearTimeout(e)};function us(e,r){if(r)return e.slice();var a=e.length,f=Ea?Ea(a):new e.constructor(a);return e.copy(f),f}function ko(e){var r=new e.constructor(e.byteLength);return new Gr(r).set(new Gr(e)),r}function Hd(e,r){var a=r?ko(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}function Yd(e){var r=new e.constructor(e.source,Uu.exec(e));return r.lastIndex=e.lastIndex,r}function Gd(e){return hr?be(hr.call(e)):{}}function as(e,r){var a=r?ko(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}function ss(e,r){if(e!==r){var a=e!==n,f=e===null,m=e===e,x=ht(e),v=r!==n,k=r===null,I=r===r,O=ht(r);if(!k&&!O&&!x&&e>r||x&&v&&I&&!k&&!O||f&&v&&I||!a&&I||!m)return 1;if(!f&&!x&&!O&&e<r||O&&a&&m&&!f&&!x||k&&a&&m||!v&&m||!I)return-1}return 0}function Vd(e,r,a){for(var f=-1,m=e.criteria,x=r.criteria,v=m.length,k=a.length;++f<v;){var I=ss(m[f],x[f]);if(I){if(f>=k)return I;var O=a[f];return I*(O=="desc"?-1:1)}}return e.index-r.index}function ls(e,r,a,f){for(var m=-1,x=e.length,v=a.length,k=-1,I=r.length,O=Be(x-v,0),L=A(I+O),D=!f;++k<I;)L[k]=r[k];for(;++m<v;)(D||m<x)&&(L[a[m]]=e[m]);for(;O--;)L[k++]=e[m++];return L}function cs(e,r,a,f){for(var m=-1,x=e.length,v=-1,k=a.length,I=-1,O=r.length,L=Be(x-k,0),D=A(L+O),z=!f;++m<L;)D[m]=e[m];for(var Y=m;++I<O;)D[Y+I]=r[I];for(;++v<k;)(z||m<x)&&(D[Y+a[v]]=e[m++]);return D}function Ke(e,r){var a=-1,f=e.length;for(r||(r=A(f));++a<f;)r[a]=e[a];return r}function zt(e,r,a,f){var m=!a;a||(a={});for(var x=-1,v=r.length;++x<v;){var k=r[x],I=f?f(a[k],e[k],k,a,e):n;I===n&&(I=e[k]),m?en(a,k,I):dr(a,k,I)}return a}function Qd(e,r){return zt(e,Po(e),r)}function Xd(e,r){return zt(e,ks(e),r)}function ai(e,r){return function(a,f){var m=re(a)?eh:yd,x=r?r():{};return m(a,e,K(f,2),x)}}function Zn(e){return ae(function(r,a){var f=-1,m=a.length,x=m>1?a[m-1]:n,v=m>2?a[2]:n;for(x=e.length>3&&typeof x=="function"?(m--,x):n,v&&Ge(a[0],a[1],v)&&(x=m<3?n:x,m=1),r=be(r);++f<m;){var k=a[f];k&&e(r,k,f,x)}return r})}function fs(e,r){return function(a,f){if(a==null)return a;if(!Je(a))return e(a,f);for(var m=a.length,x=r?m:-1,v=be(a);(r?x--:++x<m)&&f(v[x],x,v)!==!1;);return a}}function hs(e){return function(r,a,f){for(var m=-1,x=be(r),v=f(r),k=v.length;k--;){var I=v[e?k:++m];if(a(x[I],I,x)===!1)break}return r}}function Kd(e,r,a){var f=r&q,m=wr(e);function x(){var v=this&&this!==ze&&this instanceof x?m:e;return v.apply(f?a:this,arguments)}return x}function ds(e){return function(r){r=ye(r);var a=Gn(r)?Ft(r):n,f=a?a[0]:r.charAt(0),m=a?xn(a,1).join(""):r.slice(1);return f[e]()+m}}function er(e){return function(r){return Vi(fl(cl(r).replace(zf,"")),e,"")}}function wr(e){return function(){var r=arguments;switch(r.length){case 0:return new e;case 1:return new e(r[0]);case 2:return new e(r[0],r[1]);case 3:return new e(r[0],r[1],r[2]);case 4:return new e(r[0],r[1],r[2],r[3]);case 5:return new e(r[0],r[1],r[2],r[3],r[4]);case 6:return new e(r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return new e(r[0],r[1],r[2],r[3],r[4],r[5],r[6])}var a=jn(e.prototype),f=e.apply(a,r);return Ae(f)?f:a}}function Jd(e,r,a){var f=wr(e);function m(){for(var x=arguments.length,v=A(x),k=x,I=tr(m);k--;)v[k]=arguments[k];var O=x<3&&v[0]!==I&&v[x-1]!==I?[]:pn(v,I);if(x-=O.length,x<a)return ws(e,r,si,m.placeholder,n,v,O,n,n,a-x);var L=this&&this!==ze&&this instanceof m?f:e;return lt(L,this,v)}return m}function ps(e){return function(r,a,f){var m=be(r);if(!Je(r)){var x=K(a,3);r=$e(r),a=function(k){return x(m[k],k,m)}}var v=e(r,a,f);return v>-1?m[x?r[v]:v]:n}}function gs(e){return nn(function(r){var a=r.length,f=a,m=vt.prototype.thru;for(e&&r.reverse();f--;){var x=r[f];if(typeof x!="function")throw new bt(l);if(m&&!v&&hi(x)=="wrapper")var v=new vt([],!0)}for(f=v?f:a;++f<a;){x=r[f];var k=hi(x),I=k=="wrapper"?Ao(x):n;I&&Mo(I[0])&&I[1]==(H|W|M|V)&&!I[4].length&&I[9]==1?v=v[hi(I[0])].apply(v,I[3]):v=x.length==1&&Mo(x)?v[k]():v.thru(x)}return function(){var O=arguments,L=O[0];if(v&&O.length==1&&re(L))return v.plant(L).value();for(var D=0,z=a?r[D].apply(this,O):L;++D<a;)z=r[D].call(this,z);return z}})}function si(e,r,a,f,m,x,v,k,I,O){var L=r&H,D=r&q,z=r&B,Y=r&(W|N),j=r&ee,oe=z?n:wr(e);function Z(){for(var se=arguments.length,fe=A(se),dt=se;dt--;)fe[dt]=arguments[dt];if(Y)var Ve=tr(Z),pt=lh(fe,Ve);if(f&&(fe=ls(fe,f,m,Y)),x&&(fe=cs(fe,x,v,Y)),se-=pt,Y&&se<O){var Oe=pn(fe,Ve);return ws(e,r,si,Z.placeholder,a,fe,Oe,k,I,O-se)}var Lt=D?a:this,an=z?Lt[e]:e;return se=fe.length,k?fe=yp(fe,k):j&&se>1&&fe.reverse(),L&&I<se&&(fe.length=I),this&&this!==ze&&this instanceof Z&&(an=oe||wr(an)),an.apply(Lt,fe)}return Z}function ms(e,r){return function(a,f){return Cd(a,e,r(f),{})}}function li(e,r){return function(a,f){var m;if(a===n&&f===n)return r;if(a!==n&&(m=a),f!==n){if(m===n)return f;typeof a=="string"||typeof f=="string"?(a=ft(a),f=ft(f)):(a=ts(a),f=ts(f)),m=e(a,f)}return m}}function So(e){return nn(function(r){return r=Ie(r,ct(K())),ae(function(a){var f=this;return e(r,function(m){return lt(m,f,a)})})})}function ci(e,r){r=r===n?" ":ft(r);var a=r.length;if(a<2)return a?yo(r,e):r;var f=yo(r,Kr(e/Vn(r)));return Gn(r)?xn(Ft(f),0,e).join(""):f.slice(0,e)}function jd(e,r,a,f){var m=r&q,x=wr(e);function v(){for(var k=-1,I=arguments.length,O=-1,L=f.length,D=A(L+I),z=this&&this!==ze&&this instanceof v?x:e;++O<L;)D[O]=f[O];for(;I--;)D[O++]=arguments[++k];return lt(z,m?a:this,D)}return v}function ys(e){return function(r,a,f){return f&&typeof f!="number"&&Ge(r,a,f)&&(a=f=n),r=un(r),a===n?(a=r,r=0):a=un(a),f=f===n?r<a?1:-1:un(f),Dd(r,a,f,e)}}function fi(e){return function(r,a){return typeof r=="string"&&typeof a=="string"||(r=Ct(r),a=Ct(a)),e(r,a)}}function ws(e,r,a,f,m,x,v,k,I,O){var L=r&W,D=L?v:n,z=L?n:v,Y=L?x:n,j=L?n:x;r|=L?M:E,r&=~(L?E:M),r&X||(r&=-4);var oe=[e,r,m,Y,D,j,z,k,I,O],Z=a.apply(n,oe);return Mo(e)&&Ps(Z,oe),Z.placeholder=f,Fs(Z,e,r)}function Co(e){var r=Re[e];return function(a,f){if(a=Ct(a),f=f==null?0:qe(ie(f),292),f&&Fa(a)){var m=(ye(a)+"e").split("e"),x=r(m[0]+"e"+(+m[1]+f));return m=(ye(x)+"e").split("e"),+(m[0]+"e"+(+m[1]-f))}return r(a)}}var Zd=Kn&&1/zr(new Kn([,-0]))[1]==ke?function(e){return new Kn(e)}:Vo;function xs(e){return function(r){var a=Ue(r);return a==ut?eo(r):a==at?mh(r):sh(r,e(r))}}function tn(e,r,a,f,m,x,v,k){var I=r&B;if(!I&&typeof e!="function")throw new bt(l);var O=f?f.length:0;if(O||(r&=-97,f=m=n),v=v===n?v:Be(ie(v),0),k=k===n?k:ie(k),O-=m?m.length:0,r&E){var L=f,D=m;f=m=n}var z=I?n:Ao(e),Y=[e,r,a,f,m,L,D,x,v,k];if(z&&pp(Y,z),e=Y[0],r=Y[1],a=Y[2],f=Y[3],m=Y[4],k=Y[9]=Y[9]===n?I?0:e.length:Be(Y[9]-O,0),!k&&r&(W|N)&&(r&=-25),!r||r==q)var j=Kd(e,r,a);else r==W||r==N?j=Jd(e,r,k):(r==M||r==(q|M))&&!m.length?j=jd(e,r,a,f):j=si.apply(n,Y);var oe=z?Za:Ps;return Fs(oe(j,Y),e,r)}function bs(e,r,a,f){return e===n||Ot(e,Xn[a])&&!we.call(f,a)?r:e}function vs(e,r,a,f,m,x){return Ae(e)&&Ae(r)&&(x.set(r,e),ii(e,r,n,vs,x),x.delete(r)),e}function ep(e){return vr(e)?n:e}function _s(e,r,a,f,m,x){var v=a&T,k=e.length,I=r.length;if(k!=I&&!(v&&I>k))return!1;var O=x.get(e),L=x.get(r);if(O&&L)return O==r&&L==e;var D=-1,z=!0,Y=a&R?new Mn:n;for(x.set(e,r),x.set(r,e);++D<k;){var j=e[D],oe=r[D];if(f)var Z=v?f(oe,j,D,r,e,x):f(j,oe,D,e,r,x);if(Z!==n){if(Z)continue;z=!1;break}if(Y){if(!Qi(r,function(se,fe){if(!ar(Y,fe)&&(j===se||m(j,se,a,f,x)))return Y.push(fe)})){z=!1;break}}else if(!(j===oe||m(j,oe,a,f,x))){z=!1;break}}return x.delete(e),x.delete(r),z}function tp(e,r,a,f,m,x,v){switch(a){case J:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case $:return!(e.byteLength!=r.byteLength||!x(new Gr(e),new Gr(r)));case Xe:case mt:case cn:return Ot(+e,+r);case Xt:return e.name==r.name&&e.message==r.message;case fn:case En:return e==r+"";case ut:var k=eo;case at:var I=f&T;if(k||(k=zr),e.size!=r.size&&!I)return!1;var O=v.get(e);if(O)return O==r;f|=R,v.set(e,r);var L=_s(k(e),k(r),f,m,x,v);return v.delete(e),L;case Un:if(hr)return hr.call(e)==hr.call(r)}return!1}function np(e,r,a,f,m,x){var v=a&T,k=Io(e),I=k.length,O=Io(r),L=O.length;if(I!=L&&!v)return!1;for(var D=I;D--;){var z=k[D];if(!(v?z in r:we.call(r,z)))return!1}var Y=x.get(e),j=x.get(r);if(Y&&j)return Y==r&&j==e;var oe=!0;x.set(e,r),x.set(r,e);for(var Z=v;++D<I;){z=k[D];var se=e[z],fe=r[z];if(f)var dt=v?f(fe,se,z,r,e,x):f(se,fe,z,e,r,x);if(!(dt===n?se===fe||m(se,fe,a,f,x):dt)){oe=!1;break}Z||(Z=z=="constructor")}if(oe&&!Z){var Ve=e.constructor,pt=r.constructor;Ve!=pt&&"constructor"in e&&"constructor"in r&&!(typeof Ve=="function"&&Ve instanceof Ve&&typeof pt=="function"&&pt instanceof pt)&&(oe=!1)}return x.delete(e),x.delete(r),oe}function nn(e){return Lo(As(e,n,Ds),e+"")}function Io(e){return qa(e,$e,Po)}function Eo(e){return qa(e,je,ks)}var Ao=jr?function(e){return jr.get(e)}:Vo;function hi(e){for(var r=e.name+"",a=Jn[r],f=we.call(Jn,r)?a.length:0;f--;){var m=a[f],x=m.func;if(x==null||x==e)return m.name}return r}function tr(e){var r=we.call(y,"placeholder")?y:e;return r.placeholder}function K(){var e=y.iteratee||Yo;return e=e===Yo?Ya:e,arguments.length?e(arguments[0],arguments[1]):e}function di(e,r){var a=e.__data__;return cp(r)?a[typeof r=="string"?"string":"hash"]:a.map}function To(e){for(var r=$e(e),a=r.length;a--;){var f=r[a],m=e[f];r[a]=[f,m,Is(m)]}return r}function Rn(e,r){var a=dh(e,r);return Ha(a)?a:n}function rp(e){var r=we.call(e,Pn),a=e[Pn];try{e[Pn]=n;var f=!0}catch{}var m=Hr.call(e);return f&&(r?e[Pn]=a:delete e[Pn]),m}var Po=no?function(e){return e==null?[]:(e=be(e),hn(no(e),function(r){return Ta.call(e,r)}))}:Qo,ks=no?function(e){for(var r=[];e;)dn(r,Po(e)),e=Vr(e);return r}:Qo,Ue=Ye;(ro&&Ue(new ro(new ArrayBuffer(1)))!=J||lr&&Ue(new lr)!=ut||io&&Ue(io.resolve())!=Or||Kn&&Ue(new Kn)!=at||cr&&Ue(new cr)!=An)&&(Ue=function(e){var r=Ye(e),a=r==yt?e.constructor:n,f=a?Bn(a):"";if(f)switch(f){case Nh:return J;case zh:return ut;case Wh:return Or;case qh:return at;case Uh:return An}return r});function ip(e,r,a){for(var f=-1,m=a.length;++f<m;){var x=a[f],v=x.size;switch(x.type){case"drop":e+=v;break;case"dropRight":r-=v;break;case"take":r=qe(r,e+v);break;case"takeRight":e=Be(e,r-v);break}}return{start:e,end:r}}function op(e){var r=e.match(ff);return r?r[1].split(hf):[]}function Ss(e,r,a){r=wn(r,e);for(var f=-1,m=r.length,x=!1;++f<m;){var v=Wt(r[f]);if(!(x=e!=null&&a(e,v)))break;e=e[v]}return x||++f!=m?x:(m=e==null?0:e.length,!!m&&bi(m)&&rn(v,m)&&(re(e)||Dn(e)))}function up(e){var r=e.length,a=new e.constructor(r);return r&&typeof e[0]=="string"&&we.call(e,"index")&&(a.index=e.index,a.input=e.input),a}function Cs(e){return typeof e.constructor=="function"&&!xr(e)?jn(Vr(e)):{}}function ap(e,r,a){var f=e.constructor;switch(r){case $:return ko(e);case Xe:case mt:return new f(+e);case J:return Hd(e,a);case ue:case de:case He:case Tt:case st:case Kt:case Jt:case Ne:case $t:return as(e,a);case ut:return new f;case cn:case En:return new f(e);case fn:return Yd(e);case at:return new f;case Un:return Gd(e)}}function sp(e,r){var a=r.length;if(!a)return e;var f=a-1;return r[f]=(a>1?"& ":"")+r[f],r=r.join(a>2?", ":" "),e.replace(cf,`{
/* [wrapped with `+r+`] */
`)}function lp(e){return re(e)||Dn(e)||!!(Pa&&e&&e[Pa])}function rn(e,r){var a=typeof e;return r=r??Le,!!r&&(a=="number"||a!="symbol"&&vf.test(e))&&e>-1&&e%1==0&&e<r}function Ge(e,r,a){if(!Ae(a))return!1;var f=typeof r;return(f=="number"?Je(a)&&rn(r,a.length):f=="string"&&r in a)?Ot(a[r],e):!1}function Fo(e,r){if(re(e))return!1;var a=typeof e;return a=="number"||a=="symbol"||a=="boolean"||e==null||ht(e)?!0:uf.test(e)||!of.test(e)||r!=null&&e in be(r)}function cp(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}function Mo(e){var r=hi(e),a=y[r];if(typeof a!="function"||!(r in le.prototype))return!1;if(e===a)return!0;var f=Ao(a);return!!f&&e===f[0]}function fp(e){return!!Ia&&Ia in e}var hp=qr?on:Xo;function xr(e){var r=e&&e.constructor,a=typeof r=="function"&&r.prototype||Xn;return e===a}function Is(e){return e===e&&!Ae(e)}function Es(e,r){return function(a){return a==null?!1:a[e]===r&&(r!==n||e in be(a))}}function dp(e){var r=wi(e,function(f){return a.size===d&&a.clear(),f}),a=r.cache;return r}function pp(e,r){var a=e[1],f=r[1],m=a|f,x=m<(q|B|H),v=f==H&&a==W||f==H&&a==V&&e[7].length<=r[8]||f==(H|V)&&r[7].length<=r[8]&&a==W;if(!(x||v))return e;f&q&&(e[2]=r[2],m|=a&q?0:X);var k=r[3];if(k){var I=e[3];e[3]=I?ls(I,k,r[4]):k,e[4]=I?pn(e[3],p):r[4]}return k=r[5],k&&(I=e[5],e[5]=I?cs(I,k,r[6]):k,e[6]=I?pn(e[5],p):r[6]),k=r[7],k&&(e[7]=k),f&H&&(e[8]=e[8]==null?r[8]:qe(e[8],r[8])),e[9]==null&&(e[9]=r[9]),e[0]=r[0],e[1]=m,e}function gp(e){var r=[];if(e!=null)for(var a in be(e))r.push(a);return r}function mp(e){return Hr.call(e)}function As(e,r,a){return r=Be(r===n?e.length-1:r,0),function(){for(var f=arguments,m=-1,x=Be(f.length-r,0),v=A(x);++m<x;)v[m]=f[r+m];m=-1;for(var k=A(r+1);++m<r;)k[m]=f[m];return k[r]=a(v),lt(e,this,k)}}function Ts(e,r){return r.length<2?e:Ln(e,kt(r,0,-1))}function yp(e,r){for(var a=e.length,f=qe(r.length,a),m=Ke(e);f--;){var x=r[f];e[f]=rn(x,a)?m[x]:n}return e}function Oo(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}var Ps=Ms(Za),br=Mh||function(e,r){return ze.setTimeout(e,r)},Lo=Ms(zd);function Fs(e,r,a){var f=r+"";return Lo(e,sp(f,wp(op(f),a)))}function Ms(e){var r=0,a=0;return function(){var f=Bh(),m=me-(f-a);if(a=f,m>0){if(++r>=G)return arguments[0]}else r=0;return e.apply(n,arguments)}}function pi(e,r){var a=-1,f=e.length,m=f-1;for(r=r===n?f:r;++a<r;){var x=mo(a,m),v=e[x];e[x]=e[a],e[a]=v}return e.length=r,e}var Os=dp(function(e){var r=[];return e.charCodeAt(0)===46&&r.push(""),e.replace(af,function(a,f,m,x){r.push(m?x.replace(gf,"$1"):f||a)}),r});function Wt(e){if(typeof e=="string"||ht(e))return e;var r=e+"";return r=="0"&&1/e==-ke?"-0":r}function Bn(e){if(e!=null){try{return Ur.call(e)}catch{}try{return e+""}catch{}}return""}function wp(e,r){return xt(ot,function(a){var f="_."+a[0];r&a[1]&&!$r(e,f)&&e.push(f)}),e.sort()}function Ls(e){if(e instanceof le)return e.clone();var r=new vt(e.__wrapped__,e.__chain__);return r.__actions__=Ke(e.__actions__),r.__index__=e.__index__,r.__values__=e.__values__,r}function xp(e,r,a){(a?Ge(e,r,a):r===n)?r=1:r=Be(ie(r),0);var f=e==null?0:e.length;if(!f||r<1)return[];for(var m=0,x=0,v=A(Kr(f/r));m<f;)v[x++]=kt(e,m,m+=r);return v}function bp(e){for(var r=-1,a=e==null?0:e.length,f=0,m=[];++r<a;){var x=e[r];x&&(m[f++]=x)}return m}function vp(){var e=arguments.length;if(!e)return[];for(var r=A(e-1),a=arguments[0],f=e;f--;)r[f-1]=arguments[f];return dn(re(a)?Ke(a):[a],We(r,1))}var _p=ae(function(e,r){return Me(e)?pr(e,We(r,1,Me,!0)):[]}),kp=ae(function(e,r){var a=St(r);return Me(a)&&(a=n),Me(e)?pr(e,We(r,1,Me,!0),K(a,2)):[]}),Sp=ae(function(e,r){var a=St(r);return Me(a)&&(a=n),Me(e)?pr(e,We(r,1,Me,!0),n,a):[]});function Cp(e,r,a){var f=e==null?0:e.length;return f?(r=a||r===n?1:ie(r),kt(e,r<0?0:r,f)):[]}function Ip(e,r,a){var f=e==null?0:e.length;return f?(r=a||r===n?1:ie(r),r=f-r,kt(e,0,r<0?0:r)):[]}function Ep(e,r){return e&&e.length?ui(e,K(r,3),!0,!0):[]}function Ap(e,r){return e&&e.length?ui(e,K(r,3),!0):[]}function Tp(e,r,a,f){var m=e==null?0:e.length;return m?(a&&typeof a!="number"&&Ge(e,r,a)&&(a=0,f=m),vd(e,r,a,f)):[]}function Rs(e,r,a){var f=e==null?0:e.length;if(!f)return-1;var m=a==null?0:ie(a);return m<0&&(m=Be(f+m,0)),Nr(e,K(r,3),m)}function Bs(e,r,a){var f=e==null?0:e.length;if(!f)return-1;var m=f-1;return a!==n&&(m=ie(a),m=a<0?Be(f+m,0):qe(m,f-1)),Nr(e,K(r,3),m,!0)}function Ds(e){var r=e==null?0:e.length;return r?We(e,1):[]}function Pp(e){var r=e==null?0:e.length;return r?We(e,ke):[]}function Fp(e,r){var a=e==null?0:e.length;return a?(r=r===n?1:ie(r),We(e,r)):[]}function Mp(e){for(var r=-1,a=e==null?0:e.length,f={};++r<a;){var m=e[r];f[m[0]]=m[1]}return f}function $s(e){return e&&e.length?e[0]:n}function Op(e,r,a){var f=e==null?0:e.length;if(!f)return-1;var m=a==null?0:ie(a);return m<0&&(m=Be(f+m,0)),Yn(e,r,m)}function Lp(e){var r=e==null?0:e.length;return r?kt(e,0,-1):[]}var Rp=ae(function(e){var r=Ie(e,vo);return r.length&&r[0]===e[0]?co(r):[]}),Bp=ae(function(e){var r=St(e),a=Ie(e,vo);return r===St(a)?r=n:a.pop(),a.length&&a[0]===e[0]?co(a,K(r,2)):[]}),Dp=ae(function(e){var r=St(e),a=Ie(e,vo);return r=typeof r=="function"?r:n,r&&a.pop(),a.length&&a[0]===e[0]?co(a,n,r):[]});function $p(e,r){return e==null?"":Lh.call(e,r)}function St(e){var r=e==null?0:e.length;return r?e[r-1]:n}function Np(e,r,a){var f=e==null?0:e.length;if(!f)return-1;var m=f;return a!==n&&(m=ie(a),m=m<0?Be(f+m,0):qe(m,f-1)),r===r?wh(e,r,m):Nr(e,wa,m,!0)}function zp(e,r){return e&&e.length?Xa(e,ie(r)):n}var Wp=ae(Ns);function Ns(e,r){return e&&e.length&&r&&r.length?go(e,r):e}function qp(e,r,a){return e&&e.length&&r&&r.length?go(e,r,K(a,2)):e}function Up(e,r,a){return e&&e.length&&r&&r.length?go(e,r,n,a):e}var Hp=nn(function(e,r){var a=e==null?0:e.length,f=uo(e,r);return ja(e,Ie(r,function(m){return rn(m,a)?+m:m}).sort(ss)),f});function Yp(e,r){var a=[];if(!(e&&e.length))return a;var f=-1,m=[],x=e.length;for(r=K(r,3);++f<x;){var v=e[f];r(v,f,e)&&(a.push(v),m.push(f))}return ja(e,m),a}function Ro(e){return e==null?e:$h.call(e)}function Gp(e,r,a){var f=e==null?0:e.length;return f?(a&&typeof a!="number"&&Ge(e,r,a)?(r=0,a=f):(r=r==null?0:ie(r),a=a===n?f:ie(a)),kt(e,r,a)):[]}function Vp(e,r){return oi(e,r)}function Qp(e,r,a){return wo(e,r,K(a,2))}function Xp(e,r){var a=e==null?0:e.length;if(a){var f=oi(e,r);if(f<a&&Ot(e[f],r))return f}return-1}function Kp(e,r){return oi(e,r,!0)}function Jp(e,r,a){return wo(e,r,K(a,2),!0)}function jp(e,r){var a=e==null?0:e.length;if(a){var f=oi(e,r,!0)-1;if(Ot(e[f],r))return f}return-1}function Zp(e){return e&&e.length?es(e):[]}function eg(e,r){return e&&e.length?es(e,K(r,2)):[]}function tg(e){var r=e==null?0:e.length;return r?kt(e,1,r):[]}function ng(e,r,a){return e&&e.length?(r=a||r===n?1:ie(r),kt(e,0,r<0?0:r)):[]}function rg(e,r,a){var f=e==null?0:e.length;return f?(r=a||r===n?1:ie(r),r=f-r,kt(e,r<0?0:r,f)):[]}function ig(e,r){return e&&e.length?ui(e,K(r,3),!1,!0):[]}function og(e,r){return e&&e.length?ui(e,K(r,3)):[]}var ug=ae(function(e){return yn(We(e,1,Me,!0))}),ag=ae(function(e){var r=St(e);return Me(r)&&(r=n),yn(We(e,1,Me,!0),K(r,2))}),sg=ae(function(e){var r=St(e);return r=typeof r=="function"?r:n,yn(We(e,1,Me,!0),n,r)});function lg(e){return e&&e.length?yn(e):[]}function cg(e,r){return e&&e.length?yn(e,K(r,2)):[]}function fg(e,r){return r=typeof r=="function"?r:n,e&&e.length?yn(e,n,r):[]}function Bo(e){if(!(e&&e.length))return[];var r=0;return e=hn(e,function(a){if(Me(a))return r=Be(a.length,r),!0}),ji(r,function(a){return Ie(e,Xi(a))})}function zs(e,r){if(!(e&&e.length))return[];var a=Bo(e);return r==null?a:Ie(a,function(f){return lt(r,n,f)})}var hg=ae(function(e,r){return Me(e)?pr(e,r):[]}),dg=ae(function(e){return bo(hn(e,Me))}),pg=ae(function(e){var r=St(e);return Me(r)&&(r=n),bo(hn(e,Me),K(r,2))}),gg=ae(function(e){var r=St(e);return r=typeof r=="function"?r:n,bo(hn(e,Me),n,r)}),mg=ae(Bo);function yg(e,r){return is(e||[],r||[],dr)}function wg(e,r){return is(e||[],r||[],yr)}var xg=ae(function(e){var r=e.length,a=r>1?e[r-1]:n;return a=typeof a=="function"?(e.pop(),a):n,zs(e,a)});function Ws(e){var r=y(e);return r.__chain__=!0,r}function bg(e,r){return r(e),e}function gi(e,r){return r(e)}var vg=nn(function(e){var r=e.length,a=r?e[0]:0,f=this.__wrapped__,m=function(x){return uo(x,e)};return r>1||this.__actions__.length||!(f instanceof le)||!rn(a)?this.thru(m):(f=f.slice(a,+a+(r?1:0)),f.__actions__.push({func:gi,args:[m],thisArg:n}),new vt(f,this.__chain__).thru(function(x){return r&&!x.length&&x.push(n),x}))});function _g(){return Ws(this)}function kg(){return new vt(this.value(),this.__chain__)}function Sg(){this.__values__===n&&(this.__values__=tl(this.value()));var e=this.__index__>=this.__values__.length,r=e?n:this.__values__[this.__index__++];return{done:e,value:r}}function Cg(){return this}function Ig(e){for(var r,a=this;a instanceof ei;){var f=Ls(a);f.__index__=0,f.__values__=n,r?m.__wrapped__=f:r=f;var m=f;a=a.__wrapped__}return m.__wrapped__=e,r}function Eg(){var e=this.__wrapped__;if(e instanceof le){var r=e;return this.__actions__.length&&(r=new le(this)),r=r.reverse(),r.__actions__.push({func:gi,args:[Ro],thisArg:n}),new vt(r,this.__chain__)}return this.thru(Ro)}function Ag(){return rs(this.__wrapped__,this.__actions__)}var Tg=ai(function(e,r,a){we.call(e,a)?++e[a]:en(e,a,1)});function Pg(e,r,a){var f=re(e)?ma:bd;return a&&Ge(e,r,a)&&(r=n),f(e,K(r,3))}function Fg(e,r){var a=re(e)?hn:za;return a(e,K(r,3))}var Mg=ps(Rs),Og=ps(Bs);function Lg(e,r){return We(mi(e,r),1)}function Rg(e,r){return We(mi(e,r),ke)}function Bg(e,r,a){return a=a===n?1:ie(a),We(mi(e,r),a)}function qs(e,r){var a=re(e)?xt:mn;return a(e,K(r,3))}function Us(e,r){var a=re(e)?th:Na;return a(e,K(r,3))}var Dg=ai(function(e,r,a){we.call(e,a)?e[a].push(r):en(e,a,[r])});function $g(e,r,a,f){e=Je(e)?e:rr(e),a=a&&!f?ie(a):0;var m=e.length;return a<0&&(a=Be(m+a,0)),vi(e)?a<=m&&e.indexOf(r,a)>-1:!!m&&Yn(e,r,a)>-1}var Ng=ae(function(e,r,a){var f=-1,m=typeof r=="function",x=Je(e)?A(e.length):[];return mn(e,function(v){x[++f]=m?lt(r,v,a):gr(v,r,a)}),x}),zg=ai(function(e,r,a){en(e,a,r)});function mi(e,r){var a=re(e)?Ie:Ga;return a(e,K(r,3))}function Wg(e,r,a,f){return e==null?[]:(re(r)||(r=r==null?[]:[r]),a=f?n:a,re(a)||(a=a==null?[]:[a]),Ka(e,r,a))}var qg=ai(function(e,r,a){e[a?0:1].push(r)},function(){return[[],[]]});function Ug(e,r,a){var f=re(e)?Vi:ba,m=arguments.length<3;return f(e,K(r,4),a,m,mn)}function Hg(e,r,a){var f=re(e)?nh:ba,m=arguments.length<3;return f(e,K(r,4),a,m,Na)}function Yg(e,r){var a=re(e)?hn:za;return a(e,xi(K(r,3)))}function Gg(e){var r=re(e)?Ra:$d;return r(e)}function Vg(e,r,a){(a?Ge(e,r,a):r===n)?r=1:r=ie(r);var f=re(e)?gd:Nd;return f(e,r)}function Qg(e){var r=re(e)?md:Wd;return r(e)}function Xg(e){if(e==null)return 0;if(Je(e))return vi(e)?Vn(e):e.length;var r=Ue(e);return r==ut||r==at?e.size:ho(e).length}function Kg(e,r,a){var f=re(e)?Qi:qd;return a&&Ge(e,r,a)&&(r=n),f(e,K(r,3))}var Jg=ae(function(e,r){if(e==null)return[];var a=r.length;return a>1&&Ge(e,r[0],r[1])?r=[]:a>2&&Ge(r[0],r[1],r[2])&&(r=[r[0]]),Ka(e,We(r,1),[])}),yi=Fh||function(){return ze.Date.now()};function jg(e,r){if(typeof r!="function")throw new bt(l);return e=ie(e),function(){if(--e<1)return r.apply(this,arguments)}}function Hs(e,r,a){return r=a?n:r,r=e&&r==null?e.length:r,tn(e,H,n,n,n,n,r)}function Ys(e,r){var a;if(typeof r!="function")throw new bt(l);return e=ie(e),function(){return--e>0&&(a=r.apply(this,arguments)),e<=1&&(r=n),a}}var Do=ae(function(e,r,a){var f=q;if(a.length){var m=pn(a,tr(Do));f|=M}return tn(e,f,r,a,m)}),Gs=ae(function(e,r,a){var f=q|B;if(a.length){var m=pn(a,tr(Gs));f|=M}return tn(r,f,e,a,m)});function Vs(e,r,a){r=a?n:r;var f=tn(e,W,n,n,n,n,n,r);return f.placeholder=Vs.placeholder,f}function Qs(e,r,a){r=a?n:r;var f=tn(e,N,n,n,n,n,n,r);return f.placeholder=Qs.placeholder,f}function Xs(e,r,a){var f,m,x,v,k,I,O=0,L=!1,D=!1,z=!0;if(typeof e!="function")throw new bt(l);r=Ct(r)||0,Ae(a)&&(L=!!a.leading,D="maxWait"in a,x=D?Be(Ct(a.maxWait)||0,r):x,z="trailing"in a?!!a.trailing:z);function Y(Oe){var Lt=f,an=m;return f=m=n,O=Oe,v=e.apply(an,Lt),v}function j(Oe){return O=Oe,k=br(se,r),L?Y(Oe):v}function oe(Oe){var Lt=Oe-I,an=Oe-O,pl=r-Lt;return D?qe(pl,x-an):pl}function Z(Oe){var Lt=Oe-I,an=Oe-O;return I===n||Lt>=r||Lt<0||D&&an>=x}function se(){var Oe=yi();if(Z(Oe))return fe(Oe);k=br(se,oe(Oe))}function fe(Oe){return k=n,z&&f?Y(Oe):(f=m=n,v)}function dt(){k!==n&&os(k),O=0,f=I=m=k=n}function Ve(){return k===n?v:fe(yi())}function pt(){var Oe=yi(),Lt=Z(Oe);if(f=arguments,m=this,I=Oe,Lt){if(k===n)return j(I);if(D)return os(k),k=br(se,r),Y(I)}return k===n&&(k=br(se,r)),v}return pt.cancel=dt,pt.flush=Ve,pt}var Zg=ae(function(e,r){return $a(e,1,r)}),em=ae(function(e,r,a){return $a(e,Ct(r)||0,a)});function tm(e){return tn(e,ee)}function wi(e,r){if(typeof e!="function"||r!=null&&typeof r!="function")throw new bt(l);var a=function(){var f=arguments,m=r?r.apply(this,f):f[0],x=a.cache;if(x.has(m))return x.get(m);var v=e.apply(this,f);return a.cache=x.set(m,v)||x,v};return a.cache=new(wi.Cache||Zt),a}wi.Cache=Zt;function xi(e){if(typeof e!="function")throw new bt(l);return function(){var r=arguments;switch(r.length){case 0:return!e.call(this);case 1:return!e.call(this,r[0]);case 2:return!e.call(this,r[0],r[1]);case 3:return!e.call(this,r[0],r[1],r[2])}return!e.apply(this,r)}}function nm(e){return Ys(2,e)}var rm=Ud(function(e,r){r=r.length==1&&re(r[0])?Ie(r[0],ct(K())):Ie(We(r,1),ct(K()));var a=r.length;return ae(function(f){for(var m=-1,x=qe(f.length,a);++m<x;)f[m]=r[m].call(this,f[m]);return lt(e,this,f)})}),$o=ae(function(e,r){var a=pn(r,tr($o));return tn(e,M,n,r,a)}),Ks=ae(function(e,r){var a=pn(r,tr(Ks));return tn(e,E,n,r,a)}),im=nn(function(e,r){return tn(e,V,n,n,n,r)});function om(e,r){if(typeof e!="function")throw new bt(l);return r=r===n?r:ie(r),ae(e,r)}function um(e,r){if(typeof e!="function")throw new bt(l);return r=r==null?0:Be(ie(r),0),ae(function(a){var f=a[r],m=xn(a,0,r);return f&&dn(m,f),lt(e,this,m)})}function am(e,r,a){var f=!0,m=!0;if(typeof e!="function")throw new bt(l);return Ae(a)&&(f="leading"in a?!!a.leading:f,m="trailing"in a?!!a.trailing:m),Xs(e,r,{leading:f,maxWait:r,trailing:m})}function sm(e){return Hs(e,1)}function lm(e,r){return $o(_o(r),e)}function cm(){if(!arguments.length)return[];var e=arguments[0];return re(e)?e:[e]}function fm(e){return _t(e,w)}function hm(e,r){return r=typeof r=="function"?r:n,_t(e,w,r)}function dm(e){return _t(e,g|w)}function pm(e,r){return r=typeof r=="function"?r:n,_t(e,g|w,r)}function gm(e,r){return r==null||Da(e,r,$e(r))}function Ot(e,r){return e===r||e!==e&&r!==r}var mm=fi(lo),ym=fi(function(e,r){return e>=r}),Dn=Ua((function(){return arguments})())?Ua:function(e){return Fe(e)&&we.call(e,"callee")&&!Ta.call(e,"callee")},re=A.isArray,wm=ca?ct(ca):Id;function Je(e){return e!=null&&bi(e.length)&&!on(e)}function Me(e){return Fe(e)&&Je(e)}function xm(e){return e===!0||e===!1||Fe(e)&&Ye(e)==Xe}var bn=Oh||Xo,bm=fa?ct(fa):Ed;function vm(e){return Fe(e)&&e.nodeType===1&&!vr(e)}function _m(e){if(e==null)return!0;if(Je(e)&&(re(e)||typeof e=="string"||typeof e.splice=="function"||bn(e)||nr(e)||Dn(e)))return!e.length;var r=Ue(e);if(r==ut||r==at)return!e.size;if(xr(e))return!ho(e).length;for(var a in e)if(we.call(e,a))return!1;return!0}function km(e,r){return mr(e,r)}function Sm(e,r,a){a=typeof a=="function"?a:n;var f=a?a(e,r):n;return f===n?mr(e,r,n,a):!!f}function No(e){if(!Fe(e))return!1;var r=Ye(e);return r==Xt||r==ln||typeof e.message=="string"&&typeof e.name=="string"&&!vr(e)}function Cm(e){return typeof e=="number"&&Fa(e)}function on(e){if(!Ae(e))return!1;var r=Ye(e);return r==qn||r==Fr||r==In||r==Lr}function Js(e){return typeof e=="number"&&e==ie(e)}function bi(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Le}function Ae(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}function Fe(e){return e!=null&&typeof e=="object"}var js=ha?ct(ha):Td;function Im(e,r){return e===r||fo(e,r,To(r))}function Em(e,r,a){return a=typeof a=="function"?a:n,fo(e,r,To(r),a)}function Am(e){return Zs(e)&&e!=+e}function Tm(e){if(hp(e))throw new ne(s);return Ha(e)}function Pm(e){return e===null}function Fm(e){return e==null}function Zs(e){return typeof e=="number"||Fe(e)&&Ye(e)==cn}function vr(e){if(!Fe(e)||Ye(e)!=yt)return!1;var r=Vr(e);if(r===null)return!0;var a=we.call(r,"constructor")&&r.constructor;return typeof a=="function"&&a instanceof a&&Ur.call(a)==Eh}var zo=da?ct(da):Pd;function Mm(e){return Js(e)&&e>=-Le&&e<=Le}var el=pa?ct(pa):Fd;function vi(e){return typeof e=="string"||!re(e)&&Fe(e)&&Ye(e)==En}function ht(e){return typeof e=="symbol"||Fe(e)&&Ye(e)==Un}var nr=ga?ct(ga):Md;function Om(e){return e===n}function Lm(e){return Fe(e)&&Ue(e)==An}function Rm(e){return Fe(e)&&Ye(e)==F}var Bm=fi(po),Dm=fi(function(e,r){return e<=r});function tl(e){if(!e)return[];if(Je(e))return vi(e)?Ft(e):Ke(e);if(sr&&e[sr])return gh(e[sr]());var r=Ue(e),a=r==ut?eo:r==at?zr:rr;return a(e)}function un(e){if(!e)return e===0?e:0;if(e=Ct(e),e===ke||e===-ke){var r=e<0?-1:1;return r*Et}return e===e?e:0}function ie(e){var r=un(e),a=r%1;return r===r?a?r-a:r:0}function nl(e){return e?On(ie(e),0,Te):0}function Ct(e){if(typeof e=="number")return e;if(ht(e))return _;if(Ae(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=Ae(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=va(e);var a=wf.test(e);return a||bf.test(e)?jf(e.slice(2),a?2:8):yf.test(e)?_:+e}function rl(e){return zt(e,je(e))}function $m(e){return e?On(ie(e),-Le,Le):e===0?e:0}function ye(e){return e==null?"":ft(e)}var Nm=Zn(function(e,r){if(xr(r)||Je(r)){zt(r,$e(r),e);return}for(var a in r)we.call(r,a)&&dr(e,a,r[a])}),il=Zn(function(e,r){zt(r,je(r),e)}),_i=Zn(function(e,r,a,f){zt(r,je(r),e,f)}),zm=Zn(function(e,r,a,f){zt(r,$e(r),e,f)}),Wm=nn(uo);function qm(e,r){var a=jn(e);return r==null?a:Ba(a,r)}var Um=ae(function(e,r){e=be(e);var a=-1,f=r.length,m=f>2?r[2]:n;for(m&&Ge(r[0],r[1],m)&&(f=1);++a<f;)for(var x=r[a],v=je(x),k=-1,I=v.length;++k<I;){var O=v[k],L=e[O];(L===n||Ot(L,Xn[O])&&!we.call(e,O))&&(e[O]=x[O])}return e}),Hm=ae(function(e){return e.push(n,vs),lt(ol,n,e)});function Ym(e,r){return ya(e,K(r,3),Nt)}function Gm(e,r){return ya(e,K(r,3),so)}function Vm(e,r){return e==null?e:ao(e,K(r,3),je)}function Qm(e,r){return e==null?e:Wa(e,K(r,3),je)}function Xm(e,r){return e&&Nt(e,K(r,3))}function Km(e,r){return e&&so(e,K(r,3))}function Jm(e){return e==null?[]:ri(e,$e(e))}function jm(e){return e==null?[]:ri(e,je(e))}function Wo(e,r,a){var f=e==null?n:Ln(e,r);return f===n?a:f}function Zm(e,r){return e!=null&&Ss(e,r,_d)}function qo(e,r){return e!=null&&Ss(e,r,kd)}var e1=ms(function(e,r,a){r!=null&&typeof r.toString!="function"&&(r=Hr.call(r)),e[r]=a},Ho(Ze)),t1=ms(function(e,r,a){r!=null&&typeof r.toString!="function"&&(r=Hr.call(r)),we.call(e,r)?e[r].push(a):e[r]=[a]},K),n1=ae(gr);function $e(e){return Je(e)?La(e):ho(e)}function je(e){return Je(e)?La(e,!0):Od(e)}function r1(e,r){var a={};return r=K(r,3),Nt(e,function(f,m,x){en(a,r(f,m,x),f)}),a}function i1(e,r){var a={};return r=K(r,3),Nt(e,function(f,m,x){en(a,m,r(f,m,x))}),a}var o1=Zn(function(e,r,a){ii(e,r,a)}),ol=Zn(function(e,r,a,f){ii(e,r,a,f)}),u1=nn(function(e,r){var a={};if(e==null)return a;var f=!1;r=Ie(r,function(x){return x=wn(x,e),f||(f=x.length>1),x}),zt(e,Eo(e),a),f&&(a=_t(a,g|b|w,ep));for(var m=r.length;m--;)xo(a,r[m]);return a});function a1(e,r){return ul(e,xi(K(r)))}var s1=nn(function(e,r){return e==null?{}:Rd(e,r)});function ul(e,r){if(e==null)return{};var a=Ie(Eo(e),function(f){return[f]});return r=K(r),Ja(e,a,function(f,m){return r(f,m[0])})}function l1(e,r,a){r=wn(r,e);var f=-1,m=r.length;for(m||(m=1,e=n);++f<m;){var x=e==null?n:e[Wt(r[f])];x===n&&(f=m,x=a),e=on(x)?x.call(e):x}return e}function c1(e,r,a){return e==null?e:yr(e,r,a)}function f1(e,r,a,f){return f=typeof f=="function"?f:n,e==null?e:yr(e,r,a,f)}var al=xs($e),sl=xs(je);function h1(e,r,a){var f=re(e),m=f||bn(e)||nr(e);if(r=K(r,4),a==null){var x=e&&e.constructor;m?a=f?new x:[]:Ae(e)?a=on(x)?jn(Vr(e)):{}:a={}}return(m?xt:Nt)(e,function(v,k,I){return r(a,v,k,I)}),a}function d1(e,r){return e==null?!0:xo(e,r)}function p1(e,r,a){return e==null?e:ns(e,r,_o(a))}function g1(e,r,a,f){return f=typeof f=="function"?f:n,e==null?e:ns(e,r,_o(a),f)}function rr(e){return e==null?[]:Zi(e,$e(e))}function m1(e){return e==null?[]:Zi(e,je(e))}function y1(e,r,a){return a===n&&(a=r,r=n),a!==n&&(a=Ct(a),a=a===a?a:0),r!==n&&(r=Ct(r),r=r===r?r:0),On(Ct(e),r,a)}function w1(e,r,a){return r=un(r),a===n?(a=r,r=0):a=un(a),e=Ct(e),Sd(e,r,a)}function x1(e,r,a){if(a&&typeof a!="boolean"&&Ge(e,r,a)&&(r=a=n),a===n&&(typeof r=="boolean"?(a=r,r=n):typeof e=="boolean"&&(a=e,e=n)),e===n&&r===n?(e=0,r=1):(e=un(e),r===n?(r=e,e=0):r=un(r)),e>r){var f=e;e=r,r=f}if(a||e%1||r%1){var m=Ma();return qe(e+m*(r-e+Jf("1e-"+((m+"").length-1))),r)}return mo(e,r)}var b1=er(function(e,r,a){return r=r.toLowerCase(),e+(a?ll(r):r)});function ll(e){return Uo(ye(e).toLowerCase())}function cl(e){return e=ye(e),e&&e.replace(_f,ch).replace(Wf,"")}function v1(e,r,a){e=ye(e),r=ft(r);var f=e.length;a=a===n?f:On(ie(a),0,f);var m=a;return a-=r.length,a>=0&&e.slice(a,m)==r}function _1(e){return e=ye(e),e&&tf.test(e)?e.replace(Wu,fh):e}function k1(e){return e=ye(e),e&&sf.test(e)?e.replace(Di,"\\$&"):e}var S1=er(function(e,r,a){return e+(a?"-":"")+r.toLowerCase()}),C1=er(function(e,r,a){return e+(a?" ":"")+r.toLowerCase()}),I1=ds("toLowerCase");function E1(e,r,a){e=ye(e),r=ie(r);var f=r?Vn(e):0;if(!r||f>=r)return e;var m=(r-f)/2;return ci(Jr(m),a)+e+ci(Kr(m),a)}function A1(e,r,a){e=ye(e),r=ie(r);var f=r?Vn(e):0;return r&&f<r?e+ci(r-f,a):e}function T1(e,r,a){e=ye(e),r=ie(r);var f=r?Vn(e):0;return r&&f<r?ci(r-f,a)+e:e}function P1(e,r,a){return a||r==null?r=0:r&&(r=+r),Dh(ye(e).replace($i,""),r||0)}function F1(e,r,a){return(a?Ge(e,r,a):r===n)?r=1:r=ie(r),yo(ye(e),r)}function M1(){var e=arguments,r=ye(e[0]);return e.length<3?r:r.replace(e[1],e[2])}var O1=er(function(e,r,a){return e+(a?"_":"")+r.toLowerCase()});function L1(e,r,a){return a&&typeof a!="number"&&Ge(e,r,a)&&(r=a=n),a=a===n?Te:a>>>0,a?(e=ye(e),e&&(typeof r=="string"||r!=null&&!zo(r))&&(r=ft(r),!r&&Gn(e))?xn(Ft(e),0,a):e.split(r,a)):[]}var R1=er(function(e,r,a){return e+(a?" ":"")+Uo(r)});function B1(e,r,a){return e=ye(e),a=a==null?0:On(ie(a),0,e.length),r=ft(r),e.slice(a,a+r.length)==r}function D1(e,r,a){var f=y.templateSettings;a&&Ge(e,r,a)&&(r=n),e=ye(e),r=_i({},r,f,bs);var m=_i({},r.imports,f.imports,bs),x=$e(m),v=Zi(m,x),k,I,O=0,L=r.interpolate||Rr,D="__p += '",z=to((r.escape||Rr).source+"|"+L.source+"|"+(L===qu?mf:Rr).source+"|"+(r.evaluate||Rr).source+"|$","g"),Y="//# sourceURL="+(we.call(r,"sourceURL")?(r.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Gf+"]")+`
`;e.replace(z,function(Z,se,fe,dt,Ve,pt){return fe||(fe=dt),D+=e.slice(O,pt).replace(kf,hh),se&&(k=!0,D+=`' +
__e(`+se+`) +
'`),Ve&&(I=!0,D+=`';
`+Ve+`;
__p += '`),fe&&(D+=`' +
((__t = (`+fe+`)) == null ? '' : __t) +
'`),O=pt+Z.length,Z}),D+=`';
`;var j=we.call(r,"variable")&&r.variable;if(!j)D=`with (obj) {
`+D+`
}
`;else if(pf.test(j))throw new ne(c);D=(I?D.replace(Pt,""):D).replace(jc,"$1").replace(Zc,"$1;"),D="function("+(j||"obj")+`) {
`+(j?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(k?", __e = _.escape":"")+(I?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+D+`return __p
}`;var oe=hl(function(){return pe(x,Y+"return "+D).apply(n,v)});if(oe.source=D,No(oe))throw oe;return oe}function $1(e){return ye(e).toLowerCase()}function N1(e){return ye(e).toUpperCase()}function z1(e,r,a){if(e=ye(e),e&&(a||r===n))return va(e);if(!e||!(r=ft(r)))return e;var f=Ft(e),m=Ft(r),x=_a(f,m),v=ka(f,m)+1;return xn(f,x,v).join("")}function W1(e,r,a){if(e=ye(e),e&&(a||r===n))return e.slice(0,Ca(e)+1);if(!e||!(r=ft(r)))return e;var f=Ft(e),m=ka(f,Ft(r))+1;return xn(f,0,m).join("")}function q1(e,r,a){if(e=ye(e),e&&(a||r===n))return e.replace($i,"");if(!e||!(r=ft(r)))return e;var f=Ft(e),m=_a(f,Ft(r));return xn(f,m).join("")}function U1(e,r){var a=he,f=Q;if(Ae(r)){var m="separator"in r?r.separator:m;a="length"in r?ie(r.length):a,f="omission"in r?ft(r.omission):f}e=ye(e);var x=e.length;if(Gn(e)){var v=Ft(e);x=v.length}if(a>=x)return e;var k=a-Vn(f);if(k<1)return f;var I=v?xn(v,0,k).join(""):e.slice(0,k);if(m===n)return I+f;if(v&&(k+=I.length-k),zo(m)){if(e.slice(k).search(m)){var O,L=I;for(m.global||(m=to(m.source,ye(Uu.exec(m))+"g")),m.lastIndex=0;O=m.exec(L);)var D=O.index;I=I.slice(0,D===n?k:D)}}else if(e.indexOf(ft(m),k)!=k){var z=I.lastIndexOf(m);z>-1&&(I=I.slice(0,z))}return I+f}function H1(e){return e=ye(e),e&&ef.test(e)?e.replace(zu,xh):e}var Y1=er(function(e,r,a){return e+(a?" ":"")+r.toUpperCase()}),Uo=ds("toUpperCase");function fl(e,r,a){return e=ye(e),r=a?n:r,r===n?ph(e)?_h(e):oh(e):e.match(r)||[]}var hl=ae(function(e,r){try{return lt(e,n,r)}catch(a){return No(a)?a:new ne(a)}}),G1=nn(function(e,r){return xt(r,function(a){a=Wt(a),en(e,a,Do(e[a],e))}),e});function V1(e){var r=e==null?0:e.length,a=K();return e=r?Ie(e,function(f){if(typeof f[1]!="function")throw new bt(l);return[a(f[0]),f[1]]}):[],ae(function(f){for(var m=-1;++m<r;){var x=e[m];if(lt(x[0],this,f))return lt(x[1],this,f)}})}function Q1(e){return xd(_t(e,g))}function Ho(e){return function(){return e}}function X1(e,r){return e==null||e!==e?r:e}var K1=gs(),J1=gs(!0);function Ze(e){return e}function Yo(e){return Ya(typeof e=="function"?e:_t(e,g))}function j1(e){return Va(_t(e,g))}function Z1(e,r){return Qa(e,_t(r,g))}var e0=ae(function(e,r){return function(a){return gr(a,e,r)}}),t0=ae(function(e,r){return function(a){return gr(e,a,r)}});function Go(e,r,a){var f=$e(r),m=ri(r,f);a==null&&!(Ae(r)&&(m.length||!f.length))&&(a=r,r=e,e=this,m=ri(r,$e(r)));var x=!(Ae(a)&&"chain"in a)||!!a.chain,v=on(e);return xt(m,function(k){var I=r[k];e[k]=I,v&&(e.prototype[k]=function(){var O=this.__chain__;if(x||O){var L=e(this.__wrapped__),D=L.__actions__=Ke(this.__actions__);return D.push({func:I,args:arguments,thisArg:e}),L.__chain__=O,L}return I.apply(e,dn([this.value()],arguments))})}),e}function n0(){return ze._===this&&(ze._=Ah),this}function Vo(){}function r0(e){return e=ie(e),ae(function(r){return Xa(r,e)})}var i0=So(Ie),o0=So(ma),u0=So(Qi);function dl(e){return Fo(e)?Xi(Wt(e)):Bd(e)}function a0(e){return function(r){return e==null?n:Ln(e,r)}}var s0=ys(),l0=ys(!0);function Qo(){return[]}function Xo(){return!1}function c0(){return{}}function f0(){return""}function h0(){return!0}function d0(e,r){if(e=ie(e),e<1||e>Le)return[];var a=Te,f=qe(e,Te);r=K(r),e-=Te;for(var m=ji(f,r);++a<e;)r(a);return m}function p0(e){return re(e)?Ie(e,Wt):ht(e)?[e]:Ke(Os(ye(e)))}function g0(e){var r=++Ih;return ye(e)+r}var m0=li(function(e,r){return e+r},0),y0=Co("ceil"),w0=li(function(e,r){return e/r},1),x0=Co("floor");function b0(e){return e&&e.length?ni(e,Ze,lo):n}function v0(e,r){return e&&e.length?ni(e,K(r,2),lo):n}function _0(e){return xa(e,Ze)}function k0(e,r){return xa(e,K(r,2))}function S0(e){return e&&e.length?ni(e,Ze,po):n}function C0(e,r){return e&&e.length?ni(e,K(r,2),po):n}var I0=li(function(e,r){return e*r},1),E0=Co("round"),A0=li(function(e,r){return e-r},0);function T0(e){return e&&e.length?Ji(e,Ze):0}function P0(e,r){return e&&e.length?Ji(e,K(r,2)):0}return y.after=jg,y.ary=Hs,y.assign=Nm,y.assignIn=il,y.assignInWith=_i,y.assignWith=zm,y.at=Wm,y.before=Ys,y.bind=Do,y.bindAll=G1,y.bindKey=Gs,y.castArray=cm,y.chain=Ws,y.chunk=xp,y.compact=bp,y.concat=vp,y.cond=V1,y.conforms=Q1,y.constant=Ho,y.countBy=Tg,y.create=qm,y.curry=Vs,y.curryRight=Qs,y.debounce=Xs,y.defaults=Um,y.defaultsDeep=Hm,y.defer=Zg,y.delay=em,y.difference=_p,y.differenceBy=kp,y.differenceWith=Sp,y.drop=Cp,y.dropRight=Ip,y.dropRightWhile=Ep,y.dropWhile=Ap,y.fill=Tp,y.filter=Fg,y.flatMap=Lg,y.flatMapDeep=Rg,y.flatMapDepth=Bg,y.flatten=Ds,y.flattenDeep=Pp,y.flattenDepth=Fp,y.flip=tm,y.flow=K1,y.flowRight=J1,y.fromPairs=Mp,y.functions=Jm,y.functionsIn=jm,y.groupBy=Dg,y.initial=Lp,y.intersection=Rp,y.intersectionBy=Bp,y.intersectionWith=Dp,y.invert=e1,y.invertBy=t1,y.invokeMap=Ng,y.iteratee=Yo,y.keyBy=zg,y.keys=$e,y.keysIn=je,y.map=mi,y.mapKeys=r1,y.mapValues=i1,y.matches=j1,y.matchesProperty=Z1,y.memoize=wi,y.merge=o1,y.mergeWith=ol,y.method=e0,y.methodOf=t0,y.mixin=Go,y.negate=xi,y.nthArg=r0,y.omit=u1,y.omitBy=a1,y.once=nm,y.orderBy=Wg,y.over=i0,y.overArgs=rm,y.overEvery=o0,y.overSome=u0,y.partial=$o,y.partialRight=Ks,y.partition=qg,y.pick=s1,y.pickBy=ul,y.property=dl,y.propertyOf=a0,y.pull=Wp,y.pullAll=Ns,y.pullAllBy=qp,y.pullAllWith=Up,y.pullAt=Hp,y.range=s0,y.rangeRight=l0,y.rearg=im,y.reject=Yg,y.remove=Yp,y.rest=om,y.reverse=Ro,y.sampleSize=Vg,y.set=c1,y.setWith=f1,y.shuffle=Qg,y.slice=Gp,y.sortBy=Jg,y.sortedUniq=Zp,y.sortedUniqBy=eg,y.split=L1,y.spread=um,y.tail=tg,y.take=ng,y.takeRight=rg,y.takeRightWhile=ig,y.takeWhile=og,y.tap=bg,y.throttle=am,y.thru=gi,y.toArray=tl,y.toPairs=al,y.toPairsIn=sl,y.toPath=p0,y.toPlainObject=rl,y.transform=h1,y.unary=sm,y.union=ug,y.unionBy=ag,y.unionWith=sg,y.uniq=lg,y.uniqBy=cg,y.uniqWith=fg,y.unset=d1,y.unzip=Bo,y.unzipWith=zs,y.update=p1,y.updateWith=g1,y.values=rr,y.valuesIn=m1,y.without=hg,y.words=fl,y.wrap=lm,y.xor=dg,y.xorBy=pg,y.xorWith=gg,y.zip=mg,y.zipObject=yg,y.zipObjectDeep=wg,y.zipWith=xg,y.entries=al,y.entriesIn=sl,y.extend=il,y.extendWith=_i,Go(y,y),y.add=m0,y.attempt=hl,y.camelCase=b1,y.capitalize=ll,y.ceil=y0,y.clamp=y1,y.clone=fm,y.cloneDeep=dm,y.cloneDeepWith=pm,y.cloneWith=hm,y.conformsTo=gm,y.deburr=cl,y.defaultTo=X1,y.divide=w0,y.endsWith=v1,y.eq=Ot,y.escape=_1,y.escapeRegExp=k1,y.every=Pg,y.find=Mg,y.findIndex=Rs,y.findKey=Ym,y.findLast=Og,y.findLastIndex=Bs,y.findLastKey=Gm,y.floor=x0,y.forEach=qs,y.forEachRight=Us,y.forIn=Vm,y.forInRight=Qm,y.forOwn=Xm,y.forOwnRight=Km,y.get=Wo,y.gt=mm,y.gte=ym,y.has=Zm,y.hasIn=qo,y.head=$s,y.identity=Ze,y.includes=$g,y.indexOf=Op,y.inRange=w1,y.invoke=n1,y.isArguments=Dn,y.isArray=re,y.isArrayBuffer=wm,y.isArrayLike=Je,y.isArrayLikeObject=Me,y.isBoolean=xm,y.isBuffer=bn,y.isDate=bm,y.isElement=vm,y.isEmpty=_m,y.isEqual=km,y.isEqualWith=Sm,y.isError=No,y.isFinite=Cm,y.isFunction=on,y.isInteger=Js,y.isLength=bi,y.isMap=js,y.isMatch=Im,y.isMatchWith=Em,y.isNaN=Am,y.isNative=Tm,y.isNil=Fm,y.isNull=Pm,y.isNumber=Zs,y.isObject=Ae,y.isObjectLike=Fe,y.isPlainObject=vr,y.isRegExp=zo,y.isSafeInteger=Mm,y.isSet=el,y.isString=vi,y.isSymbol=ht,y.isTypedArray=nr,y.isUndefined=Om,y.isWeakMap=Lm,y.isWeakSet=Rm,y.join=$p,y.kebabCase=S1,y.last=St,y.lastIndexOf=Np,y.lowerCase=C1,y.lowerFirst=I1,y.lt=Bm,y.lte=Dm,y.max=b0,y.maxBy=v0,y.mean=_0,y.meanBy=k0,y.min=S0,y.minBy=C0,y.stubArray=Qo,y.stubFalse=Xo,y.stubObject=c0,y.stubString=f0,y.stubTrue=h0,y.multiply=I0,y.nth=zp,y.noConflict=n0,y.noop=Vo,y.now=yi,y.pad=E1,y.padEnd=A1,y.padStart=T1,y.parseInt=P1,y.random=x1,y.reduce=Ug,y.reduceRight=Hg,y.repeat=F1,y.replace=M1,y.result=l1,y.round=E0,y.runInContext=C,y.sample=Gg,y.size=Xg,y.snakeCase=O1,y.some=Kg,y.sortedIndex=Vp,y.sortedIndexBy=Qp,y.sortedIndexOf=Xp,y.sortedLastIndex=Kp,y.sortedLastIndexBy=Jp,y.sortedLastIndexOf=jp,y.startCase=R1,y.startsWith=B1,y.subtract=A0,y.sum=T0,y.sumBy=P0,y.template=D1,y.times=d0,y.toFinite=un,y.toInteger=ie,y.toLength=nl,y.toLower=$1,y.toNumber=Ct,y.toSafeInteger=$m,y.toString=ye,y.toUpper=N1,y.trim=z1,y.trimEnd=W1,y.trimStart=q1,y.truncate=U1,y.unescape=H1,y.uniqueId=g0,y.upperCase=Y1,y.upperFirst=Uo,y.each=qs,y.eachRight=Us,y.first=$s,Go(y,(function(){var e={};return Nt(y,function(r,a){we.call(y.prototype,a)||(e[a]=r)}),e})(),{chain:!1}),y.VERSION=o,xt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){y[e].placeholder=y}),xt(["drop","take"],function(e,r){le.prototype[e]=function(a){a=a===n?1:Be(ie(a),0);var f=this.__filtered__&&!r?new le(this):this.clone();return f.__filtered__?f.__takeCount__=qe(a,f.__takeCount__):f.__views__.push({size:qe(a,Te),type:e+(f.__dir__<0?"Right":"")}),f},le.prototype[e+"Right"]=function(a){return this.reverse()[e](a).reverse()}}),xt(["filter","map","takeWhile"],function(e,r){var a=r+1,f=a==Ee||a==De;le.prototype[e]=function(m){var x=this.clone();return x.__iteratees__.push({iteratee:K(m,3),type:a}),x.__filtered__=x.__filtered__||f,x}}),xt(["head","last"],function(e,r){var a="take"+(r?"Right":"");le.prototype[e]=function(){return this[a](1).value()[0]}}),xt(["initial","tail"],function(e,r){var a="drop"+(r?"":"Right");le.prototype[e]=function(){return this.__filtered__?new le(this):this[a](1)}}),le.prototype.compact=function(){return this.filter(Ze)},le.prototype.find=function(e){return this.filter(e).head()},le.prototype.findLast=function(e){return this.reverse().find(e)},le.prototype.invokeMap=ae(function(e,r){return typeof e=="function"?new le(this):this.map(function(a){return gr(a,e,r)})}),le.prototype.reject=function(e){return this.filter(xi(K(e)))},le.prototype.slice=function(e,r){e=ie(e);var a=this;return a.__filtered__&&(e>0||r<0)?new le(a):(e<0?a=a.takeRight(-e):e&&(a=a.drop(e)),r!==n&&(r=ie(r),a=r<0?a.dropRight(-r):a.take(r-e)),a)},le.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},le.prototype.toArray=function(){return this.take(Te)},Nt(le.prototype,function(e,r){var a=/^(?:filter|find|map|reject)|While$/.test(r),f=/^(?:head|last)$/.test(r),m=y[f?"take"+(r=="last"?"Right":""):r],x=f||/^find/.test(r);m&&(y.prototype[r]=function(){var v=this.__wrapped__,k=f?[1]:arguments,I=v instanceof le,O=k[0],L=I||re(v),D=function(se){var fe=m.apply(y,dn([se],k));return f&&z?fe[0]:fe};L&&a&&typeof O=="function"&&O.length!=1&&(I=L=!1);var z=this.__chain__,Y=!!this.__actions__.length,j=x&&!z,oe=I&&!Y;if(!x&&L){v=oe?v:new le(this);var Z=e.apply(v,k);return Z.__actions__.push({func:gi,args:[D],thisArg:n}),new vt(Z,z)}return j&&oe?e.apply(this,k):(Z=this.thru(D),j?f?Z.value()[0]:Z.value():Z)})}),xt(["pop","push","shift","sort","splice","unshift"],function(e){var r=Wr[e],a=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",f=/^(?:pop|shift)$/.test(e);y.prototype[e]=function(){var m=arguments;if(f&&!this.__chain__){var x=this.value();return r.apply(re(x)?x:[],m)}return this[a](function(v){return r.apply(re(v)?v:[],m)})}}),Nt(le.prototype,function(e,r){var a=y[r];if(a){var f=a.name+"";we.call(Jn,f)||(Jn[f]=[]),Jn[f].push({name:r,func:a})}}),Jn[si(n,B).name]=[{name:"wrapper",func:n}],le.prototype.clone=Hh,le.prototype.reverse=Yh,le.prototype.value=Gh,y.prototype.at=vg,y.prototype.chain=_g,y.prototype.commit=kg,y.prototype.next=Sg,y.prototype.plant=Ig,y.prototype.reverse=Eg,y.prototype.toJSON=y.prototype.valueOf=y.prototype.value=Ag,y.prototype.first=y.prototype.head,sr&&(y.prototype[sr]=Cg),y}),Qn=kh();Tn?((Tn.exports=Qn)._=Qn,Hi._=Qn):ze._=Qn}).call(B0)})(Ir,Ir.exports)),Ir.exports}var $0=D0();const N0=[{id:"dayPlanning",label:"Planning my day",cue:"After breakfast",reward:"More productive and organized day",targetCount:1,periodicityMultiplier:1,periodicityUnit:"day",active:!0},{id:"exercise",label:"Exercise",cue:"After work or in the morning",reward:"Better health, more energy, and improved mood",targetCount:1,periodicityMultiplier:1,periodicityUnit:"day",active:!0},{id:"havingFun",label:"Having fun",cue:"In the evening or during free time",reward:"Relaxation, joy, and stress relief",targetCount:1,periodicityMultiplier:1,periodicityUnit:"day",active:!0},{id:"fpf",label:"FPF",cue:"At a consistent scheduled time",reward:"Sense of progress and satisfaction",targetCount:1,periodicityMultiplier:1,periodicityUnit:"day",active:!0}],z0=[{id:"positiveEmotions",label:"Positive Emotions",info:"Feelings of joy, gratitude, contentment, hope, and pleasure. Includes savoring the moment, reflecting on past positives, and hopeful anticipation of the future.",active:!0},{id:"engagement",label:"Engagement",info:"Deep involvement in activities; being absorbed, losing sense of time (‘flow’). Doing work or hobbies that challenge your skills just enough that you’re fully present.",active:!0},{id:"relationships",label:"Relationships",info:"Supportive, meaningful social connections. Feeling loved, valued, belonging; giving and receiving support. Close friendships, family bonds, community ties.",active:!0},{id:"meaning",label:"Meaning",info:"Having a sense of purpose, belonging to something bigger than yourself. Knowing what matters in your life and using your strengths in service of values, causes or goals.",active:!0},{id:"accomplishment",label:"Accomplishment",info:"Mastery, achievement, working toward goals. Sense of progress, competence, whether or not it brings immediate joy—achieving things that matter to you.",active:!0},{id:"physicalCondition",label:"Physical Condition",info:"Your bodily health: exercise, sleep quality, nutrition; energy levels and how physically capable you feel.",active:!0},{id:"mindset",label:"Mindset",info:"Cultivating optimism, resilience, self-efficacy, and a growth mindset. A positive mindset shapes how you interpret setbacks, sustain motivation, and approach challenges.",active:!0},{id:"environment",label:"Environment",info:"Living and working in spaces that feel safe, comfortable, and supportive of wellbeing. Includes access to nature, orderliness, and resources that help you thrive.",active:!0},{id:"economicSecurity",label:"Economic Security",info:"Having financial stability, freedom from chronic money stress, and satisfaction with work. Economic security supports autonomy and reduces background stress that erodes wellbeing.",active:!0}],Jo={projectDir:"powerJournal",outputDir:"reports",coreDir:"core",devLogging:!0,habits:N0,wellbeingParameters:z0,devMode:!0,reportFileExtension:".pjf.md"};async function W0(t){if(!t||typeof t!="object"||Array.isArray(t))return Jo;try{return $0.merge({},Jo,t)}catch(i){return console.warn("[PowerJournal] Failed to merge user config, using defaults.",i),Jo}}const lc=6048e5,q0=864e5,wl=Symbol.for("constructDateFrom");function kn(t,i){return typeof t=="function"?t(i):t&&typeof t=="object"&&wl in t?t[wl](i):t instanceof Date?new t.constructor(i):new Date(i)}function Dt(t,i){return kn(i||t,t)}let U0={};function Oi(){return U0}function Tr(t,i){const n=Oi(),o=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,u=Dt(t,i?.in),s=u.getDay(),l=(s<o?7:0)+s-o;return u.setDate(u.getDate()-l),u.setHours(0,0,0,0),u}function Pi(t,i){return Tr(t,{...i,weekStartsOn:1})}function cc(t,i){const n=Dt(t,i?.in),o=n.getFullYear(),u=kn(n,0);u.setFullYear(o+1,0,4),u.setHours(0,0,0,0);const s=Pi(u),l=kn(n,0);l.setFullYear(o,0,4),l.setHours(0,0,0,0);const c=Pi(l);return n.getTime()>=s.getTime()?o+1:n.getTime()>=c.getTime()?o:o-1}function xl(t){const i=Dt(t),n=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()));return n.setUTCFullYear(i.getFullYear()),+t-+n}function H0(t,...i){const n=kn.bind(null,i.find(o=>typeof o=="object"));return i.map(n)}function bl(t,i){const n=Dt(t,i?.in);return n.setHours(0,0,0,0),n}function Y0(t,i,n){const[o,u]=H0(n?.in,t,i),s=bl(o),l=bl(u),c=+s-xl(s),h=+l-xl(l);return Math.round((c-h)/q0)}function G0(t,i){const n=cc(t,i),o=kn(t,0);return o.setFullYear(n,0,4),o.setHours(0,0,0,0),Pi(o)}function V0(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Q0(t){return!(!V0(t)&&typeof t!="number"||isNaN(+Dt(t)))}function X0(t,i){const n=Dt(t,i?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const K0={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},J0=(t,i,n)=>{let o;const u=K0[t];return typeof u=="string"?o=u:i===1?o=u.one:o=u.other.replace("{{count}}",i.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+o:o+" ago":o};function jo(t){return(i={})=>{const n=i.width?String(i.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const j0={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Z0={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ey={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ty={date:jo({formats:j0,defaultWidth:"full"}),time:jo({formats:Z0,defaultWidth:"full"}),dateTime:jo({formats:ey,defaultWidth:"full"})},ny={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ry=(t,i,n,o)=>ny[t];function _r(t){return(i,n)=>{const o=n?.context?String(n.context):"standalone";let u;if(o==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,c=n?.width?String(n.width):l;u=t.formattingValues[c]||t.formattingValues[l]}else{const l=t.defaultWidth,c=n?.width?String(n.width):t.defaultWidth;u=t.values[c]||t.values[l]}const s=t.argumentCallback?t.argumentCallback(i):i;return u[s]}}const iy={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},oy={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},uy={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ay={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},sy={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ly={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},cy=(t,i)=>{const n=Number(t),o=n%100;if(o>20||o<10)switch(o%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},fy={ordinalNumber:cy,era:_r({values:iy,defaultWidth:"wide"}),quarter:_r({values:oy,defaultWidth:"wide",argumentCallback:t=>t-1}),month:_r({values:uy,defaultWidth:"wide"}),day:_r({values:ay,defaultWidth:"wide"}),dayPeriod:_r({values:sy,defaultWidth:"wide",formattingValues:ly,defaultFormattingWidth:"wide"})};function kr(t){return(i,n={})=>{const o=n.width,u=o&&t.matchPatterns[o]||t.matchPatterns[t.defaultMatchWidth],s=i.match(u);if(!s)return null;const l=s[0],c=o&&t.parsePatterns[o]||t.parsePatterns[t.defaultParseWidth],h=Array.isArray(c)?dy(c,g=>g.test(l)):hy(c,g=>g.test(l));let d;d=t.valueCallback?t.valueCallback(h):h,d=n.valueCallback?n.valueCallback(d):d;const p=i.slice(l.length);return{value:d,rest:p}}}function hy(t,i){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&i(t[n]))return n}function dy(t,i){for(let n=0;n<t.length;n++)if(i(t[n]))return n}function py(t){return(i,n={})=>{const o=i.match(t.matchPattern);if(!o)return null;const u=o[0],s=i.match(t.parsePattern);if(!s)return null;let l=t.valueCallback?t.valueCallback(s[0]):s[0];l=n.valueCallback?n.valueCallback(l):l;const c=i.slice(u.length);return{value:l,rest:c}}}const gy=/^(\d+)(th|st|nd|rd)?/i,my=/\d+/i,yy={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},wy={any:[/^b/i,/^(a|c)/i]},xy={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},by={any:[/1/i,/2/i,/3/i,/4/i]},vy={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},_y={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ky={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Sy={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Cy={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Iy={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ey={ordinalNumber:py({matchPattern:gy,parsePattern:my,valueCallback:t=>parseInt(t,10)}),era:kr({matchPatterns:yy,defaultMatchWidth:"wide",parsePatterns:wy,defaultParseWidth:"any"}),quarter:kr({matchPatterns:xy,defaultMatchWidth:"wide",parsePatterns:by,defaultParseWidth:"any",valueCallback:t=>t+1}),month:kr({matchPatterns:vy,defaultMatchWidth:"wide",parsePatterns:_y,defaultParseWidth:"any"}),day:kr({matchPatterns:ky,defaultMatchWidth:"wide",parsePatterns:Sy,defaultParseWidth:"any"}),dayPeriod:kr({matchPatterns:Cy,defaultMatchWidth:"any",parsePatterns:Iy,defaultParseWidth:"any"})},Ay={code:"en-US",formatDistance:J0,formatLong:ty,formatRelative:ry,localize:fy,match:Ey,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ty(t,i){const n=Dt(t,i?.in);return Y0(n,X0(n))+1}function Py(t,i){const n=Dt(t,i?.in),o=+Pi(n)-+G0(n);return Math.round(o/lc)+1}function fc(t,i){const n=Dt(t,i?.in),o=n.getFullYear(),u=Oi(),s=i?.firstWeekContainsDate??i?.locale?.options?.firstWeekContainsDate??u.firstWeekContainsDate??u.locale?.options?.firstWeekContainsDate??1,l=kn(i?.in||t,0);l.setFullYear(o+1,0,s),l.setHours(0,0,0,0);const c=Tr(l,i),h=kn(i?.in||t,0);h.setFullYear(o,0,s),h.setHours(0,0,0,0);const d=Tr(h,i);return+n>=+c?o+1:+n>=+d?o:o-1}function Fy(t,i){const n=Oi(),o=i?.firstWeekContainsDate??i?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,u=fc(t,i),s=kn(i?.in||t,0);return s.setFullYear(u,0,o),s.setHours(0,0,0,0),Tr(s,i)}function My(t,i){const n=Dt(t,i?.in),o=+Tr(n,i)-+Fy(n,i);return Math.round(o/lc)+1}function xe(t,i){const n=t<0?"-":"",o=Math.abs(t).toString().padStart(i,"0");return n+o}const vn={y(t,i){const n=t.getFullYear(),o=n>0?n:1-n;return xe(i==="yy"?o%100:o,i.length)},M(t,i){const n=t.getMonth();return i==="M"?String(n+1):xe(n+1,2)},d(t,i){return xe(t.getDate(),i.length)},a(t,i){const n=t.getHours()/12>=1?"pm":"am";switch(i){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,i){return xe(t.getHours()%12||12,i.length)},H(t,i){return xe(t.getHours(),i.length)},m(t,i){return xe(t.getMinutes(),i.length)},s(t,i){return xe(t.getSeconds(),i.length)},S(t,i){const n=i.length,o=t.getMilliseconds(),u=Math.trunc(o*Math.pow(10,n-3));return xe(u,i.length)}},ir={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},vl={G:function(t,i,n){const o=t.getFullYear()>0?1:0;switch(i){case"G":case"GG":case"GGG":return n.era(o,{width:"abbreviated"});case"GGGGG":return n.era(o,{width:"narrow"});case"GGGG":default:return n.era(o,{width:"wide"})}},y:function(t,i,n){if(i==="yo"){const o=t.getFullYear(),u=o>0?o:1-o;return n.ordinalNumber(u,{unit:"year"})}return vn.y(t,i)},Y:function(t,i,n,o){const u=fc(t,o),s=u>0?u:1-u;if(i==="YY"){const l=s%100;return xe(l,2)}return i==="Yo"?n.ordinalNumber(s,{unit:"year"}):xe(s,i.length)},R:function(t,i){const n=cc(t);return xe(n,i.length)},u:function(t,i){const n=t.getFullYear();return xe(n,i.length)},Q:function(t,i,n){const o=Math.ceil((t.getMonth()+1)/3);switch(i){case"Q":return String(o);case"QQ":return xe(o,2);case"Qo":return n.ordinalNumber(o,{unit:"quarter"});case"QQQ":return n.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(o,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(o,{width:"wide",context:"formatting"})}},q:function(t,i,n){const o=Math.ceil((t.getMonth()+1)/3);switch(i){case"q":return String(o);case"qq":return xe(o,2);case"qo":return n.ordinalNumber(o,{unit:"quarter"});case"qqq":return n.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(o,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(o,{width:"wide",context:"standalone"})}},M:function(t,i,n){const o=t.getMonth();switch(i){case"M":case"MM":return vn.M(t,i);case"Mo":return n.ordinalNumber(o+1,{unit:"month"});case"MMM":return n.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(o,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(o,{width:"wide",context:"formatting"})}},L:function(t,i,n){const o=t.getMonth();switch(i){case"L":return String(o+1);case"LL":return xe(o+1,2);case"Lo":return n.ordinalNumber(o+1,{unit:"month"});case"LLL":return n.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(o,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(o,{width:"wide",context:"standalone"})}},w:function(t,i,n,o){const u=My(t,o);return i==="wo"?n.ordinalNumber(u,{unit:"week"}):xe(u,i.length)},I:function(t,i,n){const o=Py(t);return i==="Io"?n.ordinalNumber(o,{unit:"week"}):xe(o,i.length)},d:function(t,i,n){return i==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):vn.d(t,i)},D:function(t,i,n){const o=Ty(t);return i==="Do"?n.ordinalNumber(o,{unit:"dayOfYear"}):xe(o,i.length)},E:function(t,i,n){const o=t.getDay();switch(i){case"E":case"EE":case"EEE":return n.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(o,{width:"short",context:"formatting"});case"EEEE":default:return n.day(o,{width:"wide",context:"formatting"})}},e:function(t,i,n,o){const u=t.getDay(),s=(u-o.weekStartsOn+8)%7||7;switch(i){case"e":return String(s);case"ee":return xe(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(u,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(u,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(u,{width:"short",context:"formatting"});case"eeee":default:return n.day(u,{width:"wide",context:"formatting"})}},c:function(t,i,n,o){const u=t.getDay(),s=(u-o.weekStartsOn+8)%7||7;switch(i){case"c":return String(s);case"cc":return xe(s,i.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(u,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(u,{width:"narrow",context:"standalone"});case"cccccc":return n.day(u,{width:"short",context:"standalone"});case"cccc":default:return n.day(u,{width:"wide",context:"standalone"})}},i:function(t,i,n){const o=t.getDay(),u=o===0?7:o;switch(i){case"i":return String(u);case"ii":return xe(u,i.length);case"io":return n.ordinalNumber(u,{unit:"day"});case"iii":return n.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(o,{width:"short",context:"formatting"});case"iiii":default:return n.day(o,{width:"wide",context:"formatting"})}},a:function(t,i,n){const u=t.getHours()/12>=1?"pm":"am";switch(i){case"a":case"aa":return n.dayPeriod(u,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(u,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(u,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(u,{width:"wide",context:"formatting"})}},b:function(t,i,n){const o=t.getHours();let u;switch(o===12?u=ir.noon:o===0?u=ir.midnight:u=o/12>=1?"pm":"am",i){case"b":case"bb":return n.dayPeriod(u,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(u,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(u,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(u,{width:"wide",context:"formatting"})}},B:function(t,i,n){const o=t.getHours();let u;switch(o>=17?u=ir.evening:o>=12?u=ir.afternoon:o>=4?u=ir.morning:u=ir.night,i){case"B":case"BB":case"BBB":return n.dayPeriod(u,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(u,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(u,{width:"wide",context:"formatting"})}},h:function(t,i,n){if(i==="ho"){let o=t.getHours()%12;return o===0&&(o=12),n.ordinalNumber(o,{unit:"hour"})}return vn.h(t,i)},H:function(t,i,n){return i==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):vn.H(t,i)},K:function(t,i,n){const o=t.getHours()%12;return i==="Ko"?n.ordinalNumber(o,{unit:"hour"}):xe(o,i.length)},k:function(t,i,n){let o=t.getHours();return o===0&&(o=24),i==="ko"?n.ordinalNumber(o,{unit:"hour"}):xe(o,i.length)},m:function(t,i,n){return i==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):vn.m(t,i)},s:function(t,i,n){return i==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):vn.s(t,i)},S:function(t,i){return vn.S(t,i)},X:function(t,i,n){const o=t.getTimezoneOffset();if(o===0)return"Z";switch(i){case"X":return kl(o);case"XXXX":case"XX":return zn(o);case"XXXXX":case"XXX":default:return zn(o,":")}},x:function(t,i,n){const o=t.getTimezoneOffset();switch(i){case"x":return kl(o);case"xxxx":case"xx":return zn(o);case"xxxxx":case"xxx":default:return zn(o,":")}},O:function(t,i,n){const o=t.getTimezoneOffset();switch(i){case"O":case"OO":case"OOO":return"GMT"+_l(o,":");case"OOOO":default:return"GMT"+zn(o,":")}},z:function(t,i,n){const o=t.getTimezoneOffset();switch(i){case"z":case"zz":case"zzz":return"GMT"+_l(o,":");case"zzzz":default:return"GMT"+zn(o,":")}},t:function(t,i,n){const o=Math.trunc(+t/1e3);return xe(o,i.length)},T:function(t,i,n){return xe(+t,i.length)}};function _l(t,i=""){const n=t>0?"-":"+",o=Math.abs(t),u=Math.trunc(o/60),s=o%60;return s===0?n+String(u):n+String(u)+i+xe(s,2)}function kl(t,i){return t%60===0?(t>0?"-":"+")+xe(Math.abs(t)/60,2):zn(t,i)}function zn(t,i=""){const n=t>0?"-":"+",o=Math.abs(t),u=xe(Math.trunc(o/60),2),s=xe(o%60,2);return n+u+i+s}const Sl=(t,i)=>{switch(t){case"P":return i.date({width:"short"});case"PP":return i.date({width:"medium"});case"PPP":return i.date({width:"long"});case"PPPP":default:return i.date({width:"full"})}},hc=(t,i)=>{switch(t){case"p":return i.time({width:"short"});case"pp":return i.time({width:"medium"});case"ppp":return i.time({width:"long"});case"pppp":default:return i.time({width:"full"})}},Oy=(t,i)=>{const n=t.match(/(P+)(p+)?/)||[],o=n[1],u=n[2];if(!u)return Sl(t,i);let s;switch(o){case"P":s=i.dateTime({width:"short"});break;case"PP":s=i.dateTime({width:"medium"});break;case"PPP":s=i.dateTime({width:"long"});break;case"PPPP":default:s=i.dateTime({width:"full"});break}return s.replace("{{date}}",Sl(o,i)).replace("{{time}}",hc(u,i))},Ly={p:hc,P:Oy},Ry=/^D+$/,By=/^Y+$/,Dy=["D","DD","YY","YYYY"];function $y(t){return Ry.test(t)}function Ny(t){return By.test(t)}function zy(t,i,n){const o=Wy(t,i,n);if(console.warn(o),Dy.includes(t))throw new RangeError(o)}function Wy(t,i,n){const o=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${i}\`) for formatting ${o} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const qy=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Uy=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Hy=/^'([^]*?)'?$/,Yy=/''/g,Gy=/[a-zA-Z]/;function dc(t,i,n){const o=Oi(),u=o.locale??Ay,s=o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,l=o.weekStartsOn??o.locale?.options?.weekStartsOn??0,c=Dt(t,n?.in);if(!Q0(c))throw new RangeError("Invalid time value");let h=i.match(Uy).map(p=>{const g=p[0];if(g==="p"||g==="P"){const b=Ly[g];return b(p,u.formatLong)}return p}).join("").match(qy).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const g=p[0];if(g==="'")return{isToken:!1,value:Vy(p)};if(vl[g])return{isToken:!0,value:p};if(g.match(Gy))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:p}});u.localize.preprocessor&&(h=u.localize.preprocessor(c,h));const d={firstWeekContainsDate:s,weekStartsOn:l,locale:u};return h.map(p=>{if(!p.isToken)return p.value;const g=p.value;(Ny(g)||$y(g))&&zy(g,i,String(t));const b=vl[g[0]];return b(c,g,u.localize,d)}).join("")}function Vy(t){const i=t.match(Hy);return i?i[1].replace(Yy,"'"):t}const Si=Vt(Qt.FileService);async function Qy(){try{const t=`${dc(new Date,"dd.MM.yyyy")}.md`,i=Ce.workspace.getLeavesOfType("markdown"),n=[];for(const s of i){const c=s.view.file;c&&(n.push(c.path),c.path.endsWith(t)&&(Si.dev("Closing today's note: "+c.path),await s.detach()))}Si.dev("Currently open files: "+n.join(", "));const o=`${nt.projectDir}/${nt.coreDir}`,u=Ce.vault.getAbstractFileByPath(o);if(u&&"children"in u){const s=/^\d{2}\.\d{2}\.\d{4}\.md$/;for(const l of u.children)"extension"in l&&l.extension==="md"&&s.test(l.name)&&l.name!==t&&(Si.dev("Deleting old app-triggering note: "+l.path),await Ce.vault.delete(l))}}catch(t){Si.error("Failed to run onStart:",t)}}const Wn={component:"mdc-component",input:"mdc-input",hiddenValue:"mdc-hidden-value"};class Xy{constructor(){this.logger=Vt(Qt.TagsService),this.component={start:i=>{const n={componentName:i};return this.logger.dev("Component start",n),`<span class="${Wn.component} start" data-meta='${JSON.stringify(n)}' style="display:none"></span>`},end:i=>{const n={componentName:i};return this.logger.dev("Component end",n),`<span class="${Wn.component} end" data-meta='${JSON.stringify(n)}' style="display:none"></span>`},wrap:(i,n,o=!0)=>{const u=o?`
${n}
`:n;return this.logger.dev("Component wrap",{componentName:i,content:n}),this.component.start(i)+u+this.component.end(i)}},this.input={start:(i,n,o)=>{const u={componentName:i,inputName:n,inputType:o};return this.logger.dev("Input start",u),`<span class="${Wn.input}" data-meta='${JSON.stringify(u)}' style="display:none"></span>`},end:(i,n,o)=>{const u={componentName:i,inputName:n,inputType:o};return this.logger.dev("Input end",u),`<span class="${Wn.input} end" data-meta='${JSON.stringify(u)}' style="display:none"></span>`},wrap:i=>{const{componentName:n,inputName:o,inputType:u,content:s,withNewLines:l=!0}=i,c=l?`
${s}
`:s;return this.logger.dev("Input wrap",{componentName:n,inputName:o,content:s}),this.input.start(n,o,u)+c+this.input.end(n,o,u)}},this.hiddenValue=(i,n,o)=>{const u={componentName:i,inputName:n,value:o};return this.logger.dev("Hidden value set",u),`<span class="${Wn.hiddenValue}" data-meta='${JSON.stringify(u)}' style="display:none"></span>`}}}const xu=new Xy;function Cl(t){if(t)throw t}var Zo,Il;function Ky(){if(Il)return Zo;Il=1;var t=Object.prototype.hasOwnProperty,i=Object.prototype.toString,n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,u=function(d){return typeof Array.isArray=="function"?Array.isArray(d):i.call(d)==="[object Array]"},s=function(d){if(!d||i.call(d)!=="[object Object]")return!1;var p=t.call(d,"constructor"),g=d.constructor&&d.constructor.prototype&&t.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!p&&!g)return!1;var b;for(b in d);return typeof b>"u"||t.call(d,b)},l=function(d,p){n&&p.name==="__proto__"?n(d,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):d[p.name]=p.newValue},c=function(d,p){if(p==="__proto__")if(t.call(d,p)){if(o)return o(d,p).value}else return;return d[p]};return Zo=function h(){var d,p,g,b,w,T,R=arguments[0],q=1,B=arguments.length,X=!1;for(typeof R=="boolean"&&(X=R,R=arguments[1]||{},q=2),(R==null||typeof R!="object"&&typeof R!="function")&&(R={});q<B;++q)if(d=arguments[q],d!=null)for(p in d)g=c(R,p),b=c(d,p),R!==b&&(X&&b&&(s(b)||(w=u(b)))?(w?(w=!1,T=g&&u(g)?g:[]):T=g&&s(g)?g:{},l(R,{name:p,newValue:h(X,T,b)})):typeof b<"u"&&l(R,{name:p,newValue:b}));return R},Zo}var Jy=Ky();const eu=sc(Jy);function bu(t){if(typeof t!="object"||t===null)return!1;const i=Object.getPrototypeOf(t);return(i===null||i===Object.prototype||Object.getPrototypeOf(i)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function jy(){const t=[],i={run:n,use:o};return i;function n(...u){let s=-1;const l=u.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);c(null,...u);function c(h,...d){const p=t[++s];let g=-1;if(h){l(h);return}for(;++g<u.length;)(d[g]===null||d[g]===void 0)&&(d[g]=u[g]);u=d,p?Zy(p,c)(...d):l(null,...d)}}function o(u){if(typeof u!="function")throw new TypeError("Expected `middelware` to be a function, not "+u);return t.push(u),i}}function Zy(t,i){let n;return o;function o(...l){const c=t.length>l.length;let h;c&&l.push(u);try{h=t.apply(this,l)}catch(d){const p=d;if(c&&n)throw p;return u(p)}c||(h&&h.then&&typeof h.then=="function"?h.then(s,u):h instanceof Error?u(h):s(h))}function u(l,...c){n||(n=!0,i(l,...c))}function s(l){u(null,l)}}function Er(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?El(t.position):"start"in t||"end"in t?El(t):"line"in t||"column"in t?vu(t):""}function vu(t){return Al(t&&t.line)+":"+Al(t&&t.column)}function El(t){return vu(t&&t.start)+"-"+vu(t&&t.end)}function Al(t){return t&&typeof t=="number"?t:1}class it extends Error{constructor(i,n,o){super(),typeof n=="string"&&(o=n,n=void 0);let u="",s={},l=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof i=="string"?u=i:!s.cause&&i&&(l=!0,u=i.message,s.cause=i),!s.ruleId&&!s.source&&typeof o=="string"){const h=o.indexOf(":");h===-1?s.ruleId=o:(s.source=o.slice(0,h),s.ruleId=o.slice(h+1))}if(!s.place&&s.ancestors&&s.ancestors){const h=s.ancestors[s.ancestors.length-1];h&&(s.place=h.position)}const c=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=u,this.line=c?c.line:void 0,this.name=Er(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=l&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}it.prototype.file="";it.prototype.name="";it.prototype.reason="";it.prototype.message="";it.prototype.stack="";it.prototype.column=void 0;it.prototype.line=void 0;it.prototype.ancestors=void 0;it.prototype.cause=void 0;it.prototype.fatal=void 0;it.prototype.place=void 0;it.prototype.ruleId=void 0;it.prototype.source=void 0;const Ut={basename:ew,dirname:tw,extname:nw,join:rw,sep:"/"};function ew(t,i){if(i!==void 0&&typeof i!="string")throw new TypeError('"ext" argument must be a string');Pr(t);let n=0,o=-1,u=t.length,s;if(i===void 0||i.length===0||i.length>t.length){for(;u--;)if(t.codePointAt(u)===47){if(s){n=u+1;break}}else o<0&&(s=!0,o=u+1);return o<0?"":t.slice(n,o)}if(i===t)return"";let l=-1,c=i.length-1;for(;u--;)if(t.codePointAt(u)===47){if(s){n=u+1;break}}else l<0&&(s=!0,l=u+1),c>-1&&(t.codePointAt(u)===i.codePointAt(c--)?c<0&&(o=u):(c=-1,o=l));return n===o?o=l:o<0&&(o=t.length),t.slice(n,o)}function tw(t){if(Pr(t),t.length===0)return".";let i=-1,n=t.length,o;for(;--n;)if(t.codePointAt(n)===47){if(o){i=n;break}}else o||(o=!0);return i<0?t.codePointAt(0)===47?"/":".":i===1&&t.codePointAt(0)===47?"//":t.slice(0,i)}function nw(t){Pr(t);let i=t.length,n=-1,o=0,u=-1,s=0,l;for(;i--;){const c=t.codePointAt(i);if(c===47){if(l){o=i+1;break}continue}n<0&&(l=!0,n=i+1),c===46?u<0?u=i:s!==1&&(s=1):u>-1&&(s=-1)}return u<0||n<0||s===0||s===1&&u===n-1&&u===o+1?"":t.slice(u,n)}function rw(...t){let i=-1,n;for(;++i<t.length;)Pr(t[i]),t[i]&&(n=n===void 0?t[i]:n+"/"+t[i]);return n===void 0?".":iw(n)}function iw(t){Pr(t);const i=t.codePointAt(0)===47;let n=ow(t,!i);return n.length===0&&!i&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),i?"/"+n:n}function ow(t,i){let n="",o=0,u=-1,s=0,l=-1,c,h;for(;++l<=t.length;){if(l<t.length)c=t.codePointAt(l);else{if(c===47)break;c=47}if(c===47){if(!(u===l-1||s===1))if(u!==l-1&&s===2){if(n.length<2||o!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(h=n.lastIndexOf("/"),h!==n.length-1){h<0?(n="",o=0):(n=n.slice(0,h),o=n.length-1-n.lastIndexOf("/")),u=l,s=0;continue}}else if(n.length>0){n="",o=0,u=l,s=0;continue}}i&&(n=n.length>0?n+"/..":"..",o=2)}else n.length>0?n+="/"+t.slice(u+1,l):n=t.slice(u+1,l),o=l-u-1;u=l,s=0}else c===46&&s>-1?s++:s=-1}return n}function Pr(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const uw={cwd:aw};function aw(){return"/"}function _u(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function sw(t){if(typeof t=="string")t=new URL(t);else if(!_u(t)){const i=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw i.code="ERR_INVALID_ARG_TYPE",i}if(t.protocol!=="file:"){const i=new TypeError("The URL must be of scheme file");throw i.code="ERR_INVALID_URL_SCHEME",i}return lw(t)}function lw(t){if(t.hostname!==""){const o=new TypeError('File URL host must be "localhost" or empty on darwin');throw o.code="ERR_INVALID_FILE_URL_HOST",o}const i=t.pathname;let n=-1;for(;++n<i.length;)if(i.codePointAt(n)===37&&i.codePointAt(n+1)===50){const o=i.codePointAt(n+2);if(o===70||o===102){const u=new TypeError("File URL path must not include encoded / characters");throw u.code="ERR_INVALID_FILE_URL_PATH",u}}return decodeURIComponent(i)}const tu=["history","path","basename","stem","extname","dirname"];class cw{constructor(i){let n;i?_u(i)?n={path:i}:typeof i=="string"||fw(i)?n={value:i}:n=i:n={},this.cwd="cwd"in n?"":uw.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let o=-1;for(;++o<tu.length;){const s=tu[o];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let u;for(u in n)tu.includes(u)||(this[u]=n[u])}get basename(){return typeof this.path=="string"?Ut.basename(this.path):void 0}set basename(i){ru(i,"basename"),nu(i,"basename"),this.path=Ut.join(this.dirname||"",i)}get dirname(){return typeof this.path=="string"?Ut.dirname(this.path):void 0}set dirname(i){Tl(this.basename,"dirname"),this.path=Ut.join(i||"",this.basename)}get extname(){return typeof this.path=="string"?Ut.extname(this.path):void 0}set extname(i){if(nu(i,"extname"),Tl(this.dirname,"extname"),i){if(i.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(i.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ut.join(this.dirname,this.stem+(i||""))}get path(){return this.history[this.history.length-1]}set path(i){_u(i)&&(i=sw(i)),ru(i,"path"),this.path!==i&&this.history.push(i)}get stem(){return typeof this.path=="string"?Ut.basename(this.path,this.extname):void 0}set stem(i){ru(i,"stem"),nu(i,"stem"),this.path=Ut.join(this.dirname||"",i+(this.extname||""))}fail(i,n,o){const u=this.message(i,n,o);throw u.fatal=!0,u}info(i,n,o){const u=this.message(i,n,o);return u.fatal=void 0,u}message(i,n,o){const u=new it(i,n,o);return this.path&&(u.name=this.path+":"+u.name,u.file=this.path),u.fatal=!1,this.messages.push(u),u}toString(i){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(i||void 0).decode(this.value)}}function nu(t,i){if(t&&t.includes(Ut.sep))throw new Error("`"+i+"` cannot be a path: did not expect `"+Ut.sep+"`")}function ru(t,i){if(!t)throw new Error("`"+i+"` cannot be empty")}function Tl(t,i){if(!t)throw new Error("Setting `"+i+"` requires `path` to be set too")}function fw(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const hw=(function(t){const o=this.constructor.prototype,u=o[t],s=function(){return u.apply(s,arguments)};return Object.setPrototypeOf(s,o),s}),dw={}.hasOwnProperty;class Mu extends hw{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=jy()}copy(){const i=new Mu;let n=-1;for(;++n<this.attachers.length;){const o=this.attachers[n];i.use(...o)}return i.data(eu(!0,{},this.namespace)),i}data(i,n){return typeof i=="string"?arguments.length===2?(uu("data",this.frozen),this.namespace[i]=n,this):dw.call(this.namespace,i)&&this.namespace[i]||void 0:i?(uu("data",this.frozen),this.namespace=i,this):this.namespace}freeze(){if(this.frozen)return this;const i=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...o]=this.attachers[this.freezeIndex];if(o[0]===!1)continue;o[0]===!0&&(o[0]=void 0);const u=n.call(i,...o);typeof u=="function"&&this.transformers.use(u)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(i){this.freeze();const n=Ci(i),o=this.parser||this.Parser;return iu("parse",o),o(String(n),n)}process(i,n){const o=this;return this.freeze(),iu("process",this.parser||this.Parser),ou("process",this.compiler||this.Compiler),n?u(void 0,n):new Promise(u);function u(s,l){const c=Ci(i),h=o.parse(c);o.run(h,c,function(p,g,b){if(p||!g||!b)return d(p);const w=g,T=o.stringify(w,b);gw(T)?b.value=T:b.result=T,d(p,b)});function d(p,g){p||!g?l(p):s?s(g):n(void 0,g)}}}processSync(i){let n=!1,o;return this.freeze(),iu("processSync",this.parser||this.Parser),ou("processSync",this.compiler||this.Compiler),this.process(i,u),Fl("processSync","process",n),o;function u(s,l){n=!0,Cl(s),o=l}}run(i,n,o){Pl(i),this.freeze();const u=this.transformers;return!o&&typeof n=="function"&&(o=n,n=void 0),o?s(void 0,o):new Promise(s);function s(l,c){const h=Ci(n);u.run(i,h,d);function d(p,g,b){const w=g||i;p?c(p):l?l(w):o(void 0,w,b)}}}runSync(i,n){let o=!1,u;return this.run(i,n,s),Fl("runSync","run",o),u;function s(l,c){Cl(l),u=c,o=!0}}stringify(i,n){this.freeze();const o=Ci(n),u=this.compiler||this.Compiler;return ou("stringify",u),Pl(i),u(i,o)}use(i,...n){const o=this.attachers,u=this.namespace;if(uu("use",this.frozen),i!=null)if(typeof i=="function")h(i,n);else if(typeof i=="object")Array.isArray(i)?c(i):l(i);else throw new TypeError("Expected usable value, not `"+i+"`");return this;function s(d){if(typeof d=="function")h(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[p,...g]=d;h(p,g)}else l(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function l(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(d.plugins),d.settings&&(u.settings=eu(!0,u.settings,d.settings))}function c(d){let p=-1;if(d!=null)if(Array.isArray(d))for(;++p<d.length;){const g=d[p];s(g)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function h(d,p){let g=-1,b=-1;for(;++g<o.length;)if(o[g][0]===d){b=g;break}if(b===-1)o.push([d,...p]);else if(p.length>0){let[w,...T]=p;const R=o[b][1];bu(R)&&bu(w)&&(w=eu(!0,R,w)),o[b]=[d,w,...T]}}}}const ku=new Mu().freeze();function iu(t,i){if(typeof i!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function ou(t,i){if(typeof i!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function uu(t,i){if(i)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Pl(t){if(!bu(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function Fl(t,i,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+i+"` instead")}function Ci(t){return pw(t)?t:new cw(t)}function pw(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function gw(t){return typeof t=="string"||mw(t)}function mw(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const yw={};function Ou(t,i){const n=yw,o=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,u=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return pc(t,o,u)}function pc(t,i,n){if(ww(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(i&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Ml(t.children,i,n)}return Array.isArray(t)?Ml(t,i,n):""}function Ml(t,i,n){const o=[];let u=-1;for(;++u<t.length;)o[u]=pc(t[u],i,n);return o.join("")}function ww(t){return!!(t&&typeof t=="object")}const Ol=document.createElement("i");function Lu(t){const i="&"+t+";";Ol.innerHTML=i;const n=Ol.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===i?!1:n}function Gt(t,i,n,o){const u=t.length;let s=0,l;if(i<0?i=-i>u?0:u+i:i=i>u?u:i,n=n>0?n:0,o.length<1e4)l=Array.from(o),l.unshift(i,n),t.splice(...l);else for(n&&t.splice(i,n);s<o.length;)l=o.slice(s,s+1e4),l.unshift(i,0),t.splice(...l),s+=1e4,i+=1e4}function It(t,i){return t.length>0?(Gt(t,t.length,0,i),t):i}const Ll={}.hasOwnProperty;function xw(t){const i={};let n=-1;for(;++n<t.length;)bw(i,t[n]);return i}function bw(t,i){let n;for(n in i){const u=(Ll.call(t,n)?t[n]:void 0)||(t[n]={}),s=i[n];let l;if(s)for(l in s){Ll.call(u,l)||(u[l]=[]);const c=s[l];vw(u[l],Array.isArray(c)?c:c?[c]:[])}}}function vw(t,i){let n=-1;const o=[];for(;++n<i.length;)(i[n].add==="after"?t:o).push(i[n]);Gt(t,0,0,o)}function gc(t,i){const n=Number.parseInt(t,i);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function ur(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ht=Cn(/[A-Za-z]/),Bt=Cn(/[\dA-Za-z]/),_w=Cn(/[#-'*+\--9=?A-Z^-~]/);function Su(t){return t!==null&&(t<32||t===127)}const Cu=Cn(/\d/),kw=Cn(/[\dA-Fa-f]/),Sw=Cn(/[!-/:-@[-`{-~]/);function te(t){return t!==null&&t<-2}function rt(t){return t!==null&&(t<0||t===32)}function ge(t){return t===-2||t===-1||t===32}const Cw=Cn(new RegExp("\\p{P}|\\p{S}","u")),Iw=Cn(/\s/);function Cn(t){return i;function i(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function _e(t,i,n,o){const u=o?o-1:Number.POSITIVE_INFINITY;let s=0;return l;function l(h){return ge(h)?(t.enter(n),c(h)):i(h)}function c(h){return ge(h)&&s++<u?(t.consume(h),c):(t.exit(n),i(h))}}const Ew={tokenize:Aw};function Aw(t){const i=t.attempt(this.parser.constructs.contentInitial,o,u);let n;return i;function o(c){if(c===null){t.consume(c);return}return t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),_e(t,i,"linePrefix")}function u(c){return t.enter("paragraph"),s(c)}function s(c){const h=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=h),n=h,l(c)}function l(c){if(c===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(c);return}return te(c)?(t.consume(c),t.exit("chunkText"),s):(t.consume(c),l)}}const Tw={tokenize:Pw},Rl={tokenize:Fw};function Pw(t){const i=this,n=[];let o=0,u,s,l;return c;function c(W){if(o<n.length){const N=n[o];return i.containerState=N[1],t.attempt(N[0].continuation,h,d)(W)}return d(W)}function h(W){if(o++,i.containerState._closeFlow){i.containerState._closeFlow=void 0,u&&X();const N=i.events.length;let M=N,E;for(;M--;)if(i.events[M][0]==="exit"&&i.events[M][1].type==="chunkFlow"){E=i.events[M][1].end;break}B(o);let H=N;for(;H<i.events.length;)i.events[H][1].end={...E},H++;return Gt(i.events,M+1,0,i.events.slice(N)),i.events.length=H,d(W)}return c(W)}function d(W){if(o===n.length){if(!u)return b(W);if(u.currentConstruct&&u.currentConstruct.concrete)return T(W);i.interrupt=!!(u.currentConstruct&&!u._gfmTableDynamicInterruptHack)}return i.containerState={},t.check(Rl,p,g)(W)}function p(W){return u&&X(),B(o),b(W)}function g(W){return i.parser.lazy[i.now().line]=o!==n.length,l=i.now().offset,T(W)}function b(W){return i.containerState={},t.attempt(Rl,w,T)(W)}function w(W){return o++,n.push([i.currentConstruct,i.containerState]),b(W)}function T(W){if(W===null){u&&X(),B(0),t.consume(W);return}return u=u||i.parser.flow(i.now()),t.enter("chunkFlow",{_tokenizer:u,contentType:"flow",previous:s}),R(W)}function R(W){if(W===null){q(t.exit("chunkFlow"),!0),B(0),t.consume(W);return}return te(W)?(t.consume(W),q(t.exit("chunkFlow")),o=0,i.interrupt=void 0,c):(t.consume(W),R)}function q(W,N){const M=i.sliceStream(W);if(N&&M.push(null),W.previous=s,s&&(s.next=W),s=W,u.defineSkip(W.start),u.write(M),i.parser.lazy[W.start.line]){let E=u.events.length;for(;E--;)if(u.events[E][1].start.offset<l&&(!u.events[E][1].end||u.events[E][1].end.offset>l))return;const H=i.events.length;let V=H,ee,he;for(;V--;)if(i.events[V][0]==="exit"&&i.events[V][1].type==="chunkFlow"){if(ee){he=i.events[V][1].end;break}ee=!0}for(B(o),E=H;E<i.events.length;)i.events[E][1].end={...he},E++;Gt(i.events,V+1,0,i.events.slice(H)),i.events.length=E}}function B(W){let N=n.length;for(;N-- >W;){const M=n[N];i.containerState=M[1],M[0].exit.call(i,t)}n.length=W}function X(){u.write([null]),s=void 0,u=void 0,i.containerState._closeFlow=void 0}}function Fw(t,i,n){return _e(t,t.attempt(this.parser.constructs.document,i,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Fi(t){if(t===null||rt(t)||Iw(t))return 1;if(Cw(t))return 2}function Ru(t,i,n){const o=[];let u=-1;for(;++u<t.length;){const s=t[u].resolveAll;s&&!o.includes(s)&&(i=s(i,n),o.push(s))}return i}const Iu={name:"attention",resolveAll:Mw,tokenize:Ow};function Mw(t,i){let n=-1,o,u,s,l,c,h,d,p;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(o=n;o--;)if(t[o][0]==="exit"&&t[o][1].type==="attentionSequence"&&t[o][1]._open&&i.sliceSerialize(t[o][1]).charCodeAt(0)===i.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[o][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[o][1].end.offset-t[o][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;h=t[o][1].end.offset-t[o][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const g={...t[o][1].end},b={...t[n][1].start};Bl(g,-h),Bl(b,h),l={type:h>1?"strongSequence":"emphasisSequence",start:g,end:{...t[o][1].end}},c={type:h>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:b},s={type:h>1?"strongText":"emphasisText",start:{...t[o][1].end},end:{...t[n][1].start}},u={type:h>1?"strong":"emphasis",start:{...l.start},end:{...c.end}},t[o][1].end={...l.start},t[n][1].start={...c.end},d=[],t[o][1].end.offset-t[o][1].start.offset&&(d=It(d,[["enter",t[o][1],i],["exit",t[o][1],i]])),d=It(d,[["enter",u,i],["enter",l,i],["exit",l,i],["enter",s,i]]),d=It(d,Ru(i.parser.constructs.insideSpan.null,t.slice(o+1,n),i)),d=It(d,[["exit",s,i],["enter",c,i],["exit",c,i],["exit",u,i]]),t[n][1].end.offset-t[n][1].start.offset?(p=2,d=It(d,[["enter",t[n][1],i],["exit",t[n][1],i]])):p=0,Gt(t,o-1,n-o+3,d),n=o+d.length-p-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function Ow(t,i){const n=this.parser.constructs.attentionMarkers.null,o=this.previous,u=Fi(o);let s;return l;function l(h){return s=h,t.enter("attentionSequence"),c(h)}function c(h){if(h===s)return t.consume(h),c;const d=t.exit("attentionSequence"),p=Fi(h),g=!p||p===2&&u||n.includes(h),b=!u||u===2&&p||n.includes(o);return d._open=!!(s===42?g:g&&(u||!b)),d._close=!!(s===42?b:b&&(p||!g)),i(h)}}function Bl(t,i){t.column+=i,t.offset+=i,t._bufferIndex+=i}const Lw={name:"autolink",tokenize:Rw};function Rw(t,i,n){let o=0;return u;function u(w){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(w),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(w){return Ht(w)?(t.consume(w),l):w===64?n(w):d(w)}function l(w){return w===43||w===45||w===46||Bt(w)?(o=1,c(w)):d(w)}function c(w){return w===58?(t.consume(w),o=0,h):(w===43||w===45||w===46||Bt(w))&&o++<32?(t.consume(w),c):(o=0,d(w))}function h(w){return w===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(w),t.exit("autolinkMarker"),t.exit("autolink"),i):w===null||w===32||w===60||Su(w)?n(w):(t.consume(w),h)}function d(w){return w===64?(t.consume(w),p):_w(w)?(t.consume(w),d):n(w)}function p(w){return Bt(w)?g(w):n(w)}function g(w){return w===46?(t.consume(w),o=0,p):w===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(w),t.exit("autolinkMarker"),t.exit("autolink"),i):b(w)}function b(w){if((w===45||Bt(w))&&o++<63){const T=w===45?b:g;return t.consume(w),T}return n(w)}}const Li={partial:!0,tokenize:Bw};function Bw(t,i,n){return o;function o(s){return ge(s)?_e(t,u,"linePrefix")(s):u(s)}function u(s){return s===null||te(s)?i(s):n(s)}}const mc={continuation:{tokenize:$w},exit:Nw,name:"blockQuote",tokenize:Dw};function Dw(t,i,n){const o=this;return u;function u(l){if(l===62){const c=o.containerState;return c.open||(t.enter("blockQuote",{_container:!0}),c.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(l),t.exit("blockQuoteMarker"),s}return n(l)}function s(l){return ge(l)?(t.enter("blockQuotePrefixWhitespace"),t.consume(l),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),i):(t.exit("blockQuotePrefix"),i(l))}}function $w(t,i,n){const o=this;return u;function u(l){return ge(l)?_e(t,s,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):s(l)}function s(l){return t.attempt(mc,i,n)(l)}}function Nw(t){t.exit("blockQuote")}const yc={name:"characterEscape",tokenize:zw};function zw(t,i,n){return o;function o(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),u}function u(s){return Sw(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),i):n(s)}}const wc={name:"characterReference",tokenize:Ww};function Ww(t,i,n){const o=this;let u=0,s,l;return c;function c(g){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(g),t.exit("characterReferenceMarker"),h}function h(g){return g===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(g),t.exit("characterReferenceMarkerNumeric"),d):(t.enter("characterReferenceValue"),s=31,l=Bt,p(g))}function d(g){return g===88||g===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(g),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,l=kw,p):(t.enter("characterReferenceValue"),s=7,l=Cu,p(g))}function p(g){if(g===59&&u){const b=t.exit("characterReferenceValue");return l===Bt&&!Lu(o.sliceSerialize(b))?n(g):(t.enter("characterReferenceMarker"),t.consume(g),t.exit("characterReferenceMarker"),t.exit("characterReference"),i)}return l(g)&&u++<s?(t.consume(g),p):n(g)}}const Dl={partial:!0,tokenize:Uw},$l={concrete:!0,name:"codeFenced",tokenize:qw};function qw(t,i,n){const o=this,u={partial:!0,tokenize:M};let s=0,l=0,c;return h;function h(E){return d(E)}function d(E){const H=o.events[o.events.length-1];return s=H&&H[1].type==="linePrefix"?H[2].sliceSerialize(H[1],!0).length:0,c=E,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),p(E)}function p(E){return E===c?(l++,t.consume(E),p):l<3?n(E):(t.exit("codeFencedFenceSequence"),ge(E)?_e(t,g,"whitespace")(E):g(E))}function g(E){return E===null||te(E)?(t.exit("codeFencedFence"),o.interrupt?i(E):t.check(Dl,R,N)(E)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),b(E))}function b(E){return E===null||te(E)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),g(E)):ge(E)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),_e(t,w,"whitespace")(E)):E===96&&E===c?n(E):(t.consume(E),b)}function w(E){return E===null||te(E)?g(E):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),T(E))}function T(E){return E===null||te(E)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),g(E)):E===96&&E===c?n(E):(t.consume(E),T)}function R(E){return t.attempt(u,N,q)(E)}function q(E){return t.enter("lineEnding"),t.consume(E),t.exit("lineEnding"),B}function B(E){return s>0&&ge(E)?_e(t,X,"linePrefix",s+1)(E):X(E)}function X(E){return E===null||te(E)?t.check(Dl,R,N)(E):(t.enter("codeFlowValue"),W(E))}function W(E){return E===null||te(E)?(t.exit("codeFlowValue"),X(E)):(t.consume(E),W)}function N(E){return t.exit("codeFenced"),i(E)}function M(E,H,V){let ee=0;return he;function he(ce){return E.enter("lineEnding"),E.consume(ce),E.exit("lineEnding"),Q}function Q(ce){return E.enter("codeFencedFence"),ge(ce)?_e(E,G,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ce):G(ce)}function G(ce){return ce===c?(E.enter("codeFencedFenceSequence"),me(ce)):V(ce)}function me(ce){return ce===c?(ee++,E.consume(ce),me):ee>=l?(E.exit("codeFencedFenceSequence"),ge(ce)?_e(E,Ee,"whitespace")(ce):Ee(ce)):V(ce)}function Ee(ce){return ce===null||te(ce)?(E.exit("codeFencedFence"),H(ce)):V(ce)}}}function Uw(t,i,n){const o=this;return u;function u(l){return l===null?n(l):(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),s)}function s(l){return o.parser.lazy[o.now().line]?n(l):i(l)}}const au={name:"codeIndented",tokenize:Yw},Hw={partial:!0,tokenize:Gw};function Yw(t,i,n){const o=this;return u;function u(d){return t.enter("codeIndented"),_e(t,s,"linePrefix",5)(d)}function s(d){const p=o.events[o.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?l(d):n(d)}function l(d){return d===null?h(d):te(d)?t.attempt(Hw,l,h)(d):(t.enter("codeFlowValue"),c(d))}function c(d){return d===null||te(d)?(t.exit("codeFlowValue"),l(d)):(t.consume(d),c)}function h(d){return t.exit("codeIndented"),i(d)}}function Gw(t,i,n){const o=this;return u;function u(l){return o.parser.lazy[o.now().line]?n(l):te(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),u):_e(t,s,"linePrefix",5)(l)}function s(l){const c=o.events[o.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?i(l):te(l)?u(l):n(l)}}const Vw={name:"codeText",previous:Xw,resolve:Qw,tokenize:Kw};function Qw(t){let i=t.length-4,n=3,o,u;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[i][1].type==="lineEnding"||t[i][1].type==="space")){for(o=n;++o<i;)if(t[o][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[i][1].type="codeTextPadding",n+=2,i-=2;break}}for(o=n-1,i++;++o<=i;)u===void 0?o!==i&&t[o][1].type!=="lineEnding"&&(u=o):(o===i||t[o][1].type==="lineEnding")&&(t[u][1].type="codeTextData",o!==u+2&&(t[u][1].end=t[o-1][1].end,t.splice(u+2,o-u-2),i-=o-u-2,o=u+2),u=void 0);return t}function Xw(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Kw(t,i,n){let o=0,u,s;return l;function l(g){return t.enter("codeText"),t.enter("codeTextSequence"),c(g)}function c(g){return g===96?(t.consume(g),o++,c):(t.exit("codeTextSequence"),h(g))}function h(g){return g===null?n(g):g===32?(t.enter("space"),t.consume(g),t.exit("space"),h):g===96?(s=t.enter("codeTextSequence"),u=0,p(g)):te(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),h):(t.enter("codeTextData"),d(g))}function d(g){return g===null||g===32||g===96||te(g)?(t.exit("codeTextData"),h(g)):(t.consume(g),d)}function p(g){return g===96?(t.consume(g),u++,p):u===o?(t.exit("codeTextSequence"),t.exit("codeText"),i(g)):(s.type="codeTextData",d(g))}}class Jw{constructor(i){this.left=i?[...i]:[],this.right=[]}get(i){if(i<0||i>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+i+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return i<this.left.length?this.left[i]:this.right[this.right.length-i+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(i,n){const o=n??Number.POSITIVE_INFINITY;return o<this.left.length?this.left.slice(i,o):i>this.left.length?this.right.slice(this.right.length-o+this.left.length,this.right.length-i+this.left.length).reverse():this.left.slice(i).concat(this.right.slice(this.right.length-o+this.left.length).reverse())}splice(i,n,o){const u=n||0;this.setCursor(Math.trunc(i));const s=this.right.splice(this.right.length-u,Number.POSITIVE_INFINITY);return o&&Sr(this.left,o),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(i){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(i)}pushMany(i){this.setCursor(Number.POSITIVE_INFINITY),Sr(this.left,i)}unshift(i){this.setCursor(0),this.right.push(i)}unshiftMany(i){this.setCursor(0),Sr(this.right,i.reverse())}setCursor(i){if(!(i===this.left.length||i>this.left.length&&this.right.length===0||i<0&&this.left.length===0))if(i<this.left.length){const n=this.left.splice(i,Number.POSITIVE_INFINITY);Sr(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-i,Number.POSITIVE_INFINITY);Sr(this.left,n.reverse())}}}function Sr(t,i){let n=0;if(i.length<1e4)t.push(...i);else for(;n<i.length;)t.push(...i.slice(n,n+1e4)),n+=1e4}function xc(t){const i={};let n=-1,o,u,s,l,c,h,d;const p=new Jw(t);for(;++n<p.length;){for(;n in i;)n=i[n];if(o=p.get(n),n&&o[1].type==="chunkFlow"&&p.get(n-1)[1].type==="listItemPrefix"&&(h=o[1]._tokenizer.events,s=0,s<h.length&&h[s][1].type==="lineEndingBlank"&&(s+=2),s<h.length&&h[s][1].type==="content"))for(;++s<h.length&&h[s][1].type!=="content";)h[s][1].type==="chunkText"&&(h[s][1]._isInFirstContentOfListItem=!0,s++);if(o[0]==="enter")o[1].contentType&&(Object.assign(i,jw(p,n)),n=i[n],d=!0);else if(o[1]._container){for(s=n,u=void 0;s--;)if(l=p.get(s),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(u&&(p.get(u)[1].type="lineEndingBlank"),l[1].type="lineEnding",u=s);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;u&&(o[1].end={...p.get(u)[1].start},c=p.slice(u,n),c.unshift(o),p.splice(u,n-u+1,c))}}return Gt(t,0,Number.POSITIVE_INFINITY,p.slice(0)),!d}function jw(t,i){const n=t.get(i)[1],o=t.get(i)[2];let u=i-1;const s=[];let l=n._tokenizer;l||(l=o.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const c=l.events,h=[],d={};let p,g,b=-1,w=n,T=0,R=0;const q=[R];for(;w;){for(;t.get(++u)[1]!==w;);s.push(u),w._tokenizer||(p=o.sliceStream(w),w.next||p.push(null),g&&l.defineSkip(w.start),w._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(p),w._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),g=w,w=w.next}for(w=n;++b<c.length;)c[b][0]==="exit"&&c[b-1][0]==="enter"&&c[b][1].type===c[b-1][1].type&&c[b][1].start.line!==c[b][1].end.line&&(R=b+1,q.push(R),w._tokenizer=void 0,w.previous=void 0,w=w.next);for(l.events=[],w?(w._tokenizer=void 0,w.previous=void 0):q.pop(),b=q.length;b--;){const B=c.slice(q[b],q[b+1]),X=s.pop();h.push([X,X+B.length-1]),t.splice(X,2,B)}for(h.reverse(),b=-1;++b<h.length;)d[T+h[b][0]]=T+h[b][1],T+=h[b][1]-h[b][0]-1;return d}const Zw={resolve:tx,tokenize:nx},ex={partial:!0,tokenize:rx};function tx(t){return xc(t),t}function nx(t,i){let n;return o;function o(c){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),u(c)}function u(c){return c===null?s(c):te(c)?t.check(ex,l,s)(c):(t.consume(c),u)}function s(c){return t.exit("chunkContent"),t.exit("content"),i(c)}function l(c){return t.consume(c),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,u}}function rx(t,i,n){const o=this;return u;function u(l){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),_e(t,s,"linePrefix")}function s(l){if(l===null||te(l))return n(l);const c=o.events[o.events.length-1];return!o.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?i(l):t.interrupt(o.parser.constructs.flow,n,i)(l)}}function bc(t,i,n,o,u,s,l,c,h){const d=h||Number.POSITIVE_INFINITY;let p=0;return g;function g(B){return B===60?(t.enter(o),t.enter(u),t.enter(s),t.consume(B),t.exit(s),b):B===null||B===32||B===41||Su(B)?n(B):(t.enter(o),t.enter(l),t.enter(c),t.enter("chunkString",{contentType:"string"}),R(B))}function b(B){return B===62?(t.enter(s),t.consume(B),t.exit(s),t.exit(u),t.exit(o),i):(t.enter(c),t.enter("chunkString",{contentType:"string"}),w(B))}function w(B){return B===62?(t.exit("chunkString"),t.exit(c),b(B)):B===null||B===60||te(B)?n(B):(t.consume(B),B===92?T:w)}function T(B){return B===60||B===62||B===92?(t.consume(B),w):w(B)}function R(B){return!p&&(B===null||B===41||rt(B))?(t.exit("chunkString"),t.exit(c),t.exit(l),t.exit(o),i(B)):p<d&&B===40?(t.consume(B),p++,R):B===41?(t.consume(B),p--,R):B===null||B===32||B===40||Su(B)?n(B):(t.consume(B),B===92?q:R)}function q(B){return B===40||B===41||B===92?(t.consume(B),R):R(B)}}function vc(t,i,n,o,u,s){const l=this;let c=0,h;return d;function d(w){return t.enter(o),t.enter(u),t.consume(w),t.exit(u),t.enter(s),p}function p(w){return c>999||w===null||w===91||w===93&&!h||w===94&&!c&&"_hiddenFootnoteSupport"in l.parser.constructs?n(w):w===93?(t.exit(s),t.enter(u),t.consume(w),t.exit(u),t.exit(o),i):te(w)?(t.enter("lineEnding"),t.consume(w),t.exit("lineEnding"),p):(t.enter("chunkString",{contentType:"string"}),g(w))}function g(w){return w===null||w===91||w===93||te(w)||c++>999?(t.exit("chunkString"),p(w)):(t.consume(w),h||(h=!ge(w)),w===92?b:g)}function b(w){return w===91||w===92||w===93?(t.consume(w),c++,g):g(w)}}function _c(t,i,n,o,u,s){let l;return c;function c(b){return b===34||b===39||b===40?(t.enter(o),t.enter(u),t.consume(b),t.exit(u),l=b===40?41:b,h):n(b)}function h(b){return b===l?(t.enter(u),t.consume(b),t.exit(u),t.exit(o),i):(t.enter(s),d(b))}function d(b){return b===l?(t.exit(s),h(l)):b===null?n(b):te(b)?(t.enter("lineEnding"),t.consume(b),t.exit("lineEnding"),_e(t,d,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),p(b))}function p(b){return b===l||b===null||te(b)?(t.exit("chunkString"),d(b)):(t.consume(b),b===92?g:p)}function g(b){return b===l||b===92?(t.consume(b),p):p(b)}}function Ar(t,i){let n;return o;function o(u){return te(u)?(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),n=!0,o):ge(u)?_e(t,o,n?"linePrefix":"lineSuffix")(u):i(u)}}const ix={name:"definition",tokenize:ux},ox={partial:!0,tokenize:ax};function ux(t,i,n){const o=this;let u;return s;function s(w){return t.enter("definition"),l(w)}function l(w){return vc.call(o,t,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(w)}function c(w){return u=ur(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)),w===58?(t.enter("definitionMarker"),t.consume(w),t.exit("definitionMarker"),h):n(w)}function h(w){return rt(w)?Ar(t,d)(w):d(w)}function d(w){return bc(t,p,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(w)}function p(w){return t.attempt(ox,g,g)(w)}function g(w){return ge(w)?_e(t,b,"whitespace")(w):b(w)}function b(w){return w===null||te(w)?(t.exit("definition"),o.parser.defined.push(u),i(w)):n(w)}}function ax(t,i,n){return o;function o(c){return rt(c)?Ar(t,u)(c):n(c)}function u(c){return _c(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function s(c){return ge(c)?_e(t,l,"whitespace")(c):l(c)}function l(c){return c===null||te(c)?i(c):n(c)}}const sx={name:"hardBreakEscape",tokenize:lx};function lx(t,i,n){return o;function o(s){return t.enter("hardBreakEscape"),t.consume(s),u}function u(s){return te(s)?(t.exit("hardBreakEscape"),i(s)):n(s)}}const cx={name:"headingAtx",resolve:fx,tokenize:hx};function fx(t,i){let n=t.length-2,o=3,u,s;return t[o][1].type==="whitespace"&&(o+=2),n-2>o&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(o===n-1||n-4>o&&t[n-2][1].type==="whitespace")&&(n-=o+1===n?2:4),n>o&&(u={type:"atxHeadingText",start:t[o][1].start,end:t[n][1].end},s={type:"chunkText",start:t[o][1].start,end:t[n][1].end,contentType:"text"},Gt(t,o,n-o+1,[["enter",u,i],["enter",s,i],["exit",s,i],["exit",u,i]])),t}function hx(t,i,n){let o=0;return u;function u(p){return t.enter("atxHeading"),s(p)}function s(p){return t.enter("atxHeadingSequence"),l(p)}function l(p){return p===35&&o++<6?(t.consume(p),l):p===null||rt(p)?(t.exit("atxHeadingSequence"),c(p)):n(p)}function c(p){return p===35?(t.enter("atxHeadingSequence"),h(p)):p===null||te(p)?(t.exit("atxHeading"),i(p)):ge(p)?_e(t,c,"whitespace")(p):(t.enter("atxHeadingText"),d(p))}function h(p){return p===35?(t.consume(p),h):(t.exit("atxHeadingSequence"),c(p))}function d(p){return p===null||p===35||rt(p)?(t.exit("atxHeadingText"),c(p)):(t.consume(p),d)}}const dx=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Nl=["pre","script","style","textarea"],px={concrete:!0,name:"htmlFlow",resolveTo:yx,tokenize:wx},gx={partial:!0,tokenize:bx},mx={partial:!0,tokenize:xx};function yx(t){let i=t.length;for(;i--&&!(t[i][0]==="enter"&&t[i][1].type==="htmlFlow"););return i>1&&t[i-2][1].type==="linePrefix"&&(t[i][1].start=t[i-2][1].start,t[i+1][1].start=t[i-2][1].start,t.splice(i-2,2)),t}function wx(t,i,n){const o=this;let u,s,l,c,h;return d;function d(S){return p(S)}function p(S){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(S),g}function g(S){return S===33?(t.consume(S),b):S===47?(t.consume(S),s=!0,R):S===63?(t.consume(S),u=3,o.interrupt?i:_):Ht(S)?(t.consume(S),l=String.fromCharCode(S),q):n(S)}function b(S){return S===45?(t.consume(S),u=2,w):S===91?(t.consume(S),u=5,c=0,T):Ht(S)?(t.consume(S),u=4,o.interrupt?i:_):n(S)}function w(S){return S===45?(t.consume(S),o.interrupt?i:_):n(S)}function T(S){const ot="CDATA[";return S===ot.charCodeAt(c++)?(t.consume(S),c===ot.length?o.interrupt?i:G:T):n(S)}function R(S){return Ht(S)?(t.consume(S),l=String.fromCharCode(S),q):n(S)}function q(S){if(S===null||S===47||S===62||rt(S)){const ot=S===47,Qe=l.toLowerCase();return!ot&&!s&&Nl.includes(Qe)?(u=1,o.interrupt?i(S):G(S)):dx.includes(l.toLowerCase())?(u=6,ot?(t.consume(S),B):o.interrupt?i(S):G(S)):(u=7,o.interrupt&&!o.parser.lazy[o.now().line]?n(S):s?X(S):W(S))}return S===45||Bt(S)?(t.consume(S),l+=String.fromCharCode(S),q):n(S)}function B(S){return S===62?(t.consume(S),o.interrupt?i:G):n(S)}function X(S){return ge(S)?(t.consume(S),X):he(S)}function W(S){return S===47?(t.consume(S),he):S===58||S===95||Ht(S)?(t.consume(S),N):ge(S)?(t.consume(S),W):he(S)}function N(S){return S===45||S===46||S===58||S===95||Bt(S)?(t.consume(S),N):M(S)}function M(S){return S===61?(t.consume(S),E):ge(S)?(t.consume(S),M):W(S)}function E(S){return S===null||S===60||S===61||S===62||S===96?n(S):S===34||S===39?(t.consume(S),h=S,H):ge(S)?(t.consume(S),E):V(S)}function H(S){return S===h?(t.consume(S),h=null,ee):S===null||te(S)?n(S):(t.consume(S),H)}function V(S){return S===null||S===34||S===39||S===47||S===60||S===61||S===62||S===96||rt(S)?M(S):(t.consume(S),V)}function ee(S){return S===47||S===62||ge(S)?W(S):n(S)}function he(S){return S===62?(t.consume(S),Q):n(S)}function Q(S){return S===null||te(S)?G(S):ge(S)?(t.consume(S),Q):n(S)}function G(S){return S===45&&u===2?(t.consume(S),De):S===60&&u===1?(t.consume(S),ke):S===62&&u===4?(t.consume(S),Te):S===63&&u===3?(t.consume(S),_):S===93&&u===5?(t.consume(S),Et):te(S)&&(u===6||u===7)?(t.exit("htmlFlowData"),t.check(gx,At,me)(S)):S===null||te(S)?(t.exit("htmlFlowData"),me(S)):(t.consume(S),G)}function me(S){return t.check(mx,Ee,At)(S)}function Ee(S){return t.enter("lineEnding"),t.consume(S),t.exit("lineEnding"),ce}function ce(S){return S===null||te(S)?me(S):(t.enter("htmlFlowData"),G(S))}function De(S){return S===45?(t.consume(S),_):G(S)}function ke(S){return S===47?(t.consume(S),l="",Le):G(S)}function Le(S){if(S===62){const ot=l.toLowerCase();return Nl.includes(ot)?(t.consume(S),Te):G(S)}return Ht(S)&&l.length<8?(t.consume(S),l+=String.fromCharCode(S),Le):G(S)}function Et(S){return S===93?(t.consume(S),_):G(S)}function _(S){return S===62?(t.consume(S),Te):S===45&&u===2?(t.consume(S),_):G(S)}function Te(S){return S===null||te(S)?(t.exit("htmlFlowData"),At(S)):(t.consume(S),Te)}function At(S){return t.exit("htmlFlow"),i(S)}}function xx(t,i,n){const o=this;return u;function u(l){return te(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),s):n(l)}function s(l){return o.parser.lazy[o.now().line]?n(l):i(l)}}function bx(t,i,n){return o;function o(u){return t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),t.attempt(Li,i,n)}}const vx={name:"htmlText",tokenize:_x};function _x(t,i,n){const o=this;let u,s,l;return c;function c(_){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(_),h}function h(_){return _===33?(t.consume(_),d):_===47?(t.consume(_),M):_===63?(t.consume(_),W):Ht(_)?(t.consume(_),V):n(_)}function d(_){return _===45?(t.consume(_),p):_===91?(t.consume(_),s=0,T):Ht(_)?(t.consume(_),X):n(_)}function p(_){return _===45?(t.consume(_),w):n(_)}function g(_){return _===null?n(_):_===45?(t.consume(_),b):te(_)?(l=g,ke(_)):(t.consume(_),g)}function b(_){return _===45?(t.consume(_),w):g(_)}function w(_){return _===62?De(_):_===45?b(_):g(_)}function T(_){const Te="CDATA[";return _===Te.charCodeAt(s++)?(t.consume(_),s===Te.length?R:T):n(_)}function R(_){return _===null?n(_):_===93?(t.consume(_),q):te(_)?(l=R,ke(_)):(t.consume(_),R)}function q(_){return _===93?(t.consume(_),B):R(_)}function B(_){return _===62?De(_):_===93?(t.consume(_),B):R(_)}function X(_){return _===null||_===62?De(_):te(_)?(l=X,ke(_)):(t.consume(_),X)}function W(_){return _===null?n(_):_===63?(t.consume(_),N):te(_)?(l=W,ke(_)):(t.consume(_),W)}function N(_){return _===62?De(_):W(_)}function M(_){return Ht(_)?(t.consume(_),E):n(_)}function E(_){return _===45||Bt(_)?(t.consume(_),E):H(_)}function H(_){return te(_)?(l=H,ke(_)):ge(_)?(t.consume(_),H):De(_)}function V(_){return _===45||Bt(_)?(t.consume(_),V):_===47||_===62||rt(_)?ee(_):n(_)}function ee(_){return _===47?(t.consume(_),De):_===58||_===95||Ht(_)?(t.consume(_),he):te(_)?(l=ee,ke(_)):ge(_)?(t.consume(_),ee):De(_)}function he(_){return _===45||_===46||_===58||_===95||Bt(_)?(t.consume(_),he):Q(_)}function Q(_){return _===61?(t.consume(_),G):te(_)?(l=Q,ke(_)):ge(_)?(t.consume(_),Q):ee(_)}function G(_){return _===null||_===60||_===61||_===62||_===96?n(_):_===34||_===39?(t.consume(_),u=_,me):te(_)?(l=G,ke(_)):ge(_)?(t.consume(_),G):(t.consume(_),Ee)}function me(_){return _===u?(t.consume(_),u=void 0,ce):_===null?n(_):te(_)?(l=me,ke(_)):(t.consume(_),me)}function Ee(_){return _===null||_===34||_===39||_===60||_===61||_===96?n(_):_===47||_===62||rt(_)?ee(_):(t.consume(_),Ee)}function ce(_){return _===47||_===62||rt(_)?ee(_):n(_)}function De(_){return _===62?(t.consume(_),t.exit("htmlTextData"),t.exit("htmlText"),i):n(_)}function ke(_){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(_),t.exit("lineEnding"),Le}function Le(_){return ge(_)?_e(t,Et,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_):Et(_)}function Et(_){return t.enter("htmlTextData"),l(_)}}const Bu={name:"labelEnd",resolveAll:Ix,resolveTo:Ex,tokenize:Ax},kx={tokenize:Tx},Sx={tokenize:Px},Cx={tokenize:Fx};function Ix(t){let i=-1;const n=[];for(;++i<t.length;){const o=t[i][1];if(n.push(t[i]),o.type==="labelImage"||o.type==="labelLink"||o.type==="labelEnd"){const u=o.type==="labelImage"?4:2;o.type="data",i+=u}}return t.length!==n.length&&Gt(t,0,t.length,n),t}function Ex(t,i){let n=t.length,o=0,u,s,l,c;for(;n--;)if(u=t[n][1],s){if(u.type==="link"||u.type==="labelLink"&&u._inactive)break;t[n][0]==="enter"&&u.type==="labelLink"&&(u._inactive=!0)}else if(l){if(t[n][0]==="enter"&&(u.type==="labelImage"||u.type==="labelLink")&&!u._balanced&&(s=n,u.type!=="labelLink")){o=2;break}}else u.type==="labelEnd"&&(l=n);const h={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[s][1].start},end:{...t[l][1].end}},p={type:"labelText",start:{...t[s+o+2][1].end},end:{...t[l-2][1].start}};return c=[["enter",h,i],["enter",d,i]],c=It(c,t.slice(s+1,s+o+3)),c=It(c,[["enter",p,i]]),c=It(c,Ru(i.parser.constructs.insideSpan.null,t.slice(s+o+4,l-3),i)),c=It(c,[["exit",p,i],t[l-2],t[l-1],["exit",d,i]]),c=It(c,t.slice(l+1)),c=It(c,[["exit",h,i]]),Gt(t,s,t.length,c),t}function Ax(t,i,n){const o=this;let u=o.events.length,s,l;for(;u--;)if((o.events[u][1].type==="labelImage"||o.events[u][1].type==="labelLink")&&!o.events[u][1]._balanced){s=o.events[u][1];break}return c;function c(b){return s?s._inactive?g(b):(l=o.parser.defined.includes(ur(o.sliceSerialize({start:s.end,end:o.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(b),t.exit("labelMarker"),t.exit("labelEnd"),h):n(b)}function h(b){return b===40?t.attempt(kx,p,l?p:g)(b):b===91?t.attempt(Sx,p,l?d:g)(b):l?p(b):g(b)}function d(b){return t.attempt(Cx,p,g)(b)}function p(b){return i(b)}function g(b){return s._balanced=!0,n(b)}}function Tx(t,i,n){return o;function o(g){return t.enter("resource"),t.enter("resourceMarker"),t.consume(g),t.exit("resourceMarker"),u}function u(g){return rt(g)?Ar(t,s)(g):s(g)}function s(g){return g===41?p(g):bc(t,l,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function l(g){return rt(g)?Ar(t,h)(g):p(g)}function c(g){return n(g)}function h(g){return g===34||g===39||g===40?_c(t,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):p(g)}function d(g){return rt(g)?Ar(t,p)(g):p(g)}function p(g){return g===41?(t.enter("resourceMarker"),t.consume(g),t.exit("resourceMarker"),t.exit("resource"),i):n(g)}}function Px(t,i,n){const o=this;return u;function u(c){return vc.call(o,t,s,l,"reference","referenceMarker","referenceString")(c)}function s(c){return o.parser.defined.includes(ur(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)))?i(c):n(c)}function l(c){return n(c)}}function Fx(t,i,n){return o;function o(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),u}function u(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),i):n(s)}}const Mx={name:"labelStartImage",resolveAll:Bu.resolveAll,tokenize:Ox};function Ox(t,i,n){const o=this;return u;function u(c){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(c),t.exit("labelImageMarker"),s}function s(c){return c===91?(t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelImage"),l):n(c)}function l(c){return c===94&&"_hiddenFootnoteSupport"in o.parser.constructs?n(c):i(c)}}const Lx={name:"labelStartLink",resolveAll:Bu.resolveAll,tokenize:Rx};function Rx(t,i,n){const o=this;return u;function u(l){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelLink"),s}function s(l){return l===94&&"_hiddenFootnoteSupport"in o.parser.constructs?n(l):i(l)}}const su={name:"lineEnding",tokenize:Bx};function Bx(t,i){return n;function n(o){return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),_e(t,i,"linePrefix")}}const Ei={name:"thematicBreak",tokenize:Dx};function Dx(t,i,n){let o=0,u;return s;function s(d){return t.enter("thematicBreak"),l(d)}function l(d){return u=d,c(d)}function c(d){return d===u?(t.enter("thematicBreakSequence"),h(d)):o>=3&&(d===null||te(d))?(t.exit("thematicBreak"),i(d)):n(d)}function h(d){return d===u?(t.consume(d),o++,h):(t.exit("thematicBreakSequence"),ge(d)?_e(t,c,"whitespace")(d):c(d))}}const et={continuation:{tokenize:Wx},exit:Ux,name:"list",tokenize:zx},$x={partial:!0,tokenize:Hx},Nx={partial:!0,tokenize:qx};function zx(t,i,n){const o=this,u=o.events[o.events.length-1];let s=u&&u[1].type==="linePrefix"?u[2].sliceSerialize(u[1],!0).length:0,l=0;return c;function c(w){const T=o.containerState.type||(w===42||w===43||w===45?"listUnordered":"listOrdered");if(T==="listUnordered"?!o.containerState.marker||w===o.containerState.marker:Cu(w)){if(o.containerState.type||(o.containerState.type=T,t.enter(T,{_container:!0})),T==="listUnordered")return t.enter("listItemPrefix"),w===42||w===45?t.check(Ei,n,d)(w):d(w);if(!o.interrupt||w===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),h(w)}return n(w)}function h(w){return Cu(w)&&++l<10?(t.consume(w),h):(!o.interrupt||l<2)&&(o.containerState.marker?w===o.containerState.marker:w===41||w===46)?(t.exit("listItemValue"),d(w)):n(w)}function d(w){return t.enter("listItemMarker"),t.consume(w),t.exit("listItemMarker"),o.containerState.marker=o.containerState.marker||w,t.check(Li,o.interrupt?n:p,t.attempt($x,b,g))}function p(w){return o.containerState.initialBlankLine=!0,s++,b(w)}function g(w){return ge(w)?(t.enter("listItemPrefixWhitespace"),t.consume(w),t.exit("listItemPrefixWhitespace"),b):n(w)}function b(w){return o.containerState.size=s+o.sliceSerialize(t.exit("listItemPrefix"),!0).length,i(w)}}function Wx(t,i,n){const o=this;return o.containerState._closeFlow=void 0,t.check(Li,u,s);function u(c){return o.containerState.furtherBlankLines=o.containerState.furtherBlankLines||o.containerState.initialBlankLine,_e(t,i,"listItemIndent",o.containerState.size+1)(c)}function s(c){return o.containerState.furtherBlankLines||!ge(c)?(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,l(c)):(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,t.attempt(Nx,i,l)(c))}function l(c){return o.containerState._closeFlow=!0,o.interrupt=void 0,_e(t,t.attempt(et,i,n),"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function qx(t,i,n){const o=this;return _e(t,u,"listItemIndent",o.containerState.size+1);function u(s){const l=o.events[o.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===o.containerState.size?i(s):n(s)}}function Ux(t){t.exit(this.containerState.type)}function Hx(t,i,n){const o=this;return _e(t,u,"listItemPrefixWhitespace",o.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function u(s){const l=o.events[o.events.length-1];return!ge(s)&&l&&l[1].type==="listItemPrefixWhitespace"?i(s):n(s)}}const zl={name:"setextUnderline",resolveTo:Yx,tokenize:Gx};function Yx(t,i){let n=t.length,o,u,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){o=n;break}t[n][1].type==="paragraph"&&(u=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const l={type:"setextHeading",start:{...t[o][1].start},end:{...t[t.length-1][1].end}};return t[u][1].type="setextHeadingText",s?(t.splice(u,0,["enter",l,i]),t.splice(s+1,0,["exit",t[o][1],i]),t[o][1].end={...t[s][1].end}):t[o][1]=l,t.push(["exit",l,i]),t}function Gx(t,i,n){const o=this;let u;return s;function s(d){let p=o.events.length,g;for(;p--;)if(o.events[p][1].type!=="lineEnding"&&o.events[p][1].type!=="linePrefix"&&o.events[p][1].type!=="content"){g=o.events[p][1].type==="paragraph";break}return!o.parser.lazy[o.now().line]&&(o.interrupt||g)?(t.enter("setextHeadingLine"),u=d,l(d)):n(d)}function l(d){return t.enter("setextHeadingLineSequence"),c(d)}function c(d){return d===u?(t.consume(d),c):(t.exit("setextHeadingLineSequence"),ge(d)?_e(t,h,"lineSuffix")(d):h(d))}function h(d){return d===null||te(d)?(t.exit("setextHeadingLine"),i(d)):n(d)}}const Vx={tokenize:Qx};function Qx(t){const i=this,n=t.attempt(Li,o,t.attempt(this.parser.constructs.flowInitial,u,_e(t,t.attempt(this.parser.constructs.flow,u,t.attempt(Zw,u)),"linePrefix")));return n;function o(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),i.currentConstruct=void 0,n}function u(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),i.currentConstruct=void 0,n}}const Xx={resolveAll:Sc()},Kx=kc("string"),Jx=kc("text");function kc(t){return{resolveAll:Sc(t==="text"?jx:void 0),tokenize:i};function i(n){const o=this,u=this.parser.constructs[t],s=n.attempt(u,l,c);return l;function l(p){return d(p)?s(p):c(p)}function c(p){if(p===null){n.consume(p);return}return n.enter("data"),n.consume(p),h}function h(p){return d(p)?(n.exit("data"),s(p)):(n.consume(p),h)}function d(p){if(p===null)return!0;const g=u[p];let b=-1;if(g)for(;++b<g.length;){const w=g[b];if(!w.previous||w.previous.call(o,o.previous))return!0}return!1}}}function Sc(t){return i;function i(n,o){let u=-1,s;for(;++u<=n.length;)s===void 0?n[u]&&n[u][1].type==="data"&&(s=u,u++):(!n[u]||n[u][1].type!=="data")&&(u!==s+2&&(n[s][1].end=n[u-1][1].end,n.splice(s+2,u-s-2),u=s+2),s=void 0);return t?t(n,o):n}}function jx(t,i){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const o=t[n-1][1],u=i.sliceStream(o);let s=u.length,l=-1,c=0,h;for(;s--;){const d=u[s];if(typeof d=="string"){for(l=d.length;d.charCodeAt(l-1)===32;)c++,l--;if(l)break;l=-1}else if(d===-2)h=!0,c++;else if(d!==-1){s++;break}}if(i._contentTypeTextTrailing&&n===t.length&&(c=0),c){const d={type:n===t.length||h||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?l:o.start._bufferIndex+l,_index:o.start._index+s,line:o.end.line,column:o.end.column-c,offset:o.end.offset-c},end:{...o.end}};o.end={...d.start},o.start.offset===o.end.offset?Object.assign(o,d):(t.splice(n,0,["enter",d,i],["exit",d,i]),n+=2)}n++}return t}const Zx={42:et,43:et,45:et,48:et,49:et,50:et,51:et,52:et,53:et,54:et,55:et,56:et,57:et,62:mc},eb={91:ix},tb={[-2]:au,[-1]:au,32:au},nb={35:cx,42:Ei,45:[zl,Ei],60:px,61:zl,95:Ei,96:$l,126:$l},rb={38:wc,92:yc},ib={[-5]:su,[-4]:su,[-3]:su,33:Mx,38:wc,42:Iu,60:[Lw,vx],91:Lx,92:[sx,yc],93:Bu,95:Iu,96:Vw},ob={null:[Iu,Xx]},ub={null:[42,95]},ab={null:[]},sb=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:ub,contentInitial:eb,disable:ab,document:Zx,flow:nb,flowInitial:tb,insideSpan:ob,string:rb,text:ib},Symbol.toStringTag,{value:"Module"}));function lb(t,i,n){let o={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const u={},s=[];let l=[],c=[];const h={attempt:H(M),check:H(E),consume:X,enter:W,exit:N,interrupt:H(E,{interrupt:!0})},d={code:null,containerState:{},defineSkip:R,events:[],now:T,parser:t,previous:null,sliceSerialize:b,sliceStream:w,write:g};let p=i.tokenize.call(d,h);return i.resolveAll&&s.push(i),d;function g(Q){return l=It(l,Q),q(),l[l.length-1]!==null?[]:(V(i,0),d.events=Ru(s,d.events,d),d.events)}function b(Q,G){return fb(w(Q),G)}function w(Q){return cb(l,Q)}function T(){const{_bufferIndex:Q,_index:G,line:me,column:Ee,offset:ce}=o;return{_bufferIndex:Q,_index:G,line:me,column:Ee,offset:ce}}function R(Q){u[Q.line]=Q.column,he()}function q(){let Q;for(;o._index<l.length;){const G=l[o._index];if(typeof G=="string")for(Q=o._index,o._bufferIndex<0&&(o._bufferIndex=0);o._index===Q&&o._bufferIndex<G.length;)B(G.charCodeAt(o._bufferIndex));else B(G)}}function B(Q){p=p(Q)}function X(Q){te(Q)?(o.line++,o.column=1,o.offset+=Q===-3?2:1,he()):Q!==-1&&(o.column++,o.offset++),o._bufferIndex<0?o._index++:(o._bufferIndex++,o._bufferIndex===l[o._index].length&&(o._bufferIndex=-1,o._index++)),d.previous=Q}function W(Q,G){const me=G||{};return me.type=Q,me.start=T(),d.events.push(["enter",me,d]),c.push(me),me}function N(Q){const G=c.pop();return G.end=T(),d.events.push(["exit",G,d]),G}function M(Q,G){V(Q,G.from)}function E(Q,G){G.restore()}function H(Q,G){return me;function me(Ee,ce,De){let ke,Le,Et,_;return Array.isArray(Ee)?At(Ee):"tokenize"in Ee?At([Ee]):Te(Ee);function Te(Pe){return In;function In(Xe){const mt=Xe!==null&&Pe[Xe],ln=Xe!==null&&Pe.null,Xt=[...Array.isArray(mt)?mt:mt?[mt]:[],...Array.isArray(ln)?ln:ln?[ln]:[]];return At(Xt)(Xe)}}function At(Pe){return ke=Pe,Le=0,Pe.length===0?De:S(Pe[Le])}function S(Pe){return In;function In(Xe){return _=ee(),Et=Pe,Pe.partial||(d.currentConstruct=Pe),Pe.name&&d.parser.constructs.disable.null.includes(Pe.name)?Qe():Pe.tokenize.call(G?Object.assign(Object.create(d),G):d,h,ot,Qe)(Xe)}}function ot(Pe){return Q(Et,_),ce}function Qe(Pe){return _.restore(),++Le<ke.length?S(ke[Le]):De}}}function V(Q,G){Q.resolveAll&&!s.includes(Q)&&s.push(Q),Q.resolve&&Gt(d.events,G,d.events.length-G,Q.resolve(d.events.slice(G),d)),Q.resolveTo&&(d.events=Q.resolveTo(d.events,d))}function ee(){const Q=T(),G=d.previous,me=d.currentConstruct,Ee=d.events.length,ce=Array.from(c);return{from:Ee,restore:De};function De(){o=Q,d.previous=G,d.currentConstruct=me,d.events.length=Ee,c=ce,he()}}function he(){o.line in u&&o.column<2&&(o.column=u[o.line],o.offset+=u[o.line]-1)}}function cb(t,i){const n=i.start._index,o=i.start._bufferIndex,u=i.end._index,s=i.end._bufferIndex;let l;if(n===u)l=[t[n].slice(o,s)];else{if(l=t.slice(n,u),o>-1){const c=l[0];typeof c=="string"?l[0]=c.slice(o):l.shift()}s>0&&l.push(t[u].slice(0,s))}return l}function fb(t,i){let n=-1;const o=[];let u;for(;++n<t.length;){const s=t[n];let l;if(typeof s=="string")l=s;else switch(s){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=i?" ":"	";break}case-1:{if(!i&&u)continue;l=" ";break}default:l=String.fromCharCode(s)}u=s===-2,o.push(l)}return o.join("")}function hb(t){const o={constructs:xw([sb,...(t||{}).extensions||[]]),content:u(Ew),defined:[],document:u(Tw),flow:u(Vx),lazy:{},string:u(Kx),text:u(Jx)};return o;function u(s){return l;function l(c){return lb(o,s,c)}}}function db(t){for(;!xc(t););return t}const Wl=/[\0\t\n\r]/g;function pb(){let t=1,i="",n=!0,o;return u;function u(s,l,c){const h=[];let d,p,g,b,w;for(s=i+(typeof s=="string"?s.toString():new TextDecoder(l||void 0).decode(s)),g=0,i="",n&&(s.charCodeAt(0)===65279&&g++,n=void 0);g<s.length;){if(Wl.lastIndex=g,d=Wl.exec(s),b=d&&d.index!==void 0?d.index:s.length,w=s.charCodeAt(b),!d){i=s.slice(g);break}if(w===10&&g===b&&o)h.push(-3),o=void 0;else switch(o&&(h.push(-5),o=void 0),g<b&&(h.push(s.slice(g,b)),t+=b-g),w){case 0:{h.push(65533),t++;break}case 9:{for(p=Math.ceil(t/4)*4,h.push(-2);t++<p;)h.push(-1);break}case 10:{h.push(-4),t=1;break}default:o=!0,t=1}g=b+1}return c&&(o&&h.push(-5),i&&h.push(i),h.push(null)),h}}const gb=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Cc(t){return t.replace(gb,mb)}function mb(t,i,n){if(i)return i;if(n.charCodeAt(0)===35){const u=n.charCodeAt(1),s=u===120||u===88;return gc(n.slice(s?2:1),s?16:10)}return Lu(n)||t}const Ic={}.hasOwnProperty;function yb(t,i,n){return typeof i!="string"&&(n=i,i=void 0),wb(n)(db(hb(n).document().write(pb()(t,i,!0))))}function wb(t){const i={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Lr),autolinkProtocol:ee,autolinkEmail:ee,atxHeading:s(cn),blockQuote:s(ln),characterEscape:ee,characterReference:ee,codeFenced:s(Xt),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:s(Xt,l),codeText:s(qn,l),codeTextData:ee,data:ee,codeFlowValue:ee,definition:s(Fr),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:s(ut),hardBreakEscape:s(Mr),hardBreakTrailing:s(Mr),htmlFlow:s(yt,l),htmlFlowData:ee,htmlText:s(yt,l),htmlTextData:ee,image:s(Or),label:l,link:s(Lr),listItem:s(at),listItemValue:b,listOrdered:s(fn,g),listUnordered:s(fn),paragraph:s(En),reference:S,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:s(cn),strong:s(Un),thematicBreak:s(An)},exit:{atxHeading:h(),atxHeadingSequence:M,autolink:h(),autolinkEmail:mt,autolinkProtocol:Xe,blockQuote:h(),characterEscapeValue:he,characterReferenceMarkerHexadecimal:Qe,characterReferenceMarkerNumeric:Qe,characterReferenceValue:Pe,characterReference:In,codeFenced:h(q),codeFencedFence:R,codeFencedFenceInfo:w,codeFencedFenceMeta:T,codeFlowValue:he,codeIndented:h(B),codeText:h(ce),codeTextData:he,data:he,definition:h(),definitionDestinationString:N,definitionLabelString:X,definitionTitleString:W,emphasis:h(),hardBreakEscape:h(G),hardBreakTrailing:h(G),htmlFlow:h(me),htmlFlowData:he,htmlText:h(Ee),htmlTextData:he,image:h(ke),label:Et,labelText:Le,lineEnding:Q,link:h(De),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:ot,resourceDestinationString:_,resourceTitleString:Te,resource:At,setextHeading:h(V),setextHeadingLineSequence:H,setextHeadingText:E,strong:h(),thematicBreak:h()}};Ec(i,(t||{}).mdastExtensions||[]);const n={};return o;function o(F){let $={type:"root",children:[]};const J={stack:[$],tokenStack:[],config:i,enter:c,exit:d,buffer:l,resume:p,data:n},ue=[];let de=-1;for(;++de<F.length;)if(F[de][1].type==="listOrdered"||F[de][1].type==="listUnordered")if(F[de][0]==="enter")ue.push(de);else{const He=ue.pop();de=u(F,He,de)}for(de=-1;++de<F.length;){const He=i[F[de][0]];Ic.call(He,F[de][1].type)&&He[F[de][1].type].call(Object.assign({sliceSerialize:F[de][2].sliceSerialize},J),F[de][1])}if(J.tokenStack.length>0){const He=J.tokenStack[J.tokenStack.length-1];(He[1]||ql).call(J,void 0,He[0])}for($.position={start:_n(F.length>0?F[0][1].start:{line:1,column:1,offset:0}),end:_n(F.length>0?F[F.length-2][1].end:{line:1,column:1,offset:0})},de=-1;++de<i.transforms.length;)$=i.transforms[de]($)||$;return $}function u(F,$,J){let ue=$-1,de=-1,He=!1,Tt,st,Kt,Jt;for(;++ue<=J;){const Ne=F[ue];switch(Ne[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ne[0]==="enter"?de++:de--,Jt=void 0;break}case"lineEndingBlank":{Ne[0]==="enter"&&(Tt&&!Jt&&!de&&!Kt&&(Kt=ue),Jt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Jt=void 0}if(!de&&Ne[0]==="enter"&&Ne[1].type==="listItemPrefix"||de===-1&&Ne[0]==="exit"&&(Ne[1].type==="listUnordered"||Ne[1].type==="listOrdered")){if(Tt){let $t=ue;for(st=void 0;$t--;){const Pt=F[$t];if(Pt[1].type==="lineEnding"||Pt[1].type==="lineEndingBlank"){if(Pt[0]==="exit")continue;st&&(F[st][1].type="lineEndingBlank",He=!0),Pt[1].type="lineEnding",st=$t}else if(!(Pt[1].type==="linePrefix"||Pt[1].type==="blockQuotePrefix"||Pt[1].type==="blockQuotePrefixWhitespace"||Pt[1].type==="blockQuoteMarker"||Pt[1].type==="listItemIndent"))break}Kt&&(!st||Kt<st)&&(Tt._spread=!0),Tt.end=Object.assign({},st?F[st][1].start:Ne[1].end),F.splice(st||ue,0,["exit",Tt,Ne[2]]),ue++,J++}if(Ne[1].type==="listItemPrefix"){const $t={type:"listItem",_spread:!1,start:Object.assign({},Ne[1].start),end:void 0};Tt=$t,F.splice(ue,0,["enter",$t,Ne[2]]),ue++,J++,Kt=void 0,Jt=!0}}}return F[$][1]._spread=He,J}function s(F,$){return J;function J(ue){c.call(this,F(ue),ue),$&&$.call(this,ue)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(F,$,J){this.stack[this.stack.length-1].children.push(F),this.stack.push(F),this.tokenStack.push([$,J||void 0]),F.position={start:_n($.start),end:void 0}}function h(F){return $;function $(J){F&&F.call(this,J),d.call(this,J)}}function d(F,$){const J=this.stack.pop(),ue=this.tokenStack.pop();if(ue)ue[0].type!==F.type&&($?$.call(this,F,ue[0]):(ue[1]||ql).call(this,F,ue[0]));else throw new Error("Cannot close `"+F.type+"` ("+Er({start:F.start,end:F.end})+"): it’s not open");J.position.end=_n(F.end)}function p(){return Ou(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function b(F){if(this.data.expectingFirstListItemValue){const $=this.stack[this.stack.length-2];$.start=Number.parseInt(this.sliceSerialize(F),10),this.data.expectingFirstListItemValue=void 0}}function w(){const F=this.resume(),$=this.stack[this.stack.length-1];$.lang=F}function T(){const F=this.resume(),$=this.stack[this.stack.length-1];$.meta=F}function R(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function q(){const F=this.resume(),$=this.stack[this.stack.length-1];$.value=F.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function B(){const F=this.resume(),$=this.stack[this.stack.length-1];$.value=F.replace(/(\r?\n|\r)$/g,"")}function X(F){const $=this.resume(),J=this.stack[this.stack.length-1];J.label=$,J.identifier=ur(this.sliceSerialize(F)).toLowerCase()}function W(){const F=this.resume(),$=this.stack[this.stack.length-1];$.title=F}function N(){const F=this.resume(),$=this.stack[this.stack.length-1];$.url=F}function M(F){const $=this.stack[this.stack.length-1];if(!$.depth){const J=this.sliceSerialize(F).length;$.depth=J}}function E(){this.data.setextHeadingSlurpLineEnding=!0}function H(F){const $=this.stack[this.stack.length-1];$.depth=this.sliceSerialize(F).codePointAt(0)===61?1:2}function V(){this.data.setextHeadingSlurpLineEnding=void 0}function ee(F){const J=this.stack[this.stack.length-1].children;let ue=J[J.length-1];(!ue||ue.type!=="text")&&(ue=Bi(),ue.position={start:_n(F.start),end:void 0},J.push(ue)),this.stack.push(ue)}function he(F){const $=this.stack.pop();$.value+=this.sliceSerialize(F),$.position.end=_n(F.end)}function Q(F){const $=this.stack[this.stack.length-1];if(this.data.atHardBreak){const J=$.children[$.children.length-1];J.position.end=_n(F.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&i.canContainEols.includes($.type)&&(ee.call(this,F),he.call(this,F))}function G(){this.data.atHardBreak=!0}function me(){const F=this.resume(),$=this.stack[this.stack.length-1];$.value=F}function Ee(){const F=this.resume(),$=this.stack[this.stack.length-1];$.value=F}function ce(){const F=this.resume(),$=this.stack[this.stack.length-1];$.value=F}function De(){const F=this.stack[this.stack.length-1];if(this.data.inReference){const $=this.data.referenceType||"shortcut";F.type+="Reference",F.referenceType=$,delete F.url,delete F.title}else delete F.identifier,delete F.label;this.data.referenceType=void 0}function ke(){const F=this.stack[this.stack.length-1];if(this.data.inReference){const $=this.data.referenceType||"shortcut";F.type+="Reference",F.referenceType=$,delete F.url,delete F.title}else delete F.identifier,delete F.label;this.data.referenceType=void 0}function Le(F){const $=this.sliceSerialize(F),J=this.stack[this.stack.length-2];J.label=Cc($),J.identifier=ur($).toLowerCase()}function Et(){const F=this.stack[this.stack.length-1],$=this.resume(),J=this.stack[this.stack.length-1];if(this.data.inReference=!0,J.type==="link"){const ue=F.children;J.children=ue}else J.alt=$}function _(){const F=this.resume(),$=this.stack[this.stack.length-1];$.url=F}function Te(){const F=this.resume(),$=this.stack[this.stack.length-1];$.title=F}function At(){this.data.inReference=void 0}function S(){this.data.referenceType="collapsed"}function ot(F){const $=this.resume(),J=this.stack[this.stack.length-1];J.label=$,J.identifier=ur(this.sliceSerialize(F)).toLowerCase(),this.data.referenceType="full"}function Qe(F){this.data.characterReferenceType=F.type}function Pe(F){const $=this.sliceSerialize(F),J=this.data.characterReferenceType;let ue;J?(ue=gc($,J==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ue=Lu($);const de=this.stack[this.stack.length-1];de.value+=ue}function In(F){const $=this.stack.pop();$.position.end=_n(F.end)}function Xe(F){he.call(this,F);const $=this.stack[this.stack.length-1];$.url=this.sliceSerialize(F)}function mt(F){he.call(this,F);const $=this.stack[this.stack.length-1];$.url="mailto:"+this.sliceSerialize(F)}function ln(){return{type:"blockquote",children:[]}}function Xt(){return{type:"code",lang:null,meta:null,value:""}}function qn(){return{type:"inlineCode",value:""}}function Fr(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ut(){return{type:"emphasis",children:[]}}function cn(){return{type:"heading",depth:0,children:[]}}function Mr(){return{type:"break"}}function yt(){return{type:"html",value:""}}function Or(){return{type:"image",title:null,url:"",alt:null}}function Lr(){return{type:"link",title:null,url:"",children:[]}}function fn(F){return{type:"list",ordered:F.type==="listOrdered",start:null,spread:F._spread,children:[]}}function at(F){return{type:"listItem",spread:F._spread,checked:null,children:[]}}function En(){return{type:"paragraph",children:[]}}function Un(){return{type:"strong",children:[]}}function Bi(){return{type:"text",value:""}}function An(){return{type:"thematicBreak"}}}function _n(t){return{line:t.line,column:t.column,offset:t.offset}}function Ec(t,i){let n=-1;for(;++n<i.length;){const o=i[n];Array.isArray(o)?Ec(t,o):xb(t,o)}}function xb(t,i){let n;for(n in i)if(Ic.call(i,n))switch(n){case"canContainEols":{const o=i[n];o&&t[n].push(...o);break}case"transforms":{const o=i[n];o&&t[n].push(...o);break}case"enter":case"exit":{const o=i[n];o&&Object.assign(t[n],o);break}}}function ql(t,i){throw t?new Error("Cannot close `"+t.type+"` ("+Er({start:t.start,end:t.end})+"): a different token (`"+i.type+"`, "+Er({start:i.start,end:i.end})+") is open"):new Error("Cannot close document, a token (`"+i.type+"`, "+Er({start:i.start,end:i.end})+") is still open")}function Ac(t){const i=this;i.parser=n;function n(o){return yb(o,{...i.data("settings"),...t,extensions:i.data("micromarkExtensions")||[],mdastExtensions:i.data("fromMarkdownExtensions")||[]})}}const Ul={}.hasOwnProperty;function bb(t,i){const n=i||{};function o(u,...s){let l=o.invalid;const c=o.handlers;if(u&&Ul.call(u,t)){const h=String(u[t]);l=Ul.call(c,h)?c[h]:o.unknown}if(l)return l.call(this,u,...s)}return o.handlers=n.handlers||{},o.invalid=n.invalid,o.unknown=n.unknown,o}const vb={}.hasOwnProperty;function Tc(t,i){let n=-1,o;if(i.extensions)for(;++n<i.extensions.length;)Tc(t,i.extensions[n]);for(o in i)if(vb.call(i,o))switch(o){case"extensions":break;case"unsafe":{Hl(t[o],i[o]);break}case"join":{Hl(t[o],i[o]);break}case"handlers":{_b(t[o],i[o]);break}default:t.options[o]=i[o]}return t}function Hl(t,i){i&&t.push(...i)}function _b(t,i){i&&Object.assign(t,i)}function kb(t,i,n,o){const u=n.enter("blockquote"),s=n.createTracker(o);s.move("> "),s.shift(2);const l=n.indentLines(n.containerFlow(t,s.current()),Sb);return u(),l}function Sb(t,i,n){return">"+(n?"":" ")+t}function Pc(t,i){return Yl(t,i.inConstruct,!0)&&!Yl(t,i.notInConstruct,!1)}function Yl(t,i,n){if(typeof i=="string"&&(i=[i]),!i||i.length===0)return n;let o=-1;for(;++o<i.length;)if(t.includes(i[o]))return!0;return!1}function Gl(t,i,n,o){let u=-1;for(;++u<n.unsafe.length;)if(n.unsafe[u].character===`
`&&Pc(n.stack,n.unsafe[u]))return/[ \t]/.test(o.before)?"":" ";return`\\
`}function Cb(t,i){const n=String(t);let o=n.indexOf(i),u=o,s=0,l=0;if(typeof i!="string")throw new TypeError("Expected substring");for(;o!==-1;)o===u?++s>l&&(l=s):s=1,u=o+i.length,o=n.indexOf(i,u);return l}function Eu(t,i){return!!(i.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function Ib(t){const i=t.options.fence||"`";if(i!=="`"&&i!=="~")throw new Error("Cannot serialize code with `"+i+"` for `options.fence`, expected `` ` `` or `~`");return i}function Eb(t,i,n,o){const u=Ib(n),s=t.value||"",l=u==="`"?"GraveAccent":"Tilde";if(Eu(t,n)){const g=n.enter("codeIndented"),b=n.indentLines(s,Ab);return g(),b}const c=n.createTracker(o),h=u.repeat(Math.max(Cb(s,u)+1,3)),d=n.enter("codeFenced");let p=c.move(h);if(t.lang){const g=n.enter(`codeFencedLang${l}`);p+=c.move(n.safe(t.lang,{before:p,after:" ",encode:["`"],...c.current()})),g()}if(t.lang&&t.meta){const g=n.enter(`codeFencedMeta${l}`);p+=c.move(" "),p+=c.move(n.safe(t.meta,{before:p,after:`
`,encode:["`"],...c.current()})),g()}return p+=c.move(`
`),s&&(p+=c.move(s+`
`)),p+=c.move(h),d(),p}function Ab(t,i,n){return(n?"":"    ")+t}function Du(t){const i=t.options.quote||'"';if(i!=='"'&&i!=="'")throw new Error("Cannot serialize title with `"+i+"` for `options.quote`, expected `\"`, or `'`");return i}function Tb(t,i,n,o){const u=Du(n),s=u==='"'?"Quote":"Apostrophe",l=n.enter("definition");let c=n.enter("label");const h=n.createTracker(o);let d=h.move("[");return d+=h.move(n.safe(n.associationId(t),{before:d,after:"]",...h.current()})),d+=h.move("]: "),c(),!t.url||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),d+=h.move("<"),d+=h.move(n.safe(t.url,{before:d,after:">",...h.current()})),d+=h.move(">")):(c=n.enter("destinationRaw"),d+=h.move(n.safe(t.url,{before:d,after:t.title?" ":`
`,...h.current()}))),c(),t.title&&(c=n.enter(`title${s}`),d+=h.move(" "+u),d+=h.move(n.safe(t.title,{before:d,after:u,...h.current()})),d+=h.move(u),c()),l(),d}function Pb(t){const i=t.options.emphasis||"*";if(i!=="*"&&i!=="_")throw new Error("Cannot serialize emphasis with `"+i+"` for `options.emphasis`, expected `*`, or `_`");return i}function Sn(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Mi(t,i,n){const o=Fi(t),u=Fi(i);return o===void 0?u===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:u===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:o===1?u===void 0?{inside:!1,outside:!1}:u===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:u===void 0?{inside:!1,outside:!1}:u===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Fc.peek=Fb;function Fc(t,i,n,o){const u=Pb(n),s=n.enter("emphasis"),l=n.createTracker(o),c=l.move(u);let h=l.move(n.containerPhrasing(t,{after:u,before:c,...l.current()}));const d=h.charCodeAt(0),p=Mi(o.before.charCodeAt(o.before.length-1),d,u);p.inside&&(h=Sn(d)+h.slice(1));const g=h.charCodeAt(h.length-1),b=Mi(o.after.charCodeAt(0),g,u);b.inside&&(h=h.slice(0,-1)+Sn(g));const w=l.move(u);return s(),n.attentionEncodeSurroundingInfo={after:b.outside,before:p.outside},c+h+w}function Fb(t,i,n){return n.options.emphasis||"*"}const $u=(function(t){if(t==null)return Rb;if(typeof t=="function")return Ri(t);if(typeof t=="object")return Array.isArray(t)?Mb(t):Ob(t);if(typeof t=="string")return Lb(t);throw new Error("Expected function, string, or object as test")});function Mb(t){const i=[];let n=-1;for(;++n<t.length;)i[n]=$u(t[n]);return Ri(o);function o(...u){let s=-1;for(;++s<i.length;)if(i[s].apply(this,u))return!0;return!1}}function Ob(t){const i=t;return Ri(n);function n(o){const u=o;let s;for(s in t)if(u[s]!==i[s])return!1;return!0}}function Lb(t){return Ri(i);function i(n){return n&&n.type===t}}function Ri(t){return i;function i(n,o,u){return!!(Bb(n)&&t.call(this,n,typeof o=="number"?o:void 0,u||void 0))}}function Rb(){return!0}function Bb(t){return t!==null&&typeof t=="object"&&"type"in t}const Mc=[],Db=!0,Au=!1,$b="skip";function Nb(t,i,n,o){let u;typeof i=="function"&&typeof n!="function"?(o=n,n=i):u=i;const s=$u(u),l=o?-1:1;c(t,void 0,[])();function c(h,d,p){const g=h&&typeof h=="object"?h:{};if(typeof g.type=="string"){const w=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(b,"name",{value:"node ("+(h.type+(w?"<"+w+">":""))+")"})}return b;function b(){let w=Mc,T,R,q;if((!i||s(h,d,p[p.length-1]||void 0))&&(w=zb(n(h,p)),w[0]===Au))return w;if("children"in h&&h.children){const B=h;if(B.children&&w[0]!==$b)for(R=(o?B.children.length:-1)+l,q=p.concat(B);R>-1&&R<B.children.length;){const X=B.children[R];if(T=c(X,R,q)(),T[0]===Au)return T;R=typeof T[1]=="number"?T[1]:R+l}}return w}}}function zb(t){return Array.isArray(t)?t:typeof t=="number"?[Db,t]:t==null?Mc:[t]}function Oc(t,i,n,o){let u,s,l;typeof i=="function"&&typeof n!="function"?(s=void 0,l=i,u=n):(s=i,l=n,u=o),Nb(t,s,c,u);function c(h,d){const p=d[d.length-1],g=p?p.children.indexOf(h):void 0;return l(h,g,p)}}function Lc(t,i){let n=!1;return Oc(t,function(o){if("value"in o&&/\r?\n|\r/.test(o.value)||o.type==="break")return n=!0,Au}),!!((!t.depth||t.depth<3)&&Ou(t)&&(i.options.setext||n))}function Wb(t,i,n,o){const u=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(o);if(Lc(t,n)){const p=n.enter("headingSetext"),g=n.enter("phrasing"),b=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return g(),p(),b+`
`+(u===1?"=":"-").repeat(b.length-(Math.max(b.lastIndexOf("\r"),b.lastIndexOf(`
`))+1))}const l="#".repeat(u),c=n.enter("headingAtx"),h=n.enter("phrasing");s.move(l+" ");let d=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(d)&&(d=Sn(d.charCodeAt(0))+d.slice(1)),d=d?l+" "+d:l,n.options.closeAtx&&(d+=" "+l),h(),c(),d}Rc.peek=qb;function Rc(t){return t.value||""}function qb(){return"<"}Bc.peek=Ub;function Bc(t,i,n,o){const u=Du(n),s=u==='"'?"Quote":"Apostrophe",l=n.enter("image");let c=n.enter("label");const h=n.createTracker(o);let d=h.move("![");return d+=h.move(n.safe(t.alt,{before:d,after:"]",...h.current()})),d+=h.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),d+=h.move("<"),d+=h.move(n.safe(t.url,{before:d,after:">",...h.current()})),d+=h.move(">")):(c=n.enter("destinationRaw"),d+=h.move(n.safe(t.url,{before:d,after:t.title?" ":")",...h.current()}))),c(),t.title&&(c=n.enter(`title${s}`),d+=h.move(" "+u),d+=h.move(n.safe(t.title,{before:d,after:u,...h.current()})),d+=h.move(u),c()),d+=h.move(")"),l(),d}function Ub(){return"!"}Dc.peek=Hb;function Dc(t,i,n,o){const u=t.referenceType,s=n.enter("imageReference");let l=n.enter("label");const c=n.createTracker(o);let h=c.move("![");const d=n.safe(t.alt,{before:h,after:"]",...c.current()});h+=c.move(d+"]["),l();const p=n.stack;n.stack=[],l=n.enter("reference");const g=n.safe(n.associationId(t),{before:h,after:"]",...c.current()});return l(),n.stack=p,s(),u==="full"||!d||d!==g?h+=c.move(g+"]"):u==="shortcut"?h=h.slice(0,-1):h+=c.move("]"),h}function Hb(){return"!"}$c.peek=Yb;function $c(t,i,n){let o=t.value||"",u="`",s=-1;for(;new RegExp("(^|[^`])"+u+"([^`]|$)").test(o);)u+="`";for(/[^ \r\n]/.test(o)&&(/^[ \r\n]/.test(o)&&/[ \r\n]$/.test(o)||/^`|`$/.test(o))&&(o=" "+o+" ");++s<n.unsafe.length;){const l=n.unsafe[s],c=n.compilePattern(l);let h;if(l.atBreak)for(;h=c.exec(o);){let d=h.index;o.charCodeAt(d)===10&&o.charCodeAt(d-1)===13&&d--,o=o.slice(0,d)+" "+o.slice(h.index+1)}}return u+o+u}function Yb(){return"`"}function Nc(t,i){const n=Ou(t);return!!(!i.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}zc.peek=Gb;function zc(t,i,n,o){const u=Du(n),s=u==='"'?"Quote":"Apostrophe",l=n.createTracker(o);let c,h;if(Nc(t,n)){const p=n.stack;n.stack=[],c=n.enter("autolink");let g=l.move("<");return g+=l.move(n.containerPhrasing(t,{before:g,after:">",...l.current()})),g+=l.move(">"),c(),n.stack=p,g}c=n.enter("link"),h=n.enter("label");let d=l.move("[");return d+=l.move(n.containerPhrasing(t,{before:d,after:"](",...l.current()})),d+=l.move("]("),h(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(h=n.enter("destinationLiteral"),d+=l.move("<"),d+=l.move(n.safe(t.url,{before:d,after:">",...l.current()})),d+=l.move(">")):(h=n.enter("destinationRaw"),d+=l.move(n.safe(t.url,{before:d,after:t.title?" ":")",...l.current()}))),h(),t.title&&(h=n.enter(`title${s}`),d+=l.move(" "+u),d+=l.move(n.safe(t.title,{before:d,after:u,...l.current()})),d+=l.move(u),h()),d+=l.move(")"),c(),d}function Gb(t,i,n){return Nc(t,n)?"<":"["}Wc.peek=Vb;function Wc(t,i,n,o){const u=t.referenceType,s=n.enter("linkReference");let l=n.enter("label");const c=n.createTracker(o);let h=c.move("[");const d=n.containerPhrasing(t,{before:h,after:"]",...c.current()});h+=c.move(d+"]["),l();const p=n.stack;n.stack=[],l=n.enter("reference");const g=n.safe(n.associationId(t),{before:h,after:"]",...c.current()});return l(),n.stack=p,s(),u==="full"||!d||d!==g?h+=c.move(g+"]"):u==="shortcut"?h=h.slice(0,-1):h+=c.move("]"),h}function Vb(){return"["}function Nu(t){const i=t.options.bullet||"*";if(i!=="*"&&i!=="+"&&i!=="-")throw new Error("Cannot serialize items with `"+i+"` for `options.bullet`, expected `*`, `+`, or `-`");return i}function Qb(t){const i=Nu(t),n=t.options.bulletOther;if(!n)return i==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===i)throw new Error("Expected `bullet` (`"+i+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Xb(t){const i=t.options.bulletOrdered||".";if(i!=="."&&i!==")")throw new Error("Cannot serialize items with `"+i+"` for `options.bulletOrdered`, expected `.` or `)`");return i}function qc(t){const i=t.options.rule||"*";if(i!=="*"&&i!=="-"&&i!=="_")throw new Error("Cannot serialize rules with `"+i+"` for `options.rule`, expected `*`, `-`, or `_`");return i}function Kb(t,i,n,o){const u=n.enter("list"),s=n.bulletCurrent;let l=t.ordered?Xb(n):Nu(n);const c=t.ordered?l==="."?")":".":Qb(n);let h=i&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!t.ordered){const p=t.children?t.children[0]:void 0;if((l==="*"||l==="-")&&p&&(!p.children||!p.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(h=!0),qc(n)===l&&p){let g=-1;for(;++g<t.children.length;){const b=t.children[g];if(b&&b.type==="listItem"&&b.children&&b.children[0]&&b.children[0].type==="thematicBreak"){h=!0;break}}}}h&&(l=c),n.bulletCurrent=l;const d=n.containerFlow(t,o);return n.bulletLastUsed=l,n.bulletCurrent=s,u(),d}function Jb(t){const i=t.options.listItemIndent||"one";if(i!=="tab"&&i!=="one"&&i!=="mixed")throw new Error("Cannot serialize items with `"+i+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return i}function jb(t,i,n,o){const u=Jb(n);let s=n.bulletCurrent||Nu(n);i&&i.type==="list"&&i.ordered&&(s=(typeof i.start=="number"&&i.start>-1?i.start:1)+(n.options.incrementListMarker===!1?0:i.children.indexOf(t))+s);let l=s.length+1;(u==="tab"||u==="mixed"&&(i&&i.type==="list"&&i.spread||t.spread))&&(l=Math.ceil(l/4)*4);const c=n.createTracker(o);c.move(s+" ".repeat(l-s.length)),c.shift(l);const h=n.enter("listItem"),d=n.indentLines(n.containerFlow(t,c.current()),p);return h(),d;function p(g,b,w){return b?(w?"":" ".repeat(l))+g:(w?s:s+" ".repeat(l-s.length))+g}}function Zb(t,i,n,o){const u=n.enter("paragraph"),s=n.enter("phrasing"),l=n.containerPhrasing(t,o);return s(),u(),l}const ev=$u(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function tv(t,i,n,o){return(t.children.some(function(l){return ev(l)})?n.containerPhrasing:n.containerFlow).call(n,t,o)}function nv(t){const i=t.options.strong||"*";if(i!=="*"&&i!=="_")throw new Error("Cannot serialize strong with `"+i+"` for `options.strong`, expected `*`, or `_`");return i}Uc.peek=rv;function Uc(t,i,n,o){const u=nv(n),s=n.enter("strong"),l=n.createTracker(o),c=l.move(u+u);let h=l.move(n.containerPhrasing(t,{after:u,before:c,...l.current()}));const d=h.charCodeAt(0),p=Mi(o.before.charCodeAt(o.before.length-1),d,u);p.inside&&(h=Sn(d)+h.slice(1));const g=h.charCodeAt(h.length-1),b=Mi(o.after.charCodeAt(0),g,u);b.inside&&(h=h.slice(0,-1)+Sn(g));const w=l.move(u+u);return s(),n.attentionEncodeSurroundingInfo={after:b.outside,before:p.outside},c+h+w}function rv(t,i,n){return n.options.strong||"*"}function iv(t,i,n,o){return n.safe(t.value,o)}function ov(t){const i=t.options.ruleRepetition||3;if(i<3)throw new Error("Cannot serialize rules with repetition `"+i+"` for `options.ruleRepetition`, expected `3` or more");return i}function uv(t,i,n){const o=(qc(n)+(n.options.ruleSpaces?" ":"")).repeat(ov(n));return n.options.ruleSpaces?o.slice(0,-1):o}const av={blockquote:kb,break:Gl,code:Eb,definition:Tb,emphasis:Fc,hardBreak:Gl,heading:Wb,html:Rc,image:Bc,imageReference:Dc,inlineCode:$c,link:zc,linkReference:Wc,list:Kb,listItem:jb,paragraph:Zb,root:tv,strong:Uc,text:iv,thematicBreak:uv},sv=[lv];function lv(t,i,n,o){if(i.type==="code"&&Eu(i,o)&&(t.type==="list"||t.type===i.type&&Eu(t,o)))return!1;if("spread"in n&&typeof n.spread=="boolean")return t.type==="paragraph"&&(t.type===i.type||i.type==="definition"||i.type==="heading"&&Lc(i,o))?void 0:n.spread?1:0}const Nn=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],cv=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:Nn},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:Nn},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:Nn},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:Nn},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:Nn},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:Nn},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:Nn},{atBreak:!0,character:"~"}];function fv(t){return t.label||!t.identifier?t.label||"":Cc(t.identifier)}function hv(t){if(!t._compiled){const i=(t.atBreak?"[\\r\\n][\\t ]*":"")+(t.before?"(?:"+t.before+")":"");t._compiled=new RegExp((i?"("+i+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(t.character)?"\\":"")+t.character+(t.after?"(?:"+t.after+")":""),"g")}return t._compiled}function dv(t,i,n){const o=i.indexStack,u=t.children||[],s=[];let l=-1,c=n.before,h;o.push(-1);let d=i.createTracker(n);for(;++l<u.length;){const p=u[l];let g;if(o[o.length-1]=l,l+1<u.length){let T=i.handle.handlers[u[l+1].type];T&&T.peek&&(T=T.peek),g=T?T(u[l+1],t,i,{before:"",after:"",...d.current()}).charAt(0):""}else g=n.after;s.length>0&&(c==="\r"||c===`
`)&&p.type==="html"&&(s[s.length-1]=s[s.length-1].replace(/(\r?\n|\r)$/," "),c=" ",d=i.createTracker(n),d.move(s.join("")));let b=i.handle(p,t,i,{...d.current(),after:g,before:c});h&&h===b.slice(0,1)&&(b=Sn(h.charCodeAt(0))+b.slice(1));const w=i.attentionEncodeSurroundingInfo;i.attentionEncodeSurroundingInfo=void 0,h=void 0,w&&(s.length>0&&w.before&&c===s[s.length-1].slice(-1)&&(s[s.length-1]=s[s.length-1].slice(0,-1)+Sn(c.charCodeAt(0))),w.after&&(h=g)),d.move(b),s.push(b),c=b.slice(-1)}return o.pop(),s.join("")}function pv(t,i,n){const o=i.indexStack,u=t.children||[],s=i.createTracker(n),l=[];let c=-1;for(o.push(-1);++c<u.length;){const h=u[c];o[o.length-1]=c,l.push(s.move(i.handle(h,t,i,{before:`
`,after:`
`,...s.current()}))),h.type!=="list"&&(i.bulletLastUsed=void 0),c<u.length-1&&l.push(s.move(gv(h,u[c+1],t,i)))}return o.pop(),l.join("")}function gv(t,i,n,o){let u=o.join.length;for(;u--;){const s=o.join[u](t,i,n,o);if(s===!0||s===1)break;if(typeof s=="number")return`
`.repeat(1+s);if(s===!1)return`

<!---->

`}return`

`}const mv=/\r?\n|\r/g;function yv(t,i){const n=[];let o=0,u=0,s;for(;s=mv.exec(t);)l(t.slice(o,s.index)),n.push(s[0]),o=s.index+s[0].length,u++;return l(t.slice(o)),n.join("");function l(c){n.push(i(c,u,!c))}}function wv(t,i,n){const o=(n.before||"")+(i||"")+(n.after||""),u=[],s=[],l={};let c=-1;for(;++c<t.unsafe.length;){const p=t.unsafe[c];if(!Pc(t.stack,p))continue;const g=t.compilePattern(p);let b;for(;b=g.exec(o);){const w="before"in p||!!p.atBreak,T="after"in p,R=b.index+(w?b[1].length:0);u.includes(R)?(l[R].before&&!w&&(l[R].before=!1),l[R].after&&!T&&(l[R].after=!1)):(u.push(R),l[R]={before:w,after:T})}}u.sort(xv);let h=n.before?n.before.length:0;const d=o.length-(n.after?n.after.length:0);for(c=-1;++c<u.length;){const p=u[c];p<h||p>=d||p+1<d&&u[c+1]===p+1&&l[p].after&&!l[p+1].before&&!l[p+1].after||u[c-1]===p-1&&l[p].before&&!l[p-1].before&&!l[p-1].after||(h!==p&&s.push(Vl(o.slice(h,p),"\\")),h=p,/[!-/:-@[-`{-~]/.test(o.charAt(p))&&(!n.encode||!n.encode.includes(o.charAt(p)))?s.push("\\"):(s.push(Sn(o.charCodeAt(p))),h++))}return s.push(Vl(o.slice(h,d),n.after)),s.join("")}function xv(t,i){return t-i}function Vl(t,i){const n=/\\(?=[!-/:-@[-`{-~])/g,o=[],u=[],s=t+i;let l=-1,c=0,h;for(;h=n.exec(s);)o.push(h.index);for(;++l<o.length;)c!==o[l]&&u.push(t.slice(c,o[l])),u.push("\\"),c=o[l];return u.push(t.slice(c)),u.join("")}function bv(t){const i=t||{},n=i.now||{};let o=i.lineShift||0,u=n.line||1,s=n.column||1;return{move:h,current:l,shift:c};function l(){return{now:{line:u,column:s},lineShift:o}}function c(d){o+=d}function h(d){const p=d||"",g=p.split(/\r?\n|\r/g),b=g[g.length-1];return u+=g.length-1,s=g.length===1?s+b.length:1+b.length+o,p}}function vv(t,i){const n=i||{},o={associationId:fv,containerPhrasing:Cv,containerFlow:Iv,createTracker:bv,compilePattern:hv,enter:s,handlers:{...av},handle:void 0,indentLines:yv,indexStack:[],join:[...sv],options:{},safe:Ev,stack:[],unsafe:[...cv]};Tc(o,n),o.options.tightDefinitions&&o.join.push(Sv),o.handle=bb("type",{invalid:_v,unknown:kv,handlers:o.handlers});let u=o.handle(t,void 0,o,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return u&&u.charCodeAt(u.length-1)!==10&&u.charCodeAt(u.length-1)!==13&&(u+=`
`),u;function s(l){return o.stack.push(l),c;function c(){o.stack.pop()}}}function _v(t){throw new Error("Cannot handle value `"+t+"`, expected node")}function kv(t){const i=t;throw new Error("Cannot handle unknown node `"+i.type+"`")}function Sv(t,i){if(t.type==="definition"&&t.type===i.type)return 0}function Cv(t,i){return dv(t,this,i)}function Iv(t,i){return pv(t,this,i)}function Ev(t,i){return wv(this,t,i)}function Av(t){const i=this;i.compiler=n;function n(o){return vv(o,{...i.data("settings"),...t,extensions:i.data("toMarkdownExtensions")||[]})}}const Yt={text:"text",boolean:"boolean",multicheckbox:"multicheckbox",richText:"richText",number:"number"};class Tv{constructor(){this.logger=Vt(Qt.InputCreator)}createInput(i){const{componentName:n,inputName:o,type:u}=i;let s="";try{switch(u){case Yt.text:case Yt.richText:{s=`> ${i.defaultValue??""}`;break}case Yt.boolean:{const l=i.defaultValue===!0?"x":" ",c=i.label??"Checkbox";s=`- [${l}] ${c}`;break}case Yt.multicheckbox:{const l=i.options??[];if(!l.length)throw this.logger.error("multicheckbox must have non-empty options array",{opts:i}),new Error("multicheckbox must have non-empty options array");s=l.map(c=>`- [ ] ${xu.hiddenValue(n,o,c.value)} ${c.label}`).join(`
`);break}case Yt.number:{s=`> {Number} ${i.defaultValue??""}`;break}default:throw this.logger.error(`Unknown input type: ${u}`,{opts:i}),new Error("Unknown input type: "+u)}}catch(l){throw this.logger.error("Failed to create input",{error:l,opts:i}),l}return xu.input.wrap({componentName:n,inputName:o,content:s,inputType:u})}parseMarkdown(i){try{return ku().use(Ac).parse(i)}catch(n){throw this.logger.error("Failed to parse Markdown",{error:n,md:i}),n}}stringifyMarkdown(i){try{return ku().use(Av).stringify(i)}catch(n){throw this.logger.error("Failed to stringify Markdown",{error:n,ast:i}),n}}}const or=new Tv;class Pv{constructor(i){this.content=[],this.logger=Vt(Qt.ComponentBuilder),this.componentName=i}_md(i){const n=typeof i=="function"?i():i;return this.content.push(n),this}_guidance(i){const n=i??`> [!note] Guidance  
Keep it simple — research shows even a basic ticksheet improves habit consistency.
Prompts: Which habits do you want to track today?`;return this.content.push(n),this}_input(i){const n={...i,componentName:this.componentName};return this.content.push(or.createInput(n)),this}_text(i,n,o){const u=or.createInput({componentName:this.componentName,type:Yt.text,inputName:i,defaultValue:n,placeholder:o});return this.content.push(u),this}_richText(i,n,o){const u=or.createInput({componentName:this.componentName,type:Yt.richText,inputName:i,defaultValue:n,placeholder:o});return this.content.push(u),this}_boolean(i,n,o){const u=or.createInput({componentName:this.componentName,type:Yt.boolean,inputName:i,label:n,defaultValue:o});return this.content.push(u),this}_number(i,n){const o=or.createInput({componentName:this.componentName,type:Yt.number,inputName:i,defaultValue:n});return this.content.push(o),this}_multiCheckbox(i,n,o,u){const s=or.createInput({componentName:this.componentName,type:Yt.multicheckbox,inputName:i,options:n,defaultValue:o,collapsed:u});return this.content.push(s),this}render(){const i=xu.component.wrap(this.componentName,this.content.join(`

`));return this.logger.dev("Component rendered",{outputLength:i.length}),i}}function Fv(t,i){if(t===void 0)throw new Error("lowdb: missing adapter");if(i===void 0)throw new Error("lowdb: missing default data")}class Mv{adapter;data;constructor(i,n){Fv(i,n),this.adapter=i,this.data=n}async read(){const i=await this.adapter.read();i&&(this.data=i)}async write(){this.data&&await this.adapter.write(this.data)}async update(i){i(this.data),await this.write()}}const tt=Vt(Qt.DbService);class Ov{constructor(i){this.dbPath=i}async read(){try{const i=Ce.vault.getAbstractFileByPath(this.dbPath);if(i&&"extension"in i){const n=await Ce.vault.read(i);return JSON.parse(n)}return null}catch(i){return tt.error("Error reading database",{error:i}),null}}async write(i){try{const n=JSON.stringify(i,null,2),o=Ce.vault.getAbstractFileByPath(this.dbPath);o&&"extension"in o?(await Ce.vault.modify(o,n),tt.dev(`Database saved to ${this.dbPath}`)):(await Ce.vault.create(this.dbPath,n),tt.info(`Database created at ${this.dbPath}`))}catch(n){tt.error("Error writing database",{error:n})}}}class Lv{constructor(){this.db=null}getDbPath(){return`${nt.projectDir}/${nt.coreDir}/powerjournal-db.json`}async ensureCoreDir(){const i=`${nt.projectDir}/${nt.coreDir}`;Ce.vault.getAbstractFileByPath(i)||(tt.dev(`Creating core directory: ${i}`),await Ce.vault.createFolder(i))}async ensureDb(){if(!this.db){await this.ensureCoreDir();const i=this.getDbPath(),n=new Ov(i);this.db=new Mv(n,{reports:{}}),tt.dev(`Database adapter initialized for ${i}`)}return this.db}async init(){const i=await this.ensureDb();await i.read(),i.data||={reports:{}},tt.dev("Database initialized")}async saveReportInputs(i,n){await this.init();const o=await this.ensureDb();o.data.reports[i]=n,await o.write(),tt.info(`Saved ${n.length} inputs for report type: ${i}`)}async appendReportInputs(i,n){await this.init();const o=await this.ensureDb();o.data.reports[i]||(o.data.reports[i]=[]),o.data.reports[i].push(...n),await o.write(),tt.info(`Appended ${n.length} inputs to report type: ${i}`)}async upsertReportInputs(i,n){await this.init();const o=await this.ensureDb();o.data.reports[i]||(o.data.reports[i]=[]);const u=new Set(n.map(l=>`${l.reportDate}-${l.reportNumber}`)),s=o.data.reports[i].filter(l=>{const c=`${l.reportDate}-${l.reportNumber}`;return!u.has(c)});o.data.reports[i]=[...s,...n],await o.write(),tt.info(`Upserted ${n.length} inputs for ${i} (removed duplicates)`)}async getReportInputs(i){await this.init();const o=(await this.ensureDb()).data.reports[i]||[];return tt.dev(`Retrieved ${o.length} inputs for report type: ${i}`),o}async getInputsByName(i,n,o){await this.init();const s=(await this.ensureDb()).data.reports[i]||[],l=Array.isArray(n)?n:[n],c=s.filter(h=>{const d=l.includes(h.inputName),p=o?h.componentName===o:!0;return d&&p});return tt.dev(`Filtered ${c.length} inputs for ${l.join(", ")}${o?` in ${o}`:""}`),c}async getInputsLastNReports(i,n,o,u){const l=(await this.getInputsByName(i,n,u)).sort((p,g)=>{const b=(g.reportDate||"").localeCompare(p.reportDate||"");return b!==0?b:(g.reportNumber||"0").localeCompare(p.reportNumber||"0")}),h=Array.from(new Set(l.map(p=>p.reportDate))).slice(0,o),d=l.filter(p=>h.includes(p.reportDate));return tt.info(`Retrieved ${d.length} inputs from last ${o} reports`),d}async getInputsInDateRange(i,n,o,u,s){const c=(await this.getInputsByName(i,n,s)).filter(h=>{const d=h.reportDate||"";return d>=o&&d<=u});return tt.info(`Retrieved ${c.length} inputs between ${o} and ${u}`),c}async getAvailableInputs(i,n){await this.init();const u=(await this.ensureDb()).data.reports[i]||[],s=new Set(u.filter(l=>l.componentName===n).map(l=>l.inputName));return Array.from(s)}}const Hc=new Lv;function Yc(t){if(t.length===0)return 0;var i=t[0],n=0,o;if(typeof i!="number")return Number.NaN;for(var u=1;u<t.length;u++){if(typeof t[u]!="number")return Number.NaN;o=i+t[u],Math.abs(i)>=Math.abs(t[u])?n+=i-o+t[u]:n+=t[u]-o+i,i=o}return i+n}function Gc(t){if(t.length===0)throw new Error("mean requires at least one data point");return Yc(t)/t.length}function Rv(t,i){var n=Gc(t),o=0,u,s;for(s=0;s<t.length;s++)u=t[s]-n,o+=u*u;return o}function Vc(t){if(t.length===0)throw new Error("variance requires at least one data point");return Rv(t)/t.length}function Bv(t){if(t.length===1)return 0;var i=Vc(t);return Math.sqrt(i)}function Dv(t){if(t.length===0)throw new Error("mode requires at least one data point");if(t.length===1)return t[0];for(var i=t[0],n=Number.NaN,o=0,u=1,s=1;s<t.length+1;s++)t[s]!==i?(u>o&&(o=u,n=i),u=1,i=t[s]):u++;return n}function $v(t){return t.slice().sort(function(i,n){return i-n})}function Nv(t){return Dv($v(t))}function Ql(t){if(t.length===0)throw new Error("min requires at least one data point");for(var i=t[0],n=1;n<t.length;n++)t[n]<i&&(i=t[n]);return i}function Xl(t){if(t.length===0)throw new Error("max requires at least one data point");for(var i=t[0],n=1;n<t.length;n++)t[n]>i&&(i=t[n]);return i}function Kl(t,i){var n=t.length*i;if(t.length===0)throw new Error("quantile requires at least one data point.");if(i<0||i>1)throw new Error("quantiles must be between 0 and 1");return i===1?t[t.length-1]:i===0?t[0]:n%1!==0?t[Math.ceil(n)-1]:t.length%2===0?(t[n-1]+t[n])/2:t[n]}function Ai(t,i,n,o){for(n=n||0,o=o||t.length-1;o>n;){if(o-n>600){var u=o-n+1,s=i-n+1,l=Math.log(u),c=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*c*(u-c)/u);s-u/2<0&&(h*=-1);var d=Math.max(n,Math.floor(i-s*c/u+h)),p=Math.min(o,Math.floor(i+(u-s)*c/u+h));Ai(t,i,d,p)}var g=t[i],b=n,w=o;for(Cr(t,n,i),t[o]>g&&Cr(t,n,o);b<w;){for(Cr(t,b,w),b++,w--;t[b]<g;)b++;for(;t[w]>g;)w--}t[n]===g?Cr(t,n,w):(w++,Cr(t,w,o)),w<=i&&(n=w+1),i<=w&&(o=w-1)}}function Cr(t,i,n){var o=t[i];t[i]=t[n],t[n]=o}function Tu(t,i){var n=t.slice();if(Array.isArray(i)){zv(n,i);for(var o=[],u=0;u<i.length;u++)o[u]=Kl(n,i[u]);return o}else{var s=Xc(n.length,i);return Qc(n,s,0,n.length-1),Kl(n,i)}}function Qc(t,i,n,o){i%1===0?Ai(t,i,n,o):(i=Math.floor(i),Ai(t,i,n,o),Ai(t,i+1,i+1,o))}function zv(t,i){for(var n=[0],o=0;o<i.length;o++)n.push(Xc(t.length,i[o]));n.push(t.length-1),n.sort(Wv);for(var u=[0,n.length-1];u.length;){var s=Math.ceil(u.pop()),l=Math.floor(u.pop());if(!(s-l<=1)){var c=Math.floor((l+s)/2);Qc(t,n[c],Math.floor(n[l]),Math.ceil(n[s])),u.push(l,c,c,s)}}}function Wv(t,i){return t-i}function Xc(t,i){var n=t*i;return i===1?t-1:i===0?0:n%1!==0?Math.ceil(n)-1:t%2===0?n-.5:n}function qv(t){return+Tu(t,.5)}var lu={},Jl;function Uv(){return Jl||(Jl=1,(function(t){(function(i){i.black="\x1B[30m",i.red="\x1B[31m",i.green="\x1B[32m",i.yellow="\x1B[33m",i.blue="\x1B[34m",i.magenta="\x1B[35m",i.cyan="\x1B[36m",i.lightgray="\x1B[37m",i.default="\x1B[39m",i.darkgray="\x1B[90m",i.lightred="\x1B[91m",i.lightgreen="\x1B[92m",i.lightyellow="\x1B[93m",i.lightblue="\x1B[94m",i.lightmagenta="\x1B[95m",i.lightcyan="\x1B[96m",i.white="\x1B[97m",i.reset="\x1B[0m";function n(o,u){return u===void 0?o:u+o+i.reset}i.colored=n,i.plot=function(o,u=void 0){typeof o[0]=="number"&&(o=[o]),u=typeof u<"u"?u:{};let s=typeof u.min<"u"?u.min:o[0][0],l=typeof u.max<"u"?u.max:o[0][0];for(let M=0;M<o.length;M++)for(let E=0;E<o[M].length;E++)s=Math.min(s,o[M][E]),l=Math.max(l,o[M][E]);let c=["┼","┤","╶","╴","─","╰","╭","╮","╯","│"],h=Math.abs(l-s),d=typeof u.offset<"u"?u.offset:3,p=typeof u.padding<"u"?u.padding:"           ",g=typeof u.height<"u"?u.height:h,b=typeof u.colors<"u"?u.colors:[],w=h!==0?g/h:1,T=Math.round(s*w),R=Math.round(l*w),q=Math.abs(R-T),B=0;for(let M=0;M<o.length;M++)B=Math.max(B,o[M].length);B=B+d;let X=typeof u.symbols<"u"?u.symbols:c,W=typeof u.format<"u"?u.format:function(M){return(p+M.toFixed(2)).slice(-p.length)},N=new Array(q+1);for(let M=0;M<=q;M++){N[M]=new Array(B);for(let E=0;E<B;E++)N[M][E]=" "}for(let M=T;M<=R;++M){let E=W(q>0?l-(M-T)*h/q:M,M-T);N[M-T][Math.max(d-E.length,0)]=E,N[M-T][d-1]=M==0?X[0]:X[1]}for(let M=0;M<o.length;M++){let E=b[M%b.length],H=Math.round(o[M][0]*w)-T;N[q-H][d-1]=n(X[0],E);for(let V=0;V<o[M].length-1;V++){let ee=Math.round(o[M][V+0]*w)-T,he=Math.round(o[M][V+1]*w)-T;if(ee==he)N[q-ee][V+d]=n(X[4],E);else{N[q-he][V+d]=n(ee>he?X[5]:X[6],E),N[q-ee][V+d]=n(ee>he?X[7]:X[8],E);let Q=Math.min(ee,he),G=Math.max(ee,he);for(let me=Q+1;me<G;me++)N[q-me][V+d]=n(X[9],E)}}}return N.map(function(M){return M.join("")}).join(`
`)}})(t)})(lu)),lu}var Hv=Uv(),Ti={exports:{}},cu,jl;function Yv(){return jl||(jl=1,cu={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),cu}var fu,Zl;function Kc(){if(Zl)return fu;Zl=1;const t=Yv(),i={};for(const u of Object.keys(t))i[t[u]]=u;const n={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};fu=n;for(const u of Object.keys(n)){if(!("channels"in n[u]))throw new Error("missing channels property: "+u);if(!("labels"in n[u]))throw new Error("missing channel labels property: "+u);if(n[u].labels.length!==n[u].channels)throw new Error("channel and label counts mismatch: "+u);const{channels:s,labels:l}=n[u];delete n[u].channels,delete n[u].labels,Object.defineProperty(n[u],"channels",{value:s}),Object.defineProperty(n[u],"labels",{value:l})}n.rgb.hsl=function(u){const s=u[0]/255,l=u[1]/255,c=u[2]/255,h=Math.min(s,l,c),d=Math.max(s,l,c),p=d-h;let g,b;d===h?g=0:s===d?g=(l-c)/p:l===d?g=2+(c-s)/p:c===d&&(g=4+(s-l)/p),g=Math.min(g*60,360),g<0&&(g+=360);const w=(h+d)/2;return d===h?b=0:w<=.5?b=p/(d+h):b=p/(2-d-h),[g,b*100,w*100]},n.rgb.hsv=function(u){let s,l,c,h,d;const p=u[0]/255,g=u[1]/255,b=u[2]/255,w=Math.max(p,g,b),T=w-Math.min(p,g,b),R=function(q){return(w-q)/6/T+1/2};return T===0?(h=0,d=0):(d=T/w,s=R(p),l=R(g),c=R(b),p===w?h=c-l:g===w?h=1/3+s-c:b===w&&(h=2/3+l-s),h<0?h+=1:h>1&&(h-=1)),[h*360,d*100,w*100]},n.rgb.hwb=function(u){const s=u[0],l=u[1];let c=u[2];const h=n.rgb.hsl(u)[0],d=1/255*Math.min(s,Math.min(l,c));return c=1-1/255*Math.max(s,Math.max(l,c)),[h,d*100,c*100]},n.rgb.cmyk=function(u){const s=u[0]/255,l=u[1]/255,c=u[2]/255,h=Math.min(1-s,1-l,1-c),d=(1-s-h)/(1-h)||0,p=(1-l-h)/(1-h)||0,g=(1-c-h)/(1-h)||0;return[d*100,p*100,g*100,h*100]};function o(u,s){return(u[0]-s[0])**2+(u[1]-s[1])**2+(u[2]-s[2])**2}return n.rgb.keyword=function(u){const s=i[u];if(s)return s;let l=1/0,c;for(const h of Object.keys(t)){const d=t[h],p=o(u,d);p<l&&(l=p,c=h)}return c},n.keyword.rgb=function(u){return t[u]},n.rgb.xyz=function(u){let s=u[0]/255,l=u[1]/255,c=u[2]/255;s=s>.04045?((s+.055)/1.055)**2.4:s/12.92,l=l>.04045?((l+.055)/1.055)**2.4:l/12.92,c=c>.04045?((c+.055)/1.055)**2.4:c/12.92;const h=s*.4124+l*.3576+c*.1805,d=s*.2126+l*.7152+c*.0722,p=s*.0193+l*.1192+c*.9505;return[h*100,d*100,p*100]},n.rgb.lab=function(u){const s=n.rgb.xyz(u);let l=s[0],c=s[1],h=s[2];l/=95.047,c/=100,h/=108.883,l=l>.008856?l**(1/3):7.787*l+16/116,c=c>.008856?c**(1/3):7.787*c+16/116,h=h>.008856?h**(1/3):7.787*h+16/116;const d=116*c-16,p=500*(l-c),g=200*(c-h);return[d,p,g]},n.hsl.rgb=function(u){const s=u[0]/360,l=u[1]/100,c=u[2]/100;let h,d,p;if(l===0)return p=c*255,[p,p,p];c<.5?h=c*(1+l):h=c+l-c*l;const g=2*c-h,b=[0,0,0];for(let w=0;w<3;w++)d=s+1/3*-(w-1),d<0&&d++,d>1&&d--,6*d<1?p=g+(h-g)*6*d:2*d<1?p=h:3*d<2?p=g+(h-g)*(2/3-d)*6:p=g,b[w]=p*255;return b},n.hsl.hsv=function(u){const s=u[0];let l=u[1]/100,c=u[2]/100,h=l;const d=Math.max(c,.01);c*=2,l*=c<=1?c:2-c,h*=d<=1?d:2-d;const p=(c+l)/2,g=c===0?2*h/(d+h):2*l/(c+l);return[s,g*100,p*100]},n.hsv.rgb=function(u){const s=u[0]/60,l=u[1]/100;let c=u[2]/100;const h=Math.floor(s)%6,d=s-Math.floor(s),p=255*c*(1-l),g=255*c*(1-l*d),b=255*c*(1-l*(1-d));switch(c*=255,h){case 0:return[c,b,p];case 1:return[g,c,p];case 2:return[p,c,b];case 3:return[p,g,c];case 4:return[b,p,c];case 5:return[c,p,g]}},n.hsv.hsl=function(u){const s=u[0],l=u[1]/100,c=u[2]/100,h=Math.max(c,.01);let d,p;p=(2-l)*c;const g=(2-l)*h;return d=l*h,d/=g<=1?g:2-g,d=d||0,p/=2,[s,d*100,p*100]},n.hwb.rgb=function(u){const s=u[0]/360;let l=u[1]/100,c=u[2]/100;const h=l+c;let d;h>1&&(l/=h,c/=h);const p=Math.floor(6*s),g=1-c;d=6*s-p,(p&1)!==0&&(d=1-d);const b=l+d*(g-l);let w,T,R;switch(p){default:case 6:case 0:w=g,T=b,R=l;break;case 1:w=b,T=g,R=l;break;case 2:w=l,T=g,R=b;break;case 3:w=l,T=b,R=g;break;case 4:w=b,T=l,R=g;break;case 5:w=g,T=l,R=b;break}return[w*255,T*255,R*255]},n.cmyk.rgb=function(u){const s=u[0]/100,l=u[1]/100,c=u[2]/100,h=u[3]/100,d=1-Math.min(1,s*(1-h)+h),p=1-Math.min(1,l*(1-h)+h),g=1-Math.min(1,c*(1-h)+h);return[d*255,p*255,g*255]},n.xyz.rgb=function(u){const s=u[0]/100,l=u[1]/100,c=u[2]/100;let h,d,p;return h=s*3.2406+l*-1.5372+c*-.4986,d=s*-.9689+l*1.8758+c*.0415,p=s*.0557+l*-.204+c*1.057,h=h>.0031308?1.055*h**(1/2.4)-.055:h*12.92,d=d>.0031308?1.055*d**(1/2.4)-.055:d*12.92,p=p>.0031308?1.055*p**(1/2.4)-.055:p*12.92,h=Math.min(Math.max(0,h),1),d=Math.min(Math.max(0,d),1),p=Math.min(Math.max(0,p),1),[h*255,d*255,p*255]},n.xyz.lab=function(u){let s=u[0],l=u[1],c=u[2];s/=95.047,l/=100,c/=108.883,s=s>.008856?s**(1/3):7.787*s+16/116,l=l>.008856?l**(1/3):7.787*l+16/116,c=c>.008856?c**(1/3):7.787*c+16/116;const h=116*l-16,d=500*(s-l),p=200*(l-c);return[h,d,p]},n.lab.xyz=function(u){const s=u[0],l=u[1],c=u[2];let h,d,p;d=(s+16)/116,h=l/500+d,p=d-c/200;const g=d**3,b=h**3,w=p**3;return d=g>.008856?g:(d-16/116)/7.787,h=b>.008856?b:(h-16/116)/7.787,p=w>.008856?w:(p-16/116)/7.787,h*=95.047,d*=100,p*=108.883,[h,d,p]},n.lab.lch=function(u){const s=u[0],l=u[1],c=u[2];let h;h=Math.atan2(c,l)*360/2/Math.PI,h<0&&(h+=360);const p=Math.sqrt(l*l+c*c);return[s,p,h]},n.lch.lab=function(u){const s=u[0],l=u[1],h=u[2]/360*2*Math.PI,d=l*Math.cos(h),p=l*Math.sin(h);return[s,d,p]},n.rgb.ansi16=function(u,s=null){const[l,c,h]=u;let d=s===null?n.rgb.hsv(u)[2]:s;if(d=Math.round(d/50),d===0)return 30;let p=30+(Math.round(h/255)<<2|Math.round(c/255)<<1|Math.round(l/255));return d===2&&(p+=60),p},n.hsv.ansi16=function(u){return n.rgb.ansi16(n.hsv.rgb(u),u[2])},n.rgb.ansi256=function(u){const s=u[0],l=u[1],c=u[2];return s===l&&l===c?s<8?16:s>248?231:Math.round((s-8)/247*24)+232:16+36*Math.round(s/255*5)+6*Math.round(l/255*5)+Math.round(c/255*5)},n.ansi16.rgb=function(u){let s=u%10;if(s===0||s===7)return u>50&&(s+=3.5),s=s/10.5*255,[s,s,s];const l=(~~(u>50)+1)*.5,c=(s&1)*l*255,h=(s>>1&1)*l*255,d=(s>>2&1)*l*255;return[c,h,d]},n.ansi256.rgb=function(u){if(u>=232){const d=(u-232)*10+8;return[d,d,d]}u-=16;let s;const l=Math.floor(u/36)/5*255,c=Math.floor((s=u%36)/6)/5*255,h=s%6/5*255;return[l,c,h]},n.rgb.hex=function(u){const l=(((Math.round(u[0])&255)<<16)+((Math.round(u[1])&255)<<8)+(Math.round(u[2])&255)).toString(16).toUpperCase();return"000000".substring(l.length)+l},n.hex.rgb=function(u){const s=u.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!s)return[0,0,0];let l=s[0];s[0].length===3&&(l=l.split("").map(g=>g+g).join(""));const c=parseInt(l,16),h=c>>16&255,d=c>>8&255,p=c&255;return[h,d,p]},n.rgb.hcg=function(u){const s=u[0]/255,l=u[1]/255,c=u[2]/255,h=Math.max(Math.max(s,l),c),d=Math.min(Math.min(s,l),c),p=h-d;let g,b;return p<1?g=d/(1-p):g=0,p<=0?b=0:h===s?b=(l-c)/p%6:h===l?b=2+(c-s)/p:b=4+(s-l)/p,b/=6,b%=1,[b*360,p*100,g*100]},n.hsl.hcg=function(u){const s=u[1]/100,l=u[2]/100,c=l<.5?2*s*l:2*s*(1-l);let h=0;return c<1&&(h=(l-.5*c)/(1-c)),[u[0],c*100,h*100]},n.hsv.hcg=function(u){const s=u[1]/100,l=u[2]/100,c=s*l;let h=0;return c<1&&(h=(l-c)/(1-c)),[u[0],c*100,h*100]},n.hcg.rgb=function(u){const s=u[0]/360,l=u[1]/100,c=u[2]/100;if(l===0)return[c*255,c*255,c*255];const h=[0,0,0],d=s%1*6,p=d%1,g=1-p;let b=0;switch(Math.floor(d)){case 0:h[0]=1,h[1]=p,h[2]=0;break;case 1:h[0]=g,h[1]=1,h[2]=0;break;case 2:h[0]=0,h[1]=1,h[2]=p;break;case 3:h[0]=0,h[1]=g,h[2]=1;break;case 4:h[0]=p,h[1]=0,h[2]=1;break;default:h[0]=1,h[1]=0,h[2]=g}return b=(1-l)*c,[(l*h[0]+b)*255,(l*h[1]+b)*255,(l*h[2]+b)*255]},n.hcg.hsv=function(u){const s=u[1]/100,l=u[2]/100,c=s+l*(1-s);let h=0;return c>0&&(h=s/c),[u[0],h*100,c*100]},n.hcg.hsl=function(u){const s=u[1]/100,c=u[2]/100*(1-s)+.5*s;let h=0;return c>0&&c<.5?h=s/(2*c):c>=.5&&c<1&&(h=s/(2*(1-c))),[u[0],h*100,c*100]},n.hcg.hwb=function(u){const s=u[1]/100,l=u[2]/100,c=s+l*(1-s);return[u[0],(c-s)*100,(1-c)*100]},n.hwb.hcg=function(u){const s=u[1]/100,c=1-u[2]/100,h=c-s;let d=0;return h<1&&(d=(c-h)/(1-h)),[u[0],h*100,d*100]},n.apple.rgb=function(u){return[u[0]/65535*255,u[1]/65535*255,u[2]/65535*255]},n.rgb.apple=function(u){return[u[0]/255*65535,u[1]/255*65535,u[2]/255*65535]},n.gray.rgb=function(u){return[u[0]/100*255,u[0]/100*255,u[0]/100*255]},n.gray.hsl=function(u){return[0,0,u[0]]},n.gray.hsv=n.gray.hsl,n.gray.hwb=function(u){return[0,100,u[0]]},n.gray.cmyk=function(u){return[0,0,0,u[0]]},n.gray.lab=function(u){return[u[0],0,0]},n.gray.hex=function(u){const s=Math.round(u[0]/100*255)&255,c=((s<<16)+(s<<8)+s).toString(16).toUpperCase();return"000000".substring(c.length)+c},n.rgb.gray=function(u){return[(u[0]+u[1]+u[2])/3/255*100]},fu}var hu,ec;function Gv(){if(ec)return hu;ec=1;const t=Kc();function i(){const s={},l=Object.keys(t);for(let c=l.length,h=0;h<c;h++)s[l[h]]={distance:-1,parent:null};return s}function n(s){const l=i(),c=[s];for(l[s].distance=0;c.length;){const h=c.pop(),d=Object.keys(t[h]);for(let p=d.length,g=0;g<p;g++){const b=d[g],w=l[b];w.distance===-1&&(w.distance=l[h].distance+1,w.parent=h,c.unshift(b))}}return l}function o(s,l){return function(c){return l(s(c))}}function u(s,l){const c=[l[s].parent,s];let h=t[l[s].parent][s],d=l[s].parent;for(;l[d].parent;)c.unshift(l[d].parent),h=o(t[l[d].parent][d],h),d=l[d].parent;return h.conversion=c,h}return hu=function(s){const l=n(s),c={},h=Object.keys(l);for(let d=h.length,p=0;p<d;p++){const g=h[p];l[g].parent!==null&&(c[g]=u(g,l))}return c},hu}var du,tc;function Vv(){if(tc)return du;tc=1;const t=Kc(),i=Gv(),n={},o=Object.keys(t);function u(l){const c=function(...h){const d=h[0];return d==null?d:(d.length>1&&(h=d),l(h))};return"conversion"in l&&(c.conversion=l.conversion),c}function s(l){const c=function(...h){const d=h[0];if(d==null)return d;d.length>1&&(h=d);const p=l(h);if(typeof p=="object")for(let g=p.length,b=0;b<g;b++)p[b]=Math.round(p[b]);return p};return"conversion"in l&&(c.conversion=l.conversion),c}return o.forEach(l=>{n[l]={},Object.defineProperty(n[l],"channels",{value:t[l].channels}),Object.defineProperty(n[l],"labels",{value:t[l].labels});const c=i(l);Object.keys(c).forEach(d=>{const p=c[d];n[l][d]=s(p),n[l][d].raw=u(p)})}),du=n,du}Ti.exports;var nc;function Qv(){return nc||(nc=1,(function(t){const i=(p,g)=>(...b)=>`\x1B[${p(...b)+g}m`,n=(p,g)=>(...b)=>{const w=p(...b);return`\x1B[${38+g};5;${w}m`},o=(p,g)=>(...b)=>{const w=p(...b);return`\x1B[${38+g};2;${w[0]};${w[1]};${w[2]}m`},u=p=>p,s=(p,g,b)=>[p,g,b],l=(p,g,b)=>{Object.defineProperty(p,g,{get:()=>{const w=b();return Object.defineProperty(p,g,{value:w,enumerable:!0,configurable:!0}),w},enumerable:!0,configurable:!0})};let c;const h=(p,g,b,w)=>{c===void 0&&(c=Vv());const T=w?10:0,R={};for(const[q,B]of Object.entries(c)){const X=q==="ansi16"?"ansi":q;q===g?R[X]=p(b,T):typeof B=="object"&&(R[X]=p(B[g],T))}return R};function d(){const p=new Map,g={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};g.color.gray=g.color.blackBright,g.bgColor.bgGray=g.bgColor.bgBlackBright,g.color.grey=g.color.blackBright,g.bgColor.bgGrey=g.bgColor.bgBlackBright;for(const[b,w]of Object.entries(g)){for(const[T,R]of Object.entries(w))g[T]={open:`\x1B[${R[0]}m`,close:`\x1B[${R[1]}m`},w[T]=g[T],p.set(R[0],R[1]);Object.defineProperty(g,b,{value:w,enumerable:!1})}return Object.defineProperty(g,"codes",{value:p,enumerable:!1}),g.color.close="\x1B[39m",g.bgColor.close="\x1B[49m",l(g.color,"ansi",()=>h(i,"ansi16",u,!1)),l(g.color,"ansi256",()=>h(n,"ansi256",u,!1)),l(g.color,"ansi16m",()=>h(o,"rgb",s,!1)),l(g.bgColor,"ansi",()=>h(i,"ansi16",u,!0)),l(g.bgColor,"ansi256",()=>h(n,"ansi256",u,!0)),l(g.bgColor,"ansi16m",()=>h(o,"rgb",s,!0)),g}Object.defineProperty(t,"exports",{enumerable:!0,get:d})})(Ti)),Ti.exports}var pu,rc;function Xv(){return rc||(rc=1,pu={stdout:!1,stderr:!1}),pu}var gu,ic;function Kv(){return ic||(ic=1,gu={stringReplaceAll:(n,o,u)=>{let s=n.indexOf(o);if(s===-1)return n;const l=o.length;let c=0,h="";do h+=n.substr(c,s-c)+o+u,c=s+l,s=n.indexOf(o,c);while(s!==-1);return h+=n.substr(c),h},stringEncaseCRLFWithFirstIndex:(n,o,u,s)=>{let l=0,c="";do{const h=n[s-1]==="\r";c+=n.substr(l,(h?s-1:s)-l)+o+(h?`\r
`:`
`)+u,l=s+1,s=n.indexOf(`
`,l)}while(s!==-1);return c+=n.substr(l),c}}),gu}var mu,oc;function Jv(){if(oc)return mu;oc=1;const t=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,i=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,n=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,o=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,u=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function s(d){const p=d[0]==="u",g=d[1]==="{";return p&&!g&&d.length===5||d[0]==="x"&&d.length===3?String.fromCharCode(parseInt(d.slice(1),16)):p&&g?String.fromCodePoint(parseInt(d.slice(2,-1),16)):u.get(d)||d}function l(d,p){const g=[],b=p.trim().split(/\s*,\s*/g);let w;for(const T of b){const R=Number(T);if(!Number.isNaN(R))g.push(R);else if(w=T.match(n))g.push(w[2].replace(o,(q,B,X)=>B?s(B):X));else throw new Error(`Invalid Chalk template style argument: ${T} (in style '${d}')`)}return g}function c(d){i.lastIndex=0;const p=[];let g;for(;(g=i.exec(d))!==null;){const b=g[1];if(g[2]){const w=l(b,g[2]);p.push([b].concat(w))}else p.push([b])}return p}function h(d,p){const g={};for(const w of p)for(const T of w.styles)g[T[0]]=w.inverse?null:T.slice(1);let b=d;for(const[w,T]of Object.entries(g))if(Array.isArray(T)){if(!(w in b))throw new Error(`Unknown Chalk style: ${w}`);b=T.length>0?b[w](...T):b[w]}return b}return mu=(d,p)=>{const g=[],b=[];let w=[];if(p.replace(t,(T,R,q,B,X,W)=>{if(R)w.push(s(R));else if(B){const N=w.join("");w=[],b.push(g.length===0?N:h(d,g)(N)),g.push({inverse:q,styles:c(B)})}else if(X){if(g.length===0)throw new Error("Found extraneous } in Chalk template literal");b.push(h(d,g)(w.join(""))),w=[],g.pop()}else w.push(W)}),b.push(w.join("")),g.length>0){const T=`Chalk template literal is missing ${g.length} closing bracket${g.length===1?"":"s"} (\`}\`)`;throw new Error(T)}return b.join("")},mu}var yu,uc;function jv(){if(uc)return yu;uc=1;const t=Qv(),{stdout:i,stderr:n}=Xv(),{stringReplaceAll:o,stringEncaseCRLFWithFirstIndex:u}=Kv(),{isArray:s}=Array,l=["ansi","ansi","ansi256","ansi16m"],c=Object.create(null),h=(N,M={})=>{if(M.level&&!(Number.isInteger(M.level)&&M.level>=0&&M.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const E=i?i.level:0;N.level=M.level===void 0?E:M.level};class d{constructor(M){return p(M)}}const p=N=>{const M={};return h(M,N),M.template=(...E)=>X(M.template,...E),Object.setPrototypeOf(M,g.prototype),Object.setPrototypeOf(M.template,M),M.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},M.template.Instance=d,M.template};function g(N){return p(N)}for(const[N,M]of Object.entries(t))c[N]={get(){const E=R(this,T(M.open,M.close,this._styler),this._isEmpty);return Object.defineProperty(this,N,{value:E}),E}};c.visible={get(){const N=R(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:N}),N}};const b=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(const N of b)c[N]={get(){const{level:M}=this;return function(...E){const H=T(t.color[l[M]][N](...E),t.color.close,this._styler);return R(this,H,this._isEmpty)}}};for(const N of b){const M="bg"+N[0].toUpperCase()+N.slice(1);c[M]={get(){const{level:E}=this;return function(...H){const V=T(t.bgColor[l[E]][N](...H),t.bgColor.close,this._styler);return R(this,V,this._isEmpty)}}}}const w=Object.defineProperties(()=>{},{...c,level:{enumerable:!0,get(){return this._generator.level},set(N){this._generator.level=N}}}),T=(N,M,E)=>{let H,V;return E===void 0?(H=N,V=M):(H=E.openAll+N,V=M+E.closeAll),{open:N,close:M,openAll:H,closeAll:V,parent:E}},R=(N,M,E)=>{const H=(...V)=>s(V[0])&&s(V[0].raw)?q(H,X(H,...V)):q(H,V.length===1?""+V[0]:V.join(" "));return Object.setPrototypeOf(H,w),H._generator=N,H._styler=M,H._isEmpty=E,H},q=(N,M)=>{if(N.level<=0||!M)return N._isEmpty?"":M;let E=N._styler;if(E===void 0)return M;const{openAll:H,closeAll:V}=E;if(M.indexOf("\x1B")!==-1)for(;E!==void 0;)M=o(M,E.close,E.open),E=E.parent;const ee=M.indexOf(`
`);return ee!==-1&&(M=u(M,V,H,ee)),H+M+V};let B;const X=(N,...M)=>{const[E]=M;if(!s(E)||!s(E.raw))return M.join(" ");const H=M.slice(1),V=[E.raw[0]];for(let ee=1;ee<E.length;ee++)V.push(String(H[ee-1]).replace(/[{}\\]/g,"\\$&"),String(E.raw[ee]));return B===void 0&&(B=Jv()),B(N,V.join(""))};Object.defineProperties(g.prototype,c);const W=g();return W.supportsColor=i,W.stderr=g({level:n?n.level:0}),W.stderr.supportsColor=n,yu=W,yu}var Zv=jv();const e2=sc(Zv);function t2(t,i={}){if(!Array.isArray(t))throw new TypeError("Expected an array");let n=["▁","▂","▃","▄","▅","▆","▇","█"];const o=[[5,5,4],[5,5,3],[5,5,0],[5,4,0],[5,3,0],[5,2,0],[5,1,0],[5,0,0]],u=t.filter(c=>Number.isFinite(c)),s=typeof i.minimum=="number"?i.minimum:typeof i.maximum=="number"?0:Math.min(...u),l=typeof i.maximum=="number"?i.maximum:Math.max(...u);return s===l&&l!==0&&(n=[n[4]]),t.map(c=>{if(!Number.isFinite(c))return" ";let h;return s===l?h=0:h=Math.ceil((c-s)/(l-s)*n.length)-1,h<0&&(h=0),i.style==="fire"?e2.rgb(...o[h])(n[h]):n[h]}).join("")}const Ii=Vt(Qt.StatisticsService);class n2{descriptiveStatistics(i,n){const o=i.filter(u=>typeof u=="number"&&!isNaN(u));if(o.length===0)return Ii.warn("No valid numeric values found for descriptive statistics"),null;try{const u=Tu(o,.25),s=Tu(o,.75),l={count:o.length,sum:Yc(o),mean:Gc(o),median:qv(o),mode:Nv(o),min:Ql(o),max:Xl(o),range:Xl(o)-Ql(o),variance:Vc(o),standardDeviation:Bv(o),q1:u,q3:s,iqr:s-u};if(n?.includeVisualization){const c=n.chartHeight||10,h=this.createSparkline(o),d=this.createLineChart(o,c);l.visualization=`
**Sparkline:** ${h}

**Trend Chart:**
\`\`\`
${d}
\`\`\`
`.trim()}return Ii.dev("Calculated descriptive statistics",{stats:l}),l}catch(u){return Ii.error("Error calculating descriptive statistics",{error:u}),null}}booleanStatistics(i){const n=i.filter(T=>T===!0).length,o=i.filter(T=>T===!1).length,u=i.filter(T=>T===null).length,s=i.length;let l=0,c=0,h=0,d=null,p=0,g=0;for(const T of i)T===!0?(p++,g=0):T===!1&&(g++,p=0),l=Math.max(l,p),c=Math.max(c,g);const b=i[i.length-1];b===!0?(h=p,d="true"):b===!1&&(h=g,d="false");const w={count:s,trueCount:n,falseCount:o,nullCount:u,truePercentage:s>0?n/s*100:0,falsePercentage:s>0?o/s*100:0,longestTrueStreak:l,longestFalseStreak:c,currentStreak:h,currentStreakType:d};return Ii.dev("Calculated boolean statistics",{stats:w}),w}formatDescriptiveStats(i){return`
**Count:** ${i.count}
**Sum:** ${i.sum.toFixed(2)}
**Mean:** ${i.mean.toFixed(2)}
**Median:** ${i.median.toFixed(2)}
**Mode:** ${Array.isArray(i.mode)?i.mode.join(", "):i.mode}
**Min:** ${i.min.toFixed(2)}
**Max:** ${i.max.toFixed(2)}
**Range:** ${i.range.toFixed(2)}
**Std Dev:** ${i.standardDeviation.toFixed(2)}
**Variance:** ${i.variance.toFixed(2)}
**Q1 (25%):** ${i.q1.toFixed(2)}
**Q3 (75%):** ${i.q3.toFixed(2)}
**IQR:** ${i.iqr.toFixed(2)}
`.trim()}formatBooleanStats(i,n){const o=i.currentStreakType==="true"?"🔥":"❄️";return`
**${n} Statistics**
- Total tracked: ${i.count} days
- Success rate: ${i.truePercentage.toFixed(1)}% (${i.trueCount}/${i.count})
- Longest streak: ${i.longestTrueStreak} days 🏆
- Current streak: ${o} ${i.currentStreak} days
`.trim()}createLineChart(i,n=10,o){if(i.length===0)return"No data to display";const u={height:n};return o&&(u.width=o),Hv.plot(i,u)}createSparkline(i){return i.length===0?"—":t2(i)}createBooleanBarChart(i,n=30){return i.slice(-n).map(s=>s===!0?"✅":s===!1?"❌":"⬜").join("")}createBooleanPieChart(i,n){return`\`\`\`mermaid
pie title ${n}
    "Completed" : ${i.trueCount}
    "Skipped" : ${i.falseCount}
    ${i.nullCount>0?`"Not Tracked" : ${i.nullCount}`:""}
\`\`\``}createBooleanVisualReport(i,n,o={}){const{showSparkline:u=!0,showBarChart:s=!0,showAsciiChart:l=!0,showPieChart:c=!1,dates:h=[]}=o,d=this.booleanStatistics(i),p=i.map(b=>b===!0?1:0);let g=`## 📊 ${n}

`;if(g+=this.formatBooleanStats(d,n)+`

`,u&&(g+=`**Trend:** ${this.createSparkline(p)}

`),s&&(g+=`**Last ${Math.min(i.length,30)} days:**
`,g+=this.createBooleanBarChart(i,30)+`

`,h.length>0)){const b=h[0],w=h[h.length-1];g+=`*From ${b} to ${w}*

`}return l&&p.length>=3&&(g+="**Trend Chart:**\n```\n",g+=this.createLineChart(p,6),g+="\n```\n\n"),c&&(g+=this.createBooleanPieChart(d,`${n} Distribution`)+`

`),g}createNumericVisualReport(i,n,o={}){const{showSparkline:u=!0,showAsciiChart:s=!0,showStats:l=!0}=o,c=this.descriptiveStatistics(i);if(!c)return`## ${n}

No data available`;let h=`## 📈 ${n}

`;return l&&(h+=this.formatDescriptiveStats(c)+`

`),u&&(h+=`**Trend:** ${this.createSparkline(i)}

`),s&&(h+="**Trend Chart:**\n```\n",h+=this.createLineChart(i,10),h+="\n```\n\n"),h}}const r2=new n2;async function i2(){const t="habitTracking",i=new Pv(t),n=nt.habits;try{const o=await Hc.getInputsLastNReports("almostDailyReport",["exercise"],30);if(o.length>0){const u=o.map(c=>c.value),s=o.map(c=>c.reportDate||""),l=r2.createBooleanVisualReport(u,"Exercise Habit",{showSparkline:u.length>=2,showBarChart:!0,showAsciiChart:u.length>=3,showPieChart:u.length>=2,dates:s});i._md(l)}else i._md(`## 📊 Exercise Habit

*No exercise data yet. Start tracking today!*`)}catch{i._md(`## 📊 Exercise Habit

*Unable to load exercise history*`)}return i._md(`---
## 📝 Today's Habits`),n.forEach(o=>{o.active&&(i._boolean(o.id,o.label),i._md(`*Cue*. ${o.cue} · *Reward*. ${o.reward}`))}),i._md(`---
## 🧪 Test Inputs`),i._text("Test Text Input"),i._md("***"),i._number("Test Number Input 1"),i._md("***"),i._number("Test Number Input 2"),i._md("***"),i._multiCheckbox("Test MultiCheckbox Input",[{label:"Option 1",value:"option_1"},{label:"Option 2",value:"option_2"},{label:"Option 3",value:"option_3"}]),i._md("***"),i._richText("Test Rich Text Input"),i.render()}const Jc={almostDailyReport:{folder:"l1almostDailyReport",name:"Daily Report"},"10daysReport":{folder:"l2tenL1ReportsReview",name:"10 Days Review"},"30daysReport":{folder:"l3ThreeL2Review",name:"30 Days Review"},"150daysReport":{folder:"l4FiveL3Review",name:"150 Days Review"}},gt=Vt(Qt.SavingService),Pu={get baseOutput(){return`${nt?.projectDir??"vault"}/${nt?.outputDir??"outputs"}`},get fileExtension(){return nt?.reportFileExtension??".md"},get reportFolders(){const t={};for(const[i,{folder:n}]of Object.entries(Jc))t[i]=`${this.baseOutput}/${n}`;return t},_today(){return dc(new Date,"yyyyMMdd")},async _ensureFolder(t){Ce.vault.getAbstractFileByPath(t)||(gt.dev(`Creating folder: ${t}`),await Ce.vault.createFolder(t))},async _listFiles(t){await this._ensureFolder(t);const i=Ce.vault.getAbstractFileByPath(t);return!i||!i.children?[]:i.children.filter(n=>"extension"in n&&n.extension==="md").map(n=>n.name)},async _openFile(t){try{gt.dev(`_openFile start: ${t.path}`);const i=Ce.workspace.getLeaf(!0);if(await i.openFile(t),gt.dev(`Main leaf opened file: ${t.path}`),nt?.devMode){const n=Ce.workspace.createLeafBySplit(i,"vertical",!1);await n.openFile(t);const o={type:"markdown",state:{file:t.path,mode:"source"}};try{await n.setViewState(o),gt.dev("DevMode: right leaf forced to source mode")}catch(u){gt.warn(`Failed to force right leaf to source mode: ${u.message}`)}}}catch(i){gt.error(`Failed to open file ${t.path}: ${i.message}`)}},async write(t){const i=t.data??t.content;if(!i)throw new Error("No content provided for write()");const n=this.reportFolders[t.type];if(!n)throw new Error(`Unknown report type: ${t.type}`);await this._ensureFolder(n);const o=this._today(),s=(await this._listFiles(n)).length+1,l=String(s).padStart(5,"0"),c=`${o}-${l}-${t.type}${this.fileExtension}`,h=`${n}/${c}`;if(Ce.vault.getAbstractFileByPath(h))return gt.warn(`File already exists: ${h}. Skipping write.`),h;gt.info(`Writing new file: ${h}`);const p=await Ce.vault.create(h,i);return t?.open!==!1&&await this._openFile(p),h},async writeGeneral(t,i,n=!1){let o;const u=Ce.vault.getAbstractFileByPath(t);if(u)if("extension"in u)gt.info(`Overwriting existing file: ${t}`),await Ce.vault.modify(u,i),o=u;else throw gt.error(`Path exists but is not a file: ${t}`),new Error(`Path exists but is not a file: ${t}`);else gt.info(`Creating new file: ${t}`),o=await Ce.vault.create(t,i);return n&&await this._openFile(o),t},async delete(t){const i=Ce.vault.getAbstractFileByPath(t);i?(gt.info(`Deleting file: ${t}`),await Ce.vault.delete(i)):gt.warn(`Cannot delete; file not found: ${t}`)}};async function o2(){const t=[await i2()];Pu.write({type:"almostDailyReport",data:t.join(`
***
`)})}const wu=Vt(Qt.ValueExtractor);class u2{extract(i){const n=ku().use(Ac).parse(i),o=[],u=[],s={};Oc(n,l=>{if(l.type==="html"&&l.position){const c=l.value,h=l.position.start.offset;if(c.includes(Wn.input)){const d=this.getMeta(c);if(d){const p=this.key(d);c.includes('end"')?s[p]?s[p].endPos=l.position.start.offset:s[p]={meta:d,startPos:-1,endPos:l.position.start.offset,hiddenValues:[]}:s[p]?s[p].startPos=l.position.end.offset:s[p]={meta:d,startPos:l.position.end.offset,endPos:-1,hiddenValues:[]}}}else if(c.includes(Wn.hiddenValue)){const d=this.getMeta(c);if(d&&d.value){const p=this.key(d);s[p]||(s[p]={meta:d,startPos:-1,endPos:-1,hiddenValues:[]}),s[p].hiddenValues.push({value:d.value,pos:h})}}}});for(const l in s){const{meta:c,startPos:h,endPos:d,hiddenValues:p}=s[l];if(h===-1||d===-1){wu.warn(`Input ${l} missing start or end tag, skipping`);continue}const b=i.substring(h,d).trim().replace(/<span[^>]*>.*?<\/span>/gs,"").trim(),w=p.filter(R=>R.pos>=h&&R.pos<d).map(R=>R.value),T=this.extractValue(c.inputType,b,w,c);T.errors.length>0&&u.push(...T.errors),o.push({componentName:c.componentName,inputName:c.inputName,inputType:c.inputType,value:T.value,errors:T.errors})}return wu.dev("Extracted values",o),u.length>0&&wu.error("Extraction errors:",u),o}getMeta(i){const n=i.match(/data-meta=(?:'([^']+)'|"([^"]+)")/);if(!n)return null;try{return JSON.parse(n[1]||n[2])}catch{return null}}key(i){return`${i.componentName}::${i.inputName}`}extractValue(i,n,o,u){const s=[];let l=null;switch(i){case"boolean":{n.includes("[x]")||n.includes("[X]")?l=!0:n.includes("[ ]")?l=!1:(s.push("Boolean input must be a markdown checkbox"),l=null);break}case"text":{const c=n.replace(/^>\s?/gm,"").replace(/<[^>]+>/g,"").trim();u.required&&!c&&s.push("Text input is required"),u.placeholder&&c===u.placeholder?l=null:l=c;break}case"richText":{const c=n.replace(/<[^>]+>/g,"").trim();u.required&&!c&&s.push("Rich text input is required"),u.placeholder&&c===u.placeholder?l=null:l=c;break}case"multicheckbox":{const c=[],h=n.split(`
`);let d=0;h.forEach(p=>{p.match(/\[(x|X)\]/)&&d<o.length&&c.push(o[d]),p.match(/\[[ xX]\]/)&&d++}),u.required&&c.length===0&&s.push("At least one option must be selected"),u.singleChoice?(c.length>1&&s.push(`Multiple checked values for singleChoice input: ${u.componentName}::${u.inputName} [${c.join(", ")}]`),l=c[0]??null):l=c;break}case"number":{const c=n.match(new RegExp("(?<!\\d)(\\d+(?:[.,]\\d+)?)"));c?(l=parseFloat(c[1].replace(",",".")),u.required&&(l==null||isNaN(l))&&s.push("Number input is required"),typeof l=="number"&&u.min!==void 0&&l<u.min&&s.push(`Number must be >= ${u.min}`),typeof l=="number"&&u.max!==void 0&&l>u.max&&s.push(`Number must be <= ${u.max}`)):(u.required&&s.push("Number input is required"),l=null);break}default:l=n}return{value:l,errors:s}}}const a2=new u2,qt=Vt(Qt.InputCollector);class s2{constructor(i){this.getConfig=i}async collectFromYesterday(){qt.dev("Starting collection of inputs from yesterday’s reports");const i={};this.getConfig();for(const[n,{folder:o,name:u}]of Object.entries(Jc))try{const s=`${Pu.baseOutput}/${o}`;qt.dev(`Checking folder "${s}" for report: ${n}`);const l=await Pu._listFiles(s);if(!l.length){qt.warn(`No files found in "${s}" for report: ${n}`);continue}const c=l.sort().reverse()[0];if(!c.includes(n)){qt.warn(`Newest file "${c}" in folder "${s}" does not match report type: ${n}`);continue}const h=`${s}/${c}`,d=Ce.vault.getAbstractFileByPath(h);if(!d||!("vault"in Ce)){qt.error(`Could not load file for report ${n}`,{filePath:h});continue}const p=c.match(/^(\d{8})-(\d{5})-/);let g="",b="";p&&(g=`${p[1].slice(0,4)}-${p[1].slice(4,6)}-${p[1].slice(6,8)}`,b=p[2]),qt.dev(`Reading file: "${h}"`);const w=await Ce.vault.read(d),R=a2.extract(w).map(q=>({componentName:q.componentName,inputName:q.inputName,type:q.inputType??"unknown",value:q.value,errors:q.errors&&q.errors.length>0?q.errors:void 0,reportType:n,reportDate:g,reportNumber:b}));i[n]=R,qt.dev(`Parsed ${R.length} inputs for report: ${n}`)}catch(s){qt.error(`Failed collecting inputs for ${n}`,{error:s})}return qt.info(`InputCollector finished. Collected reports: ${Object.keys(i).length}`),qt.dev("Collected inputs summary:",{collectedByReport:i}),i}}const l2=new s2(()=>nt),sn=Vt(Qt.FileService);async function c2(t,i){sn.info("runPowerJournal started");const n=await W0(i);R0(t,n),sn.dev("Globals set, config loaded");try{Qy(),sn.dev("onStart executed successfully")}catch(u){sn.error("Error running onStart",{error:u})}let o=null;try{if(o=await l2.collectFromYesterday(),sn.dev("Input collection completed",{collected:o}),o)for(const[u,s]of Object.entries(o))s&&s.length>0&&(await Hc.upsertReportInputs(u,s),sn.info(`Saved ${s.length} inputs for ${u} to database`))}catch(u){sn.error("Error collecting inputs",{error:u})}try{await o2(),sn.dev("Daily report built successfully")}catch(u){sn.error("Error building daily report",{error:u})}}module.exports=c2;
