"use strict";const Vt={ComponentBuilder:"ComponentBuilder",SavingService:"SavingService",TagsService:"TagsService",InputCreator:"InputCreator",FileService:"FileService",OnStart:"OnStart",InputCollector:"InputCollector",ValueExtractor:"ValueExtractor",DbService:"DbService",StatisticsService:"StatisticsService"},py={[Vt.ComponentBuilder]:{dev:!1,info:!0,warn:!0,error:!0},[Vt.SavingService]:{dev:!0,info:!0,warn:!0,error:!0},[Vt.TagsService]:{dev:!1,info:!0,warn:!0,error:!0},[Vt.InputCreator]:{dev:!1,info:!0,warn:!0,error:!0},[Vt.FileService]:{dev:!0,info:!0,warn:!0,error:!0},[Vt.OnStart]:{dev:!0,info:!0,warn:!0,error:!0},[Vt.InputCollector]:{dev:!0,info:!0,warn:!0,error:!0},[Vt.ValueExtractor]:{dev:!0,info:!0,warn:!0,error:!0},[Vt.DbService]:{dev:!0,info:!0,warn:!0,error:!0},[Vt.StatisticsService]:{dev:!0,info:!0,warn:!0,error:!0}},Zn={reset:"\x1B[0m",bold:"\x1B[1m",gray:"\x1B[90m",purple:"\x1B[35m"},gy={dev:"\x1B[44m\x1B[37m",info:"\x1B[42m\x1B[30m",warn:"\x1B[43m\x1B[30m",error:"\x1B[41m\x1B[37m"},my={dev:"üõ†",info:"‚ÑπÔ∏è",warn:"‚ö†Ô∏è",error:"‚ùå"},wa={},ql=["\x1B[36m","\x1B[33m","\x1B[32m","\x1B[34m","\x1B[31m","\x1B[95m","\x1B[96m","\x1B[92m","\x1B[93m"];let Yl=0;function yy(r){return wa[r]||(wa[r]=ql[Yl%ql.length],Yl++),wa[r]}class es{constructor(e,n){this.logs=[],this.serviceConfig={},this.getConfig=e,this.prefix=n??"global"}setServiceConfig(e){this.serviceConfig=e}addLog(e,n,o){const a={timestamp:new Date,level:e,service:this.prefix,message:n,meta:o};if(this.logs.push(a),!((this.serviceConfig[this.prefix]??{})[e]??!0))return;const c=a.timestamp.toISOString().split("T")[1].split(".")[0],f=`${Zn.gray}${c}${Zn.reset}`,h=`${Zn.purple}[PJ]${Zn.reset}`,p=`${yy(this.prefix)}${Zn.bold}[${this.prefix}]${Zn.reset}`,g=`${gy[e]}[${my[e]} ${e.toUpperCase().padEnd(5)}]${Zn.reset}`,w=`${f} ${h}${p}${g} ${n}`;try{e==="warn"?console.warn(w,o??""):e==="error"?console.error(w,o??""):console.log(w,o??"")}catch{console.log(`${f} ${h}[${this.prefix}][${e.toUpperCase()}] ${n}`,o??"")}}dev(e,n){this.addLog("dev",e,n)}info(e,n){this.addLog("info",e,n)}warn(e,n){this.addLog("warn",e,n)}error(e,n){this.addLog("error",e,n)}getAllLogs(){return this.logs}withPrefix(e){const n=new es(this.getConfig,e);return n.setServiceConfig(this.serviceConfig),n}}let st;function wy(r,e){st=e}const $c=new es(()=>st);$c.setServiceConfig(py);function un(r){return $c.withPrefix(r)}const ln=Vt,ge=app;var zi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bc(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Yr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var by=Yr.exports,Hl;function xy(){return Hl||(Hl=1,(function(r,e){(function(){var n,o="4.17.21",a=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",h=500,p="__lodash_placeholder__",g=1,w=2,y=4,S=1,E=2,D=1,A=2,N=4,z=8,W=16,O=32,P=64,U=128,V=256,ee=512,de=30,X="...",Q=800,xe=16,Me=1,fe=2,Ve=3,Ee=1/0,Ye=9007199254740991,Wt=17976931348623157e292,_=NaN,Re=4294967295,zt=Re-1,I=Re>>>1,bt=[["ary",U],["bind",D],["bindKey",A],["curry",z],["curryRight",W],["flip",ee],["partial",O],["partialRight",P],["rearg",V]],ut="[object Arguments]",Le="[object Array]",zn="[object AsyncFunction]",lt="[object Boolean]",Pt="[object Date]",kn="[object DOMException]",cn="[object Error]",rr="[object Function]",Xr="[object GeneratorFunction]",xt="[object Map]",In="[object Number]",jr="[object Null]",At="[object Object]",Kr="[object Promise]",Jr="[object Proxy]",Sn="[object RegExp]",vt="[object Set]",qn="[object String]",ir="[object Symbol]",io="[object Undefined]",Yn="[object WeakMap]",R="[object WeakSet]",q="[object ArrayBuffer]",K="[object DataView]",ae="[object Float32Array]",me="[object Float64Array]",rt="[object Int8Array]",qt="[object Int16Array]",_t="[object Int32Array]",fn="[object Uint8Array]",hn="[object Uint8ClampedArray]",je="[object Uint16Array]",Kt="[object Uint32Array]",Yt=/\b__p \+= '';/g,Lf=/\b(__p \+=) '' \+/g,$f=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ds=/&(?:amp|lt|gt|quot|#39);/g,ps=/[&<>"']/g,Bf=RegExp(ds.source),Nf=RegExp(ps.source),Wf=/<%-([\s\S]+?)%>/g,zf=/<%([\s\S]+?)%>/g,gs=/<%=([\s\S]+?)%>/g,qf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yf=/^\w*$/,Hf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oo=/[\\^$.*+?()[\]{}|]/g,Uf=RegExp(oo.source),ao=/^\s+/,Gf=/\s/,Qf=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Vf=/\{\n\/\* \[wrapped with (.+)\] \*/,Xf=/,? & /,jf=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Kf=/[()=,{}\[\]\/\s]/,Jf=/\\(\\)?/g,Zf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ms=/\w*$/,eh=/^[-+]0x[0-9a-f]+$/i,th=/^0b[01]+$/i,nh=/^\[object .+?Constructor\]$/,rh=/^0o[0-7]+$/i,ih=/^(?:0|[1-9]\d*)$/,oh=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Zr=/($^)/,ah=/['\n\r\u2028\u2029\\]/g,ei="\\ud800-\\udfff",sh="\\u0300-\\u036f",uh="\\ufe20-\\ufe2f",lh="\\u20d0-\\u20ff",ys=sh+uh+lh,ws="\\u2700-\\u27bf",bs="a-z\\xdf-\\xf6\\xf8-\\xff",ch="\\xac\\xb1\\xd7\\xf7",fh="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",hh="\\u2000-\\u206f",dh=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",xs="A-Z\\xc0-\\xd6\\xd8-\\xde",vs="\\ufe0e\\ufe0f",_s=ch+fh+hh+dh,so="['‚Äô]",ph="["+ei+"]",ks="["+_s+"]",ti="["+ys+"]",Is="\\d+",gh="["+ws+"]",Ss="["+bs+"]",Cs="[^"+ei+_s+Is+ws+bs+xs+"]",uo="\\ud83c[\\udffb-\\udfff]",mh="(?:"+ti+"|"+uo+")",Ts="[^"+ei+"]",lo="(?:\\ud83c[\\udde6-\\uddff]){2}",co="[\\ud800-\\udbff][\\udc00-\\udfff]",or="["+xs+"]",Es="\\u200d",Ps="(?:"+Ss+"|"+Cs+")",yh="(?:"+or+"|"+Cs+")",As="(?:"+so+"(?:d|ll|m|re|s|t|ve))?",Ms="(?:"+so+"(?:D|LL|M|RE|S|T|VE))?",Ds=mh+"?",Os="["+vs+"]?",wh="(?:"+Es+"(?:"+[Ts,lo,co].join("|")+")"+Os+Ds+")*",bh="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",xh="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Fs=Os+Ds+wh,vh="(?:"+[gh,lo,co].join("|")+")"+Fs,_h="(?:"+[Ts+ti+"?",ti,lo,co,ph].join("|")+")",kh=RegExp(so,"g"),Ih=RegExp(ti,"g"),fo=RegExp(uo+"(?="+uo+")|"+_h+Fs,"g"),Sh=RegExp([or+"?"+Ss+"+"+As+"(?="+[ks,or,"$"].join("|")+")",yh+"+"+Ms+"(?="+[ks,or+Ps,"$"].join("|")+")",or+"?"+Ps+"+"+As,or+"+"+Ms,xh,bh,Is,vh].join("|"),"g"),Ch=RegExp("["+Es+ei+ys+vs+"]"),Th=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Eh=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ph=-1,Pe={};Pe[ae]=Pe[me]=Pe[rt]=Pe[qt]=Pe[_t]=Pe[fn]=Pe[hn]=Pe[je]=Pe[Kt]=!0,Pe[ut]=Pe[Le]=Pe[q]=Pe[lt]=Pe[K]=Pe[Pt]=Pe[cn]=Pe[rr]=Pe[xt]=Pe[In]=Pe[At]=Pe[Sn]=Pe[vt]=Pe[qn]=Pe[Yn]=!1;var Ce={};Ce[ut]=Ce[Le]=Ce[q]=Ce[K]=Ce[lt]=Ce[Pt]=Ce[ae]=Ce[me]=Ce[rt]=Ce[qt]=Ce[_t]=Ce[xt]=Ce[In]=Ce[At]=Ce[Sn]=Ce[vt]=Ce[qn]=Ce[ir]=Ce[fn]=Ce[hn]=Ce[je]=Ce[Kt]=!0,Ce[cn]=Ce[rr]=Ce[Yn]=!1;var Ah={√Ä:"A",√Å:"A",√Ç:"A",√É:"A",√Ñ:"A",√Ö:"A",√†:"a",√°:"a",√¢:"a",√£:"a",√§:"a",√•:"a",√á:"C",√ß:"c",√ê:"D",√∞:"d",√à:"E",√â:"E",√ä:"E",√ã:"E",√®:"e",√©:"e",√™:"e",√´:"e",√å:"I",√ç:"I",√é:"I",√è:"I",√¨:"i",√≠:"i",√Æ:"i",√Ø:"i",√ë:"N",√±:"n",√í:"O",√ì:"O",√î:"O",√ï:"O",√ñ:"O",√ò:"O",√≤:"o",√≥:"o",√¥:"o",√µ:"o",√∂:"o",√∏:"o",√ô:"U",√ö:"U",√õ:"U",√ú:"U",√π:"u",√∫:"u",√ª:"u",√º:"u",√ù:"Y",√Ω:"y",√ø:"y",√Ü:"Ae",√¶:"ae",√û:"Th",√æ:"th",√ü:"ss",ƒÄ:"A",ƒÇ:"A",ƒÑ:"A",ƒÅ:"a",ƒÉ:"a",ƒÖ:"a",ƒÜ:"C",ƒà:"C",ƒä:"C",ƒå:"C",ƒá:"c",ƒâ:"c",ƒã:"c",ƒç:"c",ƒé:"D",ƒê:"D",ƒè:"d",ƒë:"d",ƒí:"E",ƒî:"E",ƒñ:"E",ƒò:"E",ƒö:"E",ƒì:"e",ƒï:"e",ƒó:"e",ƒô:"e",ƒõ:"e",ƒú:"G",ƒû:"G",ƒ†:"G",ƒ¢:"G",ƒù:"g",ƒü:"g",ƒ°:"g",ƒ£:"g",ƒ§:"H",ƒ¶:"H",ƒ•:"h",ƒß:"h",ƒ®:"I",ƒ™:"I",ƒ¨:"I",ƒÆ:"I",ƒ∞:"I",ƒ©:"i",ƒ´:"i",ƒ≠:"i",ƒØ:"i",ƒ±:"i",ƒ¥:"J",ƒµ:"j",ƒ∂:"K",ƒ∑:"k",ƒ∏:"k",ƒπ:"L",ƒª:"L",ƒΩ:"L",ƒø:"L",≈Å:"L",ƒ∫:"l",ƒº:"l",ƒæ:"l",≈Ä:"l",≈Ç:"l",≈É:"N",≈Ö:"N",≈á:"N",≈ä:"N",≈Ñ:"n",≈Ü:"n",≈à:"n",≈ã:"n",≈å:"O",≈é:"O",≈ê:"O",≈ç:"o",≈è:"o",≈ë:"o",≈î:"R",≈ñ:"R",≈ò:"R",≈ï:"r",≈ó:"r",≈ô:"r",≈ö:"S",≈ú:"S",≈û:"S",≈†:"S",≈õ:"s",≈ù:"s",≈ü:"s",≈°:"s",≈¢:"T",≈§:"T",≈¶:"T",≈£:"t",≈•:"t",≈ß:"t",≈®:"U",≈™:"U",≈¨:"U",≈Æ:"U",≈∞:"U",≈≤:"U",≈©:"u",≈´:"u",≈≠:"u",≈Ø:"u",≈±:"u",≈≥:"u",≈¥:"W",≈µ:"w",≈∂:"Y",≈∑:"y",≈∏:"Y",≈π:"Z",≈ª:"Z",≈Ω:"Z",≈∫:"z",≈º:"z",≈æ:"z",ƒ≤:"IJ",ƒ≥:"ij",≈í:"Oe",≈ì:"oe",≈â:"'n",≈ø:"s"},Mh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Dh={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Oh={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Fh=parseFloat,Rh=parseInt,Rs=typeof zi=="object"&&zi&&zi.Object===Object&&zi,Lh=typeof self=="object"&&self&&self.Object===Object&&self,Ke=Rs||Lh||Function("return this")(),ho=e&&!e.nodeType&&e,Hn=ho&&!0&&r&&!r.nodeType&&r,Ls=Hn&&Hn.exports===ho,po=Ls&&Rs.process,Mt=(function(){try{var C=Hn&&Hn.require&&Hn.require("util").types;return C||po&&po.binding&&po.binding("util")}catch{}})(),$s=Mt&&Mt.isArrayBuffer,Bs=Mt&&Mt.isDate,Ns=Mt&&Mt.isMap,Ws=Mt&&Mt.isRegExp,zs=Mt&&Mt.isSet,qs=Mt&&Mt.isTypedArray;function kt(C,F,M){switch(M.length){case 0:return C.call(F);case 1:return C.call(F,M[0]);case 2:return C.call(F,M[0],M[1]);case 3:return C.call(F,M[0],M[1],M[2])}return C.apply(F,M)}function $h(C,F,M,H){for(var ne=-1,ye=C==null?0:C.length;++ne<ye;){var Ge=C[ne];F(H,Ge,M(Ge),C)}return H}function Dt(C,F){for(var M=-1,H=C==null?0:C.length;++M<H&&F(C[M],M,C)!==!1;);return C}function Bh(C,F){for(var M=C==null?0:C.length;M--&&F(C[M],M,C)!==!1;);return C}function Ys(C,F){for(var M=-1,H=C==null?0:C.length;++M<H;)if(!F(C[M],M,C))return!1;return!0}function Cn(C,F){for(var M=-1,H=C==null?0:C.length,ne=0,ye=[];++M<H;){var Ge=C[M];F(Ge,M,C)&&(ye[ne++]=Ge)}return ye}function ni(C,F){var M=C==null?0:C.length;return!!M&&ar(C,F,0)>-1}function go(C,F,M){for(var H=-1,ne=C==null?0:C.length;++H<ne;)if(M(F,C[H]))return!0;return!1}function Ae(C,F){for(var M=-1,H=C==null?0:C.length,ne=Array(H);++M<H;)ne[M]=F(C[M],M,C);return ne}function Tn(C,F){for(var M=-1,H=F.length,ne=C.length;++M<H;)C[ne+M]=F[M];return C}function mo(C,F,M,H){var ne=-1,ye=C==null?0:C.length;for(H&&ye&&(M=C[++ne]);++ne<ye;)M=F(M,C[ne],ne,C);return M}function Nh(C,F,M,H){var ne=C==null?0:C.length;for(H&&ne&&(M=C[--ne]);ne--;)M=F(M,C[ne],ne,C);return M}function yo(C,F){for(var M=-1,H=C==null?0:C.length;++M<H;)if(F(C[M],M,C))return!0;return!1}var Wh=wo("length");function zh(C){return C.split("")}function qh(C){return C.match(jf)||[]}function Hs(C,F,M){var H;return M(C,function(ne,ye,Ge){if(F(ne,ye,Ge))return H=ye,!1}),H}function ri(C,F,M,H){for(var ne=C.length,ye=M+(H?1:-1);H?ye--:++ye<ne;)if(F(C[ye],ye,C))return ye;return-1}function ar(C,F,M){return F===F?ed(C,F,M):ri(C,Us,M)}function Yh(C,F,M,H){for(var ne=M-1,ye=C.length;++ne<ye;)if(H(C[ne],F))return ne;return-1}function Us(C){return C!==C}function Gs(C,F){var M=C==null?0:C.length;return M?xo(C,F)/M:_}function wo(C){return function(F){return F==null?n:F[C]}}function bo(C){return function(F){return C==null?n:C[F]}}function Qs(C,F,M,H,ne){return ne(C,function(ye,Ge,Se){M=H?(H=!1,ye):F(M,ye,Ge,Se)}),M}function Hh(C,F){var M=C.length;for(C.sort(F);M--;)C[M]=C[M].value;return C}function xo(C,F){for(var M,H=-1,ne=C.length;++H<ne;){var ye=F(C[H]);ye!==n&&(M=M===n?ye:M+ye)}return M}function vo(C,F){for(var M=-1,H=Array(C);++M<C;)H[M]=F(M);return H}function Uh(C,F){return Ae(F,function(M){return[M,C[M]]})}function Vs(C){return C&&C.slice(0,Js(C)+1).replace(ao,"")}function It(C){return function(F){return C(F)}}function _o(C,F){return Ae(F,function(M){return C[M]})}function Ir(C,F){return C.has(F)}function Xs(C,F){for(var M=-1,H=C.length;++M<H&&ar(F,C[M],0)>-1;);return M}function js(C,F){for(var M=C.length;M--&&ar(F,C[M],0)>-1;);return M}function Gh(C,F){for(var M=C.length,H=0;M--;)C[M]===F&&++H;return H}var Qh=bo(Ah),Vh=bo(Mh);function Xh(C){return"\\"+Oh[C]}function jh(C,F){return C==null?n:C[F]}function sr(C){return Ch.test(C)}function Kh(C){return Th.test(C)}function Jh(C){for(var F,M=[];!(F=C.next()).done;)M.push(F.value);return M}function ko(C){var F=-1,M=Array(C.size);return C.forEach(function(H,ne){M[++F]=[ne,H]}),M}function Ks(C,F){return function(M){return C(F(M))}}function En(C,F){for(var M=-1,H=C.length,ne=0,ye=[];++M<H;){var Ge=C[M];(Ge===F||Ge===p)&&(C[M]=p,ye[ne++]=M)}return ye}function ii(C){var F=-1,M=Array(C.size);return C.forEach(function(H){M[++F]=H}),M}function Zh(C){var F=-1,M=Array(C.size);return C.forEach(function(H){M[++F]=[H,H]}),M}function ed(C,F,M){for(var H=M-1,ne=C.length;++H<ne;)if(C[H]===F)return H;return-1}function td(C,F,M){for(var H=M+1;H--;)if(C[H]===F)return H;return H}function ur(C){return sr(C)?rd(C):Wh(C)}function Ht(C){return sr(C)?id(C):zh(C)}function Js(C){for(var F=C.length;F--&&Gf.test(C.charAt(F)););return F}var nd=bo(Dh);function rd(C){for(var F=fo.lastIndex=0;fo.test(C);)++F;return F}function id(C){return C.match(fo)||[]}function od(C){return C.match(Sh)||[]}var ad=(function C(F){F=F==null?Ke:lr.defaults(Ke.Object(),F,lr.pick(Ke,Eh));var M=F.Array,H=F.Date,ne=F.Error,ye=F.Function,Ge=F.Math,Se=F.Object,Io=F.RegExp,sd=F.String,Ot=F.TypeError,oi=M.prototype,ud=ye.prototype,cr=Se.prototype,ai=F["__core-js_shared__"],si=ud.toString,_e=cr.hasOwnProperty,ld=0,Zs=(function(){var t=/[^.]+$/.exec(ai&&ai.keys&&ai.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})(),ui=cr.toString,cd=si.call(Se),fd=Ke._,hd=Io("^"+si.call(_e).replace(oo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),li=Ls?F.Buffer:n,Pn=F.Symbol,ci=F.Uint8Array,eu=li?li.allocUnsafe:n,fi=Ks(Se.getPrototypeOf,Se),tu=Se.create,nu=cr.propertyIsEnumerable,hi=oi.splice,ru=Pn?Pn.isConcatSpreadable:n,Sr=Pn?Pn.iterator:n,Un=Pn?Pn.toStringTag:n,di=(function(){try{var t=jn(Se,"defineProperty");return t({},"",{}),t}catch{}})(),dd=F.clearTimeout!==Ke.clearTimeout&&F.clearTimeout,pd=H&&H.now!==Ke.Date.now&&H.now,gd=F.setTimeout!==Ke.setTimeout&&F.setTimeout,pi=Ge.ceil,gi=Ge.floor,So=Se.getOwnPropertySymbols,md=li?li.isBuffer:n,iu=F.isFinite,yd=oi.join,wd=Ks(Se.keys,Se),Qe=Ge.max,et=Ge.min,bd=H.now,xd=F.parseInt,ou=Ge.random,vd=oi.reverse,Co=jn(F,"DataView"),Cr=jn(F,"Map"),To=jn(F,"Promise"),fr=jn(F,"Set"),Tr=jn(F,"WeakMap"),Er=jn(Se,"create"),mi=Tr&&new Tr,hr={},_d=Kn(Co),kd=Kn(Cr),Id=Kn(To),Sd=Kn(fr),Cd=Kn(Tr),yi=Pn?Pn.prototype:n,Pr=yi?yi.valueOf:n,au=yi?yi.toString:n;function b(t){if($e(t)&&!re(t)&&!(t instanceof ce)){if(t instanceof Ft)return t;if(_e.call(t,"__wrapped__"))return sl(t)}return new Ft(t)}var dr=(function(){function t(){}return function(i){if(!De(i))return{};if(tu)return tu(i);t.prototype=i;var s=new t;return t.prototype=n,s}})();function wi(){}function Ft(t,i){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=n}b.templateSettings={escape:Wf,evaluate:zf,interpolate:gs,variable:"",imports:{_:b}},b.prototype=wi.prototype,b.prototype.constructor=b,Ft.prototype=dr(wi.prototype),Ft.prototype.constructor=Ft;function ce(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Re,this.__views__=[]}function Td(){var t=new ce(this.__wrapped__);return t.__actions__=ct(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ct(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ct(this.__views__),t}function Ed(){if(this.__filtered__){var t=new ce(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Pd(){var t=this.__wrapped__.value(),i=this.__dir__,s=re(t),d=i<0,m=s?t.length:0,x=zp(0,m,this.__views__),v=x.start,k=x.end,T=k-v,L=d?k:v-1,$=this.__iteratees__,B=$.length,Y=0,G=et(T,this.__takeCount__);if(!s||!d&&m==T&&G==T)return Au(t,this.__actions__);var J=[];e:for(;T--&&Y<G;){L+=i;for(var oe=-1,Z=t[L];++oe<B;){var le=$[oe],he=le.iteratee,Tt=le.type,at=he(Z);if(Tt==fe)Z=at;else if(!at){if(Tt==Me)continue e;break e}}J[Y++]=Z}return J}ce.prototype=dr(wi.prototype),ce.prototype.constructor=ce;function Gn(t){var i=-1,s=t==null?0:t.length;for(this.clear();++i<s;){var d=t[i];this.set(d[0],d[1])}}function Ad(){this.__data__=Er?Er(null):{},this.size=0}function Md(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i}function Dd(t){var i=this.__data__;if(Er){var s=i[t];return s===f?n:s}return _e.call(i,t)?i[t]:n}function Od(t){var i=this.__data__;return Er?i[t]!==n:_e.call(i,t)}function Fd(t,i){var s=this.__data__;return this.size+=this.has(t)?0:1,s[t]=Er&&i===n?f:i,this}Gn.prototype.clear=Ad,Gn.prototype.delete=Md,Gn.prototype.get=Dd,Gn.prototype.has=Od,Gn.prototype.set=Fd;function dn(t){var i=-1,s=t==null?0:t.length;for(this.clear();++i<s;){var d=t[i];this.set(d[0],d[1])}}function Rd(){this.__data__=[],this.size=0}function Ld(t){var i=this.__data__,s=bi(i,t);if(s<0)return!1;var d=i.length-1;return s==d?i.pop():hi.call(i,s,1),--this.size,!0}function $d(t){var i=this.__data__,s=bi(i,t);return s<0?n:i[s][1]}function Bd(t){return bi(this.__data__,t)>-1}function Nd(t,i){var s=this.__data__,d=bi(s,t);return d<0?(++this.size,s.push([t,i])):s[d][1]=i,this}dn.prototype.clear=Rd,dn.prototype.delete=Ld,dn.prototype.get=$d,dn.prototype.has=Bd,dn.prototype.set=Nd;function pn(t){var i=-1,s=t==null?0:t.length;for(this.clear();++i<s;){var d=t[i];this.set(d[0],d[1])}}function Wd(){this.size=0,this.__data__={hash:new Gn,map:new(Cr||dn),string:new Gn}}function zd(t){var i=Mi(this,t).delete(t);return this.size-=i?1:0,i}function qd(t){return Mi(this,t).get(t)}function Yd(t){return Mi(this,t).has(t)}function Hd(t,i){var s=Mi(this,t),d=s.size;return s.set(t,i),this.size+=s.size==d?0:1,this}pn.prototype.clear=Wd,pn.prototype.delete=zd,pn.prototype.get=qd,pn.prototype.has=Yd,pn.prototype.set=Hd;function Qn(t){var i=-1,s=t==null?0:t.length;for(this.__data__=new pn;++i<s;)this.add(t[i])}function Ud(t){return this.__data__.set(t,f),this}function Gd(t){return this.__data__.has(t)}Qn.prototype.add=Qn.prototype.push=Ud,Qn.prototype.has=Gd;function Ut(t){var i=this.__data__=new dn(t);this.size=i.size}function Qd(){this.__data__=new dn,this.size=0}function Vd(t){var i=this.__data__,s=i.delete(t);return this.size=i.size,s}function Xd(t){return this.__data__.get(t)}function jd(t){return this.__data__.has(t)}function Kd(t,i){var s=this.__data__;if(s instanceof dn){var d=s.__data__;if(!Cr||d.length<a-1)return d.push([t,i]),this.size=++s.size,this;s=this.__data__=new pn(d)}return s.set(t,i),this.size=s.size,this}Ut.prototype.clear=Qd,Ut.prototype.delete=Vd,Ut.prototype.get=Xd,Ut.prototype.has=jd,Ut.prototype.set=Kd;function su(t,i){var s=re(t),d=!s&&Jn(t),m=!s&&!d&&Fn(t),x=!s&&!d&&!m&&yr(t),v=s||d||m||x,k=v?vo(t.length,sd):[],T=k.length;for(var L in t)(i||_e.call(t,L))&&!(v&&(L=="length"||m&&(L=="offset"||L=="parent")||x&&(L=="buffer"||L=="byteLength"||L=="byteOffset")||wn(L,T)))&&k.push(L);return k}function uu(t){var i=t.length;return i?t[Bo(0,i-1)]:n}function Jd(t,i){return Di(ct(t),Vn(i,0,t.length))}function Zd(t){return Di(ct(t))}function Eo(t,i,s){(s!==n&&!Gt(t[i],s)||s===n&&!(i in t))&&gn(t,i,s)}function Ar(t,i,s){var d=t[i];(!(_e.call(t,i)&&Gt(d,s))||s===n&&!(i in t))&&gn(t,i,s)}function bi(t,i){for(var s=t.length;s--;)if(Gt(t[s][0],i))return s;return-1}function ep(t,i,s,d){return An(t,function(m,x,v){i(d,m,s(m),v)}),d}function lu(t,i){return t&&Zt(i,Xe(i),t)}function tp(t,i){return t&&Zt(i,ht(i),t)}function gn(t,i,s){i=="__proto__"&&di?di(t,i,{configurable:!0,enumerable:!0,value:s,writable:!0}):t[i]=s}function Po(t,i){for(var s=-1,d=i.length,m=M(d),x=t==null;++s<d;)m[s]=x?n:la(t,i[s]);return m}function Vn(t,i,s){return t===t&&(s!==n&&(t=t<=s?t:s),i!==n&&(t=t>=i?t:i)),t}function Rt(t,i,s,d,m,x){var v,k=i&g,T=i&w,L=i&y;if(s&&(v=m?s(t,d,m,x):s(t)),v!==n)return v;if(!De(t))return t;var $=re(t);if($){if(v=Yp(t),!k)return ct(t,v)}else{var B=tt(t),Y=B==rr||B==Xr;if(Fn(t))return Ou(t,k);if(B==At||B==ut||Y&&!m){if(v=T||Y?{}:Ju(t),!k)return T?Dp(t,tp(v,t)):Mp(t,lu(v,t))}else{if(!Ce[B])return m?t:{};v=Hp(t,B,k)}}x||(x=new Ut);var G=x.get(t);if(G)return G;x.set(t,v),Tl(t)?t.forEach(function(Z){v.add(Rt(Z,i,s,Z,t,x))}):Sl(t)&&t.forEach(function(Z,le){v.set(le,Rt(Z,i,s,le,t,x))});var J=L?T?Xo:Vo:T?ht:Xe,oe=$?n:J(t);return Dt(oe||t,function(Z,le){oe&&(le=Z,Z=t[le]),Ar(v,le,Rt(Z,i,s,le,t,x))}),v}function np(t){var i=Xe(t);return function(s){return cu(s,t,i)}}function cu(t,i,s){var d=s.length;if(t==null)return!d;for(t=Se(t);d--;){var m=s[d],x=i[m],v=t[m];if(v===n&&!(m in t)||!x(v))return!1}return!0}function fu(t,i,s){if(typeof t!="function")throw new Ot(l);return $r(function(){t.apply(n,s)},i)}function Mr(t,i,s,d){var m=-1,x=ni,v=!0,k=t.length,T=[],L=i.length;if(!k)return T;s&&(i=Ae(i,It(s))),d?(x=go,v=!1):i.length>=a&&(x=Ir,v=!1,i=new Qn(i));e:for(;++m<k;){var $=t[m],B=s==null?$:s($);if($=d||$!==0?$:0,v&&B===B){for(var Y=L;Y--;)if(i[Y]===B)continue e;T.push($)}else x(i,B,d)||T.push($)}return T}var An=Bu(Jt),hu=Bu(Mo,!0);function rp(t,i){var s=!0;return An(t,function(d,m,x){return s=!!i(d,m,x),s}),s}function xi(t,i,s){for(var d=-1,m=t.length;++d<m;){var x=t[d],v=i(x);if(v!=null&&(k===n?v===v&&!Ct(v):s(v,k)))var k=v,T=x}return T}function ip(t,i,s,d){var m=t.length;for(s=ie(s),s<0&&(s=-s>m?0:m+s),d=d===n||d>m?m:ie(d),d<0&&(d+=m),d=s>d?0:Pl(d);s<d;)t[s++]=i;return t}function du(t,i){var s=[];return An(t,function(d,m,x){i(d,m,x)&&s.push(d)}),s}function Je(t,i,s,d,m){var x=-1,v=t.length;for(s||(s=Gp),m||(m=[]);++x<v;){var k=t[x];i>0&&s(k)?i>1?Je(k,i-1,s,d,m):Tn(m,k):d||(m[m.length]=k)}return m}var Ao=Nu(),pu=Nu(!0);function Jt(t,i){return t&&Ao(t,i,Xe)}function Mo(t,i){return t&&pu(t,i,Xe)}function vi(t,i){return Cn(i,function(s){return bn(t[s])})}function Xn(t,i){i=Dn(i,t);for(var s=0,d=i.length;t!=null&&s<d;)t=t[en(i[s++])];return s&&s==d?t:n}function gu(t,i,s){var d=i(t);return re(t)?d:Tn(d,s(t))}function it(t){return t==null?t===n?io:jr:Un&&Un in Se(t)?Wp(t):Zp(t)}function Do(t,i){return t>i}function op(t,i){return t!=null&&_e.call(t,i)}function ap(t,i){return t!=null&&i in Se(t)}function sp(t,i,s){return t>=et(i,s)&&t<Qe(i,s)}function Oo(t,i,s){for(var d=s?go:ni,m=t[0].length,x=t.length,v=x,k=M(x),T=1/0,L=[];v--;){var $=t[v];v&&i&&($=Ae($,It(i))),T=et($.length,T),k[v]=!s&&(i||m>=120&&$.length>=120)?new Qn(v&&$):n}$=t[0];var B=-1,Y=k[0];e:for(;++B<m&&L.length<T;){var G=$[B],J=i?i(G):G;if(G=s||G!==0?G:0,!(Y?Ir(Y,J):d(L,J,s))){for(v=x;--v;){var oe=k[v];if(!(oe?Ir(oe,J):d(t[v],J,s)))continue e}Y&&Y.push(J),L.push(G)}}return L}function up(t,i,s,d){return Jt(t,function(m,x,v){i(d,s(m),x,v)}),d}function Dr(t,i,s){i=Dn(i,t),t=nl(t,i);var d=t==null?t:t[en($t(i))];return d==null?n:kt(d,t,s)}function mu(t){return $e(t)&&it(t)==ut}function lp(t){return $e(t)&&it(t)==q}function cp(t){return $e(t)&&it(t)==Pt}function Or(t,i,s,d,m){return t===i?!0:t==null||i==null||!$e(t)&&!$e(i)?t!==t&&i!==i:fp(t,i,s,d,Or,m)}function fp(t,i,s,d,m,x){var v=re(t),k=re(i),T=v?Le:tt(t),L=k?Le:tt(i);T=T==ut?At:T,L=L==ut?At:L;var $=T==At,B=L==At,Y=T==L;if(Y&&Fn(t)){if(!Fn(i))return!1;v=!0,$=!1}if(Y&&!$)return x||(x=new Ut),v||yr(t)?Xu(t,i,s,d,m,x):Bp(t,i,T,s,d,m,x);if(!(s&S)){var G=$&&_e.call(t,"__wrapped__"),J=B&&_e.call(i,"__wrapped__");if(G||J){var oe=G?t.value():t,Z=J?i.value():i;return x||(x=new Ut),m(oe,Z,s,d,x)}}return Y?(x||(x=new Ut),Np(t,i,s,d,m,x)):!1}function hp(t){return $e(t)&&tt(t)==xt}function Fo(t,i,s,d){var m=s.length,x=m,v=!d;if(t==null)return!x;for(t=Se(t);m--;){var k=s[m];if(v&&k[2]?k[1]!==t[k[0]]:!(k[0]in t))return!1}for(;++m<x;){k=s[m];var T=k[0],L=t[T],$=k[1];if(v&&k[2]){if(L===n&&!(T in t))return!1}else{var B=new Ut;if(d)var Y=d(L,$,T,t,i,B);if(!(Y===n?Or($,L,S|E,d,B):Y))return!1}}return!0}function yu(t){if(!De(t)||Vp(t))return!1;var i=bn(t)?hd:nh;return i.test(Kn(t))}function dp(t){return $e(t)&&it(t)==Sn}function pp(t){return $e(t)&&tt(t)==vt}function gp(t){return $e(t)&&Bi(t.length)&&!!Pe[it(t)]}function wu(t){return typeof t=="function"?t:t==null?dt:typeof t=="object"?re(t)?vu(t[0],t[1]):xu(t):Wl(t)}function Ro(t){if(!Lr(t))return wd(t);var i=[];for(var s in Se(t))_e.call(t,s)&&s!="constructor"&&i.push(s);return i}function mp(t){if(!De(t))return Jp(t);var i=Lr(t),s=[];for(var d in t)d=="constructor"&&(i||!_e.call(t,d))||s.push(d);return s}function Lo(t,i){return t<i}function bu(t,i){var s=-1,d=ft(t)?M(t.length):[];return An(t,function(m,x,v){d[++s]=i(m,x,v)}),d}function xu(t){var i=Ko(t);return i.length==1&&i[0][2]?el(i[0][0],i[0][1]):function(s){return s===t||Fo(s,t,i)}}function vu(t,i){return Zo(t)&&Zu(i)?el(en(t),i):function(s){var d=la(s,t);return d===n&&d===i?ca(s,t):Or(i,d,S|E)}}function _i(t,i,s,d,m){t!==i&&Ao(i,function(x,v){if(m||(m=new Ut),De(x))yp(t,i,v,s,_i,d,m);else{var k=d?d(ta(t,v),x,v+"",t,i,m):n;k===n&&(k=x),Eo(t,v,k)}},ht)}function yp(t,i,s,d,m,x,v){var k=ta(t,s),T=ta(i,s),L=v.get(T);if(L){Eo(t,s,L);return}var $=x?x(k,T,s+"",t,i,v):n,B=$===n;if(B){var Y=re(T),G=!Y&&Fn(T),J=!Y&&!G&&yr(T);$=T,Y||G||J?re(k)?$=k:Ne(k)?$=ct(k):G?(B=!1,$=Ou(T,!0)):J?(B=!1,$=Fu(T,!0)):$=[]:Br(T)||Jn(T)?($=k,Jn(k)?$=Al(k):(!De(k)||bn(k))&&($=Ju(T))):B=!1}B&&(v.set(T,$),m($,T,d,x,v),v.delete(T)),Eo(t,s,$)}function _u(t,i){var s=t.length;if(s)return i+=i<0?s:0,wn(i,s)?t[i]:n}function ku(t,i,s){i.length?i=Ae(i,function(x){return re(x)?function(v){return Xn(v,x.length===1?x[0]:x)}:x}):i=[dt];var d=-1;i=Ae(i,It(j()));var m=bu(t,function(x,v,k){var T=Ae(i,function(L){return L(x)});return{criteria:T,index:++d,value:x}});return Hh(m,function(x,v){return Ap(x,v,s)})}function wp(t,i){return Iu(t,i,function(s,d){return ca(t,d)})}function Iu(t,i,s){for(var d=-1,m=i.length,x={};++d<m;){var v=i[d],k=Xn(t,v);s(k,v)&&Fr(x,Dn(v,t),k)}return x}function bp(t){return function(i){return Xn(i,t)}}function $o(t,i,s,d){var m=d?Yh:ar,x=-1,v=i.length,k=t;for(t===i&&(i=ct(i)),s&&(k=Ae(t,It(s)));++x<v;)for(var T=0,L=i[x],$=s?s(L):L;(T=m(k,$,T,d))>-1;)k!==t&&hi.call(k,T,1),hi.call(t,T,1);return t}function Su(t,i){for(var s=t?i.length:0,d=s-1;s--;){var m=i[s];if(s==d||m!==x){var x=m;wn(m)?hi.call(t,m,1):zo(t,m)}}return t}function Bo(t,i){return t+gi(ou()*(i-t+1))}function xp(t,i,s,d){for(var m=-1,x=Qe(pi((i-t)/(s||1)),0),v=M(x);x--;)v[d?x:++m]=t,t+=s;return v}function No(t,i){var s="";if(!t||i<1||i>Ye)return s;do i%2&&(s+=t),i=gi(i/2),i&&(t+=t);while(i);return s}function se(t,i){return na(tl(t,i,dt),t+"")}function vp(t){return uu(wr(t))}function _p(t,i){var s=wr(t);return Di(s,Vn(i,0,s.length))}function Fr(t,i,s,d){if(!De(t))return t;i=Dn(i,t);for(var m=-1,x=i.length,v=x-1,k=t;k!=null&&++m<x;){var T=en(i[m]),L=s;if(T==="__proto__"||T==="constructor"||T==="prototype")return t;if(m!=v){var $=k[T];L=d?d($,T,k):n,L===n&&(L=De($)?$:wn(i[m+1])?[]:{})}Ar(k,T,L),k=k[T]}return t}var Cu=mi?function(t,i){return mi.set(t,i),t}:dt,kp=di?function(t,i){return di(t,"toString",{configurable:!0,enumerable:!1,value:ha(i),writable:!0})}:dt;function Ip(t){return Di(wr(t))}function Lt(t,i,s){var d=-1,m=t.length;i<0&&(i=-i>m?0:m+i),s=s>m?m:s,s<0&&(s+=m),m=i>s?0:s-i>>>0,i>>>=0;for(var x=M(m);++d<m;)x[d]=t[d+i];return x}function Sp(t,i){var s;return An(t,function(d,m,x){return s=i(d,m,x),!s}),!!s}function ki(t,i,s){var d=0,m=t==null?d:t.length;if(typeof i=="number"&&i===i&&m<=I){for(;d<m;){var x=d+m>>>1,v=t[x];v!==null&&!Ct(v)&&(s?v<=i:v<i)?d=x+1:m=x}return m}return Wo(t,i,dt,s)}function Wo(t,i,s,d){var m=0,x=t==null?0:t.length;if(x===0)return 0;i=s(i);for(var v=i!==i,k=i===null,T=Ct(i),L=i===n;m<x;){var $=gi((m+x)/2),B=s(t[$]),Y=B!==n,G=B===null,J=B===B,oe=Ct(B);if(v)var Z=d||J;else L?Z=J&&(d||Y):k?Z=J&&Y&&(d||!G):T?Z=J&&Y&&!G&&(d||!oe):G||oe?Z=!1:Z=d?B<=i:B<i;Z?m=$+1:x=$}return et(x,zt)}function Tu(t,i){for(var s=-1,d=t.length,m=0,x=[];++s<d;){var v=t[s],k=i?i(v):v;if(!s||!Gt(k,T)){var T=k;x[m++]=v===0?0:v}}return x}function Eu(t){return typeof t=="number"?t:Ct(t)?_:+t}function St(t){if(typeof t=="string")return t;if(re(t))return Ae(t,St)+"";if(Ct(t))return au?au.call(t):"";var i=t+"";return i=="0"&&1/t==-Ee?"-0":i}function Mn(t,i,s){var d=-1,m=ni,x=t.length,v=!0,k=[],T=k;if(s)v=!1,m=go;else if(x>=a){var L=i?null:Lp(t);if(L)return ii(L);v=!1,m=Ir,T=new Qn}else T=i?[]:k;e:for(;++d<x;){var $=t[d],B=i?i($):$;if($=s||$!==0?$:0,v&&B===B){for(var Y=T.length;Y--;)if(T[Y]===B)continue e;i&&T.push(B),k.push($)}else m(T,B,s)||(T!==k&&T.push(B),k.push($))}return k}function zo(t,i){return i=Dn(i,t),t=nl(t,i),t==null||delete t[en($t(i))]}function Pu(t,i,s,d){return Fr(t,i,s(Xn(t,i)),d)}function Ii(t,i,s,d){for(var m=t.length,x=d?m:-1;(d?x--:++x<m)&&i(t[x],x,t););return s?Lt(t,d?0:x,d?x+1:m):Lt(t,d?x+1:0,d?m:x)}function Au(t,i){var s=t;return s instanceof ce&&(s=s.value()),mo(i,function(d,m){return m.func.apply(m.thisArg,Tn([d],m.args))},s)}function qo(t,i,s){var d=t.length;if(d<2)return d?Mn(t[0]):[];for(var m=-1,x=M(d);++m<d;)for(var v=t[m],k=-1;++k<d;)k!=m&&(x[m]=Mr(x[m]||v,t[k],i,s));return Mn(Je(x,1),i,s)}function Mu(t,i,s){for(var d=-1,m=t.length,x=i.length,v={};++d<m;){var k=d<x?i[d]:n;s(v,t[d],k)}return v}function Yo(t){return Ne(t)?t:[]}function Ho(t){return typeof t=="function"?t:dt}function Dn(t,i){return re(t)?t:Zo(t,i)?[t]:al(ve(t))}var Cp=se;function On(t,i,s){var d=t.length;return s=s===n?d:s,!i&&s>=d?t:Lt(t,i,s)}var Du=dd||function(t){return Ke.clearTimeout(t)};function Ou(t,i){if(i)return t.slice();var s=t.length,d=eu?eu(s):new t.constructor(s);return t.copy(d),d}function Uo(t){var i=new t.constructor(t.byteLength);return new ci(i).set(new ci(t)),i}function Tp(t,i){var s=i?Uo(t.buffer):t.buffer;return new t.constructor(s,t.byteOffset,t.byteLength)}function Ep(t){var i=new t.constructor(t.source,ms.exec(t));return i.lastIndex=t.lastIndex,i}function Pp(t){return Pr?Se(Pr.call(t)):{}}function Fu(t,i){var s=i?Uo(t.buffer):t.buffer;return new t.constructor(s,t.byteOffset,t.length)}function Ru(t,i){if(t!==i){var s=t!==n,d=t===null,m=t===t,x=Ct(t),v=i!==n,k=i===null,T=i===i,L=Ct(i);if(!k&&!L&&!x&&t>i||x&&v&&T&&!k&&!L||d&&v&&T||!s&&T||!m)return 1;if(!d&&!x&&!L&&t<i||L&&s&&m&&!d&&!x||k&&s&&m||!v&&m||!T)return-1}return 0}function Ap(t,i,s){for(var d=-1,m=t.criteria,x=i.criteria,v=m.length,k=s.length;++d<v;){var T=Ru(m[d],x[d]);if(T){if(d>=k)return T;var L=s[d];return T*(L=="desc"?-1:1)}}return t.index-i.index}function Lu(t,i,s,d){for(var m=-1,x=t.length,v=s.length,k=-1,T=i.length,L=Qe(x-v,0),$=M(T+L),B=!d;++k<T;)$[k]=i[k];for(;++m<v;)(B||m<x)&&($[s[m]]=t[m]);for(;L--;)$[k++]=t[m++];return $}function $u(t,i,s,d){for(var m=-1,x=t.length,v=-1,k=s.length,T=-1,L=i.length,$=Qe(x-k,0),B=M($+L),Y=!d;++m<$;)B[m]=t[m];for(var G=m;++T<L;)B[G+T]=i[T];for(;++v<k;)(Y||m<x)&&(B[G+s[v]]=t[m++]);return B}function ct(t,i){var s=-1,d=t.length;for(i||(i=M(d));++s<d;)i[s]=t[s];return i}function Zt(t,i,s,d){var m=!s;s||(s={});for(var x=-1,v=i.length;++x<v;){var k=i[x],T=d?d(s[k],t[k],k,s,t):n;T===n&&(T=t[k]),m?gn(s,k,T):Ar(s,k,T)}return s}function Mp(t,i){return Zt(t,Jo(t),i)}function Dp(t,i){return Zt(t,ju(t),i)}function Si(t,i){return function(s,d){var m=re(s)?$h:ep,x=i?i():{};return m(s,t,j(d,2),x)}}function pr(t){return se(function(i,s){var d=-1,m=s.length,x=m>1?s[m-1]:n,v=m>2?s[2]:n;for(x=t.length>3&&typeof x=="function"?(m--,x):n,v&&ot(s[0],s[1],v)&&(x=m<3?n:x,m=1),i=Se(i);++d<m;){var k=s[d];k&&t(i,k,d,x)}return i})}function Bu(t,i){return function(s,d){if(s==null)return s;if(!ft(s))return t(s,d);for(var m=s.length,x=i?m:-1,v=Se(s);(i?x--:++x<m)&&d(v[x],x,v)!==!1;);return s}}function Nu(t){return function(i,s,d){for(var m=-1,x=Se(i),v=d(i),k=v.length;k--;){var T=v[t?k:++m];if(s(x[T],T,x)===!1)break}return i}}function Op(t,i,s){var d=i&D,m=Rr(t);function x(){var v=this&&this!==Ke&&this instanceof x?m:t;return v.apply(d?s:this,arguments)}return x}function Wu(t){return function(i){i=ve(i);var s=sr(i)?Ht(i):n,d=s?s[0]:i.charAt(0),m=s?On(s,1).join(""):i.slice(1);return d[t]()+m}}function gr(t){return function(i){return mo(Bl($l(i).replace(kh,"")),t,"")}}function Rr(t){return function(){var i=arguments;switch(i.length){case 0:return new t;case 1:return new t(i[0]);case 2:return new t(i[0],i[1]);case 3:return new t(i[0],i[1],i[2]);case 4:return new t(i[0],i[1],i[2],i[3]);case 5:return new t(i[0],i[1],i[2],i[3],i[4]);case 6:return new t(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new t(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var s=dr(t.prototype),d=t.apply(s,i);return De(d)?d:s}}function Fp(t,i,s){var d=Rr(t);function m(){for(var x=arguments.length,v=M(x),k=x,T=mr(m);k--;)v[k]=arguments[k];var L=x<3&&v[0]!==T&&v[x-1]!==T?[]:En(v,T);if(x-=L.length,x<s)return Uu(t,i,Ci,m.placeholder,n,v,L,n,n,s-x);var $=this&&this!==Ke&&this instanceof m?d:t;return kt($,this,v)}return m}function zu(t){return function(i,s,d){var m=Se(i);if(!ft(i)){var x=j(s,3);i=Xe(i),s=function(k){return x(m[k],k,m)}}var v=t(i,s,d);return v>-1?m[x?i[v]:v]:n}}function qu(t){return yn(function(i){var s=i.length,d=s,m=Ft.prototype.thru;for(t&&i.reverse();d--;){var x=i[d];if(typeof x!="function")throw new Ot(l);if(m&&!v&&Ai(x)=="wrapper")var v=new Ft([],!0)}for(d=v?d:s;++d<s;){x=i[d];var k=Ai(x),T=k=="wrapper"?jo(x):n;T&&ea(T[0])&&T[1]==(U|z|O|V)&&!T[4].length&&T[9]==1?v=v[Ai(T[0])].apply(v,T[3]):v=x.length==1&&ea(x)?v[k]():v.thru(x)}return function(){var L=arguments,$=L[0];if(v&&L.length==1&&re($))return v.plant($).value();for(var B=0,Y=s?i[B].apply(this,L):$;++B<s;)Y=i[B].call(this,Y);return Y}})}function Ci(t,i,s,d,m,x,v,k,T,L){var $=i&U,B=i&D,Y=i&A,G=i&(z|W),J=i&ee,oe=Y?n:Rr(t);function Z(){for(var le=arguments.length,he=M(le),Tt=le;Tt--;)he[Tt]=arguments[Tt];if(G)var at=mr(Z),Et=Gh(he,at);if(d&&(he=Lu(he,d,m,G)),x&&(he=$u(he,x,v,G)),le-=Et,G&&le<L){var We=En(he,at);return Uu(t,i,Ci,Z.placeholder,s,he,We,k,T,L-le)}var Qt=B?s:this,vn=Y?Qt[t]:t;return le=he.length,k?he=eg(he,k):J&&le>1&&he.reverse(),$&&T<le&&(he.length=T),this&&this!==Ke&&this instanceof Z&&(vn=oe||Rr(vn)),vn.apply(Qt,he)}return Z}function Yu(t,i){return function(s,d){return up(s,t,i(d),{})}}function Ti(t,i){return function(s,d){var m;if(s===n&&d===n)return i;if(s!==n&&(m=s),d!==n){if(m===n)return d;typeof s=="string"||typeof d=="string"?(s=St(s),d=St(d)):(s=Eu(s),d=Eu(d)),m=t(s,d)}return m}}function Go(t){return yn(function(i){return i=Ae(i,It(j())),se(function(s){var d=this;return t(i,function(m){return kt(m,d,s)})})})}function Ei(t,i){i=i===n?" ":St(i);var s=i.length;if(s<2)return s?No(i,t):i;var d=No(i,pi(t/ur(i)));return sr(i)?On(Ht(d),0,t).join(""):d.slice(0,t)}function Rp(t,i,s,d){var m=i&D,x=Rr(t);function v(){for(var k=-1,T=arguments.length,L=-1,$=d.length,B=M($+T),Y=this&&this!==Ke&&this instanceof v?x:t;++L<$;)B[L]=d[L];for(;T--;)B[L++]=arguments[++k];return kt(Y,m?s:this,B)}return v}function Hu(t){return function(i,s,d){return d&&typeof d!="number"&&ot(i,s,d)&&(s=d=n),i=xn(i),s===n?(s=i,i=0):s=xn(s),d=d===n?i<s?1:-1:xn(d),xp(i,s,d,t)}}function Pi(t){return function(i,s){return typeof i=="string"&&typeof s=="string"||(i=Bt(i),s=Bt(s)),t(i,s)}}function Uu(t,i,s,d,m,x,v,k,T,L){var $=i&z,B=$?v:n,Y=$?n:v,G=$?x:n,J=$?n:x;i|=$?O:P,i&=~($?P:O),i&N||(i&=-4);var oe=[t,i,m,G,B,J,Y,k,T,L],Z=s.apply(n,oe);return ea(t)&&rl(Z,oe),Z.placeholder=d,il(Z,t,i)}function Qo(t){var i=Ge[t];return function(s,d){if(s=Bt(s),d=d==null?0:et(ie(d),292),d&&iu(s)){var m=(ve(s)+"e").split("e"),x=i(m[0]+"e"+(+m[1]+d));return m=(ve(x)+"e").split("e"),+(m[0]+"e"+(+m[1]-d))}return i(s)}}var Lp=fr&&1/ii(new fr([,-0]))[1]==Ee?function(t){return new fr(t)}:ga;function Gu(t){return function(i){var s=tt(i);return s==xt?ko(i):s==vt?Zh(i):Uh(i,t(i))}}function mn(t,i,s,d,m,x,v,k){var T=i&A;if(!T&&typeof t!="function")throw new Ot(l);var L=d?d.length:0;if(L||(i&=-97,d=m=n),v=v===n?v:Qe(ie(v),0),k=k===n?k:ie(k),L-=m?m.length:0,i&P){var $=d,B=m;d=m=n}var Y=T?n:jo(t),G=[t,i,s,d,m,$,B,x,v,k];if(Y&&Kp(G,Y),t=G[0],i=G[1],s=G[2],d=G[3],m=G[4],k=G[9]=G[9]===n?T?0:t.length:Qe(G[9]-L,0),!k&&i&(z|W)&&(i&=-25),!i||i==D)var J=Op(t,i,s);else i==z||i==W?J=Fp(t,i,k):(i==O||i==(D|O))&&!m.length?J=Rp(t,i,s,d):J=Ci.apply(n,G);var oe=Y?Cu:rl;return il(oe(J,G),t,i)}function Qu(t,i,s,d){return t===n||Gt(t,cr[s])&&!_e.call(d,s)?i:t}function Vu(t,i,s,d,m,x){return De(t)&&De(i)&&(x.set(i,t),_i(t,i,n,Vu,x),x.delete(i)),t}function $p(t){return Br(t)?n:t}function Xu(t,i,s,d,m,x){var v=s&S,k=t.length,T=i.length;if(k!=T&&!(v&&T>k))return!1;var L=x.get(t),$=x.get(i);if(L&&$)return L==i&&$==t;var B=-1,Y=!0,G=s&E?new Qn:n;for(x.set(t,i),x.set(i,t);++B<k;){var J=t[B],oe=i[B];if(d)var Z=v?d(oe,J,B,i,t,x):d(J,oe,B,t,i,x);if(Z!==n){if(Z)continue;Y=!1;break}if(G){if(!yo(i,function(le,he){if(!Ir(G,he)&&(J===le||m(J,le,s,d,x)))return G.push(he)})){Y=!1;break}}else if(!(J===oe||m(J,oe,s,d,x))){Y=!1;break}}return x.delete(t),x.delete(i),Y}function Bp(t,i,s,d,m,x,v){switch(s){case K:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case q:return!(t.byteLength!=i.byteLength||!x(new ci(t),new ci(i)));case lt:case Pt:case In:return Gt(+t,+i);case cn:return t.name==i.name&&t.message==i.message;case Sn:case qn:return t==i+"";case xt:var k=ko;case vt:var T=d&S;if(k||(k=ii),t.size!=i.size&&!T)return!1;var L=v.get(t);if(L)return L==i;d|=E,v.set(t,i);var $=Xu(k(t),k(i),d,m,x,v);return v.delete(t),$;case ir:if(Pr)return Pr.call(t)==Pr.call(i)}return!1}function Np(t,i,s,d,m,x){var v=s&S,k=Vo(t),T=k.length,L=Vo(i),$=L.length;if(T!=$&&!v)return!1;for(var B=T;B--;){var Y=k[B];if(!(v?Y in i:_e.call(i,Y)))return!1}var G=x.get(t),J=x.get(i);if(G&&J)return G==i&&J==t;var oe=!0;x.set(t,i),x.set(i,t);for(var Z=v;++B<T;){Y=k[B];var le=t[Y],he=i[Y];if(d)var Tt=v?d(he,le,Y,i,t,x):d(le,he,Y,t,i,x);if(!(Tt===n?le===he||m(le,he,s,d,x):Tt)){oe=!1;break}Z||(Z=Y=="constructor")}if(oe&&!Z){var at=t.constructor,Et=i.constructor;at!=Et&&"constructor"in t&&"constructor"in i&&!(typeof at=="function"&&at instanceof at&&typeof Et=="function"&&Et instanceof Et)&&(oe=!1)}return x.delete(t),x.delete(i),oe}function yn(t){return na(tl(t,n,cl),t+"")}function Vo(t){return gu(t,Xe,Jo)}function Xo(t){return gu(t,ht,ju)}var jo=mi?function(t){return mi.get(t)}:ga;function Ai(t){for(var i=t.name+"",s=hr[i],d=_e.call(hr,i)?s.length:0;d--;){var m=s[d],x=m.func;if(x==null||x==t)return m.name}return i}function mr(t){var i=_e.call(b,"placeholder")?b:t;return i.placeholder}function j(){var t=b.iteratee||da;return t=t===da?wu:t,arguments.length?t(arguments[0],arguments[1]):t}function Mi(t,i){var s=t.__data__;return Qp(i)?s[typeof i=="string"?"string":"hash"]:s.map}function Ko(t){for(var i=Xe(t),s=i.length;s--;){var d=i[s],m=t[d];i[s]=[d,m,Zu(m)]}return i}function jn(t,i){var s=jh(t,i);return yu(s)?s:n}function Wp(t){var i=_e.call(t,Un),s=t[Un];try{t[Un]=n;var d=!0}catch{}var m=ui.call(t);return d&&(i?t[Un]=s:delete t[Un]),m}var Jo=So?function(t){return t==null?[]:(t=Se(t),Cn(So(t),function(i){return nu.call(t,i)}))}:ma,ju=So?function(t){for(var i=[];t;)Tn(i,Jo(t)),t=fi(t);return i}:ma,tt=it;(Co&&tt(new Co(new ArrayBuffer(1)))!=K||Cr&&tt(new Cr)!=xt||To&&tt(To.resolve())!=Kr||fr&&tt(new fr)!=vt||Tr&&tt(new Tr)!=Yn)&&(tt=function(t){var i=it(t),s=i==At?t.constructor:n,d=s?Kn(s):"";if(d)switch(d){case _d:return K;case kd:return xt;case Id:return Kr;case Sd:return vt;case Cd:return Yn}return i});function zp(t,i,s){for(var d=-1,m=s.length;++d<m;){var x=s[d],v=x.size;switch(x.type){case"drop":t+=v;break;case"dropRight":i-=v;break;case"take":i=et(i,t+v);break;case"takeRight":t=Qe(t,i-v);break}}return{start:t,end:i}}function qp(t){var i=t.match(Vf);return i?i[1].split(Xf):[]}function Ku(t,i,s){i=Dn(i,t);for(var d=-1,m=i.length,x=!1;++d<m;){var v=en(i[d]);if(!(x=t!=null&&s(t,v)))break;t=t[v]}return x||++d!=m?x:(m=t==null?0:t.length,!!m&&Bi(m)&&wn(v,m)&&(re(t)||Jn(t)))}function Yp(t){var i=t.length,s=new t.constructor(i);return i&&typeof t[0]=="string"&&_e.call(t,"index")&&(s.index=t.index,s.input=t.input),s}function Ju(t){return typeof t.constructor=="function"&&!Lr(t)?dr(fi(t)):{}}function Hp(t,i,s){var d=t.constructor;switch(i){case q:return Uo(t);case lt:case Pt:return new d(+t);case K:return Tp(t,s);case ae:case me:case rt:case qt:case _t:case fn:case hn:case je:case Kt:return Fu(t,s);case xt:return new d;case In:case qn:return new d(t);case Sn:return Ep(t);case vt:return new d;case ir:return Pp(t)}}function Up(t,i){var s=i.length;if(!s)return t;var d=s-1;return i[d]=(s>1?"& ":"")+i[d],i=i.join(s>2?", ":" "),t.replace(Qf,`{
/* [wrapped with `+i+`] */
`)}function Gp(t){return re(t)||Jn(t)||!!(ru&&t&&t[ru])}function wn(t,i){var s=typeof t;return i=i??Ye,!!i&&(s=="number"||s!="symbol"&&ih.test(t))&&t>-1&&t%1==0&&t<i}function ot(t,i,s){if(!De(s))return!1;var d=typeof i;return(d=="number"?ft(s)&&wn(i,s.length):d=="string"&&i in s)?Gt(s[i],t):!1}function Zo(t,i){if(re(t))return!1;var s=typeof t;return s=="number"||s=="symbol"||s=="boolean"||t==null||Ct(t)?!0:Yf.test(t)||!qf.test(t)||i!=null&&t in Se(i)}function Qp(t){var i=typeof t;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?t!=="__proto__":t===null}function ea(t){var i=Ai(t),s=b[i];if(typeof s!="function"||!(i in ce.prototype))return!1;if(t===s)return!0;var d=jo(s);return!!d&&t===d[0]}function Vp(t){return!!Zs&&Zs in t}var Xp=ai?bn:ya;function Lr(t){var i=t&&t.constructor,s=typeof i=="function"&&i.prototype||cr;return t===s}function Zu(t){return t===t&&!De(t)}function el(t,i){return function(s){return s==null?!1:s[t]===i&&(i!==n||t in Se(s))}}function jp(t){var i=Li(t,function(d){return s.size===h&&s.clear(),d}),s=i.cache;return i}function Kp(t,i){var s=t[1],d=i[1],m=s|d,x=m<(D|A|U),v=d==U&&s==z||d==U&&s==V&&t[7].length<=i[8]||d==(U|V)&&i[7].length<=i[8]&&s==z;if(!(x||v))return t;d&D&&(t[2]=i[2],m|=s&D?0:N);var k=i[3];if(k){var T=t[3];t[3]=T?Lu(T,k,i[4]):k,t[4]=T?En(t[3],p):i[4]}return k=i[5],k&&(T=t[5],t[5]=T?$u(T,k,i[6]):k,t[6]=T?En(t[5],p):i[6]),k=i[7],k&&(t[7]=k),d&U&&(t[8]=t[8]==null?i[8]:et(t[8],i[8])),t[9]==null&&(t[9]=i[9]),t[0]=i[0],t[1]=m,t}function Jp(t){var i=[];if(t!=null)for(var s in Se(t))i.push(s);return i}function Zp(t){return ui.call(t)}function tl(t,i,s){return i=Qe(i===n?t.length-1:i,0),function(){for(var d=arguments,m=-1,x=Qe(d.length-i,0),v=M(x);++m<x;)v[m]=d[i+m];m=-1;for(var k=M(i+1);++m<i;)k[m]=d[m];return k[i]=s(v),kt(t,this,k)}}function nl(t,i){return i.length<2?t:Xn(t,Lt(i,0,-1))}function eg(t,i){for(var s=t.length,d=et(i.length,s),m=ct(t);d--;){var x=i[d];t[d]=wn(x,s)?m[x]:n}return t}function ta(t,i){if(!(i==="constructor"&&typeof t[i]=="function")&&i!="__proto__")return t[i]}var rl=ol(Cu),$r=gd||function(t,i){return Ke.setTimeout(t,i)},na=ol(kp);function il(t,i,s){var d=i+"";return na(t,Up(d,tg(qp(d),s)))}function ol(t){var i=0,s=0;return function(){var d=bd(),m=xe-(d-s);if(s=d,m>0){if(++i>=Q)return arguments[0]}else i=0;return t.apply(n,arguments)}}function Di(t,i){var s=-1,d=t.length,m=d-1;for(i=i===n?d:i;++s<i;){var x=Bo(s,m),v=t[x];t[x]=t[s],t[s]=v}return t.length=i,t}var al=jp(function(t){var i=[];return t.charCodeAt(0)===46&&i.push(""),t.replace(Hf,function(s,d,m,x){i.push(m?x.replace(Jf,"$1"):d||s)}),i});function en(t){if(typeof t=="string"||Ct(t))return t;var i=t+"";return i=="0"&&1/t==-Ee?"-0":i}function Kn(t){if(t!=null){try{return si.call(t)}catch{}try{return t+""}catch{}}return""}function tg(t,i){return Dt(bt,function(s){var d="_."+s[0];i&s[1]&&!ni(t,d)&&t.push(d)}),t.sort()}function sl(t){if(t instanceof ce)return t.clone();var i=new Ft(t.__wrapped__,t.__chain__);return i.__actions__=ct(t.__actions__),i.__index__=t.__index__,i.__values__=t.__values__,i}function ng(t,i,s){(s?ot(t,i,s):i===n)?i=1:i=Qe(ie(i),0);var d=t==null?0:t.length;if(!d||i<1)return[];for(var m=0,x=0,v=M(pi(d/i));m<d;)v[x++]=Lt(t,m,m+=i);return v}function rg(t){for(var i=-1,s=t==null?0:t.length,d=0,m=[];++i<s;){var x=t[i];x&&(m[d++]=x)}return m}function ig(){var t=arguments.length;if(!t)return[];for(var i=M(t-1),s=arguments[0],d=t;d--;)i[d-1]=arguments[d];return Tn(re(s)?ct(s):[s],Je(i,1))}var og=se(function(t,i){return Ne(t)?Mr(t,Je(i,1,Ne,!0)):[]}),ag=se(function(t,i){var s=$t(i);return Ne(s)&&(s=n),Ne(t)?Mr(t,Je(i,1,Ne,!0),j(s,2)):[]}),sg=se(function(t,i){var s=$t(i);return Ne(s)&&(s=n),Ne(t)?Mr(t,Je(i,1,Ne,!0),n,s):[]});function ug(t,i,s){var d=t==null?0:t.length;return d?(i=s||i===n?1:ie(i),Lt(t,i<0?0:i,d)):[]}function lg(t,i,s){var d=t==null?0:t.length;return d?(i=s||i===n?1:ie(i),i=d-i,Lt(t,0,i<0?0:i)):[]}function cg(t,i){return t&&t.length?Ii(t,j(i,3),!0,!0):[]}function fg(t,i){return t&&t.length?Ii(t,j(i,3),!0):[]}function hg(t,i,s,d){var m=t==null?0:t.length;return m?(s&&typeof s!="number"&&ot(t,i,s)&&(s=0,d=m),ip(t,i,s,d)):[]}function ul(t,i,s){var d=t==null?0:t.length;if(!d)return-1;var m=s==null?0:ie(s);return m<0&&(m=Qe(d+m,0)),ri(t,j(i,3),m)}function ll(t,i,s){var d=t==null?0:t.length;if(!d)return-1;var m=d-1;return s!==n&&(m=ie(s),m=s<0?Qe(d+m,0):et(m,d-1)),ri(t,j(i,3),m,!0)}function cl(t){var i=t==null?0:t.length;return i?Je(t,1):[]}function dg(t){var i=t==null?0:t.length;return i?Je(t,Ee):[]}function pg(t,i){var s=t==null?0:t.length;return s?(i=i===n?1:ie(i),Je(t,i)):[]}function gg(t){for(var i=-1,s=t==null?0:t.length,d={};++i<s;){var m=t[i];d[m[0]]=m[1]}return d}function fl(t){return t&&t.length?t[0]:n}function mg(t,i,s){var d=t==null?0:t.length;if(!d)return-1;var m=s==null?0:ie(s);return m<0&&(m=Qe(d+m,0)),ar(t,i,m)}function yg(t){var i=t==null?0:t.length;return i?Lt(t,0,-1):[]}var wg=se(function(t){var i=Ae(t,Yo);return i.length&&i[0]===t[0]?Oo(i):[]}),bg=se(function(t){var i=$t(t),s=Ae(t,Yo);return i===$t(s)?i=n:s.pop(),s.length&&s[0]===t[0]?Oo(s,j(i,2)):[]}),xg=se(function(t){var i=$t(t),s=Ae(t,Yo);return i=typeof i=="function"?i:n,i&&s.pop(),s.length&&s[0]===t[0]?Oo(s,n,i):[]});function vg(t,i){return t==null?"":yd.call(t,i)}function $t(t){var i=t==null?0:t.length;return i?t[i-1]:n}function _g(t,i,s){var d=t==null?0:t.length;if(!d)return-1;var m=d;return s!==n&&(m=ie(s),m=m<0?Qe(d+m,0):et(m,d-1)),i===i?td(t,i,m):ri(t,Us,m,!0)}function kg(t,i){return t&&t.length?_u(t,ie(i)):n}var Ig=se(hl);function hl(t,i){return t&&t.length&&i&&i.length?$o(t,i):t}function Sg(t,i,s){return t&&t.length&&i&&i.length?$o(t,i,j(s,2)):t}function Cg(t,i,s){return t&&t.length&&i&&i.length?$o(t,i,n,s):t}var Tg=yn(function(t,i){var s=t==null?0:t.length,d=Po(t,i);return Su(t,Ae(i,function(m){return wn(m,s)?+m:m}).sort(Ru)),d});function Eg(t,i){var s=[];if(!(t&&t.length))return s;var d=-1,m=[],x=t.length;for(i=j(i,3);++d<x;){var v=t[d];i(v,d,t)&&(s.push(v),m.push(d))}return Su(t,m),s}function ra(t){return t==null?t:vd.call(t)}function Pg(t,i,s){var d=t==null?0:t.length;return d?(s&&typeof s!="number"&&ot(t,i,s)?(i=0,s=d):(i=i==null?0:ie(i),s=s===n?d:ie(s)),Lt(t,i,s)):[]}function Ag(t,i){return ki(t,i)}function Mg(t,i,s){return Wo(t,i,j(s,2))}function Dg(t,i){var s=t==null?0:t.length;if(s){var d=ki(t,i);if(d<s&&Gt(t[d],i))return d}return-1}function Og(t,i){return ki(t,i,!0)}function Fg(t,i,s){return Wo(t,i,j(s,2),!0)}function Rg(t,i){var s=t==null?0:t.length;if(s){var d=ki(t,i,!0)-1;if(Gt(t[d],i))return d}return-1}function Lg(t){return t&&t.length?Tu(t):[]}function $g(t,i){return t&&t.length?Tu(t,j(i,2)):[]}function Bg(t){var i=t==null?0:t.length;return i?Lt(t,1,i):[]}function Ng(t,i,s){return t&&t.length?(i=s||i===n?1:ie(i),Lt(t,0,i<0?0:i)):[]}function Wg(t,i,s){var d=t==null?0:t.length;return d?(i=s||i===n?1:ie(i),i=d-i,Lt(t,i<0?0:i,d)):[]}function zg(t,i){return t&&t.length?Ii(t,j(i,3),!1,!0):[]}function qg(t,i){return t&&t.length?Ii(t,j(i,3)):[]}var Yg=se(function(t){return Mn(Je(t,1,Ne,!0))}),Hg=se(function(t){var i=$t(t);return Ne(i)&&(i=n),Mn(Je(t,1,Ne,!0),j(i,2))}),Ug=se(function(t){var i=$t(t);return i=typeof i=="function"?i:n,Mn(Je(t,1,Ne,!0),n,i)});function Gg(t){return t&&t.length?Mn(t):[]}function Qg(t,i){return t&&t.length?Mn(t,j(i,2)):[]}function Vg(t,i){return i=typeof i=="function"?i:n,t&&t.length?Mn(t,n,i):[]}function ia(t){if(!(t&&t.length))return[];var i=0;return t=Cn(t,function(s){if(Ne(s))return i=Qe(s.length,i),!0}),vo(i,function(s){return Ae(t,wo(s))})}function dl(t,i){if(!(t&&t.length))return[];var s=ia(t);return i==null?s:Ae(s,function(d){return kt(i,n,d)})}var Xg=se(function(t,i){return Ne(t)?Mr(t,i):[]}),jg=se(function(t){return qo(Cn(t,Ne))}),Kg=se(function(t){var i=$t(t);return Ne(i)&&(i=n),qo(Cn(t,Ne),j(i,2))}),Jg=se(function(t){var i=$t(t);return i=typeof i=="function"?i:n,qo(Cn(t,Ne),n,i)}),Zg=se(ia);function em(t,i){return Mu(t||[],i||[],Ar)}function tm(t,i){return Mu(t||[],i||[],Fr)}var nm=se(function(t){var i=t.length,s=i>1?t[i-1]:n;return s=typeof s=="function"?(t.pop(),s):n,dl(t,s)});function pl(t){var i=b(t);return i.__chain__=!0,i}function rm(t,i){return i(t),t}function Oi(t,i){return i(t)}var im=yn(function(t){var i=t.length,s=i?t[0]:0,d=this.__wrapped__,m=function(x){return Po(x,t)};return i>1||this.__actions__.length||!(d instanceof ce)||!wn(s)?this.thru(m):(d=d.slice(s,+s+(i?1:0)),d.__actions__.push({func:Oi,args:[m],thisArg:n}),new Ft(d,this.__chain__).thru(function(x){return i&&!x.length&&x.push(n),x}))});function om(){return pl(this)}function am(){return new Ft(this.value(),this.__chain__)}function sm(){this.__values__===n&&(this.__values__=El(this.value()));var t=this.__index__>=this.__values__.length,i=t?n:this.__values__[this.__index__++];return{done:t,value:i}}function um(){return this}function lm(t){for(var i,s=this;s instanceof wi;){var d=sl(s);d.__index__=0,d.__values__=n,i?m.__wrapped__=d:i=d;var m=d;s=s.__wrapped__}return m.__wrapped__=t,i}function cm(){var t=this.__wrapped__;if(t instanceof ce){var i=t;return this.__actions__.length&&(i=new ce(this)),i=i.reverse(),i.__actions__.push({func:Oi,args:[ra],thisArg:n}),new Ft(i,this.__chain__)}return this.thru(ra)}function fm(){return Au(this.__wrapped__,this.__actions__)}var hm=Si(function(t,i,s){_e.call(t,s)?++t[s]:gn(t,s,1)});function dm(t,i,s){var d=re(t)?Ys:rp;return s&&ot(t,i,s)&&(i=n),d(t,j(i,3))}function pm(t,i){var s=re(t)?Cn:du;return s(t,j(i,3))}var gm=zu(ul),mm=zu(ll);function ym(t,i){return Je(Fi(t,i),1)}function wm(t,i){return Je(Fi(t,i),Ee)}function bm(t,i,s){return s=s===n?1:ie(s),Je(Fi(t,i),s)}function gl(t,i){var s=re(t)?Dt:An;return s(t,j(i,3))}function ml(t,i){var s=re(t)?Bh:hu;return s(t,j(i,3))}var xm=Si(function(t,i,s){_e.call(t,s)?t[s].push(i):gn(t,s,[i])});function vm(t,i,s,d){t=ft(t)?t:wr(t),s=s&&!d?ie(s):0;var m=t.length;return s<0&&(s=Qe(m+s,0)),Ni(t)?s<=m&&t.indexOf(i,s)>-1:!!m&&ar(t,i,s)>-1}var _m=se(function(t,i,s){var d=-1,m=typeof i=="function",x=ft(t)?M(t.length):[];return An(t,function(v){x[++d]=m?kt(i,v,s):Dr(v,i,s)}),x}),km=Si(function(t,i,s){gn(t,s,i)});function Fi(t,i){var s=re(t)?Ae:bu;return s(t,j(i,3))}function Im(t,i,s,d){return t==null?[]:(re(i)||(i=i==null?[]:[i]),s=d?n:s,re(s)||(s=s==null?[]:[s]),ku(t,i,s))}var Sm=Si(function(t,i,s){t[s?0:1].push(i)},function(){return[[],[]]});function Cm(t,i,s){var d=re(t)?mo:Qs,m=arguments.length<3;return d(t,j(i,4),s,m,An)}function Tm(t,i,s){var d=re(t)?Nh:Qs,m=arguments.length<3;return d(t,j(i,4),s,m,hu)}function Em(t,i){var s=re(t)?Cn:du;return s(t,$i(j(i,3)))}function Pm(t){var i=re(t)?uu:vp;return i(t)}function Am(t,i,s){(s?ot(t,i,s):i===n)?i=1:i=ie(i);var d=re(t)?Jd:_p;return d(t,i)}function Mm(t){var i=re(t)?Zd:Ip;return i(t)}function Dm(t){if(t==null)return 0;if(ft(t))return Ni(t)?ur(t):t.length;var i=tt(t);return i==xt||i==vt?t.size:Ro(t).length}function Om(t,i,s){var d=re(t)?yo:Sp;return s&&ot(t,i,s)&&(i=n),d(t,j(i,3))}var Fm=se(function(t,i){if(t==null)return[];var s=i.length;return s>1&&ot(t,i[0],i[1])?i=[]:s>2&&ot(i[0],i[1],i[2])&&(i=[i[0]]),ku(t,Je(i,1),[])}),Ri=pd||function(){return Ke.Date.now()};function Rm(t,i){if(typeof i!="function")throw new Ot(l);return t=ie(t),function(){if(--t<1)return i.apply(this,arguments)}}function yl(t,i,s){return i=s?n:i,i=t&&i==null?t.length:i,mn(t,U,n,n,n,n,i)}function wl(t,i){var s;if(typeof i!="function")throw new Ot(l);return t=ie(t),function(){return--t>0&&(s=i.apply(this,arguments)),t<=1&&(i=n),s}}var oa=se(function(t,i,s){var d=D;if(s.length){var m=En(s,mr(oa));d|=O}return mn(t,d,i,s,m)}),bl=se(function(t,i,s){var d=D|A;if(s.length){var m=En(s,mr(bl));d|=O}return mn(i,d,t,s,m)});function xl(t,i,s){i=s?n:i;var d=mn(t,z,n,n,n,n,n,i);return d.placeholder=xl.placeholder,d}function vl(t,i,s){i=s?n:i;var d=mn(t,W,n,n,n,n,n,i);return d.placeholder=vl.placeholder,d}function _l(t,i,s){var d,m,x,v,k,T,L=0,$=!1,B=!1,Y=!0;if(typeof t!="function")throw new Ot(l);i=Bt(i)||0,De(s)&&($=!!s.leading,B="maxWait"in s,x=B?Qe(Bt(s.maxWait)||0,i):x,Y="trailing"in s?!!s.trailing:Y);function G(We){var Qt=d,vn=m;return d=m=n,L=We,v=t.apply(vn,Qt),v}function J(We){return L=We,k=$r(le,i),$?G(We):v}function oe(We){var Qt=We-T,vn=We-L,zl=i-Qt;return B?et(zl,x-vn):zl}function Z(We){var Qt=We-T,vn=We-L;return T===n||Qt>=i||Qt<0||B&&vn>=x}function le(){var We=Ri();if(Z(We))return he(We);k=$r(le,oe(We))}function he(We){return k=n,Y&&d?G(We):(d=m=n,v)}function Tt(){k!==n&&Du(k),L=0,d=T=m=k=n}function at(){return k===n?v:he(Ri())}function Et(){var We=Ri(),Qt=Z(We);if(d=arguments,m=this,T=We,Qt){if(k===n)return J(T);if(B)return Du(k),k=$r(le,i),G(T)}return k===n&&(k=$r(le,i)),v}return Et.cancel=Tt,Et.flush=at,Et}var Lm=se(function(t,i){return fu(t,1,i)}),$m=se(function(t,i,s){return fu(t,Bt(i)||0,s)});function Bm(t){return mn(t,ee)}function Li(t,i){if(typeof t!="function"||i!=null&&typeof i!="function")throw new Ot(l);var s=function(){var d=arguments,m=i?i.apply(this,d):d[0],x=s.cache;if(x.has(m))return x.get(m);var v=t.apply(this,d);return s.cache=x.set(m,v)||x,v};return s.cache=new(Li.Cache||pn),s}Li.Cache=pn;function $i(t){if(typeof t!="function")throw new Ot(l);return function(){var i=arguments;switch(i.length){case 0:return!t.call(this);case 1:return!t.call(this,i[0]);case 2:return!t.call(this,i[0],i[1]);case 3:return!t.call(this,i[0],i[1],i[2])}return!t.apply(this,i)}}function Nm(t){return wl(2,t)}var Wm=Cp(function(t,i){i=i.length==1&&re(i[0])?Ae(i[0],It(j())):Ae(Je(i,1),It(j()));var s=i.length;return se(function(d){for(var m=-1,x=et(d.length,s);++m<x;)d[m]=i[m].call(this,d[m]);return kt(t,this,d)})}),aa=se(function(t,i){var s=En(i,mr(aa));return mn(t,O,n,i,s)}),kl=se(function(t,i){var s=En(i,mr(kl));return mn(t,P,n,i,s)}),zm=yn(function(t,i){return mn(t,V,n,n,n,i)});function qm(t,i){if(typeof t!="function")throw new Ot(l);return i=i===n?i:ie(i),se(t,i)}function Ym(t,i){if(typeof t!="function")throw new Ot(l);return i=i==null?0:Qe(ie(i),0),se(function(s){var d=s[i],m=On(s,0,i);return d&&Tn(m,d),kt(t,this,m)})}function Hm(t,i,s){var d=!0,m=!0;if(typeof t!="function")throw new Ot(l);return De(s)&&(d="leading"in s?!!s.leading:d,m="trailing"in s?!!s.trailing:m),_l(t,i,{leading:d,maxWait:i,trailing:m})}function Um(t){return yl(t,1)}function Gm(t,i){return aa(Ho(i),t)}function Qm(){if(!arguments.length)return[];var t=arguments[0];return re(t)?t:[t]}function Vm(t){return Rt(t,y)}function Xm(t,i){return i=typeof i=="function"?i:n,Rt(t,y,i)}function jm(t){return Rt(t,g|y)}function Km(t,i){return i=typeof i=="function"?i:n,Rt(t,g|y,i)}function Jm(t,i){return i==null||cu(t,i,Xe(i))}function Gt(t,i){return t===i||t!==t&&i!==i}var Zm=Pi(Do),e0=Pi(function(t,i){return t>=i}),Jn=mu((function(){return arguments})())?mu:function(t){return $e(t)&&_e.call(t,"callee")&&!nu.call(t,"callee")},re=M.isArray,t0=$s?It($s):lp;function ft(t){return t!=null&&Bi(t.length)&&!bn(t)}function Ne(t){return $e(t)&&ft(t)}function n0(t){return t===!0||t===!1||$e(t)&&it(t)==lt}var Fn=md||ya,r0=Bs?It(Bs):cp;function i0(t){return $e(t)&&t.nodeType===1&&!Br(t)}function o0(t){if(t==null)return!0;if(ft(t)&&(re(t)||typeof t=="string"||typeof t.splice=="function"||Fn(t)||yr(t)||Jn(t)))return!t.length;var i=tt(t);if(i==xt||i==vt)return!t.size;if(Lr(t))return!Ro(t).length;for(var s in t)if(_e.call(t,s))return!1;return!0}function a0(t,i){return Or(t,i)}function s0(t,i,s){s=typeof s=="function"?s:n;var d=s?s(t,i):n;return d===n?Or(t,i,n,s):!!d}function sa(t){if(!$e(t))return!1;var i=it(t);return i==cn||i==kn||typeof t.message=="string"&&typeof t.name=="string"&&!Br(t)}function u0(t){return typeof t=="number"&&iu(t)}function bn(t){if(!De(t))return!1;var i=it(t);return i==rr||i==Xr||i==zn||i==Jr}function Il(t){return typeof t=="number"&&t==ie(t)}function Bi(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Ye}function De(t){var i=typeof t;return t!=null&&(i=="object"||i=="function")}function $e(t){return t!=null&&typeof t=="object"}var Sl=Ns?It(Ns):hp;function l0(t,i){return t===i||Fo(t,i,Ko(i))}function c0(t,i,s){return s=typeof s=="function"?s:n,Fo(t,i,Ko(i),s)}function f0(t){return Cl(t)&&t!=+t}function h0(t){if(Xp(t))throw new ne(u);return yu(t)}function d0(t){return t===null}function p0(t){return t==null}function Cl(t){return typeof t=="number"||$e(t)&&it(t)==In}function Br(t){if(!$e(t)||it(t)!=At)return!1;var i=fi(t);if(i===null)return!0;var s=_e.call(i,"constructor")&&i.constructor;return typeof s=="function"&&s instanceof s&&si.call(s)==cd}var ua=Ws?It(Ws):dp;function g0(t){return Il(t)&&t>=-Ye&&t<=Ye}var Tl=zs?It(zs):pp;function Ni(t){return typeof t=="string"||!re(t)&&$e(t)&&it(t)==qn}function Ct(t){return typeof t=="symbol"||$e(t)&&it(t)==ir}var yr=qs?It(qs):gp;function m0(t){return t===n}function y0(t){return $e(t)&&tt(t)==Yn}function w0(t){return $e(t)&&it(t)==R}var b0=Pi(Lo),x0=Pi(function(t,i){return t<=i});function El(t){if(!t)return[];if(ft(t))return Ni(t)?Ht(t):ct(t);if(Sr&&t[Sr])return Jh(t[Sr]());var i=tt(t),s=i==xt?ko:i==vt?ii:wr;return s(t)}function xn(t){if(!t)return t===0?t:0;if(t=Bt(t),t===Ee||t===-Ee){var i=t<0?-1:1;return i*Wt}return t===t?t:0}function ie(t){var i=xn(t),s=i%1;return i===i?s?i-s:i:0}function Pl(t){return t?Vn(ie(t),0,Re):0}function Bt(t){if(typeof t=="number")return t;if(Ct(t))return _;if(De(t)){var i=typeof t.valueOf=="function"?t.valueOf():t;t=De(i)?i+"":i}if(typeof t!="string")return t===0?t:+t;t=Vs(t);var s=th.test(t);return s||rh.test(t)?Rh(t.slice(2),s?2:8):eh.test(t)?_:+t}function Al(t){return Zt(t,ht(t))}function v0(t){return t?Vn(ie(t),-Ye,Ye):t===0?t:0}function ve(t){return t==null?"":St(t)}var _0=pr(function(t,i){if(Lr(i)||ft(i)){Zt(i,Xe(i),t);return}for(var s in i)_e.call(i,s)&&Ar(t,s,i[s])}),Ml=pr(function(t,i){Zt(i,ht(i),t)}),Wi=pr(function(t,i,s,d){Zt(i,ht(i),t,d)}),k0=pr(function(t,i,s,d){Zt(i,Xe(i),t,d)}),I0=yn(Po);function S0(t,i){var s=dr(t);return i==null?s:lu(s,i)}var C0=se(function(t,i){t=Se(t);var s=-1,d=i.length,m=d>2?i[2]:n;for(m&&ot(i[0],i[1],m)&&(d=1);++s<d;)for(var x=i[s],v=ht(x),k=-1,T=v.length;++k<T;){var L=v[k],$=t[L];($===n||Gt($,cr[L])&&!_e.call(t,L))&&(t[L]=x[L])}return t}),T0=se(function(t){return t.push(n,Vu),kt(Dl,n,t)});function E0(t,i){return Hs(t,j(i,3),Jt)}function P0(t,i){return Hs(t,j(i,3),Mo)}function A0(t,i){return t==null?t:Ao(t,j(i,3),ht)}function M0(t,i){return t==null?t:pu(t,j(i,3),ht)}function D0(t,i){return t&&Jt(t,j(i,3))}function O0(t,i){return t&&Mo(t,j(i,3))}function F0(t){return t==null?[]:vi(t,Xe(t))}function R0(t){return t==null?[]:vi(t,ht(t))}function la(t,i,s){var d=t==null?n:Xn(t,i);return d===n?s:d}function L0(t,i){return t!=null&&Ku(t,i,op)}function ca(t,i){return t!=null&&Ku(t,i,ap)}var $0=Yu(function(t,i,s){i!=null&&typeof i.toString!="function"&&(i=ui.call(i)),t[i]=s},ha(dt)),B0=Yu(function(t,i,s){i!=null&&typeof i.toString!="function"&&(i=ui.call(i)),_e.call(t,i)?t[i].push(s):t[i]=[s]},j),N0=se(Dr);function Xe(t){return ft(t)?su(t):Ro(t)}function ht(t){return ft(t)?su(t,!0):mp(t)}function W0(t,i){var s={};return i=j(i,3),Jt(t,function(d,m,x){gn(s,i(d,m,x),d)}),s}function z0(t,i){var s={};return i=j(i,3),Jt(t,function(d,m,x){gn(s,m,i(d,m,x))}),s}var q0=pr(function(t,i,s){_i(t,i,s)}),Dl=pr(function(t,i,s,d){_i(t,i,s,d)}),Y0=yn(function(t,i){var s={};if(t==null)return s;var d=!1;i=Ae(i,function(x){return x=Dn(x,t),d||(d=x.length>1),x}),Zt(t,Xo(t),s),d&&(s=Rt(s,g|w|y,$p));for(var m=i.length;m--;)zo(s,i[m]);return s});function H0(t,i){return Ol(t,$i(j(i)))}var U0=yn(function(t,i){return t==null?{}:wp(t,i)});function Ol(t,i){if(t==null)return{};var s=Ae(Xo(t),function(d){return[d]});return i=j(i),Iu(t,s,function(d,m){return i(d,m[0])})}function G0(t,i,s){i=Dn(i,t);var d=-1,m=i.length;for(m||(m=1,t=n);++d<m;){var x=t==null?n:t[en(i[d])];x===n&&(d=m,x=s),t=bn(x)?x.call(t):x}return t}function Q0(t,i,s){return t==null?t:Fr(t,i,s)}function V0(t,i,s,d){return d=typeof d=="function"?d:n,t==null?t:Fr(t,i,s,d)}var Fl=Gu(Xe),Rl=Gu(ht);function X0(t,i,s){var d=re(t),m=d||Fn(t)||yr(t);if(i=j(i,4),s==null){var x=t&&t.constructor;m?s=d?new x:[]:De(t)?s=bn(x)?dr(fi(t)):{}:s={}}return(m?Dt:Jt)(t,function(v,k,T){return i(s,v,k,T)}),s}function j0(t,i){return t==null?!0:zo(t,i)}function K0(t,i,s){return t==null?t:Pu(t,i,Ho(s))}function J0(t,i,s,d){return d=typeof d=="function"?d:n,t==null?t:Pu(t,i,Ho(s),d)}function wr(t){return t==null?[]:_o(t,Xe(t))}function Z0(t){return t==null?[]:_o(t,ht(t))}function e1(t,i,s){return s===n&&(s=i,i=n),s!==n&&(s=Bt(s),s=s===s?s:0),i!==n&&(i=Bt(i),i=i===i?i:0),Vn(Bt(t),i,s)}function t1(t,i,s){return i=xn(i),s===n?(s=i,i=0):s=xn(s),t=Bt(t),sp(t,i,s)}function n1(t,i,s){if(s&&typeof s!="boolean"&&ot(t,i,s)&&(i=s=n),s===n&&(typeof i=="boolean"?(s=i,i=n):typeof t=="boolean"&&(s=t,t=n)),t===n&&i===n?(t=0,i=1):(t=xn(t),i===n?(i=t,t=0):i=xn(i)),t>i){var d=t;t=i,i=d}if(s||t%1||i%1){var m=ou();return et(t+m*(i-t+Fh("1e-"+((m+"").length-1))),i)}return Bo(t,i)}var r1=gr(function(t,i,s){return i=i.toLowerCase(),t+(s?Ll(i):i)});function Ll(t){return fa(ve(t).toLowerCase())}function $l(t){return t=ve(t),t&&t.replace(oh,Qh).replace(Ih,"")}function i1(t,i,s){t=ve(t),i=St(i);var d=t.length;s=s===n?d:Vn(ie(s),0,d);var m=s;return s-=i.length,s>=0&&t.slice(s,m)==i}function o1(t){return t=ve(t),t&&Nf.test(t)?t.replace(ps,Vh):t}function a1(t){return t=ve(t),t&&Uf.test(t)?t.replace(oo,"\\$&"):t}var s1=gr(function(t,i,s){return t+(s?"-":"")+i.toLowerCase()}),u1=gr(function(t,i,s){return t+(s?" ":"")+i.toLowerCase()}),l1=Wu("toLowerCase");function c1(t,i,s){t=ve(t),i=ie(i);var d=i?ur(t):0;if(!i||d>=i)return t;var m=(i-d)/2;return Ei(gi(m),s)+t+Ei(pi(m),s)}function f1(t,i,s){t=ve(t),i=ie(i);var d=i?ur(t):0;return i&&d<i?t+Ei(i-d,s):t}function h1(t,i,s){t=ve(t),i=ie(i);var d=i?ur(t):0;return i&&d<i?Ei(i-d,s)+t:t}function d1(t,i,s){return s||i==null?i=0:i&&(i=+i),xd(ve(t).replace(ao,""),i||0)}function p1(t,i,s){return(s?ot(t,i,s):i===n)?i=1:i=ie(i),No(ve(t),i)}function g1(){var t=arguments,i=ve(t[0]);return t.length<3?i:i.replace(t[1],t[2])}var m1=gr(function(t,i,s){return t+(s?"_":"")+i.toLowerCase()});function y1(t,i,s){return s&&typeof s!="number"&&ot(t,i,s)&&(i=s=n),s=s===n?Re:s>>>0,s?(t=ve(t),t&&(typeof i=="string"||i!=null&&!ua(i))&&(i=St(i),!i&&sr(t))?On(Ht(t),0,s):t.split(i,s)):[]}var w1=gr(function(t,i,s){return t+(s?" ":"")+fa(i)});function b1(t,i,s){return t=ve(t),s=s==null?0:Vn(ie(s),0,t.length),i=St(i),t.slice(s,s+i.length)==i}function x1(t,i,s){var d=b.templateSettings;s&&ot(t,i,s)&&(i=n),t=ve(t),i=Wi({},i,d,Qu);var m=Wi({},i.imports,d.imports,Qu),x=Xe(m),v=_o(m,x),k,T,L=0,$=i.interpolate||Zr,B="__p += '",Y=Io((i.escape||Zr).source+"|"+$.source+"|"+($===gs?Zf:Zr).source+"|"+(i.evaluate||Zr).source+"|$","g"),G="//# sourceURL="+(_e.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ph+"]")+`
`;t.replace(Y,function(Z,le,he,Tt,at,Et){return he||(he=Tt),B+=t.slice(L,Et).replace(ah,Xh),le&&(k=!0,B+=`' +
__e(`+le+`) +
'`),at&&(T=!0,B+=`';
`+at+`;
__p += '`),he&&(B+=`' +
((__t = (`+he+`)) == null ? '' : __t) +
'`),L=Et+Z.length,Z}),B+=`';
`;var J=_e.call(i,"variable")&&i.variable;if(!J)B=`with (obj) {
`+B+`
}
`;else if(Kf.test(J))throw new ne(c);B=(T?B.replace(Yt,""):B).replace(Lf,"$1").replace($f,"$1;"),B="function("+(J||"obj")+`) {
`+(J?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(k?", __e = _.escape":"")+(T?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+B+`return __p
}`;var oe=Nl(function(){return ye(x,G+"return "+B).apply(n,v)});if(oe.source=B,sa(oe))throw oe;return oe}function v1(t){return ve(t).toLowerCase()}function _1(t){return ve(t).toUpperCase()}function k1(t,i,s){if(t=ve(t),t&&(s||i===n))return Vs(t);if(!t||!(i=St(i)))return t;var d=Ht(t),m=Ht(i),x=Xs(d,m),v=js(d,m)+1;return On(d,x,v).join("")}function I1(t,i,s){if(t=ve(t),t&&(s||i===n))return t.slice(0,Js(t)+1);if(!t||!(i=St(i)))return t;var d=Ht(t),m=js(d,Ht(i))+1;return On(d,0,m).join("")}function S1(t,i,s){if(t=ve(t),t&&(s||i===n))return t.replace(ao,"");if(!t||!(i=St(i)))return t;var d=Ht(t),m=Xs(d,Ht(i));return On(d,m).join("")}function C1(t,i){var s=de,d=X;if(De(i)){var m="separator"in i?i.separator:m;s="length"in i?ie(i.length):s,d="omission"in i?St(i.omission):d}t=ve(t);var x=t.length;if(sr(t)){var v=Ht(t);x=v.length}if(s>=x)return t;var k=s-ur(d);if(k<1)return d;var T=v?On(v,0,k).join(""):t.slice(0,k);if(m===n)return T+d;if(v&&(k+=T.length-k),ua(m)){if(t.slice(k).search(m)){var L,$=T;for(m.global||(m=Io(m.source,ve(ms.exec(m))+"g")),m.lastIndex=0;L=m.exec($);)var B=L.index;T=T.slice(0,B===n?k:B)}}else if(t.indexOf(St(m),k)!=k){var Y=T.lastIndexOf(m);Y>-1&&(T=T.slice(0,Y))}return T+d}function T1(t){return t=ve(t),t&&Bf.test(t)?t.replace(ds,nd):t}var E1=gr(function(t,i,s){return t+(s?" ":"")+i.toUpperCase()}),fa=Wu("toUpperCase");function Bl(t,i,s){return t=ve(t),i=s?n:i,i===n?Kh(t)?od(t):qh(t):t.match(i)||[]}var Nl=se(function(t,i){try{return kt(t,n,i)}catch(s){return sa(s)?s:new ne(s)}}),P1=yn(function(t,i){return Dt(i,function(s){s=en(s),gn(t,s,oa(t[s],t))}),t});function A1(t){var i=t==null?0:t.length,s=j();return t=i?Ae(t,function(d){if(typeof d[1]!="function")throw new Ot(l);return[s(d[0]),d[1]]}):[],se(function(d){for(var m=-1;++m<i;){var x=t[m];if(kt(x[0],this,d))return kt(x[1],this,d)}})}function M1(t){return np(Rt(t,g))}function ha(t){return function(){return t}}function D1(t,i){return t==null||t!==t?i:t}var O1=qu(),F1=qu(!0);function dt(t){return t}function da(t){return wu(typeof t=="function"?t:Rt(t,g))}function R1(t){return xu(Rt(t,g))}function L1(t,i){return vu(t,Rt(i,g))}var $1=se(function(t,i){return function(s){return Dr(s,t,i)}}),B1=se(function(t,i){return function(s){return Dr(t,s,i)}});function pa(t,i,s){var d=Xe(i),m=vi(i,d);s==null&&!(De(i)&&(m.length||!d.length))&&(s=i,i=t,t=this,m=vi(i,Xe(i)));var x=!(De(s)&&"chain"in s)||!!s.chain,v=bn(t);return Dt(m,function(k){var T=i[k];t[k]=T,v&&(t.prototype[k]=function(){var L=this.__chain__;if(x||L){var $=t(this.__wrapped__),B=$.__actions__=ct(this.__actions__);return B.push({func:T,args:arguments,thisArg:t}),$.__chain__=L,$}return T.apply(t,Tn([this.value()],arguments))})}),t}function N1(){return Ke._===this&&(Ke._=fd),this}function ga(){}function W1(t){return t=ie(t),se(function(i){return _u(i,t)})}var z1=Go(Ae),q1=Go(Ys),Y1=Go(yo);function Wl(t){return Zo(t)?wo(en(t)):bp(t)}function H1(t){return function(i){return t==null?n:Xn(t,i)}}var U1=Hu(),G1=Hu(!0);function ma(){return[]}function ya(){return!1}function Q1(){return{}}function V1(){return""}function X1(){return!0}function j1(t,i){if(t=ie(t),t<1||t>Ye)return[];var s=Re,d=et(t,Re);i=j(i),t-=Re;for(var m=vo(d,i);++s<t;)i(s);return m}function K1(t){return re(t)?Ae(t,en):Ct(t)?[t]:ct(al(ve(t)))}function J1(t){var i=++ld;return ve(t)+i}var Z1=Ti(function(t,i){return t+i},0),ey=Qo("ceil"),ty=Ti(function(t,i){return t/i},1),ny=Qo("floor");function ry(t){return t&&t.length?xi(t,dt,Do):n}function iy(t,i){return t&&t.length?xi(t,j(i,2),Do):n}function oy(t){return Gs(t,dt)}function ay(t,i){return Gs(t,j(i,2))}function sy(t){return t&&t.length?xi(t,dt,Lo):n}function uy(t,i){return t&&t.length?xi(t,j(i,2),Lo):n}var ly=Ti(function(t,i){return t*i},1),cy=Qo("round"),fy=Ti(function(t,i){return t-i},0);function hy(t){return t&&t.length?xo(t,dt):0}function dy(t,i){return t&&t.length?xo(t,j(i,2)):0}return b.after=Rm,b.ary=yl,b.assign=_0,b.assignIn=Ml,b.assignInWith=Wi,b.assignWith=k0,b.at=I0,b.before=wl,b.bind=oa,b.bindAll=P1,b.bindKey=bl,b.castArray=Qm,b.chain=pl,b.chunk=ng,b.compact=rg,b.concat=ig,b.cond=A1,b.conforms=M1,b.constant=ha,b.countBy=hm,b.create=S0,b.curry=xl,b.curryRight=vl,b.debounce=_l,b.defaults=C0,b.defaultsDeep=T0,b.defer=Lm,b.delay=$m,b.difference=og,b.differenceBy=ag,b.differenceWith=sg,b.drop=ug,b.dropRight=lg,b.dropRightWhile=cg,b.dropWhile=fg,b.fill=hg,b.filter=pm,b.flatMap=ym,b.flatMapDeep=wm,b.flatMapDepth=bm,b.flatten=cl,b.flattenDeep=dg,b.flattenDepth=pg,b.flip=Bm,b.flow=O1,b.flowRight=F1,b.fromPairs=gg,b.functions=F0,b.functionsIn=R0,b.groupBy=xm,b.initial=yg,b.intersection=wg,b.intersectionBy=bg,b.intersectionWith=xg,b.invert=$0,b.invertBy=B0,b.invokeMap=_m,b.iteratee=da,b.keyBy=km,b.keys=Xe,b.keysIn=ht,b.map=Fi,b.mapKeys=W0,b.mapValues=z0,b.matches=R1,b.matchesProperty=L1,b.memoize=Li,b.merge=q0,b.mergeWith=Dl,b.method=$1,b.methodOf=B1,b.mixin=pa,b.negate=$i,b.nthArg=W1,b.omit=Y0,b.omitBy=H0,b.once=Nm,b.orderBy=Im,b.over=z1,b.overArgs=Wm,b.overEvery=q1,b.overSome=Y1,b.partial=aa,b.partialRight=kl,b.partition=Sm,b.pick=U0,b.pickBy=Ol,b.property=Wl,b.propertyOf=H1,b.pull=Ig,b.pullAll=hl,b.pullAllBy=Sg,b.pullAllWith=Cg,b.pullAt=Tg,b.range=U1,b.rangeRight=G1,b.rearg=zm,b.reject=Em,b.remove=Eg,b.rest=qm,b.reverse=ra,b.sampleSize=Am,b.set=Q0,b.setWith=V0,b.shuffle=Mm,b.slice=Pg,b.sortBy=Fm,b.sortedUniq=Lg,b.sortedUniqBy=$g,b.split=y1,b.spread=Ym,b.tail=Bg,b.take=Ng,b.takeRight=Wg,b.takeRightWhile=zg,b.takeWhile=qg,b.tap=rm,b.throttle=Hm,b.thru=Oi,b.toArray=El,b.toPairs=Fl,b.toPairsIn=Rl,b.toPath=K1,b.toPlainObject=Al,b.transform=X0,b.unary=Um,b.union=Yg,b.unionBy=Hg,b.unionWith=Ug,b.uniq=Gg,b.uniqBy=Qg,b.uniqWith=Vg,b.unset=j0,b.unzip=ia,b.unzipWith=dl,b.update=K0,b.updateWith=J0,b.values=wr,b.valuesIn=Z0,b.without=Xg,b.words=Bl,b.wrap=Gm,b.xor=jg,b.xorBy=Kg,b.xorWith=Jg,b.zip=Zg,b.zipObject=em,b.zipObjectDeep=tm,b.zipWith=nm,b.entries=Fl,b.entriesIn=Rl,b.extend=Ml,b.extendWith=Wi,pa(b,b),b.add=Z1,b.attempt=Nl,b.camelCase=r1,b.capitalize=Ll,b.ceil=ey,b.clamp=e1,b.clone=Vm,b.cloneDeep=jm,b.cloneDeepWith=Km,b.cloneWith=Xm,b.conformsTo=Jm,b.deburr=$l,b.defaultTo=D1,b.divide=ty,b.endsWith=i1,b.eq=Gt,b.escape=o1,b.escapeRegExp=a1,b.every=dm,b.find=gm,b.findIndex=ul,b.findKey=E0,b.findLast=mm,b.findLastIndex=ll,b.findLastKey=P0,b.floor=ny,b.forEach=gl,b.forEachRight=ml,b.forIn=A0,b.forInRight=M0,b.forOwn=D0,b.forOwnRight=O0,b.get=la,b.gt=Zm,b.gte=e0,b.has=L0,b.hasIn=ca,b.head=fl,b.identity=dt,b.includes=vm,b.indexOf=mg,b.inRange=t1,b.invoke=N0,b.isArguments=Jn,b.isArray=re,b.isArrayBuffer=t0,b.isArrayLike=ft,b.isArrayLikeObject=Ne,b.isBoolean=n0,b.isBuffer=Fn,b.isDate=r0,b.isElement=i0,b.isEmpty=o0,b.isEqual=a0,b.isEqualWith=s0,b.isError=sa,b.isFinite=u0,b.isFunction=bn,b.isInteger=Il,b.isLength=Bi,b.isMap=Sl,b.isMatch=l0,b.isMatchWith=c0,b.isNaN=f0,b.isNative=h0,b.isNil=p0,b.isNull=d0,b.isNumber=Cl,b.isObject=De,b.isObjectLike=$e,b.isPlainObject=Br,b.isRegExp=ua,b.isSafeInteger=g0,b.isSet=Tl,b.isString=Ni,b.isSymbol=Ct,b.isTypedArray=yr,b.isUndefined=m0,b.isWeakMap=y0,b.isWeakSet=w0,b.join=vg,b.kebabCase=s1,b.last=$t,b.lastIndexOf=_g,b.lowerCase=u1,b.lowerFirst=l1,b.lt=b0,b.lte=x0,b.max=ry,b.maxBy=iy,b.mean=oy,b.meanBy=ay,b.min=sy,b.minBy=uy,b.stubArray=ma,b.stubFalse=ya,b.stubObject=Q1,b.stubString=V1,b.stubTrue=X1,b.multiply=ly,b.nth=kg,b.noConflict=N1,b.noop=ga,b.now=Ri,b.pad=c1,b.padEnd=f1,b.padStart=h1,b.parseInt=d1,b.random=n1,b.reduce=Cm,b.reduceRight=Tm,b.repeat=p1,b.replace=g1,b.result=G0,b.round=cy,b.runInContext=C,b.sample=Pm,b.size=Dm,b.snakeCase=m1,b.some=Om,b.sortedIndex=Ag,b.sortedIndexBy=Mg,b.sortedIndexOf=Dg,b.sortedLastIndex=Og,b.sortedLastIndexBy=Fg,b.sortedLastIndexOf=Rg,b.startCase=w1,b.startsWith=b1,b.subtract=fy,b.sum=hy,b.sumBy=dy,b.template=x1,b.times=j1,b.toFinite=xn,b.toInteger=ie,b.toLength=Pl,b.toLower=v1,b.toNumber=Bt,b.toSafeInteger=v0,b.toString=ve,b.toUpper=_1,b.trim=k1,b.trimEnd=I1,b.trimStart=S1,b.truncate=C1,b.unescape=T1,b.uniqueId=J1,b.upperCase=E1,b.upperFirst=fa,b.each=gl,b.eachRight=ml,b.first=fl,pa(b,(function(){var t={};return Jt(b,function(i,s){_e.call(b.prototype,s)||(t[s]=i)}),t})(),{chain:!1}),b.VERSION=o,Dt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){b[t].placeholder=b}),Dt(["drop","take"],function(t,i){ce.prototype[t]=function(s){s=s===n?1:Qe(ie(s),0);var d=this.__filtered__&&!i?new ce(this):this.clone();return d.__filtered__?d.__takeCount__=et(s,d.__takeCount__):d.__views__.push({size:et(s,Re),type:t+(d.__dir__<0?"Right":"")}),d},ce.prototype[t+"Right"]=function(s){return this.reverse()[t](s).reverse()}}),Dt(["filter","map","takeWhile"],function(t,i){var s=i+1,d=s==Me||s==Ve;ce.prototype[t]=function(m){var x=this.clone();return x.__iteratees__.push({iteratee:j(m,3),type:s}),x.__filtered__=x.__filtered__||d,x}}),Dt(["head","last"],function(t,i){var s="take"+(i?"Right":"");ce.prototype[t]=function(){return this[s](1).value()[0]}}),Dt(["initial","tail"],function(t,i){var s="drop"+(i?"":"Right");ce.prototype[t]=function(){return this.__filtered__?new ce(this):this[s](1)}}),ce.prototype.compact=function(){return this.filter(dt)},ce.prototype.find=function(t){return this.filter(t).head()},ce.prototype.findLast=function(t){return this.reverse().find(t)},ce.prototype.invokeMap=se(function(t,i){return typeof t=="function"?new ce(this):this.map(function(s){return Dr(s,t,i)})}),ce.prototype.reject=function(t){return this.filter($i(j(t)))},ce.prototype.slice=function(t,i){t=ie(t);var s=this;return s.__filtered__&&(t>0||i<0)?new ce(s):(t<0?s=s.takeRight(-t):t&&(s=s.drop(t)),i!==n&&(i=ie(i),s=i<0?s.dropRight(-i):s.take(i-t)),s)},ce.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},ce.prototype.toArray=function(){return this.take(Re)},Jt(ce.prototype,function(t,i){var s=/^(?:filter|find|map|reject)|While$/.test(i),d=/^(?:head|last)$/.test(i),m=b[d?"take"+(i=="last"?"Right":""):i],x=d||/^find/.test(i);m&&(b.prototype[i]=function(){var v=this.__wrapped__,k=d?[1]:arguments,T=v instanceof ce,L=k[0],$=T||re(v),B=function(le){var he=m.apply(b,Tn([le],k));return d&&Y?he[0]:he};$&&s&&typeof L=="function"&&L.length!=1&&(T=$=!1);var Y=this.__chain__,G=!!this.__actions__.length,J=x&&!Y,oe=T&&!G;if(!x&&$){v=oe?v:new ce(this);var Z=t.apply(v,k);return Z.__actions__.push({func:Oi,args:[B],thisArg:n}),new Ft(Z,Y)}return J&&oe?t.apply(this,k):(Z=this.thru(B),J?d?Z.value()[0]:Z.value():Z)})}),Dt(["pop","push","shift","sort","splice","unshift"],function(t){var i=oi[t],s=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",d=/^(?:pop|shift)$/.test(t);b.prototype[t]=function(){var m=arguments;if(d&&!this.__chain__){var x=this.value();return i.apply(re(x)?x:[],m)}return this[s](function(v){return i.apply(re(v)?v:[],m)})}}),Jt(ce.prototype,function(t,i){var s=b[i];if(s){var d=s.name+"";_e.call(hr,d)||(hr[d]=[]),hr[d].push({name:i,func:s})}}),hr[Ci(n,A).name]=[{name:"wrapper",func:n}],ce.prototype.clone=Td,ce.prototype.reverse=Ed,ce.prototype.value=Pd,b.prototype.at=im,b.prototype.chain=om,b.prototype.commit=am,b.prototype.next=sm,b.prototype.plant=lm,b.prototype.reverse=cm,b.prototype.toJSON=b.prototype.valueOf=b.prototype.value=fm,b.prototype.first=b.prototype.head,Sr&&(b.prototype[Sr]=um),b}),lr=ad();Hn?((Hn.exports=lr)._=lr,ho._=lr):Ke._=lr}).call(by)})(Yr,Yr.exports)),Yr.exports}var vy=xy();const ba={projectDir:"powerJournal",outputDir:"reports",coreDir:"core",devLogging:!0,devMode:!1,reportFileExtension:".pjf.md"};async function _y(r){if(!r||typeof r!="object"||Array.isArray(r))return ba;try{return vy.merge({},ba,r)}catch(e){return console.warn("[PowerJournal] Failed to merge user config, using defaults.",e),ba}}const Nc=6048e5,ky=864e5,Iy=6e4,Sy=36e5,Cy=1e3,Ul=Symbol.for("constructDateFrom");function He(r,e){return typeof r=="function"?r(e):r&&typeof r=="object"&&Ul in r?r[Ul](e):r instanceof Date?new r.constructor(e):new Date(e)}function Ue(r,e){return He(e||r,r)}function ts(r,e,n){const o=Ue(r,n?.in);return isNaN(e)?He(n?.in||r,NaN):(e&&o.setDate(o.getDate()+e),o)}function Ty(r,e,n){const o=Ue(r,n?.in);if(isNaN(e))return He(r,NaN);const a=o.getDate(),u=He(r,o.getTime());u.setMonth(o.getMonth()+e+1,0);const l=u.getDate();return a>=l?u:(o.setFullYear(u.getFullYear(),u.getMonth(),a),o)}let Ey={};function kr(){return Ey}function Bn(r,e){const n=kr(),o=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=Ue(r,e?.in),u=a.getDay(),l=(u<o?7:0)+u-o;return a.setDate(a.getDate()-l),a.setHours(0,0,0,0),a}function _r(r,e){return Bn(r,{...e,weekStartsOn:1})}function Wc(r,e){const n=Ue(r,e?.in),o=n.getFullYear(),a=He(n,0);a.setFullYear(o+1,0,4),a.setHours(0,0,0,0);const u=_r(a),l=He(n,0);l.setFullYear(o,0,4),l.setHours(0,0,0,0);const c=_r(l);return n.getTime()>=u.getTime()?o+1:n.getTime()>=c.getTime()?o:o-1}function Xi(r){const e=Ue(r),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+r-+n}function zc(r,...e){const n=He.bind(null,e.find(o=>typeof o=="object"));return e.map(n)}function Gl(r,e){const n=Ue(r,e?.in);return n.setHours(0,0,0,0),n}function qc(r,e,n){const[o,a]=zc(n?.in,r,e),u=Gl(o),l=Gl(a),c=+u-Xi(u),f=+l-Xi(l);return Math.round((c-f)/ky)}function Py(r,e){const n=Wc(r,e),o=He(r,0);return o.setFullYear(n,0,4),o.setHours(0,0,0,0),_r(o)}function Ay(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function My(r){return!(!Ay(r)&&typeof r!="number"||isNaN(+Ue(r)))}function Dy(r,e,n){const[o,a]=zc(n?.in,r,e),u=Ql(o,a),l=Math.abs(qc(o,a));o.setDate(o.getDate()-u*l);const c=+(Ql(o,a)===-u),f=u*(l-c);return f===0?0:f}function Ql(r,e){const n=r.getFullYear()-e.getFullYear()||r.getMonth()-e.getMonth()||r.getDate()-e.getDate()||r.getHours()-e.getHours()||r.getMinutes()-e.getMinutes()||r.getSeconds()-e.getSeconds()||r.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function Oy(r,e){const n=Ue(r,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Fy={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ry=(r,e,n)=>{let o;const a=Fy[r];return typeof a=="string"?o=a:e===1?o=a.one:o=a.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+o:o+" ago":o};function xa(r){return(e={})=>{const n=e.width?String(e.width):r.defaultWidth;return r.formats[n]||r.formats[r.defaultWidth]}}const Ly={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},$y={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},By={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ny={date:xa({formats:Ly,defaultWidth:"full"}),time:xa({formats:$y,defaultWidth:"full"}),dateTime:xa({formats:By,defaultWidth:"full"})},Wy={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},zy=(r,e,n,o)=>Wy[r];function Nr(r){return(e,n)=>{const o=n?.context?String(n.context):"standalone";let a;if(o==="formatting"&&r.formattingValues){const l=r.defaultFormattingWidth||r.defaultWidth,c=n?.width?String(n.width):l;a=r.formattingValues[c]||r.formattingValues[l]}else{const l=r.defaultWidth,c=n?.width?String(n.width):r.defaultWidth;a=r.values[c]||r.values[l]}const u=r.argumentCallback?r.argumentCallback(e):e;return a[u]}}const qy={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Yy={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Hy={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Uy={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Gy={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Qy={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Vy=(r,e)=>{const n=Number(r),o=n%100;if(o>20||o<10)switch(o%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Xy={ordinalNumber:Vy,era:Nr({values:qy,defaultWidth:"wide"}),quarter:Nr({values:Yy,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Nr({values:Hy,defaultWidth:"wide"}),day:Nr({values:Uy,defaultWidth:"wide"}),dayPeriod:Nr({values:Gy,defaultWidth:"wide",formattingValues:Qy,defaultFormattingWidth:"wide"})};function Wr(r){return(e,n={})=>{const o=n.width,a=o&&r.matchPatterns[o]||r.matchPatterns[r.defaultMatchWidth],u=e.match(a);if(!u)return null;const l=u[0],c=o&&r.parsePatterns[o]||r.parsePatterns[r.defaultParseWidth],f=Array.isArray(c)?Ky(c,g=>g.test(l)):jy(c,g=>g.test(l));let h;h=r.valueCallback?r.valueCallback(f):f,h=n.valueCallback?n.valueCallback(h):h;const p=e.slice(l.length);return{value:h,rest:p}}}function jy(r,e){for(const n in r)if(Object.prototype.hasOwnProperty.call(r,n)&&e(r[n]))return n}function Ky(r,e){for(let n=0;n<r.length;n++)if(e(r[n]))return n}function Jy(r){return(e,n={})=>{const o=e.match(r.matchPattern);if(!o)return null;const a=o[0],u=e.match(r.parsePattern);if(!u)return null;let l=r.valueCallback?r.valueCallback(u[0]):u[0];l=n.valueCallback?n.valueCallback(l):l;const c=e.slice(a.length);return{value:l,rest:c}}}const Zy=/^(\d+)(th|st|nd|rd)?/i,ew=/\d+/i,tw={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},nw={any:[/^b/i,/^(a|c)/i]},rw={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},iw={any:[/1/i,/2/i,/3/i,/4/i]},ow={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},aw={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},sw={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},uw={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},lw={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},cw={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},fw={ordinalNumber:Jy({matchPattern:Zy,parsePattern:ew,valueCallback:r=>parseInt(r,10)}),era:Wr({matchPatterns:tw,defaultMatchWidth:"wide",parsePatterns:nw,defaultParseWidth:"any"}),quarter:Wr({matchPatterns:rw,defaultMatchWidth:"wide",parsePatterns:iw,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Wr({matchPatterns:ow,defaultMatchWidth:"wide",parsePatterns:aw,defaultParseWidth:"any"}),day:Wr({matchPatterns:sw,defaultMatchWidth:"wide",parsePatterns:uw,defaultParseWidth:"any"}),dayPeriod:Wr({matchPatterns:lw,defaultMatchWidth:"any",parsePatterns:cw,defaultParseWidth:"any"})},Yc={code:"en-US",formatDistance:Ry,formatLong:Ny,formatRelative:zy,localize:Xy,match:fw,options:{weekStartsOn:0,firstWeekContainsDate:1}};function hw(r,e){const n=Ue(r,e?.in);return qc(n,Oy(n))+1}function Hc(r,e){const n=Ue(r,e?.in),o=+_r(n)-+Py(n);return Math.round(o/Nc)+1}function ns(r,e){const n=Ue(r,e?.in),o=n.getFullYear(),a=kr(),u=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,l=He(e?.in||r,0);l.setFullYear(o+1,0,u),l.setHours(0,0,0,0);const c=Bn(l,e),f=He(e?.in||r,0);f.setFullYear(o,0,u),f.setHours(0,0,0,0);const h=Bn(f,e);return+n>=+c?o+1:+n>=+h?o:o-1}function dw(r,e){const n=kr(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,a=ns(r,e),u=He(e?.in||r,0);return u.setFullYear(a,0,o),u.setHours(0,0,0,0),Bn(u,e)}function Uc(r,e){const n=Ue(r,e?.in),o=+Bn(n,e)-+dw(n,e);return Math.round(o/Nc)+1}function ke(r,e){const n=r<0?"-":"",o=Math.abs(r).toString().padStart(e,"0");return n+o}const Rn={y(r,e){const n=r.getFullYear(),o=n>0?n:1-n;return ke(e==="yy"?o%100:o,e.length)},M(r,e){const n=r.getMonth();return e==="M"?String(n+1):ke(n+1,2)},d(r,e){return ke(r.getDate(),e.length)},a(r,e){const n=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(r,e){return ke(r.getHours()%12||12,e.length)},H(r,e){return ke(r.getHours(),e.length)},m(r,e){return ke(r.getMinutes(),e.length)},s(r,e){return ke(r.getSeconds(),e.length)},S(r,e){const n=e.length,o=r.getMilliseconds(),a=Math.trunc(o*Math.pow(10,n-3));return ke(a,e.length)}},br={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Vl={G:function(r,e,n){const o=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(o,{width:"abbreviated"});case"GGGGG":return n.era(o,{width:"narrow"});case"GGGG":default:return n.era(o,{width:"wide"})}},y:function(r,e,n){if(e==="yo"){const o=r.getFullYear(),a=o>0?o:1-o;return n.ordinalNumber(a,{unit:"year"})}return Rn.y(r,e)},Y:function(r,e,n,o){const a=ns(r,o),u=a>0?a:1-a;if(e==="YY"){const l=u%100;return ke(l,2)}return e==="Yo"?n.ordinalNumber(u,{unit:"year"}):ke(u,e.length)},R:function(r,e){const n=Wc(r);return ke(n,e.length)},u:function(r,e){const n=r.getFullYear();return ke(n,e.length)},Q:function(r,e,n){const o=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(o);case"QQ":return ke(o,2);case"Qo":return n.ordinalNumber(o,{unit:"quarter"});case"QQQ":return n.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(o,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(o,{width:"wide",context:"formatting"})}},q:function(r,e,n){const o=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(o);case"qq":return ke(o,2);case"qo":return n.ordinalNumber(o,{unit:"quarter"});case"qqq":return n.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(o,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(o,{width:"wide",context:"standalone"})}},M:function(r,e,n){const o=r.getMonth();switch(e){case"M":case"MM":return Rn.M(r,e);case"Mo":return n.ordinalNumber(o+1,{unit:"month"});case"MMM":return n.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(o,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(o,{width:"wide",context:"formatting"})}},L:function(r,e,n){const o=r.getMonth();switch(e){case"L":return String(o+1);case"LL":return ke(o+1,2);case"Lo":return n.ordinalNumber(o+1,{unit:"month"});case"LLL":return n.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(o,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(o,{width:"wide",context:"standalone"})}},w:function(r,e,n,o){const a=Uc(r,o);return e==="wo"?n.ordinalNumber(a,{unit:"week"}):ke(a,e.length)},I:function(r,e,n){const o=Hc(r);return e==="Io"?n.ordinalNumber(o,{unit:"week"}):ke(o,e.length)},d:function(r,e,n){return e==="do"?n.ordinalNumber(r.getDate(),{unit:"date"}):Rn.d(r,e)},D:function(r,e,n){const o=hw(r);return e==="Do"?n.ordinalNumber(o,{unit:"dayOfYear"}):ke(o,e.length)},E:function(r,e,n){const o=r.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(o,{width:"short",context:"formatting"});case"EEEE":default:return n.day(o,{width:"wide",context:"formatting"})}},e:function(r,e,n,o){const a=r.getDay(),u=(a-o.weekStartsOn+8)%7||7;switch(e){case"e":return String(u);case"ee":return ke(u,2);case"eo":return n.ordinalNumber(u,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(r,e,n,o){const a=r.getDay(),u=(a-o.weekStartsOn+8)%7||7;switch(e){case"c":return String(u);case"cc":return ke(u,e.length);case"co":return n.ordinalNumber(u,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(r,e,n){const o=r.getDay(),a=o===0?7:o;switch(e){case"i":return String(a);case"ii":return ke(a,e.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(o,{width:"short",context:"formatting"});case"iiii":default:return n.day(o,{width:"wide",context:"formatting"})}},a:function(r,e,n){const a=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(r,e,n){const o=r.getHours();let a;switch(o===12?a=br.noon:o===0?a=br.midnight:a=o/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(r,e,n){const o=r.getHours();let a;switch(o>=17?a=br.evening:o>=12?a=br.afternoon:o>=4?a=br.morning:a=br.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(r,e,n){if(e==="ho"){let o=r.getHours()%12;return o===0&&(o=12),n.ordinalNumber(o,{unit:"hour"})}return Rn.h(r,e)},H:function(r,e,n){return e==="Ho"?n.ordinalNumber(r.getHours(),{unit:"hour"}):Rn.H(r,e)},K:function(r,e,n){const o=r.getHours()%12;return e==="Ko"?n.ordinalNumber(o,{unit:"hour"}):ke(o,e.length)},k:function(r,e,n){let o=r.getHours();return o===0&&(o=24),e==="ko"?n.ordinalNumber(o,{unit:"hour"}):ke(o,e.length)},m:function(r,e,n){return e==="mo"?n.ordinalNumber(r.getMinutes(),{unit:"minute"}):Rn.m(r,e)},s:function(r,e,n){return e==="so"?n.ordinalNumber(r.getSeconds(),{unit:"second"}):Rn.s(r,e)},S:function(r,e){return Rn.S(r,e)},X:function(r,e,n){const o=r.getTimezoneOffset();if(o===0)return"Z";switch(e){case"X":return jl(o);case"XXXX":case"XX":return tr(o);case"XXXXX":case"XXX":default:return tr(o,":")}},x:function(r,e,n){const o=r.getTimezoneOffset();switch(e){case"x":return jl(o);case"xxxx":case"xx":return tr(o);case"xxxxx":case"xxx":default:return tr(o,":")}},O:function(r,e,n){const o=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Xl(o,":");case"OOOO":default:return"GMT"+tr(o,":")}},z:function(r,e,n){const o=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Xl(o,":");case"zzzz":default:return"GMT"+tr(o,":")}},t:function(r,e,n){const o=Math.trunc(+r/1e3);return ke(o,e.length)},T:function(r,e,n){return ke(+r,e.length)}};function Xl(r,e=""){const n=r>0?"-":"+",o=Math.abs(r),a=Math.trunc(o/60),u=o%60;return u===0?n+String(a):n+String(a)+e+ke(u,2)}function jl(r,e){return r%60===0?(r>0?"-":"+")+ke(Math.abs(r)/60,2):tr(r,e)}function tr(r,e=""){const n=r>0?"-":"+",o=Math.abs(r),a=ke(Math.trunc(o/60),2),u=ke(o%60,2);return n+a+e+u}const Kl=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Gc=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},pw=(r,e)=>{const n=r.match(/(P+)(p+)?/)||[],o=n[1],a=n[2];if(!a)return Kl(r,e);let u;switch(o){case"P":u=e.dateTime({width:"short"});break;case"PP":u=e.dateTime({width:"medium"});break;case"PPP":u=e.dateTime({width:"long"});break;case"PPPP":default:u=e.dateTime({width:"full"});break}return u.replace("{{date}}",Kl(o,e)).replace("{{time}}",Gc(a,e))},Wa={p:Gc,P:pw},gw=/^D+$/,mw=/^Y+$/,yw=["D","DD","YY","YYYY"];function Qc(r){return gw.test(r)}function Vc(r){return mw.test(r)}function za(r,e,n){const o=ww(r,e,n);if(console.warn(o),yw.includes(r))throw new RangeError(o)}function ww(r,e,n){const o=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${o} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const bw=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,xw=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,vw=/^'([^]*?)'?$/,_w=/''/g,kw=/[a-zA-Z]/;function _n(r,e,n){const o=kr(),a=o.locale??Yc,u=o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,l=o.weekStartsOn??o.locale?.options?.weekStartsOn??0,c=Ue(r,n?.in);if(!My(c))throw new RangeError("Invalid time value");let f=e.match(xw).map(p=>{const g=p[0];if(g==="p"||g==="P"){const w=Wa[g];return w(p,a.formatLong)}return p}).join("").match(bw).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const g=p[0];if(g==="'")return{isToken:!1,value:Iw(p)};if(Vl[g])return{isToken:!0,value:p};if(g.match(kw))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:p}});a.localize.preprocessor&&(f=a.localize.preprocessor(c,f));const h={firstWeekContainsDate:u,weekStartsOn:l,locale:a};return f.map(p=>{if(!p.isToken)return p.value;const g=p.value;(Vc(g)||Qc(g))&&za(g,e,String(r));const w=Vl[g[0]];return w(c,g,a.localize,h)}).join("")}function Iw(r){const e=r.match(vw);return e?e[1].replace(_w,"'"):r}function Sw(){return Object.assign({},kr())}function Cw(r,e){const n=Ue(r,e?.in).getDay();return n===0?7:n}function Tw(r,e){const n=Ew(e)?new e(0):He(e,0);return n.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()),n.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),n}function Ew(r){return typeof r=="function"&&r.prototype?.constructor===r}const Pw=10;class Xc{subPriority=0;validate(e,n){return!0}}class Aw extends Xc{constructor(e,n,o,a,u){super(),this.value=e,this.validateValue=n,this.setValue=o,this.priority=a,u&&(this.subPriority=u)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,o){return this.setValue(e,n,this.value,o)}}class Mw extends Xc{priority=Pw;subPriority=-1;constructor(e,n){super(),this.context=e||(o=>He(n,o))}set(e,n){return n.timestampIsSet?e:He(e,Tw(e,this.context))}}class be{run(e,n,o,a){const u=this.parse(e,n,o,a);return u?{setter:new Aw(u.value,this.validate,this.set,this.priority,this.subPriority),rest:u.rest}:null}validate(e,n,o){return!0}}class Dw extends be{priority=140;parse(e,n,o){switch(n){case"G":case"GG":case"GGG":return o.era(e,{width:"abbreviated"})||o.era(e,{width:"narrow"});case"GGGGG":return o.era(e,{width:"narrow"});case"GGGG":default:return o.era(e,{width:"wide"})||o.era(e,{width:"abbreviated"})||o.era(e,{width:"narrow"})}}set(e,n,o){return n.era=o,e.setFullYear(o,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const ze={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},rn={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function qe(r,e){return r&&{value:e(r.value),rest:r.rest}}function Oe(r,e){const n=e.match(r);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function on(r,e){const n=e.match(r);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const o=n[1]==="+"?1:-1,a=n[2]?parseInt(n[2],10):0,u=n[3]?parseInt(n[3],10):0,l=n[5]?parseInt(n[5],10):0;return{value:o*(a*Sy+u*Iy+l*Cy),rest:e.slice(n[0].length)}}function jc(r){return Oe(ze.anyDigitsSigned,r)}function Be(r,e){switch(r){case 1:return Oe(ze.singleDigit,e);case 2:return Oe(ze.twoDigits,e);case 3:return Oe(ze.threeDigits,e);case 4:return Oe(ze.fourDigits,e);default:return Oe(new RegExp("^\\d{1,"+r+"}"),e)}}function ji(r,e){switch(r){case 1:return Oe(ze.singleDigitSigned,e);case 2:return Oe(ze.twoDigitsSigned,e);case 3:return Oe(ze.threeDigitsSigned,e);case 4:return Oe(ze.fourDigitsSigned,e);default:return Oe(new RegExp("^-?\\d{1,"+r+"}"),e)}}function rs(r){switch(r){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Kc(r,e){const n=e>0,o=n?e:1-e;let a;if(o<=50)a=r||100;else{const u=o+50,l=Math.trunc(u/100)*100,c=r>=u%100;a=r+l-(c?100:0)}return n?a:1-a}function Jc(r){return r%400===0||r%4===0&&r%100!==0}class Ow extends be{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,n,o){const a=u=>({year:u,isTwoDigitYear:n==="yy"});switch(n){case"y":return qe(Be(4,e),a);case"yo":return qe(o.ordinalNumber(e,{unit:"year"}),a);default:return qe(Be(n.length,e),a)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,o){const a=e.getFullYear();if(o.isTwoDigitYear){const l=Kc(o.year,a);return e.setFullYear(l,0,1),e.setHours(0,0,0,0),e}const u=!("era"in n)||n.era===1?o.year:1-o.year;return e.setFullYear(u,0,1),e.setHours(0,0,0,0),e}}class Fw extends be{priority=130;parse(e,n,o){const a=u=>({year:u,isTwoDigitYear:n==="YY"});switch(n){case"Y":return qe(Be(4,e),a);case"Yo":return qe(o.ordinalNumber(e,{unit:"year"}),a);default:return qe(Be(n.length,e),a)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,o,a){const u=ns(e,a);if(o.isTwoDigitYear){const c=Kc(o.year,u);return e.setFullYear(c,0,a.firstWeekContainsDate),e.setHours(0,0,0,0),Bn(e,a)}const l=!("era"in n)||n.era===1?o.year:1-o.year;return e.setFullYear(l,0,a.firstWeekContainsDate),e.setHours(0,0,0,0),Bn(e,a)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class Rw extends be{priority=130;parse(e,n){return ji(n==="R"?4:n.length,e)}set(e,n,o){const a=He(e,0);return a.setFullYear(o,0,4),a.setHours(0,0,0,0),_r(a)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class Lw extends be{priority=130;parse(e,n){return ji(n==="u"?4:n.length,e)}set(e,n,o){return e.setFullYear(o,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class $w extends be{priority=120;parse(e,n,o){switch(n){case"Q":case"QQ":return Be(n.length,e);case"Qo":return o.ordinalNumber(e,{unit:"quarter"});case"QQQ":return o.quarter(e,{width:"abbreviated",context:"formatting"})||o.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(e,{width:"wide",context:"formatting"})||o.quarter(e,{width:"abbreviated",context:"formatting"})||o.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=1&&n<=4}set(e,n,o){return e.setMonth((o-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class Bw extends be{priority=120;parse(e,n,o){switch(n){case"q":case"qq":return Be(n.length,e);case"qo":return o.ordinalNumber(e,{unit:"quarter"});case"qqq":return o.quarter(e,{width:"abbreviated",context:"standalone"})||o.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(e,{width:"wide",context:"standalone"})||o.quarter(e,{width:"abbreviated",context:"standalone"})||o.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=1&&n<=4}set(e,n,o){return e.setMonth((o-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class Nw extends be{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,n,o){const a=u=>u-1;switch(n){case"M":return qe(Oe(ze.month,e),a);case"MM":return qe(Be(2,e),a);case"Mo":return qe(o.ordinalNumber(e,{unit:"month"}),a);case"MMM":return o.month(e,{width:"abbreviated",context:"formatting"})||o.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(e,{width:"wide",context:"formatting"})||o.month(e,{width:"abbreviated",context:"formatting"})||o.month(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=11}set(e,n,o){return e.setMonth(o,1),e.setHours(0,0,0,0),e}}class Ww extends be{priority=110;parse(e,n,o){const a=u=>u-1;switch(n){case"L":return qe(Oe(ze.month,e),a);case"LL":return qe(Be(2,e),a);case"Lo":return qe(o.ordinalNumber(e,{unit:"month"}),a);case"LLL":return o.month(e,{width:"abbreviated",context:"standalone"})||o.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(e,{width:"wide",context:"standalone"})||o.month(e,{width:"abbreviated",context:"standalone"})||o.month(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=11}set(e,n,o){return e.setMonth(o,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function zw(r,e,n){const o=Ue(r,n?.in),a=Uc(o,n)-e;return o.setDate(o.getDate()-a*7),Ue(o,n?.in)}class qw extends be{priority=100;parse(e,n,o){switch(n){case"w":return Oe(ze.week,e);case"wo":return o.ordinalNumber(e,{unit:"week"});default:return Be(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,o,a){return Bn(zw(e,o,a),a)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function Yw(r,e,n){const o=Ue(r,n?.in),a=Hc(o,n)-e;return o.setDate(o.getDate()-a*7),o}class Hw extends be{priority=100;parse(e,n,o){switch(n){case"I":return Oe(ze.week,e);case"Io":return o.ordinalNumber(e,{unit:"week"});default:return Be(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,o){return _r(Yw(e,o))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const Uw=[31,28,31,30,31,30,31,31,30,31,30,31],Gw=[31,29,31,30,31,30,31,31,30,31,30,31];class Qw extends be{priority=90;subPriority=1;parse(e,n,o){switch(n){case"d":return Oe(ze.date,e);case"do":return o.ordinalNumber(e,{unit:"date"});default:return Be(n.length,e)}}validate(e,n){const o=e.getFullYear(),a=Jc(o),u=e.getMonth();return a?n>=1&&n<=Gw[u]:n>=1&&n<=Uw[u]}set(e,n,o){return e.setDate(o),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class Vw extends be{priority=90;subpriority=1;parse(e,n,o){switch(n){case"D":case"DD":return Oe(ze.dayOfYear,e);case"Do":return o.ordinalNumber(e,{unit:"date"});default:return Be(n.length,e)}}validate(e,n){const o=e.getFullYear();return Jc(o)?n>=1&&n<=366:n>=1&&n<=365}set(e,n,o){return e.setMonth(0,o),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function is(r,e,n){const o=kr(),a=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??o.weekStartsOn??o.locale?.options?.weekStartsOn??0,u=Ue(r,n?.in),l=u.getDay(),f=(e%7+7)%7,h=7-a,p=e<0||e>6?e-(l+h)%7:(f+h)%7-(l+h)%7;return ts(u,p,n)}class Xw extends be{priority=90;parse(e,n,o){switch(n){case"E":case"EE":case"EEE":return o.day(e,{width:"abbreviated",context:"formatting"})||o.day(e,{width:"short",context:"formatting"})||o.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(e,{width:"short",context:"formatting"})||o.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return o.day(e,{width:"wide",context:"formatting"})||o.day(e,{width:"abbreviated",context:"formatting"})||o.day(e,{width:"short",context:"formatting"})||o.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,o,a){return e=is(e,o,a),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class jw extends be{priority=90;parse(e,n,o,a){const u=l=>{const c=Math.floor((l-1)/7)*7;return(l+a.weekStartsOn+6)%7+c};switch(n){case"e":case"ee":return qe(Be(n.length,e),u);case"eo":return qe(o.ordinalNumber(e,{unit:"day"}),u);case"eee":return o.day(e,{width:"abbreviated",context:"formatting"})||o.day(e,{width:"short",context:"formatting"})||o.day(e,{width:"narrow",context:"formatting"});case"eeeee":return o.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(e,{width:"short",context:"formatting"})||o.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return o.day(e,{width:"wide",context:"formatting"})||o.day(e,{width:"abbreviated",context:"formatting"})||o.day(e,{width:"short",context:"formatting"})||o.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,o,a){return e=is(e,o,a),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class Kw extends be{priority=90;parse(e,n,o,a){const u=l=>{const c=Math.floor((l-1)/7)*7;return(l+a.weekStartsOn+6)%7+c};switch(n){case"c":case"cc":return qe(Be(n.length,e),u);case"co":return qe(o.ordinalNumber(e,{unit:"day"}),u);case"ccc":return o.day(e,{width:"abbreviated",context:"standalone"})||o.day(e,{width:"short",context:"standalone"})||o.day(e,{width:"narrow",context:"standalone"});case"ccccc":return o.day(e,{width:"narrow",context:"standalone"});case"cccccc":return o.day(e,{width:"short",context:"standalone"})||o.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return o.day(e,{width:"wide",context:"standalone"})||o.day(e,{width:"abbreviated",context:"standalone"})||o.day(e,{width:"short",context:"standalone"})||o.day(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=6}set(e,n,o,a){return e=is(e,o,a),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function Jw(r,e,n){const o=Ue(r,n?.in),a=Cw(o,n),u=e-a;return ts(o,u,n)}class Zw extends be{priority=90;parse(e,n,o){const a=u=>u===0?7:u;switch(n){case"i":case"ii":return Be(n.length,e);case"io":return o.ordinalNumber(e,{unit:"day"});case"iii":return qe(o.day(e,{width:"abbreviated",context:"formatting"})||o.day(e,{width:"short",context:"formatting"})||o.day(e,{width:"narrow",context:"formatting"}),a);case"iiiii":return qe(o.day(e,{width:"narrow",context:"formatting"}),a);case"iiiiii":return qe(o.day(e,{width:"short",context:"formatting"})||o.day(e,{width:"narrow",context:"formatting"}),a);case"iiii":default:return qe(o.day(e,{width:"wide",context:"formatting"})||o.day(e,{width:"abbreviated",context:"formatting"})||o.day(e,{width:"short",context:"formatting"})||o.day(e,{width:"narrow",context:"formatting"}),a)}}validate(e,n){return n>=1&&n<=7}set(e,n,o){return e=Jw(e,o),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class eb extends be{priority=80;parse(e,n,o){switch(n){case"a":case"aa":case"aaa":return o.dayPeriod(e,{width:"abbreviated",context:"formatting"})||o.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(e,{width:"wide",context:"formatting"})||o.dayPeriod(e,{width:"abbreviated",context:"formatting"})||o.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,o){return e.setHours(rs(o),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class tb extends be{priority=80;parse(e,n,o){switch(n){case"b":case"bb":case"bbb":return o.dayPeriod(e,{width:"abbreviated",context:"formatting"})||o.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(e,{width:"wide",context:"formatting"})||o.dayPeriod(e,{width:"abbreviated",context:"formatting"})||o.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,o){return e.setHours(rs(o),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class nb extends be{priority=80;parse(e,n,o){switch(n){case"B":case"BB":case"BBB":return o.dayPeriod(e,{width:"abbreviated",context:"formatting"})||o.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(e,{width:"wide",context:"formatting"})||o.dayPeriod(e,{width:"abbreviated",context:"formatting"})||o.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,o){return e.setHours(rs(o),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class rb extends be{priority=70;parse(e,n,o){switch(n){case"h":return Oe(ze.hour12h,e);case"ho":return o.ordinalNumber(e,{unit:"hour"});default:return Be(n.length,e)}}validate(e,n){return n>=1&&n<=12}set(e,n,o){const a=e.getHours()>=12;return a&&o<12?e.setHours(o+12,0,0,0):!a&&o===12?e.setHours(0,0,0,0):e.setHours(o,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class ib extends be{priority=70;parse(e,n,o){switch(n){case"H":return Oe(ze.hour23h,e);case"Ho":return o.ordinalNumber(e,{unit:"hour"});default:return Be(n.length,e)}}validate(e,n){return n>=0&&n<=23}set(e,n,o){return e.setHours(o,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class ob extends be{priority=70;parse(e,n,o){switch(n){case"K":return Oe(ze.hour11h,e);case"Ko":return o.ordinalNumber(e,{unit:"hour"});default:return Be(n.length,e)}}validate(e,n){return n>=0&&n<=11}set(e,n,o){return e.getHours()>=12&&o<12?e.setHours(o+12,0,0,0):e.setHours(o,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class ab extends be{priority=70;parse(e,n,o){switch(n){case"k":return Oe(ze.hour24h,e);case"ko":return o.ordinalNumber(e,{unit:"hour"});default:return Be(n.length,e)}}validate(e,n){return n>=1&&n<=24}set(e,n,o){const a=o<=24?o%24:o;return e.setHours(a,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class sb extends be{priority=60;parse(e,n,o){switch(n){case"m":return Oe(ze.minute,e);case"mo":return o.ordinalNumber(e,{unit:"minute"});default:return Be(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,o){return e.setMinutes(o,0,0),e}incompatibleTokens=["t","T"]}class ub extends be{priority=50;parse(e,n,o){switch(n){case"s":return Oe(ze.second,e);case"so":return o.ordinalNumber(e,{unit:"second"});default:return Be(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,o){return e.setSeconds(o,0),e}incompatibleTokens=["t","T"]}class lb extends be{priority=30;parse(e,n){const o=a=>Math.trunc(a*Math.pow(10,-n.length+3));return qe(Be(n.length,e),o)}set(e,n,o){return e.setMilliseconds(o),e}incompatibleTokens=["t","T"]}class cb extends be{priority=10;parse(e,n){switch(n){case"X":return on(rn.basicOptionalMinutes,e);case"XX":return on(rn.basic,e);case"XXXX":return on(rn.basicOptionalSeconds,e);case"XXXXX":return on(rn.extendedOptionalSeconds,e);case"XXX":default:return on(rn.extended,e)}}set(e,n,o){return n.timestampIsSet?e:He(e,e.getTime()-Xi(e)-o)}incompatibleTokens=["t","T","x"]}class fb extends be{priority=10;parse(e,n){switch(n){case"x":return on(rn.basicOptionalMinutes,e);case"xx":return on(rn.basic,e);case"xxxx":return on(rn.basicOptionalSeconds,e);case"xxxxx":return on(rn.extendedOptionalSeconds,e);case"xxx":default:return on(rn.extended,e)}}set(e,n,o){return n.timestampIsSet?e:He(e,e.getTime()-Xi(e)-o)}incompatibleTokens=["t","T","X"]}class hb extends be{priority=40;parse(e){return jc(e)}set(e,n,o){return[He(e,o*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class db extends be{priority=20;parse(e){return jc(e)}set(e,n,o){return[He(e,o),{timestampIsSet:!0}]}incompatibleTokens="*"}const pb={G:new Dw,y:new Ow,Y:new Fw,R:new Rw,u:new Lw,Q:new $w,q:new Bw,M:new Nw,L:new Ww,w:new qw,I:new Hw,d:new Qw,D:new Vw,E:new Xw,e:new jw,c:new Kw,i:new Zw,a:new eb,b:new tb,B:new nb,h:new rb,H:new ib,K:new ob,k:new ab,m:new sb,s:new ub,S:new lb,X:new cb,x:new fb,t:new hb,T:new db},gb=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,mb=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yb=/^'([^]*?)'?$/,wb=/''/g,bb=/\S/,xb=/[a-zA-Z]/;function vb(r,e,n,o){const a=()=>He(n,NaN),u=Sw(),l=u.locale??Yc,c=u.firstWeekContainsDate??u.locale?.options?.firstWeekContainsDate??1,f=u.weekStartsOn??u.locale?.options?.weekStartsOn??0,h={firstWeekContainsDate:c,weekStartsOn:f,locale:l},p=[new Mw(o?.in,n)],g=e.match(mb).map(D=>{const A=D[0];if(A in Wa){const N=Wa[A];return N(D,l.formatLong)}return D}).join("").match(gb),w=[];for(let D of g){Vc(D)&&za(D,e,r),Qc(D)&&za(D,e,r);const A=D[0],N=pb[A];if(N){const{incompatibleTokens:z}=N;if(Array.isArray(z)){const O=w.find(P=>z.includes(P.token)||P.token===A);if(O)throw new RangeError(`The format string mustn't contain \`${O.fullToken}\` and \`${D}\` at the same time`)}else if(N.incompatibleTokens==="*"&&w.length>0)throw new RangeError(`The format string mustn't contain \`${D}\` and any other token at the same time`);w.push({token:A,fullToken:D});const W=N.run(r,D,l.match,h);if(!W)return a();p.push(W.setter),r=W.rest}else{if(A.match(xb))throw new RangeError("Format string contains an unescaped latin alphabet character `"+A+"`");if(D==="''"?D="'":A==="'"&&(D=_b(D)),r.indexOf(D)===0)r=r.slice(D.length);else return a()}}if(r.length>0&&bb.test(r))return a();const y=p.map(D=>D.priority).sort((D,A)=>A-D).filter((D,A,N)=>N.indexOf(D)===A).map(D=>p.filter(A=>A.priority===D).sort((A,N)=>N.subPriority-A.subPriority)).map(D=>D[0]);let S=Ue(n,o?.in);if(isNaN(+S))return a();const E={};for(const D of y){if(!D.validate(S,h))return a();const A=D.set(S,E,h);Array.isArray(A)?(S=A[0],Object.assign(E,A[1])):S=A}return S}function _b(r){return r.match(yb)[1].replace(wb,"'")}function Zc(r,e,n){return ts(r,-e,n)}function kb(r,e,n){return Ty(r,-6,n)}const ef={almostDailyReport:{folder:"l1almostDailyReport",name:"Daily Report"},"10daysReport":{folder:"l2tenL1ReportsReview",name:"10 Days Review"},"30daysReport":{folder:"l3ThreeL2Review",name:"30 Days Review"},"150daysReport":{folder:"l4FiveL3Review",name:"150 Days Review"}},nr={ALMOST_DAILY:"almostDailyReport",TEN_DAYS:"10daysReport",THIRTY_DAYS:"30daysReport",ONE_FIFTY_DAYS:"150daysReport"},nn={component:"mdc-component",input:"mdc-input",hiddenValue:"mdc-hidden-value",reportMetadata:"mdc-report-metadata"};class Ib{constructor(){this.logger=un(ln.TagsService),this.component={start:e=>{const n={componentId:e};return this.logger.dev("Component start",n),`<span class="$${nn.component} start" data-meta='${JSON.stringify(n)}' style="display:none"></span>`},end:e=>{const n={componentId:e};return this.logger.dev("Component end",n),`<span class="$${nn.component} end" data-meta='${JSON.stringify(n)}' style="display:none"></span>`},wrap:(e,n,o=!0)=>{const a=o?`
${n}
`:n;return this.logger.dev("Component wrap",{componentId:e,content:n}),this.component.start(e)+a+this.component.end(e)}},this.input={start:(e,n,o,a)=>{const u={componentId:e,inputId:n,inputType:o,technicalPrefix:a};return this.logger.dev("Input start",u),`<span class="$${nn.input}" data-meta='${JSON.stringify(u)}' style="display:none"></span>`},end:(e,n,o,a)=>{const u={componentId:e,inputId:n,inputType:o,technicalPrefix:a};return this.logger.dev("Input end",u),`<span class="$${nn.input} end" data-meta='${JSON.stringify(u)}' style="display:none"></span>`},wrap:e=>{const{componentId:n,inputId:o,inputType:a,content:u,withNewLines:l=!0,technicalPrefix:c}=e,f=l?`
${u}
`:u;return this.logger.dev("Input wrap",{componentId:n,inputId:o,content:u}),this.input.start(n,o,a,c)+f+this.input.end(n,o,a,c)}},this.hiddenValue=(e,n,o)=>{const a={componentId:e,inputId:n,value:o};return this.logger.dev("Hidden value set",a),`<span class="$${nn.hiddenValue}" data-meta='${JSON.stringify(a)}' style="display:none"></span>`},this.reportMetadata={wrap:e=>`<span class="$${nn.reportMetadata}" data-meta='${e}' style="display:none"></span>`}}}const Ki=new Ib,Ze=un(ln.SavingService),Gr={get baseOutput(){return`${st?.projectDir??"vault"}/${st?.outputDir??"outputs"}`},get fileExtension(){return st?.reportFileExtension??".md"},get reportFolders(){const r={};for(const[e,{folder:n}]of Object.entries(ef))r[e]=`${this.baseOutput}/${n}`;return r},_today(){return _n(new Date,"yyyyMMdd")},_getFormattedDate(){return _n(new Date,"dd.MM.yyyy")},_getDaysRemainingInYear(){const r=new Date,n=new Date(r.getFullYear(),11,31).getTime()-r.getTime(),o=Math.ceil(n/(1e3*60*60*24));return String(o).padStart(3,"0")},async _ensureFolder(r){ge.vault.getAbstractFileByPath(r)||(Ze.dev(`Creating folder: ${r}`),await ge.vault.createFolder(r))},async _listFiles(r){await this._ensureFolder(r);const e=ge.vault.getAbstractFileByPath(r);return!e||!e.children?[]:e.children.filter(n=>"extension"in n&&n.extension==="md").map(n=>n.name)},async _openFile(r){try{Ze.dev(`_openFile start: ${r.path}`);const e=ge.workspace.getLeaf(!0);if(await e.openFile(r),Ze.dev(`Main leaf opened file: ${r.path}`),st?.devMode){const n=ge.workspace.createLeafBySplit(e,"vertical",!1);await n.openFile(r);const o={type:"markdown",state:{file:r.path,mode:"source"}};try{await n.setViewState(o),Ze.dev("DevMode: right leaf forced to source mode")}catch(a){Ze.warn(`Failed to force right leaf to source mode: ${a.message}`)}}}catch(e){Ze.error(`Failed to open file ${r.path}: ${e.message}`)}},async write(r){let e=r.data??r.content;if(!e)throw new Error("No content provided for write()");const n=this.reportFolders[r.type];if(!n)throw new Error(`Unknown report type: ${r.type}`);await this._ensureFolder(n);const o=this._getDaysRemainingInYear(),a=this._getFormattedDate(),l=(await this._listFiles(n)).length+1,c=String(l).padStart(5,"0"),f=`${o}-${a}-${c}-${r.type}${this.fileExtension}`,h=`${n}/${f}`;if(ge.vault.getAbstractFileByPath(h))return Ze.warn(`File already exists: ${h}. Skipping write.`),h;const w=_n(new Date,"yyyy-MM-dd"),y=c,S={reportType:r.type,reportDate:w,reportNumber:y};Ze.info("[SavingService] Generated metadata",{metadata:S});const E=Ki.reportMetadata.wrap(JSON.stringify(S));Ze.info("[SavingService] Metadata tag created",{tagLength:E.length}),Ze.dev(`[SavingService] Metadata tag content: ${E.substring(0,300)}`),e=E+`

`+e,Ze.info(`[SavingService] Content length after adding metadata: ${e.length}`),Ze.info(`Writing new file: ${h}`);const D=await ge.vault.create(h,e);return r?.open!==!1&&await this._openFile(D),h},async writeGeneral(r,e,n=!1){let o;const a=ge.vault.getAbstractFileByPath(r);if(a)if("extension"in a)Ze.info(`Overwriting existing file: ${r}`),await ge.vault.modify(a,e),o=a;else throw Ze.error(`Path exists but is not a file: ${r}`),new Error(`Path exists but is not a file: ${r}`);else Ze.info(`Creating new file: ${r}`),o=await ge.vault.create(r,e);return n&&await this._openFile(o),r},async delete(r){const e=ge.vault.getAbstractFileByPath(r);e?(Ze.info(`Deleting file: ${r}`),await ge.vault.delete(e)):Ze.warn(`Cannot delete; file not found: ${r}`)}};function Jl(r){if(r)throw r}var va,Zl;function Sb(){if(Zl)return va;Zl=1;var r=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=function(h){return typeof Array.isArray=="function"?Array.isArray(h):e.call(h)==="[object Array]"},u=function(h){if(!h||e.call(h)!=="[object Object]")return!1;var p=r.call(h,"constructor"),g=h.constructor&&h.constructor.prototype&&r.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!p&&!g)return!1;var w;for(w in h);return typeof w>"u"||r.call(h,w)},l=function(h,p){n&&p.name==="__proto__"?n(h,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):h[p.name]=p.newValue},c=function(h,p){if(p==="__proto__")if(r.call(h,p)){if(o)return o(h,p).value}else return;return h[p]};return va=function f(){var h,p,g,w,y,S,E=arguments[0],D=1,A=arguments.length,N=!1;for(typeof E=="boolean"&&(N=E,E=arguments[1]||{},D=2),(E==null||typeof E!="object"&&typeof E!="function")&&(E={});D<A;++D)if(h=arguments[D],h!=null)for(p in h)g=c(E,p),w=c(h,p),E!==w&&(N&&w&&(u(w)||(y=a(w)))?(y?(y=!1,S=g&&a(g)?g:[]):S=g&&u(g)?g:{},l(E,{name:p,newValue:f(N,S,w)})):typeof w<"u"&&l(E,{name:p,newValue:w}));return E},va}var Cb=Sb();const _a=Bc(Cb);function qa(r){if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)}function Tb(){const r=[],e={run:n,use:o};return e;function n(...a){let u=-1;const l=a.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);c(null,...a);function c(f,...h){const p=r[++u];let g=-1;if(f){l(f);return}for(;++g<a.length;)(h[g]===null||h[g]===void 0)&&(h[g]=a[g]);a=h,p?Eb(p,c)(...h):l(null,...h)}}function o(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return r.push(a),e}}function Eb(r,e){let n;return o;function o(...l){const c=r.length>l.length;let f;c&&l.push(a);try{f=r.apply(this,l)}catch(h){const p=h;if(c&&n)throw p;return a(p)}c||(f&&f.then&&typeof f.then=="function"?f.then(u,a):f instanceof Error?a(f):u(f))}function a(l,...c){n||(n=!0,e(l,...c))}function u(l){a(null,l)}}function Hr(r){return!r||typeof r!="object"?"":"position"in r||"type"in r?ec(r.position):"start"in r||"end"in r?ec(r):"line"in r||"column"in r?Ya(r):""}function Ya(r){return tc(r&&r.line)+":"+tc(r&&r.column)}function ec(r){return Ya(r&&r.start)+"-"+Ya(r&&r.end)}function tc(r){return r&&typeof r=="number"?r:1}class yt extends Error{constructor(e,n,o){super(),typeof n=="string"&&(o=n,n=void 0);let a="",u={},l=!1;if(n&&("line"in n&&"column"in n?u={place:n}:"start"in n&&"end"in n?u={place:n}:"type"in n?u={ancestors:[n],place:n.position}:u={...n}),typeof e=="string"?a=e:!u.cause&&e&&(l=!0,a=e.message,u.cause=e),!u.ruleId&&!u.source&&typeof o=="string"){const f=o.indexOf(":");f===-1?u.ruleId=o:(u.source=o.slice(0,f),u.ruleId=o.slice(f+1))}if(!u.place&&u.ancestors&&u.ancestors){const f=u.ancestors[u.ancestors.length-1];f&&(u.place=f.position)}const c=u.place&&"start"in u.place?u.place.start:u.place;this.ancestors=u.ancestors||void 0,this.cause=u.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=c?c.line:void 0,this.name=Hr(u.place)||"1:1",this.place=u.place||void 0,this.reason=this.message,this.ruleId=u.ruleId||void 0,this.source=u.source||void 0,this.stack=l&&u.cause&&typeof u.cause.stack=="string"?u.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}yt.prototype.file="";yt.prototype.name="";yt.prototype.reason="";yt.prototype.message="";yt.prototype.stack="";yt.prototype.column=void 0;yt.prototype.line=void 0;yt.prototype.ancestors=void 0;yt.prototype.cause=void 0;yt.prototype.fatal=void 0;yt.prototype.place=void 0;yt.prototype.ruleId=void 0;yt.prototype.source=void 0;const tn={basename:Pb,dirname:Ab,extname:Mb,join:Db,sep:"/"};function Pb(r,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Vr(r);let n=0,o=-1,a=r.length,u;if(e===void 0||e.length===0||e.length>r.length){for(;a--;)if(r.codePointAt(a)===47){if(u){n=a+1;break}}else o<0&&(u=!0,o=a+1);return o<0?"":r.slice(n,o)}if(e===r)return"";let l=-1,c=e.length-1;for(;a--;)if(r.codePointAt(a)===47){if(u){n=a+1;break}}else l<0&&(u=!0,l=a+1),c>-1&&(r.codePointAt(a)===e.codePointAt(c--)?c<0&&(o=a):(c=-1,o=l));return n===o?o=l:o<0&&(o=r.length),r.slice(n,o)}function Ab(r){if(Vr(r),r.length===0)return".";let e=-1,n=r.length,o;for(;--n;)if(r.codePointAt(n)===47){if(o){e=n;break}}else o||(o=!0);return e<0?r.codePointAt(0)===47?"/":".":e===1&&r.codePointAt(0)===47?"//":r.slice(0,e)}function Mb(r){Vr(r);let e=r.length,n=-1,o=0,a=-1,u=0,l;for(;e--;){const c=r.codePointAt(e);if(c===47){if(l){o=e+1;break}continue}n<0&&(l=!0,n=e+1),c===46?a<0?a=e:u!==1&&(u=1):a>-1&&(u=-1)}return a<0||n<0||u===0||u===1&&a===n-1&&a===o+1?"":r.slice(a,n)}function Db(...r){let e=-1,n;for(;++e<r.length;)Vr(r[e]),r[e]&&(n=n===void 0?r[e]:n+"/"+r[e]);return n===void 0?".":Ob(n)}function Ob(r){Vr(r);const e=r.codePointAt(0)===47;let n=Fb(r,!e);return n.length===0&&!e&&(n="."),n.length>0&&r.codePointAt(r.length-1)===47&&(n+="/"),e?"/"+n:n}function Fb(r,e){let n="",o=0,a=-1,u=0,l=-1,c,f;for(;++l<=r.length;){if(l<r.length)c=r.codePointAt(l);else{if(c===47)break;c=47}if(c===47){if(!(a===l-1||u===1))if(a!==l-1&&u===2){if(n.length<2||o!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",o=0):(n=n.slice(0,f),o=n.length-1-n.lastIndexOf("/")),a=l,u=0;continue}}else if(n.length>0){n="",o=0,a=l,u=0;continue}}e&&(n=n.length>0?n+"/..":"..",o=2)}else n.length>0?n+="/"+r.slice(a+1,l):n=r.slice(a+1,l),o=l-a-1;a=l,u=0}else c===46&&u>-1?u++:u=-1}return n}function Vr(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}const Rb={cwd:Lb};function Lb(){return"/"}function Ha(r){return!!(r!==null&&typeof r=="object"&&"href"in r&&r.href&&"protocol"in r&&r.protocol&&r.auth===void 0)}function $b(r){if(typeof r=="string")r=new URL(r);else if(!Ha(r)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+r+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(r.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Bb(r)}function Bb(r){if(r.hostname!==""){const o=new TypeError('File URL host must be "localhost" or empty on darwin');throw o.code="ERR_INVALID_FILE_URL_HOST",o}const e=r.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const o=e.codePointAt(n+2);if(o===70||o===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(e)}const ka=["history","path","basename","stem","extname","dirname"];class Nb{constructor(e){let n;e?Ha(e)?n={path:e}:typeof e=="string"||Wb(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":Rb.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let o=-1;for(;++o<ka.length;){const u=ka[o];u in n&&n[u]!==void 0&&n[u]!==null&&(this[u]=u==="history"?[...n[u]]:n[u])}let a;for(a in n)ka.includes(a)||(this[a]=n[a])}get basename(){return typeof this.path=="string"?tn.basename(this.path):void 0}set basename(e){Sa(e,"basename"),Ia(e,"basename"),this.path=tn.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?tn.dirname(this.path):void 0}set dirname(e){nc(this.basename,"dirname"),this.path=tn.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?tn.extname(this.path):void 0}set extname(e){if(Ia(e,"extname"),nc(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=tn.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Ha(e)&&(e=$b(e)),Sa(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?tn.basename(this.path,this.extname):void 0}set stem(e){Sa(e,"stem"),Ia(e,"stem"),this.path=tn.join(this.dirname||"",e+(this.extname||""))}fail(e,n,o){const a=this.message(e,n,o);throw a.fatal=!0,a}info(e,n,o){const a=this.message(e,n,o);return a.fatal=void 0,a}message(e,n,o){const a=new yt(e,n,o);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Ia(r,e){if(r&&r.includes(tn.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+tn.sep+"`")}function Sa(r,e){if(!r)throw new Error("`"+e+"` cannot be empty")}function nc(r,e){if(!r)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Wb(r){return!!(r&&typeof r=="object"&&"byteLength"in r&&"byteOffset"in r)}const zb=(function(r){const o=this.constructor.prototype,a=o[r],u=function(){return a.apply(u,arguments)};return Object.setPrototypeOf(u,o),u}),qb={}.hasOwnProperty;class os extends zb{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Tb()}copy(){const e=new os;let n=-1;for(;++n<this.attachers.length;){const o=this.attachers[n];e.use(...o)}return e.data(_a(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Ea("data",this.frozen),this.namespace[e]=n,this):qb.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Ea("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...o]=this.attachers[this.freezeIndex];if(o[0]===!1)continue;o[0]===!0&&(o[0]=void 0);const a=n.call(e,...o);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=qi(e),o=this.parser||this.Parser;return Ca("parse",o),o(String(n),n)}process(e,n){const o=this;return this.freeze(),Ca("process",this.parser||this.Parser),Ta("process",this.compiler||this.Compiler),n?a(void 0,n):new Promise(a);function a(u,l){const c=qi(e),f=o.parse(c);o.run(f,c,function(p,g,w){if(p||!g||!w)return h(p);const y=g,S=o.stringify(y,w);Hb(S)?w.value=S:w.result=S,h(p,w)});function h(p,g){p||!g?l(p):u?u(g):n(void 0,g)}}}processSync(e){let n=!1,o;return this.freeze(),Ca("processSync",this.parser||this.Parser),Ta("processSync",this.compiler||this.Compiler),this.process(e,a),ic("processSync","process",n),o;function a(u,l){n=!0,Jl(u),o=l}}run(e,n,o){rc(e),this.freeze();const a=this.transformers;return!o&&typeof n=="function"&&(o=n,n=void 0),o?u(void 0,o):new Promise(u);function u(l,c){const f=qi(n);a.run(e,f,h);function h(p,g,w){const y=g||e;p?c(p):l?l(y):o(void 0,y,w)}}}runSync(e,n){let o=!1,a;return this.run(e,n,u),ic("runSync","run",o),a;function u(l,c){Jl(l),a=c,o=!0}}stringify(e,n){this.freeze();const o=qi(n),a=this.compiler||this.Compiler;return Ta("stringify",a),rc(e),a(e,o)}use(e,...n){const o=this.attachers,a=this.namespace;if(Ea("use",this.frozen),e!=null)if(typeof e=="function")f(e,n);else if(typeof e=="object")Array.isArray(e)?c(e):l(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function u(h){if(typeof h=="function")f(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[p,...g]=h;f(p,g)}else l(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function l(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(h.plugins),h.settings&&(a.settings=_a(!0,a.settings,h.settings))}function c(h){let p=-1;if(h!=null)if(Array.isArray(h))for(;++p<h.length;){const g=h[p];u(g)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function f(h,p){let g=-1,w=-1;for(;++g<o.length;)if(o[g][0]===h){w=g;break}if(w===-1)o.push([h,...p]);else if(p.length>0){let[y,...S]=p;const E=o[w][1];qa(E)&&qa(y)&&(y=_a(!0,E,y)),o[w]=[h,y,...S]}}}}const Ji=new os().freeze();function Ca(r,e){if(typeof e!="function")throw new TypeError("Cannot `"+r+"` without `parser`")}function Ta(r,e){if(typeof e!="function")throw new TypeError("Cannot `"+r+"` without `compiler`")}function Ea(r,e){if(e)throw new Error("Cannot call `"+r+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function rc(r){if(!qa(r)||typeof r.type!="string")throw new TypeError("Expected node, got `"+r+"`")}function ic(r,e,n){if(!n)throw new Error("`"+r+"` finished async. Use `"+e+"` instead")}function qi(r){return Yb(r)?r:new Nb(r)}function Yb(r){return!!(r&&typeof r=="object"&&"message"in r&&"messages"in r)}function Hb(r){return typeof r=="string"||Ub(r)}function Ub(r){return!!(r&&typeof r=="object"&&"byteLength"in r&&"byteOffset"in r)}const Gb={};function as(r,e){const n=Gb,o=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,a=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return tf(r,o,a)}function tf(r,e,n){if(Qb(r)){if("value"in r)return r.type==="html"&&!n?"":r.value;if(e&&"alt"in r&&r.alt)return r.alt;if("children"in r)return oc(r.children,e,n)}return Array.isArray(r)?oc(r,e,n):""}function oc(r,e,n){const o=[];let a=-1;for(;++a<r.length;)o[a]=tf(r[a],e,n);return o.join("")}function Qb(r){return!!(r&&typeof r=="object")}const ac=document.createElement("i");function ss(r){const e="&"+r+";";ac.innerHTML=e;const n=ac.textContent;return n.charCodeAt(n.length-1)===59&&r!=="semi"||n===e?!1:n}function sn(r,e,n,o){const a=r.length;let u=0,l;if(e<0?e=-e>a?0:a+e:e=e>a?a:e,n=n>0?n:0,o.length<1e4)l=Array.from(o),l.unshift(e,n),r.splice(...l);else for(n&&r.splice(e,n);u<o.length;)l=o.slice(u,u+1e4),l.unshift(e,0),r.splice(...l),u+=1e4,e+=1e4}function Nt(r,e){return r.length>0?(sn(r,r.length,0,e),r):e}const sc={}.hasOwnProperty;function Vb(r){const e={};let n=-1;for(;++n<r.length;)Xb(e,r[n]);return e}function Xb(r,e){let n;for(n in e){const a=(sc.call(r,n)?r[n]:void 0)||(r[n]={}),u=e[n];let l;if(u)for(l in u){sc.call(a,l)||(a[l]=[]);const c=u[l];jb(a[l],Array.isArray(c)?c:c?[c]:[])}}}function jb(r,e){let n=-1;const o=[];for(;++n<e.length;)(e[n].add==="after"?r:o).push(e[n]);sn(r,0,0,o)}function nf(r,e){const n=Number.parseInt(r,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"ÔøΩ":String.fromCodePoint(n)}function vr(r){return r.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const an=Wn(/[A-Za-z]/),Xt=Wn(/[\dA-Za-z]/),Kb=Wn(/[#-'*+\--9=?A-Z^-~]/);function Ua(r){return r!==null&&(r<32||r===127)}const Ga=Wn(/\d/),Jb=Wn(/[\dA-Fa-f]/),Zb=Wn(/[!-/:-@[-`{-~]/);function te(r){return r!==null&&r<-2}function mt(r){return r!==null&&(r<0||r===32)}function we(r){return r===-2||r===-1||r===32}const ex=Wn(new RegExp("\\p{P}|\\p{S}","u")),tx=Wn(/\s/);function Wn(r){return e;function e(n){return n!==null&&n>-1&&r.test(String.fromCharCode(n))}}function Te(r,e,n,o){const a=o?o-1:Number.POSITIVE_INFINITY;let u=0;return l;function l(f){return we(f)?(r.enter(n),c(f)):e(f)}function c(f){return we(f)&&u++<a?(r.consume(f),c):(r.exit(n),e(f))}}const nx={tokenize:rx};function rx(r){const e=r.attempt(this.parser.constructs.contentInitial,o,a);let n;return e;function o(c){if(c===null){r.consume(c);return}return r.enter("lineEnding"),r.consume(c),r.exit("lineEnding"),Te(r,e,"linePrefix")}function a(c){return r.enter("paragraph"),u(c)}function u(c){const f=r.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,l(c)}function l(c){if(c===null){r.exit("chunkText"),r.exit("paragraph"),r.consume(c);return}return te(c)?(r.consume(c),r.exit("chunkText"),u):(r.consume(c),l)}}const ix={tokenize:ox},uc={tokenize:ax};function ox(r){const e=this,n=[];let o=0,a,u,l;return c;function c(z){if(o<n.length){const W=n[o];return e.containerState=W[1],r.attempt(W[0].continuation,f,h)(z)}return h(z)}function f(z){if(o++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,a&&N();const W=e.events.length;let O=W,P;for(;O--;)if(e.events[O][0]==="exit"&&e.events[O][1].type==="chunkFlow"){P=e.events[O][1].end;break}A(o);let U=W;for(;U<e.events.length;)e.events[U][1].end={...P},U++;return sn(e.events,O+1,0,e.events.slice(W)),e.events.length=U,h(z)}return c(z)}function h(z){if(o===n.length){if(!a)return w(z);if(a.currentConstruct&&a.currentConstruct.concrete)return S(z);e.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return e.containerState={},r.check(uc,p,g)(z)}function p(z){return a&&N(),A(o),w(z)}function g(z){return e.parser.lazy[e.now().line]=o!==n.length,l=e.now().offset,S(z)}function w(z){return e.containerState={},r.attempt(uc,y,S)(z)}function y(z){return o++,n.push([e.currentConstruct,e.containerState]),w(z)}function S(z){if(z===null){a&&N(),A(0),r.consume(z);return}return a=a||e.parser.flow(e.now()),r.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:u}),E(z)}function E(z){if(z===null){D(r.exit("chunkFlow"),!0),A(0),r.consume(z);return}return te(z)?(r.consume(z),D(r.exit("chunkFlow")),o=0,e.interrupt=void 0,c):(r.consume(z),E)}function D(z,W){const O=e.sliceStream(z);if(W&&O.push(null),z.previous=u,u&&(u.next=z),u=z,a.defineSkip(z.start),a.write(O),e.parser.lazy[z.start.line]){let P=a.events.length;for(;P--;)if(a.events[P][1].start.offset<l&&(!a.events[P][1].end||a.events[P][1].end.offset>l))return;const U=e.events.length;let V=U,ee,de;for(;V--;)if(e.events[V][0]==="exit"&&e.events[V][1].type==="chunkFlow"){if(ee){de=e.events[V][1].end;break}ee=!0}for(A(o),P=U;P<e.events.length;)e.events[P][1].end={...de},P++;sn(e.events,V+1,0,e.events.slice(U)),e.events.length=P}}function A(z){let W=n.length;for(;W-- >z;){const O=n[W];e.containerState=O[1],O[0].exit.call(e,r)}n.length=z}function N(){a.write([null]),u=void 0,a=void 0,e.containerState._closeFlow=void 0}}function ax(r,e,n){return Te(r,r.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Zi(r){if(r===null||mt(r)||tx(r))return 1;if(ex(r))return 2}function us(r,e,n){const o=[];let a=-1;for(;++a<r.length;){const u=r[a].resolveAll;u&&!o.includes(u)&&(e=u(e,n),o.push(u))}return e}const Qa={name:"attention",resolveAll:sx,tokenize:ux};function sx(r,e){let n=-1,o,a,u,l,c,f,h,p;for(;++n<r.length;)if(r[n][0]==="enter"&&r[n][1].type==="attentionSequence"&&r[n][1]._close){for(o=n;o--;)if(r[o][0]==="exit"&&r[o][1].type==="attentionSequence"&&r[o][1]._open&&e.sliceSerialize(r[o][1]).charCodeAt(0)===e.sliceSerialize(r[n][1]).charCodeAt(0)){if((r[o][1]._close||r[n][1]._open)&&(r[n][1].end.offset-r[n][1].start.offset)%3&&!((r[o][1].end.offset-r[o][1].start.offset+r[n][1].end.offset-r[n][1].start.offset)%3))continue;f=r[o][1].end.offset-r[o][1].start.offset>1&&r[n][1].end.offset-r[n][1].start.offset>1?2:1;const g={...r[o][1].end},w={...r[n][1].start};lc(g,-f),lc(w,f),l={type:f>1?"strongSequence":"emphasisSequence",start:g,end:{...r[o][1].end}},c={type:f>1?"strongSequence":"emphasisSequence",start:{...r[n][1].start},end:w},u={type:f>1?"strongText":"emphasisText",start:{...r[o][1].end},end:{...r[n][1].start}},a={type:f>1?"strong":"emphasis",start:{...l.start},end:{...c.end}},r[o][1].end={...l.start},r[n][1].start={...c.end},h=[],r[o][1].end.offset-r[o][1].start.offset&&(h=Nt(h,[["enter",r[o][1],e],["exit",r[o][1],e]])),h=Nt(h,[["enter",a,e],["enter",l,e],["exit",l,e],["enter",u,e]]),h=Nt(h,us(e.parser.constructs.insideSpan.null,r.slice(o+1,n),e)),h=Nt(h,[["exit",u,e],["enter",c,e],["exit",c,e],["exit",a,e]]),r[n][1].end.offset-r[n][1].start.offset?(p=2,h=Nt(h,[["enter",r[n][1],e],["exit",r[n][1],e]])):p=0,sn(r,o-1,n-o+3,h),n=o+h.length-p-2;break}}for(n=-1;++n<r.length;)r[n][1].type==="attentionSequence"&&(r[n][1].type="data");return r}function ux(r,e){const n=this.parser.constructs.attentionMarkers.null,o=this.previous,a=Zi(o);let u;return l;function l(f){return u=f,r.enter("attentionSequence"),c(f)}function c(f){if(f===u)return r.consume(f),c;const h=r.exit("attentionSequence"),p=Zi(f),g=!p||p===2&&a||n.includes(f),w=!a||a===2&&p||n.includes(o);return h._open=!!(u===42?g:g&&(a||!w)),h._close=!!(u===42?w:w&&(p||!g)),e(f)}}function lc(r,e){r.column+=e,r.offset+=e,r._bufferIndex+=e}const lx={name:"autolink",tokenize:cx};function cx(r,e,n){let o=0;return a;function a(y){return r.enter("autolink"),r.enter("autolinkMarker"),r.consume(y),r.exit("autolinkMarker"),r.enter("autolinkProtocol"),u}function u(y){return an(y)?(r.consume(y),l):y===64?n(y):h(y)}function l(y){return y===43||y===45||y===46||Xt(y)?(o=1,c(y)):h(y)}function c(y){return y===58?(r.consume(y),o=0,f):(y===43||y===45||y===46||Xt(y))&&o++<32?(r.consume(y),c):(o=0,h(y))}function f(y){return y===62?(r.exit("autolinkProtocol"),r.enter("autolinkMarker"),r.consume(y),r.exit("autolinkMarker"),r.exit("autolink"),e):y===null||y===32||y===60||Ua(y)?n(y):(r.consume(y),f)}function h(y){return y===64?(r.consume(y),p):Kb(y)?(r.consume(y),h):n(y)}function p(y){return Xt(y)?g(y):n(y)}function g(y){return y===46?(r.consume(y),o=0,p):y===62?(r.exit("autolinkProtocol").type="autolinkEmail",r.enter("autolinkMarker"),r.consume(y),r.exit("autolinkMarker"),r.exit("autolink"),e):w(y)}function w(y){if((y===45||Xt(y))&&o++<63){const S=y===45?w:g;return r.consume(y),S}return n(y)}}const no={partial:!0,tokenize:fx};function fx(r,e,n){return o;function o(u){return we(u)?Te(r,a,"linePrefix")(u):a(u)}function a(u){return u===null||te(u)?e(u):n(u)}}const rf={continuation:{tokenize:dx},exit:px,name:"blockQuote",tokenize:hx};function hx(r,e,n){const o=this;return a;function a(l){if(l===62){const c=o.containerState;return c.open||(r.enter("blockQuote",{_container:!0}),c.open=!0),r.enter("blockQuotePrefix"),r.enter("blockQuoteMarker"),r.consume(l),r.exit("blockQuoteMarker"),u}return n(l)}function u(l){return we(l)?(r.enter("blockQuotePrefixWhitespace"),r.consume(l),r.exit("blockQuotePrefixWhitespace"),r.exit("blockQuotePrefix"),e):(r.exit("blockQuotePrefix"),e(l))}}function dx(r,e,n){const o=this;return a;function a(l){return we(l)?Te(r,u,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):u(l)}function u(l){return r.attempt(rf,e,n)(l)}}function px(r){r.exit("blockQuote")}const of={name:"characterEscape",tokenize:gx};function gx(r,e,n){return o;function o(u){return r.enter("characterEscape"),r.enter("escapeMarker"),r.consume(u),r.exit("escapeMarker"),a}function a(u){return Zb(u)?(r.enter("characterEscapeValue"),r.consume(u),r.exit("characterEscapeValue"),r.exit("characterEscape"),e):n(u)}}const af={name:"characterReference",tokenize:mx};function mx(r,e,n){const o=this;let a=0,u,l;return c;function c(g){return r.enter("characterReference"),r.enter("characterReferenceMarker"),r.consume(g),r.exit("characterReferenceMarker"),f}function f(g){return g===35?(r.enter("characterReferenceMarkerNumeric"),r.consume(g),r.exit("characterReferenceMarkerNumeric"),h):(r.enter("characterReferenceValue"),u=31,l=Xt,p(g))}function h(g){return g===88||g===120?(r.enter("characterReferenceMarkerHexadecimal"),r.consume(g),r.exit("characterReferenceMarkerHexadecimal"),r.enter("characterReferenceValue"),u=6,l=Jb,p):(r.enter("characterReferenceValue"),u=7,l=Ga,p(g))}function p(g){if(g===59&&a){const w=r.exit("characterReferenceValue");return l===Xt&&!ss(o.sliceSerialize(w))?n(g):(r.enter("characterReferenceMarker"),r.consume(g),r.exit("characterReferenceMarker"),r.exit("characterReference"),e)}return l(g)&&a++<u?(r.consume(g),p):n(g)}}const cc={partial:!0,tokenize:wx},fc={concrete:!0,name:"codeFenced",tokenize:yx};function yx(r,e,n){const o=this,a={partial:!0,tokenize:O};let u=0,l=0,c;return f;function f(P){return h(P)}function h(P){const U=o.events[o.events.length-1];return u=U&&U[1].type==="linePrefix"?U[2].sliceSerialize(U[1],!0).length:0,c=P,r.enter("codeFenced"),r.enter("codeFencedFence"),r.enter("codeFencedFenceSequence"),p(P)}function p(P){return P===c?(l++,r.consume(P),p):l<3?n(P):(r.exit("codeFencedFenceSequence"),we(P)?Te(r,g,"whitespace")(P):g(P))}function g(P){return P===null||te(P)?(r.exit("codeFencedFence"),o.interrupt?e(P):r.check(cc,E,W)(P)):(r.enter("codeFencedFenceInfo"),r.enter("chunkString",{contentType:"string"}),w(P))}function w(P){return P===null||te(P)?(r.exit("chunkString"),r.exit("codeFencedFenceInfo"),g(P)):we(P)?(r.exit("chunkString"),r.exit("codeFencedFenceInfo"),Te(r,y,"whitespace")(P)):P===96&&P===c?n(P):(r.consume(P),w)}function y(P){return P===null||te(P)?g(P):(r.enter("codeFencedFenceMeta"),r.enter("chunkString",{contentType:"string"}),S(P))}function S(P){return P===null||te(P)?(r.exit("chunkString"),r.exit("codeFencedFenceMeta"),g(P)):P===96&&P===c?n(P):(r.consume(P),S)}function E(P){return r.attempt(a,W,D)(P)}function D(P){return r.enter("lineEnding"),r.consume(P),r.exit("lineEnding"),A}function A(P){return u>0&&we(P)?Te(r,N,"linePrefix",u+1)(P):N(P)}function N(P){return P===null||te(P)?r.check(cc,E,W)(P):(r.enter("codeFlowValue"),z(P))}function z(P){return P===null||te(P)?(r.exit("codeFlowValue"),N(P)):(r.consume(P),z)}function W(P){return r.exit("codeFenced"),e(P)}function O(P,U,V){let ee=0;return de;function de(fe){return P.enter("lineEnding"),P.consume(fe),P.exit("lineEnding"),X}function X(fe){return P.enter("codeFencedFence"),we(fe)?Te(P,Q,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(fe):Q(fe)}function Q(fe){return fe===c?(P.enter("codeFencedFenceSequence"),xe(fe)):V(fe)}function xe(fe){return fe===c?(ee++,P.consume(fe),xe):ee>=l?(P.exit("codeFencedFenceSequence"),we(fe)?Te(P,Me,"whitespace")(fe):Me(fe)):V(fe)}function Me(fe){return fe===null||te(fe)?(P.exit("codeFencedFence"),U(fe)):V(fe)}}}function wx(r,e,n){const o=this;return a;function a(l){return l===null?n(l):(r.enter("lineEnding"),r.consume(l),r.exit("lineEnding"),u)}function u(l){return o.parser.lazy[o.now().line]?n(l):e(l)}}const Pa={name:"codeIndented",tokenize:xx},bx={partial:!0,tokenize:vx};function xx(r,e,n){const o=this;return a;function a(h){return r.enter("codeIndented"),Te(r,u,"linePrefix",5)(h)}function u(h){const p=o.events[o.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?l(h):n(h)}function l(h){return h===null?f(h):te(h)?r.attempt(bx,l,f)(h):(r.enter("codeFlowValue"),c(h))}function c(h){return h===null||te(h)?(r.exit("codeFlowValue"),l(h)):(r.consume(h),c)}function f(h){return r.exit("codeIndented"),e(h)}}function vx(r,e,n){const o=this;return a;function a(l){return o.parser.lazy[o.now().line]?n(l):te(l)?(r.enter("lineEnding"),r.consume(l),r.exit("lineEnding"),a):Te(r,u,"linePrefix",5)(l)}function u(l){const c=o.events[o.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(l):te(l)?a(l):n(l)}}const _x={name:"codeText",previous:Ix,resolve:kx,tokenize:Sx};function kx(r){let e=r.length-4,n=3,o,a;if((r[n][1].type==="lineEnding"||r[n][1].type==="space")&&(r[e][1].type==="lineEnding"||r[e][1].type==="space")){for(o=n;++o<e;)if(r[o][1].type==="codeTextData"){r[n][1].type="codeTextPadding",r[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(o=n-1,e++;++o<=e;)a===void 0?o!==e&&r[o][1].type!=="lineEnding"&&(a=o):(o===e||r[o][1].type==="lineEnding")&&(r[a][1].type="codeTextData",o!==a+2&&(r[a][1].end=r[o-1][1].end,r.splice(a+2,o-a-2),e-=o-a-2,o=a+2),a=void 0);return r}function Ix(r){return r!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Sx(r,e,n){let o=0,a,u;return l;function l(g){return r.enter("codeText"),r.enter("codeTextSequence"),c(g)}function c(g){return g===96?(r.consume(g),o++,c):(r.exit("codeTextSequence"),f(g))}function f(g){return g===null?n(g):g===32?(r.enter("space"),r.consume(g),r.exit("space"),f):g===96?(u=r.enter("codeTextSequence"),a=0,p(g)):te(g)?(r.enter("lineEnding"),r.consume(g),r.exit("lineEnding"),f):(r.enter("codeTextData"),h(g))}function h(g){return g===null||g===32||g===96||te(g)?(r.exit("codeTextData"),f(g)):(r.consume(g),h)}function p(g){return g===96?(r.consume(g),a++,p):a===o?(r.exit("codeTextSequence"),r.exit("codeText"),e(g)):(u.type="codeTextData",h(g))}}class Cx{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const o=n??Number.POSITIVE_INFINITY;return o<this.left.length?this.left.slice(e,o):e>this.left.length?this.right.slice(this.right.length-o+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-o+this.left.length).reverse())}splice(e,n,o){const a=n||0;this.setCursor(Math.trunc(e));const u=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return o&&zr(this.left,o),u.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),zr(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),zr(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);zr(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);zr(this.left,n.reverse())}}}function zr(r,e){let n=0;if(e.length<1e4)r.push(...e);else for(;n<e.length;)r.push(...e.slice(n,n+1e4)),n+=1e4}function sf(r){const e={};let n=-1,o,a,u,l,c,f,h;const p=new Cx(r);for(;++n<p.length;){for(;n in e;)n=e[n];if(o=p.get(n),n&&o[1].type==="chunkFlow"&&p.get(n-1)[1].type==="listItemPrefix"&&(f=o[1]._tokenizer.events,u=0,u<f.length&&f[u][1].type==="lineEndingBlank"&&(u+=2),u<f.length&&f[u][1].type==="content"))for(;++u<f.length&&f[u][1].type!=="content";)f[u][1].type==="chunkText"&&(f[u][1]._isInFirstContentOfListItem=!0,u++);if(o[0]==="enter")o[1].contentType&&(Object.assign(e,Tx(p,n)),n=e[n],h=!0);else if(o[1]._container){for(u=n,a=void 0;u--;)if(l=p.get(u),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(a&&(p.get(a)[1].type="lineEndingBlank"),l[1].type="lineEnding",a=u);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;a&&(o[1].end={...p.get(a)[1].start},c=p.slice(a,n),c.unshift(o),p.splice(a,n-a+1,c))}}return sn(r,0,Number.POSITIVE_INFINITY,p.slice(0)),!h}function Tx(r,e){const n=r.get(e)[1],o=r.get(e)[2];let a=e-1;const u=[];let l=n._tokenizer;l||(l=o.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const c=l.events,f=[],h={};let p,g,w=-1,y=n,S=0,E=0;const D=[E];for(;y;){for(;r.get(++a)[1]!==y;);u.push(a),y._tokenizer||(p=o.sliceStream(y),y.next||p.push(null),g&&l.defineSkip(y.start),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(p),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),g=y,y=y.next}for(y=n;++w<c.length;)c[w][0]==="exit"&&c[w-1][0]==="enter"&&c[w][1].type===c[w-1][1].type&&c[w][1].start.line!==c[w][1].end.line&&(E=w+1,D.push(E),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(l.events=[],y?(y._tokenizer=void 0,y.previous=void 0):D.pop(),w=D.length;w--;){const A=c.slice(D[w],D[w+1]),N=u.pop();f.push([N,N+A.length-1]),r.splice(N,2,A)}for(f.reverse(),w=-1;++w<f.length;)h[S+f[w][0]]=S+f[w][1],S+=f[w][1]-f[w][0]-1;return h}const Ex={resolve:Ax,tokenize:Mx},Px={partial:!0,tokenize:Dx};function Ax(r){return sf(r),r}function Mx(r,e){let n;return o;function o(c){return r.enter("content"),n=r.enter("chunkContent",{contentType:"content"}),a(c)}function a(c){return c===null?u(c):te(c)?r.check(Px,l,u)(c):(r.consume(c),a)}function u(c){return r.exit("chunkContent"),r.exit("content"),e(c)}function l(c){return r.consume(c),r.exit("chunkContent"),n.next=r.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function Dx(r,e,n){const o=this;return a;function a(l){return r.exit("chunkContent"),r.enter("lineEnding"),r.consume(l),r.exit("lineEnding"),Te(r,u,"linePrefix")}function u(l){if(l===null||te(l))return n(l);const c=o.events[o.events.length-1];return!o.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(l):r.interrupt(o.parser.constructs.flow,n,e)(l)}}function uf(r,e,n,o,a,u,l,c,f){const h=f||Number.POSITIVE_INFINITY;let p=0;return g;function g(A){return A===60?(r.enter(o),r.enter(a),r.enter(u),r.consume(A),r.exit(u),w):A===null||A===32||A===41||Ua(A)?n(A):(r.enter(o),r.enter(l),r.enter(c),r.enter("chunkString",{contentType:"string"}),E(A))}function w(A){return A===62?(r.enter(u),r.consume(A),r.exit(u),r.exit(a),r.exit(o),e):(r.enter(c),r.enter("chunkString",{contentType:"string"}),y(A))}function y(A){return A===62?(r.exit("chunkString"),r.exit(c),w(A)):A===null||A===60||te(A)?n(A):(r.consume(A),A===92?S:y)}function S(A){return A===60||A===62||A===92?(r.consume(A),y):y(A)}function E(A){return!p&&(A===null||A===41||mt(A))?(r.exit("chunkString"),r.exit(c),r.exit(l),r.exit(o),e(A)):p<h&&A===40?(r.consume(A),p++,E):A===41?(r.consume(A),p--,E):A===null||A===32||A===40||Ua(A)?n(A):(r.consume(A),A===92?D:E)}function D(A){return A===40||A===41||A===92?(r.consume(A),E):E(A)}}function lf(r,e,n,o,a,u){const l=this;let c=0,f;return h;function h(y){return r.enter(o),r.enter(a),r.consume(y),r.exit(a),r.enter(u),p}function p(y){return c>999||y===null||y===91||y===93&&!f||y===94&&!c&&"_hiddenFootnoteSupport"in l.parser.constructs?n(y):y===93?(r.exit(u),r.enter(a),r.consume(y),r.exit(a),r.exit(o),e):te(y)?(r.enter("lineEnding"),r.consume(y),r.exit("lineEnding"),p):(r.enter("chunkString",{contentType:"string"}),g(y))}function g(y){return y===null||y===91||y===93||te(y)||c++>999?(r.exit("chunkString"),p(y)):(r.consume(y),f||(f=!we(y)),y===92?w:g)}function w(y){return y===91||y===92||y===93?(r.consume(y),c++,g):g(y)}}function cf(r,e,n,o,a,u){let l;return c;function c(w){return w===34||w===39||w===40?(r.enter(o),r.enter(a),r.consume(w),r.exit(a),l=w===40?41:w,f):n(w)}function f(w){return w===l?(r.enter(a),r.consume(w),r.exit(a),r.exit(o),e):(r.enter(u),h(w))}function h(w){return w===l?(r.exit(u),f(l)):w===null?n(w):te(w)?(r.enter("lineEnding"),r.consume(w),r.exit("lineEnding"),Te(r,h,"linePrefix")):(r.enter("chunkString",{contentType:"string"}),p(w))}function p(w){return w===l||w===null||te(w)?(r.exit("chunkString"),h(w)):(r.consume(w),w===92?g:p)}function g(w){return w===l||w===92?(r.consume(w),p):p(w)}}function Ur(r,e){let n;return o;function o(a){return te(a)?(r.enter("lineEnding"),r.consume(a),r.exit("lineEnding"),n=!0,o):we(a)?Te(r,o,n?"linePrefix":"lineSuffix")(a):e(a)}}const Ox={name:"definition",tokenize:Rx},Fx={partial:!0,tokenize:Lx};function Rx(r,e,n){const o=this;let a;return u;function u(y){return r.enter("definition"),l(y)}function l(y){return lf.call(o,r,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function c(y){return a=vr(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)),y===58?(r.enter("definitionMarker"),r.consume(y),r.exit("definitionMarker"),f):n(y)}function f(y){return mt(y)?Ur(r,h)(y):h(y)}function h(y){return uf(r,p,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function p(y){return r.attempt(Fx,g,g)(y)}function g(y){return we(y)?Te(r,w,"whitespace")(y):w(y)}function w(y){return y===null||te(y)?(r.exit("definition"),o.parser.defined.push(a),e(y)):n(y)}}function Lx(r,e,n){return o;function o(c){return mt(c)?Ur(r,a)(c):n(c)}function a(c){return cf(r,u,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function u(c){return we(c)?Te(r,l,"whitespace")(c):l(c)}function l(c){return c===null||te(c)?e(c):n(c)}}const $x={name:"hardBreakEscape",tokenize:Bx};function Bx(r,e,n){return o;function o(u){return r.enter("hardBreakEscape"),r.consume(u),a}function a(u){return te(u)?(r.exit("hardBreakEscape"),e(u)):n(u)}}const Nx={name:"headingAtx",resolve:Wx,tokenize:zx};function Wx(r,e){let n=r.length-2,o=3,a,u;return r[o][1].type==="whitespace"&&(o+=2),n-2>o&&r[n][1].type==="whitespace"&&(n-=2),r[n][1].type==="atxHeadingSequence"&&(o===n-1||n-4>o&&r[n-2][1].type==="whitespace")&&(n-=o+1===n?2:4),n>o&&(a={type:"atxHeadingText",start:r[o][1].start,end:r[n][1].end},u={type:"chunkText",start:r[o][1].start,end:r[n][1].end,contentType:"text"},sn(r,o,n-o+1,[["enter",a,e],["enter",u,e],["exit",u,e],["exit",a,e]])),r}function zx(r,e,n){let o=0;return a;function a(p){return r.enter("atxHeading"),u(p)}function u(p){return r.enter("atxHeadingSequence"),l(p)}function l(p){return p===35&&o++<6?(r.consume(p),l):p===null||mt(p)?(r.exit("atxHeadingSequence"),c(p)):n(p)}function c(p){return p===35?(r.enter("atxHeadingSequence"),f(p)):p===null||te(p)?(r.exit("atxHeading"),e(p)):we(p)?Te(r,c,"whitespace")(p):(r.enter("atxHeadingText"),h(p))}function f(p){return p===35?(r.consume(p),f):(r.exit("atxHeadingSequence"),c(p))}function h(p){return p===null||p===35||mt(p)?(r.exit("atxHeadingText"),c(p)):(r.consume(p),h)}}const qx=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],hc=["pre","script","style","textarea"],Yx={concrete:!0,name:"htmlFlow",resolveTo:Gx,tokenize:Qx},Hx={partial:!0,tokenize:Xx},Ux={partial:!0,tokenize:Vx};function Gx(r){let e=r.length;for(;e--&&!(r[e][0]==="enter"&&r[e][1].type==="htmlFlow"););return e>1&&r[e-2][1].type==="linePrefix"&&(r[e][1].start=r[e-2][1].start,r[e+1][1].start=r[e-2][1].start,r.splice(e-2,2)),r}function Qx(r,e,n){const o=this;let a,u,l,c,f;return h;function h(I){return p(I)}function p(I){return r.enter("htmlFlow"),r.enter("htmlFlowData"),r.consume(I),g}function g(I){return I===33?(r.consume(I),w):I===47?(r.consume(I),u=!0,E):I===63?(r.consume(I),a=3,o.interrupt?e:_):an(I)?(r.consume(I),l=String.fromCharCode(I),D):n(I)}function w(I){return I===45?(r.consume(I),a=2,y):I===91?(r.consume(I),a=5,c=0,S):an(I)?(r.consume(I),a=4,o.interrupt?e:_):n(I)}function y(I){return I===45?(r.consume(I),o.interrupt?e:_):n(I)}function S(I){const bt="CDATA[";return I===bt.charCodeAt(c++)?(r.consume(I),c===bt.length?o.interrupt?e:Q:S):n(I)}function E(I){return an(I)?(r.consume(I),l=String.fromCharCode(I),D):n(I)}function D(I){if(I===null||I===47||I===62||mt(I)){const bt=I===47,ut=l.toLowerCase();return!bt&&!u&&hc.includes(ut)?(a=1,o.interrupt?e(I):Q(I)):qx.includes(l.toLowerCase())?(a=6,bt?(r.consume(I),A):o.interrupt?e(I):Q(I)):(a=7,o.interrupt&&!o.parser.lazy[o.now().line]?n(I):u?N(I):z(I))}return I===45||Xt(I)?(r.consume(I),l+=String.fromCharCode(I),D):n(I)}function A(I){return I===62?(r.consume(I),o.interrupt?e:Q):n(I)}function N(I){return we(I)?(r.consume(I),N):de(I)}function z(I){return I===47?(r.consume(I),de):I===58||I===95||an(I)?(r.consume(I),W):we(I)?(r.consume(I),z):de(I)}function W(I){return I===45||I===46||I===58||I===95||Xt(I)?(r.consume(I),W):O(I)}function O(I){return I===61?(r.consume(I),P):we(I)?(r.consume(I),O):z(I)}function P(I){return I===null||I===60||I===61||I===62||I===96?n(I):I===34||I===39?(r.consume(I),f=I,U):we(I)?(r.consume(I),P):V(I)}function U(I){return I===f?(r.consume(I),f=null,ee):I===null||te(I)?n(I):(r.consume(I),U)}function V(I){return I===null||I===34||I===39||I===47||I===60||I===61||I===62||I===96||mt(I)?O(I):(r.consume(I),V)}function ee(I){return I===47||I===62||we(I)?z(I):n(I)}function de(I){return I===62?(r.consume(I),X):n(I)}function X(I){return I===null||te(I)?Q(I):we(I)?(r.consume(I),X):n(I)}function Q(I){return I===45&&a===2?(r.consume(I),Ve):I===60&&a===1?(r.consume(I),Ee):I===62&&a===4?(r.consume(I),Re):I===63&&a===3?(r.consume(I),_):I===93&&a===5?(r.consume(I),Wt):te(I)&&(a===6||a===7)?(r.exit("htmlFlowData"),r.check(Hx,zt,xe)(I)):I===null||te(I)?(r.exit("htmlFlowData"),xe(I)):(r.consume(I),Q)}function xe(I){return r.check(Ux,Me,zt)(I)}function Me(I){return r.enter("lineEnding"),r.consume(I),r.exit("lineEnding"),fe}function fe(I){return I===null||te(I)?xe(I):(r.enter("htmlFlowData"),Q(I))}function Ve(I){return I===45?(r.consume(I),_):Q(I)}function Ee(I){return I===47?(r.consume(I),l="",Ye):Q(I)}function Ye(I){if(I===62){const bt=l.toLowerCase();return hc.includes(bt)?(r.consume(I),Re):Q(I)}return an(I)&&l.length<8?(r.consume(I),l+=String.fromCharCode(I),Ye):Q(I)}function Wt(I){return I===93?(r.consume(I),_):Q(I)}function _(I){return I===62?(r.consume(I),Re):I===45&&a===2?(r.consume(I),_):Q(I)}function Re(I){return I===null||te(I)?(r.exit("htmlFlowData"),zt(I)):(r.consume(I),Re)}function zt(I){return r.exit("htmlFlow"),e(I)}}function Vx(r,e,n){const o=this;return a;function a(l){return te(l)?(r.enter("lineEnding"),r.consume(l),r.exit("lineEnding"),u):n(l)}function u(l){return o.parser.lazy[o.now().line]?n(l):e(l)}}function Xx(r,e,n){return o;function o(a){return r.enter("lineEnding"),r.consume(a),r.exit("lineEnding"),r.attempt(no,e,n)}}const jx={name:"htmlText",tokenize:Kx};function Kx(r,e,n){const o=this;let a,u,l;return c;function c(_){return r.enter("htmlText"),r.enter("htmlTextData"),r.consume(_),f}function f(_){return _===33?(r.consume(_),h):_===47?(r.consume(_),O):_===63?(r.consume(_),z):an(_)?(r.consume(_),V):n(_)}function h(_){return _===45?(r.consume(_),p):_===91?(r.consume(_),u=0,S):an(_)?(r.consume(_),N):n(_)}function p(_){return _===45?(r.consume(_),y):n(_)}function g(_){return _===null?n(_):_===45?(r.consume(_),w):te(_)?(l=g,Ee(_)):(r.consume(_),g)}function w(_){return _===45?(r.consume(_),y):g(_)}function y(_){return _===62?Ve(_):_===45?w(_):g(_)}function S(_){const Re="CDATA[";return _===Re.charCodeAt(u++)?(r.consume(_),u===Re.length?E:S):n(_)}function E(_){return _===null?n(_):_===93?(r.consume(_),D):te(_)?(l=E,Ee(_)):(r.consume(_),E)}function D(_){return _===93?(r.consume(_),A):E(_)}function A(_){return _===62?Ve(_):_===93?(r.consume(_),A):E(_)}function N(_){return _===null||_===62?Ve(_):te(_)?(l=N,Ee(_)):(r.consume(_),N)}function z(_){return _===null?n(_):_===63?(r.consume(_),W):te(_)?(l=z,Ee(_)):(r.consume(_),z)}function W(_){return _===62?Ve(_):z(_)}function O(_){return an(_)?(r.consume(_),P):n(_)}function P(_){return _===45||Xt(_)?(r.consume(_),P):U(_)}function U(_){return te(_)?(l=U,Ee(_)):we(_)?(r.consume(_),U):Ve(_)}function V(_){return _===45||Xt(_)?(r.consume(_),V):_===47||_===62||mt(_)?ee(_):n(_)}function ee(_){return _===47?(r.consume(_),Ve):_===58||_===95||an(_)?(r.consume(_),de):te(_)?(l=ee,Ee(_)):we(_)?(r.consume(_),ee):Ve(_)}function de(_){return _===45||_===46||_===58||_===95||Xt(_)?(r.consume(_),de):X(_)}function X(_){return _===61?(r.consume(_),Q):te(_)?(l=X,Ee(_)):we(_)?(r.consume(_),X):ee(_)}function Q(_){return _===null||_===60||_===61||_===62||_===96?n(_):_===34||_===39?(r.consume(_),a=_,xe):te(_)?(l=Q,Ee(_)):we(_)?(r.consume(_),Q):(r.consume(_),Me)}function xe(_){return _===a?(r.consume(_),a=void 0,fe):_===null?n(_):te(_)?(l=xe,Ee(_)):(r.consume(_),xe)}function Me(_){return _===null||_===34||_===39||_===60||_===61||_===96?n(_):_===47||_===62||mt(_)?ee(_):(r.consume(_),Me)}function fe(_){return _===47||_===62||mt(_)?ee(_):n(_)}function Ve(_){return _===62?(r.consume(_),r.exit("htmlTextData"),r.exit("htmlText"),e):n(_)}function Ee(_){return r.exit("htmlTextData"),r.enter("lineEnding"),r.consume(_),r.exit("lineEnding"),Ye}function Ye(_){return we(_)?Te(r,Wt,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_):Wt(_)}function Wt(_){return r.enter("htmlTextData"),l(_)}}const ls={name:"labelEnd",resolveAll:tv,resolveTo:nv,tokenize:rv},Jx={tokenize:iv},Zx={tokenize:ov},ev={tokenize:av};function tv(r){let e=-1;const n=[];for(;++e<r.length;){const o=r[e][1];if(n.push(r[e]),o.type==="labelImage"||o.type==="labelLink"||o.type==="labelEnd"){const a=o.type==="labelImage"?4:2;o.type="data",e+=a}}return r.length!==n.length&&sn(r,0,r.length,n),r}function nv(r,e){let n=r.length,o=0,a,u,l,c;for(;n--;)if(a=r[n][1],u){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;r[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(l){if(r[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(u=n,a.type!=="labelLink")){o=2;break}}else a.type==="labelEnd"&&(l=n);const f={type:r[u][1].type==="labelLink"?"link":"image",start:{...r[u][1].start},end:{...r[r.length-1][1].end}},h={type:"label",start:{...r[u][1].start},end:{...r[l][1].end}},p={type:"labelText",start:{...r[u+o+2][1].end},end:{...r[l-2][1].start}};return c=[["enter",f,e],["enter",h,e]],c=Nt(c,r.slice(u+1,u+o+3)),c=Nt(c,[["enter",p,e]]),c=Nt(c,us(e.parser.constructs.insideSpan.null,r.slice(u+o+4,l-3),e)),c=Nt(c,[["exit",p,e],r[l-2],r[l-1],["exit",h,e]]),c=Nt(c,r.slice(l+1)),c=Nt(c,[["exit",f,e]]),sn(r,u,r.length,c),r}function rv(r,e,n){const o=this;let a=o.events.length,u,l;for(;a--;)if((o.events[a][1].type==="labelImage"||o.events[a][1].type==="labelLink")&&!o.events[a][1]._balanced){u=o.events[a][1];break}return c;function c(w){return u?u._inactive?g(w):(l=o.parser.defined.includes(vr(o.sliceSerialize({start:u.end,end:o.now()}))),r.enter("labelEnd"),r.enter("labelMarker"),r.consume(w),r.exit("labelMarker"),r.exit("labelEnd"),f):n(w)}function f(w){return w===40?r.attempt(Jx,p,l?p:g)(w):w===91?r.attempt(Zx,p,l?h:g)(w):l?p(w):g(w)}function h(w){return r.attempt(ev,p,g)(w)}function p(w){return e(w)}function g(w){return u._balanced=!0,n(w)}}function iv(r,e,n){return o;function o(g){return r.enter("resource"),r.enter("resourceMarker"),r.consume(g),r.exit("resourceMarker"),a}function a(g){return mt(g)?Ur(r,u)(g):u(g)}function u(g){return g===41?p(g):uf(r,l,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function l(g){return mt(g)?Ur(r,f)(g):p(g)}function c(g){return n(g)}function f(g){return g===34||g===39||g===40?cf(r,h,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):p(g)}function h(g){return mt(g)?Ur(r,p)(g):p(g)}function p(g){return g===41?(r.enter("resourceMarker"),r.consume(g),r.exit("resourceMarker"),r.exit("resource"),e):n(g)}}function ov(r,e,n){const o=this;return a;function a(c){return lf.call(o,r,u,l,"reference","referenceMarker","referenceString")(c)}function u(c){return o.parser.defined.includes(vr(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)))?e(c):n(c)}function l(c){return n(c)}}function av(r,e,n){return o;function o(u){return r.enter("reference"),r.enter("referenceMarker"),r.consume(u),r.exit("referenceMarker"),a}function a(u){return u===93?(r.enter("referenceMarker"),r.consume(u),r.exit("referenceMarker"),r.exit("reference"),e):n(u)}}const sv={name:"labelStartImage",resolveAll:ls.resolveAll,tokenize:uv};function uv(r,e,n){const o=this;return a;function a(c){return r.enter("labelImage"),r.enter("labelImageMarker"),r.consume(c),r.exit("labelImageMarker"),u}function u(c){return c===91?(r.enter("labelMarker"),r.consume(c),r.exit("labelMarker"),r.exit("labelImage"),l):n(c)}function l(c){return c===94&&"_hiddenFootnoteSupport"in o.parser.constructs?n(c):e(c)}}const lv={name:"labelStartLink",resolveAll:ls.resolveAll,tokenize:cv};function cv(r,e,n){const o=this;return a;function a(l){return r.enter("labelLink"),r.enter("labelMarker"),r.consume(l),r.exit("labelMarker"),r.exit("labelLink"),u}function u(l){return l===94&&"_hiddenFootnoteSupport"in o.parser.constructs?n(l):e(l)}}const Aa={name:"lineEnding",tokenize:fv};function fv(r,e){return n;function n(o){return r.enter("lineEnding"),r.consume(o),r.exit("lineEnding"),Te(r,e,"linePrefix")}}const Gi={name:"thematicBreak",tokenize:hv};function hv(r,e,n){let o=0,a;return u;function u(h){return r.enter("thematicBreak"),l(h)}function l(h){return a=h,c(h)}function c(h){return h===a?(r.enter("thematicBreakSequence"),f(h)):o>=3&&(h===null||te(h))?(r.exit("thematicBreak"),e(h)):n(h)}function f(h){return h===a?(r.consume(h),o++,f):(r.exit("thematicBreakSequence"),we(h)?Te(r,c,"whitespace")(h):c(h))}}const pt={continuation:{tokenize:mv},exit:wv,name:"list",tokenize:gv},dv={partial:!0,tokenize:bv},pv={partial:!0,tokenize:yv};function gv(r,e,n){const o=this,a=o.events[o.events.length-1];let u=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,l=0;return c;function c(y){const S=o.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(S==="listUnordered"?!o.containerState.marker||y===o.containerState.marker:Ga(y)){if(o.containerState.type||(o.containerState.type=S,r.enter(S,{_container:!0})),S==="listUnordered")return r.enter("listItemPrefix"),y===42||y===45?r.check(Gi,n,h)(y):h(y);if(!o.interrupt||y===49)return r.enter("listItemPrefix"),r.enter("listItemValue"),f(y)}return n(y)}function f(y){return Ga(y)&&++l<10?(r.consume(y),f):(!o.interrupt||l<2)&&(o.containerState.marker?y===o.containerState.marker:y===41||y===46)?(r.exit("listItemValue"),h(y)):n(y)}function h(y){return r.enter("listItemMarker"),r.consume(y),r.exit("listItemMarker"),o.containerState.marker=o.containerState.marker||y,r.check(no,o.interrupt?n:p,r.attempt(dv,w,g))}function p(y){return o.containerState.initialBlankLine=!0,u++,w(y)}function g(y){return we(y)?(r.enter("listItemPrefixWhitespace"),r.consume(y),r.exit("listItemPrefixWhitespace"),w):n(y)}function w(y){return o.containerState.size=u+o.sliceSerialize(r.exit("listItemPrefix"),!0).length,e(y)}}function mv(r,e,n){const o=this;return o.containerState._closeFlow=void 0,r.check(no,a,u);function a(c){return o.containerState.furtherBlankLines=o.containerState.furtherBlankLines||o.containerState.initialBlankLine,Te(r,e,"listItemIndent",o.containerState.size+1)(c)}function u(c){return o.containerState.furtherBlankLines||!we(c)?(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,l(c)):(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,r.attempt(pv,e,l)(c))}function l(c){return o.containerState._closeFlow=!0,o.interrupt=void 0,Te(r,r.attempt(pt,e,n),"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function yv(r,e,n){const o=this;return Te(r,a,"listItemIndent",o.containerState.size+1);function a(u){const l=o.events[o.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===o.containerState.size?e(u):n(u)}}function wv(r){r.exit(this.containerState.type)}function bv(r,e,n){const o=this;return Te(r,a,"listItemPrefixWhitespace",o.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(u){const l=o.events[o.events.length-1];return!we(u)&&l&&l[1].type==="listItemPrefixWhitespace"?e(u):n(u)}}const dc={name:"setextUnderline",resolveTo:xv,tokenize:vv};function xv(r,e){let n=r.length,o,a,u;for(;n--;)if(r[n][0]==="enter"){if(r[n][1].type==="content"){o=n;break}r[n][1].type==="paragraph"&&(a=n)}else r[n][1].type==="content"&&r.splice(n,1),!u&&r[n][1].type==="definition"&&(u=n);const l={type:"setextHeading",start:{...r[o][1].start},end:{...r[r.length-1][1].end}};return r[a][1].type="setextHeadingText",u?(r.splice(a,0,["enter",l,e]),r.splice(u+1,0,["exit",r[o][1],e]),r[o][1].end={...r[u][1].end}):r[o][1]=l,r.push(["exit",l,e]),r}function vv(r,e,n){const o=this;let a;return u;function u(h){let p=o.events.length,g;for(;p--;)if(o.events[p][1].type!=="lineEnding"&&o.events[p][1].type!=="linePrefix"&&o.events[p][1].type!=="content"){g=o.events[p][1].type==="paragraph";break}return!o.parser.lazy[o.now().line]&&(o.interrupt||g)?(r.enter("setextHeadingLine"),a=h,l(h)):n(h)}function l(h){return r.enter("setextHeadingLineSequence"),c(h)}function c(h){return h===a?(r.consume(h),c):(r.exit("setextHeadingLineSequence"),we(h)?Te(r,f,"lineSuffix")(h):f(h))}function f(h){return h===null||te(h)?(r.exit("setextHeadingLine"),e(h)):n(h)}}const _v={tokenize:kv};function kv(r){const e=this,n=r.attempt(no,o,r.attempt(this.parser.constructs.flowInitial,a,Te(r,r.attempt(this.parser.constructs.flow,a,r.attempt(Ex,a)),"linePrefix")));return n;function o(u){if(u===null){r.consume(u);return}return r.enter("lineEndingBlank"),r.consume(u),r.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function a(u){if(u===null){r.consume(u);return}return r.enter("lineEnding"),r.consume(u),r.exit("lineEnding"),e.currentConstruct=void 0,n}}const Iv={resolveAll:hf()},Sv=ff("string"),Cv=ff("text");function ff(r){return{resolveAll:hf(r==="text"?Tv:void 0),tokenize:e};function e(n){const o=this,a=this.parser.constructs[r],u=n.attempt(a,l,c);return l;function l(p){return h(p)?u(p):c(p)}function c(p){if(p===null){n.consume(p);return}return n.enter("data"),n.consume(p),f}function f(p){return h(p)?(n.exit("data"),u(p)):(n.consume(p),f)}function h(p){if(p===null)return!0;const g=a[p];let w=-1;if(g)for(;++w<g.length;){const y=g[w];if(!y.previous||y.previous.call(o,o.previous))return!0}return!1}}}function hf(r){return e;function e(n,o){let a=-1,u;for(;++a<=n.length;)u===void 0?n[a]&&n[a][1].type==="data"&&(u=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==u+2&&(n[u][1].end=n[a-1][1].end,n.splice(u+2,a-u-2),a=u+2),u=void 0);return r?r(n,o):n}}function Tv(r,e){let n=0;for(;++n<=r.length;)if((n===r.length||r[n][1].type==="lineEnding")&&r[n-1][1].type==="data"){const o=r[n-1][1],a=e.sliceStream(o);let u=a.length,l=-1,c=0,f;for(;u--;){const h=a[u];if(typeof h=="string"){for(l=h.length;h.charCodeAt(l-1)===32;)c++,l--;if(l)break;l=-1}else if(h===-2)f=!0,c++;else if(h!==-1){u++;break}}if(e._contentTypeTextTrailing&&n===r.length&&(c=0),c){const h={type:n===r.length||f||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:u?l:o.start._bufferIndex+l,_index:o.start._index+u,line:o.end.line,column:o.end.column-c,offset:o.end.offset-c},end:{...o.end}};o.end={...h.start},o.start.offset===o.end.offset?Object.assign(o,h):(r.splice(n,0,["enter",h,e],["exit",h,e]),n+=2)}n++}return r}const Ev={42:pt,43:pt,45:pt,48:pt,49:pt,50:pt,51:pt,52:pt,53:pt,54:pt,55:pt,56:pt,57:pt,62:rf},Pv={91:Ox},Av={[-2]:Pa,[-1]:Pa,32:Pa},Mv={35:Nx,42:Gi,45:[dc,Gi],60:Yx,61:dc,95:Gi,96:fc,126:fc},Dv={38:af,92:of},Ov={[-5]:Aa,[-4]:Aa,[-3]:Aa,33:sv,38:af,42:Qa,60:[lx,jx],91:lv,92:[$x,of],93:ls,95:Qa,96:_x},Fv={null:[Qa,Iv]},Rv={null:[42,95]},Lv={null:[]},$v=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Rv,contentInitial:Pv,disable:Lv,document:Ev,flow:Mv,flowInitial:Av,insideSpan:Fv,string:Dv,text:Ov},Symbol.toStringTag,{value:"Module"}));function Bv(r,e,n){let o={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const a={},u=[];let l=[],c=[];const f={attempt:U(O),check:U(P),consume:N,enter:z,exit:W,interrupt:U(P,{interrupt:!0})},h={code:null,containerState:{},defineSkip:E,events:[],now:S,parser:r,previous:null,sliceSerialize:w,sliceStream:y,write:g};let p=e.tokenize.call(h,f);return e.resolveAll&&u.push(e),h;function g(X){return l=Nt(l,X),D(),l[l.length-1]!==null?[]:(V(e,0),h.events=us(u,h.events,h),h.events)}function w(X,Q){return Wv(y(X),Q)}function y(X){return Nv(l,X)}function S(){const{_bufferIndex:X,_index:Q,line:xe,column:Me,offset:fe}=o;return{_bufferIndex:X,_index:Q,line:xe,column:Me,offset:fe}}function E(X){a[X.line]=X.column,de()}function D(){let X;for(;o._index<l.length;){const Q=l[o._index];if(typeof Q=="string")for(X=o._index,o._bufferIndex<0&&(o._bufferIndex=0);o._index===X&&o._bufferIndex<Q.length;)A(Q.charCodeAt(o._bufferIndex));else A(Q)}}function A(X){p=p(X)}function N(X){te(X)?(o.line++,o.column=1,o.offset+=X===-3?2:1,de()):X!==-1&&(o.column++,o.offset++),o._bufferIndex<0?o._index++:(o._bufferIndex++,o._bufferIndex===l[o._index].length&&(o._bufferIndex=-1,o._index++)),h.previous=X}function z(X,Q){const xe=Q||{};return xe.type=X,xe.start=S(),h.events.push(["enter",xe,h]),c.push(xe),xe}function W(X){const Q=c.pop();return Q.end=S(),h.events.push(["exit",Q,h]),Q}function O(X,Q){V(X,Q.from)}function P(X,Q){Q.restore()}function U(X,Q){return xe;function xe(Me,fe,Ve){let Ee,Ye,Wt,_;return Array.isArray(Me)?zt(Me):"tokenize"in Me?zt([Me]):Re(Me);function Re(Le){return zn;function zn(lt){const Pt=lt!==null&&Le[lt],kn=lt!==null&&Le.null,cn=[...Array.isArray(Pt)?Pt:Pt?[Pt]:[],...Array.isArray(kn)?kn:kn?[kn]:[]];return zt(cn)(lt)}}function zt(Le){return Ee=Le,Ye=0,Le.length===0?Ve:I(Le[Ye])}function I(Le){return zn;function zn(lt){return _=ee(),Wt=Le,Le.partial||(h.currentConstruct=Le),Le.name&&h.parser.constructs.disable.null.includes(Le.name)?ut():Le.tokenize.call(Q?Object.assign(Object.create(h),Q):h,f,bt,ut)(lt)}}function bt(Le){return X(Wt,_),fe}function ut(Le){return _.restore(),++Ye<Ee.length?I(Ee[Ye]):Ve}}}function V(X,Q){X.resolveAll&&!u.includes(X)&&u.push(X),X.resolve&&sn(h.events,Q,h.events.length-Q,X.resolve(h.events.slice(Q),h)),X.resolveTo&&(h.events=X.resolveTo(h.events,h))}function ee(){const X=S(),Q=h.previous,xe=h.currentConstruct,Me=h.events.length,fe=Array.from(c);return{from:Me,restore:Ve};function Ve(){o=X,h.previous=Q,h.currentConstruct=xe,h.events.length=Me,c=fe,de()}}function de(){o.line in a&&o.column<2&&(o.column=a[o.line],o.offset+=a[o.line]-1)}}function Nv(r,e){const n=e.start._index,o=e.start._bufferIndex,a=e.end._index,u=e.end._bufferIndex;let l;if(n===a)l=[r[n].slice(o,u)];else{if(l=r.slice(n,a),o>-1){const c=l[0];typeof c=="string"?l[0]=c.slice(o):l.shift()}u>0&&l.push(r[a].slice(0,u))}return l}function Wv(r,e){let n=-1;const o=[];let a;for(;++n<r.length;){const u=r[n];let l;if(typeof u=="string")l=u;else switch(u){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=e?" ":"	";break}case-1:{if(!e&&a)continue;l=" ";break}default:l=String.fromCharCode(u)}a=u===-2,o.push(l)}return o.join("")}function zv(r){const o={constructs:Vb([$v,...(r||{}).extensions||[]]),content:a(nx),defined:[],document:a(ix),flow:a(_v),lazy:{},string:a(Sv),text:a(Cv)};return o;function a(u){return l;function l(c){return Bv(o,u,c)}}}function qv(r){for(;!sf(r););return r}const pc=/[\0\t\n\r]/g;function Yv(){let r=1,e="",n=!0,o;return a;function a(u,l,c){const f=[];let h,p,g,w,y;for(u=e+(typeof u=="string"?u.toString():new TextDecoder(l||void 0).decode(u)),g=0,e="",n&&(u.charCodeAt(0)===65279&&g++,n=void 0);g<u.length;){if(pc.lastIndex=g,h=pc.exec(u),w=h&&h.index!==void 0?h.index:u.length,y=u.charCodeAt(w),!h){e=u.slice(g);break}if(y===10&&g===w&&o)f.push(-3),o=void 0;else switch(o&&(f.push(-5),o=void 0),g<w&&(f.push(u.slice(g,w)),r+=w-g),y){case 0:{f.push(65533),r++;break}case 9:{for(p=Math.ceil(r/4)*4,f.push(-2);r++<p;)f.push(-1);break}case 10:{f.push(-4),r=1;break}default:o=!0,r=1}g=w+1}return c&&(o&&f.push(-5),e&&f.push(e),f.push(null)),f}}const Hv=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function df(r){return r.replace(Hv,Uv)}function Uv(r,e,n){if(e)return e;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),u=a===120||a===88;return nf(n.slice(u?2:1),u?16:10)}return ss(n)||r}const pf={}.hasOwnProperty;function Gv(r,e,n){return typeof e!="string"&&(n=e,e=void 0),Qv(n)(qv(zv(n).document().write(Yv()(r,e,!0))))}function Qv(r){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:u(Jr),autolinkProtocol:ee,autolinkEmail:ee,atxHeading:u(In),blockQuote:u(kn),characterEscape:ee,characterReference:ee,codeFenced:u(cn),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:u(cn,l),codeText:u(rr,l),codeTextData:ee,data:ee,codeFlowValue:ee,definition:u(Xr),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:u(xt),hardBreakEscape:u(jr),hardBreakTrailing:u(jr),htmlFlow:u(At,l),htmlFlowData:ee,htmlText:u(At,l),htmlTextData:ee,image:u(Kr),label:l,link:u(Jr),listItem:u(vt),listItemValue:w,listOrdered:u(Sn,g),listUnordered:u(Sn),paragraph:u(qn),reference:I,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:u(In),strong:u(ir),thematicBreak:u(Yn)},exit:{atxHeading:f(),atxHeadingSequence:O,autolink:f(),autolinkEmail:Pt,autolinkProtocol:lt,blockQuote:f(),characterEscapeValue:de,characterReferenceMarkerHexadecimal:ut,characterReferenceMarkerNumeric:ut,characterReferenceValue:Le,characterReference:zn,codeFenced:f(D),codeFencedFence:E,codeFencedFenceInfo:y,codeFencedFenceMeta:S,codeFlowValue:de,codeIndented:f(A),codeText:f(fe),codeTextData:de,data:de,definition:f(),definitionDestinationString:W,definitionLabelString:N,definitionTitleString:z,emphasis:f(),hardBreakEscape:f(Q),hardBreakTrailing:f(Q),htmlFlow:f(xe),htmlFlowData:de,htmlText:f(Me),htmlTextData:de,image:f(Ee),label:Wt,labelText:Ye,lineEnding:X,link:f(Ve),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:bt,resourceDestinationString:_,resourceTitleString:Re,resource:zt,setextHeading:f(V),setextHeadingLineSequence:U,setextHeadingText:P,strong:f(),thematicBreak:f()}};gf(e,(r||{}).mdastExtensions||[]);const n={};return o;function o(R){let q={type:"root",children:[]};const K={stack:[q],tokenStack:[],config:e,enter:c,exit:h,buffer:l,resume:p,data:n},ae=[];let me=-1;for(;++me<R.length;)if(R[me][1].type==="listOrdered"||R[me][1].type==="listUnordered")if(R[me][0]==="enter")ae.push(me);else{const rt=ae.pop();me=a(R,rt,me)}for(me=-1;++me<R.length;){const rt=e[R[me][0]];pf.call(rt,R[me][1].type)&&rt[R[me][1].type].call(Object.assign({sliceSerialize:R[me][2].sliceSerialize},K),R[me][1])}if(K.tokenStack.length>0){const rt=K.tokenStack[K.tokenStack.length-1];(rt[1]||gc).call(K,void 0,rt[0])}for(q.position={start:Ln(R.length>0?R[0][1].start:{line:1,column:1,offset:0}),end:Ln(R.length>0?R[R.length-2][1].end:{line:1,column:1,offset:0})},me=-1;++me<e.transforms.length;)q=e.transforms[me](q)||q;return q}function a(R,q,K){let ae=q-1,me=-1,rt=!1,qt,_t,fn,hn;for(;++ae<=K;){const je=R[ae];switch(je[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{je[0]==="enter"?me++:me--,hn=void 0;break}case"lineEndingBlank":{je[0]==="enter"&&(qt&&!hn&&!me&&!fn&&(fn=ae),hn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:hn=void 0}if(!me&&je[0]==="enter"&&je[1].type==="listItemPrefix"||me===-1&&je[0]==="exit"&&(je[1].type==="listUnordered"||je[1].type==="listOrdered")){if(qt){let Kt=ae;for(_t=void 0;Kt--;){const Yt=R[Kt];if(Yt[1].type==="lineEnding"||Yt[1].type==="lineEndingBlank"){if(Yt[0]==="exit")continue;_t&&(R[_t][1].type="lineEndingBlank",rt=!0),Yt[1].type="lineEnding",_t=Kt}else if(!(Yt[1].type==="linePrefix"||Yt[1].type==="blockQuotePrefix"||Yt[1].type==="blockQuotePrefixWhitespace"||Yt[1].type==="blockQuoteMarker"||Yt[1].type==="listItemIndent"))break}fn&&(!_t||fn<_t)&&(qt._spread=!0),qt.end=Object.assign({},_t?R[_t][1].start:je[1].end),R.splice(_t||ae,0,["exit",qt,je[2]]),ae++,K++}if(je[1].type==="listItemPrefix"){const Kt={type:"listItem",_spread:!1,start:Object.assign({},je[1].start),end:void 0};qt=Kt,R.splice(ae,0,["enter",Kt,je[2]]),ae++,K++,fn=void 0,hn=!0}}}return R[q][1]._spread=rt,K}function u(R,q){return K;function K(ae){c.call(this,R(ae),ae),q&&q.call(this,ae)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(R,q,K){this.stack[this.stack.length-1].children.push(R),this.stack.push(R),this.tokenStack.push([q,K||void 0]),R.position={start:Ln(q.start),end:void 0}}function f(R){return q;function q(K){R&&R.call(this,K),h.call(this,K)}}function h(R,q){const K=this.stack.pop(),ae=this.tokenStack.pop();if(ae)ae[0].type!==R.type&&(q?q.call(this,R,ae[0]):(ae[1]||gc).call(this,R,ae[0]));else throw new Error("Cannot close `"+R.type+"` ("+Hr({start:R.start,end:R.end})+"): it‚Äôs not open");K.position.end=Ln(R.end)}function p(){return as(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function w(R){if(this.data.expectingFirstListItemValue){const q=this.stack[this.stack.length-2];q.start=Number.parseInt(this.sliceSerialize(R),10),this.data.expectingFirstListItemValue=void 0}}function y(){const R=this.resume(),q=this.stack[this.stack.length-1];q.lang=R}function S(){const R=this.resume(),q=this.stack[this.stack.length-1];q.meta=R}function E(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function D(){const R=this.resume(),q=this.stack[this.stack.length-1];q.value=R.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function A(){const R=this.resume(),q=this.stack[this.stack.length-1];q.value=R.replace(/(\r?\n|\r)$/g,"")}function N(R){const q=this.resume(),K=this.stack[this.stack.length-1];K.label=q,K.identifier=vr(this.sliceSerialize(R)).toLowerCase()}function z(){const R=this.resume(),q=this.stack[this.stack.length-1];q.title=R}function W(){const R=this.resume(),q=this.stack[this.stack.length-1];q.url=R}function O(R){const q=this.stack[this.stack.length-1];if(!q.depth){const K=this.sliceSerialize(R).length;q.depth=K}}function P(){this.data.setextHeadingSlurpLineEnding=!0}function U(R){const q=this.stack[this.stack.length-1];q.depth=this.sliceSerialize(R).codePointAt(0)===61?1:2}function V(){this.data.setextHeadingSlurpLineEnding=void 0}function ee(R){const K=this.stack[this.stack.length-1].children;let ae=K[K.length-1];(!ae||ae.type!=="text")&&(ae=io(),ae.position={start:Ln(R.start),end:void 0},K.push(ae)),this.stack.push(ae)}function de(R){const q=this.stack.pop();q.value+=this.sliceSerialize(R),q.position.end=Ln(R.end)}function X(R){const q=this.stack[this.stack.length-1];if(this.data.atHardBreak){const K=q.children[q.children.length-1];K.position.end=Ln(R.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(q.type)&&(ee.call(this,R),de.call(this,R))}function Q(){this.data.atHardBreak=!0}function xe(){const R=this.resume(),q=this.stack[this.stack.length-1];q.value=R}function Me(){const R=this.resume(),q=this.stack[this.stack.length-1];q.value=R}function fe(){const R=this.resume(),q=this.stack[this.stack.length-1];q.value=R}function Ve(){const R=this.stack[this.stack.length-1];if(this.data.inReference){const q=this.data.referenceType||"shortcut";R.type+="Reference",R.referenceType=q,delete R.url,delete R.title}else delete R.identifier,delete R.label;this.data.referenceType=void 0}function Ee(){const R=this.stack[this.stack.length-1];if(this.data.inReference){const q=this.data.referenceType||"shortcut";R.type+="Reference",R.referenceType=q,delete R.url,delete R.title}else delete R.identifier,delete R.label;this.data.referenceType=void 0}function Ye(R){const q=this.sliceSerialize(R),K=this.stack[this.stack.length-2];K.label=df(q),K.identifier=vr(q).toLowerCase()}function Wt(){const R=this.stack[this.stack.length-1],q=this.resume(),K=this.stack[this.stack.length-1];if(this.data.inReference=!0,K.type==="link"){const ae=R.children;K.children=ae}else K.alt=q}function _(){const R=this.resume(),q=this.stack[this.stack.length-1];q.url=R}function Re(){const R=this.resume(),q=this.stack[this.stack.length-1];q.title=R}function zt(){this.data.inReference=void 0}function I(){this.data.referenceType="collapsed"}function bt(R){const q=this.resume(),K=this.stack[this.stack.length-1];K.label=q,K.identifier=vr(this.sliceSerialize(R)).toLowerCase(),this.data.referenceType="full"}function ut(R){this.data.characterReferenceType=R.type}function Le(R){const q=this.sliceSerialize(R),K=this.data.characterReferenceType;let ae;K?(ae=nf(q,K==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ae=ss(q);const me=this.stack[this.stack.length-1];me.value+=ae}function zn(R){const q=this.stack.pop();q.position.end=Ln(R.end)}function lt(R){de.call(this,R);const q=this.stack[this.stack.length-1];q.url=this.sliceSerialize(R)}function Pt(R){de.call(this,R);const q=this.stack[this.stack.length-1];q.url="mailto:"+this.sliceSerialize(R)}function kn(){return{type:"blockquote",children:[]}}function cn(){return{type:"code",lang:null,meta:null,value:""}}function rr(){return{type:"inlineCode",value:""}}function Xr(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function xt(){return{type:"emphasis",children:[]}}function In(){return{type:"heading",depth:0,children:[]}}function jr(){return{type:"break"}}function At(){return{type:"html",value:""}}function Kr(){return{type:"image",title:null,url:"",alt:null}}function Jr(){return{type:"link",title:null,url:"",children:[]}}function Sn(R){return{type:"list",ordered:R.type==="listOrdered",start:null,spread:R._spread,children:[]}}function vt(R){return{type:"listItem",spread:R._spread,checked:null,children:[]}}function qn(){return{type:"paragraph",children:[]}}function ir(){return{type:"strong",children:[]}}function io(){return{type:"text",value:""}}function Yn(){return{type:"thematicBreak"}}}function Ln(r){return{line:r.line,column:r.column,offset:r.offset}}function gf(r,e){let n=-1;for(;++n<e.length;){const o=e[n];Array.isArray(o)?gf(r,o):Vv(r,o)}}function Vv(r,e){let n;for(n in e)if(pf.call(e,n))switch(n){case"canContainEols":{const o=e[n];o&&r[n].push(...o);break}case"transforms":{const o=e[n];o&&r[n].push(...o);break}case"enter":case"exit":{const o=e[n];o&&Object.assign(r[n],o);break}}}function gc(r,e){throw r?new Error("Cannot close `"+r.type+"` ("+Hr({start:r.start,end:r.end})+"): a different token (`"+e.type+"`, "+Hr({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Hr({start:e.start,end:e.end})+") is still open")}function Va(r){const e=this;e.parser=n;function n(o){return Gv(o,{...e.data("settings"),...r,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}const cs=(function(r){if(r==null)return Jv;if(typeof r=="function")return ro(r);if(typeof r=="object")return Array.isArray(r)?Xv(r):jv(r);if(typeof r=="string")return Kv(r);throw new Error("Expected function, string, or object as test")});function Xv(r){const e=[];let n=-1;for(;++n<r.length;)e[n]=cs(r[n]);return ro(o);function o(...a){let u=-1;for(;++u<e.length;)if(e[u].apply(this,a))return!0;return!1}}function jv(r){const e=r;return ro(n);function n(o){const a=o;let u;for(u in r)if(a[u]!==e[u])return!1;return!0}}function Kv(r){return ro(e);function e(n){return n&&n.type===r}}function ro(r){return e;function e(n,o,a){return!!(Zv(n)&&r.call(this,n,typeof o=="number"?o:void 0,a||void 0))}}function Jv(){return!0}function Zv(r){return r!==null&&typeof r=="object"&&"type"in r}const mf=[],e_=!0,Xa=!1,t_="skip";function n_(r,e,n,o){let a;typeof e=="function"&&typeof n!="function"?(o=n,n=e):a=e;const u=cs(a),l=o?-1:1;c(r,void 0,[])();function c(f,h,p){const g=f&&typeof f=="object"?f:{};if(typeof g.type=="string"){const y=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(w,"name",{value:"node ("+(f.type+(y?"<"+y+">":""))+")"})}return w;function w(){let y=mf,S,E,D;if((!e||u(f,h,p[p.length-1]||void 0))&&(y=r_(n(f,p)),y[0]===Xa))return y;if("children"in f&&f.children){const A=f;if(A.children&&y[0]!==t_)for(E=(o?A.children.length:-1)+l,D=p.concat(A);E>-1&&E<A.children.length;){const N=A.children[E];if(S=c(N,E,D)(),S[0]===Xa)return S;E=typeof S[1]=="number"?S[1]:E+l}}return y}}}function r_(r){return Array.isArray(r)?r:typeof r=="number"?[e_,r]:r==null?mf:[r]}function ja(r,e,n,o){let a,u,l;typeof e=="function"&&typeof n!="function"?(u=void 0,l=e,a=n):(u=e,l=n,a=o),n_(r,u,c,a);function c(f,h){const p=h[h.length-1],g=p?p.children.indexOf(f):void 0;return l(f,g,p)}}const Yi=un(ln.ValueExtractor);class i_{extract(e){const n=Ji().use(Va).parse(e),o=[],a=[],u={};ja(n,l=>{if(l.type==="html"&&l.position){const c=l.value,f=l.position.start.offset;if(c.includes(nn.input)){const h=this.getMeta(c);if(h){const p=this.key(h);c.includes('end"')?u[p]?u[p].endPos=l.position.start.offset:u[p]={meta:h,startPos:-1,endPos:l.position.start.offset,hiddenValues:[]}:u[p]?u[p].startPos=l.position.end.offset:u[p]={meta:h,startPos:l.position.end.offset,endPos:-1,hiddenValues:[]}}}else if(c.includes(nn.hiddenValue)){const h=this.getMeta(c);if(h&&h.value){const p=this.key(h);u[p]||(u[p]={meta:h,startPos:-1,endPos:-1,hiddenValues:[]}),u[p].hiddenValues.push({value:h.value,pos:f})}}}});for(const l in u){const{meta:c,startPos:f,endPos:h,hiddenValues:p}=u[l];if(f===-1||h===-1){if(c.inputType==="text"||c.inputType==="richText"){if(f!==-1&&h===-1){const E=this.findNextInputTagPosition(e,f);if(E!==-1){const A=e.substring(f,E).trim().replace(/^>\s?/gm,"").replace(/<[^>]+>/g,"").trim();if(!A||A===">"){o.push({componentId:c.componentId,inputId:c.inputId,inputType:c.inputType,value:null,errors:[]});continue}}}o.push({componentId:c.componentId,inputId:c.inputId,inputType:c.inputType,value:null,errors:[]});continue}Yi.warn(`Input ${l} missing start or end tag, skipping`);continue}const w=e.substring(f,h).trim().replace(/<\/?span[^>]*>/gs,"").trim(),y=p.filter(E=>E.pos>=f&&E.pos<h).map(E=>E.value),S=this.extractValue(c.inputType,w,y,c);S.errors.length>0&&a.push(...S.errors),o.push({componentId:c.componentId,inputId:c.inputId,inputType:c.inputType,value:S.value,errors:S.errors})}return Yi.dev("Extracted values",o),a.length>0&&Yi.error("Extraction errors:",a),o}findNextInputTagPosition(e,n){const o=new RegExp(`<span[^>]*class="\\$${nn.input}[^"]*"`,"g");o.lastIndex=n;const a=o.exec(e);return a?a.index:-1}getMeta(e){const n=e.match(/data-meta=(?:'([^']+)'|"([^"]+)")/);if(!n)return null;try{return JSON.parse(n[1]||n[2])}catch{return null}}key(e){return`${e.componentId}::${e.inputId}`}extractValue(e,n,o,a){const u=[];let l=null;switch(e){case"boolean":{n.includes("[x]")||n.includes("[X]")?l=!0:n.includes("[ ]")?l=!1:(u.push("Boolean input must be a markdown checkbox"),l=null);break}case"text":{let c=n;if(a.technicalPrefix&&n.trim()===a.technicalPrefix.trim()){l=null;break}if(a.technicalPrefix){const p=a.technicalPrefix.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&");c=c.replace(new RegExp(`^${p}\\s*`,"gm"),"")}else c=c.replace(/^>\s*/gm,"");const f=c.replace(/<[^>]+>/g,"").trim();a.required&&!f&&u.push("Text input is required"),a.placeholder&&f===a.placeholder?l=null:l=f||null;break}case"richText":{let c=n;if(a.technicalPrefix&&n.trim()===a.technicalPrefix.trim()){l=null;break}if(a.technicalPrefix){const p=a.technicalPrefix.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&");c=c.replace(new RegExp(`^${p}\\s*`,"gm"),"")}else c=c.replace(/^>\s*/gm,"");const f=c.replace(/<[^>]+>/g,"").trim();a.required&&!f&&u.push("Rich text input is required"),a.placeholder&&f===a.placeholder?l=null:l=f||null;break}case"multicheckbox":{const c=[],f=n.split(`
`);let h=0;f.forEach(p=>{p.match(/\[(x|X)\]/)&&h<o.length&&c.push(o[h]),p.match(/\[[ xX]\]/)&&h++}),a.required&&c.length===0&&u.push("At least one option must be selected"),a.singleChoice?(c.length>1&&u.push(`Multiple checked values for singleChoice input: ${a.componentId}::${a.inputId} [${c.join(", ")}]`),l=c[0]??null):l=c;break}case"number":{let c=n;if(a.technicalPrefix){const h=a.technicalPrefix.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");c=c.replace(new RegExp(`^${h}`,"gm"),"")}const f=c.match(new RegExp("(?<!\\d)(\\d+(?:[.,]\\d+)?)"));f?(l=parseFloat(f[1].replace(",",".")),a.required&&(l==null||isNaN(l))&&u.push("Number input is required"),typeof l=="number"&&a.min!==void 0&&l<a.min&&u.push(`Number must be >= ${a.min}`),typeof l=="number"&&a.max!==void 0&&l>a.max&&u.push(`Number must be <= ${a.max}`)):(a.required&&u.push("Number input is required"),l=null);break}default:l=n}return{value:l,errors:u}}extractReportMetadata(e){try{const n=Ji().use(Va).parse(e);let o=null;return ja(n,a=>{if(a.type==="html"){const u=a.value;if(u.includes(nn.reportMetadata)){const l=this.getMeta(u);if(l)return o=l,!1}}}),o}catch(n){return Yi.error("Failed to extract report metadata",{error:n}),null}}}const mc=new i_,nt=un(ln.InputCollector);class o_{constructor(e){this.getConfig=e}async collectFromYesterday(){nt.dev("Starting collection of inputs from yesterday‚Äôs reports");const e={};this.getConfig();for(const[n,{folder:o,name:a}]of Object.entries(ef))try{const u=`${Gr.baseOutput}/${o}`;nt.dev(`Checking folder "${u}" for report: ${n}`);const l=await Gr._listFiles(u);if(!l.length){nt.warn(`No files found in "${u}" for report: ${n}`);continue}const f=l.sort((N,z)=>{const W=N.match(/-(\d{5})-/),O=z.match(/-(\d{5})-/);return!W||!O?0:parseInt(O[1])-parseInt(W[1])})[0];if(!f.includes(n)){nt.warn(`Newest file "${f}" in folder "${u}" does not match report type: ${n}`);continue}const h=`${u}/${f}`,p=ge.vault.getAbstractFileByPath(h);if(!p||!("vault"in ge)){nt.error(`Could not load file for report ${n}`,{filePath:h});continue}const g=f.match(/^(\d{8})-(\d{5})-/);let w="",y="";g&&(w=`${g[1].slice(0,4)}-${g[1].slice(4,6)}-${g[1].slice(6,8)}`,y=g[2]),nt.dev(`Reading file: "${h}"`);const S=await ge.vault.read(p);nt.info(`[InputCollector] File content length: ${S.length}`),nt.dev(`[InputCollector] First 500 chars: ${S.substring(0,500)}`);const E=mc.extractReportMetadata(S);nt.info("[InputCollector] Extracted metadata",{reportMetadata:E}),E?(w=E.reportDate,y=E.reportNumber,nt.info(`[InputCollector] Using report metadata from file: date=${w}, number=${y}`)):(nt.warn(`[InputCollector] No metadata found in file, using filename parsing: ${f}`),nt.warn(`[InputCollector] Fallback - reportDate=${w}, reportNumber=${y}`));const A=mc.extract(S).map(N=>({componentId:N.componentId,inputId:N.inputId,type:N.inputType??"unknown",value:N.value,errors:N.errors&&N.errors.length>0?N.errors:void 0,reportType:n,reportDate:w,reportNumber:y}));e[n]=A,nt.dev(`Parsed ${A.length} inputs for report: ${n}`)}catch(u){nt.error(`Failed collecting inputs for ${n}`,{error:u})}return nt.info(`InputCollector finished. Collected reports: ${Object.keys(e).length}`),nt.dev("Collected inputs summary:",{collectedByReport:e}),e}}const a_=new o_(()=>st);function s_(r,e){if(r===void 0)throw new Error("lowdb: missing adapter");if(e===void 0)throw new Error("lowdb: missing default data")}class u_{adapter;data;constructor(e,n){s_(e,n),this.adapter=e,this.data=n}async read(){const e=await this.adapter.read();e&&(this.data=e)}async write(){this.data&&await this.adapter.write(this.data)}async update(e){e(this.data),await this.write()}}const gt=un(ln.DbService);class l_{constructor(e){this.dbPath=e}async read(){try{const e=ge.vault.getAbstractFileByPath(this.dbPath);if(e&&"extension"in e){const n=await ge.vault.read(e);return JSON.parse(n)}return null}catch(e){return gt.error("Error reading database",{error:e}),null}}async write(e){try{const n=JSON.stringify(e,null,2),o=ge.vault.getAbstractFileByPath(this.dbPath);o&&"extension"in o?(await ge.vault.modify(o,n),gt.dev(`Database saved to ${this.dbPath}`)):(await ge.vault.create(this.dbPath,n),gt.info(`Database created at ${this.dbPath}`))}catch(n){gt.error("Error writing database",{error:n})}}}class c_{constructor(){this.db=null}getDbPath(){return`${st.projectDir}/${st.coreDir}/powerjournal-db.json`}async ensureCoreDir(){const e=`${st.projectDir}/${st.coreDir}`;ge.vault.getAbstractFileByPath(e)||(gt.dev(`Creating core directory: ${e}`),await ge.vault.createFolder(e))}async ensureDb(){if(!this.db){await this.ensureCoreDir();const e=this.getDbPath(),n=new l_(e);this.db=new u_(n,{reports:{}}),gt.dev(`Database adapter initialized for ${e}`)}return this.db}async init(){const e=await this.ensureDb();await e.read(),e.data||={reports:{}},gt.dev("Database initialized")}async saveReportInputs(e,n){await this.init();const o=await this.ensureDb();o.data.reports[e]=n,await o.write(),gt.info(`Saved ${n.length} inputs for report type: ${e}`)}async appendReportInputs(e,n){await this.init();const o=await this.ensureDb();o.data.reports[e]||(o.data.reports[e]=[]),o.data.reports[e].push(...n),await o.write(),gt.info(`Appended ${n.length} inputs to report type: ${e}`)}async upsertReportInputs(e,n){await this.init();const o=await this.ensureDb();o.data.reports[e]||(o.data.reports[e]=[]);const a=new Set(n.map(l=>`${l.reportDate}-${l.reportNumber}`)),u=o.data.reports[e].filter(l=>{const c=`${l.reportDate}-${l.reportNumber}`;return!a.has(c)});o.data.reports[e]=[...u,...n],await o.write(),gt.info(`Upserted ${n.length} inputs for ${e} (removed duplicates)`)}async getReportInputs(e){await this.init();const o=(await this.ensureDb()).data.reports[e]||[];return gt.dev(`Retrieved ${o.length} inputs for report type: ${e}`),o}async getInputsById(e,n,o){await this.init();const u=(await this.ensureDb()).data.reports[e]||[],l=Array.isArray(n)?n:[n],c=u.filter(f=>{const h=l.includes(f.inputId),p=o?f.componentId===o:!0;return h&&p});return gt.dev(`Filtered ${c.length} inputs for ${l.join(", ")}${o?` in ${o}`:""}`),c}async getInputsLastNReports(e){const{inputIds:n,count:o,componentId:a,reportType:u=nr.ALMOST_DAILY}=e,c=(await this.getInputsById(u,n,a)).sort((g,w)=>{const y=(w.reportDate||"").localeCompare(g.reportDate||"");return y!==0?y:(w.reportNumber||"0").localeCompare(g.reportNumber||"0")}),h=Array.from(new Set(c.map(g=>g.reportDate))).slice(0,o),p=c.filter(g=>h.includes(g.reportDate));return gt.info(`Retrieved ${p.length} inputs from last ${o} reports`),p}async getInputsInDateRange(e,n,o,a,u){const c=(await this.getInputsById(e,n,u)).filter(f=>{const h=f.reportDate||"";return h>=o&&h<=a});return gt.info(`Retrieved ${c.length} inputs between ${o} and ${a}`),c}async getAvailableInputs(e,n){await this.init();const a=(await this.ensureDb()).data.reports[e]||[],u=new Set(a.filter(l=>l.componentId===n).map(l=>l.inputId));return Array.from(u)}}const jt=new c_,yc={}.hasOwnProperty;function f_(r,e){const n=e||{};function o(a,...u){let l=o.invalid;const c=o.handlers;if(a&&yc.call(a,r)){const f=String(a[r]);l=yc.call(c,f)?c[f]:o.unknown}if(l)return l.call(this,a,...u)}return o.handlers=n.handlers||{},o.invalid=n.invalid,o.unknown=n.unknown,o}const h_={}.hasOwnProperty;function yf(r,e){let n=-1,o;if(e.extensions)for(;++n<e.extensions.length;)yf(r,e.extensions[n]);for(o in e)if(h_.call(e,o))switch(o){case"extensions":break;case"unsafe":{wc(r[o],e[o]);break}case"join":{wc(r[o],e[o]);break}case"handlers":{d_(r[o],e[o]);break}default:r.options[o]=e[o]}return r}function wc(r,e){e&&r.push(...e)}function d_(r,e){e&&Object.assign(r,e)}function p_(r,e,n,o){const a=n.enter("blockquote"),u=n.createTracker(o);u.move("> "),u.shift(2);const l=n.indentLines(n.containerFlow(r,u.current()),g_);return a(),l}function g_(r,e,n){return">"+(n?"":" ")+r}function wf(r,e){return bc(r,e.inConstruct,!0)&&!bc(r,e.notInConstruct,!1)}function bc(r,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let o=-1;for(;++o<e.length;)if(r.includes(e[o]))return!0;return!1}function xc(r,e,n,o){let a=-1;for(;++a<n.unsafe.length;)if(n.unsafe[a].character===`
`&&wf(n.stack,n.unsafe[a]))return/[ \t]/.test(o.before)?"":" ";return`\\
`}function m_(r,e){const n=String(r);let o=n.indexOf(e),a=o,u=0,l=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;o!==-1;)o===a?++u>l&&(l=u):u=1,a=o+e.length,o=n.indexOf(e,a);return l}function Ka(r,e){return!!(e.options.fences===!1&&r.value&&!r.lang&&/[^ \r\n]/.test(r.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(r.value))}function y_(r){const e=r.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function w_(r,e,n,o){const a=y_(n),u=r.value||"",l=a==="`"?"GraveAccent":"Tilde";if(Ka(r,n)){const g=n.enter("codeIndented"),w=n.indentLines(u,b_);return g(),w}const c=n.createTracker(o),f=a.repeat(Math.max(m_(u,a)+1,3)),h=n.enter("codeFenced");let p=c.move(f);if(r.lang){const g=n.enter(`codeFencedLang${l}`);p+=c.move(n.safe(r.lang,{before:p,after:" ",encode:["`"],...c.current()})),g()}if(r.lang&&r.meta){const g=n.enter(`codeFencedMeta${l}`);p+=c.move(" "),p+=c.move(n.safe(r.meta,{before:p,after:`
`,encode:["`"],...c.current()})),g()}return p+=c.move(`
`),u&&(p+=c.move(u+`
`)),p+=c.move(f),h(),p}function b_(r,e,n){return(n?"":"    ")+r}function fs(r){const e=r.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function x_(r,e,n,o){const a=fs(n),u=a==='"'?"Quote":"Apostrophe",l=n.enter("definition");let c=n.enter("label");const f=n.createTracker(o);let h=f.move("[");return h+=f.move(n.safe(n.associationId(r),{before:h,after:"]",...f.current()})),h+=f.move("]: "),c(),!r.url||/[\0- \u007F]/.test(r.url)?(c=n.enter("destinationLiteral"),h+=f.move("<"),h+=f.move(n.safe(r.url,{before:h,after:">",...f.current()})),h+=f.move(">")):(c=n.enter("destinationRaw"),h+=f.move(n.safe(r.url,{before:h,after:r.title?" ":`
`,...f.current()}))),c(),r.title&&(c=n.enter(`title${u}`),h+=f.move(" "+a),h+=f.move(n.safe(r.title,{before:h,after:a,...f.current()})),h+=f.move(a),c()),l(),h}function v_(r){const e=r.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Nn(r){return"&#x"+r.toString(16).toUpperCase()+";"}function eo(r,e,n){const o=Zi(r),a=Zi(e);return o===void 0?a===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:o===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}bf.peek=__;function bf(r,e,n,o){const a=v_(n),u=n.enter("emphasis"),l=n.createTracker(o),c=l.move(a);let f=l.move(n.containerPhrasing(r,{after:a,before:c,...l.current()}));const h=f.charCodeAt(0),p=eo(o.before.charCodeAt(o.before.length-1),h,a);p.inside&&(f=Nn(h)+f.slice(1));const g=f.charCodeAt(f.length-1),w=eo(o.after.charCodeAt(0),g,a);w.inside&&(f=f.slice(0,-1)+Nn(g));const y=l.move(a);return u(),n.attentionEncodeSurroundingInfo={after:w.outside,before:p.outside},c+f+y}function __(r,e,n){return n.options.emphasis||"*"}function xf(r,e){let n=!1;return ja(r,function(o){if("value"in o&&/\r?\n|\r/.test(o.value)||o.type==="break")return n=!0,Xa}),!!((!r.depth||r.depth<3)&&as(r)&&(e.options.setext||n))}function k_(r,e,n,o){const a=Math.max(Math.min(6,r.depth||1),1),u=n.createTracker(o);if(xf(r,n)){const p=n.enter("headingSetext"),g=n.enter("phrasing"),w=n.containerPhrasing(r,{...u.current(),before:`
`,after:`
`});return g(),p(),w+`
`+(a===1?"=":"-").repeat(w.length-(Math.max(w.lastIndexOf("\r"),w.lastIndexOf(`
`))+1))}const l="#".repeat(a),c=n.enter("headingAtx"),f=n.enter("phrasing");u.move(l+" ");let h=n.containerPhrasing(r,{before:"# ",after:`
`,...u.current()});return/^[\t ]/.test(h)&&(h=Nn(h.charCodeAt(0))+h.slice(1)),h=h?l+" "+h:l,n.options.closeAtx&&(h+=" "+l),f(),c(),h}vf.peek=I_;function vf(r){return r.value||""}function I_(){return"<"}_f.peek=S_;function _f(r,e,n,o){const a=fs(n),u=a==='"'?"Quote":"Apostrophe",l=n.enter("image");let c=n.enter("label");const f=n.createTracker(o);let h=f.move("![");return h+=f.move(n.safe(r.alt,{before:h,after:"]",...f.current()})),h+=f.move("]("),c(),!r.url&&r.title||/[\0- \u007F]/.test(r.url)?(c=n.enter("destinationLiteral"),h+=f.move("<"),h+=f.move(n.safe(r.url,{before:h,after:">",...f.current()})),h+=f.move(">")):(c=n.enter("destinationRaw"),h+=f.move(n.safe(r.url,{before:h,after:r.title?" ":")",...f.current()}))),c(),r.title&&(c=n.enter(`title${u}`),h+=f.move(" "+a),h+=f.move(n.safe(r.title,{before:h,after:a,...f.current()})),h+=f.move(a),c()),h+=f.move(")"),l(),h}function S_(){return"!"}kf.peek=C_;function kf(r,e,n,o){const a=r.referenceType,u=n.enter("imageReference");let l=n.enter("label");const c=n.createTracker(o);let f=c.move("![");const h=n.safe(r.alt,{before:f,after:"]",...c.current()});f+=c.move(h+"]["),l();const p=n.stack;n.stack=[],l=n.enter("reference");const g=n.safe(n.associationId(r),{before:f,after:"]",...c.current()});return l(),n.stack=p,u(),a==="full"||!h||h!==g?f+=c.move(g+"]"):a==="shortcut"?f=f.slice(0,-1):f+=c.move("]"),f}function C_(){return"!"}If.peek=T_;function If(r,e,n){let o=r.value||"",a="`",u=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(o);)a+="`";for(/[^ \r\n]/.test(o)&&(/^[ \r\n]/.test(o)&&/[ \r\n]$/.test(o)||/^`|`$/.test(o))&&(o=" "+o+" ");++u<n.unsafe.length;){const l=n.unsafe[u],c=n.compilePattern(l);let f;if(l.atBreak)for(;f=c.exec(o);){let h=f.index;o.charCodeAt(h)===10&&o.charCodeAt(h-1)===13&&h--,o=o.slice(0,h)+" "+o.slice(f.index+1)}}return a+o+a}function T_(){return"`"}function Sf(r,e){const n=as(r);return!!(!e.options.resourceLink&&r.url&&!r.title&&r.children&&r.children.length===1&&r.children[0].type==="text"&&(n===r.url||"mailto:"+n===r.url)&&/^[a-z][a-z+.-]+:/i.test(r.url)&&!/[\0- <>\u007F]/.test(r.url))}Cf.peek=E_;function Cf(r,e,n,o){const a=fs(n),u=a==='"'?"Quote":"Apostrophe",l=n.createTracker(o);let c,f;if(Sf(r,n)){const p=n.stack;n.stack=[],c=n.enter("autolink");let g=l.move("<");return g+=l.move(n.containerPhrasing(r,{before:g,after:">",...l.current()})),g+=l.move(">"),c(),n.stack=p,g}c=n.enter("link"),f=n.enter("label");let h=l.move("[");return h+=l.move(n.containerPhrasing(r,{before:h,after:"](",...l.current()})),h+=l.move("]("),f(),!r.url&&r.title||/[\0- \u007F]/.test(r.url)?(f=n.enter("destinationLiteral"),h+=l.move("<"),h+=l.move(n.safe(r.url,{before:h,after:">",...l.current()})),h+=l.move(">")):(f=n.enter("destinationRaw"),h+=l.move(n.safe(r.url,{before:h,after:r.title?" ":")",...l.current()}))),f(),r.title&&(f=n.enter(`title${u}`),h+=l.move(" "+a),h+=l.move(n.safe(r.title,{before:h,after:a,...l.current()})),h+=l.move(a),f()),h+=l.move(")"),c(),h}function E_(r,e,n){return Sf(r,n)?"<":"["}Tf.peek=P_;function Tf(r,e,n,o){const a=r.referenceType,u=n.enter("linkReference");let l=n.enter("label");const c=n.createTracker(o);let f=c.move("[");const h=n.containerPhrasing(r,{before:f,after:"]",...c.current()});f+=c.move(h+"]["),l();const p=n.stack;n.stack=[],l=n.enter("reference");const g=n.safe(n.associationId(r),{before:f,after:"]",...c.current()});return l(),n.stack=p,u(),a==="full"||!h||h!==g?f+=c.move(g+"]"):a==="shortcut"?f=f.slice(0,-1):f+=c.move("]"),f}function P_(){return"["}function hs(r){const e=r.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function A_(r){const e=hs(r),n=r.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function M_(r){const e=r.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function Ef(r){const e=r.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function D_(r,e,n,o){const a=n.enter("list"),u=n.bulletCurrent;let l=r.ordered?M_(n):hs(n);const c=r.ordered?l==="."?")":".":A_(n);let f=e&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!r.ordered){const p=r.children?r.children[0]:void 0;if((l==="*"||l==="-")&&p&&(!p.children||!p.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(f=!0),Ef(n)===l&&p){let g=-1;for(;++g<r.children.length;){const w=r.children[g];if(w&&w.type==="listItem"&&w.children&&w.children[0]&&w.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(l=c),n.bulletCurrent=l;const h=n.containerFlow(r,o);return n.bulletLastUsed=l,n.bulletCurrent=u,a(),h}function O_(r){const e=r.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function F_(r,e,n,o){const a=O_(n);let u=n.bulletCurrent||hs(n);e&&e.type==="list"&&e.ordered&&(u=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(r))+u);let l=u.length+1;(a==="tab"||a==="mixed"&&(e&&e.type==="list"&&e.spread||r.spread))&&(l=Math.ceil(l/4)*4);const c=n.createTracker(o);c.move(u+" ".repeat(l-u.length)),c.shift(l);const f=n.enter("listItem"),h=n.indentLines(n.containerFlow(r,c.current()),p);return f(),h;function p(g,w,y){return w?(y?"":" ".repeat(l))+g:(y?u:u+" ".repeat(l-u.length))+g}}function R_(r,e,n,o){const a=n.enter("paragraph"),u=n.enter("phrasing"),l=n.containerPhrasing(r,o);return u(),a(),l}const L_=cs(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function $_(r,e,n,o){return(r.children.some(function(l){return L_(l)})?n.containerPhrasing:n.containerFlow).call(n,r,o)}function B_(r){const e=r.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}Pf.peek=N_;function Pf(r,e,n,o){const a=B_(n),u=n.enter("strong"),l=n.createTracker(o),c=l.move(a+a);let f=l.move(n.containerPhrasing(r,{after:a,before:c,...l.current()}));const h=f.charCodeAt(0),p=eo(o.before.charCodeAt(o.before.length-1),h,a);p.inside&&(f=Nn(h)+f.slice(1));const g=f.charCodeAt(f.length-1),w=eo(o.after.charCodeAt(0),g,a);w.inside&&(f=f.slice(0,-1)+Nn(g));const y=l.move(a+a);return u(),n.attentionEncodeSurroundingInfo={after:w.outside,before:p.outside},c+f+y}function N_(r,e,n){return n.options.strong||"*"}function W_(r,e,n,o){return n.safe(r.value,o)}function z_(r){const e=r.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function q_(r,e,n){const o=(Ef(n)+(n.options.ruleSpaces?" ":"")).repeat(z_(n));return n.options.ruleSpaces?o.slice(0,-1):o}const Y_={blockquote:p_,break:xc,code:w_,definition:x_,emphasis:bf,hardBreak:xc,heading:k_,html:vf,image:_f,imageReference:kf,inlineCode:If,link:Cf,linkReference:Tf,list:D_,listItem:F_,paragraph:R_,root:$_,strong:Pf,text:W_,thematicBreak:q_},H_=[U_];function U_(r,e,n,o){if(e.type==="code"&&Ka(e,o)&&(r.type==="list"||r.type===e.type&&Ka(r,o)))return!1;if("spread"in n&&typeof n.spread=="boolean")return r.type==="paragraph"&&(r.type===e.type||e.type==="definition"||e.type==="heading"&&xf(e,o))?void 0:n.spread?1:0}const er=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],G_=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:er},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:er},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:er},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:er},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:er},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:er},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:er},{atBreak:!0,character:"~"}];function Q_(r){return r.label||!r.identifier?r.label||"":df(r.identifier)}function V_(r){if(!r._compiled){const e=(r.atBreak?"[\\r\\n][\\t ]*":"")+(r.before?"(?:"+r.before+")":"");r._compiled=new RegExp((e?"("+e+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(r.character)?"\\":"")+r.character+(r.after?"(?:"+r.after+")":""),"g")}return r._compiled}function X_(r,e,n){const o=e.indexStack,a=r.children||[],u=[];let l=-1,c=n.before,f;o.push(-1);let h=e.createTracker(n);for(;++l<a.length;){const p=a[l];let g;if(o[o.length-1]=l,l+1<a.length){let S=e.handle.handlers[a[l+1].type];S&&S.peek&&(S=S.peek),g=S?S(a[l+1],r,e,{before:"",after:"",...h.current()}).charAt(0):""}else g=n.after;u.length>0&&(c==="\r"||c===`
`)&&p.type==="html"&&(u[u.length-1]=u[u.length-1].replace(/(\r?\n|\r)$/," "),c=" ",h=e.createTracker(n),h.move(u.join("")));let w=e.handle(p,r,e,{...h.current(),after:g,before:c});f&&f===w.slice(0,1)&&(w=Nn(f.charCodeAt(0))+w.slice(1));const y=e.attentionEncodeSurroundingInfo;e.attentionEncodeSurroundingInfo=void 0,f=void 0,y&&(u.length>0&&y.before&&c===u[u.length-1].slice(-1)&&(u[u.length-1]=u[u.length-1].slice(0,-1)+Nn(c.charCodeAt(0))),y.after&&(f=g)),h.move(w),u.push(w),c=w.slice(-1)}return o.pop(),u.join("")}function j_(r,e,n){const o=e.indexStack,a=r.children||[],u=e.createTracker(n),l=[];let c=-1;for(o.push(-1);++c<a.length;){const f=a[c];o[o.length-1]=c,l.push(u.move(e.handle(f,r,e,{before:`
`,after:`
`,...u.current()}))),f.type!=="list"&&(e.bulletLastUsed=void 0),c<a.length-1&&l.push(u.move(K_(f,a[c+1],r,e)))}return o.pop(),l.join("")}function K_(r,e,n,o){let a=o.join.length;for(;a--;){const u=o.join[a](r,e,n,o);if(u===!0||u===1)break;if(typeof u=="number")return`
`.repeat(1+u);if(u===!1)return`

<!---->

`}return`

`}const J_=/\r?\n|\r/g;function Z_(r,e){const n=[];let o=0,a=0,u;for(;u=J_.exec(r);)l(r.slice(o,u.index)),n.push(u[0]),o=u.index+u[0].length,a++;return l(r.slice(o)),n.join("");function l(c){n.push(e(c,a,!c))}}function e2(r,e,n){const o=(n.before||"")+(e||"")+(n.after||""),a=[],u=[],l={};let c=-1;for(;++c<r.unsafe.length;){const p=r.unsafe[c];if(!wf(r.stack,p))continue;const g=r.compilePattern(p);let w;for(;w=g.exec(o);){const y="before"in p||!!p.atBreak,S="after"in p,E=w.index+(y?w[1].length:0);a.includes(E)?(l[E].before&&!y&&(l[E].before=!1),l[E].after&&!S&&(l[E].after=!1)):(a.push(E),l[E]={before:y,after:S})}}a.sort(t2);let f=n.before?n.before.length:0;const h=o.length-(n.after?n.after.length:0);for(c=-1;++c<a.length;){const p=a[c];p<f||p>=h||p+1<h&&a[c+1]===p+1&&l[p].after&&!l[p+1].before&&!l[p+1].after||a[c-1]===p-1&&l[p].before&&!l[p-1].before&&!l[p-1].after||(f!==p&&u.push(vc(o.slice(f,p),"\\")),f=p,/[!-/:-@[-`{-~]/.test(o.charAt(p))&&(!n.encode||!n.encode.includes(o.charAt(p)))?u.push("\\"):(u.push(Nn(o.charCodeAt(p))),f++))}return u.push(vc(o.slice(f,h),n.after)),u.join("")}function t2(r,e){return r-e}function vc(r,e){const n=/\\(?=[!-/:-@[-`{-~])/g,o=[],a=[],u=r+e;let l=-1,c=0,f;for(;f=n.exec(u);)o.push(f.index);for(;++l<o.length;)c!==o[l]&&a.push(r.slice(c,o[l])),a.push("\\"),c=o[l];return a.push(r.slice(c)),a.join("")}function n2(r){const e=r||{},n=e.now||{};let o=e.lineShift||0,a=n.line||1,u=n.column||1;return{move:f,current:l,shift:c};function l(){return{now:{line:a,column:u},lineShift:o}}function c(h){o+=h}function f(h){const p=h||"",g=p.split(/\r?\n|\r/g),w=g[g.length-1];return a+=g.length-1,u=g.length===1?u+w.length:1+w.length+o,p}}function r2(r,e){const n=e||{},o={associationId:Q_,containerPhrasing:s2,containerFlow:u2,createTracker:n2,compilePattern:V_,enter:u,handlers:{...Y_},handle:void 0,indentLines:Z_,indexStack:[],join:[...H_],options:{},safe:l2,stack:[],unsafe:[...G_]};yf(o,n),o.options.tightDefinitions&&o.join.push(a2),o.handle=f_("type",{invalid:i2,unknown:o2,handlers:o.handlers});let a=o.handle(r,void 0,o,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return a&&a.charCodeAt(a.length-1)!==10&&a.charCodeAt(a.length-1)!==13&&(a+=`
`),a;function u(l){return o.stack.push(l),c;function c(){o.stack.pop()}}}function i2(r){throw new Error("Cannot handle value `"+r+"`, expected node")}function o2(r){const e=r;throw new Error("Cannot handle unknown node `"+e.type+"`")}function a2(r,e){if(r.type==="definition"&&r.type===e.type)return 0}function s2(r,e){return X_(r,this,e)}function u2(r,e){return j_(r,this,e)}function l2(r,e){return e2(this,r,e)}function c2(r){const e=this;e.compiler=n;function n(o){return r2(o,{...e.data("settings"),...r,extensions:e.data("toMarkdownExtensions")||[]})}}const ue={text:"text",boolean:"boolean",multicheckbox:"multicheckbox",richText:"richText",number:"number"};class f2{constructor(){this.logger=un(ln.InputCreator)}createInput(e){const{componentId:n,inputId:o,type:a}=e;let u="",l="";try{switch(a){case ue.text:case ue.richText:{const c=e.defaultValue??"";l=">",u=`${l}${c}`;break}case ue.boolean:{const c=e.defaultValue===!0?"x":" ",f=e.label??"Checkbox";u=`- [${c}] ${f}`;break}case ue.multicheckbox:{const c=e.options??[];if(!c.length)throw this.logger.error("multicheckbox must have non-empty options array",{opts:e}),new Error("multicheckbox must have non-empty options array");u=c.map(f=>`- [ ] ${Ki.hiddenValue(n,o,f.value)} ${f.label}`).join(`
`);break}case ue.number:{const c=e.defaultValue??"";l="> {Number} ",u=`${l}${c}`;break}default:throw this.logger.error(`Unknown input type: ${a}`,{opts:e}),new Error("Unknown input type: "+a)}}catch(c){throw this.logger.error("Failed to create input",{error:c,opts:e}),c}return Ki.input.wrap({componentId:n,inputId:o,content:u,inputType:a,technicalPrefix:l})}parseMarkdown(e){try{return Ji().use(Va).parse(e)}catch(n){throw this.logger.error("Failed to parse Markdown",{error:n,md:e}),n}}stringifyMarkdown(e){try{return Ji().use(c2).stringify(e)}catch(n){throw this.logger.error("Failed to stringify Markdown",{error:n,ast:e}),n}}}const $n=new f2,pe={Day:"day",Week:"week",Month:"month",Quarter:"quarter",Year:"year",Decade:"decade"};class h2{async shouldShowInput(e,n=nr.ALMOST_DAILY){const{id:o,schedule:a}=e;return a?!(a.active===!1||!this.isWithinTimeBoundaries(a)||!await this.checkDependencies(a,n)||a.condition&&!a.condition()||!this.shouldShowBasedOnPeriodicity(a)||a.target&&!a.target.keepShowing&&await this.isTargetMet(o,a,n)||a.limit&&await this.isLimitReached(o,a,n)):!0}async getInputProgress(e,n=nr.ALMOST_DAILY){const{id:o,schedule:a}=e,u={};if(!a)return u;if(a.target){const l=this.getPeriodStartDate(a.target.per),c=await this.getCompletionCount(o,l,n);u.targetProgress={current:c,target:a.target.count,isComplete:c>=a.target.count}}if(a.limit){const l=this.getPeriodStartDate(a.limit.per),c=await this.getCompletionCount(o,l,n);u.limitProgress={current:c,limit:a.limit.max,percentage:c/a.limit.max*100}}return u}isWithinTimeBoundaries(e){const o=new Date().toISOString().split("T")[0];return!(e.startDate&&o<e.startDate||e.endDate&&o>e.endDate)}async checkDependencies(e,n){if(e.requiresCompleted&&e.requiresCompleted.length>0){const o=new Date().toISOString().split("T")[0];for(const a of e.requiresCompleted){const l=(await jt.getInputsById(n,a)).find(c=>c.reportDate===o);if(!l||l.value!==!0)return!1}}if(e.hideIfCompleted&&e.hideIfCompleted.length>0){const o=new Date().toISOString().split("T")[0];for(const a of e.hideIfCompleted){const l=(await jt.getInputsById(n,a)).find(c=>c.reportDate===o);if(l&&l.value===!0)return!1}}return!0}shouldShowBasedOnPeriodicity(e){const n=new Date;if(n.toISOString().split("T")[0],e.daysOfWeek&&e.daysOfWeek.length>0){const o=n.getDay();return e.daysOfWeek.map(u=>u===7?0:(u>=1&&u<=6,u)).includes(o)}if(e.datesOfMonth&&e.datesOfMonth.length>0){const o=n.getDate();return e.datesOfMonth.includes(o)}return e.showEvery?this.shouldShowBasedOnShowEvery(e.showEvery.count,e.showEvery.unit):!0}shouldShowBasedOnShowEvery(e,n){if(e===1)return!0;const o=new Date().toISOString().split("T")[0],a=this.getDayNumberFromEpoch(o);switch(n){case pe.Day:return a%e===0;case pe.Week:return Math.floor(a/7)%e===0;case pe.Month:return this.getMonthNumberFromEpoch(o)%e===0;case pe.Quarter:return this.getQuarterNumberFromEpoch(o)%e===0;case pe.Year:return this.getYearNumberFromEpoch(o)%e===0;default:return!0}}async isTargetMet(e,n,o){if(!n.target)return!1;const a=this.getPeriodStartDate(n.target.per);return await this.getCompletionCount(e,a,o)>=n.target.count}async isLimitReached(e,n,o){if(!n.limit)return!1;const a=this.getPeriodStartDate(n.limit.per);return await this.getCompletionCount(e,a,o)>=n.limit.max}async getCompletionCount(e,n,o){return(await jt.getInputsById(o,e)).filter(c=>c.reportDate&&c.reportDate>=n).filter(c=>c.value===!0).length}getPeriodStartDate(e){const n=new Date;switch(e.unit){case pe.Day:if(e.count===1)return n.toISOString().split("T")[0];const o=new Date(n);return o.setDate(n.getDate()-e.count),o.toISOString().split("T")[0];case pe.Week:if(e.count===1){const h=n.getDay(),p=new Date(n);return p.setDate(n.getDate()-(h===0?6:h-1)),p.toISOString().split("T")[0]}const a=new Date(n);return a.setDate(n.getDate()-e.count*7),a.toISOString().split("T")[0];case pe.Month:if(e.count===1)return`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-01`;const u=new Date(n);return u.setMonth(n.getMonth()-e.count),u.toISOString().split("T")[0];case pe.Quarter:if(e.count===1){const p=Math.floor(n.getMonth()/3)*3;return`${n.getFullYear()}-${String(p+1).padStart(2,"0")}-01`}const l=new Date(n);return l.setMonth(n.getMonth()-e.count*3),l.toISOString().split("T")[0];case pe.Year:if(e.count===1)return`${n.getFullYear()}-01-01`;const c=new Date(n);return c.setFullYear(n.getFullYear()-e.count),c.toISOString().split("T")[0];case pe.Decade:return`${Math.floor(n.getFullYear()/10)*10}-01-01`;default:return n.toISOString().split("T")[0]}}getDayNumberFromEpoch(e){const n=new Date("2020-01-01"),a=new Date(e).getTime()-n.getTime();return Math.floor(a/(1e3*60*60*24))}getMonthNumberFromEpoch(e){const n=new Date("2020-01-01"),o=new Date(e),a=o.getFullYear()-n.getFullYear(),u=o.getMonth()-n.getMonth();return a*12+u}getQuarterNumberFromEpoch(e){const n=this.getMonthNumberFromEpoch(e);return Math.floor(n/3)}getYearNumberFromEpoch(e){const n=new Date(e),o=new Date("2020-01-01");return n.getFullYear()-o.getFullYear()}}const Qr=new h2;class wt{constructor(e){this.content=[],this.logger=un(ln.ComponentBuilder),this.componentSchedule=null,this.componentId=e}_md(e,n){const o=typeof e=="function"?e():e;return this.content.push({md:o,schedule:n}),this}_divider(e){return this.content.push({md:`
***
`,schedule:e}),this}_fancyTitle(e,n="‚öõÔ∏é",o){return e?this.content.push({md:`<center>${n} <strong>${e}</strong> ${n}</center>`,schedule:o}):this.content.push({md:"---",schedule:o}),this}_fancyDivider(e,n="‚öõÔ∏é"){return this._fancyTitle(e,n)}_themedDivider(e,n,o){return this.content.push({md:`### ${n} ${e}`,schedule:o}),this}_blockquoteDivider(e,n){return e?this.content.push({md:`> ${e}`,schedule:n}):this.content.push({md:"> ---",schedule:n}),this}_foldable(e,n="Guidance",o){const u=e.split(`
`).map(c=>`> ${c}`),l=`> [!note]- ${n}
${u.join(`
`)}`;return this.content.push({md:l,schedule:o}),this.content.push({md:"",schedule:o}),this}schedule(e){return"schedule"in e&&e.schedule?this.componentSchedule=e.schedule:this.componentSchedule=e,this}_input(e){if("id"in e&&"inputOptions"in e){const o=e;o.inputOptions.type!==ue.boolean&&this._inputLabel(o.label,o.description);const a={...o.inputOptions,componentId:this.componentId};this.content.push({md:$n.createInput(a),schedule:o.schedule,isInput:!0}),o.inputOptions.type!==ue.boolean&&o.inputOptions.type!==ue.multicheckbox&&this.content.push({md:""})}else{const o={...e,componentId:this.componentId};this.content.push({md:$n.createInput(o),isInput:!0})}return this}_inputLabel(e,n){const o=n?`**${e}** ${n}`:`**${e}**`;return this.content.push({md:o}),this}_text(e,n,o){const a=$n.createInput({componentId:this.componentId,type:ue.text,inputId:e,defaultValue:n,placeholder:o});return this.content.push({md:a}),this.content.push({md:""}),this}_richText(e,n,o){this.content.push({md:"<center>¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑</center>"});const a=$n.createInput({componentId:this.componentId,type:ue.richText,inputId:e,defaultValue:n,placeholder:o});return this.content.push({md:a}),this.content.push({md:"<center>¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑</center>"}),this}_boolean(e,n,o){const a=$n.createInput({componentId:this.componentId,type:ue.boolean,inputId:e,label:n,defaultValue:o});return this.content.push({md:a}),this}_number(e,n){const o=$n.createInput({componentId:this.componentId,type:ue.number,inputId:e,defaultValue:n});return this.content.push({md:o}),this}_multiCheckbox(e,n,o,a){const u=$n.createInput({componentId:this.componentId,type:ue.multicheckbox,inputId:e,options:n,defaultValue:o,collapsed:a});return this.content.push({md:u}),this}_multiCheckboxSC(e,n,o,a){const u=$n.createInput({componentId:this.componentId,type:ue.multicheckbox,inputId:e,options:n,singleChoice:!0,defaultValue:o,collapsed:a});return this.content.push({md:u}),this}_nl(){return this.content.push({md:`
`}),this}async render(){if(this.componentSchedule&&!await Qr.shouldShowInput({id:this.componentId,inputOptions:{inputId:this.componentId,type:ue.text},label:this.componentId,schedule:this.componentSchedule}))return this.logger.dev("Component hidden by explicit schedule",{componentId:this.componentId}),"";const e=[];let n=!1,o=0;for(const u of this.content){if(u.isInput&&(n=!0),!u.schedule){e.push(u.md),u.isInput&&o++;continue}await Qr.shouldShowInput({id:`${this.componentId}_item`,inputOptions:{inputId:`${this.componentId}_item`,type:ue.text},label:`${this.componentId}_item`,schedule:u.schedule})&&(e.push(u.md),u.isInput&&o++)}if(n&&o===0)return this.logger.dev("Component hidden - has inputs but none passed schedule evaluation",{componentId:this.componentId}),"";if(e.length===0)return this.logger.dev("Component hidden - no content after schedule evaluation",{componentId:this.componentId}),"";const a=Ki.component.wrap(this.componentId,e.join(`
`));return this.logger.dev("Component rendered",{outputLength:a.length,itemsEvaluated:this.content.length,itemsRendered:e.length,inputsRendered:o}),a}}async function d2(){const r=new wt("consistencyStats");try{const e=await jt.getReportInputs(nr.ALMOST_DAILY);if(!e||e.length===0)return r._md("üìä **Consistency Tracker** ¬∑ üéØ Starting your journey today!"),r.render();const n=Array.from(new Set(e.map(S=>S.reportDate))).sort().reverse(),o=n[n.length-1],a=n[0],u=new Date(o),l=new Date(a),c=Dy(l,u)+1,h=[{days:7,label:"7d"},{days:30,label:"30d"},{days:90,label:"90d"}].map(({days:S,label:E})=>{const D=Math.min(S,c),A=_n(Zc(l,D-1),"yyyy-MM-dd"),N=n.filter(W=>W>=A).length,z=Math.round(N/D*100);return{label:E,requestedDays:S,reports:N,days:D,percentage:z,shouldShow:!1}});for(let S=0;S<h.length;S++){const E=h[S];E.days<E.requestedDays||h.slice(0,S).some(A=>A.shouldShow&&A.days===E.days)||(E.shouldShow=!0)}const p=n.length,g=Math.round(p/c*100),w=[];for(const S of h){if(!S.shouldShow)continue;const E=S.percentage>=80?"üéâ":S.percentage>=60?"‚úÖ":S.percentage>=40?"üìà":"üå±";w.push(`${E} ${S.label}: ${S.reports}/${S.days} (${S.percentage}%)`)}const y=g>=80?"üèÜ":g>=60?"‚≠ê":"üéØ";w.push(`${y} All: ${p}/${c} (${g}%)`),r._md(`üìä **Consistency Tracker** ¬∑ ${w.join(" ¬∑ ")}`)}catch(e){console.error("Consistency stats error:",e),r._md("üìä **Consistency Tracker** ¬∑ Starting fresh!")}return await r.render()}const p2=r=>({...r,inputOptions:{inputId:r.id,type:ue.boolean,label:r.label}}),g2=[{id:"dayPlanning",label:"Planning my day",cue:"After breakfast",reward:"More productive and organized day",schedule:{target:{count:1,per:{count:1,unit:pe.Day}}}},{id:"exercise",label:"Exercise",cue:"Any suitable time during the day",reward:"Better health, more energy, and improved mood",schedule:{target:{count:5,per:{count:1,unit:pe.Week},keepShowing:!0}}},{id:"morningWarmUp",label:"Morning Physical Warm-Up",cue:"After waking up",reward:"Increased energy and readiness for the day",schedule:{target:{count:1,per:{count:1,unit:pe.Day}}}},{id:"recreation",label:"Having fun",cue:"In the evening or during free time",reward:"Relaxation, joy, and stress relief",schedule:{target:{count:1,per:{count:1,unit:pe.Day}}}},{id:"selfPleasure",label:"FPF",cue:"At free from work personal time",reward:"Better focus and increasing ability to feel joy",schedule:{target:{count:7,per:{count:10,unit:pe.Day}}}},{id:"poetryEngaging",label:"Spend time with poetry",cue:"At leisure time",reward:"Happiness and healthy feelings expression from engaging with poetry",schedule:{daysOfWeek:[1,5,6,7],target:{count:3,per:{count:1,unit:pe.Month}}}},{id:"programmingLearning",label:"Programming study",cue:"Dedicated learning time",reward:"Skill development, career growth, and problem-solving mastery",schedule:{target:{count:3,per:{count:1,unit:pe.Week}}}},{id:"recreationalCannabis",label:"Getting high",cue:"Day off (if next day is also day off, then) in safe calm well prepared environment and mood",reward:"Self-care routine, relaxation, stress relief",schedule:{target:{count:1,per:{count:1,unit:pe.Week}},daysOfWeek:[5,6,7],limit:{max:20,per:{count:6,unit:pe.Month}}}},{id:"fastMorningEveningRoutine",label:"Complete morning & evening routine efficiently",cue:"During morning (breakfast, hygiene) and evening (cleaning teeth, preparing for bed) routines",reward:"Save up to 1 hour daily, more productive day, less stress"},{id:"phoneDetox",label:"No phone for 3 hours",cue:"During focused work or leisure time",reward:"Better focus, reduced distractions, mental clarity, reclaimed time",schedule:{target:{count:3,per:{count:1,unit:pe.Week},keepShowing:!0}}}],m2=g2.map(p2),y2=[{label:"3 - Great",value:"3"},{label:"2 - Adequate",value:"2"},{label:"1 - Struggling",value:"1"}],w2=r=>({...r,inputOptions:{inputId:r.id,type:ue.multicheckbox,options:y2,singleChoice:!0}}),b2=[{id:"positiveEmotions",label:"Positive Emotions",description:"Feelings of joy, gratitude, contentment, hope, and pleasure. Includes savoring the moment, reflecting on past positives, and hopeful anticipation of the future."},{id:"engagement",label:"Engagement",description:"Deep involvement in activities; being absorbed, losing sense of time (‚Äòflow‚Äô). Doing work or hobbies that challenge your skills just enough that you‚Äôre fully present."},{id:"relationships",label:"Relationships",description:"Supportive, meaningful social connections. Feeling loved, valued, belonging; giving and receiving support. Close friendships, family bonds, community ties.",schedule:{showEvery:{count:2,unit:pe.Day}}},{id:"meaning",label:"Meaning",description:"Having a sense of purpose, belonging to something bigger than yourself. Knowing what matters in your life and using your strengths in service of values, causes or goals."},{id:"accomplishment",label:"Accomplishment",description:"Mastery, achievement, working toward goals. Sense of progress, competence, whether or not it brings immediate joy‚Äîachieving things that matter to you."},{id:"sleepQuality",label:"Sleep Quality",description:"How well-rested you feel. Quality of sleep, sufficient hours, feeling refreshed upon waking. Sleep is foundational to physical and mental wellbeing."},{id:"embodiment",label:"Embodiment",description:"Body acceptance and feeling at home in your body. Being present in your physical self, body image, self-compassion toward your body, feeling connected rather than disconnected from your physical form.",schedule:{showEvery:{count:3,unit:pe.Day}}},{id:"physicalPleasure",label:"Physical Pleasure",description:"Sensory experiences and bodily comfort. Enjoying food, warmth, movement, relaxation. The simple joys of physical existence‚Äîa hot shower, soft blanket, delicious meal, or stretching your body.",schedule:{showEvery:{count:2,unit:pe.Day}}},{id:"touchAndIntimacy",label:"Touch & Intimacy",description:"Physical affection, connection, and love. Hugs, cuddles, holding hands, sexual intimacy. The warmth and safety of physical closeness with loved ones. Human touch is a fundamental need.",schedule:{showEvery:{count:3,unit:pe.Day}}},{id:"physicalCondition",label:"Physical Condition",description:"Your bodily health: exercise, energy levels and how physically capable you feel. General fitness and vitality."},{id:"nutrition",label:"Nutrition",description:"Quality of your food choices and eating patterns. Nourishing your body with balanced meals, adequate hydration, and mindful eating. Good nutrition fuels energy, mood, and long-term health."},{id:"mindset",label:"Mindset",description:"Cultivating optimism, resilience, self-efficacy, and a growth mindset. A positive mindset shapes how you interpret setbacks, sustain motivation, and approach challenges."},{id:"environment",label:"Environment",description:"Living and working in spaces that feel safe, comfortable, and supportive of wellbeing. Includes access to nature, orderliness, and resources that help you thrive.",schedule:{showEvery:{count:3,unit:pe.Day}}},{id:"economicSecurity",label:"Economic Security",description:"Having financial stability, freedom from chronic money stress, and satisfaction with work. Economic security supports autonomy and reduces background stress that erodes wellbeing.",schedule:{showEvery:{count:10,unit:pe.Day}}}],Ja=b2.map(w2),x2=r=>({...r,inputOptions:{inputId:r.id,type:ue.boolean,label:r.label}}),v2=[{id:"dichotomy_of_control_practice",label:"Stoic Practice. The Dichotomy of Control",category:"stoic",component:"morningReflection",description:"Epictetus' core practice and foundational Stoic exercise that eliminates suffering by training you to focus only on what you can control",guide:`**The Core Principle:**
The Stoics discovered that **all suffering comes from desiring things outside your control**. When you stop struggling against the unchangeable and channel your energy into what you CAN control, you gain peace of mind.

**‚úÖ COMPLETELY IN YOUR CONTROL:**
- Your judgments, opinions, and interpretations
- Your responses and reactions to events
- Your character, virtues, and values
- Your effort, attention, and choices
- How you treat others
- What you pursue and avoid

**‚ùå OUTSIDE YOUR CONTROL:**
- Other people's opinions, actions, and judgments
- Outcomes, results, and consequences
- Past events and future circumstances
- Your reputation and what others think
- External events (weather, traffic, delays)
- Natural processes (aging, sickness, death)

**How to Practice:**
When faced with any situation today, ask yourself: "Is this within my control?" If yes, take action. If no, accept it and focus on your response instead.

_"Make the best use of what is in your power, and take the rest as it happens."_ ‚Äî Epictetus`},{id:"obstacle_is_way_practice",label:"Stoic Practice. The Obstacle Is The Way",category:"stoic",component:"morningReflection",description:"Marcus Aurelius' teaching: obstacles contain hidden opportunities for growth",guide:`**The Core Principle:**
Marcus Aurelius taught: **"The impediment to action advances action. What stands in the way becomes the way."**

This means every obstacle contains hidden opportunity:
- **Blocked plan?** ‚Üí Forces you to become more creative and resourceful
- **Frustrating person?** ‚Üí Opportunity to practice patience and understanding
- **Failure?** ‚Üí Valuable data for learning and improvement
- **Delay?** ‚Üí Gift of time to prepare better or rest

**The Reframe:**
Stop seeing obstacles as enemies. Start seeing them as **training equipment** for your character. Each challenge makes you stronger, wiser, more resilient.

**How to Practice:**
When you face a setback today, ask: "What opportunity is hidden in this obstacle? How is this making me better?"

_"The obstacle is not blocking your path ‚Äì it IS your path. It's revealing where you need to grow."_ ‚Äî Ryan Holiday`}],_2=v2.map(x2),k2=r=>{let e={id:r.inputOptions.inputId,...r,description:r.description||""};return r.inputOptions.type===ue.boolean&&(e.inputOptions.label=r.label),e},I2=[{label:"What Matters Most (Memento Mori)",inputOptions:{inputId:"memento_mori_focus",type:ue.text},description:"You will die. Your days are numbered. What truly matters? Which pillar deserves your limited time?"},{inputOptions:{inputId:"priority_plan",type:ue.text},label:"My #1 Task Today",description:"ONE concrete action serving what matters. When & where will I do it? What's my first 2-minute step?"},{inputOptions:{inputId:"tomorrow_priority",type:ue.text},label:"Tomorrow's #1 Priority"},{inputOptions:{inputId:"message_for_tomorrow",type:ue.richText},label:"Message for Tomorrow",description:"Short and meaningful message for your future self"},{inputOptions:{inputId:"plan_next_day",type:ue.boolean},label:"Plan next day",description:"Calendar events, tasks, notifications"},{inputOptions:{inputId:"accomplishments",type:ue.text},label:"My Win Today",description:"What was my proudest accomplishment? What effort/virtue made it possible?"},{inputOptions:{inputId:"obstacles",type:ue.text},label:"My Obstacle & Learning",description:"What happened? How did I respond? What did I learn? How will I use this?"},{inputOptions:{inputId:"if_then_plan",type:ue.text},label:"My Implementation Intention",description:"If this happens again, I will... (If [OBSTACLE], then I will [RESPONSE])"},{inputOptions:{inputId:"gratitudes",type:ue.richText,placeholder:" 1. "},label:"Three Good Things",description:"*What good happened? Why was it good? What was your role?*"},{inputOptions:{inputId:"main_distraction",type:ue.text},label:"What distracted me most today?",schedule:{showEvery:{count:2,unit:pe.Day}}},{inputOptions:{inputId:"flow_moments",type:ue.text},label:"What helped me focus?",description:"(Environment, time, task type)",schedule:{showEvery:{count:2,unit:pe.Day}}},{inputOptions:{inputId:"willpower_challenge",type:ue.text},label:"What was my biggest temptation/willpower challenge?",schedule:{showEvery:{count:2,unit:pe.Day}}},{inputOptions:{inputId:"strongest_emotion",type:ue.text},label:"What was my strongest emotion today?"},{inputOptions:{inputId:"emotion_trigger",type:ue.text},label:"What triggered it?",description:"Situation, person, thought"},{inputOptions:{inputId:"emotion_response",type:ue.text},label:"How did I respond?"},{inputOptions:{inputId:"better_emotion_response",type:ue.text},label:"What response would I choose next time?"},{inputOptions:{inputId:"negative_visualization",type:ue.text},label:"What you visualized",description:"5 min reflection on what I could lose",schedule:{daysOfWeek:[1,3,5]}},{inputOptions:{inputId:"voluntary_discomfort_practice",type:ue.multicheckbox,options:[{label:"Cold shower (30-60 sec)",value:"cold_shower"},{label:"Less heat/AC than comfortable",value:"less_climate_control"},{label:"Skip stimulants (coffee, guarana, etc.)",value:"skip_stimulants"}],singleChoice:!0},label:"Today's Voluntary Discomfort",description:"Choose ONE small discomfort to practice today",schedule:{daysOfWeek:[1,3,5]}},{inputOptions:{inputId:"mindful_pause_taken",type:ue.boolean},label:"I have taken a mindful pause",schedule:{daysOfWeek:[1,3,5]}}],S2=I2.map(k2),Fe=S2.reduce((r,e)=>({...r,[String(e.id)]:e}),{});async function C2(){const r="morningReflection",e=new wt(r);return e._md("## üßò Morning Reflection (‚≠ê RECOMMENDED)"),_2.filter(n=>n.component===r).forEach(n=>{e._foldable(n.guide,n.label),e._input(n.inputOptions)}),await e.render()}async function T2(){const r="negativeVisualization",e=new wt(r);e._md("## ü™û Negative Visualization (üí° OPTIONAL)"),e._foldable(`**Praemeditatio Malorum** ‚Äî Ancient Stoic gratitude practice

This is NOT pessimism. This is **appreciation training** that the Stoics practiced daily.

**The Problem** ‚Äî we take everything for granted. Your health, your home, your loved ones ‚Äî you stop seeing them. Hedonic adaptation makes you numb to your blessings.

**The Solution** ‚Äî briefly imagine losing what you value. When you mentally "lose" something, you suddenly SEE it again with fresh eyes.

**What this practice does:**
- **Breaks hedonic adaptation** ‚Äî stop taking good things for granted
- **Generates genuine gratitude** ‚Äî feel appreciation, not just think it  
- **Prepares you mentally** ‚Äî if loss happens, the shock is less severe
- **Increases present joy** ‚Äî savor what you have RIGHT NOW

**How to practice:**
1. Close your eyes for 10-20 seconds
2. Vividly imagine ONE thing you value being gone (person, health, home, ability)
3. Feel the loss ‚Äî let it be uncomfortable for a moment
4. Open your eyes and appreciate that you STILL HAVE IT

This isn't dwelling on loss. It's a quick mental exercise to restore wonder.

_"He robs present ills of their power who has perceived their coming beforehand."_ ‚Äî Seneca`,"Stoic Gratitude Practice"),e._md("**Practice Steps:**"),e._md("1. **Close your eyes** ‚Äî take a slow breath"),e._md("2. **Imagine the loss** ‚Äî picture losing someone/something you love (10 seconds)"),e._md("3. **Feel it** ‚Äî don't rush past the discomfort"),e._md("4. **Open your eyes** ‚Äî look around. You still have them. Feel that relief.");try{const n=await jt.getInputsById(nr.ALMOST_DAILY,"negative_visualization");if(n&&n.length>0){const o=_n(kb(new Date,6),"yyyy-MM-dd"),a=n.filter(u=>u.reportDate>=o&&u.value);if(a.length>0){const u=new Map;a.forEach(c=>{const f=String(c.value).trim().toLowerCase();f&&u.set(f,(u.get(f)||0)+1)});const l=Array.from(u.entries()).sort((c,f)=>f[1]-c[1]).slice(0,10).map(([c,f])=>({item:c,count:f}));l.length>0&&(e._md(`
**Your Most Visualized (Last 6 Months):**`),l.forEach(({item:c,count:f})=>{e._md(`- ${c} (${f}√ó)`)}))}}}catch(n){console.error("Error fetching negative visualization history:",n)}return e._input(Fe.negative_visualization),await e.render()}async function E2(){const r="priorityPlanning",e=new wt(r);e._md("## üéØ Priority Planning (üìå CORE - 3-5 min)"),e._foldable(`**Start with Death, Plan with Clarity**

**Memento Mori** (from Stoicism) ‚Äî "Remember you will die." This isn't morbid‚Äîit's the ultimate focusing tool. When you remember death, trivialities fade and what truly matters becomes crystal clear.

**The Four Pillars of Life:**
1. **Happiness & Peace of Mind** ‚Äî inner tranquility and joy
2. **Body & Health** ‚Äî physical wellbeing and vitality  
3. **People & Relationships** ‚Äî love, connection, community
4. **Meaningful Work** ‚Äî contributing something valuable

_"You could leave life right now. Let that determine what you do and say and think."_ ‚Äî Marcus Aurelius

**Implementation Intentions** (from Atomic Habits) ‚Äî being specific doubles success rates:
"I will [BEHAVIOR] at [TIME] in [LOCATION]."

**The Process:**
1. Remember death ‚Üí What pillar needs attention?
2. Choose ONE priority that serves that pillar
3. Make a specific plan with when/where
4. Prepare for obstacles`,"Memento Mori + Implementation Intentions"),e._input(Fe.memento_mori_focus);let n=!0;try{const o=_n(Zc(new Date,1),"yyyy-MM-dd");(await jt.getInputsInDateRange(nr.ALMOST_DAILY,"tomorrow_priority",o,o)).some(l=>l.value&&l.value.trim().length>0)&&(n=!1)}catch(o){console.error("Error checking yesterday's priority:",o)}return n&&e._input(Fe.priority_plan),await e.render()}async function P2(){const r="voluntaryDiscomfort",e=new wt(r);return e._md("## üßä Voluntary Discomfort (üí° OPTIONAL - 2 min)"),e._foldable(`**Practicing Poverty** ‚Äî Seneca's resilience training

The Stoics deliberately practiced small discomforts. Not to punish themselves, but to build mental strength and appreciation.

**The Problem** ‚Äî modern life is TOO comfortable. We become weak, dependent on luxuries, and terrified of any discomfort. When hardship comes, we collapse.

**The Stoic Solution** ‚Äî regularly choose small, voluntary discomforts. This trains your mind that discomfort is survivable‚Äîeven beneficial.

**What this practice does:**
1. **Builds resilience** ‚Äî when real hardship comes, you're prepared
2. **Breaks hedonic adaptation** ‚Äî you stop taking comfort for granted
3. **Strengthens willpower** ‚Äî you prove you can control urges  
4. **Increases appreciation** ‚Äî comfort feels AMAZING after voluntary discomfort
5. **Reduces fear** ‚Äî you learn: "Discomfort won't kill me. I'm stronger than I thought."

**The Science** ‚Äî your brain predicts suffering based on past experience. If you've never been uncomfortable, small discomforts feel catastrophic. If you practice discomfort, your brain learns: "This is manageable."

**How to practice:**
Choose ONE small discomfort today. Not as punishment ‚Äî as TRAINING.
- Physical: cold shower, skip a meal, exercise when tired
- Social: have the difficult conversation, say no to someone
- Habitual: skip coffee, no phone for 2 hours, sit in silence

**Key** ‚Äî the discomfort should be VOLUNTARY and MILD. You're training, not torturing.

_"We suffer more often in imagination than in reality."_ ‚Äî Seneca
_"Set aside a certain number of days to be content with little and practice poverty."_ ‚Äî Seneca`,"Stoic Resilience Training"),e._input(Fe.voluntary_discomfort_practice),await e.render()}function Af(r){if(r.length===0)return 0;var e=r[0],n=0,o;if(typeof e!="number")return Number.NaN;for(var a=1;a<r.length;a++){if(typeof r[a]!="number")return Number.NaN;o=e+r[a],Math.abs(e)>=Math.abs(r[a])?n+=e-o+r[a]:n+=r[a]-o+e,e=o}return e+n}function Mf(r){if(r.length===0)throw new Error("mean requires at least one data point");return Af(r)/r.length}function A2(r,e){var n=Mf(r),o=0,a,u;for(u=0;u<r.length;u++)a=r[u]-n,o+=a*a;return o}function Df(r){if(r.length===0)throw new Error("variance requires at least one data point");return A2(r)/r.length}function M2(r){if(r.length===1)return 0;var e=Df(r);return Math.sqrt(e)}function D2(r){if(r.length===0)throw new Error("mode requires at least one data point");if(r.length===1)return r[0];for(var e=r[0],n=Number.NaN,o=0,a=1,u=1;u<r.length+1;u++)r[u]!==e?(a>o&&(o=a,n=e),a=1,e=r[u]):a++;return n}function O2(r){return r.slice().sort(function(e,n){return e-n})}function F2(r){return D2(O2(r))}function _c(r){if(r.length===0)throw new Error("min requires at least one data point");for(var e=r[0],n=1;n<r.length;n++)r[n]<e&&(e=r[n]);return e}function kc(r){if(r.length===0)throw new Error("max requires at least one data point");for(var e=r[0],n=1;n<r.length;n++)r[n]>e&&(e=r[n]);return e}function Ic(r,e){var n=r.length*e;if(r.length===0)throw new Error("quantile requires at least one data point.");if(e<0||e>1)throw new Error("quantiles must be between 0 and 1");return e===1?r[r.length-1]:e===0?r[0]:n%1!==0?r[Math.ceil(n)-1]:r.length%2===0?(r[n-1]+r[n])/2:r[n]}function Qi(r,e,n,o){for(n=n||0,o=o||r.length-1;o>n;){if(o-n>600){var a=o-n+1,u=e-n+1,l=Math.log(a),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(a-c)/a);u-a/2<0&&(f*=-1);var h=Math.max(n,Math.floor(e-u*c/a+f)),p=Math.min(o,Math.floor(e+(a-u)*c/a+f));Qi(r,e,h,p)}var g=r[e],w=n,y=o;for(qr(r,n,e),r[o]>g&&qr(r,n,o);w<y;){for(qr(r,w,y),w++,y--;r[w]<g;)w++;for(;r[y]>g;)y--}r[n]===g?qr(r,n,y):(y++,qr(r,y,o)),y<=e&&(n=y+1),e<=y&&(o=y-1)}}function qr(r,e,n){var o=r[e];r[e]=r[n],r[n]=o}function Za(r,e){var n=r.slice();if(Array.isArray(e)){R2(n,e);for(var o=[],a=0;a<e.length;a++)o[a]=Ic(n,e[a]);return o}else{var u=Ff(n.length,e);return Of(n,u,0,n.length-1),Ic(n,e)}}function Of(r,e,n,o){e%1===0?Qi(r,e,n,o):(e=Math.floor(e),Qi(r,e,n,o),Qi(r,e+1,e+1,o))}function R2(r,e){for(var n=[0],o=0;o<e.length;o++)n.push(Ff(r.length,e[o]));n.push(r.length-1),n.sort(L2);for(var a=[0,n.length-1];a.length;){var u=Math.ceil(a.pop()),l=Math.floor(a.pop());if(!(u-l<=1)){var c=Math.floor((l+u)/2);Of(r,n[c],Math.floor(n[l]),Math.ceil(n[u])),a.push(l,c,c,u)}}}function L2(r,e){return r-e}function Ff(r,e){var n=r*e;return e===1?r-1:e===0?0:n%1!==0?Math.ceil(n)-1:r%2===0?n-.5:n}function $2(r){return+Za(r,.5)}var Ma={},Sc;function B2(){return Sc||(Sc=1,(function(r){(function(e){e.black="\x1B[30m",e.red="\x1B[31m",e.green="\x1B[32m",e.yellow="\x1B[33m",e.blue="\x1B[34m",e.magenta="\x1B[35m",e.cyan="\x1B[36m",e.lightgray="\x1B[37m",e.default="\x1B[39m",e.darkgray="\x1B[90m",e.lightred="\x1B[91m",e.lightgreen="\x1B[92m",e.lightyellow="\x1B[93m",e.lightblue="\x1B[94m",e.lightmagenta="\x1B[95m",e.lightcyan="\x1B[96m",e.white="\x1B[97m",e.reset="\x1B[0m";function n(o,a){return a===void 0?o:a+o+e.reset}e.colored=n,e.plot=function(o,a=void 0){typeof o[0]=="number"&&(o=[o]),a=typeof a<"u"?a:{};let u=typeof a.min<"u"?a.min:o[0][0],l=typeof a.max<"u"?a.max:o[0][0];for(let O=0;O<o.length;O++)for(let P=0;P<o[O].length;P++)u=Math.min(u,o[O][P]),l=Math.max(l,o[O][P]);let c=["‚îº","‚î§","‚ï∂","‚ï¥","‚îÄ","‚ï∞","‚ï≠","‚ïÆ","‚ïØ","‚îÇ"],f=Math.abs(l-u),h=typeof a.offset<"u"?a.offset:3,p=typeof a.padding<"u"?a.padding:"           ",g=typeof a.height<"u"?a.height:f,w=typeof a.colors<"u"?a.colors:[],y=f!==0?g/f:1,S=Math.round(u*y),E=Math.round(l*y),D=Math.abs(E-S),A=0;for(let O=0;O<o.length;O++)A=Math.max(A,o[O].length);A=A+h;let N=typeof a.symbols<"u"?a.symbols:c,z=typeof a.format<"u"?a.format:function(O){return(p+O.toFixed(2)).slice(-p.length)},W=new Array(D+1);for(let O=0;O<=D;O++){W[O]=new Array(A);for(let P=0;P<A;P++)W[O][P]=" "}for(let O=S;O<=E;++O){let P=z(D>0?l-(O-S)*f/D:O,O-S);W[O-S][Math.max(h-P.length,0)]=P,W[O-S][h-1]=O==0?N[0]:N[1]}for(let O=0;O<o.length;O++){let P=w[O%w.length],U=Math.round(o[O][0]*y)-S;W[D-U][h-1]=n(N[0],P);for(let V=0;V<o[O].length-1;V++){let ee=Math.round(o[O][V+0]*y)-S,de=Math.round(o[O][V+1]*y)-S;if(ee==de)W[D-ee][V+h]=n(N[4],P);else{W[D-de][V+h]=n(ee>de?N[5]:N[6],P),W[D-ee][V+h]=n(ee>de?N[7]:N[8],P);let X=Math.min(ee,de),Q=Math.max(ee,de);for(let xe=X+1;xe<Q;xe++)W[D-xe][V+h]=n(N[9],P)}}}return W.map(function(O){return O.join("")}).join(`
`)}})(r)})(Ma)),Ma}var N2=B2(),Vi={exports:{}},Da,Cc;function W2(){return Cc||(Cc=1,Da={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),Da}var Oa,Tc;function Rf(){if(Tc)return Oa;Tc=1;const r=W2(),e={};for(const a of Object.keys(r))e[r[a]]=a;const n={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};Oa=n;for(const a of Object.keys(n)){if(!("channels"in n[a]))throw new Error("missing channels property: "+a);if(!("labels"in n[a]))throw new Error("missing channel labels property: "+a);if(n[a].labels.length!==n[a].channels)throw new Error("channel and label counts mismatch: "+a);const{channels:u,labels:l}=n[a];delete n[a].channels,delete n[a].labels,Object.defineProperty(n[a],"channels",{value:u}),Object.defineProperty(n[a],"labels",{value:l})}n.rgb.hsl=function(a){const u=a[0]/255,l=a[1]/255,c=a[2]/255,f=Math.min(u,l,c),h=Math.max(u,l,c),p=h-f;let g,w;h===f?g=0:u===h?g=(l-c)/p:l===h?g=2+(c-u)/p:c===h&&(g=4+(u-l)/p),g=Math.min(g*60,360),g<0&&(g+=360);const y=(f+h)/2;return h===f?w=0:y<=.5?w=p/(h+f):w=p/(2-h-f),[g,w*100,y*100]},n.rgb.hsv=function(a){let u,l,c,f,h;const p=a[0]/255,g=a[1]/255,w=a[2]/255,y=Math.max(p,g,w),S=y-Math.min(p,g,w),E=function(D){return(y-D)/6/S+1/2};return S===0?(f=0,h=0):(h=S/y,u=E(p),l=E(g),c=E(w),p===y?f=c-l:g===y?f=1/3+u-c:w===y&&(f=2/3+l-u),f<0?f+=1:f>1&&(f-=1)),[f*360,h*100,y*100]},n.rgb.hwb=function(a){const u=a[0],l=a[1];let c=a[2];const f=n.rgb.hsl(a)[0],h=1/255*Math.min(u,Math.min(l,c));return c=1-1/255*Math.max(u,Math.max(l,c)),[f,h*100,c*100]},n.rgb.cmyk=function(a){const u=a[0]/255,l=a[1]/255,c=a[2]/255,f=Math.min(1-u,1-l,1-c),h=(1-u-f)/(1-f)||0,p=(1-l-f)/(1-f)||0,g=(1-c-f)/(1-f)||0;return[h*100,p*100,g*100,f*100]};function o(a,u){return(a[0]-u[0])**2+(a[1]-u[1])**2+(a[2]-u[2])**2}return n.rgb.keyword=function(a){const u=e[a];if(u)return u;let l=1/0,c;for(const f of Object.keys(r)){const h=r[f],p=o(a,h);p<l&&(l=p,c=f)}return c},n.keyword.rgb=function(a){return r[a]},n.rgb.xyz=function(a){let u=a[0]/255,l=a[1]/255,c=a[2]/255;u=u>.04045?((u+.055)/1.055)**2.4:u/12.92,l=l>.04045?((l+.055)/1.055)**2.4:l/12.92,c=c>.04045?((c+.055)/1.055)**2.4:c/12.92;const f=u*.4124+l*.3576+c*.1805,h=u*.2126+l*.7152+c*.0722,p=u*.0193+l*.1192+c*.9505;return[f*100,h*100,p*100]},n.rgb.lab=function(a){const u=n.rgb.xyz(a);let l=u[0],c=u[1],f=u[2];l/=95.047,c/=100,f/=108.883,l=l>.008856?l**(1/3):7.787*l+16/116,c=c>.008856?c**(1/3):7.787*c+16/116,f=f>.008856?f**(1/3):7.787*f+16/116;const h=116*c-16,p=500*(l-c),g=200*(c-f);return[h,p,g]},n.hsl.rgb=function(a){const u=a[0]/360,l=a[1]/100,c=a[2]/100;let f,h,p;if(l===0)return p=c*255,[p,p,p];c<.5?f=c*(1+l):f=c+l-c*l;const g=2*c-f,w=[0,0,0];for(let y=0;y<3;y++)h=u+1/3*-(y-1),h<0&&h++,h>1&&h--,6*h<1?p=g+(f-g)*6*h:2*h<1?p=f:3*h<2?p=g+(f-g)*(2/3-h)*6:p=g,w[y]=p*255;return w},n.hsl.hsv=function(a){const u=a[0];let l=a[1]/100,c=a[2]/100,f=l;const h=Math.max(c,.01);c*=2,l*=c<=1?c:2-c,f*=h<=1?h:2-h;const p=(c+l)/2,g=c===0?2*f/(h+f):2*l/(c+l);return[u,g*100,p*100]},n.hsv.rgb=function(a){const u=a[0]/60,l=a[1]/100;let c=a[2]/100;const f=Math.floor(u)%6,h=u-Math.floor(u),p=255*c*(1-l),g=255*c*(1-l*h),w=255*c*(1-l*(1-h));switch(c*=255,f){case 0:return[c,w,p];case 1:return[g,c,p];case 2:return[p,c,w];case 3:return[p,g,c];case 4:return[w,p,c];case 5:return[c,p,g]}},n.hsv.hsl=function(a){const u=a[0],l=a[1]/100,c=a[2]/100,f=Math.max(c,.01);let h,p;p=(2-l)*c;const g=(2-l)*f;return h=l*f,h/=g<=1?g:2-g,h=h||0,p/=2,[u,h*100,p*100]},n.hwb.rgb=function(a){const u=a[0]/360;let l=a[1]/100,c=a[2]/100;const f=l+c;let h;f>1&&(l/=f,c/=f);const p=Math.floor(6*u),g=1-c;h=6*u-p,(p&1)!==0&&(h=1-h);const w=l+h*(g-l);let y,S,E;switch(p){default:case 6:case 0:y=g,S=w,E=l;break;case 1:y=w,S=g,E=l;break;case 2:y=l,S=g,E=w;break;case 3:y=l,S=w,E=g;break;case 4:y=w,S=l,E=g;break;case 5:y=g,S=l,E=w;break}return[y*255,S*255,E*255]},n.cmyk.rgb=function(a){const u=a[0]/100,l=a[1]/100,c=a[2]/100,f=a[3]/100,h=1-Math.min(1,u*(1-f)+f),p=1-Math.min(1,l*(1-f)+f),g=1-Math.min(1,c*(1-f)+f);return[h*255,p*255,g*255]},n.xyz.rgb=function(a){const u=a[0]/100,l=a[1]/100,c=a[2]/100;let f,h,p;return f=u*3.2406+l*-1.5372+c*-.4986,h=u*-.9689+l*1.8758+c*.0415,p=u*.0557+l*-.204+c*1.057,f=f>.0031308?1.055*f**(1/2.4)-.055:f*12.92,h=h>.0031308?1.055*h**(1/2.4)-.055:h*12.92,p=p>.0031308?1.055*p**(1/2.4)-.055:p*12.92,f=Math.min(Math.max(0,f),1),h=Math.min(Math.max(0,h),1),p=Math.min(Math.max(0,p),1),[f*255,h*255,p*255]},n.xyz.lab=function(a){let u=a[0],l=a[1],c=a[2];u/=95.047,l/=100,c/=108.883,u=u>.008856?u**(1/3):7.787*u+16/116,l=l>.008856?l**(1/3):7.787*l+16/116,c=c>.008856?c**(1/3):7.787*c+16/116;const f=116*l-16,h=500*(u-l),p=200*(l-c);return[f,h,p]},n.lab.xyz=function(a){const u=a[0],l=a[1],c=a[2];let f,h,p;h=(u+16)/116,f=l/500+h,p=h-c/200;const g=h**3,w=f**3,y=p**3;return h=g>.008856?g:(h-16/116)/7.787,f=w>.008856?w:(f-16/116)/7.787,p=y>.008856?y:(p-16/116)/7.787,f*=95.047,h*=100,p*=108.883,[f,h,p]},n.lab.lch=function(a){const u=a[0],l=a[1],c=a[2];let f;f=Math.atan2(c,l)*360/2/Math.PI,f<0&&(f+=360);const p=Math.sqrt(l*l+c*c);return[u,p,f]},n.lch.lab=function(a){const u=a[0],l=a[1],f=a[2]/360*2*Math.PI,h=l*Math.cos(f),p=l*Math.sin(f);return[u,h,p]},n.rgb.ansi16=function(a,u=null){const[l,c,f]=a;let h=u===null?n.rgb.hsv(a)[2]:u;if(h=Math.round(h/50),h===0)return 30;let p=30+(Math.round(f/255)<<2|Math.round(c/255)<<1|Math.round(l/255));return h===2&&(p+=60),p},n.hsv.ansi16=function(a){return n.rgb.ansi16(n.hsv.rgb(a),a[2])},n.rgb.ansi256=function(a){const u=a[0],l=a[1],c=a[2];return u===l&&l===c?u<8?16:u>248?231:Math.round((u-8)/247*24)+232:16+36*Math.round(u/255*5)+6*Math.round(l/255*5)+Math.round(c/255*5)},n.ansi16.rgb=function(a){let u=a%10;if(u===0||u===7)return a>50&&(u+=3.5),u=u/10.5*255,[u,u,u];const l=(~~(a>50)+1)*.5,c=(u&1)*l*255,f=(u>>1&1)*l*255,h=(u>>2&1)*l*255;return[c,f,h]},n.ansi256.rgb=function(a){if(a>=232){const h=(a-232)*10+8;return[h,h,h]}a-=16;let u;const l=Math.floor(a/36)/5*255,c=Math.floor((u=a%36)/6)/5*255,f=u%6/5*255;return[l,c,f]},n.rgb.hex=function(a){const l=(((Math.round(a[0])&255)<<16)+((Math.round(a[1])&255)<<8)+(Math.round(a[2])&255)).toString(16).toUpperCase();return"000000".substring(l.length)+l},n.hex.rgb=function(a){const u=a.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!u)return[0,0,0];let l=u[0];u[0].length===3&&(l=l.split("").map(g=>g+g).join(""));const c=parseInt(l,16),f=c>>16&255,h=c>>8&255,p=c&255;return[f,h,p]},n.rgb.hcg=function(a){const u=a[0]/255,l=a[1]/255,c=a[2]/255,f=Math.max(Math.max(u,l),c),h=Math.min(Math.min(u,l),c),p=f-h;let g,w;return p<1?g=h/(1-p):g=0,p<=0?w=0:f===u?w=(l-c)/p%6:f===l?w=2+(c-u)/p:w=4+(u-l)/p,w/=6,w%=1,[w*360,p*100,g*100]},n.hsl.hcg=function(a){const u=a[1]/100,l=a[2]/100,c=l<.5?2*u*l:2*u*(1-l);let f=0;return c<1&&(f=(l-.5*c)/(1-c)),[a[0],c*100,f*100]},n.hsv.hcg=function(a){const u=a[1]/100,l=a[2]/100,c=u*l;let f=0;return c<1&&(f=(l-c)/(1-c)),[a[0],c*100,f*100]},n.hcg.rgb=function(a){const u=a[0]/360,l=a[1]/100,c=a[2]/100;if(l===0)return[c*255,c*255,c*255];const f=[0,0,0],h=u%1*6,p=h%1,g=1-p;let w=0;switch(Math.floor(h)){case 0:f[0]=1,f[1]=p,f[2]=0;break;case 1:f[0]=g,f[1]=1,f[2]=0;break;case 2:f[0]=0,f[1]=1,f[2]=p;break;case 3:f[0]=0,f[1]=g,f[2]=1;break;case 4:f[0]=p,f[1]=0,f[2]=1;break;default:f[0]=1,f[1]=0,f[2]=g}return w=(1-l)*c,[(l*f[0]+w)*255,(l*f[1]+w)*255,(l*f[2]+w)*255]},n.hcg.hsv=function(a){const u=a[1]/100,l=a[2]/100,c=u+l*(1-u);let f=0;return c>0&&(f=u/c),[a[0],f*100,c*100]},n.hcg.hsl=function(a){const u=a[1]/100,c=a[2]/100*(1-u)+.5*u;let f=0;return c>0&&c<.5?f=u/(2*c):c>=.5&&c<1&&(f=u/(2*(1-c))),[a[0],f*100,c*100]},n.hcg.hwb=function(a){const u=a[1]/100,l=a[2]/100,c=u+l*(1-u);return[a[0],(c-u)*100,(1-c)*100]},n.hwb.hcg=function(a){const u=a[1]/100,c=1-a[2]/100,f=c-u;let h=0;return f<1&&(h=(c-f)/(1-f)),[a[0],f*100,h*100]},n.apple.rgb=function(a){return[a[0]/65535*255,a[1]/65535*255,a[2]/65535*255]},n.rgb.apple=function(a){return[a[0]/255*65535,a[1]/255*65535,a[2]/255*65535]},n.gray.rgb=function(a){return[a[0]/100*255,a[0]/100*255,a[0]/100*255]},n.gray.hsl=function(a){return[0,0,a[0]]},n.gray.hsv=n.gray.hsl,n.gray.hwb=function(a){return[0,100,a[0]]},n.gray.cmyk=function(a){return[0,0,0,a[0]]},n.gray.lab=function(a){return[a[0],0,0]},n.gray.hex=function(a){const u=Math.round(a[0]/100*255)&255,c=((u<<16)+(u<<8)+u).toString(16).toUpperCase();return"000000".substring(c.length)+c},n.rgb.gray=function(a){return[(a[0]+a[1]+a[2])/3/255*100]},Oa}var Fa,Ec;function z2(){if(Ec)return Fa;Ec=1;const r=Rf();function e(){const u={},l=Object.keys(r);for(let c=l.length,f=0;f<c;f++)u[l[f]]={distance:-1,parent:null};return u}function n(u){const l=e(),c=[u];for(l[u].distance=0;c.length;){const f=c.pop(),h=Object.keys(r[f]);for(let p=h.length,g=0;g<p;g++){const w=h[g],y=l[w];y.distance===-1&&(y.distance=l[f].distance+1,y.parent=f,c.unshift(w))}}return l}function o(u,l){return function(c){return l(u(c))}}function a(u,l){const c=[l[u].parent,u];let f=r[l[u].parent][u],h=l[u].parent;for(;l[h].parent;)c.unshift(l[h].parent),f=o(r[l[h].parent][h],f),h=l[h].parent;return f.conversion=c,f}return Fa=function(u){const l=n(u),c={},f=Object.keys(l);for(let h=f.length,p=0;p<h;p++){const g=f[p];l[g].parent!==null&&(c[g]=a(g,l))}return c},Fa}var Ra,Pc;function q2(){if(Pc)return Ra;Pc=1;const r=Rf(),e=z2(),n={},o=Object.keys(r);function a(l){const c=function(...f){const h=f[0];return h==null?h:(h.length>1&&(f=h),l(f))};return"conversion"in l&&(c.conversion=l.conversion),c}function u(l){const c=function(...f){const h=f[0];if(h==null)return h;h.length>1&&(f=h);const p=l(f);if(typeof p=="object")for(let g=p.length,w=0;w<g;w++)p[w]=Math.round(p[w]);return p};return"conversion"in l&&(c.conversion=l.conversion),c}return o.forEach(l=>{n[l]={},Object.defineProperty(n[l],"channels",{value:r[l].channels}),Object.defineProperty(n[l],"labels",{value:r[l].labels});const c=e(l);Object.keys(c).forEach(h=>{const p=c[h];n[l][h]=u(p),n[l][h].raw=a(p)})}),Ra=n,Ra}Vi.exports;var Ac;function Y2(){return Ac||(Ac=1,(function(r){const e=(p,g)=>(...w)=>`\x1B[${p(...w)+g}m`,n=(p,g)=>(...w)=>{const y=p(...w);return`\x1B[${38+g};5;${y}m`},o=(p,g)=>(...w)=>{const y=p(...w);return`\x1B[${38+g};2;${y[0]};${y[1]};${y[2]}m`},a=p=>p,u=(p,g,w)=>[p,g,w],l=(p,g,w)=>{Object.defineProperty(p,g,{get:()=>{const y=w();return Object.defineProperty(p,g,{value:y,enumerable:!0,configurable:!0}),y},enumerable:!0,configurable:!0})};let c;const f=(p,g,w,y)=>{c===void 0&&(c=q2());const S=y?10:0,E={};for(const[D,A]of Object.entries(c)){const N=D==="ansi16"?"ansi":D;D===g?E[N]=p(w,S):typeof A=="object"&&(E[N]=p(A[g],S))}return E};function h(){const p=new Map,g={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};g.color.gray=g.color.blackBright,g.bgColor.bgGray=g.bgColor.bgBlackBright,g.color.grey=g.color.blackBright,g.bgColor.bgGrey=g.bgColor.bgBlackBright;for(const[w,y]of Object.entries(g)){for(const[S,E]of Object.entries(y))g[S]={open:`\x1B[${E[0]}m`,close:`\x1B[${E[1]}m`},y[S]=g[S],p.set(E[0],E[1]);Object.defineProperty(g,w,{value:y,enumerable:!1})}return Object.defineProperty(g,"codes",{value:p,enumerable:!1}),g.color.close="\x1B[39m",g.bgColor.close="\x1B[49m",l(g.color,"ansi",()=>f(e,"ansi16",a,!1)),l(g.color,"ansi256",()=>f(n,"ansi256",a,!1)),l(g.color,"ansi16m",()=>f(o,"rgb",u,!1)),l(g.bgColor,"ansi",()=>f(e,"ansi16",a,!0)),l(g.bgColor,"ansi256",()=>f(n,"ansi256",a,!0)),l(g.bgColor,"ansi16m",()=>f(o,"rgb",u,!0)),g}Object.defineProperty(r,"exports",{enumerable:!0,get:h})})(Vi)),Vi.exports}var La,Mc;function H2(){return Mc||(Mc=1,La={stdout:!1,stderr:!1}),La}var $a,Dc;function U2(){return Dc||(Dc=1,$a={stringReplaceAll:(n,o,a)=>{let u=n.indexOf(o);if(u===-1)return n;const l=o.length;let c=0,f="";do f+=n.substr(c,u-c)+o+a,c=u+l,u=n.indexOf(o,c);while(u!==-1);return f+=n.substr(c),f},stringEncaseCRLFWithFirstIndex:(n,o,a,u)=>{let l=0,c="";do{const f=n[u-1]==="\r";c+=n.substr(l,(f?u-1:u)-l)+o+(f?`\r
`:`
`)+a,l=u+1,u=n.indexOf(`
`,l)}while(u!==-1);return c+=n.substr(l),c}}),$a}var Ba,Oc;function G2(){if(Oc)return Ba;Oc=1;const r=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,e=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,n=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,o=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,a=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function u(h){const p=h[0]==="u",g=h[1]==="{";return p&&!g&&h.length===5||h[0]==="x"&&h.length===3?String.fromCharCode(parseInt(h.slice(1),16)):p&&g?String.fromCodePoint(parseInt(h.slice(2,-1),16)):a.get(h)||h}function l(h,p){const g=[],w=p.trim().split(/\s*,\s*/g);let y;for(const S of w){const E=Number(S);if(!Number.isNaN(E))g.push(E);else if(y=S.match(n))g.push(y[2].replace(o,(D,A,N)=>A?u(A):N));else throw new Error(`Invalid Chalk template style argument: ${S} (in style '${h}')`)}return g}function c(h){e.lastIndex=0;const p=[];let g;for(;(g=e.exec(h))!==null;){const w=g[1];if(g[2]){const y=l(w,g[2]);p.push([w].concat(y))}else p.push([w])}return p}function f(h,p){const g={};for(const y of p)for(const S of y.styles)g[S[0]]=y.inverse?null:S.slice(1);let w=h;for(const[y,S]of Object.entries(g))if(Array.isArray(S)){if(!(y in w))throw new Error(`Unknown Chalk style: ${y}`);w=S.length>0?w[y](...S):w[y]}return w}return Ba=(h,p)=>{const g=[],w=[];let y=[];if(p.replace(r,(S,E,D,A,N,z)=>{if(E)y.push(u(E));else if(A){const W=y.join("");y=[],w.push(g.length===0?W:f(h,g)(W)),g.push({inverse:D,styles:c(A)})}else if(N){if(g.length===0)throw new Error("Found extraneous } in Chalk template literal");w.push(f(h,g)(y.join(""))),y=[],g.pop()}else y.push(z)}),w.push(y.join("")),g.length>0){const S=`Chalk template literal is missing ${g.length} closing bracket${g.length===1?"":"s"} (\`}\`)`;throw new Error(S)}return w.join("")},Ba}var Na,Fc;function Q2(){if(Fc)return Na;Fc=1;const r=Y2(),{stdout:e,stderr:n}=H2(),{stringReplaceAll:o,stringEncaseCRLFWithFirstIndex:a}=U2(),{isArray:u}=Array,l=["ansi","ansi","ansi256","ansi16m"],c=Object.create(null),f=(W,O={})=>{if(O.level&&!(Number.isInteger(O.level)&&O.level>=0&&O.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const P=e?e.level:0;W.level=O.level===void 0?P:O.level};class h{constructor(O){return p(O)}}const p=W=>{const O={};return f(O,W),O.template=(...P)=>N(O.template,...P),Object.setPrototypeOf(O,g.prototype),Object.setPrototypeOf(O.template,O),O.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},O.template.Instance=h,O.template};function g(W){return p(W)}for(const[W,O]of Object.entries(r))c[W]={get(){const P=E(this,S(O.open,O.close,this._styler),this._isEmpty);return Object.defineProperty(this,W,{value:P}),P}};c.visible={get(){const W=E(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:W}),W}};const w=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(const W of w)c[W]={get(){const{level:O}=this;return function(...P){const U=S(r.color[l[O]][W](...P),r.color.close,this._styler);return E(this,U,this._isEmpty)}}};for(const W of w){const O="bg"+W[0].toUpperCase()+W.slice(1);c[O]={get(){const{level:P}=this;return function(...U){const V=S(r.bgColor[l[P]][W](...U),r.bgColor.close,this._styler);return E(this,V,this._isEmpty)}}}}const y=Object.defineProperties(()=>{},{...c,level:{enumerable:!0,get(){return this._generator.level},set(W){this._generator.level=W}}}),S=(W,O,P)=>{let U,V;return P===void 0?(U=W,V=O):(U=P.openAll+W,V=O+P.closeAll),{open:W,close:O,openAll:U,closeAll:V,parent:P}},E=(W,O,P)=>{const U=(...V)=>u(V[0])&&u(V[0].raw)?D(U,N(U,...V)):D(U,V.length===1?""+V[0]:V.join(" "));return Object.setPrototypeOf(U,y),U._generator=W,U._styler=O,U._isEmpty=P,U},D=(W,O)=>{if(W.level<=0||!O)return W._isEmpty?"":O;let P=W._styler;if(P===void 0)return O;const{openAll:U,closeAll:V}=P;if(O.indexOf("\x1B")!==-1)for(;P!==void 0;)O=o(O,P.close,P.open),P=P.parent;const ee=O.indexOf(`
`);return ee!==-1&&(O=a(O,V,U,ee)),U+O+V};let A;const N=(W,...O)=>{const[P]=O;if(!u(P)||!u(P.raw))return O.join(" ");const U=O.slice(1),V=[P.raw[0]];for(let ee=1;ee<P.length;ee++)V.push(String(U[ee-1]).replace(/[{}\\]/g,"\\$&"),String(P.raw[ee]));return A===void 0&&(A=G2()),A(W,V.join(""))};Object.defineProperties(g.prototype,c);const z=g();return z.supportsColor=e,z.stderr=g({level:n?n.level:0}),z.stderr.supportsColor=n,Na=z,Na}var V2=Q2();const X2=Bc(V2);function j2(r,e={}){if(!Array.isArray(r))throw new TypeError("Expected an array");let n=["‚ñÅ","‚ñÇ","‚ñÉ","‚ñÑ","‚ñÖ","‚ñÜ","‚ñá","‚ñà"];const o=[[5,5,4],[5,5,3],[5,5,0],[5,4,0],[5,3,0],[5,2,0],[5,1,0],[5,0,0]],a=r.filter(c=>Number.isFinite(c)),u=typeof e.minimum=="number"?e.minimum:typeof e.maximum=="number"?0:Math.min(...a),l=typeof e.maximum=="number"?e.maximum:Math.max(...a);return u===l&&l!==0&&(n=[n[4]]),r.map(c=>{if(!Number.isFinite(c))return" ";let f;return u===l?f=0:f=Math.ceil((c-u)/(l-u)*n.length)-1,f<0&&(f=0),e.style==="fire"?X2.rgb(...o[f])(n[f]):n[f]}).join("")}const Hi=un(ln.StatisticsService);class K2{descriptiveStatistics(e,n){const o=e.filter(a=>typeof a=="number"&&!isNaN(a));if(o.length===0)return Hi.warn("No valid numeric values found for descriptive statistics"),null;try{const a=Za(o,.25),u=Za(o,.75),l={count:o.length,sum:Af(o),mean:Mf(o),median:$2(o),mode:F2(o),min:_c(o),max:kc(o),range:kc(o)-_c(o),variance:Df(o),standardDeviation:M2(o),q1:a,q3:u,iqr:u-a};if(n?.includeVisualization){const c=n.chartHeight||10,f=this.createSparkline(o),h=this.createLineChart(o,c);l.visualization=`
**Sparkline:** ${f}

**Trend Chart:**
\`\`\`
${h}
\`\`\`
`.trim()}return Hi.dev("Calculated descriptive statistics",{stats:l}),l}catch(a){return Hi.error("Error calculating descriptive statistics",{error:a}),null}}booleanStatistics(e){const n=e.filter(S=>S===!0).length,o=e.filter(S=>S===!1).length,a=e.filter(S=>S===null).length,u=e.length;let l=0,c=0,f=0,h=null,p=0,g=0;for(const S of e)S===!0?(p++,g=0):S===!1&&(g++,p=0),l=Math.max(l,p),c=Math.max(c,g);const w=e[e.length-1];w===!0?(f=p,h="true"):w===!1&&(f=g,h="false");const y={count:u,trueCount:n,falseCount:o,nullCount:a,truePercentage:u>0?n/u*100:0,falsePercentage:u>0?o/u*100:0,longestTrueStreak:l,longestFalseStreak:c,currentStreak:f,currentStreakType:h};return Hi.dev("Calculated boolean statistics",{stats:y}),y}formatDescriptiveStats(e){return`
**Count:** ${e.count}
**Sum:** ${e.sum.toFixed(2)}
**Mean:** ${e.mean.toFixed(2)}
**Median:** ${e.median.toFixed(2)}
**Mode:** ${Array.isArray(e.mode)?e.mode.join(", "):e.mode}
**Min:** ${e.min.toFixed(2)}
**Max:** ${e.max.toFixed(2)}
**Range:** ${e.range.toFixed(2)}
**Std Dev:** ${e.standardDeviation.toFixed(2)}
**Variance:** ${e.variance.toFixed(2)}
**Q1 (25%):** ${e.q1.toFixed(2)}
**Q3 (75%):** ${e.q3.toFixed(2)}
**IQR:** ${e.iqr.toFixed(2)}
`.trim()}formatBooleanStats(e,n){const o=e.currentStreakType==="true"?"‚ú®":"‚ùÑÔ∏è";return`
**${n} Statistics**
- Total tracked: ${e.count} days
- Success rate: ${e.truePercentage.toFixed(1)}% (${e.trueCount}/${e.count})
- Longest streak: ${e.longestTrueStreak} days üèÜ
- Current streak: ${o} ${e.currentStreak} days
`.trim()}createLineChart(e,n=10,o){if(e.length===0)return"No data to display";const a={height:n};return o&&(a.width=o),N2.plot(e,a)}createSparkline(e){return e.length===0?"‚Äî":j2(e)}createBooleanBarChart(e,n=30){return e.slice(-n).map(u=>u===!0?"‚úÖ":u===!1?"‚ùå":"‚¨ú").join("")}createBooleanPieChart(e,n){return`\`\`\`mermaid
pie title ${n}
    "Completed" : ${e.trueCount}
    "Skipped" : ${e.falseCount}
    ${e.nullCount>0?`"Not Tracked" : ${e.nullCount}`:""}
\`\`\``}createBooleanVisualReport(e,n,o={}){const{showSparkline:a=!0,showBarChart:u=!0,showAsciiChart:l=!0,showPieChart:c=!1,dates:f=[]}=o,h=this.booleanStatistics(e),p=e.map(w=>w===!0?1:0);let g=`## üìä ${n}

`;if(g+=this.formatBooleanStats(h,n)+`

`,a&&(g+=`**Trend:** ${this.createSparkline(p)}

`),u&&(g+=`**Last ${Math.min(e.length,30)} days:**
`,g+=this.createBooleanBarChart(e,30)+`

`,f.length>0)){const w=f[0],y=f[f.length-1];g+=`*From ${w} to ${y}*

`}return l&&p.length>=3&&(g+="**Trend Chart:**\n```\n",g+=this.createLineChart(p,6),g+="\n```\n\n"),c&&(g+=this.createBooleanPieChart(h,`${n} Distribution`)+`

`),g}createNumericVisualReport(e,n,o={}){const{showSparkline:a=!0,showAsciiChart:u=!0,showStats:l=!0}=o,c=this.descriptiveStatistics(e);if(!c)return`## ${n}

No data available`;let f=`## üìà ${n}

`;return l&&(f+=this.formatDescriptiveStats(c)+`

`),a&&(f+=`**Trend:** ${this.createSparkline(e)}

`),u&&(f+="**Trend Chart:**\n```\n",f+=this.createLineChart(e,10),f+="\n```\n\n"),f}}const to=new K2;async function J2(){const r="habitTracking",e=new wt(r),n=m2.map(async c=>{if(!await Qr.shouldShowInput(c))return null;const h=await Qr.getInputProgress(c);return{habit:c,completedCount:h.targetProgress?.current||0,targetCount:c.schedule?.target?.count||1,isComplete:h.targetProgress?.isComplete||!1,shouldShow:!0,maxLimitProgress:h.limitProgress?{current:h.limitProgress.current,max:h.limitProgress.limit,percentage:h.limitProgress.percentage}:null}}),a=(await Promise.all(n)).filter(c=>c!==null);e._md("## ‚úÖ Today's Habits (üìå CORE)"),e._foldable(`**Atomic Habits** ‚Äî every habit = Cue ‚Üí Craving ‚Üí Response ‚Üí Reward.
**Taoist Wu Wei** ‚Äî not perfection, but flow. Missed habits are okay‚Äîjust return gently.
**Power of Habit** ‚Äî the cue and reward make habits stick, not willpower alone.

**Check when complete:**`),a.length>0?(a.forEach(({habit:c,completedCount:f,maxLimitProgress:h,targetCount:p})=>{const g=c.schedule?.target?.per.count||1,w=c.schedule?.target?.per.unit||pe.Day,y=p===1&&g===1&&w===pe.Day;let S=[c.label];if(!y){let D;g===1?D=w:D=`${g} ${w}s`,S.push(`target: ${f}/${p} per ${D}`)}if(h){const{current:D,max:A}=h,N=c.schedule?.limit?.per.count||1,z=c.schedule?.limit?.per.unit||"day",W=N===1?z:`${N} ${z}s`;S.push(`limit: ${D}/${A} per ${W}`)}const E={...c.inputOptions,label:S.join(" ¬∑ ")};e._input(E),e._md(`*Cue*: ${c.cue} ¬∑ *Reward*: ${c.reward}`)}),e._nl(),e._md("Missing once is an accident. Missing twice is the start of a pattern. Return gently.")):e._md("*üéâ All habits completed for this period! Well done!*");const u=a.map(c=>c.habit.id);let l=!1;try{const c=await jt.getInputsLastNReports({inputIds:u,count:10});if(l=c.length>0,l){e._divider();let f="";for(const{habit:h}of a){const p=c.filter(g=>g.inputId===h.id);if(p.length>=2){const g=p.map(S=>S.value),w=to.booleanStatistics(g),y=to.createSparkline(g.map(S=>S===!0?1:0));f+=`**${h.label}:** ${w.truePercentage.toFixed(0)}% (${w.trueCount}/${w.count}) ¬∑ ${y} ¬∑ ${w.currentStreakType==="true"?"‚ú®":"‚ùÑÔ∏è"} ${w.currentStreak} streak
`}}e._foldable(f.trim(),"üìä Habit Statistics (Last 10 Reports)")}}catch(c){console.error("Failed to fetch habit statistics:",c)}return await e.render()}const Rc=r=>{try{const e=vb(r,"yyyy-MM-dd",new Date);return _n(e,"dd.MM.yyyy")}catch{return r}};async function Z2(){const r="messageFromYesterday",e=new wt(r),n=await jt.getInputsLastNReports({inputIds:[Fe.message_for_tomorrow.id,Fe.tomorrow_priority.id],count:1}),o=n.find(c=>c.inputId===Fe.message_for_tomorrow.id),a=n.find(c=>c.inputId===Fe.tomorrow_priority.id),u=o&&o.value?.trim().length>0,l=a&&a.value?.trim().length>0;if(!u&&!l)return"";if(e._md("## üì® Message from Your Past Self (‚≠ê RECOMMENDED)"),l){const c=a.value,f=Rc(a.reportDate);e._md(`### üéØ Today's Priority (set ${f})`),e._md(`**${c}**`)}if(u){const c=o.value,f=Rc(o.reportDate);e._md(`### üíå Message (from ${f})`),e._md(`**${c}**`)}return await e.render()}async function ek(){const r="accomplishmentsAndObstacles",e=new wt(r);return e._md("## üìä Wins & Obstacles (‚≠ê RECOMMENDED)"),e._foldable(`**The Stoic Path** ‚Äî "The obstacle is the way." Every setback is training.

_"The impediment to action advances action. What stands in the way becomes the way."_ ‚Äî Marcus Aurelius

**Three Questions for Obstacles:**
1. **What happened?** (The external event‚Äînot in your control)
2. **How did I respond?** (Your reaction‚Äîentirely in your control)
3. **How will I overcome this?** (Your action plan‚Äîgrowth through adversity)

**Atomic Habits:** Every obstacle reveals a system flaw. Fix the system, not just the symptom.
**Growth Mindset:** You haven't mastered this *yet*. Struggle = growth happening.

Remember: You control your **effort, attitude, and response** ‚Äî not outcomes.`),e._fancyTitle("Wins & Accomplishments","üèÜ"),e._input(Fe.accomplishments),e._fancyTitle("Obstacles & The Way Forward","‚öîÔ∏è"),e._input(Fe.obstacles),e._input(Fe.if_then_plan),e._md("**Stoic Wisdom**: This obstacle is not blocking your path‚Äîit IS the path. It's revealing where you need to grow."),await e.render()}async function tk(){const r="attentionAndWillpower",e=new wt(r);return e._md("## üéØ Attention & Willpower Check (üí° OPTIONAL - 3-5 min)"),e._foldable(`**Hyperfocus** ‚Äî attention is your most valuable resource. Protect it fiercely.
**The Willpower Instinct** ‚Äî willpower depletes throughout the day and needs recovery (rest, breaks, nature).
**Atomic Habits** ‚Äî environment shapes behavior more than motivation.

Track patterns. Design better environments. Restore your willpower.`),e._fancyTitle("Attention Reflection","üëÅÔ∏è"),e._input(Fe.main_distraction),e._input(Fe.flow_moments),e._fancyTitle("Willpower Reflection","üí™"),e._input(Fe.willpower_challenge),e._md("**Insight** ‚Äî you can't control urges, but you can control your environment. Make good choices the easy choices."),await e.render()}async function nk(){const r="gratitudeAndSavoring",e=new wt(r);return e._md("## üôè Gratitude & Savoring (‚≠ê RECOMMENDED)"),e._foldable(`**Three Good Things Intervention** ‚Äî writing WHY things went well is crucial for wellbeing.
**Stoicism** ‚Äî negative visualization‚Äîappreciate what you have by imagining its loss.
**Positive Psychology** ‚Äî gratitude is one of the strongest wellbeing predictors.

Savor simple pleasures: friendship, beauty, learning, nature. Your role matters.`),e._md("### Three Good Things Today"),e._input(Fe.gratitudes),await e.render()}async function rk(){const r="mindfulMoment",e=new wt(r);return e._md("## üßò Mindful Moment (üí° OPTIONAL - 2-3 min)"),e._foldable(`**Present Moment Awareness** ‚Äî The antidote to anxiety

Anxiety lives in the future (what if?). Regret lives in the past (if only...). Peace lives in NOW.

**The Problem** ‚Äî your mind is NEVER here. You eat lunch while planning dinner. You're with friends while mentally at work. You miss your ENTIRE LIFE because you're always somewhere else.

**The Solution** ‚Äî train yourself to return to the present moment‚Äîover and over.

**What this practice does:**
- **Reduces anxiety** ‚Äî the present moment is usually fine. Suffering is in your head.
- **Increases joy** ‚Äî life's beauty exists NOW, not in memory or anticipation
- **Improves focus** ‚Äî your attention is your most valuable resource
- **Creates calm** ‚Äî presence is inherently peaceful
- **Builds gratitude** ‚Äî you notice what you usually miss

**Why it works** (neuroscience):
Your brain has two modes:
- **Default Mode** (wandering mind) ‚Äî predicts, plans, worries, ruminates = stress
- **Present Mode** (focused attention) ‚Äî observes, senses, experiences = calm

This practice trains you to shift from Default to Present mode at will.

**How to practice:**
This is NOT about emptying your mind. It's about NOTICING when you were present today, and appreciating that moment.

When you recall being fully present‚Äîeven for 5 seconds‚Äîyou're training your brain to recognize and seek presence.`,"Mindfulness Practice"),e._md("### Practice (2 minutes)"),e._md("**Step 1** ‚Äî ground yourself"),e._md("Close your eyes or soften your gaze. Take three slow, deep breaths. Feel your body in the chair."),e._md("**Step 2** ‚Äî recall one present moment"),e._md("Remember ONE moment from today when you were fully HERE ‚Äî no past, no future, just NOW:"),e._md("- Morning coffee warmth on your hands"),e._md("- A genuine laugh with someone"),e._md("- Sunlight on your skin"),e._md("- The taste of your lunch"),e._md("- Wind in your hair"),e._md("- A moment of quiet"),e._md("**Step 3** ‚Äî explore the memory"),e._md("Hold that memory. Notice the details:"),e._md("- What did you SEE? (Colors, light, movement)"),e._md("- What did you HEAR? (Sounds, silence, rhythm)"),e._md("- What did you FEEL? (Temperature, texture, sensation)"),e._md("- What did you SMELL? TASTE?"),e._md("**Step 4** ‚Äî appreciate"),e._md("That simple moment‚ÄîTHAT is life. Not achievements or plans. Just being fully alive, right here, right now."),e._input(Fe.mindful_pause_taken),e._md('> _"The present moment is all you ever have."_ ‚Äî Eckhart Tolle'),e._md('> _"When you wash the dishes, wash the dishes."_ ‚Äî Th√≠ch Nh·∫•t H·∫°nh'),await e.render()}async function ik(){const r="emotionAwareness",e=new wt(r);return e._md("## üí≠ Emotion Awareness (üí° OPTIONAL - 3-5 min)"),e._foldable(`**Emotional Intelligence** ‚Äî recognizing emotions is the first step to managing them.
**Stoicism** ‚Äî you can't control feelings arising, but you can control your response.
**Neuroscience** ‚Äî naming emotions reduces their intensity (affect labeling).

No judgment‚Äîjust awareness and learning.`),e._md("### Today's Emotional Landscape"),e._input(Fe.strongest_emotion),e._input(Fe.emotion_trigger),e._input(Fe.emotion_response),e._input(Fe.better_emotion_response),e._md(`> **Practice** ‚Äî when strong emotions arise, pause and label: _"I'm feeling [emotion]."_ This creates space between feeling and reaction.`),await e.render()}async function ok(){const r="permaPlus",e=new wt(r),n=Ja.map(async g=>await Qr.shouldShowInput(g)?g:null),o=(await Promise.all(n)).filter(g=>g!==null),a=new Map;o.forEach(g=>{g.schedule?.showEvery?.unit===pe.Day&&a.set(g.id,g.schedule.showEvery.count)});const u=Ja.filter(g=>!g.schedule||g.schedule.active!==!1),l=u.map(g=>g.id);let c=new Map,f=new Map,h=new Map,p={first:"",last:"",reportCount:0};try{const g=await jt.getInputsLastNReports({inputIds:l,count:20});if(g.length>0){const w=Array.from(new Set(g.map(y=>y.reportDate||""))).sort();p={first:w[0],last:w[w.length-1],reportCount:w.length}}u.forEach(w=>{const y=g.filter(S=>S.inputId===w.id).map(S=>{const E=Array.isArray(S.value)?S.value[0]:S.value;return typeof E=="string"?parseFloat(E):E}).filter(S=>!isNaN(S));if(c.set(w.id,y),y.length>0){const S=y.slice(-5),E=S.reduce((A,N)=>A+N,0)/S.length;f.set(w.id,E);const D=y.reduce((A,N)=>A+N,0)/y.length;h.set(w.id,D)}})}catch(g){console.error("Failed to fetch PERMA historical data:",g)}if(e._md("## üíö PERMA+8 Wellbeing Check (üìå CORE - 2-3 min)"),e._foldable(`**PERMA+8 Model**: Comprehensive wellbeing framework covering 13 dimensions:

**Core PERMA:**
- Positive Emotions, Engagement, Relationships, Meaning, Accomplishment

**Body & Physical:**
- Sleep Quality, Embodiment (body acceptance), Physical Pleasure, Touch & Intimacy, Physical Condition

**Life Context:**
- Mindset, Environment, Economic Security

Rate honestly‚Äîawareness is the first step to change.

**Rate each dimension** (3 = Great, 2 = Adequate, 1 = Struggling):`),o.forEach(g=>{const w=f.get(g.id),y=w!==void 0?` (last 5 reports: ${w.toFixed(1)})`:"",S=g.schedule?.showEvery?` *(shown every ${g.schedule.showEvery.count} ${g.schedule.showEvery.unit}${g.schedule.showEvery.count>1?"s":""})*`:"";e._inputLabel(`${g.label}${y}${S}`,`*${g.description}*`),e._input(g.inputOptions)}),c.size>0&&Array.from(c.values()).some(g=>g.length>=3)){e._themedDivider("Wellbeing Trends","üìä");const g=[];if(c.forEach(w=>{g.push(...w)}),g.length>0){const w=g.reduce((E,D)=>E+D,0)/g.length,y=to.createSparkline(Array.from(c.values())[0]);e._md(`**Overall Wellbeing (last ${p.reportCount} reports): ${w.toFixed(1)}/3.0** ${y}`),p.first&&p.last&&e._md(`*Data from ${p.first} to ${p.last}*`);const S=u.map(E=>({param:E,avg:h.get(E.id)||0,dataPoints:c.get(E.id)?.length||0})).filter(E=>E.dataPoints>=3).sort((E,D)=>E.avg-D.avg);if(S.length>0){const E=S[0],D=S[S.length-1];e._md("**Insights:**"),E.avg<2&&e._md(`- ‚ö†Ô∏è **Needs attention**: ${E.param.label} (avg: ${E.avg.toFixed(1)}) ‚Äî Consider prioritizing this area`),D.avg>=2.5&&e._md(`- ‚ú® **Strength area**: ${D.param.label} (avg: ${D.avg.toFixed(1)}) ‚Äî Keep up the good work!`),e._md(`**Trends (last ${p.reportCount} reports):**`),u.forEach(A=>{const N=c.get(A.id);if(N&&N.length>=3){const z=h.get(A.id)||0,W=to.createSparkline(N),O=N.length>=2?N[N.length-1]>N[N.length-2]?"‚Üó":N[N.length-1]<N[N.length-2]?"‚Üò":"‚Üí":"‚Üí";e._md(`- ${A.label}: ${z.toFixed(1)} ${W} ${O}`)}})}}}return await e.render()}async function ak(){const r="messageForTomorrow",e=new wt(r);return e._md("## üíå Message & Intention for Tomorrow (üìå CORE - 2 min)"),e._foldable(`Set yourself up for success tomorrow with clarity and encouragement.

**Tomorrow's Priority**: What's the ONE thing that matters most? When and where will you do it?
**Message to Future Self**: A reminder, encouragement, or lesson you don't want to forget.

What can I prepare tonight to make tomorrow easier?

Which PERMA plus parameter needs special attention tomorrow?

Keep it short and meaningful. Your future self will thank you.`),e._input(Fe.tomorrow_priority),e._input(Fe.message_for_tomorrow),e._input(Fe.plan_next_day),await e.render()}async function sk(){const r=[];r.push(await d2()),r.push(`
---
`),r.push("# üåÖ MORNING: Set the Day"),r.push("*Win the morning, win the day. Start with intention and clarity.*"),r.push(`
---
`),r.push(await Z2()),r.push(await C2()),r.push(await T2()),r.push(await rk()),r.push(await E2()),r.push(`
---
`),r.push("# üìã DAILY HABITS & PRACTICES"),r.push("*Small actions, repeated daily, create remarkable results.*"),r.push(`
---
`),r.push(await J2()),r.push(await P2()),r.push(`
---
`),r.push("# üåô EVENING: Reflect & Close the Day"),r.push("*Review your day with honesty and gratitude. Learn, grow, prepare.*"),r.push(`
---
`),r.push(await ek()),r.push(await tk()),r.push(await nk()),r.push(await ik()),r.push(await ok()),r.push(await ak()),Gr.write({type:nr.ALMOST_DAILY,data:r.join(`
`)})}class uk{async backfillPeriodicParameters(e){const n=[];for(const o of e){const a=Ja.find(f=>f.id===o.inputId&&f.schedule?.active!==!1);if(!a||!a.schedule?.showEvery){n.push(o);continue}const u=a.schedule.showEvery.unit===pe.Day?a.schedule.showEvery.count:1,l=o.reportDate,c=await this.getReportDatesInPast(u,l);for(const f of c)n.push({...o,reportDate:f});n.push(o)}return n}async getReportDatesInPast(e,n){const o=[];try{const a=await jt.getReportInputs("almostDailyReport");for(let u=1;u<e;u++){const l=this.getDateDaysAgo(u,n);a.some(f=>f.reportDate===l)&&o.push(l)}}catch(a){console.error("Error fetching past report dates:",a)}return o}getDateDaysAgo(e,n){(!n||n.trim()==="")&&(console.warn(`Invalid fromDate provided to getDateDaysAgo: "${n}". Using today's date.`),n=new Date().toISOString().split("T")[0]);const o=new Date(n);return isNaN(o.getTime())?(console.error(`Invalid date string: "${n}". Using today's date.`),new Date().toISOString().split("T")[0]):(o.setDate(o.getDate()-e),o.toISOString().split("T")[0])}}const lk=new uk;let xr=[];const Ie=un(ln.FileService);async function ck(){try{const r=new Date,e=r.getHours(),n=`${_n(r,"dd.MM.yyyy")}.md`;if(e>=0&&e<4){Ie.info(`üïê EARLY MORNING ABORT: Current time is ${_n(r,"HH:mm")} (before 04:00) - aborting report creation`);const f=`${st.projectDir}/${st.coreDir}`,h=ge.vault.getAbstractFileByPath(f);if(h&&"children"in h){const p=/^\d{2}\.\d{2}\.\d{4}\.md$/;let g=0;const w=[];for(const y of h.children){const S="extension"in y&&y.extension==="md",E=p.test(y.name);S&&E&&w.push(y.name)}for(const y of w)try{const S=`${f}/${y}`,E=ge.vault.getAbstractFileByPath(S);if(E&&"extension"in E&&E.extension==="md")if(y===n)Ie.dev(`‚è±Ô∏è Deferring deletion of today's note: ${y}`),xr.push({path:S,fileName:y}),requestIdleCallback(()=>{Lc()},{timeout:2e3}),g++;else try{await ge.vault.delete(E),Ie.dev(`Deleted old script-triggering note: ${y}`),g++}catch(D){Ie.error(`Failed to delete ${y}, deferring:`,D),xr.push({path:S,fileName:y}),requestIdleCallback(()=>{Lc()},{timeout:2e3}),g++}}catch(S){Ie.error(`Failed to process ${y}:`,S)}g>0&&Ie.info(`Cleaned up ${g} script-triggering note(s) for early morning abort`)}else Ie.warn(`‚ö†Ô∏è Core directory not found or has no children: ${f}`),h?"children"in h||Ie.warn("‚ö†Ô∏è Folder doesn't have children property"):Ie.warn("‚ö†Ô∏è Folder object is null");Ie.info("üö´ Report creation aborted. Please open after 04:00 to create today's report.");return}const o=await fk();Ie.dev("Input collection and empty report cleanup completed");const a=ge.workspace.getLeavesOfType("markdown"),u=[];for(const f of a){const p=f.view.file;p&&(u.push(p.path),p.path.endsWith(n)&&(Ie.dev("Closing today's note: "+p.path),await f.detach()))}Ie.dev("Currently open files: "+u.join(", "));const l=`${st.projectDir}/${st.coreDir}`,c=ge.vault.getAbstractFileByPath(l);if(c&&"children"in c){const f=/^\d{2}\.\d{2}\.\d{4}\.md$/;for(const h of c.children)"extension"in h&&h.extension==="md"&&f.test(h.name)&&h.name!==n&&(Ie.dev("Deleting old app-triggering note: "+h.path),await ge.vault.delete(h))}if(o){for(const[f,h]of Object.entries(o))if(h&&h.length>0){const p=await lk.backfillPeriodicParameters(h);await jt.upsertReportInputs(f,p),Ie.info(`Saved ${p.length} inputs (${h.length} original + ${p.length-h.length} backfilled) for ${f} to database`)}}await sk(),Ie.info("Daily report built successfully")}catch(r){Ie.error("Failed to run onStart:",r)}}async function Lc(){if(xr.length!==0){Ie.info(`üîÑ Processing ${xr.length} deferred deletion(s)...`);for(const r of xr)try{const e=ge.vault.getAbstractFileByPath(r.path);e&&"extension"in e?(Ie.info(`üóëÔ∏è Deferred deletion: ${r.fileName}`),await ge.vault.delete(e),Ie.info(`‚úÖ Deferred deletion successful: ${r.fileName}`)):Ie.info(`‚ÑπÔ∏è File already deleted (not found): ${r.fileName}`)}catch(e){const n=e?.message||String(e);n.includes("ENOENT")||n.includes("not found")?Ie.info(`‚ÑπÔ∏è File already deleted during deferred cleanup: ${r.fileName}`):Ie.error(`‚ùå Failed to deferred delete ${r.fileName}:`,e)}xr=[]}}async function fk(){try{Ie.dev("Checking for empty reports from yesterday...");const r=await a_.collectFromYesterday();for(const[e,n]of Object.entries(r)){if(!n||n.length===0){Ie.dev(`No inputs found for report: ${e}`);continue}if(n.every(a=>!!(a.value===null||a.value===void 0||typeof a.value=="string"&&a.value.trim()===""||Array.isArray(a.value)&&a.value.length===0||typeof a.value=="boolean"&&a.value===!1||typeof a.value=="number"&&a.value===0))){const a=Gr.reportFolders[e],u=await Gr._listFiles(a);if(u.length>0){const l=u.sort().reverse()[0],c=n[0];if(c&&l.includes(c.reportDate.replace(/-/g,""))&&l.includes(c.reportNumber)){const f=`${a}/${l}`,h=ge.vault.getAbstractFileByPath(f);h&&"extension"in h&&(Ie.info(`Deleting empty report: ${l}`),await ge.vault.delete(h))}}}else Ie.dev(`Report ${e} has content - keeping it`)}return r}catch(r){return Ie.error("Failed to delete empty reports:",r),{}}}const Ui=un(ln.FileService);async function hk(r,e){Ui.info("runPowerJournal started");const n=await _y(e);wy(r,n),Ui.dev("Globals set, config loaded");try{await ck(),Ui.info("Power Journal workflow completed successfully")}catch(o){Ui.error("Error in Power Journal workflow",{error:o})}}module.exports=hk;
