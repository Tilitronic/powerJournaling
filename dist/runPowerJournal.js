"use strict";const zt={ComponentBuilder:"ComponentBuilder",SavingService:"SavingService",TagsService:"TagsService",InputCreator:"InputCreator",FileService:"FileService",OnStart:"OnStart",InputCollector:"InputCollector",ValueExtractor:"ValueExtractor",DbService:"DbService",StatisticsService:"StatisticsService"},z0={[zt.ComponentBuilder]:{dev:!1,info:!0,warn:!0,error:!0},[zt.SavingService]:{dev:!0,info:!0,warn:!0,error:!0},[zt.TagsService]:{dev:!1,info:!0,warn:!0,error:!0},[zt.InputCreator]:{dev:!1,info:!0,warn:!0,error:!0},[zt.FileService]:{dev:!0,info:!0,warn:!0,error:!0},[zt.OnStart]:{dev:!0,info:!0,warn:!0,error:!0},[zt.InputCollector]:{dev:!0,info:!0,warn:!0,error:!0},[zt.ValueExtractor]:{dev:!0,info:!0,warn:!0,error:!0},[zt.DbService]:{dev:!0,info:!0,warn:!0,error:!0},[zt.StatisticsService]:{dev:!0,info:!0,warn:!0,error:!0}},Hn={reset:"\x1B[0m",bold:"\x1B[1m",gray:"\x1B[90m",purple:"\x1B[35m"},q0={dev:"\x1B[44m\x1B[37m",info:"\x1B[42m\x1B[30m",warn:"\x1B[43m\x1B[30m",error:"\x1B[41m\x1B[37m"},H0={dev:"ğŸ› ",info:"â„¹ï¸",warn:"âš ï¸",error:"âŒ"},oa={},Sl=["\x1B[36m","\x1B[33m","\x1B[32m","\x1B[34m","\x1B[31m","\x1B[95m","\x1B[96m","\x1B[92m","\x1B[93m"];let Il=0;function Y0(t){return oa[t]||(oa[t]=Sl[Il%Sl.length],Il++),oa[t]}class Wa{constructor(r,n){this.logs=[],this.serviceConfig={},this.getConfig=r,this.prefix=n??"global"}setServiceConfig(r){this.serviceConfig=r}addLog(r,n,o){const a={timestamp:new Date,level:r,service:this.prefix,message:n,meta:o};if(this.logs.push(a),!((this.serviceConfig[this.prefix]??{})[r]??!0))return;const c=a.timestamp.toISOString().split("T")[1].split(".")[0],f=`${Hn.gray}${c}${Hn.reset}`,d=`${Hn.purple}[PJ]${Hn.reset}`,p=`${Y0(this.prefix)}${Hn.bold}[${this.prefix}]${Hn.reset}`,g=`${q0[r]}[${H0[r]} ${r.toUpperCase().padEnd(5)}]${Hn.reset}`,b=`${f} ${d}${p}${g} ${n}`;try{r==="warn"?console.warn(b,o??""):r==="error"?console.error(b,o??""):console.log(b,o??"")}catch{console.log(`${f} ${d}[${this.prefix}][${r.toUpperCase()}] ${n}`,o??"")}}dev(r,n){this.addLog("dev",r,n)}info(r,n){this.addLog("info",r,n)}warn(r,n){this.addLog("warn",r,n)}error(r,n){this.addLog("error",r,n)}getAllLogs(){return this.logs}withPrefix(r){const n=new Wa(this.getConfig,r);return n.setServiceConfig(this.serviceConfig),n}}let bt;function U0(t,r){bt=r}const yc=new Wa(()=>bt);yc.setServiceConfig(z0);function Xt(t){return yc.withPrefix(t)}const Jt=zt,ke=app;var Pi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Or={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var G0=Or.exports,Cl;function V0(){return Cl||(Cl=1,(function(t,r){(function(){var n,o="4.17.21",a=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",d=500,p="__lodash_placeholder__",g=1,b=2,y=4,E=1,P=2,$=1,D=2,H=4,z=8,W=16,F=32,T=64,U=128,Q=256,ee=512,de=30,j="...",V=800,we=16,Ae=1,fe=2,We=3,Ce=1/0,Le=9007199254740991,Dt=17976931348623157e292,_=NaN,Oe=4294967295,Ft=Oe-1,S=Oe>>>1,ut=[["ary",U],["bind",$],["bindKey",D],["curry",z],["curryRight",W],["flip",ee],["partial",F],["partialRight",T],["rearg",Q]],Xe="[object Arguments]",Me="[object Array]",On="[object AsyncFunction]",Je="[object Boolean]",vt="[object Date]",pn="[object DOMException]",Zt="[object Error]",Qn="[object Function]",$r="[object GeneratorFunction]",lt="[object Map]",gn="[object Number]",Nr="[object Null]",xt="[object Object]",Wr="[object Promise]",zr="[object Proxy]",mn="[object RegExp]",ct="[object Set]",Mn="[object String]",jn="[object Symbol]",Ui="[object Undefined]",Dn="[object WeakMap]",M="[object WeakSet]",N="[object ArrayBuffer]",X="[object DataView]",ae="[object Float32Array]",ge="[object Float64Array]",Ve="[object Int8Array]",Rt="[object Int16Array]",ft="[object Int32Array]",en="[object Uint8Array]",tn="[object Uint8ClampedArray]",qe="[object Uint16Array]",Ht="[object Uint32Array]",Lt=/\b__p \+= '';/g,lf=/\b(__p \+=) '' \+/g,cf=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ja=/&(?:amp|lt|gt|quot|#39);/g,Ka=/[&<>"']/g,ff=RegExp(ja.source),hf=RegExp(Ka.source),df=/<%-([\s\S]+?)%>/g,pf=/<%([\s\S]+?)%>/g,Xa=/<%=([\s\S]+?)%>/g,gf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mf=/^\w*$/,yf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Gi=/[\\^$.*+?()[\]{}|]/g,wf=RegExp(Gi.source),Vi=/^\s+/,bf=/\s/,vf=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,xf=/\{\n\/\* \[wrapped with (.+)\] \*/,_f=/,? & /,kf=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Sf=/[()=,{}\[\]\/\s]/,If=/\\(\\)?/g,Cf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ja=/\w*$/,Ef=/^[-+]0x[0-9a-f]+$/i,Tf=/^0b[01]+$/i,Af=/^\[object .+?Constructor\]$/,Pf=/^0o[0-7]+$/i,Of=/^(?:0|[1-9]\d*)$/,Mf=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,qr=/($^)/,Df=/['\n\r\u2028\u2029\\]/g,Hr="\\ud800-\\udfff",Ff="\\u0300-\\u036f",Rf="\\ufe20-\\ufe2f",Lf="\\u20d0-\\u20ff",Za=Ff+Rf+Lf,es="\\u2700-\\u27bf",ts="a-z\\xdf-\\xf6\\xf8-\\xff",Bf="\\xac\\xb1\\xd7\\xf7",$f="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Nf="\\u2000-\\u206f",Wf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ns="A-Z\\xc0-\\xd6\\xd8-\\xde",rs="\\ufe0e\\ufe0f",is=Bf+$f+Nf+Wf,Qi="['â€™]",zf="["+Hr+"]",os="["+is+"]",Yr="["+Za+"]",as="\\d+",qf="["+es+"]",ss="["+ts+"]",us="[^"+Hr+is+as+es+ts+ns+"]",ji="\\ud83c[\\udffb-\\udfff]",Hf="(?:"+Yr+"|"+ji+")",ls="[^"+Hr+"]",Ki="(?:\\ud83c[\\udde6-\\uddff]){2}",Xi="[\\ud800-\\udbff][\\udc00-\\udfff]",Kn="["+ns+"]",cs="\\u200d",fs="(?:"+ss+"|"+us+")",Yf="(?:"+Kn+"|"+us+")",hs="(?:"+Qi+"(?:d|ll|m|re|s|t|ve))?",ds="(?:"+Qi+"(?:D|LL|M|RE|S|T|VE))?",ps=Hf+"?",gs="["+rs+"]?",Uf="(?:"+cs+"(?:"+[ls,Ki,Xi].join("|")+")"+gs+ps+")*",Gf="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Vf="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ms=gs+ps+Uf,Qf="(?:"+[qf,Ki,Xi].join("|")+")"+ms,jf="(?:"+[ls+Yr+"?",Yr,Ki,Xi,zf].join("|")+")",Kf=RegExp(Qi,"g"),Xf=RegExp(Yr,"g"),Ji=RegExp(ji+"(?="+ji+")|"+jf+ms,"g"),Jf=RegExp([Kn+"?"+ss+"+"+hs+"(?="+[os,Kn,"$"].join("|")+")",Yf+"+"+ds+"(?="+[os,Kn+fs,"$"].join("|")+")",Kn+"?"+fs+"+"+hs,Kn+"+"+ds,Vf,Gf,as,Qf].join("|"),"g"),Zf=RegExp("["+cs+Hr+Za+rs+"]"),eh=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,th=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],nh=-1,Ee={};Ee[ae]=Ee[ge]=Ee[Ve]=Ee[Rt]=Ee[ft]=Ee[en]=Ee[tn]=Ee[qe]=Ee[Ht]=!0,Ee[Xe]=Ee[Me]=Ee[N]=Ee[Je]=Ee[X]=Ee[vt]=Ee[Zt]=Ee[Qn]=Ee[lt]=Ee[gn]=Ee[xt]=Ee[mn]=Ee[ct]=Ee[Mn]=Ee[Dn]=!1;var Se={};Se[Xe]=Se[Me]=Se[N]=Se[X]=Se[Je]=Se[vt]=Se[ae]=Se[ge]=Se[Ve]=Se[Rt]=Se[ft]=Se[lt]=Se[gn]=Se[xt]=Se[mn]=Se[ct]=Se[Mn]=Se[jn]=Se[en]=Se[tn]=Se[qe]=Se[Ht]=!0,Se[Zt]=Se[Qn]=Se[Dn]=!1;var rh={Ã€:"A",Ã:"A",Ã‚:"A",Ãƒ:"A",Ã„:"A",Ã…:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã‡:"C",Ã§:"c",Ã:"D",Ã°:"d",Ãˆ:"E",Ã‰:"E",ÃŠ:"E",Ã‹:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",ÃŒ:"I",Ã:"I",Ã:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã‘:"N",Ã±:"n",Ã’:"O",Ã“:"O",Ã”:"O",Ã•:"O",Ã–:"O",Ã˜:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã™:"U",Ãš:"U",Ã›:"U",Ãœ:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã†:"Ae",Ã¦:"ae",Ã:"Th",Ã¾:"th",ÃŸ:"ss",Ä€:"A",Ä‚:"A",Ä„:"A",Ä:"a",Äƒ:"a",Ä…:"a",Ä†:"C",Äˆ:"C",ÄŠ:"C",ÄŒ:"C",Ä‡:"c",Ä‰:"c",Ä‹:"c",Ä:"c",Ä:"D",Ä:"D",Ä:"d",Ä‘:"d",Ä’:"E",Ä”:"E",Ä–:"E",Ä˜:"E",Äš:"E",Ä“:"e",Ä•:"e",Ä—:"e",Ä™:"e",Ä›:"e",Äœ:"G",Ä:"G",Ä :"G",Ä¢:"G",Ä:"g",ÄŸ:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å€:"l",Å‚:"l",Åƒ:"N",Å…:"N",Å‡:"N",ÅŠ:"N",Å„:"n",Å†:"n",Åˆ:"n",Å‹:"n",ÅŒ:"O",Å:"O",Å:"O",Å:"o",Å:"o",Å‘:"o",Å”:"R",Å–:"R",Å˜:"R",Å•:"r",Å—:"r",Å™:"r",Åš:"S",Åœ:"S",Å:"S",Å :"S",Å›:"s",Å:"s",ÅŸ:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å’:"Oe",Å“:"oe",Å‰:"'n",Å¿:"s"},ih={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},oh={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ah={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},sh=parseFloat,uh=parseInt,ys=typeof Pi=="object"&&Pi&&Pi.Object===Object&&Pi,lh=typeof self=="object"&&self&&self.Object===Object&&self,He=ys||lh||Function("return this")(),Zi=r&&!r.nodeType&&r,Fn=Zi&&!0&&t&&!t.nodeType&&t,ws=Fn&&Fn.exports===Zi,eo=ws&&ys.process,_t=(function(){try{var I=Fn&&Fn.require&&Fn.require("util").types;return I||eo&&eo.binding&&eo.binding("util")}catch{}})(),bs=_t&&_t.isArrayBuffer,vs=_t&&_t.isDate,xs=_t&&_t.isMap,_s=_t&&_t.isRegExp,ks=_t&&_t.isSet,Ss=_t&&_t.isTypedArray;function ht(I,O,A){switch(A.length){case 0:return I.call(O);case 1:return I.call(O,A[0]);case 2:return I.call(O,A[0],A[1]);case 3:return I.call(O,A[0],A[1],A[2])}return I.apply(O,A)}function ch(I,O,A,Y){for(var ne=-1,me=I==null?0:I.length;++ne<me;){var Be=I[ne];O(Y,Be,A(Be),I)}return Y}function kt(I,O){for(var A=-1,Y=I==null?0:I.length;++A<Y&&O(I[A],A,I)!==!1;);return I}function fh(I,O){for(var A=I==null?0:I.length;A--&&O(I[A],A,I)!==!1;);return I}function Is(I,O){for(var A=-1,Y=I==null?0:I.length;++A<Y;)if(!O(I[A],A,I))return!1;return!0}function yn(I,O){for(var A=-1,Y=I==null?0:I.length,ne=0,me=[];++A<Y;){var Be=I[A];O(Be,A,I)&&(me[ne++]=Be)}return me}function Ur(I,O){var A=I==null?0:I.length;return!!A&&Xn(I,O,0)>-1}function to(I,O,A){for(var Y=-1,ne=I==null?0:I.length;++Y<ne;)if(A(O,I[Y]))return!0;return!1}function Te(I,O){for(var A=-1,Y=I==null?0:I.length,ne=Array(Y);++A<Y;)ne[A]=O(I[A],A,I);return ne}function wn(I,O){for(var A=-1,Y=O.length,ne=I.length;++A<Y;)I[ne+A]=O[A];return I}function no(I,O,A,Y){var ne=-1,me=I==null?0:I.length;for(Y&&me&&(A=I[++ne]);++ne<me;)A=O(A,I[ne],ne,I);return A}function hh(I,O,A,Y){var ne=I==null?0:I.length;for(Y&&ne&&(A=I[--ne]);ne--;)A=O(A,I[ne],ne,I);return A}function ro(I,O){for(var A=-1,Y=I==null?0:I.length;++A<Y;)if(O(I[A],A,I))return!0;return!1}var dh=io("length");function ph(I){return I.split("")}function gh(I){return I.match(kf)||[]}function Cs(I,O,A){var Y;return A(I,function(ne,me,Be){if(O(ne,me,Be))return Y=me,!1}),Y}function Gr(I,O,A,Y){for(var ne=I.length,me=A+(Y?1:-1);Y?me--:++me<ne;)if(O(I[me],me,I))return me;return-1}function Xn(I,O,A){return O===O?Eh(I,O,A):Gr(I,Es,A)}function mh(I,O,A,Y){for(var ne=A-1,me=I.length;++ne<me;)if(Y(I[ne],O))return ne;return-1}function Es(I){return I!==I}function Ts(I,O){var A=I==null?0:I.length;return A?ao(I,O)/A:_}function io(I){return function(O){return O==null?n:O[I]}}function oo(I){return function(O){return I==null?n:I[O]}}function As(I,O,A,Y,ne){return ne(I,function(me,Be,_e){A=Y?(Y=!1,me):O(A,me,Be,_e)}),A}function yh(I,O){var A=I.length;for(I.sort(O);A--;)I[A]=I[A].value;return I}function ao(I,O){for(var A,Y=-1,ne=I.length;++Y<ne;){var me=O(I[Y]);me!==n&&(A=A===n?me:A+me)}return A}function so(I,O){for(var A=-1,Y=Array(I);++A<I;)Y[A]=O(A);return Y}function wh(I,O){return Te(O,function(A){return[A,I[A]]})}function Ps(I){return I&&I.slice(0,Fs(I)+1).replace(Vi,"")}function dt(I){return function(O){return I(O)}}function uo(I,O){return Te(O,function(A){return I[A]})}function hr(I,O){return I.has(O)}function Os(I,O){for(var A=-1,Y=I.length;++A<Y&&Xn(O,I[A],0)>-1;);return A}function Ms(I,O){for(var A=I.length;A--&&Xn(O,I[A],0)>-1;);return A}function bh(I,O){for(var A=I.length,Y=0;A--;)I[A]===O&&++Y;return Y}var vh=oo(rh),xh=oo(ih);function _h(I){return"\\"+ah[I]}function kh(I,O){return I==null?n:I[O]}function Jn(I){return Zf.test(I)}function Sh(I){return eh.test(I)}function Ih(I){for(var O,A=[];!(O=I.next()).done;)A.push(O.value);return A}function lo(I){var O=-1,A=Array(I.size);return I.forEach(function(Y,ne){A[++O]=[ne,Y]}),A}function Ds(I,O){return function(A){return I(O(A))}}function bn(I,O){for(var A=-1,Y=I.length,ne=0,me=[];++A<Y;){var Be=I[A];(Be===O||Be===p)&&(I[A]=p,me[ne++]=A)}return me}function Vr(I){var O=-1,A=Array(I.size);return I.forEach(function(Y){A[++O]=Y}),A}function Ch(I){var O=-1,A=Array(I.size);return I.forEach(function(Y){A[++O]=[Y,Y]}),A}function Eh(I,O,A){for(var Y=A-1,ne=I.length;++Y<ne;)if(I[Y]===O)return Y;return-1}function Th(I,O,A){for(var Y=A+1;Y--;)if(I[Y]===O)return Y;return Y}function Zn(I){return Jn(I)?Ph(I):dh(I)}function Bt(I){return Jn(I)?Oh(I):ph(I)}function Fs(I){for(var O=I.length;O--&&bf.test(I.charAt(O)););return O}var Ah=oo(oh);function Ph(I){for(var O=Ji.lastIndex=0;Ji.test(I);)++O;return O}function Oh(I){return I.match(Ji)||[]}function Mh(I){return I.match(Jf)||[]}var Dh=(function I(O){O=O==null?He:er.defaults(He.Object(),O,er.pick(He,th));var A=O.Array,Y=O.Date,ne=O.Error,me=O.Function,Be=O.Math,_e=O.Object,co=O.RegExp,Fh=O.String,St=O.TypeError,Qr=A.prototype,Rh=me.prototype,tr=_e.prototype,jr=O["__core-js_shared__"],Kr=Rh.toString,ve=tr.hasOwnProperty,Lh=0,Rs=(function(){var e=/[^.]+$/.exec(jr&&jr.keys&&jr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})(),Xr=tr.toString,Bh=Kr.call(_e),$h=He._,Nh=co("^"+Kr.call(ve).replace(Gi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Jr=ws?O.Buffer:n,vn=O.Symbol,Zr=O.Uint8Array,Ls=Jr?Jr.allocUnsafe:n,ei=Ds(_e.getPrototypeOf,_e),Bs=_e.create,$s=tr.propertyIsEnumerable,ti=Qr.splice,Ns=vn?vn.isConcatSpreadable:n,dr=vn?vn.iterator:n,Rn=vn?vn.toStringTag:n,ni=(function(){try{var e=Wn(_e,"defineProperty");return e({},"",{}),e}catch{}})(),Wh=O.clearTimeout!==He.clearTimeout&&O.clearTimeout,zh=Y&&Y.now!==He.Date.now&&Y.now,qh=O.setTimeout!==He.setTimeout&&O.setTimeout,ri=Be.ceil,ii=Be.floor,fo=_e.getOwnPropertySymbols,Hh=Jr?Jr.isBuffer:n,Ws=O.isFinite,Yh=Qr.join,Uh=Ds(_e.keys,_e),$e=Be.max,Ue=Be.min,Gh=Y.now,Vh=O.parseInt,zs=Be.random,Qh=Qr.reverse,ho=Wn(O,"DataView"),pr=Wn(O,"Map"),po=Wn(O,"Promise"),nr=Wn(O,"Set"),gr=Wn(O,"WeakMap"),mr=Wn(_e,"create"),oi=gr&&new gr,rr={},jh=zn(ho),Kh=zn(pr),Xh=zn(po),Jh=zn(nr),Zh=zn(gr),ai=vn?vn.prototype:n,yr=ai?ai.valueOf:n,qs=ai?ai.toString:n;function w(e){if(De(e)&&!re(e)&&!(e instanceof ce)){if(e instanceof It)return e;if(ve.call(e,"__wrapped__"))return Hu(e)}return new It(e)}var ir=(function(){function e(){}return function(i){if(!Pe(i))return{};if(Bs)return Bs(i);e.prototype=i;var s=new e;return e.prototype=n,s}})();function si(){}function It(e,i){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=n}w.templateSettings={escape:df,evaluate:pf,interpolate:Xa,variable:"",imports:{_:w}},w.prototype=si.prototype,w.prototype.constructor=w,It.prototype=ir(si.prototype),It.prototype.constructor=It;function ce(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Oe,this.__views__=[]}function ed(){var e=new ce(this.__wrapped__);return e.__actions__=Ze(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ze(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ze(this.__views__),e}function td(){if(this.__filtered__){var e=new ce(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function nd(){var e=this.__wrapped__.value(),i=this.__dir__,s=re(e),h=i<0,m=s?e.length:0,v=pp(0,m,this.__views__),x=v.start,k=v.end,C=k-x,R=h?k:x-1,L=this.__iteratees__,B=L.length,q=0,G=Ue(C,this.__takeCount__);if(!s||!h&&m==C&&G==C)return hu(e,this.__actions__);var J=[];e:for(;C--&&q<G;){R+=i;for(var oe=-1,Z=e[R];++oe<B;){var le=L[oe],he=le.iteratee,mt=le.type,Ke=he(Z);if(mt==fe)Z=Ke;else if(!Ke){if(mt==Ae)continue e;break e}}J[q++]=Z}return J}ce.prototype=ir(si.prototype),ce.prototype.constructor=ce;function Ln(e){var i=-1,s=e==null?0:e.length;for(this.clear();++i<s;){var h=e[i];this.set(h[0],h[1])}}function rd(){this.__data__=mr?mr(null):{},this.size=0}function id(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}function od(e){var i=this.__data__;if(mr){var s=i[e];return s===f?n:s}return ve.call(i,e)?i[e]:n}function ad(e){var i=this.__data__;return mr?i[e]!==n:ve.call(i,e)}function sd(e,i){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=mr&&i===n?f:i,this}Ln.prototype.clear=rd,Ln.prototype.delete=id,Ln.prototype.get=od,Ln.prototype.has=ad,Ln.prototype.set=sd;function nn(e){var i=-1,s=e==null?0:e.length;for(this.clear();++i<s;){var h=e[i];this.set(h[0],h[1])}}function ud(){this.__data__=[],this.size=0}function ld(e){var i=this.__data__,s=ui(i,e);if(s<0)return!1;var h=i.length-1;return s==h?i.pop():ti.call(i,s,1),--this.size,!0}function cd(e){var i=this.__data__,s=ui(i,e);return s<0?n:i[s][1]}function fd(e){return ui(this.__data__,e)>-1}function hd(e,i){var s=this.__data__,h=ui(s,e);return h<0?(++this.size,s.push([e,i])):s[h][1]=i,this}nn.prototype.clear=ud,nn.prototype.delete=ld,nn.prototype.get=cd,nn.prototype.has=fd,nn.prototype.set=hd;function rn(e){var i=-1,s=e==null?0:e.length;for(this.clear();++i<s;){var h=e[i];this.set(h[0],h[1])}}function dd(){this.size=0,this.__data__={hash:new Ln,map:new(pr||nn),string:new Ln}}function pd(e){var i=vi(this,e).delete(e);return this.size-=i?1:0,i}function gd(e){return vi(this,e).get(e)}function md(e){return vi(this,e).has(e)}function yd(e,i){var s=vi(this,e),h=s.size;return s.set(e,i),this.size+=s.size==h?0:1,this}rn.prototype.clear=dd,rn.prototype.delete=pd,rn.prototype.get=gd,rn.prototype.has=md,rn.prototype.set=yd;function Bn(e){var i=-1,s=e==null?0:e.length;for(this.__data__=new rn;++i<s;)this.add(e[i])}function wd(e){return this.__data__.set(e,f),this}function bd(e){return this.__data__.has(e)}Bn.prototype.add=Bn.prototype.push=wd,Bn.prototype.has=bd;function $t(e){var i=this.__data__=new nn(e);this.size=i.size}function vd(){this.__data__=new nn,this.size=0}function xd(e){var i=this.__data__,s=i.delete(e);return this.size=i.size,s}function _d(e){return this.__data__.get(e)}function kd(e){return this.__data__.has(e)}function Sd(e,i){var s=this.__data__;if(s instanceof nn){var h=s.__data__;if(!pr||h.length<a-1)return h.push([e,i]),this.size=++s.size,this;s=this.__data__=new rn(h)}return s.set(e,i),this.size=s.size,this}$t.prototype.clear=vd,$t.prototype.delete=xd,$t.prototype.get=_d,$t.prototype.has=kd,$t.prototype.set=Sd;function Hs(e,i){var s=re(e),h=!s&&qn(e),m=!s&&!h&&In(e),v=!s&&!h&&!m&&ur(e),x=s||h||m||v,k=x?so(e.length,Fh):[],C=k.length;for(var R in e)(i||ve.call(e,R))&&!(x&&(R=="length"||m&&(R=="offset"||R=="parent")||v&&(R=="buffer"||R=="byteLength"||R=="byteOffset")||un(R,C)))&&k.push(R);return k}function Ys(e){var i=e.length;return i?e[Io(0,i-1)]:n}function Id(e,i){return xi(Ze(e),$n(i,0,e.length))}function Cd(e){return xi(Ze(e))}function go(e,i,s){(s!==n&&!Nt(e[i],s)||s===n&&!(i in e))&&on(e,i,s)}function wr(e,i,s){var h=e[i];(!(ve.call(e,i)&&Nt(h,s))||s===n&&!(i in e))&&on(e,i,s)}function ui(e,i){for(var s=e.length;s--;)if(Nt(e[s][0],i))return s;return-1}function Ed(e,i,s,h){return xn(e,function(m,v,x){i(h,m,s(m),x)}),h}function Us(e,i){return e&&Ut(i,ze(i),e)}function Td(e,i){return e&&Ut(i,tt(i),e)}function on(e,i,s){i=="__proto__"&&ni?ni(e,i,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[i]=s}function mo(e,i){for(var s=-1,h=i.length,m=A(h),v=e==null;++s<h;)m[s]=v?n:Ko(e,i[s]);return m}function $n(e,i,s){return e===e&&(s!==n&&(e=e<=s?e:s),i!==n&&(e=e>=i?e:i)),e}function Ct(e,i,s,h,m,v){var x,k=i&g,C=i&b,R=i&y;if(s&&(x=m?s(e,h,m,v):s(e)),x!==n)return x;if(!Pe(e))return e;var L=re(e);if(L){if(x=mp(e),!k)return Ze(e,x)}else{var B=Ge(e),q=B==Qn||B==$r;if(In(e))return gu(e,k);if(B==xt||B==Xe||q&&!m){if(x=C||q?{}:Fu(e),!k)return C?op(e,Td(x,e)):ip(e,Us(x,e))}else{if(!Se[B])return m?e:{};x=yp(e,B,k)}}v||(v=new $t);var G=v.get(e);if(G)return G;v.set(e,x),ll(e)?e.forEach(function(Z){x.add(Ct(Z,i,s,Z,e,v))}):sl(e)&&e.forEach(function(Z,le){x.set(le,Ct(Z,i,s,le,e,v))});var J=R?C?Lo:Ro:C?tt:ze,oe=L?n:J(e);return kt(oe||e,function(Z,le){oe&&(le=Z,Z=e[le]),wr(x,le,Ct(Z,i,s,le,e,v))}),x}function Ad(e){var i=ze(e);return function(s){return Gs(s,e,i)}}function Gs(e,i,s){var h=s.length;if(e==null)return!h;for(e=_e(e);h--;){var m=s[h],v=i[m],x=e[m];if(x===n&&!(m in e)||!v(x))return!1}return!0}function Vs(e,i,s){if(typeof e!="function")throw new St(l);return Ir(function(){e.apply(n,s)},i)}function br(e,i,s,h){var m=-1,v=Ur,x=!0,k=e.length,C=[],R=i.length;if(!k)return C;s&&(i=Te(i,dt(s))),h?(v=to,x=!1):i.length>=a&&(v=hr,x=!1,i=new Bn(i));e:for(;++m<k;){var L=e[m],B=s==null?L:s(L);if(L=h||L!==0?L:0,x&&B===B){for(var q=R;q--;)if(i[q]===B)continue e;C.push(L)}else v(i,B,h)||C.push(L)}return C}var xn=vu(Yt),Qs=vu(wo,!0);function Pd(e,i){var s=!0;return xn(e,function(h,m,v){return s=!!i(h,m,v),s}),s}function li(e,i,s){for(var h=-1,m=e.length;++h<m;){var v=e[h],x=i(v);if(x!=null&&(k===n?x===x&&!gt(x):s(x,k)))var k=x,C=v}return C}function Od(e,i,s,h){var m=e.length;for(s=ie(s),s<0&&(s=-s>m?0:m+s),h=h===n||h>m?m:ie(h),h<0&&(h+=m),h=s>h?0:fl(h);s<h;)e[s++]=i;return e}function js(e,i){var s=[];return xn(e,function(h,m,v){i(h,m,v)&&s.push(h)}),s}function Ye(e,i,s,h,m){var v=-1,x=e.length;for(s||(s=bp),m||(m=[]);++v<x;){var k=e[v];i>0&&s(k)?i>1?Ye(k,i-1,s,h,m):wn(m,k):h||(m[m.length]=k)}return m}var yo=xu(),Ks=xu(!0);function Yt(e,i){return e&&yo(e,i,ze)}function wo(e,i){return e&&Ks(e,i,ze)}function ci(e,i){return yn(i,function(s){return ln(e[s])})}function Nn(e,i){i=kn(i,e);for(var s=0,h=i.length;e!=null&&s<h;)e=e[Gt(i[s++])];return s&&s==h?e:n}function Xs(e,i,s){var h=i(e);return re(e)?h:wn(h,s(e))}function Qe(e){return e==null?e===n?Ui:Nr:Rn&&Rn in _e(e)?dp(e):Cp(e)}function bo(e,i){return e>i}function Md(e,i){return e!=null&&ve.call(e,i)}function Dd(e,i){return e!=null&&i in _e(e)}function Fd(e,i,s){return e>=Ue(i,s)&&e<$e(i,s)}function vo(e,i,s){for(var h=s?to:Ur,m=e[0].length,v=e.length,x=v,k=A(v),C=1/0,R=[];x--;){var L=e[x];x&&i&&(L=Te(L,dt(i))),C=Ue(L.length,C),k[x]=!s&&(i||m>=120&&L.length>=120)?new Bn(x&&L):n}L=e[0];var B=-1,q=k[0];e:for(;++B<m&&R.length<C;){var G=L[B],J=i?i(G):G;if(G=s||G!==0?G:0,!(q?hr(q,J):h(R,J,s))){for(x=v;--x;){var oe=k[x];if(!(oe?hr(oe,J):h(e[x],J,s)))continue e}q&&q.push(J),R.push(G)}}return R}function Rd(e,i,s,h){return Yt(e,function(m,v,x){i(h,s(m),v,x)}),h}function vr(e,i,s){i=kn(i,e),e=$u(e,i);var h=e==null?e:e[Gt(Tt(i))];return h==null?n:ht(h,e,s)}function Js(e){return De(e)&&Qe(e)==Xe}function Ld(e){return De(e)&&Qe(e)==N}function Bd(e){return De(e)&&Qe(e)==vt}function xr(e,i,s,h,m){return e===i?!0:e==null||i==null||!De(e)&&!De(i)?e!==e&&i!==i:$d(e,i,s,h,xr,m)}function $d(e,i,s,h,m,v){var x=re(e),k=re(i),C=x?Me:Ge(e),R=k?Me:Ge(i);C=C==Xe?xt:C,R=R==Xe?xt:R;var L=C==xt,B=R==xt,q=C==R;if(q&&In(e)){if(!In(i))return!1;x=!0,L=!1}if(q&&!L)return v||(v=new $t),x||ur(e)?Ou(e,i,s,h,m,v):fp(e,i,C,s,h,m,v);if(!(s&E)){var G=L&&ve.call(e,"__wrapped__"),J=B&&ve.call(i,"__wrapped__");if(G||J){var oe=G?e.value():e,Z=J?i.value():i;return v||(v=new $t),m(oe,Z,s,h,v)}}return q?(v||(v=new $t),hp(e,i,s,h,m,v)):!1}function Nd(e){return De(e)&&Ge(e)==lt}function xo(e,i,s,h){var m=s.length,v=m,x=!h;if(e==null)return!v;for(e=_e(e);m--;){var k=s[m];if(x&&k[2]?k[1]!==e[k[0]]:!(k[0]in e))return!1}for(;++m<v;){k=s[m];var C=k[0],R=e[C],L=k[1];if(x&&k[2]){if(R===n&&!(C in e))return!1}else{var B=new $t;if(h)var q=h(R,L,C,e,i,B);if(!(q===n?xr(L,R,E|P,h,B):q))return!1}}return!0}function Zs(e){if(!Pe(e)||xp(e))return!1;var i=ln(e)?Nh:Af;return i.test(zn(e))}function Wd(e){return De(e)&&Qe(e)==mn}function zd(e){return De(e)&&Ge(e)==ct}function qd(e){return De(e)&&Ei(e.length)&&!!Ee[Qe(e)]}function eu(e){return typeof e=="function"?e:e==null?nt:typeof e=="object"?re(e)?ru(e[0],e[1]):nu(e):_l(e)}function _o(e){if(!Sr(e))return Uh(e);var i=[];for(var s in _e(e))ve.call(e,s)&&s!="constructor"&&i.push(s);return i}function Hd(e){if(!Pe(e))return Ip(e);var i=Sr(e),s=[];for(var h in e)h=="constructor"&&(i||!ve.call(e,h))||s.push(h);return s}function ko(e,i){return e<i}function tu(e,i){var s=-1,h=et(e)?A(e.length):[];return xn(e,function(m,v,x){h[++s]=i(m,v,x)}),h}function nu(e){var i=$o(e);return i.length==1&&i[0][2]?Lu(i[0][0],i[0][1]):function(s){return s===e||xo(s,e,i)}}function ru(e,i){return Wo(e)&&Ru(i)?Lu(Gt(e),i):function(s){var h=Ko(s,e);return h===n&&h===i?Xo(s,e):xr(i,h,E|P)}}function fi(e,i,s,h,m){e!==i&&yo(i,function(v,x){if(m||(m=new $t),Pe(v))Yd(e,i,x,s,fi,h,m);else{var k=h?h(qo(e,x),v,x+"",e,i,m):n;k===n&&(k=v),go(e,x,k)}},tt)}function Yd(e,i,s,h,m,v,x){var k=qo(e,s),C=qo(i,s),R=x.get(C);if(R){go(e,s,R);return}var L=v?v(k,C,s+"",e,i,x):n,B=L===n;if(B){var q=re(C),G=!q&&In(C),J=!q&&!G&&ur(C);L=C,q||G||J?re(k)?L=k:Fe(k)?L=Ze(k):G?(B=!1,L=gu(C,!0)):J?(B=!1,L=mu(C,!0)):L=[]:Cr(C)||qn(C)?(L=k,qn(k)?L=hl(k):(!Pe(k)||ln(k))&&(L=Fu(C))):B=!1}B&&(x.set(C,L),m(L,C,h,v,x),x.delete(C)),go(e,s,L)}function iu(e,i){var s=e.length;if(s)return i+=i<0?s:0,un(i,s)?e[i]:n}function ou(e,i,s){i.length?i=Te(i,function(v){return re(v)?function(x){return Nn(x,v.length===1?v[0]:v)}:v}):i=[nt];var h=-1;i=Te(i,dt(K()));var m=tu(e,function(v,x,k){var C=Te(i,function(R){return R(v)});return{criteria:C,index:++h,value:v}});return yh(m,function(v,x){return rp(v,x,s)})}function Ud(e,i){return au(e,i,function(s,h){return Xo(e,h)})}function au(e,i,s){for(var h=-1,m=i.length,v={};++h<m;){var x=i[h],k=Nn(e,x);s(k,x)&&_r(v,kn(x,e),k)}return v}function Gd(e){return function(i){return Nn(i,e)}}function So(e,i,s,h){var m=h?mh:Xn,v=-1,x=i.length,k=e;for(e===i&&(i=Ze(i)),s&&(k=Te(e,dt(s)));++v<x;)for(var C=0,R=i[v],L=s?s(R):R;(C=m(k,L,C,h))>-1;)k!==e&&ti.call(k,C,1),ti.call(e,C,1);return e}function su(e,i){for(var s=e?i.length:0,h=s-1;s--;){var m=i[s];if(s==h||m!==v){var v=m;un(m)?ti.call(e,m,1):To(e,m)}}return e}function Io(e,i){return e+ii(zs()*(i-e+1))}function Vd(e,i,s,h){for(var m=-1,v=$e(ri((i-e)/(s||1)),0),x=A(v);v--;)x[h?v:++m]=e,e+=s;return x}function Co(e,i){var s="";if(!e||i<1||i>Le)return s;do i%2&&(s+=e),i=ii(i/2),i&&(e+=e);while(i);return s}function se(e,i){return Ho(Bu(e,i,nt),e+"")}function Qd(e){return Ys(lr(e))}function jd(e,i){var s=lr(e);return xi(s,$n(i,0,s.length))}function _r(e,i,s,h){if(!Pe(e))return e;i=kn(i,e);for(var m=-1,v=i.length,x=v-1,k=e;k!=null&&++m<v;){var C=Gt(i[m]),R=s;if(C==="__proto__"||C==="constructor"||C==="prototype")return e;if(m!=x){var L=k[C];R=h?h(L,C,k):n,R===n&&(R=Pe(L)?L:un(i[m+1])?[]:{})}wr(k,C,R),k=k[C]}return e}var uu=oi?function(e,i){return oi.set(e,i),e}:nt,Kd=ni?function(e,i){return ni(e,"toString",{configurable:!0,enumerable:!1,value:Zo(i),writable:!0})}:nt;function Xd(e){return xi(lr(e))}function Et(e,i,s){var h=-1,m=e.length;i<0&&(i=-i>m?0:m+i),s=s>m?m:s,s<0&&(s+=m),m=i>s?0:s-i>>>0,i>>>=0;for(var v=A(m);++h<m;)v[h]=e[h+i];return v}function Jd(e,i){var s;return xn(e,function(h,m,v){return s=i(h,m,v),!s}),!!s}function hi(e,i,s){var h=0,m=e==null?h:e.length;if(typeof i=="number"&&i===i&&m<=S){for(;h<m;){var v=h+m>>>1,x=e[v];x!==null&&!gt(x)&&(s?x<=i:x<i)?h=v+1:m=v}return m}return Eo(e,i,nt,s)}function Eo(e,i,s,h){var m=0,v=e==null?0:e.length;if(v===0)return 0;i=s(i);for(var x=i!==i,k=i===null,C=gt(i),R=i===n;m<v;){var L=ii((m+v)/2),B=s(e[L]),q=B!==n,G=B===null,J=B===B,oe=gt(B);if(x)var Z=h||J;else R?Z=J&&(h||q):k?Z=J&&q&&(h||!G):C?Z=J&&q&&!G&&(h||!oe):G||oe?Z=!1:Z=h?B<=i:B<i;Z?m=L+1:v=L}return Ue(v,Ft)}function lu(e,i){for(var s=-1,h=e.length,m=0,v=[];++s<h;){var x=e[s],k=i?i(x):x;if(!s||!Nt(k,C)){var C=k;v[m++]=x===0?0:x}}return v}function cu(e){return typeof e=="number"?e:gt(e)?_:+e}function pt(e){if(typeof e=="string")return e;if(re(e))return Te(e,pt)+"";if(gt(e))return qs?qs.call(e):"";var i=e+"";return i=="0"&&1/e==-Ce?"-0":i}function _n(e,i,s){var h=-1,m=Ur,v=e.length,x=!0,k=[],C=k;if(s)x=!1,m=to;else if(v>=a){var R=i?null:lp(e);if(R)return Vr(R);x=!1,m=hr,C=new Bn}else C=i?[]:k;e:for(;++h<v;){var L=e[h],B=i?i(L):L;if(L=s||L!==0?L:0,x&&B===B){for(var q=C.length;q--;)if(C[q]===B)continue e;i&&C.push(B),k.push(L)}else m(C,B,s)||(C!==k&&C.push(B),k.push(L))}return k}function To(e,i){return i=kn(i,e),e=$u(e,i),e==null||delete e[Gt(Tt(i))]}function fu(e,i,s,h){return _r(e,i,s(Nn(e,i)),h)}function di(e,i,s,h){for(var m=e.length,v=h?m:-1;(h?v--:++v<m)&&i(e[v],v,e););return s?Et(e,h?0:v,h?v+1:m):Et(e,h?v+1:0,h?m:v)}function hu(e,i){var s=e;return s instanceof ce&&(s=s.value()),no(i,function(h,m){return m.func.apply(m.thisArg,wn([h],m.args))},s)}function Ao(e,i,s){var h=e.length;if(h<2)return h?_n(e[0]):[];for(var m=-1,v=A(h);++m<h;)for(var x=e[m],k=-1;++k<h;)k!=m&&(v[m]=br(v[m]||x,e[k],i,s));return _n(Ye(v,1),i,s)}function du(e,i,s){for(var h=-1,m=e.length,v=i.length,x={};++h<m;){var k=h<v?i[h]:n;s(x,e[h],k)}return x}function Po(e){return Fe(e)?e:[]}function Oo(e){return typeof e=="function"?e:nt}function kn(e,i){return re(e)?e:Wo(e,i)?[e]:qu(be(e))}var Zd=se;function Sn(e,i,s){var h=e.length;return s=s===n?h:s,!i&&s>=h?e:Et(e,i,s)}var pu=Wh||function(e){return He.clearTimeout(e)};function gu(e,i){if(i)return e.slice();var s=e.length,h=Ls?Ls(s):new e.constructor(s);return e.copy(h),h}function Mo(e){var i=new e.constructor(e.byteLength);return new Zr(i).set(new Zr(e)),i}function ep(e,i){var s=i?Mo(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.byteLength)}function tp(e){var i=new e.constructor(e.source,Ja.exec(e));return i.lastIndex=e.lastIndex,i}function np(e){return yr?_e(yr.call(e)):{}}function mu(e,i){var s=i?Mo(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}function yu(e,i){if(e!==i){var s=e!==n,h=e===null,m=e===e,v=gt(e),x=i!==n,k=i===null,C=i===i,R=gt(i);if(!k&&!R&&!v&&e>i||v&&x&&C&&!k&&!R||h&&x&&C||!s&&C||!m)return 1;if(!h&&!v&&!R&&e<i||R&&s&&m&&!h&&!v||k&&s&&m||!x&&m||!C)return-1}return 0}function rp(e,i,s){for(var h=-1,m=e.criteria,v=i.criteria,x=m.length,k=s.length;++h<x;){var C=yu(m[h],v[h]);if(C){if(h>=k)return C;var R=s[h];return C*(R=="desc"?-1:1)}}return e.index-i.index}function wu(e,i,s,h){for(var m=-1,v=e.length,x=s.length,k=-1,C=i.length,R=$e(v-x,0),L=A(C+R),B=!h;++k<C;)L[k]=i[k];for(;++m<x;)(B||m<v)&&(L[s[m]]=e[m]);for(;R--;)L[k++]=e[m++];return L}function bu(e,i,s,h){for(var m=-1,v=e.length,x=-1,k=s.length,C=-1,R=i.length,L=$e(v-k,0),B=A(L+R),q=!h;++m<L;)B[m]=e[m];for(var G=m;++C<R;)B[G+C]=i[C];for(;++x<k;)(q||m<v)&&(B[G+s[x]]=e[m++]);return B}function Ze(e,i){var s=-1,h=e.length;for(i||(i=A(h));++s<h;)i[s]=e[s];return i}function Ut(e,i,s,h){var m=!s;s||(s={});for(var v=-1,x=i.length;++v<x;){var k=i[v],C=h?h(s[k],e[k],k,s,e):n;C===n&&(C=e[k]),m?on(s,k,C):wr(s,k,C)}return s}function ip(e,i){return Ut(e,No(e),i)}function op(e,i){return Ut(e,Mu(e),i)}function pi(e,i){return function(s,h){var m=re(s)?ch:Ed,v=i?i():{};return m(s,e,K(h,2),v)}}function or(e){return se(function(i,s){var h=-1,m=s.length,v=m>1?s[m-1]:n,x=m>2?s[2]:n;for(v=e.length>3&&typeof v=="function"?(m--,v):n,x&&je(s[0],s[1],x)&&(v=m<3?n:v,m=1),i=_e(i);++h<m;){var k=s[h];k&&e(i,k,h,v)}return i})}function vu(e,i){return function(s,h){if(s==null)return s;if(!et(s))return e(s,h);for(var m=s.length,v=i?m:-1,x=_e(s);(i?v--:++v<m)&&h(x[v],v,x)!==!1;);return s}}function xu(e){return function(i,s,h){for(var m=-1,v=_e(i),x=h(i),k=x.length;k--;){var C=x[e?k:++m];if(s(v[C],C,v)===!1)break}return i}}function ap(e,i,s){var h=i&$,m=kr(e);function v(){var x=this&&this!==He&&this instanceof v?m:e;return x.apply(h?s:this,arguments)}return v}function _u(e){return function(i){i=be(i);var s=Jn(i)?Bt(i):n,h=s?s[0]:i.charAt(0),m=s?Sn(s,1).join(""):i.slice(1);return h[e]()+m}}function ar(e){return function(i){return no(vl(bl(i).replace(Kf,"")),e,"")}}function kr(e){return function(){var i=arguments;switch(i.length){case 0:return new e;case 1:return new e(i[0]);case 2:return new e(i[0],i[1]);case 3:return new e(i[0],i[1],i[2]);case 4:return new e(i[0],i[1],i[2],i[3]);case 5:return new e(i[0],i[1],i[2],i[3],i[4]);case 6:return new e(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new e(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var s=ir(e.prototype),h=e.apply(s,i);return Pe(h)?h:s}}function sp(e,i,s){var h=kr(e);function m(){for(var v=arguments.length,x=A(v),k=v,C=sr(m);k--;)x[k]=arguments[k];var R=v<3&&x[0]!==C&&x[v-1]!==C?[]:bn(x,C);if(v-=R.length,v<s)return Eu(e,i,gi,m.placeholder,n,x,R,n,n,s-v);var L=this&&this!==He&&this instanceof m?h:e;return ht(L,this,x)}return m}function ku(e){return function(i,s,h){var m=_e(i);if(!et(i)){var v=K(s,3);i=ze(i),s=function(k){return v(m[k],k,m)}}var x=e(i,s,h);return x>-1?m[v?i[x]:x]:n}}function Su(e){return sn(function(i){var s=i.length,h=s,m=It.prototype.thru;for(e&&i.reverse();h--;){var v=i[h];if(typeof v!="function")throw new St(l);if(m&&!x&&bi(v)=="wrapper")var x=new It([],!0)}for(h=x?h:s;++h<s;){v=i[h];var k=bi(v),C=k=="wrapper"?Bo(v):n;C&&zo(C[0])&&C[1]==(U|z|F|Q)&&!C[4].length&&C[9]==1?x=x[bi(C[0])].apply(x,C[3]):x=v.length==1&&zo(v)?x[k]():x.thru(v)}return function(){var R=arguments,L=R[0];if(x&&R.length==1&&re(L))return x.plant(L).value();for(var B=0,q=s?i[B].apply(this,R):L;++B<s;)q=i[B].call(this,q);return q}})}function gi(e,i,s,h,m,v,x,k,C,R){var L=i&U,B=i&$,q=i&D,G=i&(z|W),J=i&ee,oe=q?n:kr(e);function Z(){for(var le=arguments.length,he=A(le),mt=le;mt--;)he[mt]=arguments[mt];if(G)var Ke=sr(Z),yt=bh(he,Ke);if(h&&(he=wu(he,h,m,G)),v&&(he=bu(he,v,x,G)),le-=yt,G&&le<R){var Re=bn(he,Ke);return Eu(e,i,gi,Z.placeholder,s,he,Re,k,C,R-le)}var Wt=B?s:this,fn=q?Wt[e]:e;return le=he.length,k?he=Ep(he,k):J&&le>1&&he.reverse(),L&&C<le&&(he.length=C),this&&this!==He&&this instanceof Z&&(fn=oe||kr(fn)),fn.apply(Wt,he)}return Z}function Iu(e,i){return function(s,h){return Rd(s,e,i(h),{})}}function mi(e,i){return function(s,h){var m;if(s===n&&h===n)return i;if(s!==n&&(m=s),h!==n){if(m===n)return h;typeof s=="string"||typeof h=="string"?(s=pt(s),h=pt(h)):(s=cu(s),h=cu(h)),m=e(s,h)}return m}}function Do(e){return sn(function(i){return i=Te(i,dt(K())),se(function(s){var h=this;return e(i,function(m){return ht(m,h,s)})})})}function yi(e,i){i=i===n?" ":pt(i);var s=i.length;if(s<2)return s?Co(i,e):i;var h=Co(i,ri(e/Zn(i)));return Jn(i)?Sn(Bt(h),0,e).join(""):h.slice(0,e)}function up(e,i,s,h){var m=i&$,v=kr(e);function x(){for(var k=-1,C=arguments.length,R=-1,L=h.length,B=A(L+C),q=this&&this!==He&&this instanceof x?v:e;++R<L;)B[R]=h[R];for(;C--;)B[R++]=arguments[++k];return ht(q,m?s:this,B)}return x}function Cu(e){return function(i,s,h){return h&&typeof h!="number"&&je(i,s,h)&&(s=h=n),i=cn(i),s===n?(s=i,i=0):s=cn(s),h=h===n?i<s?1:-1:cn(h),Vd(i,s,h,e)}}function wi(e){return function(i,s){return typeof i=="string"&&typeof s=="string"||(i=At(i),s=At(s)),e(i,s)}}function Eu(e,i,s,h,m,v,x,k,C,R){var L=i&z,B=L?x:n,q=L?n:x,G=L?v:n,J=L?n:v;i|=L?F:T,i&=~(L?T:F),i&H||(i&=-4);var oe=[e,i,m,G,B,J,q,k,C,R],Z=s.apply(n,oe);return zo(e)&&Nu(Z,oe),Z.placeholder=h,Wu(Z,e,i)}function Fo(e){var i=Be[e];return function(s,h){if(s=At(s),h=h==null?0:Ue(ie(h),292),h&&Ws(s)){var m=(be(s)+"e").split("e"),v=i(m[0]+"e"+(+m[1]+h));return m=(be(v)+"e").split("e"),+(m[0]+"e"+(+m[1]-h))}return i(s)}}var lp=nr&&1/Vr(new nr([,-0]))[1]==Ce?function(e){return new nr(e)}:na;function Tu(e){return function(i){var s=Ge(i);return s==lt?lo(i):s==ct?Ch(i):wh(i,e(i))}}function an(e,i,s,h,m,v,x,k){var C=i&D;if(!C&&typeof e!="function")throw new St(l);var R=h?h.length:0;if(R||(i&=-97,h=m=n),x=x===n?x:$e(ie(x),0),k=k===n?k:ie(k),R-=m?m.length:0,i&T){var L=h,B=m;h=m=n}var q=C?n:Bo(e),G=[e,i,s,h,m,L,B,v,x,k];if(q&&Sp(G,q),e=G[0],i=G[1],s=G[2],h=G[3],m=G[4],k=G[9]=G[9]===n?C?0:e.length:$e(G[9]-R,0),!k&&i&(z|W)&&(i&=-25),!i||i==$)var J=ap(e,i,s);else i==z||i==W?J=sp(e,i,k):(i==F||i==($|F))&&!m.length?J=up(e,i,s,h):J=gi.apply(n,G);var oe=q?uu:Nu;return Wu(oe(J,G),e,i)}function Au(e,i,s,h){return e===n||Nt(e,tr[s])&&!ve.call(h,s)?i:e}function Pu(e,i,s,h,m,v){return Pe(e)&&Pe(i)&&(v.set(i,e),fi(e,i,n,Pu,v),v.delete(i)),e}function cp(e){return Cr(e)?n:e}function Ou(e,i,s,h,m,v){var x=s&E,k=e.length,C=i.length;if(k!=C&&!(x&&C>k))return!1;var R=v.get(e),L=v.get(i);if(R&&L)return R==i&&L==e;var B=-1,q=!0,G=s&P?new Bn:n;for(v.set(e,i),v.set(i,e);++B<k;){var J=e[B],oe=i[B];if(h)var Z=x?h(oe,J,B,i,e,v):h(J,oe,B,e,i,v);if(Z!==n){if(Z)continue;q=!1;break}if(G){if(!ro(i,function(le,he){if(!hr(G,he)&&(J===le||m(J,le,s,h,v)))return G.push(he)})){q=!1;break}}else if(!(J===oe||m(J,oe,s,h,v))){q=!1;break}}return v.delete(e),v.delete(i),q}function fp(e,i,s,h,m,v,x){switch(s){case X:if(e.byteLength!=i.byteLength||e.byteOffset!=i.byteOffset)return!1;e=e.buffer,i=i.buffer;case N:return!(e.byteLength!=i.byteLength||!v(new Zr(e),new Zr(i)));case Je:case vt:case gn:return Nt(+e,+i);case Zt:return e.name==i.name&&e.message==i.message;case mn:case Mn:return e==i+"";case lt:var k=lo;case ct:var C=h&E;if(k||(k=Vr),e.size!=i.size&&!C)return!1;var R=x.get(e);if(R)return R==i;h|=P,x.set(e,i);var L=Ou(k(e),k(i),h,m,v,x);return x.delete(e),L;case jn:if(yr)return yr.call(e)==yr.call(i)}return!1}function hp(e,i,s,h,m,v){var x=s&E,k=Ro(e),C=k.length,R=Ro(i),L=R.length;if(C!=L&&!x)return!1;for(var B=C;B--;){var q=k[B];if(!(x?q in i:ve.call(i,q)))return!1}var G=v.get(e),J=v.get(i);if(G&&J)return G==i&&J==e;var oe=!0;v.set(e,i),v.set(i,e);for(var Z=x;++B<C;){q=k[B];var le=e[q],he=i[q];if(h)var mt=x?h(he,le,q,i,e,v):h(le,he,q,e,i,v);if(!(mt===n?le===he||m(le,he,s,h,v):mt)){oe=!1;break}Z||(Z=q=="constructor")}if(oe&&!Z){var Ke=e.constructor,yt=i.constructor;Ke!=yt&&"constructor"in e&&"constructor"in i&&!(typeof Ke=="function"&&Ke instanceof Ke&&typeof yt=="function"&&yt instanceof yt)&&(oe=!1)}return v.delete(e),v.delete(i),oe}function sn(e){return Ho(Bu(e,n,Gu),e+"")}function Ro(e){return Xs(e,ze,No)}function Lo(e){return Xs(e,tt,Mu)}var Bo=oi?function(e){return oi.get(e)}:na;function bi(e){for(var i=e.name+"",s=rr[i],h=ve.call(rr,i)?s.length:0;h--;){var m=s[h],v=m.func;if(v==null||v==e)return m.name}return i}function sr(e){var i=ve.call(w,"placeholder")?w:e;return i.placeholder}function K(){var e=w.iteratee||ea;return e=e===ea?eu:e,arguments.length?e(arguments[0],arguments[1]):e}function vi(e,i){var s=e.__data__;return vp(i)?s[typeof i=="string"?"string":"hash"]:s.map}function $o(e){for(var i=ze(e),s=i.length;s--;){var h=i[s],m=e[h];i[s]=[h,m,Ru(m)]}return i}function Wn(e,i){var s=kh(e,i);return Zs(s)?s:n}function dp(e){var i=ve.call(e,Rn),s=e[Rn];try{e[Rn]=n;var h=!0}catch{}var m=Xr.call(e);return h&&(i?e[Rn]=s:delete e[Rn]),m}var No=fo?function(e){return e==null?[]:(e=_e(e),yn(fo(e),function(i){return $s.call(e,i)}))}:ra,Mu=fo?function(e){for(var i=[];e;)wn(i,No(e)),e=ei(e);return i}:ra,Ge=Qe;(ho&&Ge(new ho(new ArrayBuffer(1)))!=X||pr&&Ge(new pr)!=lt||po&&Ge(po.resolve())!=Wr||nr&&Ge(new nr)!=ct||gr&&Ge(new gr)!=Dn)&&(Ge=function(e){var i=Qe(e),s=i==xt?e.constructor:n,h=s?zn(s):"";if(h)switch(h){case jh:return X;case Kh:return lt;case Xh:return Wr;case Jh:return ct;case Zh:return Dn}return i});function pp(e,i,s){for(var h=-1,m=s.length;++h<m;){var v=s[h],x=v.size;switch(v.type){case"drop":e+=x;break;case"dropRight":i-=x;break;case"take":i=Ue(i,e+x);break;case"takeRight":e=$e(e,i-x);break}}return{start:e,end:i}}function gp(e){var i=e.match(xf);return i?i[1].split(_f):[]}function Du(e,i,s){i=kn(i,e);for(var h=-1,m=i.length,v=!1;++h<m;){var x=Gt(i[h]);if(!(v=e!=null&&s(e,x)))break;e=e[x]}return v||++h!=m?v:(m=e==null?0:e.length,!!m&&Ei(m)&&un(x,m)&&(re(e)||qn(e)))}function mp(e){var i=e.length,s=new e.constructor(i);return i&&typeof e[0]=="string"&&ve.call(e,"index")&&(s.index=e.index,s.input=e.input),s}function Fu(e){return typeof e.constructor=="function"&&!Sr(e)?ir(ei(e)):{}}function yp(e,i,s){var h=e.constructor;switch(i){case N:return Mo(e);case Je:case vt:return new h(+e);case X:return ep(e,s);case ae:case ge:case Ve:case Rt:case ft:case en:case tn:case qe:case Ht:return mu(e,s);case lt:return new h;case gn:case Mn:return new h(e);case mn:return tp(e);case ct:return new h;case jn:return np(e)}}function wp(e,i){var s=i.length;if(!s)return e;var h=s-1;return i[h]=(s>1?"& ":"")+i[h],i=i.join(s>2?", ":" "),e.replace(vf,`{
/* [wrapped with `+i+`] */
`)}function bp(e){return re(e)||qn(e)||!!(Ns&&e&&e[Ns])}function un(e,i){var s=typeof e;return i=i??Le,!!i&&(s=="number"||s!="symbol"&&Of.test(e))&&e>-1&&e%1==0&&e<i}function je(e,i,s){if(!Pe(s))return!1;var h=typeof i;return(h=="number"?et(s)&&un(i,s.length):h=="string"&&i in s)?Nt(s[i],e):!1}function Wo(e,i){if(re(e))return!1;var s=typeof e;return s=="number"||s=="symbol"||s=="boolean"||e==null||gt(e)?!0:mf.test(e)||!gf.test(e)||i!=null&&e in _e(i)}function vp(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null}function zo(e){var i=bi(e),s=w[i];if(typeof s!="function"||!(i in ce.prototype))return!1;if(e===s)return!0;var h=Bo(s);return!!h&&e===h[0]}function xp(e){return!!Rs&&Rs in e}var _p=jr?ln:ia;function Sr(e){var i=e&&e.constructor,s=typeof i=="function"&&i.prototype||tr;return e===s}function Ru(e){return e===e&&!Pe(e)}function Lu(e,i){return function(s){return s==null?!1:s[e]===i&&(i!==n||e in _e(s))}}function kp(e){var i=Ii(e,function(h){return s.size===d&&s.clear(),h}),s=i.cache;return i}function Sp(e,i){var s=e[1],h=i[1],m=s|h,v=m<($|D|U),x=h==U&&s==z||h==U&&s==Q&&e[7].length<=i[8]||h==(U|Q)&&i[7].length<=i[8]&&s==z;if(!(v||x))return e;h&$&&(e[2]=i[2],m|=s&$?0:H);var k=i[3];if(k){var C=e[3];e[3]=C?wu(C,k,i[4]):k,e[4]=C?bn(e[3],p):i[4]}return k=i[5],k&&(C=e[5],e[5]=C?bu(C,k,i[6]):k,e[6]=C?bn(e[5],p):i[6]),k=i[7],k&&(e[7]=k),h&U&&(e[8]=e[8]==null?i[8]:Ue(e[8],i[8])),e[9]==null&&(e[9]=i[9]),e[0]=i[0],e[1]=m,e}function Ip(e){var i=[];if(e!=null)for(var s in _e(e))i.push(s);return i}function Cp(e){return Xr.call(e)}function Bu(e,i,s){return i=$e(i===n?e.length-1:i,0),function(){for(var h=arguments,m=-1,v=$e(h.length-i,0),x=A(v);++m<v;)x[m]=h[i+m];m=-1;for(var k=A(i+1);++m<i;)k[m]=h[m];return k[i]=s(x),ht(e,this,k)}}function $u(e,i){return i.length<2?e:Nn(e,Et(i,0,-1))}function Ep(e,i){for(var s=e.length,h=Ue(i.length,s),m=Ze(e);h--;){var v=i[h];e[h]=un(v,s)?m[v]:n}return e}function qo(e,i){if(!(i==="constructor"&&typeof e[i]=="function")&&i!="__proto__")return e[i]}var Nu=zu(uu),Ir=qh||function(e,i){return He.setTimeout(e,i)},Ho=zu(Kd);function Wu(e,i,s){var h=i+"";return Ho(e,wp(h,Tp(gp(h),s)))}function zu(e){var i=0,s=0;return function(){var h=Gh(),m=we-(h-s);if(s=h,m>0){if(++i>=V)return arguments[0]}else i=0;return e.apply(n,arguments)}}function xi(e,i){var s=-1,h=e.length,m=h-1;for(i=i===n?h:i;++s<i;){var v=Io(s,m),x=e[v];e[v]=e[s],e[s]=x}return e.length=i,e}var qu=kp(function(e){var i=[];return e.charCodeAt(0)===46&&i.push(""),e.replace(yf,function(s,h,m,v){i.push(m?v.replace(If,"$1"):h||s)}),i});function Gt(e){if(typeof e=="string"||gt(e))return e;var i=e+"";return i=="0"&&1/e==-Ce?"-0":i}function zn(e){if(e!=null){try{return Kr.call(e)}catch{}try{return e+""}catch{}}return""}function Tp(e,i){return kt(ut,function(s){var h="_."+s[0];i&s[1]&&!Ur(e,h)&&e.push(h)}),e.sort()}function Hu(e){if(e instanceof ce)return e.clone();var i=new It(e.__wrapped__,e.__chain__);return i.__actions__=Ze(e.__actions__),i.__index__=e.__index__,i.__values__=e.__values__,i}function Ap(e,i,s){(s?je(e,i,s):i===n)?i=1:i=$e(ie(i),0);var h=e==null?0:e.length;if(!h||i<1)return[];for(var m=0,v=0,x=A(ri(h/i));m<h;)x[v++]=Et(e,m,m+=i);return x}function Pp(e){for(var i=-1,s=e==null?0:e.length,h=0,m=[];++i<s;){var v=e[i];v&&(m[h++]=v)}return m}function Op(){var e=arguments.length;if(!e)return[];for(var i=A(e-1),s=arguments[0],h=e;h--;)i[h-1]=arguments[h];return wn(re(s)?Ze(s):[s],Ye(i,1))}var Mp=se(function(e,i){return Fe(e)?br(e,Ye(i,1,Fe,!0)):[]}),Dp=se(function(e,i){var s=Tt(i);return Fe(s)&&(s=n),Fe(e)?br(e,Ye(i,1,Fe,!0),K(s,2)):[]}),Fp=se(function(e,i){var s=Tt(i);return Fe(s)&&(s=n),Fe(e)?br(e,Ye(i,1,Fe,!0),n,s):[]});function Rp(e,i,s){var h=e==null?0:e.length;return h?(i=s||i===n?1:ie(i),Et(e,i<0?0:i,h)):[]}function Lp(e,i,s){var h=e==null?0:e.length;return h?(i=s||i===n?1:ie(i),i=h-i,Et(e,0,i<0?0:i)):[]}function Bp(e,i){return e&&e.length?di(e,K(i,3),!0,!0):[]}function $p(e,i){return e&&e.length?di(e,K(i,3),!0):[]}function Np(e,i,s,h){var m=e==null?0:e.length;return m?(s&&typeof s!="number"&&je(e,i,s)&&(s=0,h=m),Od(e,i,s,h)):[]}function Yu(e,i,s){var h=e==null?0:e.length;if(!h)return-1;var m=s==null?0:ie(s);return m<0&&(m=$e(h+m,0)),Gr(e,K(i,3),m)}function Uu(e,i,s){var h=e==null?0:e.length;if(!h)return-1;var m=h-1;return s!==n&&(m=ie(s),m=s<0?$e(h+m,0):Ue(m,h-1)),Gr(e,K(i,3),m,!0)}function Gu(e){var i=e==null?0:e.length;return i?Ye(e,1):[]}function Wp(e){var i=e==null?0:e.length;return i?Ye(e,Ce):[]}function zp(e,i){var s=e==null?0:e.length;return s?(i=i===n?1:ie(i),Ye(e,i)):[]}function qp(e){for(var i=-1,s=e==null?0:e.length,h={};++i<s;){var m=e[i];h[m[0]]=m[1]}return h}function Vu(e){return e&&e.length?e[0]:n}function Hp(e,i,s){var h=e==null?0:e.length;if(!h)return-1;var m=s==null?0:ie(s);return m<0&&(m=$e(h+m,0)),Xn(e,i,m)}function Yp(e){var i=e==null?0:e.length;return i?Et(e,0,-1):[]}var Up=se(function(e){var i=Te(e,Po);return i.length&&i[0]===e[0]?vo(i):[]}),Gp=se(function(e){var i=Tt(e),s=Te(e,Po);return i===Tt(s)?i=n:s.pop(),s.length&&s[0]===e[0]?vo(s,K(i,2)):[]}),Vp=se(function(e){var i=Tt(e),s=Te(e,Po);return i=typeof i=="function"?i:n,i&&s.pop(),s.length&&s[0]===e[0]?vo(s,n,i):[]});function Qp(e,i){return e==null?"":Yh.call(e,i)}function Tt(e){var i=e==null?0:e.length;return i?e[i-1]:n}function jp(e,i,s){var h=e==null?0:e.length;if(!h)return-1;var m=h;return s!==n&&(m=ie(s),m=m<0?$e(h+m,0):Ue(m,h-1)),i===i?Th(e,i,m):Gr(e,Es,m,!0)}function Kp(e,i){return e&&e.length?iu(e,ie(i)):n}var Xp=se(Qu);function Qu(e,i){return e&&e.length&&i&&i.length?So(e,i):e}function Jp(e,i,s){return e&&e.length&&i&&i.length?So(e,i,K(s,2)):e}function Zp(e,i,s){return e&&e.length&&i&&i.length?So(e,i,n,s):e}var eg=sn(function(e,i){var s=e==null?0:e.length,h=mo(e,i);return su(e,Te(i,function(m){return un(m,s)?+m:m}).sort(yu)),h});function tg(e,i){var s=[];if(!(e&&e.length))return s;var h=-1,m=[],v=e.length;for(i=K(i,3);++h<v;){var x=e[h];i(x,h,e)&&(s.push(x),m.push(h))}return su(e,m),s}function Yo(e){return e==null?e:Qh.call(e)}function ng(e,i,s){var h=e==null?0:e.length;return h?(s&&typeof s!="number"&&je(e,i,s)?(i=0,s=h):(i=i==null?0:ie(i),s=s===n?h:ie(s)),Et(e,i,s)):[]}function rg(e,i){return hi(e,i)}function ig(e,i,s){return Eo(e,i,K(s,2))}function og(e,i){var s=e==null?0:e.length;if(s){var h=hi(e,i);if(h<s&&Nt(e[h],i))return h}return-1}function ag(e,i){return hi(e,i,!0)}function sg(e,i,s){return Eo(e,i,K(s,2),!0)}function ug(e,i){var s=e==null?0:e.length;if(s){var h=hi(e,i,!0)-1;if(Nt(e[h],i))return h}return-1}function lg(e){return e&&e.length?lu(e):[]}function cg(e,i){return e&&e.length?lu(e,K(i,2)):[]}function fg(e){var i=e==null?0:e.length;return i?Et(e,1,i):[]}function hg(e,i,s){return e&&e.length?(i=s||i===n?1:ie(i),Et(e,0,i<0?0:i)):[]}function dg(e,i,s){var h=e==null?0:e.length;return h?(i=s||i===n?1:ie(i),i=h-i,Et(e,i<0?0:i,h)):[]}function pg(e,i){return e&&e.length?di(e,K(i,3),!1,!0):[]}function gg(e,i){return e&&e.length?di(e,K(i,3)):[]}var mg=se(function(e){return _n(Ye(e,1,Fe,!0))}),yg=se(function(e){var i=Tt(e);return Fe(i)&&(i=n),_n(Ye(e,1,Fe,!0),K(i,2))}),wg=se(function(e){var i=Tt(e);return i=typeof i=="function"?i:n,_n(Ye(e,1,Fe,!0),n,i)});function bg(e){return e&&e.length?_n(e):[]}function vg(e,i){return e&&e.length?_n(e,K(i,2)):[]}function xg(e,i){return i=typeof i=="function"?i:n,e&&e.length?_n(e,n,i):[]}function Uo(e){if(!(e&&e.length))return[];var i=0;return e=yn(e,function(s){if(Fe(s))return i=$e(s.length,i),!0}),so(i,function(s){return Te(e,io(s))})}function ju(e,i){if(!(e&&e.length))return[];var s=Uo(e);return i==null?s:Te(s,function(h){return ht(i,n,h)})}var _g=se(function(e,i){return Fe(e)?br(e,i):[]}),kg=se(function(e){return Ao(yn(e,Fe))}),Sg=se(function(e){var i=Tt(e);return Fe(i)&&(i=n),Ao(yn(e,Fe),K(i,2))}),Ig=se(function(e){var i=Tt(e);return i=typeof i=="function"?i:n,Ao(yn(e,Fe),n,i)}),Cg=se(Uo);function Eg(e,i){return du(e||[],i||[],wr)}function Tg(e,i){return du(e||[],i||[],_r)}var Ag=se(function(e){var i=e.length,s=i>1?e[i-1]:n;return s=typeof s=="function"?(e.pop(),s):n,ju(e,s)});function Ku(e){var i=w(e);return i.__chain__=!0,i}function Pg(e,i){return i(e),e}function _i(e,i){return i(e)}var Og=sn(function(e){var i=e.length,s=i?e[0]:0,h=this.__wrapped__,m=function(v){return mo(v,e)};return i>1||this.__actions__.length||!(h instanceof ce)||!un(s)?this.thru(m):(h=h.slice(s,+s+(i?1:0)),h.__actions__.push({func:_i,args:[m],thisArg:n}),new It(h,this.__chain__).thru(function(v){return i&&!v.length&&v.push(n),v}))});function Mg(){return Ku(this)}function Dg(){return new It(this.value(),this.__chain__)}function Fg(){this.__values__===n&&(this.__values__=cl(this.value()));var e=this.__index__>=this.__values__.length,i=e?n:this.__values__[this.__index__++];return{done:e,value:i}}function Rg(){return this}function Lg(e){for(var i,s=this;s instanceof si;){var h=Hu(s);h.__index__=0,h.__values__=n,i?m.__wrapped__=h:i=h;var m=h;s=s.__wrapped__}return m.__wrapped__=e,i}function Bg(){var e=this.__wrapped__;if(e instanceof ce){var i=e;return this.__actions__.length&&(i=new ce(this)),i=i.reverse(),i.__actions__.push({func:_i,args:[Yo],thisArg:n}),new It(i,this.__chain__)}return this.thru(Yo)}function $g(){return hu(this.__wrapped__,this.__actions__)}var Ng=pi(function(e,i,s){ve.call(e,s)?++e[s]:on(e,s,1)});function Wg(e,i,s){var h=re(e)?Is:Pd;return s&&je(e,i,s)&&(i=n),h(e,K(i,3))}function zg(e,i){var s=re(e)?yn:js;return s(e,K(i,3))}var qg=ku(Yu),Hg=ku(Uu);function Yg(e,i){return Ye(ki(e,i),1)}function Ug(e,i){return Ye(ki(e,i),Ce)}function Gg(e,i,s){return s=s===n?1:ie(s),Ye(ki(e,i),s)}function Xu(e,i){var s=re(e)?kt:xn;return s(e,K(i,3))}function Ju(e,i){var s=re(e)?fh:Qs;return s(e,K(i,3))}var Vg=pi(function(e,i,s){ve.call(e,s)?e[s].push(i):on(e,s,[i])});function Qg(e,i,s,h){e=et(e)?e:lr(e),s=s&&!h?ie(s):0;var m=e.length;return s<0&&(s=$e(m+s,0)),Ti(e)?s<=m&&e.indexOf(i,s)>-1:!!m&&Xn(e,i,s)>-1}var jg=se(function(e,i,s){var h=-1,m=typeof i=="function",v=et(e)?A(e.length):[];return xn(e,function(x){v[++h]=m?ht(i,x,s):vr(x,i,s)}),v}),Kg=pi(function(e,i,s){on(e,s,i)});function ki(e,i){var s=re(e)?Te:tu;return s(e,K(i,3))}function Xg(e,i,s,h){return e==null?[]:(re(i)||(i=i==null?[]:[i]),s=h?n:s,re(s)||(s=s==null?[]:[s]),ou(e,i,s))}var Jg=pi(function(e,i,s){e[s?0:1].push(i)},function(){return[[],[]]});function Zg(e,i,s){var h=re(e)?no:As,m=arguments.length<3;return h(e,K(i,4),s,m,xn)}function em(e,i,s){var h=re(e)?hh:As,m=arguments.length<3;return h(e,K(i,4),s,m,Qs)}function tm(e,i){var s=re(e)?yn:js;return s(e,Ci(K(i,3)))}function nm(e){var i=re(e)?Ys:Qd;return i(e)}function rm(e,i,s){(s?je(e,i,s):i===n)?i=1:i=ie(i);var h=re(e)?Id:jd;return h(e,i)}function im(e){var i=re(e)?Cd:Xd;return i(e)}function om(e){if(e==null)return 0;if(et(e))return Ti(e)?Zn(e):e.length;var i=Ge(e);return i==lt||i==ct?e.size:_o(e).length}function am(e,i,s){var h=re(e)?ro:Jd;return s&&je(e,i,s)&&(i=n),h(e,K(i,3))}var sm=se(function(e,i){if(e==null)return[];var s=i.length;return s>1&&je(e,i[0],i[1])?i=[]:s>2&&je(i[0],i[1],i[2])&&(i=[i[0]]),ou(e,Ye(i,1),[])}),Si=zh||function(){return He.Date.now()};function um(e,i){if(typeof i!="function")throw new St(l);return e=ie(e),function(){if(--e<1)return i.apply(this,arguments)}}function Zu(e,i,s){return i=s?n:i,i=e&&i==null?e.length:i,an(e,U,n,n,n,n,i)}function el(e,i){var s;if(typeof i!="function")throw new St(l);return e=ie(e),function(){return--e>0&&(s=i.apply(this,arguments)),e<=1&&(i=n),s}}var Go=se(function(e,i,s){var h=$;if(s.length){var m=bn(s,sr(Go));h|=F}return an(e,h,i,s,m)}),tl=se(function(e,i,s){var h=$|D;if(s.length){var m=bn(s,sr(tl));h|=F}return an(i,h,e,s,m)});function nl(e,i,s){i=s?n:i;var h=an(e,z,n,n,n,n,n,i);return h.placeholder=nl.placeholder,h}function rl(e,i,s){i=s?n:i;var h=an(e,W,n,n,n,n,n,i);return h.placeholder=rl.placeholder,h}function il(e,i,s){var h,m,v,x,k,C,R=0,L=!1,B=!1,q=!0;if(typeof e!="function")throw new St(l);i=At(i)||0,Pe(s)&&(L=!!s.leading,B="maxWait"in s,v=B?$e(At(s.maxWait)||0,i):v,q="trailing"in s?!!s.trailing:q);function G(Re){var Wt=h,fn=m;return h=m=n,R=Re,x=e.apply(fn,Wt),x}function J(Re){return R=Re,k=Ir(le,i),L?G(Re):x}function oe(Re){var Wt=Re-C,fn=Re-R,kl=i-Wt;return B?Ue(kl,v-fn):kl}function Z(Re){var Wt=Re-C,fn=Re-R;return C===n||Wt>=i||Wt<0||B&&fn>=v}function le(){var Re=Si();if(Z(Re))return he(Re);k=Ir(le,oe(Re))}function he(Re){return k=n,q&&h?G(Re):(h=m=n,x)}function mt(){k!==n&&pu(k),R=0,h=C=m=k=n}function Ke(){return k===n?x:he(Si())}function yt(){var Re=Si(),Wt=Z(Re);if(h=arguments,m=this,C=Re,Wt){if(k===n)return J(C);if(B)return pu(k),k=Ir(le,i),G(C)}return k===n&&(k=Ir(le,i)),x}return yt.cancel=mt,yt.flush=Ke,yt}var lm=se(function(e,i){return Vs(e,1,i)}),cm=se(function(e,i,s){return Vs(e,At(i)||0,s)});function fm(e){return an(e,ee)}function Ii(e,i){if(typeof e!="function"||i!=null&&typeof i!="function")throw new St(l);var s=function(){var h=arguments,m=i?i.apply(this,h):h[0],v=s.cache;if(v.has(m))return v.get(m);var x=e.apply(this,h);return s.cache=v.set(m,x)||v,x};return s.cache=new(Ii.Cache||rn),s}Ii.Cache=rn;function Ci(e){if(typeof e!="function")throw new St(l);return function(){var i=arguments;switch(i.length){case 0:return!e.call(this);case 1:return!e.call(this,i[0]);case 2:return!e.call(this,i[0],i[1]);case 3:return!e.call(this,i[0],i[1],i[2])}return!e.apply(this,i)}}function hm(e){return el(2,e)}var dm=Zd(function(e,i){i=i.length==1&&re(i[0])?Te(i[0],dt(K())):Te(Ye(i,1),dt(K()));var s=i.length;return se(function(h){for(var m=-1,v=Ue(h.length,s);++m<v;)h[m]=i[m].call(this,h[m]);return ht(e,this,h)})}),Vo=se(function(e,i){var s=bn(i,sr(Vo));return an(e,F,n,i,s)}),ol=se(function(e,i){var s=bn(i,sr(ol));return an(e,T,n,i,s)}),pm=sn(function(e,i){return an(e,Q,n,n,n,i)});function gm(e,i){if(typeof e!="function")throw new St(l);return i=i===n?i:ie(i),se(e,i)}function mm(e,i){if(typeof e!="function")throw new St(l);return i=i==null?0:$e(ie(i),0),se(function(s){var h=s[i],m=Sn(s,0,i);return h&&wn(m,h),ht(e,this,m)})}function ym(e,i,s){var h=!0,m=!0;if(typeof e!="function")throw new St(l);return Pe(s)&&(h="leading"in s?!!s.leading:h,m="trailing"in s?!!s.trailing:m),il(e,i,{leading:h,maxWait:i,trailing:m})}function wm(e){return Zu(e,1)}function bm(e,i){return Vo(Oo(i),e)}function vm(){if(!arguments.length)return[];var e=arguments[0];return re(e)?e:[e]}function xm(e){return Ct(e,y)}function _m(e,i){return i=typeof i=="function"?i:n,Ct(e,y,i)}function km(e){return Ct(e,g|y)}function Sm(e,i){return i=typeof i=="function"?i:n,Ct(e,g|y,i)}function Im(e,i){return i==null||Gs(e,i,ze(i))}function Nt(e,i){return e===i||e!==e&&i!==i}var Cm=wi(bo),Em=wi(function(e,i){return e>=i}),qn=Js((function(){return arguments})())?Js:function(e){return De(e)&&ve.call(e,"callee")&&!$s.call(e,"callee")},re=A.isArray,Tm=bs?dt(bs):Ld;function et(e){return e!=null&&Ei(e.length)&&!ln(e)}function Fe(e){return De(e)&&et(e)}function Am(e){return e===!0||e===!1||De(e)&&Qe(e)==Je}var In=Hh||ia,Pm=vs?dt(vs):Bd;function Om(e){return De(e)&&e.nodeType===1&&!Cr(e)}function Mm(e){if(e==null)return!0;if(et(e)&&(re(e)||typeof e=="string"||typeof e.splice=="function"||In(e)||ur(e)||qn(e)))return!e.length;var i=Ge(e);if(i==lt||i==ct)return!e.size;if(Sr(e))return!_o(e).length;for(var s in e)if(ve.call(e,s))return!1;return!0}function Dm(e,i){return xr(e,i)}function Fm(e,i,s){s=typeof s=="function"?s:n;var h=s?s(e,i):n;return h===n?xr(e,i,n,s):!!h}function Qo(e){if(!De(e))return!1;var i=Qe(e);return i==Zt||i==pn||typeof e.message=="string"&&typeof e.name=="string"&&!Cr(e)}function Rm(e){return typeof e=="number"&&Ws(e)}function ln(e){if(!Pe(e))return!1;var i=Qe(e);return i==Qn||i==$r||i==On||i==zr}function al(e){return typeof e=="number"&&e==ie(e)}function Ei(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Le}function Pe(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}function De(e){return e!=null&&typeof e=="object"}var sl=xs?dt(xs):Nd;function Lm(e,i){return e===i||xo(e,i,$o(i))}function Bm(e,i,s){return s=typeof s=="function"?s:n,xo(e,i,$o(i),s)}function $m(e){return ul(e)&&e!=+e}function Nm(e){if(_p(e))throw new ne(u);return Zs(e)}function Wm(e){return e===null}function zm(e){return e==null}function ul(e){return typeof e=="number"||De(e)&&Qe(e)==gn}function Cr(e){if(!De(e)||Qe(e)!=xt)return!1;var i=ei(e);if(i===null)return!0;var s=ve.call(i,"constructor")&&i.constructor;return typeof s=="function"&&s instanceof s&&Kr.call(s)==Bh}var jo=_s?dt(_s):Wd;function qm(e){return al(e)&&e>=-Le&&e<=Le}var ll=ks?dt(ks):zd;function Ti(e){return typeof e=="string"||!re(e)&&De(e)&&Qe(e)==Mn}function gt(e){return typeof e=="symbol"||De(e)&&Qe(e)==jn}var ur=Ss?dt(Ss):qd;function Hm(e){return e===n}function Ym(e){return De(e)&&Ge(e)==Dn}function Um(e){return De(e)&&Qe(e)==M}var Gm=wi(ko),Vm=wi(function(e,i){return e<=i});function cl(e){if(!e)return[];if(et(e))return Ti(e)?Bt(e):Ze(e);if(dr&&e[dr])return Ih(e[dr]());var i=Ge(e),s=i==lt?lo:i==ct?Vr:lr;return s(e)}function cn(e){if(!e)return e===0?e:0;if(e=At(e),e===Ce||e===-Ce){var i=e<0?-1:1;return i*Dt}return e===e?e:0}function ie(e){var i=cn(e),s=i%1;return i===i?s?i-s:i:0}function fl(e){return e?$n(ie(e),0,Oe):0}function At(e){if(typeof e=="number")return e;if(gt(e))return _;if(Pe(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=Pe(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=Ps(e);var s=Tf.test(e);return s||Pf.test(e)?uh(e.slice(2),s?2:8):Ef.test(e)?_:+e}function hl(e){return Ut(e,tt(e))}function Qm(e){return e?$n(ie(e),-Le,Le):e===0?e:0}function be(e){return e==null?"":pt(e)}var jm=or(function(e,i){if(Sr(i)||et(i)){Ut(i,ze(i),e);return}for(var s in i)ve.call(i,s)&&wr(e,s,i[s])}),dl=or(function(e,i){Ut(i,tt(i),e)}),Ai=or(function(e,i,s,h){Ut(i,tt(i),e,h)}),Km=or(function(e,i,s,h){Ut(i,ze(i),e,h)}),Xm=sn(mo);function Jm(e,i){var s=ir(e);return i==null?s:Us(s,i)}var Zm=se(function(e,i){e=_e(e);var s=-1,h=i.length,m=h>2?i[2]:n;for(m&&je(i[0],i[1],m)&&(h=1);++s<h;)for(var v=i[s],x=tt(v),k=-1,C=x.length;++k<C;){var R=x[k],L=e[R];(L===n||Nt(L,tr[R])&&!ve.call(e,R))&&(e[R]=v[R])}return e}),e1=se(function(e){return e.push(n,Pu),ht(pl,n,e)});function t1(e,i){return Cs(e,K(i,3),Yt)}function n1(e,i){return Cs(e,K(i,3),wo)}function r1(e,i){return e==null?e:yo(e,K(i,3),tt)}function i1(e,i){return e==null?e:Ks(e,K(i,3),tt)}function o1(e,i){return e&&Yt(e,K(i,3))}function a1(e,i){return e&&wo(e,K(i,3))}function s1(e){return e==null?[]:ci(e,ze(e))}function u1(e){return e==null?[]:ci(e,tt(e))}function Ko(e,i,s){var h=e==null?n:Nn(e,i);return h===n?s:h}function l1(e,i){return e!=null&&Du(e,i,Md)}function Xo(e,i){return e!=null&&Du(e,i,Dd)}var c1=Iu(function(e,i,s){i!=null&&typeof i.toString!="function"&&(i=Xr.call(i)),e[i]=s},Zo(nt)),f1=Iu(function(e,i,s){i!=null&&typeof i.toString!="function"&&(i=Xr.call(i)),ve.call(e,i)?e[i].push(s):e[i]=[s]},K),h1=se(vr);function ze(e){return et(e)?Hs(e):_o(e)}function tt(e){return et(e)?Hs(e,!0):Hd(e)}function d1(e,i){var s={};return i=K(i,3),Yt(e,function(h,m,v){on(s,i(h,m,v),h)}),s}function p1(e,i){var s={};return i=K(i,3),Yt(e,function(h,m,v){on(s,m,i(h,m,v))}),s}var g1=or(function(e,i,s){fi(e,i,s)}),pl=or(function(e,i,s,h){fi(e,i,s,h)}),m1=sn(function(e,i){var s={};if(e==null)return s;var h=!1;i=Te(i,function(v){return v=kn(v,e),h||(h=v.length>1),v}),Ut(e,Lo(e),s),h&&(s=Ct(s,g|b|y,cp));for(var m=i.length;m--;)To(s,i[m]);return s});function y1(e,i){return gl(e,Ci(K(i)))}var w1=sn(function(e,i){return e==null?{}:Ud(e,i)});function gl(e,i){if(e==null)return{};var s=Te(Lo(e),function(h){return[h]});return i=K(i),au(e,s,function(h,m){return i(h,m[0])})}function b1(e,i,s){i=kn(i,e);var h=-1,m=i.length;for(m||(m=1,e=n);++h<m;){var v=e==null?n:e[Gt(i[h])];v===n&&(h=m,v=s),e=ln(v)?v.call(e):v}return e}function v1(e,i,s){return e==null?e:_r(e,i,s)}function x1(e,i,s,h){return h=typeof h=="function"?h:n,e==null?e:_r(e,i,s,h)}var ml=Tu(ze),yl=Tu(tt);function _1(e,i,s){var h=re(e),m=h||In(e)||ur(e);if(i=K(i,4),s==null){var v=e&&e.constructor;m?s=h?new v:[]:Pe(e)?s=ln(v)?ir(ei(e)):{}:s={}}return(m?kt:Yt)(e,function(x,k,C){return i(s,x,k,C)}),s}function k1(e,i){return e==null?!0:To(e,i)}function S1(e,i,s){return e==null?e:fu(e,i,Oo(s))}function I1(e,i,s,h){return h=typeof h=="function"?h:n,e==null?e:fu(e,i,Oo(s),h)}function lr(e){return e==null?[]:uo(e,ze(e))}function C1(e){return e==null?[]:uo(e,tt(e))}function E1(e,i,s){return s===n&&(s=i,i=n),s!==n&&(s=At(s),s=s===s?s:0),i!==n&&(i=At(i),i=i===i?i:0),$n(At(e),i,s)}function T1(e,i,s){return i=cn(i),s===n?(s=i,i=0):s=cn(s),e=At(e),Fd(e,i,s)}function A1(e,i,s){if(s&&typeof s!="boolean"&&je(e,i,s)&&(i=s=n),s===n&&(typeof i=="boolean"?(s=i,i=n):typeof e=="boolean"&&(s=e,e=n)),e===n&&i===n?(e=0,i=1):(e=cn(e),i===n?(i=e,e=0):i=cn(i)),e>i){var h=e;e=i,i=h}if(s||e%1||i%1){var m=zs();return Ue(e+m*(i-e+sh("1e-"+((m+"").length-1))),i)}return Io(e,i)}var P1=ar(function(e,i,s){return i=i.toLowerCase(),e+(s?wl(i):i)});function wl(e){return Jo(be(e).toLowerCase())}function bl(e){return e=be(e),e&&e.replace(Mf,vh).replace(Xf,"")}function O1(e,i,s){e=be(e),i=pt(i);var h=e.length;s=s===n?h:$n(ie(s),0,h);var m=s;return s-=i.length,s>=0&&e.slice(s,m)==i}function M1(e){return e=be(e),e&&hf.test(e)?e.replace(Ka,xh):e}function D1(e){return e=be(e),e&&wf.test(e)?e.replace(Gi,"\\$&"):e}var F1=ar(function(e,i,s){return e+(s?"-":"")+i.toLowerCase()}),R1=ar(function(e,i,s){return e+(s?" ":"")+i.toLowerCase()}),L1=_u("toLowerCase");function B1(e,i,s){e=be(e),i=ie(i);var h=i?Zn(e):0;if(!i||h>=i)return e;var m=(i-h)/2;return yi(ii(m),s)+e+yi(ri(m),s)}function $1(e,i,s){e=be(e),i=ie(i);var h=i?Zn(e):0;return i&&h<i?e+yi(i-h,s):e}function N1(e,i,s){e=be(e),i=ie(i);var h=i?Zn(e):0;return i&&h<i?yi(i-h,s)+e:e}function W1(e,i,s){return s||i==null?i=0:i&&(i=+i),Vh(be(e).replace(Vi,""),i||0)}function z1(e,i,s){return(s?je(e,i,s):i===n)?i=1:i=ie(i),Co(be(e),i)}function q1(){var e=arguments,i=be(e[0]);return e.length<3?i:i.replace(e[1],e[2])}var H1=ar(function(e,i,s){return e+(s?"_":"")+i.toLowerCase()});function Y1(e,i,s){return s&&typeof s!="number"&&je(e,i,s)&&(i=s=n),s=s===n?Oe:s>>>0,s?(e=be(e),e&&(typeof i=="string"||i!=null&&!jo(i))&&(i=pt(i),!i&&Jn(e))?Sn(Bt(e),0,s):e.split(i,s)):[]}var U1=ar(function(e,i,s){return e+(s?" ":"")+Jo(i)});function G1(e,i,s){return e=be(e),s=s==null?0:$n(ie(s),0,e.length),i=pt(i),e.slice(s,s+i.length)==i}function V1(e,i,s){var h=w.templateSettings;s&&je(e,i,s)&&(i=n),e=be(e),i=Ai({},i,h,Au);var m=Ai({},i.imports,h.imports,Au),v=ze(m),x=uo(m,v),k,C,R=0,L=i.interpolate||qr,B="__p += '",q=co((i.escape||qr).source+"|"+L.source+"|"+(L===Xa?Cf:qr).source+"|"+(i.evaluate||qr).source+"|$","g"),G="//# sourceURL="+(ve.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++nh+"]")+`
`;e.replace(q,function(Z,le,he,mt,Ke,yt){return he||(he=mt),B+=e.slice(R,yt).replace(Df,_h),le&&(k=!0,B+=`' +
__e(`+le+`) +
'`),Ke&&(C=!0,B+=`';
`+Ke+`;
__p += '`),he&&(B+=`' +
((__t = (`+he+`)) == null ? '' : __t) +
'`),R=yt+Z.length,Z}),B+=`';
`;var J=ve.call(i,"variable")&&i.variable;if(!J)B=`with (obj) {
`+B+`
}
`;else if(Sf.test(J))throw new ne(c);B=(C?B.replace(Lt,""):B).replace(lf,"$1").replace(cf,"$1;"),B="function("+(J||"obj")+`) {
`+(J?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(k?", __e = _.escape":"")+(C?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+B+`return __p
}`;var oe=xl(function(){return me(v,G+"return "+B).apply(n,x)});if(oe.source=B,Qo(oe))throw oe;return oe}function Q1(e){return be(e).toLowerCase()}function j1(e){return be(e).toUpperCase()}function K1(e,i,s){if(e=be(e),e&&(s||i===n))return Ps(e);if(!e||!(i=pt(i)))return e;var h=Bt(e),m=Bt(i),v=Os(h,m),x=Ms(h,m)+1;return Sn(h,v,x).join("")}function X1(e,i,s){if(e=be(e),e&&(s||i===n))return e.slice(0,Fs(e)+1);if(!e||!(i=pt(i)))return e;var h=Bt(e),m=Ms(h,Bt(i))+1;return Sn(h,0,m).join("")}function J1(e,i,s){if(e=be(e),e&&(s||i===n))return e.replace(Vi,"");if(!e||!(i=pt(i)))return e;var h=Bt(e),m=Os(h,Bt(i));return Sn(h,m).join("")}function Z1(e,i){var s=de,h=j;if(Pe(i)){var m="separator"in i?i.separator:m;s="length"in i?ie(i.length):s,h="omission"in i?pt(i.omission):h}e=be(e);var v=e.length;if(Jn(e)){var x=Bt(e);v=x.length}if(s>=v)return e;var k=s-Zn(h);if(k<1)return h;var C=x?Sn(x,0,k).join(""):e.slice(0,k);if(m===n)return C+h;if(x&&(k+=C.length-k),jo(m)){if(e.slice(k).search(m)){var R,L=C;for(m.global||(m=co(m.source,be(Ja.exec(m))+"g")),m.lastIndex=0;R=m.exec(L);)var B=R.index;C=C.slice(0,B===n?k:B)}}else if(e.indexOf(pt(m),k)!=k){var q=C.lastIndexOf(m);q>-1&&(C=C.slice(0,q))}return C+h}function e0(e){return e=be(e),e&&ff.test(e)?e.replace(ja,Ah):e}var t0=ar(function(e,i,s){return e+(s?" ":"")+i.toUpperCase()}),Jo=_u("toUpperCase");function vl(e,i,s){return e=be(e),i=s?n:i,i===n?Sh(e)?Mh(e):gh(e):e.match(i)||[]}var xl=se(function(e,i){try{return ht(e,n,i)}catch(s){return Qo(s)?s:new ne(s)}}),n0=sn(function(e,i){return kt(i,function(s){s=Gt(s),on(e,s,Go(e[s],e))}),e});function r0(e){var i=e==null?0:e.length,s=K();return e=i?Te(e,function(h){if(typeof h[1]!="function")throw new St(l);return[s(h[0]),h[1]]}):[],se(function(h){for(var m=-1;++m<i;){var v=e[m];if(ht(v[0],this,h))return ht(v[1],this,h)}})}function i0(e){return Ad(Ct(e,g))}function Zo(e){return function(){return e}}function o0(e,i){return e==null||e!==e?i:e}var a0=Su(),s0=Su(!0);function nt(e){return e}function ea(e){return eu(typeof e=="function"?e:Ct(e,g))}function u0(e){return nu(Ct(e,g))}function l0(e,i){return ru(e,Ct(i,g))}var c0=se(function(e,i){return function(s){return vr(s,e,i)}}),f0=se(function(e,i){return function(s){return vr(e,s,i)}});function ta(e,i,s){var h=ze(i),m=ci(i,h);s==null&&!(Pe(i)&&(m.length||!h.length))&&(s=i,i=e,e=this,m=ci(i,ze(i)));var v=!(Pe(s)&&"chain"in s)||!!s.chain,x=ln(e);return kt(m,function(k){var C=i[k];e[k]=C,x&&(e.prototype[k]=function(){var R=this.__chain__;if(v||R){var L=e(this.__wrapped__),B=L.__actions__=Ze(this.__actions__);return B.push({func:C,args:arguments,thisArg:e}),L.__chain__=R,L}return C.apply(e,wn([this.value()],arguments))})}),e}function h0(){return He._===this&&(He._=$h),this}function na(){}function d0(e){return e=ie(e),se(function(i){return iu(i,e)})}var p0=Do(Te),g0=Do(Is),m0=Do(ro);function _l(e){return Wo(e)?io(Gt(e)):Gd(e)}function y0(e){return function(i){return e==null?n:Nn(e,i)}}var w0=Cu(),b0=Cu(!0);function ra(){return[]}function ia(){return!1}function v0(){return{}}function x0(){return""}function _0(){return!0}function k0(e,i){if(e=ie(e),e<1||e>Le)return[];var s=Oe,h=Ue(e,Oe);i=K(i),e-=Oe;for(var m=so(h,i);++s<e;)i(s);return m}function S0(e){return re(e)?Te(e,Gt):gt(e)?[e]:Ze(qu(be(e)))}function I0(e){var i=++Lh;return be(e)+i}var C0=mi(function(e,i){return e+i},0),E0=Fo("ceil"),T0=mi(function(e,i){return e/i},1),A0=Fo("floor");function P0(e){return e&&e.length?li(e,nt,bo):n}function O0(e,i){return e&&e.length?li(e,K(i,2),bo):n}function M0(e){return Ts(e,nt)}function D0(e,i){return Ts(e,K(i,2))}function F0(e){return e&&e.length?li(e,nt,ko):n}function R0(e,i){return e&&e.length?li(e,K(i,2),ko):n}var L0=mi(function(e,i){return e*i},1),B0=Fo("round"),$0=mi(function(e,i){return e-i},0);function N0(e){return e&&e.length?ao(e,nt):0}function W0(e,i){return e&&e.length?ao(e,K(i,2)):0}return w.after=um,w.ary=Zu,w.assign=jm,w.assignIn=dl,w.assignInWith=Ai,w.assignWith=Km,w.at=Xm,w.before=el,w.bind=Go,w.bindAll=n0,w.bindKey=tl,w.castArray=vm,w.chain=Ku,w.chunk=Ap,w.compact=Pp,w.concat=Op,w.cond=r0,w.conforms=i0,w.constant=Zo,w.countBy=Ng,w.create=Jm,w.curry=nl,w.curryRight=rl,w.debounce=il,w.defaults=Zm,w.defaultsDeep=e1,w.defer=lm,w.delay=cm,w.difference=Mp,w.differenceBy=Dp,w.differenceWith=Fp,w.drop=Rp,w.dropRight=Lp,w.dropRightWhile=Bp,w.dropWhile=$p,w.fill=Np,w.filter=zg,w.flatMap=Yg,w.flatMapDeep=Ug,w.flatMapDepth=Gg,w.flatten=Gu,w.flattenDeep=Wp,w.flattenDepth=zp,w.flip=fm,w.flow=a0,w.flowRight=s0,w.fromPairs=qp,w.functions=s1,w.functionsIn=u1,w.groupBy=Vg,w.initial=Yp,w.intersection=Up,w.intersectionBy=Gp,w.intersectionWith=Vp,w.invert=c1,w.invertBy=f1,w.invokeMap=jg,w.iteratee=ea,w.keyBy=Kg,w.keys=ze,w.keysIn=tt,w.map=ki,w.mapKeys=d1,w.mapValues=p1,w.matches=u0,w.matchesProperty=l0,w.memoize=Ii,w.merge=g1,w.mergeWith=pl,w.method=c0,w.methodOf=f0,w.mixin=ta,w.negate=Ci,w.nthArg=d0,w.omit=m1,w.omitBy=y1,w.once=hm,w.orderBy=Xg,w.over=p0,w.overArgs=dm,w.overEvery=g0,w.overSome=m0,w.partial=Vo,w.partialRight=ol,w.partition=Jg,w.pick=w1,w.pickBy=gl,w.property=_l,w.propertyOf=y0,w.pull=Xp,w.pullAll=Qu,w.pullAllBy=Jp,w.pullAllWith=Zp,w.pullAt=eg,w.range=w0,w.rangeRight=b0,w.rearg=pm,w.reject=tm,w.remove=tg,w.rest=gm,w.reverse=Yo,w.sampleSize=rm,w.set=v1,w.setWith=x1,w.shuffle=im,w.slice=ng,w.sortBy=sm,w.sortedUniq=lg,w.sortedUniqBy=cg,w.split=Y1,w.spread=mm,w.tail=fg,w.take=hg,w.takeRight=dg,w.takeRightWhile=pg,w.takeWhile=gg,w.tap=Pg,w.throttle=ym,w.thru=_i,w.toArray=cl,w.toPairs=ml,w.toPairsIn=yl,w.toPath=S0,w.toPlainObject=hl,w.transform=_1,w.unary=wm,w.union=mg,w.unionBy=yg,w.unionWith=wg,w.uniq=bg,w.uniqBy=vg,w.uniqWith=xg,w.unset=k1,w.unzip=Uo,w.unzipWith=ju,w.update=S1,w.updateWith=I1,w.values=lr,w.valuesIn=C1,w.without=_g,w.words=vl,w.wrap=bm,w.xor=kg,w.xorBy=Sg,w.xorWith=Ig,w.zip=Cg,w.zipObject=Eg,w.zipObjectDeep=Tg,w.zipWith=Ag,w.entries=ml,w.entriesIn=yl,w.extend=dl,w.extendWith=Ai,ta(w,w),w.add=C0,w.attempt=xl,w.camelCase=P1,w.capitalize=wl,w.ceil=E0,w.clamp=E1,w.clone=xm,w.cloneDeep=km,w.cloneDeepWith=Sm,w.cloneWith=_m,w.conformsTo=Im,w.deburr=bl,w.defaultTo=o0,w.divide=T0,w.endsWith=O1,w.eq=Nt,w.escape=M1,w.escapeRegExp=D1,w.every=Wg,w.find=qg,w.findIndex=Yu,w.findKey=t1,w.findLast=Hg,w.findLastIndex=Uu,w.findLastKey=n1,w.floor=A0,w.forEach=Xu,w.forEachRight=Ju,w.forIn=r1,w.forInRight=i1,w.forOwn=o1,w.forOwnRight=a1,w.get=Ko,w.gt=Cm,w.gte=Em,w.has=l1,w.hasIn=Xo,w.head=Vu,w.identity=nt,w.includes=Qg,w.indexOf=Hp,w.inRange=T1,w.invoke=h1,w.isArguments=qn,w.isArray=re,w.isArrayBuffer=Tm,w.isArrayLike=et,w.isArrayLikeObject=Fe,w.isBoolean=Am,w.isBuffer=In,w.isDate=Pm,w.isElement=Om,w.isEmpty=Mm,w.isEqual=Dm,w.isEqualWith=Fm,w.isError=Qo,w.isFinite=Rm,w.isFunction=ln,w.isInteger=al,w.isLength=Ei,w.isMap=sl,w.isMatch=Lm,w.isMatchWith=Bm,w.isNaN=$m,w.isNative=Nm,w.isNil=zm,w.isNull=Wm,w.isNumber=ul,w.isObject=Pe,w.isObjectLike=De,w.isPlainObject=Cr,w.isRegExp=jo,w.isSafeInteger=qm,w.isSet=ll,w.isString=Ti,w.isSymbol=gt,w.isTypedArray=ur,w.isUndefined=Hm,w.isWeakMap=Ym,w.isWeakSet=Um,w.join=Qp,w.kebabCase=F1,w.last=Tt,w.lastIndexOf=jp,w.lowerCase=R1,w.lowerFirst=L1,w.lt=Gm,w.lte=Vm,w.max=P0,w.maxBy=O0,w.mean=M0,w.meanBy=D0,w.min=F0,w.minBy=R0,w.stubArray=ra,w.stubFalse=ia,w.stubObject=v0,w.stubString=x0,w.stubTrue=_0,w.multiply=L0,w.nth=Kp,w.noConflict=h0,w.noop=na,w.now=Si,w.pad=B1,w.padEnd=$1,w.padStart=N1,w.parseInt=W1,w.random=A1,w.reduce=Zg,w.reduceRight=em,w.repeat=z1,w.replace=q1,w.result=b1,w.round=B0,w.runInContext=I,w.sample=nm,w.size=om,w.snakeCase=H1,w.some=am,w.sortedIndex=rg,w.sortedIndexBy=ig,w.sortedIndexOf=og,w.sortedLastIndex=ag,w.sortedLastIndexBy=sg,w.sortedLastIndexOf=ug,w.startCase=U1,w.startsWith=G1,w.subtract=$0,w.sum=N0,w.sumBy=W0,w.template=V1,w.times=k0,w.toFinite=cn,w.toInteger=ie,w.toLength=fl,w.toLower=Q1,w.toNumber=At,w.toSafeInteger=Qm,w.toString=be,w.toUpper=j1,w.trim=K1,w.trimEnd=X1,w.trimStart=J1,w.truncate=Z1,w.unescape=e0,w.uniqueId=I0,w.upperCase=t0,w.upperFirst=Jo,w.each=Xu,w.eachRight=Ju,w.first=Vu,ta(w,(function(){var e={};return Yt(w,function(i,s){ve.call(w.prototype,s)||(e[s]=i)}),e})(),{chain:!1}),w.VERSION=o,kt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){w[e].placeholder=w}),kt(["drop","take"],function(e,i){ce.prototype[e]=function(s){s=s===n?1:$e(ie(s),0);var h=this.__filtered__&&!i?new ce(this):this.clone();return h.__filtered__?h.__takeCount__=Ue(s,h.__takeCount__):h.__views__.push({size:Ue(s,Oe),type:e+(h.__dir__<0?"Right":"")}),h},ce.prototype[e+"Right"]=function(s){return this.reverse()[e](s).reverse()}}),kt(["filter","map","takeWhile"],function(e,i){var s=i+1,h=s==Ae||s==We;ce.prototype[e]=function(m){var v=this.clone();return v.__iteratees__.push({iteratee:K(m,3),type:s}),v.__filtered__=v.__filtered__||h,v}}),kt(["head","last"],function(e,i){var s="take"+(i?"Right":"");ce.prototype[e]=function(){return this[s](1).value()[0]}}),kt(["initial","tail"],function(e,i){var s="drop"+(i?"":"Right");ce.prototype[e]=function(){return this.__filtered__?new ce(this):this[s](1)}}),ce.prototype.compact=function(){return this.filter(nt)},ce.prototype.find=function(e){return this.filter(e).head()},ce.prototype.findLast=function(e){return this.reverse().find(e)},ce.prototype.invokeMap=se(function(e,i){return typeof e=="function"?new ce(this):this.map(function(s){return vr(s,e,i)})}),ce.prototype.reject=function(e){return this.filter(Ci(K(e)))},ce.prototype.slice=function(e,i){e=ie(e);var s=this;return s.__filtered__&&(e>0||i<0)?new ce(s):(e<0?s=s.takeRight(-e):e&&(s=s.drop(e)),i!==n&&(i=ie(i),s=i<0?s.dropRight(-i):s.take(i-e)),s)},ce.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},ce.prototype.toArray=function(){return this.take(Oe)},Yt(ce.prototype,function(e,i){var s=/^(?:filter|find|map|reject)|While$/.test(i),h=/^(?:head|last)$/.test(i),m=w[h?"take"+(i=="last"?"Right":""):i],v=h||/^find/.test(i);m&&(w.prototype[i]=function(){var x=this.__wrapped__,k=h?[1]:arguments,C=x instanceof ce,R=k[0],L=C||re(x),B=function(le){var he=m.apply(w,wn([le],k));return h&&q?he[0]:he};L&&s&&typeof R=="function"&&R.length!=1&&(C=L=!1);var q=this.__chain__,G=!!this.__actions__.length,J=v&&!q,oe=C&&!G;if(!v&&L){x=oe?x:new ce(this);var Z=e.apply(x,k);return Z.__actions__.push({func:_i,args:[B],thisArg:n}),new It(Z,q)}return J&&oe?e.apply(this,k):(Z=this.thru(B),J?h?Z.value()[0]:Z.value():Z)})}),kt(["pop","push","shift","sort","splice","unshift"],function(e){var i=Qr[e],s=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",h=/^(?:pop|shift)$/.test(e);w.prototype[e]=function(){var m=arguments;if(h&&!this.__chain__){var v=this.value();return i.apply(re(v)?v:[],m)}return this[s](function(x){return i.apply(re(x)?x:[],m)})}}),Yt(ce.prototype,function(e,i){var s=w[i];if(s){var h=s.name+"";ve.call(rr,h)||(rr[h]=[]),rr[h].push({name:i,func:s})}}),rr[gi(n,D).name]=[{name:"wrapper",func:n}],ce.prototype.clone=ed,ce.prototype.reverse=td,ce.prototype.value=nd,w.prototype.at=Og,w.prototype.chain=Mg,w.prototype.commit=Dg,w.prototype.next=Fg,w.prototype.plant=Lg,w.prototype.reverse=Bg,w.prototype.toJSON=w.prototype.valueOf=w.prototype.value=$g,w.prototype.first=w.prototype.head,dr&&(w.prototype[dr]=Rg),w}),er=Dh();Fn?((Fn.exports=er)._=er,Zi._=er):He._=er}).call(G0)})(Or,Or.exports)),Or.exports}var Q0=V0();const aa={projectDir:"powerJournal",outputDir:"reports",coreDir:"core",devLogging:!0,devMode:!1,reportFileExtension:".pjf.md"};async function j0(t){if(!t||typeof t!="object"||Array.isArray(t))return aa;try{return Q0.merge({},aa,t)}catch(r){return console.warn("[PowerJournal] Failed to merge user config, using defaults.",r),aa}}const bc=6048e5,K0=864e5,El=Symbol.for("constructDateFrom");function dn(t,r){return typeof t=="function"?t(r):t&&typeof t=="object"&&El in t?t[El](r):t instanceof Date?new t.constructor(r):new Date(r)}function Mt(t,r){return dn(r||t,t)}function X0(t,r,n){const o=Mt(t,n?.in);return isNaN(r)?dn(t,NaN):(r&&o.setDate(o.getDate()+r),o)}let J0={};function qi(){return J0}function Fr(t,r){const n=qi(),o=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=Mt(t,r?.in),u=a.getDay(),l=(u<o?7:0)+u-o;return a.setDate(a.getDate()-l),a.setHours(0,0,0,0),a}function Bi(t,r){return Fr(t,{...r,weekStartsOn:1})}function vc(t,r){const n=Mt(t,r?.in),o=n.getFullYear(),a=dn(n,0);a.setFullYear(o+1,0,4),a.setHours(0,0,0,0);const u=Bi(a),l=dn(n,0);l.setFullYear(o,0,4),l.setHours(0,0,0,0);const c=Bi(l);return n.getTime()>=u.getTime()?o+1:n.getTime()>=c.getTime()?o:o-1}function Tl(t){const r=Mt(t),n=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return n.setUTCFullYear(r.getFullYear()),+t-+n}function xc(t,...r){const n=dn.bind(null,r.find(o=>typeof o=="object"));return r.map(n)}function Al(t,r){const n=Mt(t,r?.in);return n.setHours(0,0,0,0),n}function _c(t,r,n){const[o,a]=xc(n?.in,t,r),u=Al(o),l=Al(a),c=+u-Tl(u),f=+l-Tl(l);return Math.round((c-f)/K0)}function Z0(t,r){const n=vc(t,r),o=dn(t,0);return o.setFullYear(n,0,4),o.setHours(0,0,0,0),Bi(o)}function ey(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function ty(t){return!(!ey(t)&&typeof t!="number"||isNaN(+Mt(t)))}function ny(t,r,n){const[o,a]=xc(n?.in,t,r),u=Pl(o,a),l=Math.abs(_c(o,a));o.setDate(o.getDate()-u*l);const c=+(Pl(o,a)===-u),f=u*(l-c);return f===0?0:f}function Pl(t,r){const n=t.getFullYear()-r.getFullYear()||t.getMonth()-r.getMonth()||t.getDate()-r.getDate()||t.getHours()-r.getHours()||t.getMinutes()-r.getMinutes()||t.getSeconds()-r.getSeconds()||t.getMilliseconds()-r.getMilliseconds();return n<0?-1:n>0?1:n}function ry(t,r){const n=Mt(t,r?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const iy={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},oy=(t,r,n)=>{let o;const a=iy[t];return typeof a=="string"?o=a:r===1?o=a.one:o=a.other.replace("{{count}}",r.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+o:o+" ago":o};function sa(t){return(r={})=>{const n=r.width?String(r.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const ay={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},sy={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},uy={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ly={date:sa({formats:ay,defaultWidth:"full"}),time:sa({formats:sy,defaultWidth:"full"}),dateTime:sa({formats:uy,defaultWidth:"full"})},cy={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},fy=(t,r,n,o)=>cy[t];function Er(t){return(r,n)=>{const o=n?.context?String(n.context):"standalone";let a;if(o==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,c=n?.width?String(n.width):l;a=t.formattingValues[c]||t.formattingValues[l]}else{const l=t.defaultWidth,c=n?.width?String(n.width):t.defaultWidth;a=t.values[c]||t.values[l]}const u=t.argumentCallback?t.argumentCallback(r):r;return a[u]}}const hy={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},dy={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},py={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},gy={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},my={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},yy={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},wy=(t,r)=>{const n=Number(t),o=n%100;if(o>20||o<10)switch(o%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},by={ordinalNumber:wy,era:Er({values:hy,defaultWidth:"wide"}),quarter:Er({values:dy,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Er({values:py,defaultWidth:"wide"}),day:Er({values:gy,defaultWidth:"wide"}),dayPeriod:Er({values:my,defaultWidth:"wide",formattingValues:yy,defaultFormattingWidth:"wide"})};function Tr(t){return(r,n={})=>{const o=n.width,a=o&&t.matchPatterns[o]||t.matchPatterns[t.defaultMatchWidth],u=r.match(a);if(!u)return null;const l=u[0],c=o&&t.parsePatterns[o]||t.parsePatterns[t.defaultParseWidth],f=Array.isArray(c)?xy(c,g=>g.test(l)):vy(c,g=>g.test(l));let d;d=t.valueCallback?t.valueCallback(f):f,d=n.valueCallback?n.valueCallback(d):d;const p=r.slice(l.length);return{value:d,rest:p}}}function vy(t,r){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r(t[n]))return n}function xy(t,r){for(let n=0;n<t.length;n++)if(r(t[n]))return n}function _y(t){return(r,n={})=>{const o=r.match(t.matchPattern);if(!o)return null;const a=o[0],u=r.match(t.parsePattern);if(!u)return null;let l=t.valueCallback?t.valueCallback(u[0]):u[0];l=n.valueCallback?n.valueCallback(l):l;const c=r.slice(a.length);return{value:l,rest:c}}}const ky=/^(\d+)(th|st|nd|rd)?/i,Sy=/\d+/i,Iy={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Cy={any:[/^b/i,/^(a|c)/i]},Ey={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ty={any:[/1/i,/2/i,/3/i,/4/i]},Ay={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Py={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Oy={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},My={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Dy={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Fy={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ry={ordinalNumber:_y({matchPattern:ky,parsePattern:Sy,valueCallback:t=>parseInt(t,10)}),era:Tr({matchPatterns:Iy,defaultMatchWidth:"wide",parsePatterns:Cy,defaultParseWidth:"any"}),quarter:Tr({matchPatterns:Ey,defaultMatchWidth:"wide",parsePatterns:Ty,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Tr({matchPatterns:Ay,defaultMatchWidth:"wide",parsePatterns:Py,defaultParseWidth:"any"}),day:Tr({matchPatterns:Oy,defaultMatchWidth:"wide",parsePatterns:My,defaultParseWidth:"any"}),dayPeriod:Tr({matchPatterns:Dy,defaultMatchWidth:"any",parsePatterns:Fy,defaultParseWidth:"any"})},Ly={code:"en-US",formatDistance:oy,formatLong:ly,formatRelative:fy,localize:by,match:Ry,options:{weekStartsOn:0,firstWeekContainsDate:1}};function By(t,r){const n=Mt(t,r?.in);return _c(n,ry(n))+1}function $y(t,r){const n=Mt(t,r?.in),o=+Bi(n)-+Z0(n);return Math.round(o/bc)+1}function kc(t,r){const n=Mt(t,r?.in),o=n.getFullYear(),a=qi(),u=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,l=dn(r?.in||t,0);l.setFullYear(o+1,0,u),l.setHours(0,0,0,0);const c=Fr(l,r),f=dn(r?.in||t,0);f.setFullYear(o,0,u),f.setHours(0,0,0,0);const d=Fr(f,r);return+n>=+c?o+1:+n>=+d?o:o-1}function Ny(t,r){const n=qi(),o=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,a=kc(t,r),u=dn(r?.in||t,0);return u.setFullYear(a,0,o),u.setHours(0,0,0,0),Fr(u,r)}function Wy(t,r){const n=Mt(t,r?.in),o=+Fr(n,r)-+Ny(n,r);return Math.round(o/bc)+1}function xe(t,r){const n=t<0?"-":"",o=Math.abs(t).toString().padStart(r,"0");return n+o}const Cn={y(t,r){const n=t.getFullYear(),o=n>0?n:1-n;return xe(r==="yy"?o%100:o,r.length)},M(t,r){const n=t.getMonth();return r==="M"?String(n+1):xe(n+1,2)},d(t,r){return xe(t.getDate(),r.length)},a(t,r){const n=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,r){return xe(t.getHours()%12||12,r.length)},H(t,r){return xe(t.getHours(),r.length)},m(t,r){return xe(t.getMinutes(),r.length)},s(t,r){return xe(t.getSeconds(),r.length)},S(t,r){const n=r.length,o=t.getMilliseconds(),a=Math.trunc(o*Math.pow(10,n-3));return xe(a,r.length)}},cr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ol={G:function(t,r,n){const o=t.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(o,{width:"abbreviated"});case"GGGGG":return n.era(o,{width:"narrow"});case"GGGG":default:return n.era(o,{width:"wide"})}},y:function(t,r,n){if(r==="yo"){const o=t.getFullYear(),a=o>0?o:1-o;return n.ordinalNumber(a,{unit:"year"})}return Cn.y(t,r)},Y:function(t,r,n,o){const a=kc(t,o),u=a>0?a:1-a;if(r==="YY"){const l=u%100;return xe(l,2)}return r==="Yo"?n.ordinalNumber(u,{unit:"year"}):xe(u,r.length)},R:function(t,r){const n=vc(t);return xe(n,r.length)},u:function(t,r){const n=t.getFullYear();return xe(n,r.length)},Q:function(t,r,n){const o=Math.ceil((t.getMonth()+1)/3);switch(r){case"Q":return String(o);case"QQ":return xe(o,2);case"Qo":return n.ordinalNumber(o,{unit:"quarter"});case"QQQ":return n.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(o,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(o,{width:"wide",context:"formatting"})}},q:function(t,r,n){const o=Math.ceil((t.getMonth()+1)/3);switch(r){case"q":return String(o);case"qq":return xe(o,2);case"qo":return n.ordinalNumber(o,{unit:"quarter"});case"qqq":return n.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(o,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(o,{width:"wide",context:"standalone"})}},M:function(t,r,n){const o=t.getMonth();switch(r){case"M":case"MM":return Cn.M(t,r);case"Mo":return n.ordinalNumber(o+1,{unit:"month"});case"MMM":return n.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(o,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(o,{width:"wide",context:"formatting"})}},L:function(t,r,n){const o=t.getMonth();switch(r){case"L":return String(o+1);case"LL":return xe(o+1,2);case"Lo":return n.ordinalNumber(o+1,{unit:"month"});case"LLL":return n.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(o,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(o,{width:"wide",context:"standalone"})}},w:function(t,r,n,o){const a=Wy(t,o);return r==="wo"?n.ordinalNumber(a,{unit:"week"}):xe(a,r.length)},I:function(t,r,n){const o=$y(t);return r==="Io"?n.ordinalNumber(o,{unit:"week"}):xe(o,r.length)},d:function(t,r,n){return r==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Cn.d(t,r)},D:function(t,r,n){const o=By(t);return r==="Do"?n.ordinalNumber(o,{unit:"dayOfYear"}):xe(o,r.length)},E:function(t,r,n){const o=t.getDay();switch(r){case"E":case"EE":case"EEE":return n.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(o,{width:"short",context:"formatting"});case"EEEE":default:return n.day(o,{width:"wide",context:"formatting"})}},e:function(t,r,n,o){const a=t.getDay(),u=(a-o.weekStartsOn+8)%7||7;switch(r){case"e":return String(u);case"ee":return xe(u,2);case"eo":return n.ordinalNumber(u,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(t,r,n,o){const a=t.getDay(),u=(a-o.weekStartsOn+8)%7||7;switch(r){case"c":return String(u);case"cc":return xe(u,r.length);case"co":return n.ordinalNumber(u,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(t,r,n){const o=t.getDay(),a=o===0?7:o;switch(r){case"i":return String(a);case"ii":return xe(a,r.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(o,{width:"short",context:"formatting"});case"iiii":default:return n.day(o,{width:"wide",context:"formatting"})}},a:function(t,r,n){const a=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,r,n){const o=t.getHours();let a;switch(o===12?a=cr.noon:o===0?a=cr.midnight:a=o/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,r,n){const o=t.getHours();let a;switch(o>=17?a=cr.evening:o>=12?a=cr.afternoon:o>=4?a=cr.morning:a=cr.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,r,n){if(r==="ho"){let o=t.getHours()%12;return o===0&&(o=12),n.ordinalNumber(o,{unit:"hour"})}return Cn.h(t,r)},H:function(t,r,n){return r==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Cn.H(t,r)},K:function(t,r,n){const o=t.getHours()%12;return r==="Ko"?n.ordinalNumber(o,{unit:"hour"}):xe(o,r.length)},k:function(t,r,n){let o=t.getHours();return o===0&&(o=24),r==="ko"?n.ordinalNumber(o,{unit:"hour"}):xe(o,r.length)},m:function(t,r,n){return r==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Cn.m(t,r)},s:function(t,r,n){return r==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Cn.s(t,r)},S:function(t,r){return Cn.S(t,r)},X:function(t,r,n){const o=t.getTimezoneOffset();if(o===0)return"Z";switch(r){case"X":return Dl(o);case"XXXX":case"XX":return Un(o);case"XXXXX":case"XXX":default:return Un(o,":")}},x:function(t,r,n){const o=t.getTimezoneOffset();switch(r){case"x":return Dl(o);case"xxxx":case"xx":return Un(o);case"xxxxx":case"xxx":default:return Un(o,":")}},O:function(t,r,n){const o=t.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+Ml(o,":");case"OOOO":default:return"GMT"+Un(o,":")}},z:function(t,r,n){const o=t.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+Ml(o,":");case"zzzz":default:return"GMT"+Un(o,":")}},t:function(t,r,n){const o=Math.trunc(+t/1e3);return xe(o,r.length)},T:function(t,r,n){return xe(+t,r.length)}};function Ml(t,r=""){const n=t>0?"-":"+",o=Math.abs(t),a=Math.trunc(o/60),u=o%60;return u===0?n+String(a):n+String(a)+r+xe(u,2)}function Dl(t,r){return t%60===0?(t>0?"-":"+")+xe(Math.abs(t)/60,2):Un(t,r)}function Un(t,r=""){const n=t>0?"-":"+",o=Math.abs(t),a=xe(Math.trunc(o/60),2),u=xe(o%60,2);return n+a+r+u}const Fl=(t,r)=>{switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},Sc=(t,r)=>{switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},zy=(t,r)=>{const n=t.match(/(P+)(p+)?/)||[],o=n[1],a=n[2];if(!a)return Fl(t,r);let u;switch(o){case"P":u=r.dateTime({width:"short"});break;case"PP":u=r.dateTime({width:"medium"});break;case"PPP":u=r.dateTime({width:"long"});break;case"PPPP":default:u=r.dateTime({width:"full"});break}return u.replace("{{date}}",Fl(o,r)).replace("{{time}}",Sc(a,r))},qy={p:Sc,P:zy},Hy=/^D+$/,Yy=/^Y+$/,Uy=["D","DD","YY","YYYY"];function Gy(t){return Hy.test(t)}function Vy(t){return Yy.test(t)}function Qy(t,r,n){const o=jy(t,r,n);if(console.warn(o),Uy.includes(t))throw new RangeError(o)}function jy(t,r,n){const o=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${r}\`) for formatting ${o} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ky=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Xy=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Jy=/^'([^]*?)'?$/,Zy=/''/g,ew=/[a-zA-Z]/;function $i(t,r,n){const o=qi(),a=o.locale??Ly,u=o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,l=o.weekStartsOn??o.locale?.options?.weekStartsOn??0,c=Mt(t,n?.in);if(!ty(c))throw new RangeError("Invalid time value");let f=r.match(Xy).map(p=>{const g=p[0];if(g==="p"||g==="P"){const b=qy[g];return b(p,a.formatLong)}return p}).join("").match(Ky).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const g=p[0];if(g==="'")return{isToken:!1,value:tw(p)};if(Ol[g])return{isToken:!0,value:p};if(g.match(ew))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:p}});a.localize.preprocessor&&(f=a.localize.preprocessor(c,f));const d={firstWeekContainsDate:u,weekStartsOn:l,locale:a};return f.map(p=>{if(!p.isToken)return p.value;const g=p.value;(Vy(g)||Gy(g))&&Qy(g,r,String(t));const b=Ol[g[0]];return b(c,g,a.localize,d)}).join("")}function tw(t){const r=t.match(Jy);return r?r[1].replace(Zy,"'"):t}function nw(t,r,n){return X0(t,-r,n)}const Ic={almostDailyReport:{folder:"l1almostDailyReport",name:"Daily Report"},"10daysReport":{folder:"l2tenL1ReportsReview",name:"10 Days Review"},"30daysReport":{folder:"l3ThreeL2Review",name:"30 Days Review"},"150daysReport":{folder:"l4FiveL3Review",name:"150 Days Review"}},Vn={ALMOST_DAILY:"almostDailyReport",TEN_DAYS:"10daysReport",THIRTY_DAYS:"30daysReport",ONE_FIFTY_DAYS:"150daysReport"},wt=Xt(Jt.SavingService),Rr={get baseOutput(){return`${bt?.projectDir??"vault"}/${bt?.outputDir??"outputs"}`},get fileExtension(){return bt?.reportFileExtension??".md"},get reportFolders(){const t={};for(const[r,{folder:n}]of Object.entries(Ic))t[r]=`${this.baseOutput}/${n}`;return t},_today(){return $i(new Date,"yyyyMMdd")},_getFormattedDate(){return $i(new Date,"dd.MM.yyyy")},_getDaysRemainingInYear(){const t=new Date,n=new Date(t.getFullYear(),11,31).getTime()-t.getTime(),o=Math.ceil(n/(1e3*60*60*24));return String(o).padStart(3,"0")},async _ensureFolder(t){ke.vault.getAbstractFileByPath(t)||(wt.dev(`Creating folder: ${t}`),await ke.vault.createFolder(t))},async _listFiles(t){await this._ensureFolder(t);const r=ke.vault.getAbstractFileByPath(t);return!r||!r.children?[]:r.children.filter(n=>"extension"in n&&n.extension==="md").map(n=>n.name)},async _openFile(t){try{wt.dev(`_openFile start: ${t.path}`);const r=ke.workspace.getLeaf(!0);if(await r.openFile(t),wt.dev(`Main leaf opened file: ${t.path}`),bt?.devMode){const n=ke.workspace.createLeafBySplit(r,"vertical",!1);await n.openFile(t);const o={type:"markdown",state:{file:t.path,mode:"source"}};try{await n.setViewState(o),wt.dev("DevMode: right leaf forced to source mode")}catch(a){wt.warn(`Failed to force right leaf to source mode: ${a.message}`)}}}catch(r){wt.error(`Failed to open file ${t.path}: ${r.message}`)}},async write(t){const r=t.data??t.content;if(!r)throw new Error("No content provided for write()");const n=this.reportFolders[t.type];if(!n)throw new Error(`Unknown report type: ${t.type}`);await this._ensureFolder(n);const o=this._getDaysRemainingInYear(),a=this._getFormattedDate(),l=(await this._listFiles(n)).length+1,c=String(l).padStart(5,"0"),f=`${o}-${a}-${c}-${t.type}${this.fileExtension}`,d=`${n}/${f}`;if(ke.vault.getAbstractFileByPath(d))return wt.warn(`File already exists: ${d}. Skipping write.`),d;wt.info(`Writing new file: ${d}`);const g=await ke.vault.create(d,r);return t?.open!==!1&&await this._openFile(g),d},async writeGeneral(t,r,n=!1){let o;const a=ke.vault.getAbstractFileByPath(t);if(a)if("extension"in a)wt.info(`Overwriting existing file: ${t}`),await ke.vault.modify(a,r),o=a;else throw wt.error(`Path exists but is not a file: ${t}`),new Error(`Path exists but is not a file: ${t}`);else wt.info(`Creating new file: ${t}`),o=await ke.vault.create(t,r);return n&&await this._openFile(o),t},async delete(t){const r=ke.vault.getAbstractFileByPath(t);r?(wt.info(`Deleting file: ${t}`),await ke.vault.delete(r)):wt.warn(`Cannot delete; file not found: ${t}`)}};function Rl(t){if(t)throw t}var ua,Ll;function rw(){if(Ll)return ua;Ll=1;var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=function(d){return typeof Array.isArray=="function"?Array.isArray(d):r.call(d)==="[object Array]"},u=function(d){if(!d||r.call(d)!=="[object Object]")return!1;var p=t.call(d,"constructor"),g=d.constructor&&d.constructor.prototype&&t.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!p&&!g)return!1;var b;for(b in d);return typeof b>"u"||t.call(d,b)},l=function(d,p){n&&p.name==="__proto__"?n(d,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):d[p.name]=p.newValue},c=function(d,p){if(p==="__proto__")if(t.call(d,p)){if(o)return o(d,p).value}else return;return d[p]};return ua=function f(){var d,p,g,b,y,E,P=arguments[0],$=1,D=arguments.length,H=!1;for(typeof P=="boolean"&&(H=P,P=arguments[1]||{},$=2),(P==null||typeof P!="object"&&typeof P!="function")&&(P={});$<D;++$)if(d=arguments[$],d!=null)for(p in d)g=c(P,p),b=c(d,p),P!==b&&(H&&b&&(u(b)||(y=a(b)))?(y?(y=!1,E=g&&a(g)?g:[]):E=g&&u(g)?g:{},l(P,{name:p,newValue:f(H,E,b)})):typeof b<"u"&&l(P,{name:p,newValue:b}));return P},ua}var iw=rw();const la=wc(iw);function Ta(t){if(typeof t!="object"||t===null)return!1;const r=Object.getPrototypeOf(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function ow(){const t=[],r={run:n,use:o};return r;function n(...a){let u=-1;const l=a.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);c(null,...a);function c(f,...d){const p=t[++u];let g=-1;if(f){l(f);return}for(;++g<a.length;)(d[g]===null||d[g]===void 0)&&(d[g]=a[g]);a=d,p?aw(p,c)(...d):l(null,...d)}}function o(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return t.push(a),r}}function aw(t,r){let n;return o;function o(...l){const c=t.length>l.length;let f;c&&l.push(a);try{f=t.apply(this,l)}catch(d){const p=d;if(c&&n)throw p;return a(p)}c||(f&&f.then&&typeof f.then=="function"?f.then(u,a):f instanceof Error?a(f):u(f))}function a(l,...c){n||(n=!0,r(l,...c))}function u(l){a(null,l)}}function Mr(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Bl(t.position):"start"in t||"end"in t?Bl(t):"line"in t||"column"in t?Aa(t):""}function Aa(t){return $l(t&&t.line)+":"+$l(t&&t.column)}function Bl(t){return Aa(t&&t.start)+"-"+Aa(t&&t.end)}function $l(t){return t&&typeof t=="number"?t:1}class at extends Error{constructor(r,n,o){super(),typeof n=="string"&&(o=n,n=void 0);let a="",u={},l=!1;if(n&&("line"in n&&"column"in n?u={place:n}:"start"in n&&"end"in n?u={place:n}:"type"in n?u={ancestors:[n],place:n.position}:u={...n}),typeof r=="string"?a=r:!u.cause&&r&&(l=!0,a=r.message,u.cause=r),!u.ruleId&&!u.source&&typeof o=="string"){const f=o.indexOf(":");f===-1?u.ruleId=o:(u.source=o.slice(0,f),u.ruleId=o.slice(f+1))}if(!u.place&&u.ancestors&&u.ancestors){const f=u.ancestors[u.ancestors.length-1];f&&(u.place=f.position)}const c=u.place&&"start"in u.place?u.place.start:u.place;this.ancestors=u.ancestors||void 0,this.cause=u.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=c?c.line:void 0,this.name=Mr(u.place)||"1:1",this.place=u.place||void 0,this.reason=this.message,this.ruleId=u.ruleId||void 0,this.source=u.source||void 0,this.stack=l&&u.cause&&typeof u.cause.stack=="string"?u.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}at.prototype.file="";at.prototype.name="";at.prototype.reason="";at.prototype.message="";at.prototype.stack="";at.prototype.column=void 0;at.prototype.line=void 0;at.prototype.ancestors=void 0;at.prototype.cause=void 0;at.prototype.fatal=void 0;at.prototype.place=void 0;at.prototype.ruleId=void 0;at.prototype.source=void 0;const Qt={basename:sw,dirname:uw,extname:lw,join:cw,sep:"/"};function sw(t,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');Br(t);let n=0,o=-1,a=t.length,u;if(r===void 0||r.length===0||r.length>t.length){for(;a--;)if(t.codePointAt(a)===47){if(u){n=a+1;break}}else o<0&&(u=!0,o=a+1);return o<0?"":t.slice(n,o)}if(r===t)return"";let l=-1,c=r.length-1;for(;a--;)if(t.codePointAt(a)===47){if(u){n=a+1;break}}else l<0&&(u=!0,l=a+1),c>-1&&(t.codePointAt(a)===r.codePointAt(c--)?c<0&&(o=a):(c=-1,o=l));return n===o?o=l:o<0&&(o=t.length),t.slice(n,o)}function uw(t){if(Br(t),t.length===0)return".";let r=-1,n=t.length,o;for(;--n;)if(t.codePointAt(n)===47){if(o){r=n;break}}else o||(o=!0);return r<0?t.codePointAt(0)===47?"/":".":r===1&&t.codePointAt(0)===47?"//":t.slice(0,r)}function lw(t){Br(t);let r=t.length,n=-1,o=0,a=-1,u=0,l;for(;r--;){const c=t.codePointAt(r);if(c===47){if(l){o=r+1;break}continue}n<0&&(l=!0,n=r+1),c===46?a<0?a=r:u!==1&&(u=1):a>-1&&(u=-1)}return a<0||n<0||u===0||u===1&&a===n-1&&a===o+1?"":t.slice(a,n)}function cw(...t){let r=-1,n;for(;++r<t.length;)Br(t[r]),t[r]&&(n=n===void 0?t[r]:n+"/"+t[r]);return n===void 0?".":fw(n)}function fw(t){Br(t);const r=t.codePointAt(0)===47;let n=hw(t,!r);return n.length===0&&!r&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),r?"/"+n:n}function hw(t,r){let n="",o=0,a=-1,u=0,l=-1,c,f;for(;++l<=t.length;){if(l<t.length)c=t.codePointAt(l);else{if(c===47)break;c=47}if(c===47){if(!(a===l-1||u===1))if(a!==l-1&&u===2){if(n.length<2||o!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",o=0):(n=n.slice(0,f),o=n.length-1-n.lastIndexOf("/")),a=l,u=0;continue}}else if(n.length>0){n="",o=0,a=l,u=0;continue}}r&&(n=n.length>0?n+"/..":"..",o=2)}else n.length>0?n+="/"+t.slice(a+1,l):n=t.slice(a+1,l),o=l-a-1;a=l,u=0}else c===46&&u>-1?u++:u=-1}return n}function Br(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const dw={cwd:pw};function pw(){return"/"}function Pa(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function gw(t){if(typeof t=="string")t=new URL(t);else if(!Pa(t)){const r=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw r.code="ERR_INVALID_ARG_TYPE",r}if(t.protocol!=="file:"){const r=new TypeError("The URL must be of scheme file");throw r.code="ERR_INVALID_URL_SCHEME",r}return mw(t)}function mw(t){if(t.hostname!==""){const o=new TypeError('File URL host must be "localhost" or empty on darwin');throw o.code="ERR_INVALID_FILE_URL_HOST",o}const r=t.pathname;let n=-1;for(;++n<r.length;)if(r.codePointAt(n)===37&&r.codePointAt(n+1)===50){const o=r.codePointAt(n+2);if(o===70||o===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(r)}const ca=["history","path","basename","stem","extname","dirname"];class yw{constructor(r){let n;r?Pa(r)?n={path:r}:typeof r=="string"||ww(r)?n={value:r}:n=r:n={},this.cwd="cwd"in n?"":dw.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let o=-1;for(;++o<ca.length;){const u=ca[o];u in n&&n[u]!==void 0&&n[u]!==null&&(this[u]=u==="history"?[...n[u]]:n[u])}let a;for(a in n)ca.includes(a)||(this[a]=n[a])}get basename(){return typeof this.path=="string"?Qt.basename(this.path):void 0}set basename(r){ha(r,"basename"),fa(r,"basename"),this.path=Qt.join(this.dirname||"",r)}get dirname(){return typeof this.path=="string"?Qt.dirname(this.path):void 0}set dirname(r){Nl(this.basename,"dirname"),this.path=Qt.join(r||"",this.basename)}get extname(){return typeof this.path=="string"?Qt.extname(this.path):void 0}set extname(r){if(fa(r,"extname"),Nl(this.dirname,"extname"),r){if(r.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(r.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Qt.join(this.dirname,this.stem+(r||""))}get path(){return this.history[this.history.length-1]}set path(r){Pa(r)&&(r=gw(r)),ha(r,"path"),this.path!==r&&this.history.push(r)}get stem(){return typeof this.path=="string"?Qt.basename(this.path,this.extname):void 0}set stem(r){ha(r,"stem"),fa(r,"stem"),this.path=Qt.join(this.dirname||"",r+(this.extname||""))}fail(r,n,o){const a=this.message(r,n,o);throw a.fatal=!0,a}info(r,n,o){const a=this.message(r,n,o);return a.fatal=void 0,a}message(r,n,o){const a=new at(r,n,o);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(r){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(r||void 0).decode(this.value)}}function fa(t,r){if(t&&t.includes(Qt.sep))throw new Error("`"+r+"` cannot be a path: did not expect `"+Qt.sep+"`")}function ha(t,r){if(!t)throw new Error("`"+r+"` cannot be empty")}function Nl(t,r){if(!t)throw new Error("Setting `"+r+"` requires `path` to be set too")}function ww(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const bw=(function(t){const o=this.constructor.prototype,a=o[t],u=function(){return a.apply(u,arguments)};return Object.setPrototypeOf(u,o),u}),vw={}.hasOwnProperty;class za extends bw{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=ow()}copy(){const r=new za;let n=-1;for(;++n<this.attachers.length;){const o=this.attachers[n];r.use(...o)}return r.data(la(!0,{},this.namespace)),r}data(r,n){return typeof r=="string"?arguments.length===2?(ga("data",this.frozen),this.namespace[r]=n,this):vw.call(this.namespace,r)&&this.namespace[r]||void 0:r?(ga("data",this.frozen),this.namespace=r,this):this.namespace}freeze(){if(this.frozen)return this;const r=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...o]=this.attachers[this.freezeIndex];if(o[0]===!1)continue;o[0]===!0&&(o[0]=void 0);const a=n.call(r,...o);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(r){this.freeze();const n=Oi(r),o=this.parser||this.Parser;return da("parse",o),o(String(n),n)}process(r,n){const o=this;return this.freeze(),da("process",this.parser||this.Parser),pa("process",this.compiler||this.Compiler),n?a(void 0,n):new Promise(a);function a(u,l){const c=Oi(r),f=o.parse(c);o.run(f,c,function(p,g,b){if(p||!g||!b)return d(p);const y=g,E=o.stringify(y,b);_w(E)?b.value=E:b.result=E,d(p,b)});function d(p,g){p||!g?l(p):u?u(g):n(void 0,g)}}}processSync(r){let n=!1,o;return this.freeze(),da("processSync",this.parser||this.Parser),pa("processSync",this.compiler||this.Compiler),this.process(r,a),zl("processSync","process",n),o;function a(u,l){n=!0,Rl(u),o=l}}run(r,n,o){Wl(r),this.freeze();const a=this.transformers;return!o&&typeof n=="function"&&(o=n,n=void 0),o?u(void 0,o):new Promise(u);function u(l,c){const f=Oi(n);a.run(r,f,d);function d(p,g,b){const y=g||r;p?c(p):l?l(y):o(void 0,y,b)}}}runSync(r,n){let o=!1,a;return this.run(r,n,u),zl("runSync","run",o),a;function u(l,c){Rl(l),a=c,o=!0}}stringify(r,n){this.freeze();const o=Oi(n),a=this.compiler||this.Compiler;return pa("stringify",a),Wl(r),a(r,o)}use(r,...n){const o=this.attachers,a=this.namespace;if(ga("use",this.frozen),r!=null)if(typeof r=="function")f(r,n);else if(typeof r=="object")Array.isArray(r)?c(r):l(r);else throw new TypeError("Expected usable value, not `"+r+"`");return this;function u(d){if(typeof d=="function")f(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[p,...g]=d;f(p,g)}else l(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function l(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(d.plugins),d.settings&&(a.settings=la(!0,a.settings,d.settings))}function c(d){let p=-1;if(d!=null)if(Array.isArray(d))for(;++p<d.length;){const g=d[p];u(g)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function f(d,p){let g=-1,b=-1;for(;++g<o.length;)if(o[g][0]===d){b=g;break}if(b===-1)o.push([d,...p]);else if(p.length>0){let[y,...E]=p;const P=o[b][1];Ta(P)&&Ta(y)&&(y=la(!0,P,y)),o[b]=[d,y,...E]}}}}const Oa=new za().freeze();function da(t,r){if(typeof r!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function pa(t,r){if(typeof r!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function ga(t,r){if(r)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Wl(t){if(!Ta(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function zl(t,r,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+r+"` instead")}function Oi(t){return xw(t)?t:new yw(t)}function xw(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function _w(t){return typeof t=="string"||kw(t)}function kw(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Sw={};function qa(t,r){const n=Sw,o=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,a=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Cc(t,o,a)}function Cc(t,r,n){if(Iw(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(r&&"alt"in t&&t.alt)return t.alt;if("children"in t)return ql(t.children,r,n)}return Array.isArray(t)?ql(t,r,n):""}function ql(t,r,n){const o=[];let a=-1;for(;++a<t.length;)o[a]=Cc(t[a],r,n);return o.join("")}function Iw(t){return!!(t&&typeof t=="object")}const Hl=document.createElement("i");function Ha(t){const r="&"+t+";";Hl.innerHTML=r;const n=Hl.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===r?!1:n}function Kt(t,r,n,o){const a=t.length;let u=0,l;if(r<0?r=-r>a?0:a+r:r=r>a?a:r,n=n>0?n:0,o.length<1e4)l=Array.from(o),l.unshift(r,n),t.splice(...l);else for(n&&t.splice(r,n);u<o.length;)l=o.slice(u,u+1e4),l.unshift(r,0),t.splice(...l),u+=1e4,r+=1e4}function Ot(t,r){return t.length>0?(Kt(t,t.length,0,r),t):r}const Yl={}.hasOwnProperty;function Cw(t){const r={};let n=-1;for(;++n<t.length;)Ew(r,t[n]);return r}function Ew(t,r){let n;for(n in r){const a=(Yl.call(t,n)?t[n]:void 0)||(t[n]={}),u=r[n];let l;if(u)for(l in u){Yl.call(a,l)||(a[l]=[]);const c=u[l];Tw(a[l],Array.isArray(c)?c:c?[c]:[])}}}function Tw(t,r){let n=-1;const o=[];for(;++n<r.length;)(r[n].add==="after"?t:o).push(r[n]);Kt(t,0,0,o)}function Ec(t,r){const n=Number.parseInt(t,r);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"ï¿½":String.fromCodePoint(n)}function fr(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const jt=Pn(/[A-Za-z]/),qt=Pn(/[\dA-Za-z]/),Aw=Pn(/[#-'*+\--9=?A-Z^-~]/);function Ma(t){return t!==null&&(t<32||t===127)}const Da=Pn(/\d/),Pw=Pn(/[\dA-Fa-f]/),Ow=Pn(/[!-/:-@[-`{-~]/);function te(t){return t!==null&&t<-2}function ot(t){return t!==null&&(t<0||t===32)}function ye(t){return t===-2||t===-1||t===32}const Mw=Pn(new RegExp("\\p{P}|\\p{S}","u")),Dw=Pn(/\s/);function Pn(t){return r;function r(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Ie(t,r,n,o){const a=o?o-1:Number.POSITIVE_INFINITY;let u=0;return l;function l(f){return ye(f)?(t.enter(n),c(f)):r(f)}function c(f){return ye(f)&&u++<a?(t.consume(f),c):(t.exit(n),r(f))}}const Fw={tokenize:Rw};function Rw(t){const r=t.attempt(this.parser.constructs.contentInitial,o,a);let n;return r;function o(c){if(c===null){t.consume(c);return}return t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),Ie(t,r,"linePrefix")}function a(c){return t.enter("paragraph"),u(c)}function u(c){const f=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,l(c)}function l(c){if(c===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(c);return}return te(c)?(t.consume(c),t.exit("chunkText"),u):(t.consume(c),l)}}const Lw={tokenize:Bw},Ul={tokenize:$w};function Bw(t){const r=this,n=[];let o=0,a,u,l;return c;function c(z){if(o<n.length){const W=n[o];return r.containerState=W[1],t.attempt(W[0].continuation,f,d)(z)}return d(z)}function f(z){if(o++,r.containerState._closeFlow){r.containerState._closeFlow=void 0,a&&H();const W=r.events.length;let F=W,T;for(;F--;)if(r.events[F][0]==="exit"&&r.events[F][1].type==="chunkFlow"){T=r.events[F][1].end;break}D(o);let U=W;for(;U<r.events.length;)r.events[U][1].end={...T},U++;return Kt(r.events,F+1,0,r.events.slice(W)),r.events.length=U,d(z)}return c(z)}function d(z){if(o===n.length){if(!a)return b(z);if(a.currentConstruct&&a.currentConstruct.concrete)return E(z);r.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return r.containerState={},t.check(Ul,p,g)(z)}function p(z){return a&&H(),D(o),b(z)}function g(z){return r.parser.lazy[r.now().line]=o!==n.length,l=r.now().offset,E(z)}function b(z){return r.containerState={},t.attempt(Ul,y,E)(z)}function y(z){return o++,n.push([r.currentConstruct,r.containerState]),b(z)}function E(z){if(z===null){a&&H(),D(0),t.consume(z);return}return a=a||r.parser.flow(r.now()),t.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:u}),P(z)}function P(z){if(z===null){$(t.exit("chunkFlow"),!0),D(0),t.consume(z);return}return te(z)?(t.consume(z),$(t.exit("chunkFlow")),o=0,r.interrupt=void 0,c):(t.consume(z),P)}function $(z,W){const F=r.sliceStream(z);if(W&&F.push(null),z.previous=u,u&&(u.next=z),u=z,a.defineSkip(z.start),a.write(F),r.parser.lazy[z.start.line]){let T=a.events.length;for(;T--;)if(a.events[T][1].start.offset<l&&(!a.events[T][1].end||a.events[T][1].end.offset>l))return;const U=r.events.length;let Q=U,ee,de;for(;Q--;)if(r.events[Q][0]==="exit"&&r.events[Q][1].type==="chunkFlow"){if(ee){de=r.events[Q][1].end;break}ee=!0}for(D(o),T=U;T<r.events.length;)r.events[T][1].end={...de},T++;Kt(r.events,Q+1,0,r.events.slice(U)),r.events.length=T}}function D(z){let W=n.length;for(;W-- >z;){const F=n[W];r.containerState=F[1],F[0].exit.call(r,t)}n.length=z}function H(){a.write([null]),u=void 0,a=void 0,r.containerState._closeFlow=void 0}}function $w(t,r,n){return Ie(t,t.attempt(this.parser.constructs.document,r,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ni(t){if(t===null||ot(t)||Dw(t))return 1;if(Mw(t))return 2}function Ya(t,r,n){const o=[];let a=-1;for(;++a<t.length;){const u=t[a].resolveAll;u&&!o.includes(u)&&(r=u(r,n),o.push(u))}return r}const Fa={name:"attention",resolveAll:Nw,tokenize:Ww};function Nw(t,r){let n=-1,o,a,u,l,c,f,d,p;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(o=n;o--;)if(t[o][0]==="exit"&&t[o][1].type==="attentionSequence"&&t[o][1]._open&&r.sliceSerialize(t[o][1]).charCodeAt(0)===r.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[o][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[o][1].end.offset-t[o][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;f=t[o][1].end.offset-t[o][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const g={...t[o][1].end},b={...t[n][1].start};Gl(g,-f),Gl(b,f),l={type:f>1?"strongSequence":"emphasisSequence",start:g,end:{...t[o][1].end}},c={type:f>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:b},u={type:f>1?"strongText":"emphasisText",start:{...t[o][1].end},end:{...t[n][1].start}},a={type:f>1?"strong":"emphasis",start:{...l.start},end:{...c.end}},t[o][1].end={...l.start},t[n][1].start={...c.end},d=[],t[o][1].end.offset-t[o][1].start.offset&&(d=Ot(d,[["enter",t[o][1],r],["exit",t[o][1],r]])),d=Ot(d,[["enter",a,r],["enter",l,r],["exit",l,r],["enter",u,r]]),d=Ot(d,Ya(r.parser.constructs.insideSpan.null,t.slice(o+1,n),r)),d=Ot(d,[["exit",u,r],["enter",c,r],["exit",c,r],["exit",a,r]]),t[n][1].end.offset-t[n][1].start.offset?(p=2,d=Ot(d,[["enter",t[n][1],r],["exit",t[n][1],r]])):p=0,Kt(t,o-1,n-o+3,d),n=o+d.length-p-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function Ww(t,r){const n=this.parser.constructs.attentionMarkers.null,o=this.previous,a=Ni(o);let u;return l;function l(f){return u=f,t.enter("attentionSequence"),c(f)}function c(f){if(f===u)return t.consume(f),c;const d=t.exit("attentionSequence"),p=Ni(f),g=!p||p===2&&a||n.includes(f),b=!a||a===2&&p||n.includes(o);return d._open=!!(u===42?g:g&&(a||!b)),d._close=!!(u===42?b:b&&(p||!g)),r(f)}}function Gl(t,r){t.column+=r,t.offset+=r,t._bufferIndex+=r}const zw={name:"autolink",tokenize:qw};function qw(t,r,n){let o=0;return a;function a(y){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),u}function u(y){return jt(y)?(t.consume(y),l):y===64?n(y):d(y)}function l(y){return y===43||y===45||y===46||qt(y)?(o=1,c(y)):d(y)}function c(y){return y===58?(t.consume(y),o=0,f):(y===43||y===45||y===46||qt(y))&&o++<32?(t.consume(y),c):(o=0,d(y))}function f(y){return y===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),r):y===null||y===32||y===60||Ma(y)?n(y):(t.consume(y),f)}function d(y){return y===64?(t.consume(y),p):Aw(y)?(t.consume(y),d):n(y)}function p(y){return qt(y)?g(y):n(y)}function g(y){return y===46?(t.consume(y),o=0,p):y===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),r):b(y)}function b(y){if((y===45||qt(y))&&o++<63){const E=y===45?b:g;return t.consume(y),E}return n(y)}}const Hi={partial:!0,tokenize:Hw};function Hw(t,r,n){return o;function o(u){return ye(u)?Ie(t,a,"linePrefix")(u):a(u)}function a(u){return u===null||te(u)?r(u):n(u)}}const Tc={continuation:{tokenize:Uw},exit:Gw,name:"blockQuote",tokenize:Yw};function Yw(t,r,n){const o=this;return a;function a(l){if(l===62){const c=o.containerState;return c.open||(t.enter("blockQuote",{_container:!0}),c.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(l),t.exit("blockQuoteMarker"),u}return n(l)}function u(l){return ye(l)?(t.enter("blockQuotePrefixWhitespace"),t.consume(l),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),r):(t.exit("blockQuotePrefix"),r(l))}}function Uw(t,r,n){const o=this;return a;function a(l){return ye(l)?Ie(t,u,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):u(l)}function u(l){return t.attempt(Tc,r,n)(l)}}function Gw(t){t.exit("blockQuote")}const Ac={name:"characterEscape",tokenize:Vw};function Vw(t,r,n){return o;function o(u){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(u),t.exit("escapeMarker"),a}function a(u){return Ow(u)?(t.enter("characterEscapeValue"),t.consume(u),t.exit("characterEscapeValue"),t.exit("characterEscape"),r):n(u)}}const Pc={name:"characterReference",tokenize:Qw};function Qw(t,r,n){const o=this;let a=0,u,l;return c;function c(g){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(g),t.exit("characterReferenceMarker"),f}function f(g){return g===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(g),t.exit("characterReferenceMarkerNumeric"),d):(t.enter("characterReferenceValue"),u=31,l=qt,p(g))}function d(g){return g===88||g===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(g),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),u=6,l=Pw,p):(t.enter("characterReferenceValue"),u=7,l=Da,p(g))}function p(g){if(g===59&&a){const b=t.exit("characterReferenceValue");return l===qt&&!Ha(o.sliceSerialize(b))?n(g):(t.enter("characterReferenceMarker"),t.consume(g),t.exit("characterReferenceMarker"),t.exit("characterReference"),r)}return l(g)&&a++<u?(t.consume(g),p):n(g)}}const Vl={partial:!0,tokenize:Kw},Ql={concrete:!0,name:"codeFenced",tokenize:jw};function jw(t,r,n){const o=this,a={partial:!0,tokenize:F};let u=0,l=0,c;return f;function f(T){return d(T)}function d(T){const U=o.events[o.events.length-1];return u=U&&U[1].type==="linePrefix"?U[2].sliceSerialize(U[1],!0).length:0,c=T,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),p(T)}function p(T){return T===c?(l++,t.consume(T),p):l<3?n(T):(t.exit("codeFencedFenceSequence"),ye(T)?Ie(t,g,"whitespace")(T):g(T))}function g(T){return T===null||te(T)?(t.exit("codeFencedFence"),o.interrupt?r(T):t.check(Vl,P,W)(T)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),b(T))}function b(T){return T===null||te(T)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),g(T)):ye(T)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Ie(t,y,"whitespace")(T)):T===96&&T===c?n(T):(t.consume(T),b)}function y(T){return T===null||te(T)?g(T):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),E(T))}function E(T){return T===null||te(T)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),g(T)):T===96&&T===c?n(T):(t.consume(T),E)}function P(T){return t.attempt(a,W,$)(T)}function $(T){return t.enter("lineEnding"),t.consume(T),t.exit("lineEnding"),D}function D(T){return u>0&&ye(T)?Ie(t,H,"linePrefix",u+1)(T):H(T)}function H(T){return T===null||te(T)?t.check(Vl,P,W)(T):(t.enter("codeFlowValue"),z(T))}function z(T){return T===null||te(T)?(t.exit("codeFlowValue"),H(T)):(t.consume(T),z)}function W(T){return t.exit("codeFenced"),r(T)}function F(T,U,Q){let ee=0;return de;function de(fe){return T.enter("lineEnding"),T.consume(fe),T.exit("lineEnding"),j}function j(fe){return T.enter("codeFencedFence"),ye(fe)?Ie(T,V,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(fe):V(fe)}function V(fe){return fe===c?(T.enter("codeFencedFenceSequence"),we(fe)):Q(fe)}function we(fe){return fe===c?(ee++,T.consume(fe),we):ee>=l?(T.exit("codeFencedFenceSequence"),ye(fe)?Ie(T,Ae,"whitespace")(fe):Ae(fe)):Q(fe)}function Ae(fe){return fe===null||te(fe)?(T.exit("codeFencedFence"),U(fe)):Q(fe)}}}function Kw(t,r,n){const o=this;return a;function a(l){return l===null?n(l):(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),u)}function u(l){return o.parser.lazy[o.now().line]?n(l):r(l)}}const ma={name:"codeIndented",tokenize:Jw},Xw={partial:!0,tokenize:Zw};function Jw(t,r,n){const o=this;return a;function a(d){return t.enter("codeIndented"),Ie(t,u,"linePrefix",5)(d)}function u(d){const p=o.events[o.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?l(d):n(d)}function l(d){return d===null?f(d):te(d)?t.attempt(Xw,l,f)(d):(t.enter("codeFlowValue"),c(d))}function c(d){return d===null||te(d)?(t.exit("codeFlowValue"),l(d)):(t.consume(d),c)}function f(d){return t.exit("codeIndented"),r(d)}}function Zw(t,r,n){const o=this;return a;function a(l){return o.parser.lazy[o.now().line]?n(l):te(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a):Ie(t,u,"linePrefix",5)(l)}function u(l){const c=o.events[o.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?r(l):te(l)?a(l):n(l)}}const eb={name:"codeText",previous:nb,resolve:tb,tokenize:rb};function tb(t){let r=t.length-4,n=3,o,a;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[r][1].type==="lineEnding"||t[r][1].type==="space")){for(o=n;++o<r;)if(t[o][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[r][1].type="codeTextPadding",n+=2,r-=2;break}}for(o=n-1,r++;++o<=r;)a===void 0?o!==r&&t[o][1].type!=="lineEnding"&&(a=o):(o===r||t[o][1].type==="lineEnding")&&(t[a][1].type="codeTextData",o!==a+2&&(t[a][1].end=t[o-1][1].end,t.splice(a+2,o-a-2),r-=o-a-2,o=a+2),a=void 0);return t}function nb(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function rb(t,r,n){let o=0,a,u;return l;function l(g){return t.enter("codeText"),t.enter("codeTextSequence"),c(g)}function c(g){return g===96?(t.consume(g),o++,c):(t.exit("codeTextSequence"),f(g))}function f(g){return g===null?n(g):g===32?(t.enter("space"),t.consume(g),t.exit("space"),f):g===96?(u=t.enter("codeTextSequence"),a=0,p(g)):te(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),f):(t.enter("codeTextData"),d(g))}function d(g){return g===null||g===32||g===96||te(g)?(t.exit("codeTextData"),f(g)):(t.consume(g),d)}function p(g){return g===96?(t.consume(g),a++,p):a===o?(t.exit("codeTextSequence"),t.exit("codeText"),r(g)):(u.type="codeTextData",d(g))}}class ib{constructor(r){this.left=r?[...r]:[],this.right=[]}get(r){if(r<0||r>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+r+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return r<this.left.length?this.left[r]:this.right[this.right.length-r+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(r,n){const o=n??Number.POSITIVE_INFINITY;return o<this.left.length?this.left.slice(r,o):r>this.left.length?this.right.slice(this.right.length-o+this.left.length,this.right.length-r+this.left.length).reverse():this.left.slice(r).concat(this.right.slice(this.right.length-o+this.left.length).reverse())}splice(r,n,o){const a=n||0;this.setCursor(Math.trunc(r));const u=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return o&&Ar(this.left,o),u.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(r){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(r)}pushMany(r){this.setCursor(Number.POSITIVE_INFINITY),Ar(this.left,r)}unshift(r){this.setCursor(0),this.right.push(r)}unshiftMany(r){this.setCursor(0),Ar(this.right,r.reverse())}setCursor(r){if(!(r===this.left.length||r>this.left.length&&this.right.length===0||r<0&&this.left.length===0))if(r<this.left.length){const n=this.left.splice(r,Number.POSITIVE_INFINITY);Ar(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-r,Number.POSITIVE_INFINITY);Ar(this.left,n.reverse())}}}function Ar(t,r){let n=0;if(r.length<1e4)t.push(...r);else for(;n<r.length;)t.push(...r.slice(n,n+1e4)),n+=1e4}function Oc(t){const r={};let n=-1,o,a,u,l,c,f,d;const p=new ib(t);for(;++n<p.length;){for(;n in r;)n=r[n];if(o=p.get(n),n&&o[1].type==="chunkFlow"&&p.get(n-1)[1].type==="listItemPrefix"&&(f=o[1]._tokenizer.events,u=0,u<f.length&&f[u][1].type==="lineEndingBlank"&&(u+=2),u<f.length&&f[u][1].type==="content"))for(;++u<f.length&&f[u][1].type!=="content";)f[u][1].type==="chunkText"&&(f[u][1]._isInFirstContentOfListItem=!0,u++);if(o[0]==="enter")o[1].contentType&&(Object.assign(r,ob(p,n)),n=r[n],d=!0);else if(o[1]._container){for(u=n,a=void 0;u--;)if(l=p.get(u),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(a&&(p.get(a)[1].type="lineEndingBlank"),l[1].type="lineEnding",a=u);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;a&&(o[1].end={...p.get(a)[1].start},c=p.slice(a,n),c.unshift(o),p.splice(a,n-a+1,c))}}return Kt(t,0,Number.POSITIVE_INFINITY,p.slice(0)),!d}function ob(t,r){const n=t.get(r)[1],o=t.get(r)[2];let a=r-1;const u=[];let l=n._tokenizer;l||(l=o.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const c=l.events,f=[],d={};let p,g,b=-1,y=n,E=0,P=0;const $=[P];for(;y;){for(;t.get(++a)[1]!==y;);u.push(a),y._tokenizer||(p=o.sliceStream(y),y.next||p.push(null),g&&l.defineSkip(y.start),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(p),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),g=y,y=y.next}for(y=n;++b<c.length;)c[b][0]==="exit"&&c[b-1][0]==="enter"&&c[b][1].type===c[b-1][1].type&&c[b][1].start.line!==c[b][1].end.line&&(P=b+1,$.push(P),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(l.events=[],y?(y._tokenizer=void 0,y.previous=void 0):$.pop(),b=$.length;b--;){const D=c.slice($[b],$[b+1]),H=u.pop();f.push([H,H+D.length-1]),t.splice(H,2,D)}for(f.reverse(),b=-1;++b<f.length;)d[E+f[b][0]]=E+f[b][1],E+=f[b][1]-f[b][0]-1;return d}const ab={resolve:ub,tokenize:lb},sb={partial:!0,tokenize:cb};function ub(t){return Oc(t),t}function lb(t,r){let n;return o;function o(c){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),a(c)}function a(c){return c===null?u(c):te(c)?t.check(sb,l,u)(c):(t.consume(c),a)}function u(c){return t.exit("chunkContent"),t.exit("content"),r(c)}function l(c){return t.consume(c),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function cb(t,r,n){const o=this;return a;function a(l){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),Ie(t,u,"linePrefix")}function u(l){if(l===null||te(l))return n(l);const c=o.events[o.events.length-1];return!o.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?r(l):t.interrupt(o.parser.constructs.flow,n,r)(l)}}function Mc(t,r,n,o,a,u,l,c,f){const d=f||Number.POSITIVE_INFINITY;let p=0;return g;function g(D){return D===60?(t.enter(o),t.enter(a),t.enter(u),t.consume(D),t.exit(u),b):D===null||D===32||D===41||Ma(D)?n(D):(t.enter(o),t.enter(l),t.enter(c),t.enter("chunkString",{contentType:"string"}),P(D))}function b(D){return D===62?(t.enter(u),t.consume(D),t.exit(u),t.exit(a),t.exit(o),r):(t.enter(c),t.enter("chunkString",{contentType:"string"}),y(D))}function y(D){return D===62?(t.exit("chunkString"),t.exit(c),b(D)):D===null||D===60||te(D)?n(D):(t.consume(D),D===92?E:y)}function E(D){return D===60||D===62||D===92?(t.consume(D),y):y(D)}function P(D){return!p&&(D===null||D===41||ot(D))?(t.exit("chunkString"),t.exit(c),t.exit(l),t.exit(o),r(D)):p<d&&D===40?(t.consume(D),p++,P):D===41?(t.consume(D),p--,P):D===null||D===32||D===40||Ma(D)?n(D):(t.consume(D),D===92?$:P)}function $(D){return D===40||D===41||D===92?(t.consume(D),P):P(D)}}function Dc(t,r,n,o,a,u){const l=this;let c=0,f;return d;function d(y){return t.enter(o),t.enter(a),t.consume(y),t.exit(a),t.enter(u),p}function p(y){return c>999||y===null||y===91||y===93&&!f||y===94&&!c&&"_hiddenFootnoteSupport"in l.parser.constructs?n(y):y===93?(t.exit(u),t.enter(a),t.consume(y),t.exit(a),t.exit(o),r):te(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),p):(t.enter("chunkString",{contentType:"string"}),g(y))}function g(y){return y===null||y===91||y===93||te(y)||c++>999?(t.exit("chunkString"),p(y)):(t.consume(y),f||(f=!ye(y)),y===92?b:g)}function b(y){return y===91||y===92||y===93?(t.consume(y),c++,g):g(y)}}function Fc(t,r,n,o,a,u){let l;return c;function c(b){return b===34||b===39||b===40?(t.enter(o),t.enter(a),t.consume(b),t.exit(a),l=b===40?41:b,f):n(b)}function f(b){return b===l?(t.enter(a),t.consume(b),t.exit(a),t.exit(o),r):(t.enter(u),d(b))}function d(b){return b===l?(t.exit(u),f(l)):b===null?n(b):te(b)?(t.enter("lineEnding"),t.consume(b),t.exit("lineEnding"),Ie(t,d,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),p(b))}function p(b){return b===l||b===null||te(b)?(t.exit("chunkString"),d(b)):(t.consume(b),b===92?g:p)}function g(b){return b===l||b===92?(t.consume(b),p):p(b)}}function Dr(t,r){let n;return o;function o(a){return te(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),n=!0,o):ye(a)?Ie(t,o,n?"linePrefix":"lineSuffix")(a):r(a)}}const fb={name:"definition",tokenize:db},hb={partial:!0,tokenize:pb};function db(t,r,n){const o=this;let a;return u;function u(y){return t.enter("definition"),l(y)}function l(y){return Dc.call(o,t,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function c(y){return a=fr(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)),y===58?(t.enter("definitionMarker"),t.consume(y),t.exit("definitionMarker"),f):n(y)}function f(y){return ot(y)?Dr(t,d)(y):d(y)}function d(y){return Mc(t,p,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function p(y){return t.attempt(hb,g,g)(y)}function g(y){return ye(y)?Ie(t,b,"whitespace")(y):b(y)}function b(y){return y===null||te(y)?(t.exit("definition"),o.parser.defined.push(a),r(y)):n(y)}}function pb(t,r,n){return o;function o(c){return ot(c)?Dr(t,a)(c):n(c)}function a(c){return Fc(t,u,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function u(c){return ye(c)?Ie(t,l,"whitespace")(c):l(c)}function l(c){return c===null||te(c)?r(c):n(c)}}const gb={name:"hardBreakEscape",tokenize:mb};function mb(t,r,n){return o;function o(u){return t.enter("hardBreakEscape"),t.consume(u),a}function a(u){return te(u)?(t.exit("hardBreakEscape"),r(u)):n(u)}}const yb={name:"headingAtx",resolve:wb,tokenize:bb};function wb(t,r){let n=t.length-2,o=3,a,u;return t[o][1].type==="whitespace"&&(o+=2),n-2>o&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(o===n-1||n-4>o&&t[n-2][1].type==="whitespace")&&(n-=o+1===n?2:4),n>o&&(a={type:"atxHeadingText",start:t[o][1].start,end:t[n][1].end},u={type:"chunkText",start:t[o][1].start,end:t[n][1].end,contentType:"text"},Kt(t,o,n-o+1,[["enter",a,r],["enter",u,r],["exit",u,r],["exit",a,r]])),t}function bb(t,r,n){let o=0;return a;function a(p){return t.enter("atxHeading"),u(p)}function u(p){return t.enter("atxHeadingSequence"),l(p)}function l(p){return p===35&&o++<6?(t.consume(p),l):p===null||ot(p)?(t.exit("atxHeadingSequence"),c(p)):n(p)}function c(p){return p===35?(t.enter("atxHeadingSequence"),f(p)):p===null||te(p)?(t.exit("atxHeading"),r(p)):ye(p)?Ie(t,c,"whitespace")(p):(t.enter("atxHeadingText"),d(p))}function f(p){return p===35?(t.consume(p),f):(t.exit("atxHeadingSequence"),c(p))}function d(p){return p===null||p===35||ot(p)?(t.exit("atxHeadingText"),c(p)):(t.consume(p),d)}}const vb=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],jl=["pre","script","style","textarea"],xb={concrete:!0,name:"htmlFlow",resolveTo:Sb,tokenize:Ib},_b={partial:!0,tokenize:Eb},kb={partial:!0,tokenize:Cb};function Sb(t){let r=t.length;for(;r--&&!(t[r][0]==="enter"&&t[r][1].type==="htmlFlow"););return r>1&&t[r-2][1].type==="linePrefix"&&(t[r][1].start=t[r-2][1].start,t[r+1][1].start=t[r-2][1].start,t.splice(r-2,2)),t}function Ib(t,r,n){const o=this;let a,u,l,c,f;return d;function d(S){return p(S)}function p(S){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(S),g}function g(S){return S===33?(t.consume(S),b):S===47?(t.consume(S),u=!0,P):S===63?(t.consume(S),a=3,o.interrupt?r:_):jt(S)?(t.consume(S),l=String.fromCharCode(S),$):n(S)}function b(S){return S===45?(t.consume(S),a=2,y):S===91?(t.consume(S),a=5,c=0,E):jt(S)?(t.consume(S),a=4,o.interrupt?r:_):n(S)}function y(S){return S===45?(t.consume(S),o.interrupt?r:_):n(S)}function E(S){const ut="CDATA[";return S===ut.charCodeAt(c++)?(t.consume(S),c===ut.length?o.interrupt?r:V:E):n(S)}function P(S){return jt(S)?(t.consume(S),l=String.fromCharCode(S),$):n(S)}function $(S){if(S===null||S===47||S===62||ot(S)){const ut=S===47,Xe=l.toLowerCase();return!ut&&!u&&jl.includes(Xe)?(a=1,o.interrupt?r(S):V(S)):vb.includes(l.toLowerCase())?(a=6,ut?(t.consume(S),D):o.interrupt?r(S):V(S)):(a=7,o.interrupt&&!o.parser.lazy[o.now().line]?n(S):u?H(S):z(S))}return S===45||qt(S)?(t.consume(S),l+=String.fromCharCode(S),$):n(S)}function D(S){return S===62?(t.consume(S),o.interrupt?r:V):n(S)}function H(S){return ye(S)?(t.consume(S),H):de(S)}function z(S){return S===47?(t.consume(S),de):S===58||S===95||jt(S)?(t.consume(S),W):ye(S)?(t.consume(S),z):de(S)}function W(S){return S===45||S===46||S===58||S===95||qt(S)?(t.consume(S),W):F(S)}function F(S){return S===61?(t.consume(S),T):ye(S)?(t.consume(S),F):z(S)}function T(S){return S===null||S===60||S===61||S===62||S===96?n(S):S===34||S===39?(t.consume(S),f=S,U):ye(S)?(t.consume(S),T):Q(S)}function U(S){return S===f?(t.consume(S),f=null,ee):S===null||te(S)?n(S):(t.consume(S),U)}function Q(S){return S===null||S===34||S===39||S===47||S===60||S===61||S===62||S===96||ot(S)?F(S):(t.consume(S),Q)}function ee(S){return S===47||S===62||ye(S)?z(S):n(S)}function de(S){return S===62?(t.consume(S),j):n(S)}function j(S){return S===null||te(S)?V(S):ye(S)?(t.consume(S),j):n(S)}function V(S){return S===45&&a===2?(t.consume(S),We):S===60&&a===1?(t.consume(S),Ce):S===62&&a===4?(t.consume(S),Oe):S===63&&a===3?(t.consume(S),_):S===93&&a===5?(t.consume(S),Dt):te(S)&&(a===6||a===7)?(t.exit("htmlFlowData"),t.check(_b,Ft,we)(S)):S===null||te(S)?(t.exit("htmlFlowData"),we(S)):(t.consume(S),V)}function we(S){return t.check(kb,Ae,Ft)(S)}function Ae(S){return t.enter("lineEnding"),t.consume(S),t.exit("lineEnding"),fe}function fe(S){return S===null||te(S)?we(S):(t.enter("htmlFlowData"),V(S))}function We(S){return S===45?(t.consume(S),_):V(S)}function Ce(S){return S===47?(t.consume(S),l="",Le):V(S)}function Le(S){if(S===62){const ut=l.toLowerCase();return jl.includes(ut)?(t.consume(S),Oe):V(S)}return jt(S)&&l.length<8?(t.consume(S),l+=String.fromCharCode(S),Le):V(S)}function Dt(S){return S===93?(t.consume(S),_):V(S)}function _(S){return S===62?(t.consume(S),Oe):S===45&&a===2?(t.consume(S),_):V(S)}function Oe(S){return S===null||te(S)?(t.exit("htmlFlowData"),Ft(S)):(t.consume(S),Oe)}function Ft(S){return t.exit("htmlFlow"),r(S)}}function Cb(t,r,n){const o=this;return a;function a(l){return te(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),u):n(l)}function u(l){return o.parser.lazy[o.now().line]?n(l):r(l)}}function Eb(t,r,n){return o;function o(a){return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),t.attempt(Hi,r,n)}}const Tb={name:"htmlText",tokenize:Ab};function Ab(t,r,n){const o=this;let a,u,l;return c;function c(_){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(_),f}function f(_){return _===33?(t.consume(_),d):_===47?(t.consume(_),F):_===63?(t.consume(_),z):jt(_)?(t.consume(_),Q):n(_)}function d(_){return _===45?(t.consume(_),p):_===91?(t.consume(_),u=0,E):jt(_)?(t.consume(_),H):n(_)}function p(_){return _===45?(t.consume(_),y):n(_)}function g(_){return _===null?n(_):_===45?(t.consume(_),b):te(_)?(l=g,Ce(_)):(t.consume(_),g)}function b(_){return _===45?(t.consume(_),y):g(_)}function y(_){return _===62?We(_):_===45?b(_):g(_)}function E(_){const Oe="CDATA[";return _===Oe.charCodeAt(u++)?(t.consume(_),u===Oe.length?P:E):n(_)}function P(_){return _===null?n(_):_===93?(t.consume(_),$):te(_)?(l=P,Ce(_)):(t.consume(_),P)}function $(_){return _===93?(t.consume(_),D):P(_)}function D(_){return _===62?We(_):_===93?(t.consume(_),D):P(_)}function H(_){return _===null||_===62?We(_):te(_)?(l=H,Ce(_)):(t.consume(_),H)}function z(_){return _===null?n(_):_===63?(t.consume(_),W):te(_)?(l=z,Ce(_)):(t.consume(_),z)}function W(_){return _===62?We(_):z(_)}function F(_){return jt(_)?(t.consume(_),T):n(_)}function T(_){return _===45||qt(_)?(t.consume(_),T):U(_)}function U(_){return te(_)?(l=U,Ce(_)):ye(_)?(t.consume(_),U):We(_)}function Q(_){return _===45||qt(_)?(t.consume(_),Q):_===47||_===62||ot(_)?ee(_):n(_)}function ee(_){return _===47?(t.consume(_),We):_===58||_===95||jt(_)?(t.consume(_),de):te(_)?(l=ee,Ce(_)):ye(_)?(t.consume(_),ee):We(_)}function de(_){return _===45||_===46||_===58||_===95||qt(_)?(t.consume(_),de):j(_)}function j(_){return _===61?(t.consume(_),V):te(_)?(l=j,Ce(_)):ye(_)?(t.consume(_),j):ee(_)}function V(_){return _===null||_===60||_===61||_===62||_===96?n(_):_===34||_===39?(t.consume(_),a=_,we):te(_)?(l=V,Ce(_)):ye(_)?(t.consume(_),V):(t.consume(_),Ae)}function we(_){return _===a?(t.consume(_),a=void 0,fe):_===null?n(_):te(_)?(l=we,Ce(_)):(t.consume(_),we)}function Ae(_){return _===null||_===34||_===39||_===60||_===61||_===96?n(_):_===47||_===62||ot(_)?ee(_):(t.consume(_),Ae)}function fe(_){return _===47||_===62||ot(_)?ee(_):n(_)}function We(_){return _===62?(t.consume(_),t.exit("htmlTextData"),t.exit("htmlText"),r):n(_)}function Ce(_){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(_),t.exit("lineEnding"),Le}function Le(_){return ye(_)?Ie(t,Dt,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_):Dt(_)}function Dt(_){return t.enter("htmlTextData"),l(_)}}const Ua={name:"labelEnd",resolveAll:Db,resolveTo:Fb,tokenize:Rb},Pb={tokenize:Lb},Ob={tokenize:Bb},Mb={tokenize:$b};function Db(t){let r=-1;const n=[];for(;++r<t.length;){const o=t[r][1];if(n.push(t[r]),o.type==="labelImage"||o.type==="labelLink"||o.type==="labelEnd"){const a=o.type==="labelImage"?4:2;o.type="data",r+=a}}return t.length!==n.length&&Kt(t,0,t.length,n),t}function Fb(t,r){let n=t.length,o=0,a,u,l,c;for(;n--;)if(a=t[n][1],u){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;t[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(l){if(t[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(u=n,a.type!=="labelLink")){o=2;break}}else a.type==="labelEnd"&&(l=n);const f={type:t[u][1].type==="labelLink"?"link":"image",start:{...t[u][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[u][1].start},end:{...t[l][1].end}},p={type:"labelText",start:{...t[u+o+2][1].end},end:{...t[l-2][1].start}};return c=[["enter",f,r],["enter",d,r]],c=Ot(c,t.slice(u+1,u+o+3)),c=Ot(c,[["enter",p,r]]),c=Ot(c,Ya(r.parser.constructs.insideSpan.null,t.slice(u+o+4,l-3),r)),c=Ot(c,[["exit",p,r],t[l-2],t[l-1],["exit",d,r]]),c=Ot(c,t.slice(l+1)),c=Ot(c,[["exit",f,r]]),Kt(t,u,t.length,c),t}function Rb(t,r,n){const o=this;let a=o.events.length,u,l;for(;a--;)if((o.events[a][1].type==="labelImage"||o.events[a][1].type==="labelLink")&&!o.events[a][1]._balanced){u=o.events[a][1];break}return c;function c(b){return u?u._inactive?g(b):(l=o.parser.defined.includes(fr(o.sliceSerialize({start:u.end,end:o.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(b),t.exit("labelMarker"),t.exit("labelEnd"),f):n(b)}function f(b){return b===40?t.attempt(Pb,p,l?p:g)(b):b===91?t.attempt(Ob,p,l?d:g)(b):l?p(b):g(b)}function d(b){return t.attempt(Mb,p,g)(b)}function p(b){return r(b)}function g(b){return u._balanced=!0,n(b)}}function Lb(t,r,n){return o;function o(g){return t.enter("resource"),t.enter("resourceMarker"),t.consume(g),t.exit("resourceMarker"),a}function a(g){return ot(g)?Dr(t,u)(g):u(g)}function u(g){return g===41?p(g):Mc(t,l,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function l(g){return ot(g)?Dr(t,f)(g):p(g)}function c(g){return n(g)}function f(g){return g===34||g===39||g===40?Fc(t,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):p(g)}function d(g){return ot(g)?Dr(t,p)(g):p(g)}function p(g){return g===41?(t.enter("resourceMarker"),t.consume(g),t.exit("resourceMarker"),t.exit("resource"),r):n(g)}}function Bb(t,r,n){const o=this;return a;function a(c){return Dc.call(o,t,u,l,"reference","referenceMarker","referenceString")(c)}function u(c){return o.parser.defined.includes(fr(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)))?r(c):n(c)}function l(c){return n(c)}}function $b(t,r,n){return o;function o(u){return t.enter("reference"),t.enter("referenceMarker"),t.consume(u),t.exit("referenceMarker"),a}function a(u){return u===93?(t.enter("referenceMarker"),t.consume(u),t.exit("referenceMarker"),t.exit("reference"),r):n(u)}}const Nb={name:"labelStartImage",resolveAll:Ua.resolveAll,tokenize:Wb};function Wb(t,r,n){const o=this;return a;function a(c){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(c),t.exit("labelImageMarker"),u}function u(c){return c===91?(t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelImage"),l):n(c)}function l(c){return c===94&&"_hiddenFootnoteSupport"in o.parser.constructs?n(c):r(c)}}const zb={name:"labelStartLink",resolveAll:Ua.resolveAll,tokenize:qb};function qb(t,r,n){const o=this;return a;function a(l){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelLink"),u}function u(l){return l===94&&"_hiddenFootnoteSupport"in o.parser.constructs?n(l):r(l)}}const ya={name:"lineEnding",tokenize:Hb};function Hb(t,r){return n;function n(o){return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Ie(t,r,"linePrefix")}}const Fi={name:"thematicBreak",tokenize:Yb};function Yb(t,r,n){let o=0,a;return u;function u(d){return t.enter("thematicBreak"),l(d)}function l(d){return a=d,c(d)}function c(d){return d===a?(t.enter("thematicBreakSequence"),f(d)):o>=3&&(d===null||te(d))?(t.exit("thematicBreak"),r(d)):n(d)}function f(d){return d===a?(t.consume(d),o++,f):(t.exit("thematicBreakSequence"),ye(d)?Ie(t,c,"whitespace")(d):c(d))}}const rt={continuation:{tokenize:Qb},exit:Kb,name:"list",tokenize:Vb},Ub={partial:!0,tokenize:Xb},Gb={partial:!0,tokenize:jb};function Vb(t,r,n){const o=this,a=o.events[o.events.length-1];let u=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,l=0;return c;function c(y){const E=o.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(E==="listUnordered"?!o.containerState.marker||y===o.containerState.marker:Da(y)){if(o.containerState.type||(o.containerState.type=E,t.enter(E,{_container:!0})),E==="listUnordered")return t.enter("listItemPrefix"),y===42||y===45?t.check(Fi,n,d)(y):d(y);if(!o.interrupt||y===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),f(y)}return n(y)}function f(y){return Da(y)&&++l<10?(t.consume(y),f):(!o.interrupt||l<2)&&(o.containerState.marker?y===o.containerState.marker:y===41||y===46)?(t.exit("listItemValue"),d(y)):n(y)}function d(y){return t.enter("listItemMarker"),t.consume(y),t.exit("listItemMarker"),o.containerState.marker=o.containerState.marker||y,t.check(Hi,o.interrupt?n:p,t.attempt(Ub,b,g))}function p(y){return o.containerState.initialBlankLine=!0,u++,b(y)}function g(y){return ye(y)?(t.enter("listItemPrefixWhitespace"),t.consume(y),t.exit("listItemPrefixWhitespace"),b):n(y)}function b(y){return o.containerState.size=u+o.sliceSerialize(t.exit("listItemPrefix"),!0).length,r(y)}}function Qb(t,r,n){const o=this;return o.containerState._closeFlow=void 0,t.check(Hi,a,u);function a(c){return o.containerState.furtherBlankLines=o.containerState.furtherBlankLines||o.containerState.initialBlankLine,Ie(t,r,"listItemIndent",o.containerState.size+1)(c)}function u(c){return o.containerState.furtherBlankLines||!ye(c)?(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,l(c)):(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,t.attempt(Gb,r,l)(c))}function l(c){return o.containerState._closeFlow=!0,o.interrupt=void 0,Ie(t,t.attempt(rt,r,n),"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function jb(t,r,n){const o=this;return Ie(t,a,"listItemIndent",o.containerState.size+1);function a(u){const l=o.events[o.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===o.containerState.size?r(u):n(u)}}function Kb(t){t.exit(this.containerState.type)}function Xb(t,r,n){const o=this;return Ie(t,a,"listItemPrefixWhitespace",o.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(u){const l=o.events[o.events.length-1];return!ye(u)&&l&&l[1].type==="listItemPrefixWhitespace"?r(u):n(u)}}const Kl={name:"setextUnderline",resolveTo:Jb,tokenize:Zb};function Jb(t,r){let n=t.length,o,a,u;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){o=n;break}t[n][1].type==="paragraph"&&(a=n)}else t[n][1].type==="content"&&t.splice(n,1),!u&&t[n][1].type==="definition"&&(u=n);const l={type:"setextHeading",start:{...t[o][1].start},end:{...t[t.length-1][1].end}};return t[a][1].type="setextHeadingText",u?(t.splice(a,0,["enter",l,r]),t.splice(u+1,0,["exit",t[o][1],r]),t[o][1].end={...t[u][1].end}):t[o][1]=l,t.push(["exit",l,r]),t}function Zb(t,r,n){const o=this;let a;return u;function u(d){let p=o.events.length,g;for(;p--;)if(o.events[p][1].type!=="lineEnding"&&o.events[p][1].type!=="linePrefix"&&o.events[p][1].type!=="content"){g=o.events[p][1].type==="paragraph";break}return!o.parser.lazy[o.now().line]&&(o.interrupt||g)?(t.enter("setextHeadingLine"),a=d,l(d)):n(d)}function l(d){return t.enter("setextHeadingLineSequence"),c(d)}function c(d){return d===a?(t.consume(d),c):(t.exit("setextHeadingLineSequence"),ye(d)?Ie(t,f,"lineSuffix")(d):f(d))}function f(d){return d===null||te(d)?(t.exit("setextHeadingLine"),r(d)):n(d)}}const ev={tokenize:tv};function tv(t){const r=this,n=t.attempt(Hi,o,t.attempt(this.parser.constructs.flowInitial,a,Ie(t,t.attempt(this.parser.constructs.flow,a,t.attempt(ab,a)),"linePrefix")));return n;function o(u){if(u===null){t.consume(u);return}return t.enter("lineEndingBlank"),t.consume(u),t.exit("lineEndingBlank"),r.currentConstruct=void 0,n}function a(u){if(u===null){t.consume(u);return}return t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),r.currentConstruct=void 0,n}}const nv={resolveAll:Lc()},rv=Rc("string"),iv=Rc("text");function Rc(t){return{resolveAll:Lc(t==="text"?ov:void 0),tokenize:r};function r(n){const o=this,a=this.parser.constructs[t],u=n.attempt(a,l,c);return l;function l(p){return d(p)?u(p):c(p)}function c(p){if(p===null){n.consume(p);return}return n.enter("data"),n.consume(p),f}function f(p){return d(p)?(n.exit("data"),u(p)):(n.consume(p),f)}function d(p){if(p===null)return!0;const g=a[p];let b=-1;if(g)for(;++b<g.length;){const y=g[b];if(!y.previous||y.previous.call(o,o.previous))return!0}return!1}}}function Lc(t){return r;function r(n,o){let a=-1,u;for(;++a<=n.length;)u===void 0?n[a]&&n[a][1].type==="data"&&(u=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==u+2&&(n[u][1].end=n[a-1][1].end,n.splice(u+2,a-u-2),a=u+2),u=void 0);return t?t(n,o):n}}function ov(t,r){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const o=t[n-1][1],a=r.sliceStream(o);let u=a.length,l=-1,c=0,f;for(;u--;){const d=a[u];if(typeof d=="string"){for(l=d.length;d.charCodeAt(l-1)===32;)c++,l--;if(l)break;l=-1}else if(d===-2)f=!0,c++;else if(d!==-1){u++;break}}if(r._contentTypeTextTrailing&&n===t.length&&(c=0),c){const d={type:n===t.length||f||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:u?l:o.start._bufferIndex+l,_index:o.start._index+u,line:o.end.line,column:o.end.column-c,offset:o.end.offset-c},end:{...o.end}};o.end={...d.start},o.start.offset===o.end.offset?Object.assign(o,d):(t.splice(n,0,["enter",d,r],["exit",d,r]),n+=2)}n++}return t}const av={42:rt,43:rt,45:rt,48:rt,49:rt,50:rt,51:rt,52:rt,53:rt,54:rt,55:rt,56:rt,57:rt,62:Tc},sv={91:fb},uv={[-2]:ma,[-1]:ma,32:ma},lv={35:yb,42:Fi,45:[Kl,Fi],60:xb,61:Kl,95:Fi,96:Ql,126:Ql},cv={38:Pc,92:Ac},fv={[-5]:ya,[-4]:ya,[-3]:ya,33:Nb,38:Pc,42:Fa,60:[zw,Tb],91:zb,92:[gb,Ac],93:Ua,95:Fa,96:eb},hv={null:[Fa,nv]},dv={null:[42,95]},pv={null:[]},gv=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:dv,contentInitial:sv,disable:pv,document:av,flow:lv,flowInitial:uv,insideSpan:hv,string:cv,text:fv},Symbol.toStringTag,{value:"Module"}));function mv(t,r,n){let o={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const a={},u=[];let l=[],c=[];const f={attempt:U(F),check:U(T),consume:H,enter:z,exit:W,interrupt:U(T,{interrupt:!0})},d={code:null,containerState:{},defineSkip:P,events:[],now:E,parser:t,previous:null,sliceSerialize:b,sliceStream:y,write:g};let p=r.tokenize.call(d,f);return r.resolveAll&&u.push(r),d;function g(j){return l=Ot(l,j),$(),l[l.length-1]!==null?[]:(Q(r,0),d.events=Ya(u,d.events,d),d.events)}function b(j,V){return wv(y(j),V)}function y(j){return yv(l,j)}function E(){const{_bufferIndex:j,_index:V,line:we,column:Ae,offset:fe}=o;return{_bufferIndex:j,_index:V,line:we,column:Ae,offset:fe}}function P(j){a[j.line]=j.column,de()}function $(){let j;for(;o._index<l.length;){const V=l[o._index];if(typeof V=="string")for(j=o._index,o._bufferIndex<0&&(o._bufferIndex=0);o._index===j&&o._bufferIndex<V.length;)D(V.charCodeAt(o._bufferIndex));else D(V)}}function D(j){p=p(j)}function H(j){te(j)?(o.line++,o.column=1,o.offset+=j===-3?2:1,de()):j!==-1&&(o.column++,o.offset++),o._bufferIndex<0?o._index++:(o._bufferIndex++,o._bufferIndex===l[o._index].length&&(o._bufferIndex=-1,o._index++)),d.previous=j}function z(j,V){const we=V||{};return we.type=j,we.start=E(),d.events.push(["enter",we,d]),c.push(we),we}function W(j){const V=c.pop();return V.end=E(),d.events.push(["exit",V,d]),V}function F(j,V){Q(j,V.from)}function T(j,V){V.restore()}function U(j,V){return we;function we(Ae,fe,We){let Ce,Le,Dt,_;return Array.isArray(Ae)?Ft(Ae):"tokenize"in Ae?Ft([Ae]):Oe(Ae);function Oe(Me){return On;function On(Je){const vt=Je!==null&&Me[Je],pn=Je!==null&&Me.null,Zt=[...Array.isArray(vt)?vt:vt?[vt]:[],...Array.isArray(pn)?pn:pn?[pn]:[]];return Ft(Zt)(Je)}}function Ft(Me){return Ce=Me,Le=0,Me.length===0?We:S(Me[Le])}function S(Me){return On;function On(Je){return _=ee(),Dt=Me,Me.partial||(d.currentConstruct=Me),Me.name&&d.parser.constructs.disable.null.includes(Me.name)?Xe():Me.tokenize.call(V?Object.assign(Object.create(d),V):d,f,ut,Xe)(Je)}}function ut(Me){return j(Dt,_),fe}function Xe(Me){return _.restore(),++Le<Ce.length?S(Ce[Le]):We}}}function Q(j,V){j.resolveAll&&!u.includes(j)&&u.push(j),j.resolve&&Kt(d.events,V,d.events.length-V,j.resolve(d.events.slice(V),d)),j.resolveTo&&(d.events=j.resolveTo(d.events,d))}function ee(){const j=E(),V=d.previous,we=d.currentConstruct,Ae=d.events.length,fe=Array.from(c);return{from:Ae,restore:We};function We(){o=j,d.previous=V,d.currentConstruct=we,d.events.length=Ae,c=fe,de()}}function de(){o.line in a&&o.column<2&&(o.column=a[o.line],o.offset+=a[o.line]-1)}}function yv(t,r){const n=r.start._index,o=r.start._bufferIndex,a=r.end._index,u=r.end._bufferIndex;let l;if(n===a)l=[t[n].slice(o,u)];else{if(l=t.slice(n,a),o>-1){const c=l[0];typeof c=="string"?l[0]=c.slice(o):l.shift()}u>0&&l.push(t[a].slice(0,u))}return l}function wv(t,r){let n=-1;const o=[];let a;for(;++n<t.length;){const u=t[n];let l;if(typeof u=="string")l=u;else switch(u){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=r?" ":"	";break}case-1:{if(!r&&a)continue;l=" ";break}default:l=String.fromCharCode(u)}a=u===-2,o.push(l)}return o.join("")}function bv(t){const o={constructs:Cw([gv,...(t||{}).extensions||[]]),content:a(Fw),defined:[],document:a(Lw),flow:a(ev),lazy:{},string:a(rv),text:a(iv)};return o;function a(u){return l;function l(c){return mv(o,u,c)}}}function vv(t){for(;!Oc(t););return t}const Xl=/[\0\t\n\r]/g;function xv(){let t=1,r="",n=!0,o;return a;function a(u,l,c){const f=[];let d,p,g,b,y;for(u=r+(typeof u=="string"?u.toString():new TextDecoder(l||void 0).decode(u)),g=0,r="",n&&(u.charCodeAt(0)===65279&&g++,n=void 0);g<u.length;){if(Xl.lastIndex=g,d=Xl.exec(u),b=d&&d.index!==void 0?d.index:u.length,y=u.charCodeAt(b),!d){r=u.slice(g);break}if(y===10&&g===b&&o)f.push(-3),o=void 0;else switch(o&&(f.push(-5),o=void 0),g<b&&(f.push(u.slice(g,b)),t+=b-g),y){case 0:{f.push(65533),t++;break}case 9:{for(p=Math.ceil(t/4)*4,f.push(-2);t++<p;)f.push(-1);break}case 10:{f.push(-4),t=1;break}default:o=!0,t=1}g=b+1}return c&&(o&&f.push(-5),r&&f.push(r),f.push(null)),f}}const _v=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Bc(t){return t.replace(_v,kv)}function kv(t,r,n){if(r)return r;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),u=a===120||a===88;return Ec(n.slice(u?2:1),u?16:10)}return Ha(n)||t}const $c={}.hasOwnProperty;function Sv(t,r,n){return typeof r!="string"&&(n=r,r=void 0),Iv(n)(vv(bv(n).document().write(xv()(t,r,!0))))}function Iv(t){const r={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:u(zr),autolinkProtocol:ee,autolinkEmail:ee,atxHeading:u(gn),blockQuote:u(pn),characterEscape:ee,characterReference:ee,codeFenced:u(Zt),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:u(Zt,l),codeText:u(Qn,l),codeTextData:ee,data:ee,codeFlowValue:ee,definition:u($r),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:u(lt),hardBreakEscape:u(Nr),hardBreakTrailing:u(Nr),htmlFlow:u(xt,l),htmlFlowData:ee,htmlText:u(xt,l),htmlTextData:ee,image:u(Wr),label:l,link:u(zr),listItem:u(ct),listItemValue:b,listOrdered:u(mn,g),listUnordered:u(mn),paragraph:u(Mn),reference:S,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:u(gn),strong:u(jn),thematicBreak:u(Dn)},exit:{atxHeading:f(),atxHeadingSequence:F,autolink:f(),autolinkEmail:vt,autolinkProtocol:Je,blockQuote:f(),characterEscapeValue:de,characterReferenceMarkerHexadecimal:Xe,characterReferenceMarkerNumeric:Xe,characterReferenceValue:Me,characterReference:On,codeFenced:f($),codeFencedFence:P,codeFencedFenceInfo:y,codeFencedFenceMeta:E,codeFlowValue:de,codeIndented:f(D),codeText:f(fe),codeTextData:de,data:de,definition:f(),definitionDestinationString:W,definitionLabelString:H,definitionTitleString:z,emphasis:f(),hardBreakEscape:f(V),hardBreakTrailing:f(V),htmlFlow:f(we),htmlFlowData:de,htmlText:f(Ae),htmlTextData:de,image:f(Ce),label:Dt,labelText:Le,lineEnding:j,link:f(We),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:ut,resourceDestinationString:_,resourceTitleString:Oe,resource:Ft,setextHeading:f(Q),setextHeadingLineSequence:U,setextHeadingText:T,strong:f(),thematicBreak:f()}};Nc(r,(t||{}).mdastExtensions||[]);const n={};return o;function o(M){let N={type:"root",children:[]};const X={stack:[N],tokenStack:[],config:r,enter:c,exit:d,buffer:l,resume:p,data:n},ae=[];let ge=-1;for(;++ge<M.length;)if(M[ge][1].type==="listOrdered"||M[ge][1].type==="listUnordered")if(M[ge][0]==="enter")ae.push(ge);else{const Ve=ae.pop();ge=a(M,Ve,ge)}for(ge=-1;++ge<M.length;){const Ve=r[M[ge][0]];$c.call(Ve,M[ge][1].type)&&Ve[M[ge][1].type].call(Object.assign({sliceSerialize:M[ge][2].sliceSerialize},X),M[ge][1])}if(X.tokenStack.length>0){const Ve=X.tokenStack[X.tokenStack.length-1];(Ve[1]||Jl).call(X,void 0,Ve[0])}for(N.position={start:En(M.length>0?M[0][1].start:{line:1,column:1,offset:0}),end:En(M.length>0?M[M.length-2][1].end:{line:1,column:1,offset:0})},ge=-1;++ge<r.transforms.length;)N=r.transforms[ge](N)||N;return N}function a(M,N,X){let ae=N-1,ge=-1,Ve=!1,Rt,ft,en,tn;for(;++ae<=X;){const qe=M[ae];switch(qe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{qe[0]==="enter"?ge++:ge--,tn=void 0;break}case"lineEndingBlank":{qe[0]==="enter"&&(Rt&&!tn&&!ge&&!en&&(en=ae),tn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:tn=void 0}if(!ge&&qe[0]==="enter"&&qe[1].type==="listItemPrefix"||ge===-1&&qe[0]==="exit"&&(qe[1].type==="listUnordered"||qe[1].type==="listOrdered")){if(Rt){let Ht=ae;for(ft=void 0;Ht--;){const Lt=M[Ht];if(Lt[1].type==="lineEnding"||Lt[1].type==="lineEndingBlank"){if(Lt[0]==="exit")continue;ft&&(M[ft][1].type="lineEndingBlank",Ve=!0),Lt[1].type="lineEnding",ft=Ht}else if(!(Lt[1].type==="linePrefix"||Lt[1].type==="blockQuotePrefix"||Lt[1].type==="blockQuotePrefixWhitespace"||Lt[1].type==="blockQuoteMarker"||Lt[1].type==="listItemIndent"))break}en&&(!ft||en<ft)&&(Rt._spread=!0),Rt.end=Object.assign({},ft?M[ft][1].start:qe[1].end),M.splice(ft||ae,0,["exit",Rt,qe[2]]),ae++,X++}if(qe[1].type==="listItemPrefix"){const Ht={type:"listItem",_spread:!1,start:Object.assign({},qe[1].start),end:void 0};Rt=Ht,M.splice(ae,0,["enter",Ht,qe[2]]),ae++,X++,en=void 0,tn=!0}}}return M[N][1]._spread=Ve,X}function u(M,N){return X;function X(ae){c.call(this,M(ae),ae),N&&N.call(this,ae)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(M,N,X){this.stack[this.stack.length-1].children.push(M),this.stack.push(M),this.tokenStack.push([N,X||void 0]),M.position={start:En(N.start),end:void 0}}function f(M){return N;function N(X){M&&M.call(this,X),d.call(this,X)}}function d(M,N){const X=this.stack.pop(),ae=this.tokenStack.pop();if(ae)ae[0].type!==M.type&&(N?N.call(this,M,ae[0]):(ae[1]||Jl).call(this,M,ae[0]));else throw new Error("Cannot close `"+M.type+"` ("+Mr({start:M.start,end:M.end})+"): itâ€™s not open");X.position.end=En(M.end)}function p(){return qa(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function b(M){if(this.data.expectingFirstListItemValue){const N=this.stack[this.stack.length-2];N.start=Number.parseInt(this.sliceSerialize(M),10),this.data.expectingFirstListItemValue=void 0}}function y(){const M=this.resume(),N=this.stack[this.stack.length-1];N.lang=M}function E(){const M=this.resume(),N=this.stack[this.stack.length-1];N.meta=M}function P(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function $(){const M=this.resume(),N=this.stack[this.stack.length-1];N.value=M.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function D(){const M=this.resume(),N=this.stack[this.stack.length-1];N.value=M.replace(/(\r?\n|\r)$/g,"")}function H(M){const N=this.resume(),X=this.stack[this.stack.length-1];X.label=N,X.identifier=fr(this.sliceSerialize(M)).toLowerCase()}function z(){const M=this.resume(),N=this.stack[this.stack.length-1];N.title=M}function W(){const M=this.resume(),N=this.stack[this.stack.length-1];N.url=M}function F(M){const N=this.stack[this.stack.length-1];if(!N.depth){const X=this.sliceSerialize(M).length;N.depth=X}}function T(){this.data.setextHeadingSlurpLineEnding=!0}function U(M){const N=this.stack[this.stack.length-1];N.depth=this.sliceSerialize(M).codePointAt(0)===61?1:2}function Q(){this.data.setextHeadingSlurpLineEnding=void 0}function ee(M){const X=this.stack[this.stack.length-1].children;let ae=X[X.length-1];(!ae||ae.type!=="text")&&(ae=Ui(),ae.position={start:En(M.start),end:void 0},X.push(ae)),this.stack.push(ae)}function de(M){const N=this.stack.pop();N.value+=this.sliceSerialize(M),N.position.end=En(M.end)}function j(M){const N=this.stack[this.stack.length-1];if(this.data.atHardBreak){const X=N.children[N.children.length-1];X.position.end=En(M.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&r.canContainEols.includes(N.type)&&(ee.call(this,M),de.call(this,M))}function V(){this.data.atHardBreak=!0}function we(){const M=this.resume(),N=this.stack[this.stack.length-1];N.value=M}function Ae(){const M=this.resume(),N=this.stack[this.stack.length-1];N.value=M}function fe(){const M=this.resume(),N=this.stack[this.stack.length-1];N.value=M}function We(){const M=this.stack[this.stack.length-1];if(this.data.inReference){const N=this.data.referenceType||"shortcut";M.type+="Reference",M.referenceType=N,delete M.url,delete M.title}else delete M.identifier,delete M.label;this.data.referenceType=void 0}function Ce(){const M=this.stack[this.stack.length-1];if(this.data.inReference){const N=this.data.referenceType||"shortcut";M.type+="Reference",M.referenceType=N,delete M.url,delete M.title}else delete M.identifier,delete M.label;this.data.referenceType=void 0}function Le(M){const N=this.sliceSerialize(M),X=this.stack[this.stack.length-2];X.label=Bc(N),X.identifier=fr(N).toLowerCase()}function Dt(){const M=this.stack[this.stack.length-1],N=this.resume(),X=this.stack[this.stack.length-1];if(this.data.inReference=!0,X.type==="link"){const ae=M.children;X.children=ae}else X.alt=N}function _(){const M=this.resume(),N=this.stack[this.stack.length-1];N.url=M}function Oe(){const M=this.resume(),N=this.stack[this.stack.length-1];N.title=M}function Ft(){this.data.inReference=void 0}function S(){this.data.referenceType="collapsed"}function ut(M){const N=this.resume(),X=this.stack[this.stack.length-1];X.label=N,X.identifier=fr(this.sliceSerialize(M)).toLowerCase(),this.data.referenceType="full"}function Xe(M){this.data.characterReferenceType=M.type}function Me(M){const N=this.sliceSerialize(M),X=this.data.characterReferenceType;let ae;X?(ae=Ec(N,X==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ae=Ha(N);const ge=this.stack[this.stack.length-1];ge.value+=ae}function On(M){const N=this.stack.pop();N.position.end=En(M.end)}function Je(M){de.call(this,M);const N=this.stack[this.stack.length-1];N.url=this.sliceSerialize(M)}function vt(M){de.call(this,M);const N=this.stack[this.stack.length-1];N.url="mailto:"+this.sliceSerialize(M)}function pn(){return{type:"blockquote",children:[]}}function Zt(){return{type:"code",lang:null,meta:null,value:""}}function Qn(){return{type:"inlineCode",value:""}}function $r(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function lt(){return{type:"emphasis",children:[]}}function gn(){return{type:"heading",depth:0,children:[]}}function Nr(){return{type:"break"}}function xt(){return{type:"html",value:""}}function Wr(){return{type:"image",title:null,url:"",alt:null}}function zr(){return{type:"link",title:null,url:"",children:[]}}function mn(M){return{type:"list",ordered:M.type==="listOrdered",start:null,spread:M._spread,children:[]}}function ct(M){return{type:"listItem",spread:M._spread,checked:null,children:[]}}function Mn(){return{type:"paragraph",children:[]}}function jn(){return{type:"strong",children:[]}}function Ui(){return{type:"text",value:""}}function Dn(){return{type:"thematicBreak"}}}function En(t){return{line:t.line,column:t.column,offset:t.offset}}function Nc(t,r){let n=-1;for(;++n<r.length;){const o=r[n];Array.isArray(o)?Nc(t,o):Cv(t,o)}}function Cv(t,r){let n;for(n in r)if($c.call(r,n))switch(n){case"canContainEols":{const o=r[n];o&&t[n].push(...o);break}case"transforms":{const o=r[n];o&&t[n].push(...o);break}case"enter":case"exit":{const o=r[n];o&&Object.assign(t[n],o);break}}}function Jl(t,r){throw t?new Error("Cannot close `"+t.type+"` ("+Mr({start:t.start,end:t.end})+"): a different token (`"+r.type+"`, "+Mr({start:r.start,end:r.end})+") is open"):new Error("Cannot close document, a token (`"+r.type+"`, "+Mr({start:r.start,end:r.end})+") is still open")}function Wc(t){const r=this;r.parser=n;function n(o){return Sv(o,{...r.data("settings"),...t,extensions:r.data("micromarkExtensions")||[],mdastExtensions:r.data("fromMarkdownExtensions")||[]})}}const Ga=(function(t){if(t==null)return Pv;if(typeof t=="function")return Yi(t);if(typeof t=="object")return Array.isArray(t)?Ev(t):Tv(t);if(typeof t=="string")return Av(t);throw new Error("Expected function, string, or object as test")});function Ev(t){const r=[];let n=-1;for(;++n<t.length;)r[n]=Ga(t[n]);return Yi(o);function o(...a){let u=-1;for(;++u<r.length;)if(r[u].apply(this,a))return!0;return!1}}function Tv(t){const r=t;return Yi(n);function n(o){const a=o;let u;for(u in t)if(a[u]!==r[u])return!1;return!0}}function Av(t){return Yi(r);function r(n){return n&&n.type===t}}function Yi(t){return r;function r(n,o,a){return!!(Ov(n)&&t.call(this,n,typeof o=="number"?o:void 0,a||void 0))}}function Pv(){return!0}function Ov(t){return t!==null&&typeof t=="object"&&"type"in t}const zc=[],Mv=!0,Ra=!1,Dv="skip";function Fv(t,r,n,o){let a;typeof r=="function"&&typeof n!="function"?(o=n,n=r):a=r;const u=Ga(a),l=o?-1:1;c(t,void 0,[])();function c(f,d,p){const g=f&&typeof f=="object"?f:{};if(typeof g.type=="string"){const y=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(b,"name",{value:"node ("+(f.type+(y?"<"+y+">":""))+")"})}return b;function b(){let y=zc,E,P,$;if((!r||u(f,d,p[p.length-1]||void 0))&&(y=Rv(n(f,p)),y[0]===Ra))return y;if("children"in f&&f.children){const D=f;if(D.children&&y[0]!==Dv)for(P=(o?D.children.length:-1)+l,$=p.concat(D);P>-1&&P<D.children.length;){const H=D.children[P];if(E=c(H,P,$)(),E[0]===Ra)return E;P=typeof E[1]=="number"?E[1]:P+l}}return y}}}function Rv(t){return Array.isArray(t)?t:typeof t=="number"?[Mv,t]:t==null?zc:[t]}function qc(t,r,n,o){let a,u,l;typeof r=="function"&&typeof n!="function"?(u=void 0,l=r,a=n):(u=r,l=n,a=o),Fv(t,u,c,a);function c(f,d){const p=d[d.length-1],g=p?p.children.indexOf(f):void 0;return l(f,g,p)}}const Gn={component:"mdc-component",input:"mdc-input",hiddenValue:"mdc-hidden-value"};class Lv{constructor(){this.logger=Xt(Jt.TagsService),this.component={start:r=>{const n={componentId:r};return this.logger.dev("Component start",n),`<span class="$${Gn.component} start" data-meta='${JSON.stringify(n)}' style="display:none"></span>`},end:r=>{const n={componentId:r};return this.logger.dev("Component end",n),`<span class="$${Gn.component} end" data-meta='${JSON.stringify(n)}' style="display:none"></span>`},wrap:(r,n,o=!0)=>{const a=o?`
${n}
`:n;return this.logger.dev("Component wrap",{componentId:r,content:n}),this.component.start(r)+a+this.component.end(r)}},this.input={start:(r,n,o)=>{const a={componentId:r,inputId:n,inputType:o};return this.logger.dev("Input start",a),`<span class="$${Gn.input}" data-meta='${JSON.stringify(a)}' style="display:none"></span>`},end:(r,n,o)=>{const a={componentId:r,inputId:n,inputType:o};return this.logger.dev("Input end",a),`<span class="$${Gn.input} end" data-meta='${JSON.stringify(a)}' style="display:none"></span>`},wrap:r=>{const{componentId:n,inputId:o,inputType:a,content:u,withNewLines:l=!0}=r,c=l?`
${u}
`:u;return this.logger.dev("Input wrap",{componentId:n,inputId:o,content:u}),this.input.start(n,o,a)+c+this.input.end(n,o,a)}},this.hiddenValue=(r,n,o)=>{const a={componentId:r,inputId:n,value:o};return this.logger.dev("Hidden value set",a),`<span class="$${Gn.hiddenValue}" data-meta='${JSON.stringify(a)}' style="display:none"></span>`}}}const La=new Lv,wa=Xt(Jt.ValueExtractor);class Bv{extract(r){const n=Oa().use(Wc).parse(r),o=[],a=[],u={};qc(n,l=>{if(l.type==="html"&&l.position){const c=l.value,f=l.position.start.offset;if(c.includes(Gn.input)){const d=this.getMeta(c);if(d){const p=this.key(d);c.includes('end"')?u[p]?u[p].endPos=l.position.start.offset:u[p]={meta:d,startPos:-1,endPos:l.position.start.offset,hiddenValues:[]}:u[p]?u[p].startPos=l.position.end.offset:u[p]={meta:d,startPos:l.position.end.offset,endPos:-1,hiddenValues:[]}}}else if(c.includes(Gn.hiddenValue)){const d=this.getMeta(c);if(d&&d.value){const p=this.key(d);u[p]||(u[p]={meta:d,startPos:-1,endPos:-1,hiddenValues:[]}),u[p].hiddenValues.push({value:d.value,pos:f})}}}});for(const l in u){const{meta:c,startPos:f,endPos:d,hiddenValues:p}=u[l];if(f===-1||d===-1){wa.warn(`Input ${l} missing start or end tag, skipping`);continue}const b=r.substring(f,d).trim().replace(/<span[^>]*>.*?<\/span>/gs,"").trim(),y=p.filter(P=>P.pos>=f&&P.pos<d).map(P=>P.value),E=this.extractValue(c.inputType,b,y,c);E.errors.length>0&&a.push(...E.errors),o.push({componentId:c.componentId,inputId:c.inputId,inputType:c.inputType,value:E.value,errors:E.errors})}return wa.dev("Extracted values",o),a.length>0&&wa.error("Extraction errors:",a),o}getMeta(r){const n=r.match(/data-meta=(?:'([^']+)'|"([^"]+)")/);if(!n)return null;try{return JSON.parse(n[1]||n[2])}catch{return null}}key(r){return`${r.componentId}::${r.inputId}`}extractValue(r,n,o,a){const u=[];let l=null;switch(r){case"boolean":{n.includes("[x]")||n.includes("[X]")?l=!0:n.includes("[ ]")?l=!1:(u.push("Boolean input must be a markdown checkbox"),l=null);break}case"text":{const c=n.replace(/^>\s?/gm,"").replace(/<[^>]+>/g,"").trim();a.required&&!c&&u.push("Text input is required"),a.placeholder&&c===a.placeholder?l=null:l=c;break}case"richText":{const c=n.replace(/<[^>]+>/g,"").trim();a.required&&!c&&u.push("Rich text input is required"),a.placeholder&&c===a.placeholder?l=null:l=c;break}case"multicheckbox":{const c=[],f=n.split(`
`);let d=0;f.forEach(p=>{p.match(/\[(x|X)\]/)&&d<o.length&&c.push(o[d]),p.match(/\[[ xX]\]/)&&d++}),a.required&&c.length===0&&u.push("At least one option must be selected"),a.singleChoice?(c.length>1&&u.push(`Multiple checked values for singleChoice input: ${a.componentId}::${a.inputId} [${c.join(", ")}]`),l=c[0]??null):l=c;break}case"number":{const c=n.match(new RegExp("(?<!\\d)(\\d+(?:[.,]\\d+)?)"));c?(l=parseFloat(c[1].replace(",",".")),a.required&&(l==null||isNaN(l))&&u.push("Number input is required"),typeof l=="number"&&a.min!==void 0&&l<a.min&&u.push(`Number must be >= ${a.min}`),typeof l=="number"&&a.max!==void 0&&l>a.max&&u.push(`Number must be <= ${a.max}`)):(a.required&&u.push("Number input is required"),l=null);break}default:l=n}return{value:l,errors:u}}}const $v=new Bv,Vt=Xt(Jt.InputCollector);class Nv{constructor(r){this.getConfig=r}async collectFromYesterday(){Vt.dev("Starting collection of inputs from yesterdayâ€™s reports");const r={};this.getConfig();for(const[n,{folder:o,name:a}]of Object.entries(Ic))try{const u=`${Rr.baseOutput}/${o}`;Vt.dev(`Checking folder "${u}" for report: ${n}`);const l=await Rr._listFiles(u);if(!l.length){Vt.warn(`No files found in "${u}" for report: ${n}`);continue}const c=l.sort().reverse()[0];if(!c.includes(n)){Vt.warn(`Newest file "${c}" in folder "${u}" does not match report type: ${n}`);continue}const f=`${u}/${c}`,d=ke.vault.getAbstractFileByPath(f);if(!d||!("vault"in ke)){Vt.error(`Could not load file for report ${n}`,{filePath:f});continue}const p=c.match(/^(\d{8})-(\d{5})-/);let g="",b="";p&&(g=`${p[1].slice(0,4)}-${p[1].slice(4,6)}-${p[1].slice(6,8)}`,b=p[2]),Vt.dev(`Reading file: "${f}"`);const y=await ke.vault.read(d),P=$v.extract(y).map($=>({componentId:$.componentId,inputId:$.inputId,type:$.inputType??"unknown",value:$.value,errors:$.errors&&$.errors.length>0?$.errors:void 0,reportType:n,reportDate:g,reportNumber:b}));r[n]=P,Vt.dev(`Parsed ${P.length} inputs for report: ${n}`)}catch(u){Vt.error(`Failed collecting inputs for ${n}`,{error:u})}return Vt.info(`InputCollector finished. Collected reports: ${Object.keys(r).length}`),Vt.dev("Collected inputs summary:",{collectedByReport:r}),r}}const Wv=new Nv(()=>bt);function zv(t,r){if(t===void 0)throw new Error("lowdb: missing adapter");if(r===void 0)throw new Error("lowdb: missing default data")}class qv{adapter;data;constructor(r,n){zv(r,n),this.adapter=r,this.data=n}async read(){const r=await this.adapter.read();r&&(this.data=r)}async write(){this.data&&await this.adapter.write(this.data)}async update(r){r(this.data),await this.write()}}const it=Xt(Jt.DbService);class Hv{constructor(r){this.dbPath=r}async read(){try{const r=ke.vault.getAbstractFileByPath(this.dbPath);if(r&&"extension"in r){const n=await ke.vault.read(r);return JSON.parse(n)}return null}catch(r){return it.error("Error reading database",{error:r}),null}}async write(r){try{const n=JSON.stringify(r,null,2),o=ke.vault.getAbstractFileByPath(this.dbPath);o&&"extension"in o?(await ke.vault.modify(o,n),it.dev(`Database saved to ${this.dbPath}`)):(await ke.vault.create(this.dbPath,n),it.info(`Database created at ${this.dbPath}`))}catch(n){it.error("Error writing database",{error:n})}}}class Yv{constructor(){this.db=null}getDbPath(){return`${bt.projectDir}/${bt.coreDir}/powerjournal-db.json`}async ensureCoreDir(){const r=`${bt.projectDir}/${bt.coreDir}`;ke.vault.getAbstractFileByPath(r)||(it.dev(`Creating core directory: ${r}`),await ke.vault.createFolder(r))}async ensureDb(){if(!this.db){await this.ensureCoreDir();const r=this.getDbPath(),n=new Hv(r);this.db=new qv(n,{reports:{}}),it.dev(`Database adapter initialized for ${r}`)}return this.db}async init(){const r=await this.ensureDb();await r.read(),r.data||={reports:{}},it.dev("Database initialized")}async saveReportInputs(r,n){await this.init();const o=await this.ensureDb();o.data.reports[r]=n,await o.write(),it.info(`Saved ${n.length} inputs for report type: ${r}`)}async appendReportInputs(r,n){await this.init();const o=await this.ensureDb();o.data.reports[r]||(o.data.reports[r]=[]),o.data.reports[r].push(...n),await o.write(),it.info(`Appended ${n.length} inputs to report type: ${r}`)}async upsertReportInputs(r,n){await this.init();const o=await this.ensureDb();o.data.reports[r]||(o.data.reports[r]=[]);const a=new Set(n.map(l=>`${l.reportDate}-${l.reportNumber}`)),u=o.data.reports[r].filter(l=>{const c=`${l.reportDate}-${l.reportNumber}`;return!a.has(c)});o.data.reports[r]=[...u,...n],await o.write(),it.info(`Upserted ${n.length} inputs for ${r} (removed duplicates)`)}async getReportInputs(r){await this.init();const o=(await this.ensureDb()).data.reports[r]||[];return it.dev(`Retrieved ${o.length} inputs for report type: ${r}`),o}async getInputsById(r,n,o){await this.init();const u=(await this.ensureDb()).data.reports[r]||[],l=Array.isArray(n)?n:[n],c=u.filter(f=>{const d=l.includes(f.inputId),p=o?f.componentId===o:!0;return d&&p});return it.dev(`Filtered ${c.length} inputs for ${l.join(", ")}${o?` in ${o}`:""}`),c}async getInputsLastNReports(r,n,o,a){const l=(await this.getInputsById(r,n,a)).sort((p,g)=>{const b=(g.reportDate||"").localeCompare(p.reportDate||"");return b!==0?b:(g.reportNumber||"0").localeCompare(p.reportNumber||"0")}),f=Array.from(new Set(l.map(p=>p.reportDate))).slice(0,o),d=l.filter(p=>f.includes(p.reportDate));return it.info(`Retrieved ${d.length} inputs from last ${o} reports`),d}async getInputsInDateRange(r,n,o,a,u){const c=(await this.getInputsById(r,n,u)).filter(f=>{const d=f.reportDate||"";return d>=o&&d<=a});return it.info(`Retrieved ${c.length} inputs between ${o} and ${a}`),c}async getAvailableInputs(r,n){await this.init();const a=(await this.ensureDb()).data.reports[r]||[],u=new Set(a.filter(l=>l.componentId===n).map(l=>l.inputId));return Array.from(u)}}const hn=new Yv,Zl={}.hasOwnProperty;function Uv(t,r){const n=r||{};function o(a,...u){let l=o.invalid;const c=o.handlers;if(a&&Zl.call(a,t)){const f=String(a[t]);l=Zl.call(c,f)?c[f]:o.unknown}if(l)return l.call(this,a,...u)}return o.handlers=n.handlers||{},o.invalid=n.invalid,o.unknown=n.unknown,o}const Gv={}.hasOwnProperty;function Hc(t,r){let n=-1,o;if(r.extensions)for(;++n<r.extensions.length;)Hc(t,r.extensions[n]);for(o in r)if(Gv.call(r,o))switch(o){case"extensions":break;case"unsafe":{ec(t[o],r[o]);break}case"join":{ec(t[o],r[o]);break}case"handlers":{Vv(t[o],r[o]);break}default:t.options[o]=r[o]}return t}function ec(t,r){r&&t.push(...r)}function Vv(t,r){r&&Object.assign(t,r)}function Qv(t,r,n,o){const a=n.enter("blockquote"),u=n.createTracker(o);u.move("> "),u.shift(2);const l=n.indentLines(n.containerFlow(t,u.current()),jv);return a(),l}function jv(t,r,n){return">"+(n?"":" ")+t}function Yc(t,r){return tc(t,r.inConstruct,!0)&&!tc(t,r.notInConstruct,!1)}function tc(t,r,n){if(typeof r=="string"&&(r=[r]),!r||r.length===0)return n;let o=-1;for(;++o<r.length;)if(t.includes(r[o]))return!0;return!1}function nc(t,r,n,o){let a=-1;for(;++a<n.unsafe.length;)if(n.unsafe[a].character===`
`&&Yc(n.stack,n.unsafe[a]))return/[ \t]/.test(o.before)?"":" ";return`\\
`}function Kv(t,r){const n=String(t);let o=n.indexOf(r),a=o,u=0,l=0;if(typeof r!="string")throw new TypeError("Expected substring");for(;o!==-1;)o===a?++u>l&&(l=u):u=1,a=o+r.length,o=n.indexOf(r,a);return l}function Ba(t,r){return!!(r.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function Xv(t){const r=t.options.fence||"`";if(r!=="`"&&r!=="~")throw new Error("Cannot serialize code with `"+r+"` for `options.fence`, expected `` ` `` or `~`");return r}function Jv(t,r,n,o){const a=Xv(n),u=t.value||"",l=a==="`"?"GraveAccent":"Tilde";if(Ba(t,n)){const g=n.enter("codeIndented"),b=n.indentLines(u,Zv);return g(),b}const c=n.createTracker(o),f=a.repeat(Math.max(Kv(u,a)+1,3)),d=n.enter("codeFenced");let p=c.move(f);if(t.lang){const g=n.enter(`codeFencedLang${l}`);p+=c.move(n.safe(t.lang,{before:p,after:" ",encode:["`"],...c.current()})),g()}if(t.lang&&t.meta){const g=n.enter(`codeFencedMeta${l}`);p+=c.move(" "),p+=c.move(n.safe(t.meta,{before:p,after:`
`,encode:["`"],...c.current()})),g()}return p+=c.move(`
`),u&&(p+=c.move(u+`
`)),p+=c.move(f),d(),p}function Zv(t,r,n){return(n?"":"    ")+t}function Va(t){const r=t.options.quote||'"';if(r!=='"'&&r!=="'")throw new Error("Cannot serialize title with `"+r+"` for `options.quote`, expected `\"`, or `'`");return r}function ex(t,r,n,o){const a=Va(n),u=a==='"'?"Quote":"Apostrophe",l=n.enter("definition");let c=n.enter("label");const f=n.createTracker(o);let d=f.move("[");return d+=f.move(n.safe(n.associationId(t),{before:d,after:"]",...f.current()})),d+=f.move("]: "),c(),!t.url||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),d+=f.move("<"),d+=f.move(n.safe(t.url,{before:d,after:">",...f.current()})),d+=f.move(">")):(c=n.enter("destinationRaw"),d+=f.move(n.safe(t.url,{before:d,after:t.title?" ":`
`,...f.current()}))),c(),t.title&&(c=n.enter(`title${u}`),d+=f.move(" "+a),d+=f.move(n.safe(t.title,{before:d,after:a,...f.current()})),d+=f.move(a),c()),l(),d}function tx(t){const r=t.options.emphasis||"*";if(r!=="*"&&r!=="_")throw new Error("Cannot serialize emphasis with `"+r+"` for `options.emphasis`, expected `*`, or `_`");return r}function An(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Wi(t,r,n){const o=Ni(t),a=Ni(r);return o===void 0?a===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:o===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Uc.peek=nx;function Uc(t,r,n,o){const a=tx(n),u=n.enter("emphasis"),l=n.createTracker(o),c=l.move(a);let f=l.move(n.containerPhrasing(t,{after:a,before:c,...l.current()}));const d=f.charCodeAt(0),p=Wi(o.before.charCodeAt(o.before.length-1),d,a);p.inside&&(f=An(d)+f.slice(1));const g=f.charCodeAt(f.length-1),b=Wi(o.after.charCodeAt(0),g,a);b.inside&&(f=f.slice(0,-1)+An(g));const y=l.move(a);return u(),n.attentionEncodeSurroundingInfo={after:b.outside,before:p.outside},c+f+y}function nx(t,r,n){return n.options.emphasis||"*"}function Gc(t,r){let n=!1;return qc(t,function(o){if("value"in o&&/\r?\n|\r/.test(o.value)||o.type==="break")return n=!0,Ra}),!!((!t.depth||t.depth<3)&&qa(t)&&(r.options.setext||n))}function rx(t,r,n,o){const a=Math.max(Math.min(6,t.depth||1),1),u=n.createTracker(o);if(Gc(t,n)){const p=n.enter("headingSetext"),g=n.enter("phrasing"),b=n.containerPhrasing(t,{...u.current(),before:`
`,after:`
`});return g(),p(),b+`
`+(a===1?"=":"-").repeat(b.length-(Math.max(b.lastIndexOf("\r"),b.lastIndexOf(`
`))+1))}const l="#".repeat(a),c=n.enter("headingAtx"),f=n.enter("phrasing");u.move(l+" ");let d=n.containerPhrasing(t,{before:"# ",after:`
`,...u.current()});return/^[\t ]/.test(d)&&(d=An(d.charCodeAt(0))+d.slice(1)),d=d?l+" "+d:l,n.options.closeAtx&&(d+=" "+l),f(),c(),d}Vc.peek=ix;function Vc(t){return t.value||""}function ix(){return"<"}Qc.peek=ox;function Qc(t,r,n,o){const a=Va(n),u=a==='"'?"Quote":"Apostrophe",l=n.enter("image");let c=n.enter("label");const f=n.createTracker(o);let d=f.move("![");return d+=f.move(n.safe(t.alt,{before:d,after:"]",...f.current()})),d+=f.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),d+=f.move("<"),d+=f.move(n.safe(t.url,{before:d,after:">",...f.current()})),d+=f.move(">")):(c=n.enter("destinationRaw"),d+=f.move(n.safe(t.url,{before:d,after:t.title?" ":")",...f.current()}))),c(),t.title&&(c=n.enter(`title${u}`),d+=f.move(" "+a),d+=f.move(n.safe(t.title,{before:d,after:a,...f.current()})),d+=f.move(a),c()),d+=f.move(")"),l(),d}function ox(){return"!"}jc.peek=ax;function jc(t,r,n,o){const a=t.referenceType,u=n.enter("imageReference");let l=n.enter("label");const c=n.createTracker(o);let f=c.move("![");const d=n.safe(t.alt,{before:f,after:"]",...c.current()});f+=c.move(d+"]["),l();const p=n.stack;n.stack=[],l=n.enter("reference");const g=n.safe(n.associationId(t),{before:f,after:"]",...c.current()});return l(),n.stack=p,u(),a==="full"||!d||d!==g?f+=c.move(g+"]"):a==="shortcut"?f=f.slice(0,-1):f+=c.move("]"),f}function ax(){return"!"}Kc.peek=sx;function Kc(t,r,n){let o=t.value||"",a="`",u=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(o);)a+="`";for(/[^ \r\n]/.test(o)&&(/^[ \r\n]/.test(o)&&/[ \r\n]$/.test(o)||/^`|`$/.test(o))&&(o=" "+o+" ");++u<n.unsafe.length;){const l=n.unsafe[u],c=n.compilePattern(l);let f;if(l.atBreak)for(;f=c.exec(o);){let d=f.index;o.charCodeAt(d)===10&&o.charCodeAt(d-1)===13&&d--,o=o.slice(0,d)+" "+o.slice(f.index+1)}}return a+o+a}function sx(){return"`"}function Xc(t,r){const n=qa(t);return!!(!r.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}Jc.peek=ux;function Jc(t,r,n,o){const a=Va(n),u=a==='"'?"Quote":"Apostrophe",l=n.createTracker(o);let c,f;if(Xc(t,n)){const p=n.stack;n.stack=[],c=n.enter("autolink");let g=l.move("<");return g+=l.move(n.containerPhrasing(t,{before:g,after:">",...l.current()})),g+=l.move(">"),c(),n.stack=p,g}c=n.enter("link"),f=n.enter("label");let d=l.move("[");return d+=l.move(n.containerPhrasing(t,{before:d,after:"](",...l.current()})),d+=l.move("]("),f(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(f=n.enter("destinationLiteral"),d+=l.move("<"),d+=l.move(n.safe(t.url,{before:d,after:">",...l.current()})),d+=l.move(">")):(f=n.enter("destinationRaw"),d+=l.move(n.safe(t.url,{before:d,after:t.title?" ":")",...l.current()}))),f(),t.title&&(f=n.enter(`title${u}`),d+=l.move(" "+a),d+=l.move(n.safe(t.title,{before:d,after:a,...l.current()})),d+=l.move(a),f()),d+=l.move(")"),c(),d}function ux(t,r,n){return Xc(t,n)?"<":"["}Zc.peek=lx;function Zc(t,r,n,o){const a=t.referenceType,u=n.enter("linkReference");let l=n.enter("label");const c=n.createTracker(o);let f=c.move("[");const d=n.containerPhrasing(t,{before:f,after:"]",...c.current()});f+=c.move(d+"]["),l();const p=n.stack;n.stack=[],l=n.enter("reference");const g=n.safe(n.associationId(t),{before:f,after:"]",...c.current()});return l(),n.stack=p,u(),a==="full"||!d||d!==g?f+=c.move(g+"]"):a==="shortcut"?f=f.slice(0,-1):f+=c.move("]"),f}function lx(){return"["}function Qa(t){const r=t.options.bullet||"*";if(r!=="*"&&r!=="+"&&r!=="-")throw new Error("Cannot serialize items with `"+r+"` for `options.bullet`, expected `*`, `+`, or `-`");return r}function cx(t){const r=Qa(t),n=t.options.bulletOther;if(!n)return r==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===r)throw new Error("Expected `bullet` (`"+r+"`) and `bulletOther` (`"+n+"`) to be different");return n}function fx(t){const r=t.options.bulletOrdered||".";if(r!=="."&&r!==")")throw new Error("Cannot serialize items with `"+r+"` for `options.bulletOrdered`, expected `.` or `)`");return r}function ef(t){const r=t.options.rule||"*";if(r!=="*"&&r!=="-"&&r!=="_")throw new Error("Cannot serialize rules with `"+r+"` for `options.rule`, expected `*`, `-`, or `_`");return r}function hx(t,r,n,o){const a=n.enter("list"),u=n.bulletCurrent;let l=t.ordered?fx(n):Qa(n);const c=t.ordered?l==="."?")":".":cx(n);let f=r&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!t.ordered){const p=t.children?t.children[0]:void 0;if((l==="*"||l==="-")&&p&&(!p.children||!p.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(f=!0),ef(n)===l&&p){let g=-1;for(;++g<t.children.length;){const b=t.children[g];if(b&&b.type==="listItem"&&b.children&&b.children[0]&&b.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(l=c),n.bulletCurrent=l;const d=n.containerFlow(t,o);return n.bulletLastUsed=l,n.bulletCurrent=u,a(),d}function dx(t){const r=t.options.listItemIndent||"one";if(r!=="tab"&&r!=="one"&&r!=="mixed")throw new Error("Cannot serialize items with `"+r+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return r}function px(t,r,n,o){const a=dx(n);let u=n.bulletCurrent||Qa(n);r&&r.type==="list"&&r.ordered&&(u=(typeof r.start=="number"&&r.start>-1?r.start:1)+(n.options.incrementListMarker===!1?0:r.children.indexOf(t))+u);let l=u.length+1;(a==="tab"||a==="mixed"&&(r&&r.type==="list"&&r.spread||t.spread))&&(l=Math.ceil(l/4)*4);const c=n.createTracker(o);c.move(u+" ".repeat(l-u.length)),c.shift(l);const f=n.enter("listItem"),d=n.indentLines(n.containerFlow(t,c.current()),p);return f(),d;function p(g,b,y){return b?(y?"":" ".repeat(l))+g:(y?u:u+" ".repeat(l-u.length))+g}}function gx(t,r,n,o){const a=n.enter("paragraph"),u=n.enter("phrasing"),l=n.containerPhrasing(t,o);return u(),a(),l}const mx=Ga(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function yx(t,r,n,o){return(t.children.some(function(l){return mx(l)})?n.containerPhrasing:n.containerFlow).call(n,t,o)}function wx(t){const r=t.options.strong||"*";if(r!=="*"&&r!=="_")throw new Error("Cannot serialize strong with `"+r+"` for `options.strong`, expected `*`, or `_`");return r}tf.peek=bx;function tf(t,r,n,o){const a=wx(n),u=n.enter("strong"),l=n.createTracker(o),c=l.move(a+a);let f=l.move(n.containerPhrasing(t,{after:a,before:c,...l.current()}));const d=f.charCodeAt(0),p=Wi(o.before.charCodeAt(o.before.length-1),d,a);p.inside&&(f=An(d)+f.slice(1));const g=f.charCodeAt(f.length-1),b=Wi(o.after.charCodeAt(0),g,a);b.inside&&(f=f.slice(0,-1)+An(g));const y=l.move(a+a);return u(),n.attentionEncodeSurroundingInfo={after:b.outside,before:p.outside},c+f+y}function bx(t,r,n){return n.options.strong||"*"}function vx(t,r,n,o){return n.safe(t.value,o)}function xx(t){const r=t.options.ruleRepetition||3;if(r<3)throw new Error("Cannot serialize rules with repetition `"+r+"` for `options.ruleRepetition`, expected `3` or more");return r}function _x(t,r,n){const o=(ef(n)+(n.options.ruleSpaces?" ":"")).repeat(xx(n));return n.options.ruleSpaces?o.slice(0,-1):o}const kx={blockquote:Qv,break:nc,code:Jv,definition:ex,emphasis:Uc,hardBreak:nc,heading:rx,html:Vc,image:Qc,imageReference:jc,inlineCode:Kc,link:Jc,linkReference:Zc,list:hx,listItem:px,paragraph:gx,root:yx,strong:tf,text:vx,thematicBreak:_x},Sx=[Ix];function Ix(t,r,n,o){if(r.type==="code"&&Ba(r,o)&&(t.type==="list"||t.type===r.type&&Ba(t,o)))return!1;if("spread"in n&&typeof n.spread=="boolean")return t.type==="paragraph"&&(t.type===r.type||r.type==="definition"||r.type==="heading"&&Gc(r,o))?void 0:n.spread?1:0}const Yn=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],Cx=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:Yn},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:Yn},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:Yn},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:Yn},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:Yn},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:Yn},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:Yn},{atBreak:!0,character:"~"}];function Ex(t){return t.label||!t.identifier?t.label||"":Bc(t.identifier)}function Tx(t){if(!t._compiled){const r=(t.atBreak?"[\\r\\n][\\t ]*":"")+(t.before?"(?:"+t.before+")":"");t._compiled=new RegExp((r?"("+r+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(t.character)?"\\":"")+t.character+(t.after?"(?:"+t.after+")":""),"g")}return t._compiled}function Ax(t,r,n){const o=r.indexStack,a=t.children||[],u=[];let l=-1,c=n.before,f;o.push(-1);let d=r.createTracker(n);for(;++l<a.length;){const p=a[l];let g;if(o[o.length-1]=l,l+1<a.length){let E=r.handle.handlers[a[l+1].type];E&&E.peek&&(E=E.peek),g=E?E(a[l+1],t,r,{before:"",after:"",...d.current()}).charAt(0):""}else g=n.after;u.length>0&&(c==="\r"||c===`
`)&&p.type==="html"&&(u[u.length-1]=u[u.length-1].replace(/(\r?\n|\r)$/," "),c=" ",d=r.createTracker(n),d.move(u.join("")));let b=r.handle(p,t,r,{...d.current(),after:g,before:c});f&&f===b.slice(0,1)&&(b=An(f.charCodeAt(0))+b.slice(1));const y=r.attentionEncodeSurroundingInfo;r.attentionEncodeSurroundingInfo=void 0,f=void 0,y&&(u.length>0&&y.before&&c===u[u.length-1].slice(-1)&&(u[u.length-1]=u[u.length-1].slice(0,-1)+An(c.charCodeAt(0))),y.after&&(f=g)),d.move(b),u.push(b),c=b.slice(-1)}return o.pop(),u.join("")}function Px(t,r,n){const o=r.indexStack,a=t.children||[],u=r.createTracker(n),l=[];let c=-1;for(o.push(-1);++c<a.length;){const f=a[c];o[o.length-1]=c,l.push(u.move(r.handle(f,t,r,{before:`
`,after:`
`,...u.current()}))),f.type!=="list"&&(r.bulletLastUsed=void 0),c<a.length-1&&l.push(u.move(Ox(f,a[c+1],t,r)))}return o.pop(),l.join("")}function Ox(t,r,n,o){let a=o.join.length;for(;a--;){const u=o.join[a](t,r,n,o);if(u===!0||u===1)break;if(typeof u=="number")return`
`.repeat(1+u);if(u===!1)return`

<!---->

`}return`

`}const Mx=/\r?\n|\r/g;function Dx(t,r){const n=[];let o=0,a=0,u;for(;u=Mx.exec(t);)l(t.slice(o,u.index)),n.push(u[0]),o=u.index+u[0].length,a++;return l(t.slice(o)),n.join("");function l(c){n.push(r(c,a,!c))}}function Fx(t,r,n){const o=(n.before||"")+(r||"")+(n.after||""),a=[],u=[],l={};let c=-1;for(;++c<t.unsafe.length;){const p=t.unsafe[c];if(!Yc(t.stack,p))continue;const g=t.compilePattern(p);let b;for(;b=g.exec(o);){const y="before"in p||!!p.atBreak,E="after"in p,P=b.index+(y?b[1].length:0);a.includes(P)?(l[P].before&&!y&&(l[P].before=!1),l[P].after&&!E&&(l[P].after=!1)):(a.push(P),l[P]={before:y,after:E})}}a.sort(Rx);let f=n.before?n.before.length:0;const d=o.length-(n.after?n.after.length:0);for(c=-1;++c<a.length;){const p=a[c];p<f||p>=d||p+1<d&&a[c+1]===p+1&&l[p].after&&!l[p+1].before&&!l[p+1].after||a[c-1]===p-1&&l[p].before&&!l[p-1].before&&!l[p-1].after||(f!==p&&u.push(rc(o.slice(f,p),"\\")),f=p,/[!-/:-@[-`{-~]/.test(o.charAt(p))&&(!n.encode||!n.encode.includes(o.charAt(p)))?u.push("\\"):(u.push(An(o.charCodeAt(p))),f++))}return u.push(rc(o.slice(f,d),n.after)),u.join("")}function Rx(t,r){return t-r}function rc(t,r){const n=/\\(?=[!-/:-@[-`{-~])/g,o=[],a=[],u=t+r;let l=-1,c=0,f;for(;f=n.exec(u);)o.push(f.index);for(;++l<o.length;)c!==o[l]&&a.push(t.slice(c,o[l])),a.push("\\"),c=o[l];return a.push(t.slice(c)),a.join("")}function Lx(t){const r=t||{},n=r.now||{};let o=r.lineShift||0,a=n.line||1,u=n.column||1;return{move:f,current:l,shift:c};function l(){return{now:{line:a,column:u},lineShift:o}}function c(d){o+=d}function f(d){const p=d||"",g=p.split(/\r?\n|\r/g),b=g[g.length-1];return a+=g.length-1,u=g.length===1?u+b.length:1+b.length+o,p}}function Bx(t,r){const n=r||{},o={associationId:Ex,containerPhrasing:zx,containerFlow:qx,createTracker:Lx,compilePattern:Tx,enter:u,handlers:{...kx},handle:void 0,indentLines:Dx,indexStack:[],join:[...Sx],options:{},safe:Hx,stack:[],unsafe:[...Cx]};Hc(o,n),o.options.tightDefinitions&&o.join.push(Wx),o.handle=Uv("type",{invalid:$x,unknown:Nx,handlers:o.handlers});let a=o.handle(t,void 0,o,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return a&&a.charCodeAt(a.length-1)!==10&&a.charCodeAt(a.length-1)!==13&&(a+=`
`),a;function u(l){return o.stack.push(l),c;function c(){o.stack.pop()}}}function $x(t){throw new Error("Cannot handle value `"+t+"`, expected node")}function Nx(t){const r=t;throw new Error("Cannot handle unknown node `"+r.type+"`")}function Wx(t,r){if(t.type==="definition"&&t.type===r.type)return 0}function zx(t,r){return Ax(t,this,r)}function qx(t,r){return Px(t,this,r)}function Hx(t,r){return Fx(this,t,r)}function Yx(t){const r=this;r.compiler=n;function n(o){return Bx(o,{...r.data("settings"),...t,extensions:r.data("toMarkdownExtensions")||[]})}}const ue={text:"text",boolean:"boolean",multicheckbox:"multicheckbox",richText:"richText",number:"number"};class Ux{constructor(){this.logger=Xt(Jt.InputCreator)}createInput(r){const{componentId:n,inputId:o,type:a}=r;let u="";try{switch(a){case ue.text:case ue.richText:{u=`> ${r.defaultValue??""}`;break}case ue.boolean:{const l=r.defaultValue===!0?"x":" ",c=r.label??"Checkbox";u=`- [${l}] ${c}`;break}case ue.multicheckbox:{const l=r.options??[];if(!l.length)throw this.logger.error("multicheckbox must have non-empty options array",{opts:r}),new Error("multicheckbox must have non-empty options array");u=l.map(c=>`- [ ] ${La.hiddenValue(n,o,c.value)} ${c.label}`).join(`
`);break}case ue.number:{u=`> {Number} ${r.defaultValue??""}`;break}default:throw this.logger.error(`Unknown input type: ${a}`,{opts:r}),new Error("Unknown input type: "+a)}}catch(l){throw this.logger.error("Failed to create input",{error:l,opts:r}),l}return La.input.wrap({componentId:n,inputId:o,content:u,inputType:a})}parseMarkdown(r){try{return Oa().use(Wc).parse(r)}catch(n){throw this.logger.error("Failed to parse Markdown",{error:n,md:r}),n}}stringifyMarkdown(r){try{return Oa().use(Yx).stringify(r)}catch(n){throw this.logger.error("Failed to stringify Markdown",{error:n,ast:r}),n}}}const Tn=new Ux,pe={Day:"day",Week:"week",Month:"month",Quarter:"quarter",Year:"year",Decade:"decade"};class Gx{async shouldShowInput(r,n=Vn.ALMOST_DAILY){const{id:o,schedule:a}=r;return a?!(a.active===!1||!this.isWithinTimeBoundaries(a)||!await this.checkDependencies(a,n)||a.condition&&!a.condition()||!this.shouldShowBasedOnPeriodicity(a)||a.target&&!a.target.keepShowing&&await this.isTargetMet(o,a,n)||a.limit&&await this.isLimitReached(o,a,n)):!0}async getInputProgress(r,n=Vn.ALMOST_DAILY){const{id:o,schedule:a}=r,u={};if(!a)return u;if(a.target){const l=this.getPeriodStartDate(a.target.per),c=await this.getCompletionCount(o,l,n);u.targetProgress={current:c,target:a.target.count,isComplete:c>=a.target.count}}if(a.limit){const l=this.getPeriodStartDate(a.limit.per),c=await this.getCompletionCount(o,l,n);u.limitProgress={current:c,limit:a.limit.max,percentage:c/a.limit.max*100}}return u}isWithinTimeBoundaries(r){const o=new Date().toISOString().split("T")[0];return!(r.startDate&&o<r.startDate||r.endDate&&o>r.endDate)}async checkDependencies(r,n){if(r.requiresCompleted&&r.requiresCompleted.length>0){const o=new Date().toISOString().split("T")[0];for(const a of r.requiresCompleted){const l=(await hn.getInputsById(n,a)).find(c=>c.reportDate===o);if(!l||l.value!==!0)return!1}}if(r.hideIfCompleted&&r.hideIfCompleted.length>0){const o=new Date().toISOString().split("T")[0];for(const a of r.hideIfCompleted){const l=(await hn.getInputsById(n,a)).find(c=>c.reportDate===o);if(l&&l.value===!0)return!1}}return!0}shouldShowBasedOnPeriodicity(r){const n=new Date;if(n.toISOString().split("T")[0],r.daysOfWeek&&r.daysOfWeek.length>0){const o=n.getDay();return r.daysOfWeek.map(u=>u===7?0:(u>=1&&u<=6,u)).includes(o)}if(r.datesOfMonth&&r.datesOfMonth.length>0){const o=n.getDate();return r.datesOfMonth.includes(o)}return r.showEvery?this.shouldShowBasedOnShowEvery(r.showEvery.count,r.showEvery.unit):!0}shouldShowBasedOnShowEvery(r,n){if(r===1)return!0;const o=new Date().toISOString().split("T")[0],a=this.getDayNumberFromEpoch(o);switch(n){case pe.Day:return a%r===0;case pe.Week:return Math.floor(a/7)%r===0;case pe.Month:return this.getMonthNumberFromEpoch(o)%r===0;case pe.Quarter:return this.getQuarterNumberFromEpoch(o)%r===0;case pe.Year:return this.getYearNumberFromEpoch(o)%r===0;default:return!0}}async isTargetMet(r,n,o){if(!n.target)return!1;const a=this.getPeriodStartDate(n.target.per);return await this.getCompletionCount(r,a,o)>=n.target.count}async isLimitReached(r,n,o){if(!n.limit)return!1;const a=this.getPeriodStartDate(n.limit.per);return await this.getCompletionCount(r,a,o)>=n.limit.max}async getCompletionCount(r,n,o){return(await hn.getInputsById(o,r)).filter(c=>c.reportDate&&c.reportDate>=n).filter(c=>c.value===!0).length}getPeriodStartDate(r){const n=new Date;switch(r.unit){case pe.Day:if(r.count===1)return n.toISOString().split("T")[0];const o=new Date(n);return o.setDate(n.getDate()-r.count),o.toISOString().split("T")[0];case pe.Week:if(r.count===1){const d=n.getDay(),p=new Date(n);return p.setDate(n.getDate()-(d===0?6:d-1)),p.toISOString().split("T")[0]}const a=new Date(n);return a.setDate(n.getDate()-r.count*7),a.toISOString().split("T")[0];case pe.Month:if(r.count===1)return`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-01`;const u=new Date(n);return u.setMonth(n.getMonth()-r.count),u.toISOString().split("T")[0];case pe.Quarter:if(r.count===1){const p=Math.floor(n.getMonth()/3)*3;return`${n.getFullYear()}-${String(p+1).padStart(2,"0")}-01`}const l=new Date(n);return l.setMonth(n.getMonth()-r.count*3),l.toISOString().split("T")[0];case pe.Year:if(r.count===1)return`${n.getFullYear()}-01-01`;const c=new Date(n);return c.setFullYear(n.getFullYear()-r.count),c.toISOString().split("T")[0];case pe.Decade:return`${Math.floor(n.getFullYear()/10)*10}-01-01`;default:return n.toISOString().split("T")[0]}}getDayNumberFromEpoch(r){const n=new Date("2020-01-01"),a=new Date(r).getTime()-n.getTime();return Math.floor(a/(1e3*60*60*24))}getMonthNumberFromEpoch(r){const n=new Date("2020-01-01"),o=new Date(r),a=o.getFullYear()-n.getFullYear(),u=o.getMonth()-n.getMonth();return a*12+u}getQuarterNumberFromEpoch(r){const n=this.getMonthNumberFromEpoch(r);return Math.floor(n/3)}getYearNumberFromEpoch(r){const n=new Date(r),o=new Date("2020-01-01");return n.getFullYear()-o.getFullYear()}}const Lr=new Gx;class st{constructor(r){this.content=[],this.logger=Xt(Jt.ComponentBuilder),this.componentSchedule=null,this.hasRenderedInputs=!1,this.componentId=r}_md(r){const n=typeof r=="function"?r():r;return this.content.push(n),this}_divider(){return this.content.push(`
***
`),this}_fancyTitle(r,n="âš›ï¸"){return r?this.content.push(`<center>${n} <strong>${r}</strong> ${n}</center>`):this.content.push("---"),this}_fancyDivider(r,n="âš›ï¸"){return this._fancyTitle(r,n)}_themedDivider(r,n){return this.content.push(`### ${n} ${r}`),this}_blockquoteDivider(r){return r?this.content.push(`> ${r}`):this.content.push("> ---"),this}_foldable(r,n="Guidance"){const a=r.split(`
`).map(l=>`> ${l}`),u=`> [!note]- ${n}
${a.join(`
`)}`;return this.content.push(u),this.content.push(""),this}schedule(r){return"schedule"in r&&r.schedule?this.componentSchedule=r.schedule:this.componentSchedule=r,this}async _input(r){if("id"in r&&"inputOptions"in r){const o=r;if(o.schedule&&!await Lr.shouldShowInput(o))return this;this.hasRenderedInputs=!0,o.inputOptions.type!==ue.boolean&&this._inputLabel(o.label,o.description);const a={...o.inputOptions,componentId:this.componentId};this.content.push(Tn.createInput(a)),o.inputOptions.type!==ue.boolean&&o.inputOptions.type!==ue.multicheckbox&&this.content.push("")}else{this.hasRenderedInputs=!0;const o={...r,componentId:this.componentId};this.content.push(Tn.createInput(o))}return this}_inputLabel(r,n){const o=n?`**${r}** ${n}`:`**${r}**`;return this.content.push(o),this}_text(r,n,o){const a=Tn.createInput({componentId:this.componentId,type:ue.text,inputId:r,defaultValue:n,placeholder:o});return this.content.push(a),this.content.push(""),this}_richText(r,n,o){this.content.push("<center>Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â·</center>");const a=Tn.createInput({componentId:this.componentId,type:ue.richText,inputId:r,defaultValue:n,placeholder:o});return this.content.push(a),this.content.push("<center>Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â·</center>"),this}_boolean(r,n,o){const a=Tn.createInput({componentId:this.componentId,type:ue.boolean,inputId:r,label:n,defaultValue:o});return this.content.push(a),this}_number(r,n){const o=Tn.createInput({componentId:this.componentId,type:ue.number,inputId:r,defaultValue:n});return this.content.push(o),this}_multiCheckbox(r,n,o,a){const u=Tn.createInput({componentId:this.componentId,type:ue.multicheckbox,inputId:r,options:n,defaultValue:o,collapsed:a});return this.content.push(u),this}_multiCheckboxSC(r,n,o,a){const u=Tn.createInput({componentId:this.componentId,type:ue.multicheckbox,inputId:r,options:n,singleChoice:!0,defaultValue:o,collapsed:a});return this.content.push(u),this}_nl(){return this.content.push(`
`),this}async render(){if(this.componentSchedule&&!await Lr.shouldShowInput({id:this.componentId,inputOptions:{inputId:this.componentId,type:ue.text},label:this.componentId,schedule:this.componentSchedule}))return this.logger.dev("Component hidden by explicit schedule",{componentId:this.componentId}),"";if(!this.hasRenderedInputs&&!this.componentSchedule)return this.logger.dev("Component hidden - no inputs rendered",{componentId:this.componentId}),"";const r=La.component.wrap(this.componentId,this.content.join(`
`));return this.logger.dev("Component rendered",{outputLength:r.length}),r}}async function Vx(){const t=new st("consistencyStats");try{const r=await hn.getReportInputs(Vn.ALMOST_DAILY);if(!r||r.length===0)return t._md("ğŸ“Š **Consistency Tracker** Â· ğŸ¯ Starting your journey today!"),t.render();const n=Array.from(new Set(r.map(y=>y.reportDate))).sort().reverse(),o=n[n.length-1],a=new Date(o),u=new Date,l=ny(u,a)+1,f=[{days:7,label:"7d"},{days:30,label:"30d"},{days:90,label:"90d"}].map(({days:y,label:E})=>{const P=Math.min(y,l),$=$i(nw(u,P-1),"yyyy-MM-dd"),D=n.filter(z=>z>=$).length,H=Math.round(D/P*100);return{label:E,reports:D,days:P,percentage:H,shouldShow:P>=Math.min(y,7)}}),d=n.length,p=Math.round(d/l*100),g=[];for(const y of f){if(!y.shouldShow)continue;const E=y.percentage>=80?"ğŸ‰":y.percentage>=60?"âœ…":y.percentage>=40?"ğŸ“ˆ":"ğŸŒ±";g.push(`${E} ${y.label}: ${y.reports}/${y.days} (${y.percentage}%)`)}const b=p>=80?"ğŸ†":p>=60?"â­":"ğŸ¯";g.push(`${b} All: ${d}/${l} (${p}%)`),t._md(`ğŸ“Š **Consistency Tracker** Â· ${g.join(" Â· ")}`)}catch(r){console.error("Consistency stats error:",r),t._md("ğŸ“Š **Consistency Tracker** Â· Starting fresh!")}return t.render()}const Qx=t=>({...t,inputOptions:{inputId:t.id,type:ue.boolean,label:t.label}}),jx=[{id:"dayPlanning",label:"Planning my day",cue:"After breakfast",reward:"More productive and organized day",schedule:{target:{count:1,per:{count:1,unit:pe.Day}}}},{id:"exercise",label:"Exercise",cue:"Any suitable time during the day",reward:"Better health, more energy, and improved mood",schedule:{target:{count:5,per:{count:1,unit:pe.Week},keepShowing:!0}}},{id:"morningWarmUp",label:"Morning Physical Warm-Up",cue:"After waking up",reward:"Increased energy and readiness for the day",schedule:{target:{count:1,per:{count:1,unit:pe.Day}}}},{id:"recreation",label:"Having fun",cue:"In the evening or during free time",reward:"Relaxation, joy, and stress relief",schedule:{target:{count:1,per:{count:1,unit:pe.Day}}}},{id:"selfPleasure",label:"FPF",cue:"At free from work personal time",reward:"Better focus and increasing ability to feel joy",schedule:{target:{count:7,per:{count:10,unit:pe.Day}}}},{id:"poetryEngaging",label:"Spend time with poetry",cue:"At leisure time",reward:"Happiness and healthy feelings expression from engaging with poetry",schedule:{daysOfWeek:[1,5,6,7],target:{count:3,per:{count:1,unit:pe.Month}}}},{id:"programmingLearning",label:"Programming study",cue:"Dedicated learning time",reward:"Skill development, career growth, and problem-solving mastery",schedule:{target:{count:3,per:{count:1,unit:pe.Week}}}},{id:"recreationalCannabis",label:"Getting high",cue:"Day off (if next day is also day off, then) in safe calm well prepared environment and mood",reward:"Self-care routine, relaxation, stress relief",schedule:{target:{count:1,per:{count:1,unit:pe.Week}},daysOfWeek:[5,6,7],limit:{max:20,per:{count:6,unit:pe.Month}}}},{id:"fastMorningEveningRoutine",label:"Complete morning & evening routine efficiently",cue:"During morning (breakfast, hygiene) and evening (cleaning teeth, preparing for bed) routines",reward:"Save up to 1 hour daily, more productive day, less stress"},{id:"phoneDetox",label:"No phone for 3 hours",cue:"During focused work or leisure time",reward:"Better focus, reduced distractions, mental clarity, reclaimed time",schedule:{target:{count:3,per:{count:1,unit:pe.Week},keepShowing:!0}}}],Kx=jx.map(Qx),Xx=[{label:"3 - Great",value:"3"},{label:"2 - Adequate",value:"2"},{label:"1 - Struggling",value:"1"}],Jx=t=>({...t,inputOptions:{inputId:t.id,type:ue.multicheckbox,options:Xx,singleChoice:!0}}),Zx=[{id:"positiveEmotions",label:"Positive Emotions",description:"Feelings of joy, gratitude, contentment, hope, and pleasure. Includes savoring the moment, reflecting on past positives, and hopeful anticipation of the future."},{id:"engagement",label:"Engagement",description:"Deep involvement in activities; being absorbed, losing sense of time (â€˜flowâ€™). Doing work or hobbies that challenge your skills just enough that youâ€™re fully present."},{id:"relationships",label:"Relationships",description:"Supportive, meaningful social connections. Feeling loved, valued, belonging; giving and receiving support. Close friendships, family bonds, community ties.",schedule:{showEvery:{count:2,unit:pe.Day}}},{id:"meaning",label:"Meaning",description:"Having a sense of purpose, belonging to something bigger than yourself. Knowing what matters in your life and using your strengths in service of values, causes or goals."},{id:"accomplishment",label:"Accomplishment",description:"Mastery, achievement, working toward goals. Sense of progress, competence, whether or not it brings immediate joyâ€”achieving things that matter to you."},{id:"sleepQuality",label:"Sleep Quality",description:"How well-rested you feel. Quality of sleep, sufficient hours, feeling refreshed upon waking. Sleep is foundational to physical and mental wellbeing."},{id:"embodiment",label:"Embodiment",description:"Body acceptance and feeling at home in your body. Being present in your physical self, body image, self-compassion toward your body, feeling connected rather than disconnected from your physical form.",schedule:{showEvery:{count:3,unit:pe.Day}}},{id:"physicalPleasure",label:"Physical Pleasure",description:"Sensory experiences and bodily comfort. Enjoying food, warmth, movement, relaxation. The simple joys of physical existenceâ€”a hot shower, soft blanket, delicious meal, or stretching your body.",schedule:{showEvery:{count:2,unit:pe.Day}}},{id:"touchAndIntimacy",label:"Touch & Intimacy",description:"Physical affection, connection, and love. Hugs, cuddles, holding hands, sexual intimacy. The warmth and safety of physical closeness with loved ones. Human touch is a fundamental need.",schedule:{showEvery:{count:3,unit:pe.Day}}},{id:"physicalCondition",label:"Physical Condition",description:"Your bodily health: exercise, energy levels and how physically capable you feel. General fitness and vitality."},{id:"nutrition",label:"Nutrition",description:"Quality of your food choices and eating patterns. Nourishing your body with balanced meals, adequate hydration, and mindful eating. Good nutrition fuels energy, mood, and long-term health."},{id:"mindset",label:"Mindset",description:"Cultivating optimism, resilience, self-efficacy, and a growth mindset. A positive mindset shapes how you interpret setbacks, sustain motivation, and approach challenges."},{id:"environment",label:"Environment",description:"Living and working in spaces that feel safe, comfortable, and supportive of wellbeing. Includes access to nature, orderliness, and resources that help you thrive.",schedule:{showEvery:{count:3,unit:pe.Day}}},{id:"economicSecurity",label:"Economic Security",description:"Having financial stability, freedom from chronic money stress, and satisfaction with work. Economic security supports autonomy and reduces background stress that erodes wellbeing.",schedule:{showEvery:{count:10,unit:pe.Day}}}],$a=Zx.map(Jx),e_=t=>({...t,inputOptions:{inputId:t.id,type:ue.boolean,label:t.label}}),t_=[{id:"dichotomy_of_control_practice",label:"Stoic Practice. The Dichotomy of Control",category:"stoic",component:"morningReflection",description:"Epictetus' core practice and foundational Stoic exercise that eliminates suffering by training you to focus only on what you can control",guide:`**The Core Principle:**
The Stoics discovered that **all suffering comes from desiring things outside your control**. When you stop struggling against the unchangeable and channel your energy into what you CAN control, you gain peace of mind.

**âœ… COMPLETELY IN YOUR CONTROL:**
- Your judgments, opinions, and interpretations
- Your responses and reactions to events
- Your character, virtues, and values
- Your effort, attention, and choices
- How you treat others
- What you pursue and avoid

**âŒ OUTSIDE YOUR CONTROL:**
- Other people's opinions, actions, and judgments
- Outcomes, results, and consequences
- Past events and future circumstances
- Your reputation and what others think
- External events (weather, traffic, delays)
- Natural processes (aging, sickness, death)

**How to Practice:**
When faced with any situation today, ask yourself: "Is this within my control?" If yes, take action. If no, accept it and focus on your response instead.

_"Make the best use of what is in your power, and take the rest as it happens."_ â€” Epictetus`},{id:"obstacle_is_way_practice",label:"Stoic Practice. The Obstacle Is The Way",category:"stoic",component:"morningReflection",description:"Marcus Aurelius' teaching: obstacles contain hidden opportunities for growth",guide:`**The Core Principle:**
Marcus Aurelius taught: **"The impediment to action advances action. What stands in the way becomes the way."**

This means every obstacle contains hidden opportunity:
- **Blocked plan?** â†’ Forces you to become more creative and resourceful
- **Frustrating person?** â†’ Opportunity to practice patience and understanding
- **Failure?** â†’ Valuable data for learning and improvement
- **Delay?** â†’ Gift of time to prepare better or rest

**The Reframe:**
Stop seeing obstacles as enemies. Start seeing them as **training equipment** for your character. Each challenge makes you stronger, wiser, more resilient.

**How to Practice:**
When you face a setback today, ask: "What opportunity is hidden in this obstacle? How is this making me better?"

_"The obstacle is not blocking your path â€“ it IS your path. It's revealing where you need to grow."_ â€” Ryan Holiday`}],n_=t_.map(e_),r_=t=>{let r={id:t.inputOptions.inputId,...t,description:t.description||""};return t.inputOptions.type===ue.boolean&&(r.inputOptions.label=t.label),r},i_=[{label:"What Matters Most (Memento Mori)",inputOptions:{inputId:"memento_mori_focus",type:ue.text},description:"You will die. Your days are numbered. What truly matters? Which pillar deserves your limited time?"},{inputOptions:{inputId:"priority_plan",type:ue.text},label:"My #1 Task Today",description:"ONE concrete action serving what matters. When & where will I do it? What's my first 2-minute step?"},{inputOptions:{inputId:"tomorrow_priority",type:ue.text},label:"Tomorrow's #1 Priority"},{inputOptions:{inputId:"message_for_tomorrow",type:ue.richText},label:"Message for Tomorrow",description:"Short and meaningful message for your future self"},{inputOptions:{inputId:"plan_next_day",type:ue.boolean},label:"Plan next day",description:"Calendar events, tasks, notifications"},{inputOptions:{inputId:"accomplishments",type:ue.text},label:"My Win Today",description:"What was my proudest accomplishment? What effort/virtue made it possible?"},{inputOptions:{inputId:"obstacles",type:ue.text},label:"My Obstacle & Learning",description:"What happened? How did I respond? What did I learn? How will I use this?"},{inputOptions:{inputId:"if_then_plan",type:ue.text},label:"My Implementation Intention",description:"If this happens again, I will... (If [OBSTACLE], then I will [RESPONSE])"},{inputOptions:{inputId:"gratitudes",type:ue.richText,placeholder:" 1. "},label:"Three Good Things",description:"*What good happened? Why was it good? What was your role?*"},{inputOptions:{inputId:"main_distraction",type:ue.text},label:"What distracted me most today?",schedule:{showEvery:{count:2,unit:pe.Day}}},{inputOptions:{inputId:"flow_moments",type:ue.text},label:"What helped me focus?",description:"(Environment, time, task type)",schedule:{showEvery:{count:2,unit:pe.Day}}},{inputOptions:{inputId:"willpower_challenge",type:ue.text},label:"What was my biggest temptation/willpower challenge?",schedule:{showEvery:{count:2,unit:pe.Day}}},{inputOptions:{inputId:"strongest_emotion",type:ue.text},label:"What was my strongest emotion today?"},{inputOptions:{inputId:"emotion_trigger",type:ue.text},label:"What triggered it?",description:"Situation, person, thought"},{inputOptions:{inputId:"emotion_response",type:ue.text},label:"How did I respond?"},{inputOptions:{inputId:"better_emotion_response",type:ue.text},label:"What response would I choose next time?"},{inputOptions:{inputId:"negative_visualization_done",type:ue.boolean},label:"I practiced Negative Visualization",description:"5 min reflection on what I could lose",schedule:{daysOfWeek:[1,3,5]}},{inputOptions:{inputId:"voluntary_discomfort_practice",type:ue.multicheckbox,options:[{label:"Cold shower (30-60 sec)",value:"cold_shower"},{label:"Less heat/AC than comfortable",value:"less_climate_control"},{label:"Skip stimulants (coffee, guarana, etc.)",value:"skip_stimulants"}],singleChoice:!0},label:"Today's Voluntary Discomfort",description:"Choose ONE small discomfort to practice today",schedule:{daysOfWeek:[1,3,5]}},{inputOptions:{inputId:"mindful_pause_taken",type:ue.boolean},label:"I have taken a mindful pause",schedule:{daysOfWeek:[1,3,5]}}],o_=i_.map(r_),Ne=o_.reduce((t,r)=>({...t,[String(r.id)]:r}),{});async function a_(){const t="morningReflection",r=new st(t);return r._md("## ğŸ§˜ Morning Reflection (â­ RECOMMENDED)"),n_.filter(n=>n.component===t).forEach(n=>{r._foldable(n.guide,n.label),r._input(n.inputOptions)}),r.render()}async function s_(){const t="negativeVisualization",r=new st(t);return r._md("## ğŸª Negative Visualization (ğŸ’¡ OPTIONAL - 2 min)"),r._foldable(`**Praemeditatio Malorum** â€” Ancient Stoic gratitude practice

This is NOT pessimism. This is **appreciation training** that the Stoics practiced daily.

**The Problem** â€” we take everything for granted. Your health, your home, your loved ones â€” you stop seeing them. Hedonic adaptation makes you numb to your blessings.

**The Solution** â€” briefly imagine losing what you value. When you mentally "lose" something, you suddenly SEE it again with fresh eyes.

**What this practice does:**
- **Breaks hedonic adaptation** â€” stop taking good things for granted
- **Generates genuine gratitude** â€” feel appreciation, not just think it  
- **Prepares you mentally** â€” if loss happens, the shock is less severe
- **Increases present joy** â€” savor what you have RIGHT NOW

**How to practice:**
1. Close your eyes for 10-20 seconds
2. Vividly imagine ONE thing you value being gone (person, health, home, ability)
3. Feel the loss â€” let it be uncomfortable for a moment
4. Open your eyes and appreciate that you STILL HAVE IT

This isn't dwelling on loss. It's a quick mental exercise to restore wonder.

_"He robs present ills of their power who has perceived their coming beforehand."_ â€” Seneca`,"Stoic Gratitude Practice"),r._md("**Practice Steps:**"),r._md("1. **Close your eyes** â€” take a slow breath"),r._md("2. **Imagine the loss** â€” picture losing someone/something you love (10 seconds)"),r._md("3. **Feel it** â€” don't rush past the discomfort"),r._md("4. **Open your eyes** â€” look around. You still have them. Feel that relief."),await r._input(Ne.negative_visualization_done),r.render()}async function u_(){const t="priorityPlanning",r=new st(t);return r._md("## ğŸ¯ Priority Planning (ğŸ“Œ CORE - 3-5 min)"),r._foldable(`**Start with Death, Plan with Clarity**

**Memento Mori** (from Stoicism) â€” "Remember you will die." This isn't morbidâ€”it's the ultimate focusing tool. When you remember death, trivialities fade and what truly matters becomes crystal clear.

**The Four Pillars of Life:**
1. **Happiness & Peace of Mind** â€” inner tranquility and joy
2. **Body & Health** â€” physical wellbeing and vitality  
3. **People & Relationships** â€” love, connection, community
4. **Meaningful Work** â€” contributing something valuable

_"You could leave life right now. Let that determine what you do and say and think."_ â€” Marcus Aurelius

**Implementation Intentions** (from Atomic Habits) â€” being specific doubles success rates:
"I will [BEHAVIOR] at [TIME] in [LOCATION]."

**The Process:**
1. Remember death â†’ What pillar needs attention?
2. Choose ONE priority that serves that pillar
3. Make a specific plan with when/where
4. Prepare for obstacles`,"Memento Mori + Implementation Intentions"),await r._input(Ne.memento_mori_focus),await r._input(Ne.priority_plan),r.render()}async function l_(){const t="voluntaryDiscomfort",r=new st(t);return r._md("## ğŸ§Š Voluntary Discomfort (ğŸ’¡ OPTIONAL - 2 min)"),r._foldable(`**Practicing Poverty** â€” Seneca's resilience training

The Stoics deliberately practiced small discomforts. Not to punish themselves, but to build mental strength and appreciation.

**The Problem** â€” modern life is TOO comfortable. We become weak, dependent on luxuries, and terrified of any discomfort. When hardship comes, we collapse.

**The Stoic Solution** â€” regularly choose small, voluntary discomforts. This trains your mind that discomfort is survivableâ€”even beneficial.

**What this practice does:**
1. **Builds resilience** â€” when real hardship comes, you're prepared
2. **Breaks hedonic adaptation** â€” you stop taking comfort for granted
3. **Strengthens willpower** â€” you prove you can control urges  
4. **Increases appreciation** â€” comfort feels AMAZING after voluntary discomfort
5. **Reduces fear** â€” you learn: "Discomfort won't kill me. I'm stronger than I thought."

**The Science** â€” your brain predicts suffering based on past experience. If you've never been uncomfortable, small discomforts feel catastrophic. If you practice discomfort, your brain learns: "This is manageable."

**How to practice:**
Choose ONE small discomfort today. Not as punishment â€” as TRAINING.
- Physical: cold shower, skip a meal, exercise when tired
- Social: have the difficult conversation, say no to someone
- Habitual: skip coffee, no phone for 2 hours, sit in silence

**Key** â€” the discomfort should be VOLUNTARY and MILD. You're training, not torturing.

_"We suffer more often in imagination than in reality."_ â€” Seneca
_"Set aside a certain number of days to be content with little and practice poverty."_ â€” Seneca`,"Stoic Resilience Training"),await r._input(Ne.voluntary_discomfort_practice),r.render()}function nf(t){if(t.length===0)return 0;var r=t[0],n=0,o;if(typeof r!="number")return Number.NaN;for(var a=1;a<t.length;a++){if(typeof t[a]!="number")return Number.NaN;o=r+t[a],Math.abs(r)>=Math.abs(t[a])?n+=r-o+t[a]:n+=t[a]-o+r,r=o}return r+n}function rf(t){if(t.length===0)throw new Error("mean requires at least one data point");return nf(t)/t.length}function c_(t,r){var n=rf(t),o=0,a,u;for(u=0;u<t.length;u++)a=t[u]-n,o+=a*a;return o}function of(t){if(t.length===0)throw new Error("variance requires at least one data point");return c_(t)/t.length}function f_(t){if(t.length===1)return 0;var r=of(t);return Math.sqrt(r)}function h_(t){if(t.length===0)throw new Error("mode requires at least one data point");if(t.length===1)return t[0];for(var r=t[0],n=Number.NaN,o=0,a=1,u=1;u<t.length+1;u++)t[u]!==r?(a>o&&(o=a,n=r),a=1,r=t[u]):a++;return n}function d_(t){return t.slice().sort(function(r,n){return r-n})}function p_(t){return h_(d_(t))}function ic(t){if(t.length===0)throw new Error("min requires at least one data point");for(var r=t[0],n=1;n<t.length;n++)t[n]<r&&(r=t[n]);return r}function oc(t){if(t.length===0)throw new Error("max requires at least one data point");for(var r=t[0],n=1;n<t.length;n++)t[n]>r&&(r=t[n]);return r}function ac(t,r){var n=t.length*r;if(t.length===0)throw new Error("quantile requires at least one data point.");if(r<0||r>1)throw new Error("quantiles must be between 0 and 1");return r===1?t[t.length-1]:r===0?t[0]:n%1!==0?t[Math.ceil(n)-1]:t.length%2===0?(t[n-1]+t[n])/2:t[n]}function Ri(t,r,n,o){for(n=n||0,o=o||t.length-1;o>n;){if(o-n>600){var a=o-n+1,u=r-n+1,l=Math.log(a),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(a-c)/a);u-a/2<0&&(f*=-1);var d=Math.max(n,Math.floor(r-u*c/a+f)),p=Math.min(o,Math.floor(r+(a-u)*c/a+f));Ri(t,r,d,p)}var g=t[r],b=n,y=o;for(Pr(t,n,r),t[o]>g&&Pr(t,n,o);b<y;){for(Pr(t,b,y),b++,y--;t[b]<g;)b++;for(;t[y]>g;)y--}t[n]===g?Pr(t,n,y):(y++,Pr(t,y,o)),y<=r&&(n=y+1),r<=y&&(o=y-1)}}function Pr(t,r,n){var o=t[r];t[r]=t[n],t[n]=o}function Na(t,r){var n=t.slice();if(Array.isArray(r)){g_(n,r);for(var o=[],a=0;a<r.length;a++)o[a]=ac(n,r[a]);return o}else{var u=sf(n.length,r);return af(n,u,0,n.length-1),ac(n,r)}}function af(t,r,n,o){r%1===0?Ri(t,r,n,o):(r=Math.floor(r),Ri(t,r,n,o),Ri(t,r+1,r+1,o))}function g_(t,r){for(var n=[0],o=0;o<r.length;o++)n.push(sf(t.length,r[o]));n.push(t.length-1),n.sort(m_);for(var a=[0,n.length-1];a.length;){var u=Math.ceil(a.pop()),l=Math.floor(a.pop());if(!(u-l<=1)){var c=Math.floor((l+u)/2);af(t,n[c],Math.floor(n[l]),Math.ceil(n[u])),a.push(l,c,c,u)}}}function m_(t,r){return t-r}function sf(t,r){var n=t*r;return r===1?t-1:r===0?0:n%1!==0?Math.ceil(n)-1:t%2===0?n-.5:n}function y_(t){return+Na(t,.5)}var ba={},sc;function w_(){return sc||(sc=1,(function(t){(function(r){r.black="\x1B[30m",r.red="\x1B[31m",r.green="\x1B[32m",r.yellow="\x1B[33m",r.blue="\x1B[34m",r.magenta="\x1B[35m",r.cyan="\x1B[36m",r.lightgray="\x1B[37m",r.default="\x1B[39m",r.darkgray="\x1B[90m",r.lightred="\x1B[91m",r.lightgreen="\x1B[92m",r.lightyellow="\x1B[93m",r.lightblue="\x1B[94m",r.lightmagenta="\x1B[95m",r.lightcyan="\x1B[96m",r.white="\x1B[97m",r.reset="\x1B[0m";function n(o,a){return a===void 0?o:a+o+r.reset}r.colored=n,r.plot=function(o,a=void 0){typeof o[0]=="number"&&(o=[o]),a=typeof a<"u"?a:{};let u=typeof a.min<"u"?a.min:o[0][0],l=typeof a.max<"u"?a.max:o[0][0];for(let F=0;F<o.length;F++)for(let T=0;T<o[F].length;T++)u=Math.min(u,o[F][T]),l=Math.max(l,o[F][T]);let c=["â”¼","â”¤","â•¶","â•´","â”€","â•°","â•­","â•®","â•¯","â”‚"],f=Math.abs(l-u),d=typeof a.offset<"u"?a.offset:3,p=typeof a.padding<"u"?a.padding:"           ",g=typeof a.height<"u"?a.height:f,b=typeof a.colors<"u"?a.colors:[],y=f!==0?g/f:1,E=Math.round(u*y),P=Math.round(l*y),$=Math.abs(P-E),D=0;for(let F=0;F<o.length;F++)D=Math.max(D,o[F].length);D=D+d;let H=typeof a.symbols<"u"?a.symbols:c,z=typeof a.format<"u"?a.format:function(F){return(p+F.toFixed(2)).slice(-p.length)},W=new Array($+1);for(let F=0;F<=$;F++){W[F]=new Array(D);for(let T=0;T<D;T++)W[F][T]=" "}for(let F=E;F<=P;++F){let T=z($>0?l-(F-E)*f/$:F,F-E);W[F-E][Math.max(d-T.length,0)]=T,W[F-E][d-1]=F==0?H[0]:H[1]}for(let F=0;F<o.length;F++){let T=b[F%b.length],U=Math.round(o[F][0]*y)-E;W[$-U][d-1]=n(H[0],T);for(let Q=0;Q<o[F].length-1;Q++){let ee=Math.round(o[F][Q+0]*y)-E,de=Math.round(o[F][Q+1]*y)-E;if(ee==de)W[$-ee][Q+d]=n(H[4],T);else{W[$-de][Q+d]=n(ee>de?H[5]:H[6],T),W[$-ee][Q+d]=n(ee>de?H[7]:H[8],T);let j=Math.min(ee,de),V=Math.max(ee,de);for(let we=j+1;we<V;we++)W[$-we][Q+d]=n(H[9],T)}}}return W.map(function(F){return F.join("")}).join(`
`)}})(t)})(ba)),ba}var b_=w_(),Li={exports:{}},va,uc;function v_(){return uc||(uc=1,va={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),va}var xa,lc;function uf(){if(lc)return xa;lc=1;const t=v_(),r={};for(const a of Object.keys(t))r[t[a]]=a;const n={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};xa=n;for(const a of Object.keys(n)){if(!("channels"in n[a]))throw new Error("missing channels property: "+a);if(!("labels"in n[a]))throw new Error("missing channel labels property: "+a);if(n[a].labels.length!==n[a].channels)throw new Error("channel and label counts mismatch: "+a);const{channels:u,labels:l}=n[a];delete n[a].channels,delete n[a].labels,Object.defineProperty(n[a],"channels",{value:u}),Object.defineProperty(n[a],"labels",{value:l})}n.rgb.hsl=function(a){const u=a[0]/255,l=a[1]/255,c=a[2]/255,f=Math.min(u,l,c),d=Math.max(u,l,c),p=d-f;let g,b;d===f?g=0:u===d?g=(l-c)/p:l===d?g=2+(c-u)/p:c===d&&(g=4+(u-l)/p),g=Math.min(g*60,360),g<0&&(g+=360);const y=(f+d)/2;return d===f?b=0:y<=.5?b=p/(d+f):b=p/(2-d-f),[g,b*100,y*100]},n.rgb.hsv=function(a){let u,l,c,f,d;const p=a[0]/255,g=a[1]/255,b=a[2]/255,y=Math.max(p,g,b),E=y-Math.min(p,g,b),P=function($){return(y-$)/6/E+1/2};return E===0?(f=0,d=0):(d=E/y,u=P(p),l=P(g),c=P(b),p===y?f=c-l:g===y?f=1/3+u-c:b===y&&(f=2/3+l-u),f<0?f+=1:f>1&&(f-=1)),[f*360,d*100,y*100]},n.rgb.hwb=function(a){const u=a[0],l=a[1];let c=a[2];const f=n.rgb.hsl(a)[0],d=1/255*Math.min(u,Math.min(l,c));return c=1-1/255*Math.max(u,Math.max(l,c)),[f,d*100,c*100]},n.rgb.cmyk=function(a){const u=a[0]/255,l=a[1]/255,c=a[2]/255,f=Math.min(1-u,1-l,1-c),d=(1-u-f)/(1-f)||0,p=(1-l-f)/(1-f)||0,g=(1-c-f)/(1-f)||0;return[d*100,p*100,g*100,f*100]};function o(a,u){return(a[0]-u[0])**2+(a[1]-u[1])**2+(a[2]-u[2])**2}return n.rgb.keyword=function(a){const u=r[a];if(u)return u;let l=1/0,c;for(const f of Object.keys(t)){const d=t[f],p=o(a,d);p<l&&(l=p,c=f)}return c},n.keyword.rgb=function(a){return t[a]},n.rgb.xyz=function(a){let u=a[0]/255,l=a[1]/255,c=a[2]/255;u=u>.04045?((u+.055)/1.055)**2.4:u/12.92,l=l>.04045?((l+.055)/1.055)**2.4:l/12.92,c=c>.04045?((c+.055)/1.055)**2.4:c/12.92;const f=u*.4124+l*.3576+c*.1805,d=u*.2126+l*.7152+c*.0722,p=u*.0193+l*.1192+c*.9505;return[f*100,d*100,p*100]},n.rgb.lab=function(a){const u=n.rgb.xyz(a);let l=u[0],c=u[1],f=u[2];l/=95.047,c/=100,f/=108.883,l=l>.008856?l**(1/3):7.787*l+16/116,c=c>.008856?c**(1/3):7.787*c+16/116,f=f>.008856?f**(1/3):7.787*f+16/116;const d=116*c-16,p=500*(l-c),g=200*(c-f);return[d,p,g]},n.hsl.rgb=function(a){const u=a[0]/360,l=a[1]/100,c=a[2]/100;let f,d,p;if(l===0)return p=c*255,[p,p,p];c<.5?f=c*(1+l):f=c+l-c*l;const g=2*c-f,b=[0,0,0];for(let y=0;y<3;y++)d=u+1/3*-(y-1),d<0&&d++,d>1&&d--,6*d<1?p=g+(f-g)*6*d:2*d<1?p=f:3*d<2?p=g+(f-g)*(2/3-d)*6:p=g,b[y]=p*255;return b},n.hsl.hsv=function(a){const u=a[0];let l=a[1]/100,c=a[2]/100,f=l;const d=Math.max(c,.01);c*=2,l*=c<=1?c:2-c,f*=d<=1?d:2-d;const p=(c+l)/2,g=c===0?2*f/(d+f):2*l/(c+l);return[u,g*100,p*100]},n.hsv.rgb=function(a){const u=a[0]/60,l=a[1]/100;let c=a[2]/100;const f=Math.floor(u)%6,d=u-Math.floor(u),p=255*c*(1-l),g=255*c*(1-l*d),b=255*c*(1-l*(1-d));switch(c*=255,f){case 0:return[c,b,p];case 1:return[g,c,p];case 2:return[p,c,b];case 3:return[p,g,c];case 4:return[b,p,c];case 5:return[c,p,g]}},n.hsv.hsl=function(a){const u=a[0],l=a[1]/100,c=a[2]/100,f=Math.max(c,.01);let d,p;p=(2-l)*c;const g=(2-l)*f;return d=l*f,d/=g<=1?g:2-g,d=d||0,p/=2,[u,d*100,p*100]},n.hwb.rgb=function(a){const u=a[0]/360;let l=a[1]/100,c=a[2]/100;const f=l+c;let d;f>1&&(l/=f,c/=f);const p=Math.floor(6*u),g=1-c;d=6*u-p,(p&1)!==0&&(d=1-d);const b=l+d*(g-l);let y,E,P;switch(p){default:case 6:case 0:y=g,E=b,P=l;break;case 1:y=b,E=g,P=l;break;case 2:y=l,E=g,P=b;break;case 3:y=l,E=b,P=g;break;case 4:y=b,E=l,P=g;break;case 5:y=g,E=l,P=b;break}return[y*255,E*255,P*255]},n.cmyk.rgb=function(a){const u=a[0]/100,l=a[1]/100,c=a[2]/100,f=a[3]/100,d=1-Math.min(1,u*(1-f)+f),p=1-Math.min(1,l*(1-f)+f),g=1-Math.min(1,c*(1-f)+f);return[d*255,p*255,g*255]},n.xyz.rgb=function(a){const u=a[0]/100,l=a[1]/100,c=a[2]/100;let f,d,p;return f=u*3.2406+l*-1.5372+c*-.4986,d=u*-.9689+l*1.8758+c*.0415,p=u*.0557+l*-.204+c*1.057,f=f>.0031308?1.055*f**(1/2.4)-.055:f*12.92,d=d>.0031308?1.055*d**(1/2.4)-.055:d*12.92,p=p>.0031308?1.055*p**(1/2.4)-.055:p*12.92,f=Math.min(Math.max(0,f),1),d=Math.min(Math.max(0,d),1),p=Math.min(Math.max(0,p),1),[f*255,d*255,p*255]},n.xyz.lab=function(a){let u=a[0],l=a[1],c=a[2];u/=95.047,l/=100,c/=108.883,u=u>.008856?u**(1/3):7.787*u+16/116,l=l>.008856?l**(1/3):7.787*l+16/116,c=c>.008856?c**(1/3):7.787*c+16/116;const f=116*l-16,d=500*(u-l),p=200*(l-c);return[f,d,p]},n.lab.xyz=function(a){const u=a[0],l=a[1],c=a[2];let f,d,p;d=(u+16)/116,f=l/500+d,p=d-c/200;const g=d**3,b=f**3,y=p**3;return d=g>.008856?g:(d-16/116)/7.787,f=b>.008856?b:(f-16/116)/7.787,p=y>.008856?y:(p-16/116)/7.787,f*=95.047,d*=100,p*=108.883,[f,d,p]},n.lab.lch=function(a){const u=a[0],l=a[1],c=a[2];let f;f=Math.atan2(c,l)*360/2/Math.PI,f<0&&(f+=360);const p=Math.sqrt(l*l+c*c);return[u,p,f]},n.lch.lab=function(a){const u=a[0],l=a[1],f=a[2]/360*2*Math.PI,d=l*Math.cos(f),p=l*Math.sin(f);return[u,d,p]},n.rgb.ansi16=function(a,u=null){const[l,c,f]=a;let d=u===null?n.rgb.hsv(a)[2]:u;if(d=Math.round(d/50),d===0)return 30;let p=30+(Math.round(f/255)<<2|Math.round(c/255)<<1|Math.round(l/255));return d===2&&(p+=60),p},n.hsv.ansi16=function(a){return n.rgb.ansi16(n.hsv.rgb(a),a[2])},n.rgb.ansi256=function(a){const u=a[0],l=a[1],c=a[2];return u===l&&l===c?u<8?16:u>248?231:Math.round((u-8)/247*24)+232:16+36*Math.round(u/255*5)+6*Math.round(l/255*5)+Math.round(c/255*5)},n.ansi16.rgb=function(a){let u=a%10;if(u===0||u===7)return a>50&&(u+=3.5),u=u/10.5*255,[u,u,u];const l=(~~(a>50)+1)*.5,c=(u&1)*l*255,f=(u>>1&1)*l*255,d=(u>>2&1)*l*255;return[c,f,d]},n.ansi256.rgb=function(a){if(a>=232){const d=(a-232)*10+8;return[d,d,d]}a-=16;let u;const l=Math.floor(a/36)/5*255,c=Math.floor((u=a%36)/6)/5*255,f=u%6/5*255;return[l,c,f]},n.rgb.hex=function(a){const l=(((Math.round(a[0])&255)<<16)+((Math.round(a[1])&255)<<8)+(Math.round(a[2])&255)).toString(16).toUpperCase();return"000000".substring(l.length)+l},n.hex.rgb=function(a){const u=a.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!u)return[0,0,0];let l=u[0];u[0].length===3&&(l=l.split("").map(g=>g+g).join(""));const c=parseInt(l,16),f=c>>16&255,d=c>>8&255,p=c&255;return[f,d,p]},n.rgb.hcg=function(a){const u=a[0]/255,l=a[1]/255,c=a[2]/255,f=Math.max(Math.max(u,l),c),d=Math.min(Math.min(u,l),c),p=f-d;let g,b;return p<1?g=d/(1-p):g=0,p<=0?b=0:f===u?b=(l-c)/p%6:f===l?b=2+(c-u)/p:b=4+(u-l)/p,b/=6,b%=1,[b*360,p*100,g*100]},n.hsl.hcg=function(a){const u=a[1]/100,l=a[2]/100,c=l<.5?2*u*l:2*u*(1-l);let f=0;return c<1&&(f=(l-.5*c)/(1-c)),[a[0],c*100,f*100]},n.hsv.hcg=function(a){const u=a[1]/100,l=a[2]/100,c=u*l;let f=0;return c<1&&(f=(l-c)/(1-c)),[a[0],c*100,f*100]},n.hcg.rgb=function(a){const u=a[0]/360,l=a[1]/100,c=a[2]/100;if(l===0)return[c*255,c*255,c*255];const f=[0,0,0],d=u%1*6,p=d%1,g=1-p;let b=0;switch(Math.floor(d)){case 0:f[0]=1,f[1]=p,f[2]=0;break;case 1:f[0]=g,f[1]=1,f[2]=0;break;case 2:f[0]=0,f[1]=1,f[2]=p;break;case 3:f[0]=0,f[1]=g,f[2]=1;break;case 4:f[0]=p,f[1]=0,f[2]=1;break;default:f[0]=1,f[1]=0,f[2]=g}return b=(1-l)*c,[(l*f[0]+b)*255,(l*f[1]+b)*255,(l*f[2]+b)*255]},n.hcg.hsv=function(a){const u=a[1]/100,l=a[2]/100,c=u+l*(1-u);let f=0;return c>0&&(f=u/c),[a[0],f*100,c*100]},n.hcg.hsl=function(a){const u=a[1]/100,c=a[2]/100*(1-u)+.5*u;let f=0;return c>0&&c<.5?f=u/(2*c):c>=.5&&c<1&&(f=u/(2*(1-c))),[a[0],f*100,c*100]},n.hcg.hwb=function(a){const u=a[1]/100,l=a[2]/100,c=u+l*(1-u);return[a[0],(c-u)*100,(1-c)*100]},n.hwb.hcg=function(a){const u=a[1]/100,c=1-a[2]/100,f=c-u;let d=0;return f<1&&(d=(c-f)/(1-f)),[a[0],f*100,d*100]},n.apple.rgb=function(a){return[a[0]/65535*255,a[1]/65535*255,a[2]/65535*255]},n.rgb.apple=function(a){return[a[0]/255*65535,a[1]/255*65535,a[2]/255*65535]},n.gray.rgb=function(a){return[a[0]/100*255,a[0]/100*255,a[0]/100*255]},n.gray.hsl=function(a){return[0,0,a[0]]},n.gray.hsv=n.gray.hsl,n.gray.hwb=function(a){return[0,100,a[0]]},n.gray.cmyk=function(a){return[0,0,0,a[0]]},n.gray.lab=function(a){return[a[0],0,0]},n.gray.hex=function(a){const u=Math.round(a[0]/100*255)&255,c=((u<<16)+(u<<8)+u).toString(16).toUpperCase();return"000000".substring(c.length)+c},n.rgb.gray=function(a){return[(a[0]+a[1]+a[2])/3/255*100]},xa}var _a,cc;function x_(){if(cc)return _a;cc=1;const t=uf();function r(){const u={},l=Object.keys(t);for(let c=l.length,f=0;f<c;f++)u[l[f]]={distance:-1,parent:null};return u}function n(u){const l=r(),c=[u];for(l[u].distance=0;c.length;){const f=c.pop(),d=Object.keys(t[f]);for(let p=d.length,g=0;g<p;g++){const b=d[g],y=l[b];y.distance===-1&&(y.distance=l[f].distance+1,y.parent=f,c.unshift(b))}}return l}function o(u,l){return function(c){return l(u(c))}}function a(u,l){const c=[l[u].parent,u];let f=t[l[u].parent][u],d=l[u].parent;for(;l[d].parent;)c.unshift(l[d].parent),f=o(t[l[d].parent][d],f),d=l[d].parent;return f.conversion=c,f}return _a=function(u){const l=n(u),c={},f=Object.keys(l);for(let d=f.length,p=0;p<d;p++){const g=f[p];l[g].parent!==null&&(c[g]=a(g,l))}return c},_a}var ka,fc;function __(){if(fc)return ka;fc=1;const t=uf(),r=x_(),n={},o=Object.keys(t);function a(l){const c=function(...f){const d=f[0];return d==null?d:(d.length>1&&(f=d),l(f))};return"conversion"in l&&(c.conversion=l.conversion),c}function u(l){const c=function(...f){const d=f[0];if(d==null)return d;d.length>1&&(f=d);const p=l(f);if(typeof p=="object")for(let g=p.length,b=0;b<g;b++)p[b]=Math.round(p[b]);return p};return"conversion"in l&&(c.conversion=l.conversion),c}return o.forEach(l=>{n[l]={},Object.defineProperty(n[l],"channels",{value:t[l].channels}),Object.defineProperty(n[l],"labels",{value:t[l].labels});const c=r(l);Object.keys(c).forEach(d=>{const p=c[d];n[l][d]=u(p),n[l][d].raw=a(p)})}),ka=n,ka}Li.exports;var hc;function k_(){return hc||(hc=1,(function(t){const r=(p,g)=>(...b)=>`\x1B[${p(...b)+g}m`,n=(p,g)=>(...b)=>{const y=p(...b);return`\x1B[${38+g};5;${y}m`},o=(p,g)=>(...b)=>{const y=p(...b);return`\x1B[${38+g};2;${y[0]};${y[1]};${y[2]}m`},a=p=>p,u=(p,g,b)=>[p,g,b],l=(p,g,b)=>{Object.defineProperty(p,g,{get:()=>{const y=b();return Object.defineProperty(p,g,{value:y,enumerable:!0,configurable:!0}),y},enumerable:!0,configurable:!0})};let c;const f=(p,g,b,y)=>{c===void 0&&(c=__());const E=y?10:0,P={};for(const[$,D]of Object.entries(c)){const H=$==="ansi16"?"ansi":$;$===g?P[H]=p(b,E):typeof D=="object"&&(P[H]=p(D[g],E))}return P};function d(){const p=new Map,g={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};g.color.gray=g.color.blackBright,g.bgColor.bgGray=g.bgColor.bgBlackBright,g.color.grey=g.color.blackBright,g.bgColor.bgGrey=g.bgColor.bgBlackBright;for(const[b,y]of Object.entries(g)){for(const[E,P]of Object.entries(y))g[E]={open:`\x1B[${P[0]}m`,close:`\x1B[${P[1]}m`},y[E]=g[E],p.set(P[0],P[1]);Object.defineProperty(g,b,{value:y,enumerable:!1})}return Object.defineProperty(g,"codes",{value:p,enumerable:!1}),g.color.close="\x1B[39m",g.bgColor.close="\x1B[49m",l(g.color,"ansi",()=>f(r,"ansi16",a,!1)),l(g.color,"ansi256",()=>f(n,"ansi256",a,!1)),l(g.color,"ansi16m",()=>f(o,"rgb",u,!1)),l(g.bgColor,"ansi",()=>f(r,"ansi16",a,!0)),l(g.bgColor,"ansi256",()=>f(n,"ansi256",a,!0)),l(g.bgColor,"ansi16m",()=>f(o,"rgb",u,!0)),g}Object.defineProperty(t,"exports",{enumerable:!0,get:d})})(Li)),Li.exports}var Sa,dc;function S_(){return dc||(dc=1,Sa={stdout:!1,stderr:!1}),Sa}var Ia,pc;function I_(){return pc||(pc=1,Ia={stringReplaceAll:(n,o,a)=>{let u=n.indexOf(o);if(u===-1)return n;const l=o.length;let c=0,f="";do f+=n.substr(c,u-c)+o+a,c=u+l,u=n.indexOf(o,c);while(u!==-1);return f+=n.substr(c),f},stringEncaseCRLFWithFirstIndex:(n,o,a,u)=>{let l=0,c="";do{const f=n[u-1]==="\r";c+=n.substr(l,(f?u-1:u)-l)+o+(f?`\r
`:`
`)+a,l=u+1,u=n.indexOf(`
`,l)}while(u!==-1);return c+=n.substr(l),c}}),Ia}var Ca,gc;function C_(){if(gc)return Ca;gc=1;const t=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,r=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,n=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,o=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,a=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function u(d){const p=d[0]==="u",g=d[1]==="{";return p&&!g&&d.length===5||d[0]==="x"&&d.length===3?String.fromCharCode(parseInt(d.slice(1),16)):p&&g?String.fromCodePoint(parseInt(d.slice(2,-1),16)):a.get(d)||d}function l(d,p){const g=[],b=p.trim().split(/\s*,\s*/g);let y;for(const E of b){const P=Number(E);if(!Number.isNaN(P))g.push(P);else if(y=E.match(n))g.push(y[2].replace(o,($,D,H)=>D?u(D):H));else throw new Error(`Invalid Chalk template style argument: ${E} (in style '${d}')`)}return g}function c(d){r.lastIndex=0;const p=[];let g;for(;(g=r.exec(d))!==null;){const b=g[1];if(g[2]){const y=l(b,g[2]);p.push([b].concat(y))}else p.push([b])}return p}function f(d,p){const g={};for(const y of p)for(const E of y.styles)g[E[0]]=y.inverse?null:E.slice(1);let b=d;for(const[y,E]of Object.entries(g))if(Array.isArray(E)){if(!(y in b))throw new Error(`Unknown Chalk style: ${y}`);b=E.length>0?b[y](...E):b[y]}return b}return Ca=(d,p)=>{const g=[],b=[];let y=[];if(p.replace(t,(E,P,$,D,H,z)=>{if(P)y.push(u(P));else if(D){const W=y.join("");y=[],b.push(g.length===0?W:f(d,g)(W)),g.push({inverse:$,styles:c(D)})}else if(H){if(g.length===0)throw new Error("Found extraneous } in Chalk template literal");b.push(f(d,g)(y.join(""))),y=[],g.pop()}else y.push(z)}),b.push(y.join("")),g.length>0){const E=`Chalk template literal is missing ${g.length} closing bracket${g.length===1?"":"s"} (\`}\`)`;throw new Error(E)}return b.join("")},Ca}var Ea,mc;function E_(){if(mc)return Ea;mc=1;const t=k_(),{stdout:r,stderr:n}=S_(),{stringReplaceAll:o,stringEncaseCRLFWithFirstIndex:a}=I_(),{isArray:u}=Array,l=["ansi","ansi","ansi256","ansi16m"],c=Object.create(null),f=(W,F={})=>{if(F.level&&!(Number.isInteger(F.level)&&F.level>=0&&F.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const T=r?r.level:0;W.level=F.level===void 0?T:F.level};class d{constructor(F){return p(F)}}const p=W=>{const F={};return f(F,W),F.template=(...T)=>H(F.template,...T),Object.setPrototypeOf(F,g.prototype),Object.setPrototypeOf(F.template,F),F.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},F.template.Instance=d,F.template};function g(W){return p(W)}for(const[W,F]of Object.entries(t))c[W]={get(){const T=P(this,E(F.open,F.close,this._styler),this._isEmpty);return Object.defineProperty(this,W,{value:T}),T}};c.visible={get(){const W=P(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:W}),W}};const b=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(const W of b)c[W]={get(){const{level:F}=this;return function(...T){const U=E(t.color[l[F]][W](...T),t.color.close,this._styler);return P(this,U,this._isEmpty)}}};for(const W of b){const F="bg"+W[0].toUpperCase()+W.slice(1);c[F]={get(){const{level:T}=this;return function(...U){const Q=E(t.bgColor[l[T]][W](...U),t.bgColor.close,this._styler);return P(this,Q,this._isEmpty)}}}}const y=Object.defineProperties(()=>{},{...c,level:{enumerable:!0,get(){return this._generator.level},set(W){this._generator.level=W}}}),E=(W,F,T)=>{let U,Q;return T===void 0?(U=W,Q=F):(U=T.openAll+W,Q=F+T.closeAll),{open:W,close:F,openAll:U,closeAll:Q,parent:T}},P=(W,F,T)=>{const U=(...Q)=>u(Q[0])&&u(Q[0].raw)?$(U,H(U,...Q)):$(U,Q.length===1?""+Q[0]:Q.join(" "));return Object.setPrototypeOf(U,y),U._generator=W,U._styler=F,U._isEmpty=T,U},$=(W,F)=>{if(W.level<=0||!F)return W._isEmpty?"":F;let T=W._styler;if(T===void 0)return F;const{openAll:U,closeAll:Q}=T;if(F.indexOf("\x1B")!==-1)for(;T!==void 0;)F=o(F,T.close,T.open),T=T.parent;const ee=F.indexOf(`
`);return ee!==-1&&(F=a(F,Q,U,ee)),U+F+Q};let D;const H=(W,...F)=>{const[T]=F;if(!u(T)||!u(T.raw))return F.join(" ");const U=F.slice(1),Q=[T.raw[0]];for(let ee=1;ee<T.length;ee++)Q.push(String(U[ee-1]).replace(/[{}\\]/g,"\\$&"),String(T.raw[ee]));return D===void 0&&(D=C_()),D(W,Q.join(""))};Object.defineProperties(g.prototype,c);const z=g();return z.supportsColor=r,z.stderr=g({level:n?n.level:0}),z.stderr.supportsColor=n,Ea=z,Ea}var T_=E_();const A_=wc(T_);function P_(t,r={}){if(!Array.isArray(t))throw new TypeError("Expected an array");let n=["â–","â–‚","â–ƒ","â–„","â–…","â–†","â–‡","â–ˆ"];const o=[[5,5,4],[5,5,3],[5,5,0],[5,4,0],[5,3,0],[5,2,0],[5,1,0],[5,0,0]],a=t.filter(c=>Number.isFinite(c)),u=typeof r.minimum=="number"?r.minimum:typeof r.maximum=="number"?0:Math.min(...a),l=typeof r.maximum=="number"?r.maximum:Math.max(...a);return u===l&&l!==0&&(n=[n[4]]),t.map(c=>{if(!Number.isFinite(c))return" ";let f;return u===l?f=0:f=Math.ceil((c-u)/(l-u)*n.length)-1,f<0&&(f=0),r.style==="fire"?A_.rgb(...o[f])(n[f]):n[f]}).join("")}const Mi=Xt(Jt.StatisticsService);class O_{descriptiveStatistics(r,n){const o=r.filter(a=>typeof a=="number"&&!isNaN(a));if(o.length===0)return Mi.warn("No valid numeric values found for descriptive statistics"),null;try{const a=Na(o,.25),u=Na(o,.75),l={count:o.length,sum:nf(o),mean:rf(o),median:y_(o),mode:p_(o),min:ic(o),max:oc(o),range:oc(o)-ic(o),variance:of(o),standardDeviation:f_(o),q1:a,q3:u,iqr:u-a};if(n?.includeVisualization){const c=n.chartHeight||10,f=this.createSparkline(o),d=this.createLineChart(o,c);l.visualization=`
**Sparkline:** ${f}

**Trend Chart:**
\`\`\`
${d}
\`\`\`
`.trim()}return Mi.dev("Calculated descriptive statistics",{stats:l}),l}catch(a){return Mi.error("Error calculating descriptive statistics",{error:a}),null}}booleanStatistics(r){const n=r.filter(E=>E===!0).length,o=r.filter(E=>E===!1).length,a=r.filter(E=>E===null).length,u=r.length;let l=0,c=0,f=0,d=null,p=0,g=0;for(const E of r)E===!0?(p++,g=0):E===!1&&(g++,p=0),l=Math.max(l,p),c=Math.max(c,g);const b=r[r.length-1];b===!0?(f=p,d="true"):b===!1&&(f=g,d="false");const y={count:u,trueCount:n,falseCount:o,nullCount:a,truePercentage:u>0?n/u*100:0,falsePercentage:u>0?o/u*100:0,longestTrueStreak:l,longestFalseStreak:c,currentStreak:f,currentStreakType:d};return Mi.dev("Calculated boolean statistics",{stats:y}),y}formatDescriptiveStats(r){return`
**Count:** ${r.count}
**Sum:** ${r.sum.toFixed(2)}
**Mean:** ${r.mean.toFixed(2)}
**Median:** ${r.median.toFixed(2)}
**Mode:** ${Array.isArray(r.mode)?r.mode.join(", "):r.mode}
**Min:** ${r.min.toFixed(2)}
**Max:** ${r.max.toFixed(2)}
**Range:** ${r.range.toFixed(2)}
**Std Dev:** ${r.standardDeviation.toFixed(2)}
**Variance:** ${r.variance.toFixed(2)}
**Q1 (25%):** ${r.q1.toFixed(2)}
**Q3 (75%):** ${r.q3.toFixed(2)}
**IQR:** ${r.iqr.toFixed(2)}
`.trim()}formatBooleanStats(r,n){const o=r.currentStreakType==="true"?"âœ¨":"â„ï¸";return`
**${n} Statistics**
- Total tracked: ${r.count} days
- Success rate: ${r.truePercentage.toFixed(1)}% (${r.trueCount}/${r.count})
- Longest streak: ${r.longestTrueStreak} days ğŸ†
- Current streak: ${o} ${r.currentStreak} days
`.trim()}createLineChart(r,n=10,o){if(r.length===0)return"No data to display";const a={height:n};return o&&(a.width=o),b_.plot(r,a)}createSparkline(r){return r.length===0?"â€”":P_(r)}createBooleanBarChart(r,n=30){return r.slice(-n).map(u=>u===!0?"âœ…":u===!1?"âŒ":"â¬œ").join("")}createBooleanPieChart(r,n){return`\`\`\`mermaid
pie title ${n}
    "Completed" : ${r.trueCount}
    "Skipped" : ${r.falseCount}
    ${r.nullCount>0?`"Not Tracked" : ${r.nullCount}`:""}
\`\`\``}createBooleanVisualReport(r,n,o={}){const{showSparkline:a=!0,showBarChart:u=!0,showAsciiChart:l=!0,showPieChart:c=!1,dates:f=[]}=o,d=this.booleanStatistics(r),p=r.map(b=>b===!0?1:0);let g=`## ğŸ“Š ${n}

`;if(g+=this.formatBooleanStats(d,n)+`

`,a&&(g+=`**Trend:** ${this.createSparkline(p)}

`),u&&(g+=`**Last ${Math.min(r.length,30)} days:**
`,g+=this.createBooleanBarChart(r,30)+`

`,f.length>0)){const b=f[0],y=f[f.length-1];g+=`*From ${b} to ${y}*

`}return l&&p.length>=3&&(g+="**Trend Chart:**\n```\n",g+=this.createLineChart(p,6),g+="\n```\n\n"),c&&(g+=this.createBooleanPieChart(d,`${n} Distribution`)+`

`),g}createNumericVisualReport(r,n,o={}){const{showSparkline:a=!0,showAsciiChart:u=!0,showStats:l=!0}=o,c=this.descriptiveStatistics(r);if(!c)return`## ${n}

No data available`;let f=`## ğŸ“ˆ ${n}

`;return l&&(f+=this.formatDescriptiveStats(c)+`

`),a&&(f+=`**Trend:** ${this.createSparkline(r)}

`),u&&(f+="**Trend Chart:**\n```\n",f+=this.createLineChart(r,10),f+="\n```\n\n"),f}}const zi=new O_;async function M_(){const t="habitTracking",r=new st(t),n=Kx.map(async c=>{if(!await Lr.shouldShowInput(c))return null;const d=await Lr.getInputProgress(c);return{habit:c,completedCount:d.targetProgress?.current||0,targetCount:c.schedule?.target?.count||1,isComplete:d.targetProgress?.isComplete||!1,shouldShow:!0,maxLimitProgress:d.limitProgress?{current:d.limitProgress.current,max:d.limitProgress.limit,percentage:d.limitProgress.percentage}:null}}),a=(await Promise.all(n)).filter(c=>c!==null),u=a.map(c=>c.habit.id);let l=!1;try{const c=await hn.getInputsLastNReports(Vn.ALMOST_DAILY,u,10);if(l=c.length>0,l){r._md("## ğŸ“Š Habit Statistics (Last 10 Reports)");for(const{habit:f}of a){const d=c.filter(p=>p.inputId===f.id);if(d.length>=2){const p=d.map(y=>y.value),g=zi.booleanStatistics(p),b=zi.createSparkline(p.map(y=>y===!0?1:0));r._md(`**${f.label}:** ${g.truePercentage.toFixed(0)}% (${g.trueCount}/${g.count}) Â· ${b} Â· ${g.currentStreakType==="true"?"âœ¨":"â„ï¸"} ${g.currentStreak} streak`)}}r._divider()}}catch(c){console.error("Failed to fetch habit statistics:",c)}return r._md("## âœ… Today's Habits (ğŸ“Œ CORE - 1 min)"),r._foldable(`**Atomic Habits** â€” every habit = Cue â†’ Craving â†’ Response â†’ Reward.
**Taoist Wu Wei** â€” not perfection, but flow. Missed habits are okayâ€”just return gently.
**Power of Habit** â€” the cue and reward make habits stick, not willpower alone.

**Check when complete:**`),a.length>0?(a.forEach(({habit:c,completedCount:f,maxLimitProgress:d,targetCount:p})=>{const g=c.schedule?.target?.per.count||1,b=c.schedule?.target?.per.unit||pe.Day,y=p===1&&g===1&&b===pe.Day;let E=[c.label];if(!y){let $;g===1?$=b:$=`${g} ${b}s`,E.push(`target: ${f}/${p} per ${$}`)}if(d){const{current:$,max:D}=d,H=c.schedule?.limit?.per.count||1,z=c.schedule?.limit?.per.unit||"day",W=H===1?z:`${H} ${z}s`;E.push(`limit: ${$}/${D} per ${W}`)}const P={...c.inputOptions,label:E.join(" Â· ")};r._input(P),r._md(`*Cue*: ${c.cue} Â· *Reward*: ${c.reward}`)}),r._nl(),r._md("Missing once is an accident. Missing twice is the start of a pattern. Return gently.")):r._md("*ğŸ‰ All habits completed for this period! Well done!*"),r.render()}async function D_(){const t="messageFromYesterday",r=new st(t),n=await hn.getInputsLastNReports(Vn.ALMOST_DAILY,["message_for_tomorrow","tomorrow_priority"],1),o=n.find(c=>c.inputId==="message_for_tomorrow"),a=n.find(c=>c.inputId==="tomorrow_priority"),u=o&&o.value?.trim().length>0,l=a&&a.value?.trim().length>0;if(!u&&!l)return"";if(r._md("## ğŸ“¨ Message from Your Past Self (â­ RECOMMENDED - 30 sec)"),l){const c=a.value;r._md(`### ğŸ¯ Today's Priority (set ${a.reportDate})`),r._md(`> ${c}`)}if(u){const c=o.value;r._md(`### ğŸ’Œ Message (from ${o.reportDate})`),r._md(`> ${c}`)}return r._foldable("Your past self sent you guidance! Take a moment to reflect on it.","A Gift from Yesterday"),r.render()}async function F_(){const t="accomplishmentsAndObstacles",r=new st(t);return r._md("## ğŸ“Š Wins & Obstacles (â­ RECOMMENDED)"),r._foldable(`**The Stoic Path** â€” "The obstacle is the way." Every setback is training.

_"The impediment to action advances action. What stands in the way becomes the way."_ â€” Marcus Aurelius

**Three Questions for Obstacles:**
1. **What happened?** (The external eventâ€”not in your control)
2. **How did I respond?** (Your reactionâ€”entirely in your control)
3. **How will I overcome this?** (Your action planâ€”growth through adversity)

**Atomic Habits:** Every obstacle reveals a system flaw. Fix the system, not just the symptom.
**Growth Mindset:** You haven't mastered this *yet*. Struggle = growth happening.

Remember: You control your **effort, attitude, and response** â€” not outcomes.`),r._fancyTitle("Wins & Accomplishments","ğŸ†"),await r._input(Ne.accomplishments),r._fancyTitle("Obstacles & The Way Forward","âš”ï¸"),await r._input(Ne.obstacles),await r._input(Ne.if_then_plan),r._md("**Stoic Wisdom**: This obstacle is not blocking your pathâ€”it IS the path. It's revealing where you need to grow."),r.render()}async function R_(){const t="attentionAndWillpower",r=new st(t);return r._md("## ğŸ¯ Attention & Willpower Check (ğŸ’¡ OPTIONAL - 3-5 min)"),r._foldable(`**Hyperfocus** â€” attention is your most valuable resource. Protect it fiercely.
**The Willpower Instinct** â€” willpower depletes throughout the day and needs recovery (rest, breaks, nature).
**Atomic Habits** â€” environment shapes behavior more than motivation.

Track patterns. Design better environments. Restore your willpower.`),r._fancyTitle("Attention Reflection","ğŸ‘ï¸"),await r._input(Ne.main_distraction),await r._input(Ne.flow_moments),r._fancyTitle("Willpower Reflection","ğŸ’ª"),await r._input(Ne.willpower_challenge),r._md("**Insight** â€” you can't control urges, but you can control your environment. Make good choices the easy choices."),r.render()}async function L_(){const t="gratitudeAndSavoring",r=new st(t);return r._md("## ğŸ™ Gratitude & Savoring (â­ RECOMMENDED)"),r._foldable(`**Three Good Things Intervention** â€” writing WHY things went well is crucial for wellbeing.
**Stoicism** â€” negative visualizationâ€”appreciate what you have by imagining its loss.
**Positive Psychology** â€” gratitude is one of the strongest wellbeing predictors.

Savor simple pleasures: friendship, beauty, learning, nature. Your role matters.`),r._md("### Three Good Things Today"),await r._input(Ne.gratitudes),r.render()}async function B_(){const t="mindfulMoment",r=new st(t);return r._md("## ğŸ§˜ Mindful Moment (ğŸ’¡ OPTIONAL - 2-3 min)"),r._foldable(`**Present Moment Awareness** â€” The antidote to anxiety

Anxiety lives in the future (what if?). Regret lives in the past (if only...). Peace lives in NOW.

**The Problem** â€” your mind is NEVER here. You eat lunch while planning dinner. You're with friends while mentally at work. You miss your ENTIRE LIFE because you're always somewhere else.

**The Solution** â€” train yourself to return to the present momentâ€”over and over.

**What this practice does:**
- **Reduces anxiety** â€” the present moment is usually fine. Suffering is in your head.
- **Increases joy** â€” life's beauty exists NOW, not in memory or anticipation
- **Improves focus** â€” your attention is your most valuable resource
- **Creates calm** â€” presence is inherently peaceful
- **Builds gratitude** â€” you notice what you usually miss

**Why it works** (neuroscience):
Your brain has two modes:
- **Default Mode** (wandering mind) â€” predicts, plans, worries, ruminates = stress
- **Present Mode** (focused attention) â€” observes, senses, experiences = calm

This practice trains you to shift from Default to Present mode at will.

**How to practice:**
This is NOT about emptying your mind. It's about NOTICING when you were present today, and appreciating that moment.

When you recall being fully presentâ€”even for 5 secondsâ€”you're training your brain to recognize and seek presence.`,"Mindfulness Practice"),r._md("### Practice (2 minutes)"),r._md("**Step 1** â€” ground yourself"),r._md("Close your eyes or soften your gaze. Take three slow, deep breaths. Feel your body in the chair."),r._md("**Step 2** â€” recall one present moment"),r._md("Remember ONE moment from today when you were fully HERE â€” no past, no future, just NOW:"),r._md("- Morning coffee warmth on your hands"),r._md("- A genuine laugh with someone"),r._md("- Sunlight on your skin"),r._md("- The taste of your lunch"),r._md("- Wind in your hair"),r._md("- A moment of quiet"),r._md("**Step 3** â€” explore the memory"),r._md("Hold that memory. Notice the details:"),r._md("- What did you SEE? (Colors, light, movement)"),r._md("- What did you HEAR? (Sounds, silence, rhythm)"),r._md("- What did you FEEL? (Temperature, texture, sensation)"),r._md("- What did you SMELL? TASTE?"),r._md("**Step 4** â€” appreciate"),r._md("That simple momentâ€”THAT is life. Not achievements or plans. Just being fully alive, right here, right now."),await r._input(Ne.mindful_pause_taken),r._md('> _"The present moment is all you ever have."_ â€” Eckhart Tolle'),r._md('> _"When you wash the dishes, wash the dishes."_ â€” ThÃ­ch Nháº¥t Háº¡nh'),r.render()}async function $_(){const t="emotionAwareness",r=new st(t);return r._md("## ğŸ’­ Emotion Awareness (ğŸ’¡ OPTIONAL - 3-5 min)"),r._foldable(`**Emotional Intelligence** â€” recognizing emotions is the first step to managing them.
**Stoicism** â€” you can't control feelings arising, but you can control your response.
**Neuroscience** â€” naming emotions reduces their intensity (affect labeling).

No judgmentâ€”just awareness and learning.`),r._md("### Today's Emotional Landscape"),await r._input(Ne.strongest_emotion),await r._input(Ne.emotion_trigger),await r._input(Ne.emotion_response),await r._input(Ne.better_emotion_response),r._md(`> **Practice** â€” when strong emotions arise, pause and label: _"I'm feeling [emotion]."_ This creates space between feeling and reaction.`),r.render()}async function N_(){const t="permaPlus",r=new st(t),n=$a.map(async g=>await Lr.shouldShowInput(g)?g:null),o=(await Promise.all(n)).filter(g=>g!==null),a=new Map;o.forEach(g=>{g.schedule?.showEvery?.unit===pe.Day&&a.set(g.id,g.schedule.showEvery.count)});const u=$a.filter(g=>!g.schedule||g.schedule.active!==!1),l=u.map(g=>g.id);let c=new Map,f=new Map,d=new Map,p={first:"",last:"",reportCount:0};try{const g=await hn.getInputsLastNReports(Vn.ALMOST_DAILY,l,20);if(g.length>0){const b=Array.from(new Set(g.map(y=>y.reportDate||""))).sort();p={first:b[0],last:b[b.length-1],reportCount:b.length}}u.forEach(b=>{const y=g.filter(E=>E.inputId===b.id).map(E=>{const P=Array.isArray(E.value)?E.value[0]:E.value;return typeof P=="string"?parseFloat(P):P}).filter(E=>!isNaN(E));if(c.set(b.id,y),y.length>0){const E=y.slice(-5),P=E.reduce((D,H)=>D+H,0)/E.length;f.set(b.id,P);const $=y.reduce((D,H)=>D+H,0)/y.length;d.set(b.id,$)}})}catch(g){console.error("Failed to fetch PERMA historical data:",g)}if(r._md("## ğŸ’š PERMA+8 Wellbeing Check (ğŸ“Œ CORE - 2-3 min)"),r._foldable(`**PERMA+8 Model**: Comprehensive wellbeing framework covering 13 dimensions:

**Core PERMA:**
- Positive Emotions, Engagement, Relationships, Meaning, Accomplishment

**Body & Physical:**
- Sleep Quality, Embodiment (body acceptance), Physical Pleasure, Touch & Intimacy, Physical Condition

**Life Context:**
- Mindset, Environment, Economic Security

Rate honestlyâ€”awareness is the first step to change.

**Rate each dimension** (3 = Great, 2 = Adequate, 1 = Struggling):`),o.forEach(g=>{const b=f.get(g.id),y=b!==void 0?` (last 5 reports: ${b.toFixed(1)})`:"",E=g.schedule?.showEvery?` *(shown every ${g.schedule.showEvery.count} ${g.schedule.showEvery.unit}${g.schedule.showEvery.count>1?"s":""})*`:"";r._inputLabel(`${g.label}${y}${E}`,`*${g.description}*`),r._input(g.inputOptions)}),c.size>0&&Array.from(c.values()).some(g=>g.length>=3)){r._themedDivider("Wellbeing Trends","ğŸ“Š");const g=[];if(c.forEach(b=>{g.push(...b)}),g.length>0){const b=g.reduce((P,$)=>P+$,0)/g.length,y=zi.createSparkline(Array.from(c.values())[0]);r._md(`**Overall Wellbeing (last ${p.reportCount} reports): ${b.toFixed(1)}/3.0** ${y}`),p.first&&p.last&&r._md(`*Data from ${p.first} to ${p.last}*`);const E=u.map(P=>({param:P,avg:d.get(P.id)||0,dataPoints:c.get(P.id)?.length||0})).filter(P=>P.dataPoints>=3).sort((P,$)=>P.avg-$.avg);if(E.length>0){const P=E[0],$=E[E.length-1];r._md("**Insights:**"),P.avg<2&&r._md(`- âš ï¸ **Needs attention**: ${P.param.label} (avg: ${P.avg.toFixed(1)}) â€” Consider prioritizing this area`),$.avg>=2.5&&r._md(`- âœ¨ **Strength area**: ${$.param.label} (avg: ${$.avg.toFixed(1)}) â€” Keep up the good work!`),r._md(`**Trends (last ${p.reportCount} reports):**`),u.forEach(D=>{const H=c.get(D.id);if(H&&H.length>=3){const z=d.get(D.id)||0,W=zi.createSparkline(H),F=H.length>=2?H[H.length-1]>H[H.length-2]?"â†—":H[H.length-1]<H[H.length-2]?"â†˜":"â†’":"â†’";r._md(`- ${D.label}: ${z.toFixed(1)} ${W} ${F}`)}})}}}return r.render()}async function W_(){const t="messageForTomorrow",r=new st(t);return r._md("## ğŸ’Œ Message & Intention for Tomorrow (ğŸ“Œ CORE - 2 min)"),r._foldable(`Set yourself up for success tomorrow with clarity and encouragement.

**Tomorrow's Priority**: What's the ONE thing that matters most? When and where will you do it?
**Message to Future Self**: A reminder, encouragement, or lesson you don't want to forget.

What can I prepare tonight to make tomorrow easier?

Which PERMA plus parameter needs special attention tomorrow?

Keep it short and meaningful. Your future self will thank you.`),await r._input(Ne.tomorrow_priority),await r._input(Ne.message_for_tomorrow),await r._input(Ne.plan_next_day),r.render()}async function z_(){const t=[];t.push(await Vx()),t.push(`
---
`),t.push("# ğŸŒ… MORNING: Set the Day"),t.push("*Win the morning, win the day. Start with intention and clarity.*"),t.push(`
---
`),t.push(await D_()),t.push(await a_()),t.push(await s_()),t.push(await B_()),t.push(await u_()),t.push(`
---
`),t.push("# ğŸ“‹ DAILY HABITS & PRACTICES"),t.push("*Small actions, repeated daily, create remarkable results.*"),t.push(`
---
`),t.push(await M_()),t.push(await l_()),t.push(`
---
`),t.push("# ğŸŒ™ EVENING: Reflect & Close the Day"),t.push("*Review your day with honesty and gratitude. Learn, grow, prepare.*"),t.push(`
---
`),t.push(await F_()),t.push(await R_()),t.push(await L_()),t.push(await $_()),t.push(await N_()),t.push(await W_()),Rr.write({type:Vn.ALMOST_DAILY,data:t.join(`
`)})}class q_{async backfillPeriodicParameters(r){const n=[];for(const o of r){const a=$a.find(f=>f.id===o.inputId&&f.schedule?.active!==!1);if(!a||!a.schedule?.showEvery){n.push(o);continue}const u=a.schedule.showEvery.unit===pe.Day?a.schedule.showEvery.count:1,l=o.reportDate,c=await this.getReportDatesInPast(u,l);for(const f of c)n.push({...o,reportDate:f});n.push(o)}return n}async getReportDatesInPast(r,n){const o=[];try{const a=await hn.getReportInputs("almostDailyReport");for(let u=1;u<r;u++){const l=this.getDateDaysAgo(u,n);a.some(f=>f.reportDate===l)&&o.push(l)}}catch(a){console.error("Error fetching past report dates:",a)}return o}getDateDaysAgo(r,n){const o=new Date(n);return o.setDate(o.getDate()-r),o.toISOString().split("T")[0]}}const H_=new q_,Pt=Xt(Jt.FileService);async function Y_(){try{const t=`${$i(new Date,"dd.MM.yyyy")}.md`,r=await U_();Pt.dev("Input collection and empty report cleanup completed");const n=ke.workspace.getLeavesOfType("markdown"),o=[];for(const l of n){const f=l.view.file;f&&(o.push(f.path),f.path.endsWith(t)&&(Pt.dev("Closing today's note: "+f.path),await l.detach()))}Pt.dev("Currently open files: "+o.join(", "));const a=`${bt.projectDir}/${bt.coreDir}`,u=ke.vault.getAbstractFileByPath(a);if(u&&"children"in u){const l=/^\d{2}\.\d{2}\.\d{4}\.md$/;for(const c of u.children)"extension"in c&&c.extension==="md"&&l.test(c.name)&&c.name!==t&&(Pt.dev("Deleting old app-triggering note: "+c.path),await ke.vault.delete(c))}if(r){for(const[l,c]of Object.entries(r))if(c&&c.length>0){const f=await H_.backfillPeriodicParameters(c);await hn.upsertReportInputs(l,f),Pt.info(`Saved ${f.length} inputs (${c.length} original + ${f.length-c.length} backfilled) for ${l} to database`)}}await z_(),Pt.info("Daily report built successfully")}catch(t){Pt.error("Failed to run onStart:",t)}}async function U_(){try{Pt.dev("Checking for empty reports from yesterday...");const t=await Wv.collectFromYesterday();for(const[r,n]of Object.entries(t)){if(!n||n.length===0){Pt.dev(`No inputs found for report: ${r}`);continue}if(n.every(a=>!!(a.value===null||a.value===void 0||typeof a.value=="string"&&a.value.trim()===""||Array.isArray(a.value)&&a.value.length===0||typeof a.value=="boolean"&&a.value===!1||typeof a.value=="number"&&a.value===0))){const a=Rr.reportFolders[r],u=await Rr._listFiles(a);if(u.length>0){const l=u.sort().reverse()[0],c=n[0];if(c&&l.includes(c.reportDate.replace(/-/g,""))&&l.includes(c.reportNumber)){const f=`${a}/${l}`,d=ke.vault.getAbstractFileByPath(f);d&&"extension"in d&&(Pt.info(`Deleting empty report: ${l}`),await ke.vault.delete(d))}}}else Pt.dev(`Report ${r} has content - keeping it`)}return t}catch(t){return Pt.error("Failed to delete empty reports:",t),{}}}const Di=Xt(Jt.FileService);async function G_(t,r){Di.info("runPowerJournal started");const n=await j0(r);U0(t,n),Di.dev("Globals set, config loaded");try{await Y_(),Di.info("Power Journal workflow completed successfully")}catch(o){Di.error("Error in Power Journal workflow",{error:o})}}module.exports=G_;
