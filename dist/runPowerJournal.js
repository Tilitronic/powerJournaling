"use strict";const $t={ComponentBuilder:"ComponentBuilder",SavingService:"SavingService",TagsService:"TagsService",InputCreator:"InputCreator",FileService:"FileService",OnStart:"OnStart",InputCollector:"InputCollector",ValueExtractor:"ValueExtractor",DbService:"DbService",StatisticsService:"StatisticsService"},B0={[$t.ComponentBuilder]:{dev:!1,info:!0,warn:!0,error:!0},[$t.SavingService]:{dev:!0,info:!0,warn:!0,error:!0},[$t.TagsService]:{dev:!1,info:!0,warn:!0,error:!0},[$t.InputCreator]:{dev:!1,info:!0,warn:!0,error:!0},[$t.FileService]:{dev:!0,info:!0,warn:!0,error:!0},[$t.OnStart]:{dev:!0,info:!0,warn:!0,error:!0},[$t.InputCollector]:{dev:!0,info:!0,warn:!0,error:!0},[$t.ValueExtractor]:{dev:!0,info:!0,warn:!0,error:!0},[$t.DbService]:{dev:!0,info:!0,warn:!0,error:!0},[$t.StatisticsService]:{dev:!0,info:!0,warn:!0,error:!0}},zn={reset:"\x1B[0m",bold:"\x1B[1m",gray:"\x1B[90m",purple:"\x1B[35m"},$0={dev:"\x1B[44m\x1B[37m",info:"\x1B[42m\x1B[30m",warn:"\x1B[43m\x1B[30m",error:"\x1B[41m\x1B[37m"},W0={dev:"üõ†",info:"‚ÑπÔ∏è",warn:"‚ö†Ô∏è",error:"‚ùå"},na={},xl=["\x1B[36m","\x1B[33m","\x1B[32m","\x1B[34m","\x1B[31m","\x1B[95m","\x1B[96m","\x1B[92m","\x1B[93m"];let _l=0;function z0(t){return na[t]||(na[t]=xl[_l%xl.length],_l++),na[t]}class Na{constructor(r,n){this.logs=[],this.serviceConfig={},this.getConfig=r,this.prefix=n??"global"}setServiceConfig(r){this.serviceConfig=r}addLog(r,n,o){const a={timestamp:new Date,level:r,service:this.prefix,message:n,meta:o};if(this.logs.push(a),!((this.serviceConfig[this.prefix]??{})[r]??!0))return;const c=a.timestamp.toISOString().split("T")[1].split(".")[0],f=`${zn.gray}${c}${zn.reset}`,d=`${zn.purple}[PJ]${zn.reset}`,p=`${z0(this.prefix)}${zn.bold}[${this.prefix}]${zn.reset}`,g=`${$0[r]}[${W0[r]} ${r.toUpperCase().padEnd(5)}]${zn.reset}`,b=`${f} ${d}${p}${g} ${n}`;try{r==="warn"?console.warn(b,o??""):r==="error"?console.error(b,o??""):console.log(b,o??"")}catch{console.log(`${f} ${d}[${this.prefix}][${r.toUpperCase()}] ${n}`,o??"")}}dev(r,n){this.addLog("dev",r,n)}info(r,n){this.addLog("info",r,n)}warn(r,n){this.addLog("warn",r,n)}error(r,n){this.addLog("error",r,n)}getAllLogs(){return this.logs}withPrefix(r){const n=new Na(this.getConfig,r);return n.setServiceConfig(this.serviceConfig),n}}let Ue;function q0(t,r){Ue=r}const pc=new Na(()=>Ue);pc.setServiceConfig(B0);function Xt(t){return pc.withPrefix(t)}const Jt=$t,xe=app;var Ti=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ar={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var H0=Ar.exports,kl;function Y0(){return kl||(kl=1,(function(t,r){(function(){var n,o="4.17.21",a=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",d=500,p="__lodash_placeholder__",g=1,b=2,y=4,T=1,P=2,B=1,D=2,H=4,z=8,W=16,O=32,E=64,U=128,Q=256,ee=512,he=30,j="...",V=800,me=16,Te=1,ce=2,Be=3,Se=1/0,Le=9007199254740991,Mt=17976931348623157e292,_=NaN,Ae=4294967295,Ot=Ae-1,S=Ae>>>1,st=[["ary",U],["bind",B],["bindKey",D],["curry",z],["curryRight",W],["flip",ee],["partial",O],["partialRight",E],["rearg",Q]],Xe="[object Arguments]",Pe="[object Array]",An="[object AsyncFunction]",Je="[object Boolean]",wt="[object Date]",dn="[object DOMException]",Zt="[object Error]",Gn="[object Function]",Lr="[object GeneratorFunction]",ut="[object Map]",pn="[object Number]",Rr="[object Null]",bt="[object Object]",Nr="[object Promise]",Br="[object Proxy]",gn="[object RegExp]",lt="[object Set]",Pn="[object String]",Vn="[object Symbol]",qi="[object Undefined]",Mn="[object WeakMap]",F="[object WeakSet]",$="[object ArrayBuffer]",X="[object DataView]",ae="[object Float32Array]",de="[object Float64Array]",Ve="[object Int8Array]",Dt="[object Int16Array]",ct="[object Int32Array]",en="[object Uint8Array]",tn="[object Uint8ClampedArray]",We="[object Uint16Array]",qt="[object Uint32Array]",Ft=/\b__p \+= '';/g,af=/\b(__p \+=) '' \+/g,sf=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ga=/&(?:amp|lt|gt|quot|#39);/g,Va=/[&<>"']/g,uf=RegExp(Ga.source),lf=RegExp(Va.source),cf=/<%-([\s\S]+?)%>/g,ff=/<%([\s\S]+?)%>/g,Qa=/<%=([\s\S]+?)%>/g,hf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,df=/^\w*$/,pf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Hi=/[\\^$.*+?()[\]{}|]/g,gf=RegExp(Hi.source),Yi=/^\s+/,mf=/\s/,yf=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,wf=/\{\n\/\* \[wrapped with (.+)\] \*/,bf=/,? & /,vf=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,xf=/[()=,{}\[\]\/\s]/,_f=/\\(\\)?/g,kf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ja=/\w*$/,Sf=/^[-+]0x[0-9a-f]+$/i,If=/^0b[01]+$/i,Cf=/^\[object .+?Constructor\]$/,Tf=/^0o[0-7]+$/i,Ef=/^(?:0|[1-9]\d*)$/,Af=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$r=/($^)/,Pf=/['\n\r\u2028\u2029\\]/g,Wr="\\ud800-\\udfff",Mf="\\u0300-\\u036f",Of="\\ufe20-\\ufe2f",Df="\\u20d0-\\u20ff",Ka=Mf+Of+Df,Xa="\\u2700-\\u27bf",Ja="a-z\\xdf-\\xf6\\xf8-\\xff",Ff="\\xac\\xb1\\xd7\\xf7",Lf="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Rf="\\u2000-\\u206f",Nf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Za="A-Z\\xc0-\\xd6\\xd8-\\xde",es="\\ufe0e\\ufe0f",ts=Ff+Lf+Rf+Nf,Ui="['‚Äô]",Bf="["+Wr+"]",ns="["+ts+"]",zr="["+Ka+"]",rs="\\d+",$f="["+Xa+"]",is="["+Ja+"]",os="[^"+Wr+ts+rs+Xa+Ja+Za+"]",Gi="\\ud83c[\\udffb-\\udfff]",Wf="(?:"+zr+"|"+Gi+")",as="[^"+Wr+"]",Vi="(?:\\ud83c[\\udde6-\\uddff]){2}",Qi="[\\ud800-\\udbff][\\udc00-\\udfff]",Qn="["+Za+"]",ss="\\u200d",us="(?:"+is+"|"+os+")",zf="(?:"+Qn+"|"+os+")",ls="(?:"+Ui+"(?:d|ll|m|re|s|t|ve))?",cs="(?:"+Ui+"(?:D|LL|M|RE|S|T|VE))?",fs=Wf+"?",hs="["+es+"]?",qf="(?:"+ss+"(?:"+[as,Vi,Qi].join("|")+")"+hs+fs+")*",Hf="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Yf="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ds=hs+fs+qf,Uf="(?:"+[$f,Vi,Qi].join("|")+")"+ds,Gf="(?:"+[as+zr+"?",zr,Vi,Qi,Bf].join("|")+")",Vf=RegExp(Ui,"g"),Qf=RegExp(zr,"g"),ji=RegExp(Gi+"(?="+Gi+")|"+Gf+ds,"g"),jf=RegExp([Qn+"?"+is+"+"+ls+"(?="+[ns,Qn,"$"].join("|")+")",zf+"+"+cs+"(?="+[ns,Qn+us,"$"].join("|")+")",Qn+"?"+us+"+"+ls,Qn+"+"+cs,Yf,Hf,rs,Uf].join("|"),"g"),Kf=RegExp("["+ss+Wr+Ka+es+"]"),Xf=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Jf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Zf=-1,Ie={};Ie[ae]=Ie[de]=Ie[Ve]=Ie[Dt]=Ie[ct]=Ie[en]=Ie[tn]=Ie[We]=Ie[qt]=!0,Ie[Xe]=Ie[Pe]=Ie[$]=Ie[Je]=Ie[X]=Ie[wt]=Ie[Zt]=Ie[Gn]=Ie[ut]=Ie[pn]=Ie[bt]=Ie[gn]=Ie[lt]=Ie[Pn]=Ie[Mn]=!1;var _e={};_e[Xe]=_e[Pe]=_e[$]=_e[X]=_e[Je]=_e[wt]=_e[ae]=_e[de]=_e[Ve]=_e[Dt]=_e[ct]=_e[ut]=_e[pn]=_e[bt]=_e[gn]=_e[lt]=_e[Pn]=_e[Vn]=_e[en]=_e[tn]=_e[We]=_e[qt]=!0,_e[Zt]=_e[Gn]=_e[Mn]=!1;var eh={√Ä:"A",√Å:"A",√Ç:"A",√É:"A",√Ñ:"A",√Ö:"A",√†:"a",√°:"a",√¢:"a",√£:"a",√§:"a",√•:"a",√á:"C",√ß:"c",√ê:"D",√∞:"d",√à:"E",√â:"E",√ä:"E",√ã:"E",√®:"e",√©:"e",√™:"e",√´:"e",√å:"I",√ç:"I",√é:"I",√è:"I",√¨:"i",√≠:"i",√Æ:"i",√Ø:"i",√ë:"N",√±:"n",√í:"O",√ì:"O",√î:"O",√ï:"O",√ñ:"O",√ò:"O",√≤:"o",√≥:"o",√¥:"o",√µ:"o",√∂:"o",√∏:"o",√ô:"U",√ö:"U",√õ:"U",√ú:"U",√π:"u",√∫:"u",√ª:"u",√º:"u",√ù:"Y",√Ω:"y",√ø:"y",√Ü:"Ae",√¶:"ae",√û:"Th",√æ:"th",√ü:"ss",ƒÄ:"A",ƒÇ:"A",ƒÑ:"A",ƒÅ:"a",ƒÉ:"a",ƒÖ:"a",ƒÜ:"C",ƒà:"C",ƒä:"C",ƒå:"C",ƒá:"c",ƒâ:"c",ƒã:"c",ƒç:"c",ƒé:"D",ƒê:"D",ƒè:"d",ƒë:"d",ƒí:"E",ƒî:"E",ƒñ:"E",ƒò:"E",ƒö:"E",ƒì:"e",ƒï:"e",ƒó:"e",ƒô:"e",ƒõ:"e",ƒú:"G",ƒû:"G",ƒ†:"G",ƒ¢:"G",ƒù:"g",ƒü:"g",ƒ°:"g",ƒ£:"g",ƒ§:"H",ƒ¶:"H",ƒ•:"h",ƒß:"h",ƒ®:"I",ƒ™:"I",ƒ¨:"I",ƒÆ:"I",ƒ∞:"I",ƒ©:"i",ƒ´:"i",ƒ≠:"i",ƒØ:"i",ƒ±:"i",ƒ¥:"J",ƒµ:"j",ƒ∂:"K",ƒ∑:"k",ƒ∏:"k",ƒπ:"L",ƒª:"L",ƒΩ:"L",ƒø:"L",≈Å:"L",ƒ∫:"l",ƒº:"l",ƒæ:"l",≈Ä:"l",≈Ç:"l",≈É:"N",≈Ö:"N",≈á:"N",≈ä:"N",≈Ñ:"n",≈Ü:"n",≈à:"n",≈ã:"n",≈å:"O",≈é:"O",≈ê:"O",≈ç:"o",≈è:"o",≈ë:"o",≈î:"R",≈ñ:"R",≈ò:"R",≈ï:"r",≈ó:"r",≈ô:"r",≈ö:"S",≈ú:"S",≈û:"S",≈†:"S",≈õ:"s",≈ù:"s",≈ü:"s",≈°:"s",≈¢:"T",≈§:"T",≈¶:"T",≈£:"t",≈•:"t",≈ß:"t",≈®:"U",≈™:"U",≈¨:"U",≈Æ:"U",≈∞:"U",≈≤:"U",≈©:"u",≈´:"u",≈≠:"u",≈Ø:"u",≈±:"u",≈≥:"u",≈¥:"W",≈µ:"w",≈∂:"Y",≈∑:"y",≈∏:"Y",≈π:"Z",≈ª:"Z",≈Ω:"Z",≈∫:"z",≈º:"z",≈æ:"z",ƒ≤:"IJ",ƒ≥:"ij",≈í:"Oe",≈ì:"oe",≈â:"'n",≈ø:"s"},th={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},nh={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},rh={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ih=parseFloat,oh=parseInt,ps=typeof Ti=="object"&&Ti&&Ti.Object===Object&&Ti,ah=typeof self=="object"&&self&&self.Object===Object&&self,ze=ps||ah||Function("return this")(),Ki=r&&!r.nodeType&&r,On=Ki&&!0&&t&&!t.nodeType&&t,gs=On&&On.exports===Ki,Xi=gs&&ps.process,vt=(function(){try{var I=On&&On.require&&On.require("util").types;return I||Xi&&Xi.binding&&Xi.binding("util")}catch{}})(),ms=vt&&vt.isArrayBuffer,ys=vt&&vt.isDate,ws=vt&&vt.isMap,bs=vt&&vt.isRegExp,vs=vt&&vt.isSet,xs=vt&&vt.isTypedArray;function ft(I,M,A){switch(A.length){case 0:return I.call(M);case 1:return I.call(M,A[0]);case 2:return I.call(M,A[0],A[1]);case 3:return I.call(M,A[0],A[1],A[2])}return I.apply(M,A)}function sh(I,M,A,Y){for(var ne=-1,pe=I==null?0:I.length;++ne<pe;){var Re=I[ne];M(Y,Re,A(Re),I)}return Y}function xt(I,M){for(var A=-1,Y=I==null?0:I.length;++A<Y&&M(I[A],A,I)!==!1;);return I}function uh(I,M){for(var A=I==null?0:I.length;A--&&M(I[A],A,I)!==!1;);return I}function _s(I,M){for(var A=-1,Y=I==null?0:I.length;++A<Y;)if(!M(I[A],A,I))return!1;return!0}function mn(I,M){for(var A=-1,Y=I==null?0:I.length,ne=0,pe=[];++A<Y;){var Re=I[A];M(Re,A,I)&&(pe[ne++]=Re)}return pe}function qr(I,M){var A=I==null?0:I.length;return!!A&&jn(I,M,0)>-1}function Ji(I,M,A){for(var Y=-1,ne=I==null?0:I.length;++Y<ne;)if(A(M,I[Y]))return!0;return!1}function Ce(I,M){for(var A=-1,Y=I==null?0:I.length,ne=Array(Y);++A<Y;)ne[A]=M(I[A],A,I);return ne}function yn(I,M){for(var A=-1,Y=M.length,ne=I.length;++A<Y;)I[ne+A]=M[A];return I}function Zi(I,M,A,Y){var ne=-1,pe=I==null?0:I.length;for(Y&&pe&&(A=I[++ne]);++ne<pe;)A=M(A,I[ne],ne,I);return A}function lh(I,M,A,Y){var ne=I==null?0:I.length;for(Y&&ne&&(A=I[--ne]);ne--;)A=M(A,I[ne],ne,I);return A}function eo(I,M){for(var A=-1,Y=I==null?0:I.length;++A<Y;)if(M(I[A],A,I))return!0;return!1}var ch=to("length");function fh(I){return I.split("")}function hh(I){return I.match(vf)||[]}function ks(I,M,A){var Y;return A(I,function(ne,pe,Re){if(M(ne,pe,Re))return Y=pe,!1}),Y}function Hr(I,M,A,Y){for(var ne=I.length,pe=A+(Y?1:-1);Y?pe--:++pe<ne;)if(M(I[pe],pe,I))return pe;return-1}function jn(I,M,A){return M===M?Sh(I,M,A):Hr(I,Ss,A)}function dh(I,M,A,Y){for(var ne=A-1,pe=I.length;++ne<pe;)if(Y(I[ne],M))return ne;return-1}function Ss(I){return I!==I}function Is(I,M){var A=I==null?0:I.length;return A?ro(I,M)/A:_}function to(I){return function(M){return M==null?n:M[I]}}function no(I){return function(M){return I==null?n:I[M]}}function Cs(I,M,A,Y,ne){return ne(I,function(pe,Re,ve){A=Y?(Y=!1,pe):M(A,pe,Re,ve)}),A}function ph(I,M){var A=I.length;for(I.sort(M);A--;)I[A]=I[A].value;return I}function ro(I,M){for(var A,Y=-1,ne=I.length;++Y<ne;){var pe=M(I[Y]);pe!==n&&(A=A===n?pe:A+pe)}return A}function io(I,M){for(var A=-1,Y=Array(I);++A<I;)Y[A]=M(A);return Y}function gh(I,M){return Ce(M,function(A){return[A,I[A]]})}function Ts(I){return I&&I.slice(0,Ms(I)+1).replace(Yi,"")}function ht(I){return function(M){return I(M)}}function oo(I,M){return Ce(M,function(A){return I[A]})}function cr(I,M){return I.has(M)}function Es(I,M){for(var A=-1,Y=I.length;++A<Y&&jn(M,I[A],0)>-1;);return A}function As(I,M){for(var A=I.length;A--&&jn(M,I[A],0)>-1;);return A}function mh(I,M){for(var A=I.length,Y=0;A--;)I[A]===M&&++Y;return Y}var yh=no(eh),wh=no(th);function bh(I){return"\\"+rh[I]}function vh(I,M){return I==null?n:I[M]}function Kn(I){return Kf.test(I)}function xh(I){return Xf.test(I)}function _h(I){for(var M,A=[];!(M=I.next()).done;)A.push(M.value);return A}function ao(I){var M=-1,A=Array(I.size);return I.forEach(function(Y,ne){A[++M]=[ne,Y]}),A}function Ps(I,M){return function(A){return I(M(A))}}function wn(I,M){for(var A=-1,Y=I.length,ne=0,pe=[];++A<Y;){var Re=I[A];(Re===M||Re===p)&&(I[A]=p,pe[ne++]=A)}return pe}function Yr(I){var M=-1,A=Array(I.size);return I.forEach(function(Y){A[++M]=Y}),A}function kh(I){var M=-1,A=Array(I.size);return I.forEach(function(Y){A[++M]=[Y,Y]}),A}function Sh(I,M,A){for(var Y=A-1,ne=I.length;++Y<ne;)if(I[Y]===M)return Y;return-1}function Ih(I,M,A){for(var Y=A+1;Y--;)if(I[Y]===M)return Y;return Y}function Xn(I){return Kn(I)?Th(I):ch(I)}function Lt(I){return Kn(I)?Eh(I):fh(I)}function Ms(I){for(var M=I.length;M--&&mf.test(I.charAt(M)););return M}var Ch=no(nh);function Th(I){for(var M=ji.lastIndex=0;ji.test(I);)++M;return M}function Eh(I){return I.match(ji)||[]}function Ah(I){return I.match(jf)||[]}var Ph=(function I(M){M=M==null?ze:Jn.defaults(ze.Object(),M,Jn.pick(ze,Jf));var A=M.Array,Y=M.Date,ne=M.Error,pe=M.Function,Re=M.Math,ve=M.Object,so=M.RegExp,Mh=M.String,_t=M.TypeError,Ur=A.prototype,Oh=pe.prototype,Zn=ve.prototype,Gr=M["__core-js_shared__"],Vr=Oh.toString,we=Zn.hasOwnProperty,Dh=0,Os=(function(){var e=/[^.]+$/.exec(Gr&&Gr.keys&&Gr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})(),Qr=Zn.toString,Fh=Vr.call(ve),Lh=ze._,Rh=so("^"+Vr.call(we).replace(Hi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jr=gs?M.Buffer:n,bn=M.Symbol,Kr=M.Uint8Array,Ds=jr?jr.allocUnsafe:n,Xr=Ps(ve.getPrototypeOf,ve),Fs=ve.create,Ls=Zn.propertyIsEnumerable,Jr=Ur.splice,Rs=bn?bn.isConcatSpreadable:n,fr=bn?bn.iterator:n,Dn=bn?bn.toStringTag:n,Zr=(function(){try{var e=Bn(ve,"defineProperty");return e({},"",{}),e}catch{}})(),Nh=M.clearTimeout!==ze.clearTimeout&&M.clearTimeout,Bh=Y&&Y.now!==ze.Date.now&&Y.now,$h=M.setTimeout!==ze.setTimeout&&M.setTimeout,ei=Re.ceil,ti=Re.floor,uo=ve.getOwnPropertySymbols,Wh=jr?jr.isBuffer:n,Ns=M.isFinite,zh=Ur.join,qh=Ps(ve.keys,ve),Ne=Re.max,He=Re.min,Hh=Y.now,Yh=M.parseInt,Bs=Re.random,Uh=Ur.reverse,lo=Bn(M,"DataView"),hr=Bn(M,"Map"),co=Bn(M,"Promise"),er=Bn(M,"Set"),dr=Bn(M,"WeakMap"),pr=Bn(ve,"create"),ni=dr&&new dr,tr={},Gh=$n(lo),Vh=$n(hr),Qh=$n(co),jh=$n(er),Kh=$n(dr),ri=bn?bn.prototype:n,gr=ri?ri.valueOf:n,$s=ri?ri.toString:n;function w(e){if(Me(e)&&!re(e)&&!(e instanceof le)){if(e instanceof kt)return e;if(we.call(e,"__wrapped__"))return Wu(e)}return new kt(e)}var nr=(function(){function e(){}return function(i){if(!Ee(i))return{};if(Fs)return Fs(i);e.prototype=i;var s=new e;return e.prototype=n,s}})();function ii(){}function kt(e,i){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=n}w.templateSettings={escape:cf,evaluate:ff,interpolate:Qa,variable:"",imports:{_:w}},w.prototype=ii.prototype,w.prototype.constructor=w,kt.prototype=nr(ii.prototype),kt.prototype.constructor=kt;function le(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ae,this.__views__=[]}function Xh(){var e=new le(this.__wrapped__);return e.__actions__=Ze(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ze(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ze(this.__views__),e}function Jh(){if(this.__filtered__){var e=new le(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Zh(){var e=this.__wrapped__.value(),i=this.__dir__,s=re(e),h=i<0,m=s?e.length:0,v=fp(0,m,this.__views__),x=v.start,k=v.end,C=k-x,L=h?k:x-1,R=this.__iteratees__,N=R.length,q=0,G=He(C,this.__takeCount__);if(!s||!h&&m==C&&G==C)return lu(e,this.__actions__);var J=[];e:for(;C--&&q<G;){L+=i;for(var oe=-1,Z=e[L];++oe<N;){var ue=R[oe],fe=ue.iteratee,gt=ue.type,Ke=fe(Z);if(gt==ce)Z=Ke;else if(!Ke){if(gt==Te)continue e;break e}}J[q++]=Z}return J}le.prototype=nr(ii.prototype),le.prototype.constructor=le;function Fn(e){var i=-1,s=e==null?0:e.length;for(this.clear();++i<s;){var h=e[i];this.set(h[0],h[1])}}function ed(){this.__data__=pr?pr(null):{},this.size=0}function td(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}function nd(e){var i=this.__data__;if(pr){var s=i[e];return s===f?n:s}return we.call(i,e)?i[e]:n}function rd(e){var i=this.__data__;return pr?i[e]!==n:we.call(i,e)}function id(e,i){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=pr&&i===n?f:i,this}Fn.prototype.clear=ed,Fn.prototype.delete=td,Fn.prototype.get=nd,Fn.prototype.has=rd,Fn.prototype.set=id;function nn(e){var i=-1,s=e==null?0:e.length;for(this.clear();++i<s;){var h=e[i];this.set(h[0],h[1])}}function od(){this.__data__=[],this.size=0}function ad(e){var i=this.__data__,s=oi(i,e);if(s<0)return!1;var h=i.length-1;return s==h?i.pop():Jr.call(i,s,1),--this.size,!0}function sd(e){var i=this.__data__,s=oi(i,e);return s<0?n:i[s][1]}function ud(e){return oi(this.__data__,e)>-1}function ld(e,i){var s=this.__data__,h=oi(s,e);return h<0?(++this.size,s.push([e,i])):s[h][1]=i,this}nn.prototype.clear=od,nn.prototype.delete=ad,nn.prototype.get=sd,nn.prototype.has=ud,nn.prototype.set=ld;function rn(e){var i=-1,s=e==null?0:e.length;for(this.clear();++i<s;){var h=e[i];this.set(h[0],h[1])}}function cd(){this.size=0,this.__data__={hash:new Fn,map:new(hr||nn),string:new Fn}}function fd(e){var i=yi(this,e).delete(e);return this.size-=i?1:0,i}function hd(e){return yi(this,e).get(e)}function dd(e){return yi(this,e).has(e)}function pd(e,i){var s=yi(this,e),h=s.size;return s.set(e,i),this.size+=s.size==h?0:1,this}rn.prototype.clear=cd,rn.prototype.delete=fd,rn.prototype.get=hd,rn.prototype.has=dd,rn.prototype.set=pd;function Ln(e){var i=-1,s=e==null?0:e.length;for(this.__data__=new rn;++i<s;)this.add(e[i])}function gd(e){return this.__data__.set(e,f),this}function md(e){return this.__data__.has(e)}Ln.prototype.add=Ln.prototype.push=gd,Ln.prototype.has=md;function Rt(e){var i=this.__data__=new nn(e);this.size=i.size}function yd(){this.__data__=new nn,this.size=0}function wd(e){var i=this.__data__,s=i.delete(e);return this.size=i.size,s}function bd(e){return this.__data__.get(e)}function vd(e){return this.__data__.has(e)}function xd(e,i){var s=this.__data__;if(s instanceof nn){var h=s.__data__;if(!hr||h.length<a-1)return h.push([e,i]),this.size=++s.size,this;s=this.__data__=new rn(h)}return s.set(e,i),this.size=s.size,this}Rt.prototype.clear=yd,Rt.prototype.delete=wd,Rt.prototype.get=bd,Rt.prototype.has=vd,Rt.prototype.set=xd;function Ws(e,i){var s=re(e),h=!s&&Wn(e),m=!s&&!h&&Sn(e),v=!s&&!h&&!m&&ar(e),x=s||h||m||v,k=x?io(e.length,Mh):[],C=k.length;for(var L in e)(i||we.call(e,L))&&!(x&&(L=="length"||m&&(L=="offset"||L=="parent")||v&&(L=="buffer"||L=="byteLength"||L=="byteOffset")||un(L,C)))&&k.push(L);return k}function zs(e){var i=e.length;return i?e[_o(0,i-1)]:n}function _d(e,i){return wi(Ze(e),Rn(i,0,e.length))}function kd(e){return wi(Ze(e))}function fo(e,i,s){(s!==n&&!Nt(e[i],s)||s===n&&!(i in e))&&on(e,i,s)}function mr(e,i,s){var h=e[i];(!(we.call(e,i)&&Nt(h,s))||s===n&&!(i in e))&&on(e,i,s)}function oi(e,i){for(var s=e.length;s--;)if(Nt(e[s][0],i))return s;return-1}function Sd(e,i,s,h){return vn(e,function(m,v,x){i(h,m,s(m),x)}),h}function qs(e,i){return e&&Yt(i,$e(i),e)}function Id(e,i){return e&&Yt(i,tt(i),e)}function on(e,i,s){i=="__proto__"&&Zr?Zr(e,i,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[i]=s}function ho(e,i){for(var s=-1,h=i.length,m=A(h),v=e==null;++s<h;)m[s]=v?n:Vo(e,i[s]);return m}function Rn(e,i,s){return e===e&&(s!==n&&(e=e<=s?e:s),i!==n&&(e=e>=i?e:i)),e}function St(e,i,s,h,m,v){var x,k=i&g,C=i&b,L=i&y;if(s&&(x=m?s(e,h,m,v):s(e)),x!==n)return x;if(!Ee(e))return e;var R=re(e);if(R){if(x=dp(e),!k)return Ze(e,x)}else{var N=Ye(e),q=N==Gn||N==Lr;if(Sn(e))return hu(e,k);if(N==bt||N==Xe||q&&!m){if(x=C||q?{}:Mu(e),!k)return C?np(e,Id(x,e)):tp(e,qs(x,e))}else{if(!_e[N])return m?e:{};x=pp(e,N,k)}}v||(v=new Rt);var G=v.get(e);if(G)return G;v.set(e,x),al(e)?e.forEach(function(Z){x.add(St(Z,i,s,Z,e,v))}):il(e)&&e.forEach(function(Z,ue){x.set(ue,St(Z,i,s,ue,e,v))});var J=L?C?Do:Oo:C?tt:$e,oe=R?n:J(e);return xt(oe||e,function(Z,ue){oe&&(ue=Z,Z=e[ue]),mr(x,ue,St(Z,i,s,ue,e,v))}),x}function Cd(e){var i=$e(e);return function(s){return Hs(s,e,i)}}function Hs(e,i,s){var h=s.length;if(e==null)return!h;for(e=ve(e);h--;){var m=s[h],v=i[m],x=e[m];if(x===n&&!(m in e)||!v(x))return!1}return!0}function Ys(e,i,s){if(typeof e!="function")throw new _t(l);return kr(function(){e.apply(n,s)},i)}function yr(e,i,s,h){var m=-1,v=qr,x=!0,k=e.length,C=[],L=i.length;if(!k)return C;s&&(i=Ce(i,ht(s))),h?(v=Ji,x=!1):i.length>=a&&(v=cr,x=!1,i=new Ln(i));e:for(;++m<k;){var R=e[m],N=s==null?R:s(R);if(R=h||R!==0?R:0,x&&N===N){for(var q=L;q--;)if(i[q]===N)continue e;C.push(R)}else v(i,N,h)||C.push(R)}return C}var vn=yu(Ht),Us=yu(go,!0);function Td(e,i){var s=!0;return vn(e,function(h,m,v){return s=!!i(h,m,v),s}),s}function ai(e,i,s){for(var h=-1,m=e.length;++h<m;){var v=e[h],x=i(v);if(x!=null&&(k===n?x===x&&!pt(x):s(x,k)))var k=x,C=v}return C}function Ed(e,i,s,h){var m=e.length;for(s=ie(s),s<0&&(s=-s>m?0:m+s),h=h===n||h>m?m:ie(h),h<0&&(h+=m),h=s>h?0:ul(h);s<h;)e[s++]=i;return e}function Gs(e,i){var s=[];return vn(e,function(h,m,v){i(h,m,v)&&s.push(h)}),s}function qe(e,i,s,h,m){var v=-1,x=e.length;for(s||(s=mp),m||(m=[]);++v<x;){var k=e[v];i>0&&s(k)?i>1?qe(k,i-1,s,h,m):yn(m,k):h||(m[m.length]=k)}return m}var po=wu(),Vs=wu(!0);function Ht(e,i){return e&&po(e,i,$e)}function go(e,i){return e&&Vs(e,i,$e)}function si(e,i){return mn(i,function(s){return ln(e[s])})}function Nn(e,i){i=_n(i,e);for(var s=0,h=i.length;e!=null&&s<h;)e=e[Ut(i[s++])];return s&&s==h?e:n}function Qs(e,i,s){var h=i(e);return re(e)?h:yn(h,s(e))}function Qe(e){return e==null?e===n?qi:Rr:Dn&&Dn in ve(e)?cp(e):kp(e)}function mo(e,i){return e>i}function Ad(e,i){return e!=null&&we.call(e,i)}function Pd(e,i){return e!=null&&i in ve(e)}function Md(e,i,s){return e>=He(i,s)&&e<Ne(i,s)}function yo(e,i,s){for(var h=s?Ji:qr,m=e[0].length,v=e.length,x=v,k=A(v),C=1/0,L=[];x--;){var R=e[x];x&&i&&(R=Ce(R,ht(i))),C=He(R.length,C),k[x]=!s&&(i||m>=120&&R.length>=120)?new Ln(x&&R):n}R=e[0];var N=-1,q=k[0];e:for(;++N<m&&L.length<C;){var G=R[N],J=i?i(G):G;if(G=s||G!==0?G:0,!(q?cr(q,J):h(L,J,s))){for(x=v;--x;){var oe=k[x];if(!(oe?cr(oe,J):h(e[x],J,s)))continue e}q&&q.push(J),L.push(G)}}return L}function Od(e,i,s,h){return Ht(e,function(m,v,x){i(h,s(m),v,x)}),h}function wr(e,i,s){i=_n(i,e),e=Lu(e,i);var h=e==null?e:e[Ut(Ct(i))];return h==null?n:ft(h,e,s)}function js(e){return Me(e)&&Qe(e)==Xe}function Dd(e){return Me(e)&&Qe(e)==$}function Fd(e){return Me(e)&&Qe(e)==wt}function br(e,i,s,h,m){return e===i?!0:e==null||i==null||!Me(e)&&!Me(i)?e!==e&&i!==i:Ld(e,i,s,h,br,m)}function Ld(e,i,s,h,m,v){var x=re(e),k=re(i),C=x?Pe:Ye(e),L=k?Pe:Ye(i);C=C==Xe?bt:C,L=L==Xe?bt:L;var R=C==bt,N=L==bt,q=C==L;if(q&&Sn(e)){if(!Sn(i))return!1;x=!0,R=!1}if(q&&!R)return v||(v=new Rt),x||ar(e)?Eu(e,i,s,h,m,v):up(e,i,C,s,h,m,v);if(!(s&T)){var G=R&&we.call(e,"__wrapped__"),J=N&&we.call(i,"__wrapped__");if(G||J){var oe=G?e.value():e,Z=J?i.value():i;return v||(v=new Rt),m(oe,Z,s,h,v)}}return q?(v||(v=new Rt),lp(e,i,s,h,m,v)):!1}function Rd(e){return Me(e)&&Ye(e)==ut}function wo(e,i,s,h){var m=s.length,v=m,x=!h;if(e==null)return!v;for(e=ve(e);m--;){var k=s[m];if(x&&k[2]?k[1]!==e[k[0]]:!(k[0]in e))return!1}for(;++m<v;){k=s[m];var C=k[0],L=e[C],R=k[1];if(x&&k[2]){if(L===n&&!(C in e))return!1}else{var N=new Rt;if(h)var q=h(L,R,C,e,i,N);if(!(q===n?br(R,L,T|P,h,N):q))return!1}}return!0}function Ks(e){if(!Ee(e)||wp(e))return!1;var i=ln(e)?Rh:Cf;return i.test($n(e))}function Nd(e){return Me(e)&&Qe(e)==gn}function Bd(e){return Me(e)&&Ye(e)==lt}function $d(e){return Me(e)&&Si(e.length)&&!!Ie[Qe(e)]}function Xs(e){return typeof e=="function"?e:e==null?nt:typeof e=="object"?re(e)?eu(e[0],e[1]):Zs(e):bl(e)}function bo(e){if(!_r(e))return qh(e);var i=[];for(var s in ve(e))we.call(e,s)&&s!="constructor"&&i.push(s);return i}function Wd(e){if(!Ee(e))return _p(e);var i=_r(e),s=[];for(var h in e)h=="constructor"&&(i||!we.call(e,h))||s.push(h);return s}function vo(e,i){return e<i}function Js(e,i){var s=-1,h=et(e)?A(e.length):[];return vn(e,function(m,v,x){h[++s]=i(m,v,x)}),h}function Zs(e){var i=Lo(e);return i.length==1&&i[0][2]?Du(i[0][0],i[0][1]):function(s){return s===e||wo(s,e,i)}}function eu(e,i){return No(e)&&Ou(i)?Du(Ut(e),i):function(s){var h=Vo(s,e);return h===n&&h===i?Qo(s,e):br(i,h,T|P)}}function ui(e,i,s,h,m){e!==i&&po(i,function(v,x){if(m||(m=new Rt),Ee(v))zd(e,i,x,s,ui,h,m);else{var k=h?h($o(e,x),v,x+"",e,i,m):n;k===n&&(k=v),fo(e,x,k)}},tt)}function zd(e,i,s,h,m,v,x){var k=$o(e,s),C=$o(i,s),L=x.get(C);if(L){fo(e,s,L);return}var R=v?v(k,C,s+"",e,i,x):n,N=R===n;if(N){var q=re(C),G=!q&&Sn(C),J=!q&&!G&&ar(C);R=C,q||G||J?re(k)?R=k:Oe(k)?R=Ze(k):G?(N=!1,R=hu(C,!0)):J?(N=!1,R=du(C,!0)):R=[]:Sr(C)||Wn(C)?(R=k,Wn(k)?R=ll(k):(!Ee(k)||ln(k))&&(R=Mu(C))):N=!1}N&&(x.set(C,R),m(R,C,h,v,x),x.delete(C)),fo(e,s,R)}function tu(e,i){var s=e.length;if(s)return i+=i<0?s:0,un(i,s)?e[i]:n}function nu(e,i,s){i.length?i=Ce(i,function(v){return re(v)?function(x){return Nn(x,v.length===1?v[0]:v)}:v}):i=[nt];var h=-1;i=Ce(i,ht(K()));var m=Js(e,function(v,x,k){var C=Ce(i,function(L){return L(v)});return{criteria:C,index:++h,value:v}});return ph(m,function(v,x){return ep(v,x,s)})}function qd(e,i){return ru(e,i,function(s,h){return Qo(e,h)})}function ru(e,i,s){for(var h=-1,m=i.length,v={};++h<m;){var x=i[h],k=Nn(e,x);s(k,x)&&vr(v,_n(x,e),k)}return v}function Hd(e){return function(i){return Nn(i,e)}}function xo(e,i,s,h){var m=h?dh:jn,v=-1,x=i.length,k=e;for(e===i&&(i=Ze(i)),s&&(k=Ce(e,ht(s)));++v<x;)for(var C=0,L=i[v],R=s?s(L):L;(C=m(k,R,C,h))>-1;)k!==e&&Jr.call(k,C,1),Jr.call(e,C,1);return e}function iu(e,i){for(var s=e?i.length:0,h=s-1;s--;){var m=i[s];if(s==h||m!==v){var v=m;un(m)?Jr.call(e,m,1):Io(e,m)}}return e}function _o(e,i){return e+ti(Bs()*(i-e+1))}function Yd(e,i,s,h){for(var m=-1,v=Ne(ei((i-e)/(s||1)),0),x=A(v);v--;)x[h?v:++m]=e,e+=s;return x}function ko(e,i){var s="";if(!e||i<1||i>Le)return s;do i%2&&(s+=e),i=ti(i/2),i&&(e+=e);while(i);return s}function se(e,i){return Wo(Fu(e,i,nt),e+"")}function Ud(e){return zs(sr(e))}function Gd(e,i){var s=sr(e);return wi(s,Rn(i,0,s.length))}function vr(e,i,s,h){if(!Ee(e))return e;i=_n(i,e);for(var m=-1,v=i.length,x=v-1,k=e;k!=null&&++m<v;){var C=Ut(i[m]),L=s;if(C==="__proto__"||C==="constructor"||C==="prototype")return e;if(m!=x){var R=k[C];L=h?h(R,C,k):n,L===n&&(L=Ee(R)?R:un(i[m+1])?[]:{})}mr(k,C,L),k=k[C]}return e}var ou=ni?function(e,i){return ni.set(e,i),e}:nt,Vd=Zr?function(e,i){return Zr(e,"toString",{configurable:!0,enumerable:!1,value:Ko(i),writable:!0})}:nt;function Qd(e){return wi(sr(e))}function It(e,i,s){var h=-1,m=e.length;i<0&&(i=-i>m?0:m+i),s=s>m?m:s,s<0&&(s+=m),m=i>s?0:s-i>>>0,i>>>=0;for(var v=A(m);++h<m;)v[h]=e[h+i];return v}function jd(e,i){var s;return vn(e,function(h,m,v){return s=i(h,m,v),!s}),!!s}function li(e,i,s){var h=0,m=e==null?h:e.length;if(typeof i=="number"&&i===i&&m<=S){for(;h<m;){var v=h+m>>>1,x=e[v];x!==null&&!pt(x)&&(s?x<=i:x<i)?h=v+1:m=v}return m}return So(e,i,nt,s)}function So(e,i,s,h){var m=0,v=e==null?0:e.length;if(v===0)return 0;i=s(i);for(var x=i!==i,k=i===null,C=pt(i),L=i===n;m<v;){var R=ti((m+v)/2),N=s(e[R]),q=N!==n,G=N===null,J=N===N,oe=pt(N);if(x)var Z=h||J;else L?Z=J&&(h||q):k?Z=J&&q&&(h||!G):C?Z=J&&q&&!G&&(h||!oe):G||oe?Z=!1:Z=h?N<=i:N<i;Z?m=R+1:v=R}return He(v,Ot)}function au(e,i){for(var s=-1,h=e.length,m=0,v=[];++s<h;){var x=e[s],k=i?i(x):x;if(!s||!Nt(k,C)){var C=k;v[m++]=x===0?0:x}}return v}function su(e){return typeof e=="number"?e:pt(e)?_:+e}function dt(e){if(typeof e=="string")return e;if(re(e))return Ce(e,dt)+"";if(pt(e))return $s?$s.call(e):"";var i=e+"";return i=="0"&&1/e==-Se?"-0":i}function xn(e,i,s){var h=-1,m=qr,v=e.length,x=!0,k=[],C=k;if(s)x=!1,m=Ji;else if(v>=a){var L=i?null:ap(e);if(L)return Yr(L);x=!1,m=cr,C=new Ln}else C=i?[]:k;e:for(;++h<v;){var R=e[h],N=i?i(R):R;if(R=s||R!==0?R:0,x&&N===N){for(var q=C.length;q--;)if(C[q]===N)continue e;i&&C.push(N),k.push(R)}else m(C,N,s)||(C!==k&&C.push(N),k.push(R))}return k}function Io(e,i){return i=_n(i,e),e=Lu(e,i),e==null||delete e[Ut(Ct(i))]}function uu(e,i,s,h){return vr(e,i,s(Nn(e,i)),h)}function ci(e,i,s,h){for(var m=e.length,v=h?m:-1;(h?v--:++v<m)&&i(e[v],v,e););return s?It(e,h?0:v,h?v+1:m):It(e,h?v+1:0,h?m:v)}function lu(e,i){var s=e;return s instanceof le&&(s=s.value()),Zi(i,function(h,m){return m.func.apply(m.thisArg,yn([h],m.args))},s)}function Co(e,i,s){var h=e.length;if(h<2)return h?xn(e[0]):[];for(var m=-1,v=A(h);++m<h;)for(var x=e[m],k=-1;++k<h;)k!=m&&(v[m]=yr(v[m]||x,e[k],i,s));return xn(qe(v,1),i,s)}function cu(e,i,s){for(var h=-1,m=e.length,v=i.length,x={};++h<m;){var k=h<v?i[h]:n;s(x,e[h],k)}return x}function To(e){return Oe(e)?e:[]}function Eo(e){return typeof e=="function"?e:nt}function _n(e,i){return re(e)?e:No(e,i)?[e]:$u(ye(e))}var Kd=se;function kn(e,i,s){var h=e.length;return s=s===n?h:s,!i&&s>=h?e:It(e,i,s)}var fu=Nh||function(e){return ze.clearTimeout(e)};function hu(e,i){if(i)return e.slice();var s=e.length,h=Ds?Ds(s):new e.constructor(s);return e.copy(h),h}function Ao(e){var i=new e.constructor(e.byteLength);return new Kr(i).set(new Kr(e)),i}function Xd(e,i){var s=i?Ao(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.byteLength)}function Jd(e){var i=new e.constructor(e.source,ja.exec(e));return i.lastIndex=e.lastIndex,i}function Zd(e){return gr?ve(gr.call(e)):{}}function du(e,i){var s=i?Ao(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}function pu(e,i){if(e!==i){var s=e!==n,h=e===null,m=e===e,v=pt(e),x=i!==n,k=i===null,C=i===i,L=pt(i);if(!k&&!L&&!v&&e>i||v&&x&&C&&!k&&!L||h&&x&&C||!s&&C||!m)return 1;if(!h&&!v&&!L&&e<i||L&&s&&m&&!h&&!v||k&&s&&m||!x&&m||!C)return-1}return 0}function ep(e,i,s){for(var h=-1,m=e.criteria,v=i.criteria,x=m.length,k=s.length;++h<x;){var C=pu(m[h],v[h]);if(C){if(h>=k)return C;var L=s[h];return C*(L=="desc"?-1:1)}}return e.index-i.index}function gu(e,i,s,h){for(var m=-1,v=e.length,x=s.length,k=-1,C=i.length,L=Ne(v-x,0),R=A(C+L),N=!h;++k<C;)R[k]=i[k];for(;++m<x;)(N||m<v)&&(R[s[m]]=e[m]);for(;L--;)R[k++]=e[m++];return R}function mu(e,i,s,h){for(var m=-1,v=e.length,x=-1,k=s.length,C=-1,L=i.length,R=Ne(v-k,0),N=A(R+L),q=!h;++m<R;)N[m]=e[m];for(var G=m;++C<L;)N[G+C]=i[C];for(;++x<k;)(q||m<v)&&(N[G+s[x]]=e[m++]);return N}function Ze(e,i){var s=-1,h=e.length;for(i||(i=A(h));++s<h;)i[s]=e[s];return i}function Yt(e,i,s,h){var m=!s;s||(s={});for(var v=-1,x=i.length;++v<x;){var k=i[v],C=h?h(s[k],e[k],k,s,e):n;C===n&&(C=e[k]),m?on(s,k,C):mr(s,k,C)}return s}function tp(e,i){return Yt(e,Ro(e),i)}function np(e,i){return Yt(e,Au(e),i)}function fi(e,i){return function(s,h){var m=re(s)?sh:Sd,v=i?i():{};return m(s,e,K(h,2),v)}}function rr(e){return se(function(i,s){var h=-1,m=s.length,v=m>1?s[m-1]:n,x=m>2?s[2]:n;for(v=e.length>3&&typeof v=="function"?(m--,v):n,x&&je(s[0],s[1],x)&&(v=m<3?n:v,m=1),i=ve(i);++h<m;){var k=s[h];k&&e(i,k,h,v)}return i})}function yu(e,i){return function(s,h){if(s==null)return s;if(!et(s))return e(s,h);for(var m=s.length,v=i?m:-1,x=ve(s);(i?v--:++v<m)&&h(x[v],v,x)!==!1;);return s}}function wu(e){return function(i,s,h){for(var m=-1,v=ve(i),x=h(i),k=x.length;k--;){var C=x[e?k:++m];if(s(v[C],C,v)===!1)break}return i}}function rp(e,i,s){var h=i&B,m=xr(e);function v(){var x=this&&this!==ze&&this instanceof v?m:e;return x.apply(h?s:this,arguments)}return v}function bu(e){return function(i){i=ye(i);var s=Kn(i)?Lt(i):n,h=s?s[0]:i.charAt(0),m=s?kn(s,1).join(""):i.slice(1);return h[e]()+m}}function ir(e){return function(i){return Zi(yl(ml(i).replace(Vf,"")),e,"")}}function xr(e){return function(){var i=arguments;switch(i.length){case 0:return new e;case 1:return new e(i[0]);case 2:return new e(i[0],i[1]);case 3:return new e(i[0],i[1],i[2]);case 4:return new e(i[0],i[1],i[2],i[3]);case 5:return new e(i[0],i[1],i[2],i[3],i[4]);case 6:return new e(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new e(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var s=nr(e.prototype),h=e.apply(s,i);return Ee(h)?h:s}}function ip(e,i,s){var h=xr(e);function m(){for(var v=arguments.length,x=A(v),k=v,C=or(m);k--;)x[k]=arguments[k];var L=v<3&&x[0]!==C&&x[v-1]!==C?[]:wn(x,C);if(v-=L.length,v<s)return Su(e,i,hi,m.placeholder,n,x,L,n,n,s-v);var R=this&&this!==ze&&this instanceof m?h:e;return ft(R,this,x)}return m}function vu(e){return function(i,s,h){var m=ve(i);if(!et(i)){var v=K(s,3);i=$e(i),s=function(k){return v(m[k],k,m)}}var x=e(i,s,h);return x>-1?m[v?i[x]:x]:n}}function xu(e){return sn(function(i){var s=i.length,h=s,m=kt.prototype.thru;for(e&&i.reverse();h--;){var v=i[h];if(typeof v!="function")throw new _t(l);if(m&&!x&&mi(v)=="wrapper")var x=new kt([],!0)}for(h=x?h:s;++h<s;){v=i[h];var k=mi(v),C=k=="wrapper"?Fo(v):n;C&&Bo(C[0])&&C[1]==(U|z|O|Q)&&!C[4].length&&C[9]==1?x=x[mi(C[0])].apply(x,C[3]):x=v.length==1&&Bo(v)?x[k]():x.thru(v)}return function(){var L=arguments,R=L[0];if(x&&L.length==1&&re(R))return x.plant(R).value();for(var N=0,q=s?i[N].apply(this,L):R;++N<s;)q=i[N].call(this,q);return q}})}function hi(e,i,s,h,m,v,x,k,C,L){var R=i&U,N=i&B,q=i&D,G=i&(z|W),J=i&ee,oe=q?n:xr(e);function Z(){for(var ue=arguments.length,fe=A(ue),gt=ue;gt--;)fe[gt]=arguments[gt];if(G)var Ke=or(Z),mt=mh(fe,Ke);if(h&&(fe=gu(fe,h,m,G)),v&&(fe=mu(fe,v,x,G)),ue-=mt,G&&ue<L){var De=wn(fe,Ke);return Su(e,i,hi,Z.placeholder,s,fe,De,k,C,L-ue)}var Bt=N?s:this,fn=q?Bt[e]:e;return ue=fe.length,k?fe=Sp(fe,k):J&&ue>1&&fe.reverse(),R&&C<ue&&(fe.length=C),this&&this!==ze&&this instanceof Z&&(fn=oe||xr(fn)),fn.apply(Bt,fe)}return Z}function _u(e,i){return function(s,h){return Od(s,e,i(h),{})}}function di(e,i){return function(s,h){var m;if(s===n&&h===n)return i;if(s!==n&&(m=s),h!==n){if(m===n)return h;typeof s=="string"||typeof h=="string"?(s=dt(s),h=dt(h)):(s=su(s),h=su(h)),m=e(s,h)}return m}}function Po(e){return sn(function(i){return i=Ce(i,ht(K())),se(function(s){var h=this;return e(i,function(m){return ft(m,h,s)})})})}function pi(e,i){i=i===n?" ":dt(i);var s=i.length;if(s<2)return s?ko(i,e):i;var h=ko(i,ei(e/Xn(i)));return Kn(i)?kn(Lt(h),0,e).join(""):h.slice(0,e)}function op(e,i,s,h){var m=i&B,v=xr(e);function x(){for(var k=-1,C=arguments.length,L=-1,R=h.length,N=A(R+C),q=this&&this!==ze&&this instanceof x?v:e;++L<R;)N[L]=h[L];for(;C--;)N[L++]=arguments[++k];return ft(q,m?s:this,N)}return x}function ku(e){return function(i,s,h){return h&&typeof h!="number"&&je(i,s,h)&&(s=h=n),i=cn(i),s===n?(s=i,i=0):s=cn(s),h=h===n?i<s?1:-1:cn(h),Yd(i,s,h,e)}}function gi(e){return function(i,s){return typeof i=="string"&&typeof s=="string"||(i=Tt(i),s=Tt(s)),e(i,s)}}function Su(e,i,s,h,m,v,x,k,C,L){var R=i&z,N=R?x:n,q=R?n:x,G=R?v:n,J=R?n:v;i|=R?O:E,i&=~(R?E:O),i&H||(i&=-4);var oe=[e,i,m,G,N,J,q,k,C,L],Z=s.apply(n,oe);return Bo(e)&&Ru(Z,oe),Z.placeholder=h,Nu(Z,e,i)}function Mo(e){var i=Re[e];return function(s,h){if(s=Tt(s),h=h==null?0:He(ie(h),292),h&&Ns(s)){var m=(ye(s)+"e").split("e"),v=i(m[0]+"e"+(+m[1]+h));return m=(ye(v)+"e").split("e"),+(m[0]+"e"+(+m[1]-h))}return i(s)}}var ap=er&&1/Yr(new er([,-0]))[1]==Se?function(e){return new er(e)}:Zo;function Iu(e){return function(i){var s=Ye(i);return s==ut?ao(i):s==lt?kh(i):gh(i,e(i))}}function an(e,i,s,h,m,v,x,k){var C=i&D;if(!C&&typeof e!="function")throw new _t(l);var L=h?h.length:0;if(L||(i&=-97,h=m=n),x=x===n?x:Ne(ie(x),0),k=k===n?k:ie(k),L-=m?m.length:0,i&E){var R=h,N=m;h=m=n}var q=C?n:Fo(e),G=[e,i,s,h,m,R,N,v,x,k];if(q&&xp(G,q),e=G[0],i=G[1],s=G[2],h=G[3],m=G[4],k=G[9]=G[9]===n?C?0:e.length:Ne(G[9]-L,0),!k&&i&(z|W)&&(i&=-25),!i||i==B)var J=rp(e,i,s);else i==z||i==W?J=ip(e,i,k):(i==O||i==(B|O))&&!m.length?J=op(e,i,s,h):J=hi.apply(n,G);var oe=q?ou:Ru;return Nu(oe(J,G),e,i)}function Cu(e,i,s,h){return e===n||Nt(e,Zn[s])&&!we.call(h,s)?i:e}function Tu(e,i,s,h,m,v){return Ee(e)&&Ee(i)&&(v.set(i,e),ui(e,i,n,Tu,v),v.delete(i)),e}function sp(e){return Sr(e)?n:e}function Eu(e,i,s,h,m,v){var x=s&T,k=e.length,C=i.length;if(k!=C&&!(x&&C>k))return!1;var L=v.get(e),R=v.get(i);if(L&&R)return L==i&&R==e;var N=-1,q=!0,G=s&P?new Ln:n;for(v.set(e,i),v.set(i,e);++N<k;){var J=e[N],oe=i[N];if(h)var Z=x?h(oe,J,N,i,e,v):h(J,oe,N,e,i,v);if(Z!==n){if(Z)continue;q=!1;break}if(G){if(!eo(i,function(ue,fe){if(!cr(G,fe)&&(J===ue||m(J,ue,s,h,v)))return G.push(fe)})){q=!1;break}}else if(!(J===oe||m(J,oe,s,h,v))){q=!1;break}}return v.delete(e),v.delete(i),q}function up(e,i,s,h,m,v,x){switch(s){case X:if(e.byteLength!=i.byteLength||e.byteOffset!=i.byteOffset)return!1;e=e.buffer,i=i.buffer;case $:return!(e.byteLength!=i.byteLength||!v(new Kr(e),new Kr(i)));case Je:case wt:case pn:return Nt(+e,+i);case Zt:return e.name==i.name&&e.message==i.message;case gn:case Pn:return e==i+"";case ut:var k=ao;case lt:var C=h&T;if(k||(k=Yr),e.size!=i.size&&!C)return!1;var L=x.get(e);if(L)return L==i;h|=P,x.set(e,i);var R=Eu(k(e),k(i),h,m,v,x);return x.delete(e),R;case Vn:if(gr)return gr.call(e)==gr.call(i)}return!1}function lp(e,i,s,h,m,v){var x=s&T,k=Oo(e),C=k.length,L=Oo(i),R=L.length;if(C!=R&&!x)return!1;for(var N=C;N--;){var q=k[N];if(!(x?q in i:we.call(i,q)))return!1}var G=v.get(e),J=v.get(i);if(G&&J)return G==i&&J==e;var oe=!0;v.set(e,i),v.set(i,e);for(var Z=x;++N<C;){q=k[N];var ue=e[q],fe=i[q];if(h)var gt=x?h(fe,ue,q,i,e,v):h(ue,fe,q,e,i,v);if(!(gt===n?ue===fe||m(ue,fe,s,h,v):gt)){oe=!1;break}Z||(Z=q=="constructor")}if(oe&&!Z){var Ke=e.constructor,mt=i.constructor;Ke!=mt&&"constructor"in e&&"constructor"in i&&!(typeof Ke=="function"&&Ke instanceof Ke&&typeof mt=="function"&&mt instanceof mt)&&(oe=!1)}return v.delete(e),v.delete(i),oe}function sn(e){return Wo(Fu(e,n,Hu),e+"")}function Oo(e){return Qs(e,$e,Ro)}function Do(e){return Qs(e,tt,Au)}var Fo=ni?function(e){return ni.get(e)}:Zo;function mi(e){for(var i=e.name+"",s=tr[i],h=we.call(tr,i)?s.length:0;h--;){var m=s[h],v=m.func;if(v==null||v==e)return m.name}return i}function or(e){var i=we.call(w,"placeholder")?w:e;return i.placeholder}function K(){var e=w.iteratee||Xo;return e=e===Xo?Xs:e,arguments.length?e(arguments[0],arguments[1]):e}function yi(e,i){var s=e.__data__;return yp(i)?s[typeof i=="string"?"string":"hash"]:s.map}function Lo(e){for(var i=$e(e),s=i.length;s--;){var h=i[s],m=e[h];i[s]=[h,m,Ou(m)]}return i}function Bn(e,i){var s=vh(e,i);return Ks(s)?s:n}function cp(e){var i=we.call(e,Dn),s=e[Dn];try{e[Dn]=n;var h=!0}catch{}var m=Qr.call(e);return h&&(i?e[Dn]=s:delete e[Dn]),m}var Ro=uo?function(e){return e==null?[]:(e=ve(e),mn(uo(e),function(i){return Ls.call(e,i)}))}:ea,Au=uo?function(e){for(var i=[];e;)yn(i,Ro(e)),e=Xr(e);return i}:ea,Ye=Qe;(lo&&Ye(new lo(new ArrayBuffer(1)))!=X||hr&&Ye(new hr)!=ut||co&&Ye(co.resolve())!=Nr||er&&Ye(new er)!=lt||dr&&Ye(new dr)!=Mn)&&(Ye=function(e){var i=Qe(e),s=i==bt?e.constructor:n,h=s?$n(s):"";if(h)switch(h){case Gh:return X;case Vh:return ut;case Qh:return Nr;case jh:return lt;case Kh:return Mn}return i});function fp(e,i,s){for(var h=-1,m=s.length;++h<m;){var v=s[h],x=v.size;switch(v.type){case"drop":e+=x;break;case"dropRight":i-=x;break;case"take":i=He(i,e+x);break;case"takeRight":e=Ne(e,i-x);break}}return{start:e,end:i}}function hp(e){var i=e.match(wf);return i?i[1].split(bf):[]}function Pu(e,i,s){i=_n(i,e);for(var h=-1,m=i.length,v=!1;++h<m;){var x=Ut(i[h]);if(!(v=e!=null&&s(e,x)))break;e=e[x]}return v||++h!=m?v:(m=e==null?0:e.length,!!m&&Si(m)&&un(x,m)&&(re(e)||Wn(e)))}function dp(e){var i=e.length,s=new e.constructor(i);return i&&typeof e[0]=="string"&&we.call(e,"index")&&(s.index=e.index,s.input=e.input),s}function Mu(e){return typeof e.constructor=="function"&&!_r(e)?nr(Xr(e)):{}}function pp(e,i,s){var h=e.constructor;switch(i){case $:return Ao(e);case Je:case wt:return new h(+e);case X:return Xd(e,s);case ae:case de:case Ve:case Dt:case ct:case en:case tn:case We:case qt:return du(e,s);case ut:return new h;case pn:case Pn:return new h(e);case gn:return Jd(e);case lt:return new h;case Vn:return Zd(e)}}function gp(e,i){var s=i.length;if(!s)return e;var h=s-1;return i[h]=(s>1?"& ":"")+i[h],i=i.join(s>2?", ":" "),e.replace(yf,`{
/* [wrapped with `+i+`] */
`)}function mp(e){return re(e)||Wn(e)||!!(Rs&&e&&e[Rs])}function un(e,i){var s=typeof e;return i=i??Le,!!i&&(s=="number"||s!="symbol"&&Ef.test(e))&&e>-1&&e%1==0&&e<i}function je(e,i,s){if(!Ee(s))return!1;var h=typeof i;return(h=="number"?et(s)&&un(i,s.length):h=="string"&&i in s)?Nt(s[i],e):!1}function No(e,i){if(re(e))return!1;var s=typeof e;return s=="number"||s=="symbol"||s=="boolean"||e==null||pt(e)?!0:df.test(e)||!hf.test(e)||i!=null&&e in ve(i)}function yp(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null}function Bo(e){var i=mi(e),s=w[i];if(typeof s!="function"||!(i in le.prototype))return!1;if(e===s)return!0;var h=Fo(s);return!!h&&e===h[0]}function wp(e){return!!Os&&Os in e}var bp=Gr?ln:ta;function _r(e){var i=e&&e.constructor,s=typeof i=="function"&&i.prototype||Zn;return e===s}function Ou(e){return e===e&&!Ee(e)}function Du(e,i){return function(s){return s==null?!1:s[e]===i&&(i!==n||e in ve(s))}}function vp(e){var i=_i(e,function(h){return s.size===d&&s.clear(),h}),s=i.cache;return i}function xp(e,i){var s=e[1],h=i[1],m=s|h,v=m<(B|D|U),x=h==U&&s==z||h==U&&s==Q&&e[7].length<=i[8]||h==(U|Q)&&i[7].length<=i[8]&&s==z;if(!(v||x))return e;h&B&&(e[2]=i[2],m|=s&B?0:H);var k=i[3];if(k){var C=e[3];e[3]=C?gu(C,k,i[4]):k,e[4]=C?wn(e[3],p):i[4]}return k=i[5],k&&(C=e[5],e[5]=C?mu(C,k,i[6]):k,e[6]=C?wn(e[5],p):i[6]),k=i[7],k&&(e[7]=k),h&U&&(e[8]=e[8]==null?i[8]:He(e[8],i[8])),e[9]==null&&(e[9]=i[9]),e[0]=i[0],e[1]=m,e}function _p(e){var i=[];if(e!=null)for(var s in ve(e))i.push(s);return i}function kp(e){return Qr.call(e)}function Fu(e,i,s){return i=Ne(i===n?e.length-1:i,0),function(){for(var h=arguments,m=-1,v=Ne(h.length-i,0),x=A(v);++m<v;)x[m]=h[i+m];m=-1;for(var k=A(i+1);++m<i;)k[m]=h[m];return k[i]=s(x),ft(e,this,k)}}function Lu(e,i){return i.length<2?e:Nn(e,It(i,0,-1))}function Sp(e,i){for(var s=e.length,h=He(i.length,s),m=Ze(e);h--;){var v=i[h];e[h]=un(v,s)?m[v]:n}return e}function $o(e,i){if(!(i==="constructor"&&typeof e[i]=="function")&&i!="__proto__")return e[i]}var Ru=Bu(ou),kr=$h||function(e,i){return ze.setTimeout(e,i)},Wo=Bu(Vd);function Nu(e,i,s){var h=i+"";return Wo(e,gp(h,Ip(hp(h),s)))}function Bu(e){var i=0,s=0;return function(){var h=Hh(),m=me-(h-s);if(s=h,m>0){if(++i>=V)return arguments[0]}else i=0;return e.apply(n,arguments)}}function wi(e,i){var s=-1,h=e.length,m=h-1;for(i=i===n?h:i;++s<i;){var v=_o(s,m),x=e[v];e[v]=e[s],e[s]=x}return e.length=i,e}var $u=vp(function(e){var i=[];return e.charCodeAt(0)===46&&i.push(""),e.replace(pf,function(s,h,m,v){i.push(m?v.replace(_f,"$1"):h||s)}),i});function Ut(e){if(typeof e=="string"||pt(e))return e;var i=e+"";return i=="0"&&1/e==-Se?"-0":i}function $n(e){if(e!=null){try{return Vr.call(e)}catch{}try{return e+""}catch{}}return""}function Ip(e,i){return xt(st,function(s){var h="_."+s[0];i&s[1]&&!qr(e,h)&&e.push(h)}),e.sort()}function Wu(e){if(e instanceof le)return e.clone();var i=new kt(e.__wrapped__,e.__chain__);return i.__actions__=Ze(e.__actions__),i.__index__=e.__index__,i.__values__=e.__values__,i}function Cp(e,i,s){(s?je(e,i,s):i===n)?i=1:i=Ne(ie(i),0);var h=e==null?0:e.length;if(!h||i<1)return[];for(var m=0,v=0,x=A(ei(h/i));m<h;)x[v++]=It(e,m,m+=i);return x}function Tp(e){for(var i=-1,s=e==null?0:e.length,h=0,m=[];++i<s;){var v=e[i];v&&(m[h++]=v)}return m}function Ep(){var e=arguments.length;if(!e)return[];for(var i=A(e-1),s=arguments[0],h=e;h--;)i[h-1]=arguments[h];return yn(re(s)?Ze(s):[s],qe(i,1))}var Ap=se(function(e,i){return Oe(e)?yr(e,qe(i,1,Oe,!0)):[]}),Pp=se(function(e,i){var s=Ct(i);return Oe(s)&&(s=n),Oe(e)?yr(e,qe(i,1,Oe,!0),K(s,2)):[]}),Mp=se(function(e,i){var s=Ct(i);return Oe(s)&&(s=n),Oe(e)?yr(e,qe(i,1,Oe,!0),n,s):[]});function Op(e,i,s){var h=e==null?0:e.length;return h?(i=s||i===n?1:ie(i),It(e,i<0?0:i,h)):[]}function Dp(e,i,s){var h=e==null?0:e.length;return h?(i=s||i===n?1:ie(i),i=h-i,It(e,0,i<0?0:i)):[]}function Fp(e,i){return e&&e.length?ci(e,K(i,3),!0,!0):[]}function Lp(e,i){return e&&e.length?ci(e,K(i,3),!0):[]}function Rp(e,i,s,h){var m=e==null?0:e.length;return m?(s&&typeof s!="number"&&je(e,i,s)&&(s=0,h=m),Ed(e,i,s,h)):[]}function zu(e,i,s){var h=e==null?0:e.length;if(!h)return-1;var m=s==null?0:ie(s);return m<0&&(m=Ne(h+m,0)),Hr(e,K(i,3),m)}function qu(e,i,s){var h=e==null?0:e.length;if(!h)return-1;var m=h-1;return s!==n&&(m=ie(s),m=s<0?Ne(h+m,0):He(m,h-1)),Hr(e,K(i,3),m,!0)}function Hu(e){var i=e==null?0:e.length;return i?qe(e,1):[]}function Np(e){var i=e==null?0:e.length;return i?qe(e,Se):[]}function Bp(e,i){var s=e==null?0:e.length;return s?(i=i===n?1:ie(i),qe(e,i)):[]}function $p(e){for(var i=-1,s=e==null?0:e.length,h={};++i<s;){var m=e[i];h[m[0]]=m[1]}return h}function Yu(e){return e&&e.length?e[0]:n}function Wp(e,i,s){var h=e==null?0:e.length;if(!h)return-1;var m=s==null?0:ie(s);return m<0&&(m=Ne(h+m,0)),jn(e,i,m)}function zp(e){var i=e==null?0:e.length;return i?It(e,0,-1):[]}var qp=se(function(e){var i=Ce(e,To);return i.length&&i[0]===e[0]?yo(i):[]}),Hp=se(function(e){var i=Ct(e),s=Ce(e,To);return i===Ct(s)?i=n:s.pop(),s.length&&s[0]===e[0]?yo(s,K(i,2)):[]}),Yp=se(function(e){var i=Ct(e),s=Ce(e,To);return i=typeof i=="function"?i:n,i&&s.pop(),s.length&&s[0]===e[0]?yo(s,n,i):[]});function Up(e,i){return e==null?"":zh.call(e,i)}function Ct(e){var i=e==null?0:e.length;return i?e[i-1]:n}function Gp(e,i,s){var h=e==null?0:e.length;if(!h)return-1;var m=h;return s!==n&&(m=ie(s),m=m<0?Ne(h+m,0):He(m,h-1)),i===i?Ih(e,i,m):Hr(e,Ss,m,!0)}function Vp(e,i){return e&&e.length?tu(e,ie(i)):n}var Qp=se(Uu);function Uu(e,i){return e&&e.length&&i&&i.length?xo(e,i):e}function jp(e,i,s){return e&&e.length&&i&&i.length?xo(e,i,K(s,2)):e}function Kp(e,i,s){return e&&e.length&&i&&i.length?xo(e,i,n,s):e}var Xp=sn(function(e,i){var s=e==null?0:e.length,h=ho(e,i);return iu(e,Ce(i,function(m){return un(m,s)?+m:m}).sort(pu)),h});function Jp(e,i){var s=[];if(!(e&&e.length))return s;var h=-1,m=[],v=e.length;for(i=K(i,3);++h<v;){var x=e[h];i(x,h,e)&&(s.push(x),m.push(h))}return iu(e,m),s}function zo(e){return e==null?e:Uh.call(e)}function Zp(e,i,s){var h=e==null?0:e.length;return h?(s&&typeof s!="number"&&je(e,i,s)?(i=0,s=h):(i=i==null?0:ie(i),s=s===n?h:ie(s)),It(e,i,s)):[]}function eg(e,i){return li(e,i)}function tg(e,i,s){return So(e,i,K(s,2))}function ng(e,i){var s=e==null?0:e.length;if(s){var h=li(e,i);if(h<s&&Nt(e[h],i))return h}return-1}function rg(e,i){return li(e,i,!0)}function ig(e,i,s){return So(e,i,K(s,2),!0)}function og(e,i){var s=e==null?0:e.length;if(s){var h=li(e,i,!0)-1;if(Nt(e[h],i))return h}return-1}function ag(e){return e&&e.length?au(e):[]}function sg(e,i){return e&&e.length?au(e,K(i,2)):[]}function ug(e){var i=e==null?0:e.length;return i?It(e,1,i):[]}function lg(e,i,s){return e&&e.length?(i=s||i===n?1:ie(i),It(e,0,i<0?0:i)):[]}function cg(e,i,s){var h=e==null?0:e.length;return h?(i=s||i===n?1:ie(i),i=h-i,It(e,i<0?0:i,h)):[]}function fg(e,i){return e&&e.length?ci(e,K(i,3),!1,!0):[]}function hg(e,i){return e&&e.length?ci(e,K(i,3)):[]}var dg=se(function(e){return xn(qe(e,1,Oe,!0))}),pg=se(function(e){var i=Ct(e);return Oe(i)&&(i=n),xn(qe(e,1,Oe,!0),K(i,2))}),gg=se(function(e){var i=Ct(e);return i=typeof i=="function"?i:n,xn(qe(e,1,Oe,!0),n,i)});function mg(e){return e&&e.length?xn(e):[]}function yg(e,i){return e&&e.length?xn(e,K(i,2)):[]}function wg(e,i){return i=typeof i=="function"?i:n,e&&e.length?xn(e,n,i):[]}function qo(e){if(!(e&&e.length))return[];var i=0;return e=mn(e,function(s){if(Oe(s))return i=Ne(s.length,i),!0}),io(i,function(s){return Ce(e,to(s))})}function Gu(e,i){if(!(e&&e.length))return[];var s=qo(e);return i==null?s:Ce(s,function(h){return ft(i,n,h)})}var bg=se(function(e,i){return Oe(e)?yr(e,i):[]}),vg=se(function(e){return Co(mn(e,Oe))}),xg=se(function(e){var i=Ct(e);return Oe(i)&&(i=n),Co(mn(e,Oe),K(i,2))}),_g=se(function(e){var i=Ct(e);return i=typeof i=="function"?i:n,Co(mn(e,Oe),n,i)}),kg=se(qo);function Sg(e,i){return cu(e||[],i||[],mr)}function Ig(e,i){return cu(e||[],i||[],vr)}var Cg=se(function(e){var i=e.length,s=i>1?e[i-1]:n;return s=typeof s=="function"?(e.pop(),s):n,Gu(e,s)});function Vu(e){var i=w(e);return i.__chain__=!0,i}function Tg(e,i){return i(e),e}function bi(e,i){return i(e)}var Eg=sn(function(e){var i=e.length,s=i?e[0]:0,h=this.__wrapped__,m=function(v){return ho(v,e)};return i>1||this.__actions__.length||!(h instanceof le)||!un(s)?this.thru(m):(h=h.slice(s,+s+(i?1:0)),h.__actions__.push({func:bi,args:[m],thisArg:n}),new kt(h,this.__chain__).thru(function(v){return i&&!v.length&&v.push(n),v}))});function Ag(){return Vu(this)}function Pg(){return new kt(this.value(),this.__chain__)}function Mg(){this.__values__===n&&(this.__values__=sl(this.value()));var e=this.__index__>=this.__values__.length,i=e?n:this.__values__[this.__index__++];return{done:e,value:i}}function Og(){return this}function Dg(e){for(var i,s=this;s instanceof ii;){var h=Wu(s);h.__index__=0,h.__values__=n,i?m.__wrapped__=h:i=h;var m=h;s=s.__wrapped__}return m.__wrapped__=e,i}function Fg(){var e=this.__wrapped__;if(e instanceof le){var i=e;return this.__actions__.length&&(i=new le(this)),i=i.reverse(),i.__actions__.push({func:bi,args:[zo],thisArg:n}),new kt(i,this.__chain__)}return this.thru(zo)}function Lg(){return lu(this.__wrapped__,this.__actions__)}var Rg=fi(function(e,i,s){we.call(e,s)?++e[s]:on(e,s,1)});function Ng(e,i,s){var h=re(e)?_s:Td;return s&&je(e,i,s)&&(i=n),h(e,K(i,3))}function Bg(e,i){var s=re(e)?mn:Gs;return s(e,K(i,3))}var $g=vu(zu),Wg=vu(qu);function zg(e,i){return qe(vi(e,i),1)}function qg(e,i){return qe(vi(e,i),Se)}function Hg(e,i,s){return s=s===n?1:ie(s),qe(vi(e,i),s)}function Qu(e,i){var s=re(e)?xt:vn;return s(e,K(i,3))}function ju(e,i){var s=re(e)?uh:Us;return s(e,K(i,3))}var Yg=fi(function(e,i,s){we.call(e,s)?e[s].push(i):on(e,s,[i])});function Ug(e,i,s,h){e=et(e)?e:sr(e),s=s&&!h?ie(s):0;var m=e.length;return s<0&&(s=Ne(m+s,0)),Ii(e)?s<=m&&e.indexOf(i,s)>-1:!!m&&jn(e,i,s)>-1}var Gg=se(function(e,i,s){var h=-1,m=typeof i=="function",v=et(e)?A(e.length):[];return vn(e,function(x){v[++h]=m?ft(i,x,s):wr(x,i,s)}),v}),Vg=fi(function(e,i,s){on(e,s,i)});function vi(e,i){var s=re(e)?Ce:Js;return s(e,K(i,3))}function Qg(e,i,s,h){return e==null?[]:(re(i)||(i=i==null?[]:[i]),s=h?n:s,re(s)||(s=s==null?[]:[s]),nu(e,i,s))}var jg=fi(function(e,i,s){e[s?0:1].push(i)},function(){return[[],[]]});function Kg(e,i,s){var h=re(e)?Zi:Cs,m=arguments.length<3;return h(e,K(i,4),s,m,vn)}function Xg(e,i,s){var h=re(e)?lh:Cs,m=arguments.length<3;return h(e,K(i,4),s,m,Us)}function Jg(e,i){var s=re(e)?mn:Gs;return s(e,ki(K(i,3)))}function Zg(e){var i=re(e)?zs:Ud;return i(e)}function em(e,i,s){(s?je(e,i,s):i===n)?i=1:i=ie(i);var h=re(e)?_d:Gd;return h(e,i)}function tm(e){var i=re(e)?kd:Qd;return i(e)}function nm(e){if(e==null)return 0;if(et(e))return Ii(e)?Xn(e):e.length;var i=Ye(e);return i==ut||i==lt?e.size:bo(e).length}function rm(e,i,s){var h=re(e)?eo:jd;return s&&je(e,i,s)&&(i=n),h(e,K(i,3))}var im=se(function(e,i){if(e==null)return[];var s=i.length;return s>1&&je(e,i[0],i[1])?i=[]:s>2&&je(i[0],i[1],i[2])&&(i=[i[0]]),nu(e,qe(i,1),[])}),xi=Bh||function(){return ze.Date.now()};function om(e,i){if(typeof i!="function")throw new _t(l);return e=ie(e),function(){if(--e<1)return i.apply(this,arguments)}}function Ku(e,i,s){return i=s?n:i,i=e&&i==null?e.length:i,an(e,U,n,n,n,n,i)}function Xu(e,i){var s;if(typeof i!="function")throw new _t(l);return e=ie(e),function(){return--e>0&&(s=i.apply(this,arguments)),e<=1&&(i=n),s}}var Ho=se(function(e,i,s){var h=B;if(s.length){var m=wn(s,or(Ho));h|=O}return an(e,h,i,s,m)}),Ju=se(function(e,i,s){var h=B|D;if(s.length){var m=wn(s,or(Ju));h|=O}return an(i,h,e,s,m)});function Zu(e,i,s){i=s?n:i;var h=an(e,z,n,n,n,n,n,i);return h.placeholder=Zu.placeholder,h}function el(e,i,s){i=s?n:i;var h=an(e,W,n,n,n,n,n,i);return h.placeholder=el.placeholder,h}function tl(e,i,s){var h,m,v,x,k,C,L=0,R=!1,N=!1,q=!0;if(typeof e!="function")throw new _t(l);i=Tt(i)||0,Ee(s)&&(R=!!s.leading,N="maxWait"in s,v=N?Ne(Tt(s.maxWait)||0,i):v,q="trailing"in s?!!s.trailing:q);function G(De){var Bt=h,fn=m;return h=m=n,L=De,x=e.apply(fn,Bt),x}function J(De){return L=De,k=kr(ue,i),R?G(De):x}function oe(De){var Bt=De-C,fn=De-L,vl=i-Bt;return N?He(vl,v-fn):vl}function Z(De){var Bt=De-C,fn=De-L;return C===n||Bt>=i||Bt<0||N&&fn>=v}function ue(){var De=xi();if(Z(De))return fe(De);k=kr(ue,oe(De))}function fe(De){return k=n,q&&h?G(De):(h=m=n,x)}function gt(){k!==n&&fu(k),L=0,h=C=m=k=n}function Ke(){return k===n?x:fe(xi())}function mt(){var De=xi(),Bt=Z(De);if(h=arguments,m=this,C=De,Bt){if(k===n)return J(C);if(N)return fu(k),k=kr(ue,i),G(C)}return k===n&&(k=kr(ue,i)),x}return mt.cancel=gt,mt.flush=Ke,mt}var am=se(function(e,i){return Ys(e,1,i)}),sm=se(function(e,i,s){return Ys(e,Tt(i)||0,s)});function um(e){return an(e,ee)}function _i(e,i){if(typeof e!="function"||i!=null&&typeof i!="function")throw new _t(l);var s=function(){var h=arguments,m=i?i.apply(this,h):h[0],v=s.cache;if(v.has(m))return v.get(m);var x=e.apply(this,h);return s.cache=v.set(m,x)||v,x};return s.cache=new(_i.Cache||rn),s}_i.Cache=rn;function ki(e){if(typeof e!="function")throw new _t(l);return function(){var i=arguments;switch(i.length){case 0:return!e.call(this);case 1:return!e.call(this,i[0]);case 2:return!e.call(this,i[0],i[1]);case 3:return!e.call(this,i[0],i[1],i[2])}return!e.apply(this,i)}}function lm(e){return Xu(2,e)}var cm=Kd(function(e,i){i=i.length==1&&re(i[0])?Ce(i[0],ht(K())):Ce(qe(i,1),ht(K()));var s=i.length;return se(function(h){for(var m=-1,v=He(h.length,s);++m<v;)h[m]=i[m].call(this,h[m]);return ft(e,this,h)})}),Yo=se(function(e,i){var s=wn(i,or(Yo));return an(e,O,n,i,s)}),nl=se(function(e,i){var s=wn(i,or(nl));return an(e,E,n,i,s)}),fm=sn(function(e,i){return an(e,Q,n,n,n,i)});function hm(e,i){if(typeof e!="function")throw new _t(l);return i=i===n?i:ie(i),se(e,i)}function dm(e,i){if(typeof e!="function")throw new _t(l);return i=i==null?0:Ne(ie(i),0),se(function(s){var h=s[i],m=kn(s,0,i);return h&&yn(m,h),ft(e,this,m)})}function pm(e,i,s){var h=!0,m=!0;if(typeof e!="function")throw new _t(l);return Ee(s)&&(h="leading"in s?!!s.leading:h,m="trailing"in s?!!s.trailing:m),tl(e,i,{leading:h,maxWait:i,trailing:m})}function gm(e){return Ku(e,1)}function mm(e,i){return Yo(Eo(i),e)}function ym(){if(!arguments.length)return[];var e=arguments[0];return re(e)?e:[e]}function wm(e){return St(e,y)}function bm(e,i){return i=typeof i=="function"?i:n,St(e,y,i)}function vm(e){return St(e,g|y)}function xm(e,i){return i=typeof i=="function"?i:n,St(e,g|y,i)}function _m(e,i){return i==null||Hs(e,i,$e(i))}function Nt(e,i){return e===i||e!==e&&i!==i}var km=gi(mo),Sm=gi(function(e,i){return e>=i}),Wn=js((function(){return arguments})())?js:function(e){return Me(e)&&we.call(e,"callee")&&!Ls.call(e,"callee")},re=A.isArray,Im=ms?ht(ms):Dd;function et(e){return e!=null&&Si(e.length)&&!ln(e)}function Oe(e){return Me(e)&&et(e)}function Cm(e){return e===!0||e===!1||Me(e)&&Qe(e)==Je}var Sn=Wh||ta,Tm=ys?ht(ys):Fd;function Em(e){return Me(e)&&e.nodeType===1&&!Sr(e)}function Am(e){if(e==null)return!0;if(et(e)&&(re(e)||typeof e=="string"||typeof e.splice=="function"||Sn(e)||ar(e)||Wn(e)))return!e.length;var i=Ye(e);if(i==ut||i==lt)return!e.size;if(_r(e))return!bo(e).length;for(var s in e)if(we.call(e,s))return!1;return!0}function Pm(e,i){return br(e,i)}function Mm(e,i,s){s=typeof s=="function"?s:n;var h=s?s(e,i):n;return h===n?br(e,i,n,s):!!h}function Uo(e){if(!Me(e))return!1;var i=Qe(e);return i==Zt||i==dn||typeof e.message=="string"&&typeof e.name=="string"&&!Sr(e)}function Om(e){return typeof e=="number"&&Ns(e)}function ln(e){if(!Ee(e))return!1;var i=Qe(e);return i==Gn||i==Lr||i==An||i==Br}function rl(e){return typeof e=="number"&&e==ie(e)}function Si(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Le}function Ee(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}function Me(e){return e!=null&&typeof e=="object"}var il=ws?ht(ws):Rd;function Dm(e,i){return e===i||wo(e,i,Lo(i))}function Fm(e,i,s){return s=typeof s=="function"?s:n,wo(e,i,Lo(i),s)}function Lm(e){return ol(e)&&e!=+e}function Rm(e){if(bp(e))throw new ne(u);return Ks(e)}function Nm(e){return e===null}function Bm(e){return e==null}function ol(e){return typeof e=="number"||Me(e)&&Qe(e)==pn}function Sr(e){if(!Me(e)||Qe(e)!=bt)return!1;var i=Xr(e);if(i===null)return!0;var s=we.call(i,"constructor")&&i.constructor;return typeof s=="function"&&s instanceof s&&Vr.call(s)==Fh}var Go=bs?ht(bs):Nd;function $m(e){return rl(e)&&e>=-Le&&e<=Le}var al=vs?ht(vs):Bd;function Ii(e){return typeof e=="string"||!re(e)&&Me(e)&&Qe(e)==Pn}function pt(e){return typeof e=="symbol"||Me(e)&&Qe(e)==Vn}var ar=xs?ht(xs):$d;function Wm(e){return e===n}function zm(e){return Me(e)&&Ye(e)==Mn}function qm(e){return Me(e)&&Qe(e)==F}var Hm=gi(vo),Ym=gi(function(e,i){return e<=i});function sl(e){if(!e)return[];if(et(e))return Ii(e)?Lt(e):Ze(e);if(fr&&e[fr])return _h(e[fr]());var i=Ye(e),s=i==ut?ao:i==lt?Yr:sr;return s(e)}function cn(e){if(!e)return e===0?e:0;if(e=Tt(e),e===Se||e===-Se){var i=e<0?-1:1;return i*Mt}return e===e?e:0}function ie(e){var i=cn(e),s=i%1;return i===i?s?i-s:i:0}function ul(e){return e?Rn(ie(e),0,Ae):0}function Tt(e){if(typeof e=="number")return e;if(pt(e))return _;if(Ee(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=Ee(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=Ts(e);var s=If.test(e);return s||Tf.test(e)?oh(e.slice(2),s?2:8):Sf.test(e)?_:+e}function ll(e){return Yt(e,tt(e))}function Um(e){return e?Rn(ie(e),-Le,Le):e===0?e:0}function ye(e){return e==null?"":dt(e)}var Gm=rr(function(e,i){if(_r(i)||et(i)){Yt(i,$e(i),e);return}for(var s in i)we.call(i,s)&&mr(e,s,i[s])}),cl=rr(function(e,i){Yt(i,tt(i),e)}),Ci=rr(function(e,i,s,h){Yt(i,tt(i),e,h)}),Vm=rr(function(e,i,s,h){Yt(i,$e(i),e,h)}),Qm=sn(ho);function jm(e,i){var s=nr(e);return i==null?s:qs(s,i)}var Km=se(function(e,i){e=ve(e);var s=-1,h=i.length,m=h>2?i[2]:n;for(m&&je(i[0],i[1],m)&&(h=1);++s<h;)for(var v=i[s],x=tt(v),k=-1,C=x.length;++k<C;){var L=x[k],R=e[L];(R===n||Nt(R,Zn[L])&&!we.call(e,L))&&(e[L]=v[L])}return e}),Xm=se(function(e){return e.push(n,Tu),ft(fl,n,e)});function Jm(e,i){return ks(e,K(i,3),Ht)}function Zm(e,i){return ks(e,K(i,3),go)}function e1(e,i){return e==null?e:po(e,K(i,3),tt)}function t1(e,i){return e==null?e:Vs(e,K(i,3),tt)}function n1(e,i){return e&&Ht(e,K(i,3))}function r1(e,i){return e&&go(e,K(i,3))}function i1(e){return e==null?[]:si(e,$e(e))}function o1(e){return e==null?[]:si(e,tt(e))}function Vo(e,i,s){var h=e==null?n:Nn(e,i);return h===n?s:h}function a1(e,i){return e!=null&&Pu(e,i,Ad)}function Qo(e,i){return e!=null&&Pu(e,i,Pd)}var s1=_u(function(e,i,s){i!=null&&typeof i.toString!="function"&&(i=Qr.call(i)),e[i]=s},Ko(nt)),u1=_u(function(e,i,s){i!=null&&typeof i.toString!="function"&&(i=Qr.call(i)),we.call(e,i)?e[i].push(s):e[i]=[s]},K),l1=se(wr);function $e(e){return et(e)?Ws(e):bo(e)}function tt(e){return et(e)?Ws(e,!0):Wd(e)}function c1(e,i){var s={};return i=K(i,3),Ht(e,function(h,m,v){on(s,i(h,m,v),h)}),s}function f1(e,i){var s={};return i=K(i,3),Ht(e,function(h,m,v){on(s,m,i(h,m,v))}),s}var h1=rr(function(e,i,s){ui(e,i,s)}),fl=rr(function(e,i,s,h){ui(e,i,s,h)}),d1=sn(function(e,i){var s={};if(e==null)return s;var h=!1;i=Ce(i,function(v){return v=_n(v,e),h||(h=v.length>1),v}),Yt(e,Do(e),s),h&&(s=St(s,g|b|y,sp));for(var m=i.length;m--;)Io(s,i[m]);return s});function p1(e,i){return hl(e,ki(K(i)))}var g1=sn(function(e,i){return e==null?{}:qd(e,i)});function hl(e,i){if(e==null)return{};var s=Ce(Do(e),function(h){return[h]});return i=K(i),ru(e,s,function(h,m){return i(h,m[0])})}function m1(e,i,s){i=_n(i,e);var h=-1,m=i.length;for(m||(m=1,e=n);++h<m;){var v=e==null?n:e[Ut(i[h])];v===n&&(h=m,v=s),e=ln(v)?v.call(e):v}return e}function y1(e,i,s){return e==null?e:vr(e,i,s)}function w1(e,i,s,h){return h=typeof h=="function"?h:n,e==null?e:vr(e,i,s,h)}var dl=Iu($e),pl=Iu(tt);function b1(e,i,s){var h=re(e),m=h||Sn(e)||ar(e);if(i=K(i,4),s==null){var v=e&&e.constructor;m?s=h?new v:[]:Ee(e)?s=ln(v)?nr(Xr(e)):{}:s={}}return(m?xt:Ht)(e,function(x,k,C){return i(s,x,k,C)}),s}function v1(e,i){return e==null?!0:Io(e,i)}function x1(e,i,s){return e==null?e:uu(e,i,Eo(s))}function _1(e,i,s,h){return h=typeof h=="function"?h:n,e==null?e:uu(e,i,Eo(s),h)}function sr(e){return e==null?[]:oo(e,$e(e))}function k1(e){return e==null?[]:oo(e,tt(e))}function S1(e,i,s){return s===n&&(s=i,i=n),s!==n&&(s=Tt(s),s=s===s?s:0),i!==n&&(i=Tt(i),i=i===i?i:0),Rn(Tt(e),i,s)}function I1(e,i,s){return i=cn(i),s===n?(s=i,i=0):s=cn(s),e=Tt(e),Md(e,i,s)}function C1(e,i,s){if(s&&typeof s!="boolean"&&je(e,i,s)&&(i=s=n),s===n&&(typeof i=="boolean"?(s=i,i=n):typeof e=="boolean"&&(s=e,e=n)),e===n&&i===n?(e=0,i=1):(e=cn(e),i===n?(i=e,e=0):i=cn(i)),e>i){var h=e;e=i,i=h}if(s||e%1||i%1){var m=Bs();return He(e+m*(i-e+ih("1e-"+((m+"").length-1))),i)}return _o(e,i)}var T1=ir(function(e,i,s){return i=i.toLowerCase(),e+(s?gl(i):i)});function gl(e){return jo(ye(e).toLowerCase())}function ml(e){return e=ye(e),e&&e.replace(Af,yh).replace(Qf,"")}function E1(e,i,s){e=ye(e),i=dt(i);var h=e.length;s=s===n?h:Rn(ie(s),0,h);var m=s;return s-=i.length,s>=0&&e.slice(s,m)==i}function A1(e){return e=ye(e),e&&lf.test(e)?e.replace(Va,wh):e}function P1(e){return e=ye(e),e&&gf.test(e)?e.replace(Hi,"\\$&"):e}var M1=ir(function(e,i,s){return e+(s?"-":"")+i.toLowerCase()}),O1=ir(function(e,i,s){return e+(s?" ":"")+i.toLowerCase()}),D1=bu("toLowerCase");function F1(e,i,s){e=ye(e),i=ie(i);var h=i?Xn(e):0;if(!i||h>=i)return e;var m=(i-h)/2;return pi(ti(m),s)+e+pi(ei(m),s)}function L1(e,i,s){e=ye(e),i=ie(i);var h=i?Xn(e):0;return i&&h<i?e+pi(i-h,s):e}function R1(e,i,s){e=ye(e),i=ie(i);var h=i?Xn(e):0;return i&&h<i?pi(i-h,s)+e:e}function N1(e,i,s){return s||i==null?i=0:i&&(i=+i),Yh(ye(e).replace(Yi,""),i||0)}function B1(e,i,s){return(s?je(e,i,s):i===n)?i=1:i=ie(i),ko(ye(e),i)}function $1(){var e=arguments,i=ye(e[0]);return e.length<3?i:i.replace(e[1],e[2])}var W1=ir(function(e,i,s){return e+(s?"_":"")+i.toLowerCase()});function z1(e,i,s){return s&&typeof s!="number"&&je(e,i,s)&&(i=s=n),s=s===n?Ae:s>>>0,s?(e=ye(e),e&&(typeof i=="string"||i!=null&&!Go(i))&&(i=dt(i),!i&&Kn(e))?kn(Lt(e),0,s):e.split(i,s)):[]}var q1=ir(function(e,i,s){return e+(s?" ":"")+jo(i)});function H1(e,i,s){return e=ye(e),s=s==null?0:Rn(ie(s),0,e.length),i=dt(i),e.slice(s,s+i.length)==i}function Y1(e,i,s){var h=w.templateSettings;s&&je(e,i,s)&&(i=n),e=ye(e),i=Ci({},i,h,Cu);var m=Ci({},i.imports,h.imports,Cu),v=$e(m),x=oo(m,v),k,C,L=0,R=i.interpolate||$r,N="__p += '",q=so((i.escape||$r).source+"|"+R.source+"|"+(R===Qa?kf:$r).source+"|"+(i.evaluate||$r).source+"|$","g"),G="//# sourceURL="+(we.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Zf+"]")+`
`;e.replace(q,function(Z,ue,fe,gt,Ke,mt){return fe||(fe=gt),N+=e.slice(L,mt).replace(Pf,bh),ue&&(k=!0,N+=`' +
__e(`+ue+`) +
'`),Ke&&(C=!0,N+=`';
`+Ke+`;
__p += '`),fe&&(N+=`' +
((__t = (`+fe+`)) == null ? '' : __t) +
'`),L=mt+Z.length,Z}),N+=`';
`;var J=we.call(i,"variable")&&i.variable;if(!J)N=`with (obj) {
`+N+`
}
`;else if(xf.test(J))throw new ne(c);N=(C?N.replace(Ft,""):N).replace(af,"$1").replace(sf,"$1;"),N="function("+(J||"obj")+`) {
`+(J?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(k?", __e = _.escape":"")+(C?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+N+`return __p
}`;var oe=wl(function(){return pe(v,G+"return "+N).apply(n,x)});if(oe.source=N,Uo(oe))throw oe;return oe}function U1(e){return ye(e).toLowerCase()}function G1(e){return ye(e).toUpperCase()}function V1(e,i,s){if(e=ye(e),e&&(s||i===n))return Ts(e);if(!e||!(i=dt(i)))return e;var h=Lt(e),m=Lt(i),v=Es(h,m),x=As(h,m)+1;return kn(h,v,x).join("")}function Q1(e,i,s){if(e=ye(e),e&&(s||i===n))return e.slice(0,Ms(e)+1);if(!e||!(i=dt(i)))return e;var h=Lt(e),m=As(h,Lt(i))+1;return kn(h,0,m).join("")}function j1(e,i,s){if(e=ye(e),e&&(s||i===n))return e.replace(Yi,"");if(!e||!(i=dt(i)))return e;var h=Lt(e),m=Es(h,Lt(i));return kn(h,m).join("")}function K1(e,i){var s=he,h=j;if(Ee(i)){var m="separator"in i?i.separator:m;s="length"in i?ie(i.length):s,h="omission"in i?dt(i.omission):h}e=ye(e);var v=e.length;if(Kn(e)){var x=Lt(e);v=x.length}if(s>=v)return e;var k=s-Xn(h);if(k<1)return h;var C=x?kn(x,0,k).join(""):e.slice(0,k);if(m===n)return C+h;if(x&&(k+=C.length-k),Go(m)){if(e.slice(k).search(m)){var L,R=C;for(m.global||(m=so(m.source,ye(ja.exec(m))+"g")),m.lastIndex=0;L=m.exec(R);)var N=L.index;C=C.slice(0,N===n?k:N)}}else if(e.indexOf(dt(m),k)!=k){var q=C.lastIndexOf(m);q>-1&&(C=C.slice(0,q))}return C+h}function X1(e){return e=ye(e),e&&uf.test(e)?e.replace(Ga,Ch):e}var J1=ir(function(e,i,s){return e+(s?" ":"")+i.toUpperCase()}),jo=bu("toUpperCase");function yl(e,i,s){return e=ye(e),i=s?n:i,i===n?xh(e)?Ah(e):hh(e):e.match(i)||[]}var wl=se(function(e,i){try{return ft(e,n,i)}catch(s){return Uo(s)?s:new ne(s)}}),Z1=sn(function(e,i){return xt(i,function(s){s=Ut(s),on(e,s,Ho(e[s],e))}),e});function e0(e){var i=e==null?0:e.length,s=K();return e=i?Ce(e,function(h){if(typeof h[1]!="function")throw new _t(l);return[s(h[0]),h[1]]}):[],se(function(h){for(var m=-1;++m<i;){var v=e[m];if(ft(v[0],this,h))return ft(v[1],this,h)}})}function t0(e){return Cd(St(e,g))}function Ko(e){return function(){return e}}function n0(e,i){return e==null||e!==e?i:e}var r0=xu(),i0=xu(!0);function nt(e){return e}function Xo(e){return Xs(typeof e=="function"?e:St(e,g))}function o0(e){return Zs(St(e,g))}function a0(e,i){return eu(e,St(i,g))}var s0=se(function(e,i){return function(s){return wr(s,e,i)}}),u0=se(function(e,i){return function(s){return wr(e,s,i)}});function Jo(e,i,s){var h=$e(i),m=si(i,h);s==null&&!(Ee(i)&&(m.length||!h.length))&&(s=i,i=e,e=this,m=si(i,$e(i)));var v=!(Ee(s)&&"chain"in s)||!!s.chain,x=ln(e);return xt(m,function(k){var C=i[k];e[k]=C,x&&(e.prototype[k]=function(){var L=this.__chain__;if(v||L){var R=e(this.__wrapped__),N=R.__actions__=Ze(this.__actions__);return N.push({func:C,args:arguments,thisArg:e}),R.__chain__=L,R}return C.apply(e,yn([this.value()],arguments))})}),e}function l0(){return ze._===this&&(ze._=Lh),this}function Zo(){}function c0(e){return e=ie(e),se(function(i){return tu(i,e)})}var f0=Po(Ce),h0=Po(_s),d0=Po(eo);function bl(e){return No(e)?to(Ut(e)):Hd(e)}function p0(e){return function(i){return e==null?n:Nn(e,i)}}var g0=ku(),m0=ku(!0);function ea(){return[]}function ta(){return!1}function y0(){return{}}function w0(){return""}function b0(){return!0}function v0(e,i){if(e=ie(e),e<1||e>Le)return[];var s=Ae,h=He(e,Ae);i=K(i),e-=Ae;for(var m=io(h,i);++s<e;)i(s);return m}function x0(e){return re(e)?Ce(e,Ut):pt(e)?[e]:Ze($u(ye(e)))}function _0(e){var i=++Dh;return ye(e)+i}var k0=di(function(e,i){return e+i},0),S0=Mo("ceil"),I0=di(function(e,i){return e/i},1),C0=Mo("floor");function T0(e){return e&&e.length?ai(e,nt,mo):n}function E0(e,i){return e&&e.length?ai(e,K(i,2),mo):n}function A0(e){return Is(e,nt)}function P0(e,i){return Is(e,K(i,2))}function M0(e){return e&&e.length?ai(e,nt,vo):n}function O0(e,i){return e&&e.length?ai(e,K(i,2),vo):n}var D0=di(function(e,i){return e*i},1),F0=Mo("round"),L0=di(function(e,i){return e-i},0);function R0(e){return e&&e.length?ro(e,nt):0}function N0(e,i){return e&&e.length?ro(e,K(i,2)):0}return w.after=om,w.ary=Ku,w.assign=Gm,w.assignIn=cl,w.assignInWith=Ci,w.assignWith=Vm,w.at=Qm,w.before=Xu,w.bind=Ho,w.bindAll=Z1,w.bindKey=Ju,w.castArray=ym,w.chain=Vu,w.chunk=Cp,w.compact=Tp,w.concat=Ep,w.cond=e0,w.conforms=t0,w.constant=Ko,w.countBy=Rg,w.create=jm,w.curry=Zu,w.curryRight=el,w.debounce=tl,w.defaults=Km,w.defaultsDeep=Xm,w.defer=am,w.delay=sm,w.difference=Ap,w.differenceBy=Pp,w.differenceWith=Mp,w.drop=Op,w.dropRight=Dp,w.dropRightWhile=Fp,w.dropWhile=Lp,w.fill=Rp,w.filter=Bg,w.flatMap=zg,w.flatMapDeep=qg,w.flatMapDepth=Hg,w.flatten=Hu,w.flattenDeep=Np,w.flattenDepth=Bp,w.flip=um,w.flow=r0,w.flowRight=i0,w.fromPairs=$p,w.functions=i1,w.functionsIn=o1,w.groupBy=Yg,w.initial=zp,w.intersection=qp,w.intersectionBy=Hp,w.intersectionWith=Yp,w.invert=s1,w.invertBy=u1,w.invokeMap=Gg,w.iteratee=Xo,w.keyBy=Vg,w.keys=$e,w.keysIn=tt,w.map=vi,w.mapKeys=c1,w.mapValues=f1,w.matches=o0,w.matchesProperty=a0,w.memoize=_i,w.merge=h1,w.mergeWith=fl,w.method=s0,w.methodOf=u0,w.mixin=Jo,w.negate=ki,w.nthArg=c0,w.omit=d1,w.omitBy=p1,w.once=lm,w.orderBy=Qg,w.over=f0,w.overArgs=cm,w.overEvery=h0,w.overSome=d0,w.partial=Yo,w.partialRight=nl,w.partition=jg,w.pick=g1,w.pickBy=hl,w.property=bl,w.propertyOf=p0,w.pull=Qp,w.pullAll=Uu,w.pullAllBy=jp,w.pullAllWith=Kp,w.pullAt=Xp,w.range=g0,w.rangeRight=m0,w.rearg=fm,w.reject=Jg,w.remove=Jp,w.rest=hm,w.reverse=zo,w.sampleSize=em,w.set=y1,w.setWith=w1,w.shuffle=tm,w.slice=Zp,w.sortBy=im,w.sortedUniq=ag,w.sortedUniqBy=sg,w.split=z1,w.spread=dm,w.tail=ug,w.take=lg,w.takeRight=cg,w.takeRightWhile=fg,w.takeWhile=hg,w.tap=Tg,w.throttle=pm,w.thru=bi,w.toArray=sl,w.toPairs=dl,w.toPairsIn=pl,w.toPath=x0,w.toPlainObject=ll,w.transform=b1,w.unary=gm,w.union=dg,w.unionBy=pg,w.unionWith=gg,w.uniq=mg,w.uniqBy=yg,w.uniqWith=wg,w.unset=v1,w.unzip=qo,w.unzipWith=Gu,w.update=x1,w.updateWith=_1,w.values=sr,w.valuesIn=k1,w.without=bg,w.words=yl,w.wrap=mm,w.xor=vg,w.xorBy=xg,w.xorWith=_g,w.zip=kg,w.zipObject=Sg,w.zipObjectDeep=Ig,w.zipWith=Cg,w.entries=dl,w.entriesIn=pl,w.extend=cl,w.extendWith=Ci,Jo(w,w),w.add=k0,w.attempt=wl,w.camelCase=T1,w.capitalize=gl,w.ceil=S0,w.clamp=S1,w.clone=wm,w.cloneDeep=vm,w.cloneDeepWith=xm,w.cloneWith=bm,w.conformsTo=_m,w.deburr=ml,w.defaultTo=n0,w.divide=I0,w.endsWith=E1,w.eq=Nt,w.escape=A1,w.escapeRegExp=P1,w.every=Ng,w.find=$g,w.findIndex=zu,w.findKey=Jm,w.findLast=Wg,w.findLastIndex=qu,w.findLastKey=Zm,w.floor=C0,w.forEach=Qu,w.forEachRight=ju,w.forIn=e1,w.forInRight=t1,w.forOwn=n1,w.forOwnRight=r1,w.get=Vo,w.gt=km,w.gte=Sm,w.has=a1,w.hasIn=Qo,w.head=Yu,w.identity=nt,w.includes=Ug,w.indexOf=Wp,w.inRange=I1,w.invoke=l1,w.isArguments=Wn,w.isArray=re,w.isArrayBuffer=Im,w.isArrayLike=et,w.isArrayLikeObject=Oe,w.isBoolean=Cm,w.isBuffer=Sn,w.isDate=Tm,w.isElement=Em,w.isEmpty=Am,w.isEqual=Pm,w.isEqualWith=Mm,w.isError=Uo,w.isFinite=Om,w.isFunction=ln,w.isInteger=rl,w.isLength=Si,w.isMap=il,w.isMatch=Dm,w.isMatchWith=Fm,w.isNaN=Lm,w.isNative=Rm,w.isNil=Bm,w.isNull=Nm,w.isNumber=ol,w.isObject=Ee,w.isObjectLike=Me,w.isPlainObject=Sr,w.isRegExp=Go,w.isSafeInteger=$m,w.isSet=al,w.isString=Ii,w.isSymbol=pt,w.isTypedArray=ar,w.isUndefined=Wm,w.isWeakMap=zm,w.isWeakSet=qm,w.join=Up,w.kebabCase=M1,w.last=Ct,w.lastIndexOf=Gp,w.lowerCase=O1,w.lowerFirst=D1,w.lt=Hm,w.lte=Ym,w.max=T0,w.maxBy=E0,w.mean=A0,w.meanBy=P0,w.min=M0,w.minBy=O0,w.stubArray=ea,w.stubFalse=ta,w.stubObject=y0,w.stubString=w0,w.stubTrue=b0,w.multiply=D0,w.nth=Vp,w.noConflict=l0,w.noop=Zo,w.now=xi,w.pad=F1,w.padEnd=L1,w.padStart=R1,w.parseInt=N1,w.random=C1,w.reduce=Kg,w.reduceRight=Xg,w.repeat=B1,w.replace=$1,w.result=m1,w.round=F0,w.runInContext=I,w.sample=Zg,w.size=nm,w.snakeCase=W1,w.some=rm,w.sortedIndex=eg,w.sortedIndexBy=tg,w.sortedIndexOf=ng,w.sortedLastIndex=rg,w.sortedLastIndexBy=ig,w.sortedLastIndexOf=og,w.startCase=q1,w.startsWith=H1,w.subtract=L0,w.sum=R0,w.sumBy=N0,w.template=Y1,w.times=v0,w.toFinite=cn,w.toInteger=ie,w.toLength=ul,w.toLower=U1,w.toNumber=Tt,w.toSafeInteger=Um,w.toString=ye,w.toUpper=G1,w.trim=V1,w.trimEnd=Q1,w.trimStart=j1,w.truncate=K1,w.unescape=X1,w.uniqueId=_0,w.upperCase=J1,w.upperFirst=jo,w.each=Qu,w.eachRight=ju,w.first=Yu,Jo(w,(function(){var e={};return Ht(w,function(i,s){we.call(w.prototype,s)||(e[s]=i)}),e})(),{chain:!1}),w.VERSION=o,xt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){w[e].placeholder=w}),xt(["drop","take"],function(e,i){le.prototype[e]=function(s){s=s===n?1:Ne(ie(s),0);var h=this.__filtered__&&!i?new le(this):this.clone();return h.__filtered__?h.__takeCount__=He(s,h.__takeCount__):h.__views__.push({size:He(s,Ae),type:e+(h.__dir__<0?"Right":"")}),h},le.prototype[e+"Right"]=function(s){return this.reverse()[e](s).reverse()}}),xt(["filter","map","takeWhile"],function(e,i){var s=i+1,h=s==Te||s==Be;le.prototype[e]=function(m){var v=this.clone();return v.__iteratees__.push({iteratee:K(m,3),type:s}),v.__filtered__=v.__filtered__||h,v}}),xt(["head","last"],function(e,i){var s="take"+(i?"Right":"");le.prototype[e]=function(){return this[s](1).value()[0]}}),xt(["initial","tail"],function(e,i){var s="drop"+(i?"":"Right");le.prototype[e]=function(){return this.__filtered__?new le(this):this[s](1)}}),le.prototype.compact=function(){return this.filter(nt)},le.prototype.find=function(e){return this.filter(e).head()},le.prototype.findLast=function(e){return this.reverse().find(e)},le.prototype.invokeMap=se(function(e,i){return typeof e=="function"?new le(this):this.map(function(s){return wr(s,e,i)})}),le.prototype.reject=function(e){return this.filter(ki(K(e)))},le.prototype.slice=function(e,i){e=ie(e);var s=this;return s.__filtered__&&(e>0||i<0)?new le(s):(e<0?s=s.takeRight(-e):e&&(s=s.drop(e)),i!==n&&(i=ie(i),s=i<0?s.dropRight(-i):s.take(i-e)),s)},le.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},le.prototype.toArray=function(){return this.take(Ae)},Ht(le.prototype,function(e,i){var s=/^(?:filter|find|map|reject)|While$/.test(i),h=/^(?:head|last)$/.test(i),m=w[h?"take"+(i=="last"?"Right":""):i],v=h||/^find/.test(i);m&&(w.prototype[i]=function(){var x=this.__wrapped__,k=h?[1]:arguments,C=x instanceof le,L=k[0],R=C||re(x),N=function(ue){var fe=m.apply(w,yn([ue],k));return h&&q?fe[0]:fe};R&&s&&typeof L=="function"&&L.length!=1&&(C=R=!1);var q=this.__chain__,G=!!this.__actions__.length,J=v&&!q,oe=C&&!G;if(!v&&R){x=oe?x:new le(this);var Z=e.apply(x,k);return Z.__actions__.push({func:bi,args:[N],thisArg:n}),new kt(Z,q)}return J&&oe?e.apply(this,k):(Z=this.thru(N),J?h?Z.value()[0]:Z.value():Z)})}),xt(["pop","push","shift","sort","splice","unshift"],function(e){var i=Ur[e],s=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",h=/^(?:pop|shift)$/.test(e);w.prototype[e]=function(){var m=arguments;if(h&&!this.__chain__){var v=this.value();return i.apply(re(v)?v:[],m)}return this[s](function(x){return i.apply(re(x)?x:[],m)})}}),Ht(le.prototype,function(e,i){var s=w[i];if(s){var h=s.name+"";we.call(tr,h)||(tr[h]=[]),tr[h].push({name:i,func:s})}}),tr[hi(n,D).name]=[{name:"wrapper",func:n}],le.prototype.clone=Xh,le.prototype.reverse=Jh,le.prototype.value=Zh,w.prototype.at=Eg,w.prototype.chain=Ag,w.prototype.commit=Pg,w.prototype.next=Mg,w.prototype.plant=Dg,w.prototype.reverse=Fg,w.prototype.toJSON=w.prototype.valueOf=w.prototype.value=Lg,w.prototype.first=w.prototype.head,fr&&(w.prototype[fr]=Og),w}),Jn=Ph();On?((On.exports=Jn)._=Jn,Ki._=Jn):ze._=Jn}).call(H0)})(Ar,Ar.exports)),Ar.exports}var U0=Y0();const Fe={Day:"day",Week:"week",Month:"month",Quarter:"quarter",Year:"year",Decade:"decade"},G0=[{id:"dayPlanning",label:"Planning my day",cue:"After breakfast",reward:"More productive and organized day",targetCount:1,periodicityMultiplier:1,periodicityUnit:Fe.Day,active:!0},{id:"exercise",label:"Exercise",cue:"Any suitable time during the day",reward:"Better health, more energy, and improved mood",targetCount:5,periodicityMultiplier:1,periodicityUnit:Fe.Week,active:!0,permanent:!0},{id:"morningWarmUp",label:"Morning Physical Warm-Up",cue:"After waking up",reward:"Increased energy and readiness for the day",targetCount:1,periodicityMultiplier:1,periodicityUnit:Fe.Day,active:!0},{id:"recreation",label:"Having fun",cue:"In the evening or during free time",reward:"Relaxation, joy, and stress relief",targetCount:1,periodicityMultiplier:1,periodicityUnit:Fe.Day,active:!0},{id:"selfPleasure",label:"FPF",cue:"At free from work personal time",reward:"Better focus and increasing ability to feel joy",targetCount:7,periodicityMultiplier:10,periodicityUnit:Fe.Day,active:!0},{id:"poetryEngaging",label:"Spend time with poetry",cue:"At leisure time",reward:"Happiness and healthy feelings expression from engaging with poetry",targetCount:3,periodicityMultiplier:1,periodicityUnit:Fe.Month,active:!0},{id:"programmingLearning",label:"Programming study",cue:"Dedicated learning time",reward:"Skill development, career growth, and problem-solving mastery",targetCount:3,periodicityMultiplier:1,periodicityUnit:Fe.Week,active:!0},{id:"recreationalCannabis",label:"Getting high",cue:"Day off (if next day is also day off, then) in safe calm well prepared environment and mood",reward:"Self-care routine, relaxation, stress relief",targetCount:1,periodicityMultiplier:1,periodicityUnit:Fe.Week,active:!0,maxLimit:{count:20,periodicityMultiplier:6,periodicityUnit:Fe.Month}}],V0=[{id:"positiveEmotions",label:"Positive Emotions",info:"Feelings of joy, gratitude, contentment, hope, and pleasure. Includes savoring the moment, reflecting on past positives, and hopeful anticipation of the future.",active:!0},{id:"engagement",label:"Engagement",info:"Deep involvement in activities; being absorbed, losing sense of time (‚Äòflow‚Äô). Doing work or hobbies that challenge your skills just enough that you‚Äôre fully present.",active:!0},{id:"relationships",label:"Relationships",info:"Supportive, meaningful social connections. Feeling loved, valued, belonging; giving and receiving support. Close friendships, family bonds, community ties.",active:!0,periodicity:2},{id:"meaning",label:"Meaning",info:"Having a sense of purpose, belonging to something bigger than yourself. Knowing what matters in your life and using your strengths in service of values, causes or goals.",active:!0},{id:"accomplishment",label:"Accomplishment",info:"Mastery, achievement, working toward goals. Sense of progress, competence, whether or not it brings immediate joy‚Äîachieving things that matter to you.",active:!0},{id:"sleepQuality",label:"Sleep Quality",info:"How well-rested you feel. Quality of sleep, sufficient hours, feeling refreshed upon waking. Sleep is foundational to physical and mental wellbeing.",active:!0},{id:"embodiment",label:"Embodiment",info:"Body acceptance and feeling at home in your body. Being present in your physical self, body image, self-compassion toward your body, feeling connected rather than disconnected from your physical form.",active:!0,periodicity:3},{id:"physicalPleasure",label:"Physical Pleasure",info:"Sensory experiences and bodily comfort. Enjoying food, warmth, movement, relaxation. The simple joys of physical existence‚Äîa hot shower, soft blanket, delicious meal, or stretching your body.",active:!0,periodicity:2},{id:"touchAndIntimacy",label:"Touch & Intimacy",info:"Physical affection, connection, and love. Hugs, cuddles, holding hands, sexual intimacy. The warmth and safety of physical closeness with loved ones. Human touch is a fundamental need.",active:!0,periodicity:3},{id:"physicalCondition",label:"Physical Condition",info:"Your bodily health: exercise, energy levels and how physically capable you feel. General fitness and vitality.",active:!0},{id:"nutrition",label:"Nutrition",info:"Quality of your food choices and eating patterns. Nourishing your body with balanced meals, adequate hydration, and mindful eating. Good nutrition fuels energy, mood, and long-term health.",active:!0},{id:"mindset",label:"Mindset",info:"Cultivating optimism, resilience, self-efficacy, and a growth mindset. A positive mindset shapes how you interpret setbacks, sustain motivation, and approach challenges.",active:!0},{id:"environment",label:"Environment",info:"Living and working in spaces that feel safe, comfortable, and supportive of wellbeing. Includes access to nature, orderliness, and resources that help you thrive.",active:!0,periodicity:3},{id:"economicSecurity",label:"Economic Security",info:"Having financial stability, freedom from chronic money stress, and satisfaction with work. Economic security supports autonomy and reduces background stress that erodes wellbeing.",active:!0,periodicity:10}],ra={projectDir:"powerJournal",outputDir:"reports",coreDir:"core",devLogging:!0,habits:G0,wellbeingParameters:V0,devMode:!1,reportFileExtension:".pjf.md"};async function Q0(t){if(!t||typeof t!="object"||Array.isArray(t))return ra;try{return U0.merge({},ra,t)}catch(r){return console.warn("[PowerJournal] Failed to merge user config, using defaults.",r),ra}}const mc=6048e5,j0=864e5,Sl=Symbol.for("constructDateFrom");function hn(t,r){return typeof t=="function"?t(r):t&&typeof t=="object"&&Sl in t?t[Sl](r):t instanceof Date?new t.constructor(r):new Date(r)}function Pt(t,r){return hn(r||t,t)}function K0(t,r,n){const o=Pt(t,n?.in);return isNaN(r)?hn(t,NaN):(r&&o.setDate(o.getDate()+r),o)}let X0={};function $i(){return X0}function Or(t,r){const n=$i(),o=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=Pt(t,r?.in),u=a.getDay(),l=(u<o?7:0)+u-o;return a.setDate(a.getDate()-l),a.setHours(0,0,0,0),a}function Fi(t,r){return Or(t,{...r,weekStartsOn:1})}function yc(t,r){const n=Pt(t,r?.in),o=n.getFullYear(),a=hn(n,0);a.setFullYear(o+1,0,4),a.setHours(0,0,0,0);const u=Fi(a),l=hn(n,0);l.setFullYear(o,0,4),l.setHours(0,0,0,0);const c=Fi(l);return n.getTime()>=u.getTime()?o+1:n.getTime()>=c.getTime()?o:o-1}function Il(t){const r=Pt(t),n=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return n.setUTCFullYear(r.getFullYear()),+t-+n}function wc(t,...r){const n=hn.bind(null,r.find(o=>typeof o=="object"));return r.map(n)}function Cl(t,r){const n=Pt(t,r?.in);return n.setHours(0,0,0,0),n}function bc(t,r,n){const[o,a]=wc(n?.in,t,r),u=Cl(o),l=Cl(a),c=+u-Il(u),f=+l-Il(l);return Math.round((c-f)/j0)}function J0(t,r){const n=yc(t,r),o=hn(t,0);return o.setFullYear(n,0,4),o.setHours(0,0,0,0),Fi(o)}function Z0(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function ey(t){return!(!Z0(t)&&typeof t!="number"||isNaN(+Pt(t)))}function ty(t,r,n){const[o,a]=wc(n?.in,t,r),u=Tl(o,a),l=Math.abs(bc(o,a));o.setDate(o.getDate()-u*l);const c=+(Tl(o,a)===-u),f=u*(l-c);return f===0?0:f}function Tl(t,r){const n=t.getFullYear()-r.getFullYear()||t.getMonth()-r.getMonth()||t.getDate()-r.getDate()||t.getHours()-r.getHours()||t.getMinutes()-r.getMinutes()||t.getSeconds()-r.getSeconds()||t.getMilliseconds()-r.getMilliseconds();return n<0?-1:n>0?1:n}function ny(t,r){const n=Pt(t,r?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const ry={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},iy=(t,r,n)=>{let o;const a=ry[t];return typeof a=="string"?o=a:r===1?o=a.one:o=a.other.replace("{{count}}",r.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+o:o+" ago":o};function ia(t){return(r={})=>{const n=r.width?String(r.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const oy={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ay={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},sy={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},uy={date:ia({formats:oy,defaultWidth:"full"}),time:ia({formats:ay,defaultWidth:"full"}),dateTime:ia({formats:sy,defaultWidth:"full"})},ly={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},cy=(t,r,n,o)=>ly[t];function Ir(t){return(r,n)=>{const o=n?.context?String(n.context):"standalone";let a;if(o==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,c=n?.width?String(n.width):l;a=t.formattingValues[c]||t.formattingValues[l]}else{const l=t.defaultWidth,c=n?.width?String(n.width):t.defaultWidth;a=t.values[c]||t.values[l]}const u=t.argumentCallback?t.argumentCallback(r):r;return a[u]}}const fy={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},hy={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},dy={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},py={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},gy={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},my={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},yy=(t,r)=>{const n=Number(t),o=n%100;if(o>20||o<10)switch(o%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},wy={ordinalNumber:yy,era:Ir({values:fy,defaultWidth:"wide"}),quarter:Ir({values:hy,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ir({values:dy,defaultWidth:"wide"}),day:Ir({values:py,defaultWidth:"wide"}),dayPeriod:Ir({values:gy,defaultWidth:"wide",formattingValues:my,defaultFormattingWidth:"wide"})};function Cr(t){return(r,n={})=>{const o=n.width,a=o&&t.matchPatterns[o]||t.matchPatterns[t.defaultMatchWidth],u=r.match(a);if(!u)return null;const l=u[0],c=o&&t.parsePatterns[o]||t.parsePatterns[t.defaultParseWidth],f=Array.isArray(c)?vy(c,g=>g.test(l)):by(c,g=>g.test(l));let d;d=t.valueCallback?t.valueCallback(f):f,d=n.valueCallback?n.valueCallback(d):d;const p=r.slice(l.length);return{value:d,rest:p}}}function by(t,r){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r(t[n]))return n}function vy(t,r){for(let n=0;n<t.length;n++)if(r(t[n]))return n}function xy(t){return(r,n={})=>{const o=r.match(t.matchPattern);if(!o)return null;const a=o[0],u=r.match(t.parsePattern);if(!u)return null;let l=t.valueCallback?t.valueCallback(u[0]):u[0];l=n.valueCallback?n.valueCallback(l):l;const c=r.slice(a.length);return{value:l,rest:c}}}const _y=/^(\d+)(th|st|nd|rd)?/i,ky=/\d+/i,Sy={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Iy={any:[/^b/i,/^(a|c)/i]},Cy={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ty={any:[/1/i,/2/i,/3/i,/4/i]},Ey={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ay={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Py={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},My={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Oy={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Dy={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Fy={ordinalNumber:xy({matchPattern:_y,parsePattern:ky,valueCallback:t=>parseInt(t,10)}),era:Cr({matchPatterns:Sy,defaultMatchWidth:"wide",parsePatterns:Iy,defaultParseWidth:"any"}),quarter:Cr({matchPatterns:Cy,defaultMatchWidth:"wide",parsePatterns:Ty,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Cr({matchPatterns:Ey,defaultMatchWidth:"wide",parsePatterns:Ay,defaultParseWidth:"any"}),day:Cr({matchPatterns:Py,defaultMatchWidth:"wide",parsePatterns:My,defaultParseWidth:"any"}),dayPeriod:Cr({matchPatterns:Oy,defaultMatchWidth:"any",parsePatterns:Dy,defaultParseWidth:"any"})},Ly={code:"en-US",formatDistance:iy,formatLong:uy,formatRelative:cy,localize:wy,match:Fy,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ry(t,r){const n=Pt(t,r?.in);return bc(n,ny(n))+1}function Ny(t,r){const n=Pt(t,r?.in),o=+Fi(n)-+J0(n);return Math.round(o/mc)+1}function vc(t,r){const n=Pt(t,r?.in),o=n.getFullYear(),a=$i(),u=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,l=hn(r?.in||t,0);l.setFullYear(o+1,0,u),l.setHours(0,0,0,0);const c=Or(l,r),f=hn(r?.in||t,0);f.setFullYear(o,0,u),f.setHours(0,0,0,0);const d=Or(f,r);return+n>=+c?o+1:+n>=+d?o:o-1}function By(t,r){const n=$i(),o=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,a=vc(t,r),u=hn(r?.in||t,0);return u.setFullYear(a,0,o),u.setHours(0,0,0,0),Or(u,r)}function $y(t,r){const n=Pt(t,r?.in),o=+Or(n,r)-+By(n,r);return Math.round(o/mc)+1}function be(t,r){const n=t<0?"-":"",o=Math.abs(t).toString().padStart(r,"0");return n+o}const In={y(t,r){const n=t.getFullYear(),o=n>0?n:1-n;return be(r==="yy"?o%100:o,r.length)},M(t,r){const n=t.getMonth();return r==="M"?String(n+1):be(n+1,2)},d(t,r){return be(t.getDate(),r.length)},a(t,r){const n=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,r){return be(t.getHours()%12||12,r.length)},H(t,r){return be(t.getHours(),r.length)},m(t,r){return be(t.getMinutes(),r.length)},s(t,r){return be(t.getSeconds(),r.length)},S(t,r){const n=r.length,o=t.getMilliseconds(),a=Math.trunc(o*Math.pow(10,n-3));return be(a,r.length)}},ur={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},El={G:function(t,r,n){const o=t.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(o,{width:"abbreviated"});case"GGGGG":return n.era(o,{width:"narrow"});case"GGGG":default:return n.era(o,{width:"wide"})}},y:function(t,r,n){if(r==="yo"){const o=t.getFullYear(),a=o>0?o:1-o;return n.ordinalNumber(a,{unit:"year"})}return In.y(t,r)},Y:function(t,r,n,o){const a=vc(t,o),u=a>0?a:1-a;if(r==="YY"){const l=u%100;return be(l,2)}return r==="Yo"?n.ordinalNumber(u,{unit:"year"}):be(u,r.length)},R:function(t,r){const n=yc(t);return be(n,r.length)},u:function(t,r){const n=t.getFullYear();return be(n,r.length)},Q:function(t,r,n){const o=Math.ceil((t.getMonth()+1)/3);switch(r){case"Q":return String(o);case"QQ":return be(o,2);case"Qo":return n.ordinalNumber(o,{unit:"quarter"});case"QQQ":return n.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(o,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(o,{width:"wide",context:"formatting"})}},q:function(t,r,n){const o=Math.ceil((t.getMonth()+1)/3);switch(r){case"q":return String(o);case"qq":return be(o,2);case"qo":return n.ordinalNumber(o,{unit:"quarter"});case"qqq":return n.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(o,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(o,{width:"wide",context:"standalone"})}},M:function(t,r,n){const o=t.getMonth();switch(r){case"M":case"MM":return In.M(t,r);case"Mo":return n.ordinalNumber(o+1,{unit:"month"});case"MMM":return n.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(o,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(o,{width:"wide",context:"formatting"})}},L:function(t,r,n){const o=t.getMonth();switch(r){case"L":return String(o+1);case"LL":return be(o+1,2);case"Lo":return n.ordinalNumber(o+1,{unit:"month"});case"LLL":return n.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(o,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(o,{width:"wide",context:"standalone"})}},w:function(t,r,n,o){const a=$y(t,o);return r==="wo"?n.ordinalNumber(a,{unit:"week"}):be(a,r.length)},I:function(t,r,n){const o=Ny(t);return r==="Io"?n.ordinalNumber(o,{unit:"week"}):be(o,r.length)},d:function(t,r,n){return r==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):In.d(t,r)},D:function(t,r,n){const o=Ry(t);return r==="Do"?n.ordinalNumber(o,{unit:"dayOfYear"}):be(o,r.length)},E:function(t,r,n){const o=t.getDay();switch(r){case"E":case"EE":case"EEE":return n.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(o,{width:"short",context:"formatting"});case"EEEE":default:return n.day(o,{width:"wide",context:"formatting"})}},e:function(t,r,n,o){const a=t.getDay(),u=(a-o.weekStartsOn+8)%7||7;switch(r){case"e":return String(u);case"ee":return be(u,2);case"eo":return n.ordinalNumber(u,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(t,r,n,o){const a=t.getDay(),u=(a-o.weekStartsOn+8)%7||7;switch(r){case"c":return String(u);case"cc":return be(u,r.length);case"co":return n.ordinalNumber(u,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(t,r,n){const o=t.getDay(),a=o===0?7:o;switch(r){case"i":return String(a);case"ii":return be(a,r.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(o,{width:"short",context:"formatting"});case"iiii":default:return n.day(o,{width:"wide",context:"formatting"})}},a:function(t,r,n){const a=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,r,n){const o=t.getHours();let a;switch(o===12?a=ur.noon:o===0?a=ur.midnight:a=o/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,r,n){const o=t.getHours();let a;switch(o>=17?a=ur.evening:o>=12?a=ur.afternoon:o>=4?a=ur.morning:a=ur.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,r,n){if(r==="ho"){let o=t.getHours()%12;return o===0&&(o=12),n.ordinalNumber(o,{unit:"hour"})}return In.h(t,r)},H:function(t,r,n){return r==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):In.H(t,r)},K:function(t,r,n){const o=t.getHours()%12;return r==="Ko"?n.ordinalNumber(o,{unit:"hour"}):be(o,r.length)},k:function(t,r,n){let o=t.getHours();return o===0&&(o=24),r==="ko"?n.ordinalNumber(o,{unit:"hour"}):be(o,r.length)},m:function(t,r,n){return r==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):In.m(t,r)},s:function(t,r,n){return r==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):In.s(t,r)},S:function(t,r){return In.S(t,r)},X:function(t,r,n){const o=t.getTimezoneOffset();if(o===0)return"Z";switch(r){case"X":return Pl(o);case"XXXX":case"XX":return Yn(o);case"XXXXX":case"XXX":default:return Yn(o,":")}},x:function(t,r,n){const o=t.getTimezoneOffset();switch(r){case"x":return Pl(o);case"xxxx":case"xx":return Yn(o);case"xxxxx":case"xxx":default:return Yn(o,":")}},O:function(t,r,n){const o=t.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+Al(o,":");case"OOOO":default:return"GMT"+Yn(o,":")}},z:function(t,r,n){const o=t.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+Al(o,":");case"zzzz":default:return"GMT"+Yn(o,":")}},t:function(t,r,n){const o=Math.trunc(+t/1e3);return be(o,r.length)},T:function(t,r,n){return be(+t,r.length)}};function Al(t,r=""){const n=t>0?"-":"+",o=Math.abs(t),a=Math.trunc(o/60),u=o%60;return u===0?n+String(a):n+String(a)+r+be(u,2)}function Pl(t,r){return t%60===0?(t>0?"-":"+")+be(Math.abs(t)/60,2):Yn(t,r)}function Yn(t,r=""){const n=t>0?"-":"+",o=Math.abs(t),a=be(Math.trunc(o/60),2),u=be(o%60,2);return n+a+r+u}const Ml=(t,r)=>{switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},xc=(t,r)=>{switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},Wy=(t,r)=>{const n=t.match(/(P+)(p+)?/)||[],o=n[1],a=n[2];if(!a)return Ml(t,r);let u;switch(o){case"P":u=r.dateTime({width:"short"});break;case"PP":u=r.dateTime({width:"medium"});break;case"PPP":u=r.dateTime({width:"long"});break;case"PPPP":default:u=r.dateTime({width:"full"});break}return u.replace("{{date}}",Ml(o,r)).replace("{{time}}",xc(a,r))},zy={p:xc,P:Wy},qy=/^D+$/,Hy=/^Y+$/,Yy=["D","DD","YY","YYYY"];function Uy(t){return qy.test(t)}function Gy(t){return Hy.test(t)}function Vy(t,r,n){const o=Qy(t,r,n);if(console.warn(o),Yy.includes(t))throw new RangeError(o)}function Qy(t,r,n){const o=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${r}\`) for formatting ${o} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const jy=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ky=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Xy=/^'([^]*?)'?$/,Jy=/''/g,Zy=/[a-zA-Z]/;function Li(t,r,n){const o=$i(),a=o.locale??Ly,u=o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,l=o.weekStartsOn??o.locale?.options?.weekStartsOn??0,c=Pt(t,n?.in);if(!ey(c))throw new RangeError("Invalid time value");let f=r.match(Ky).map(p=>{const g=p[0];if(g==="p"||g==="P"){const b=zy[g];return b(p,a.formatLong)}return p}).join("").match(jy).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const g=p[0];if(g==="'")return{isToken:!1,value:ew(p)};if(El[g])return{isToken:!0,value:p};if(g.match(Zy))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:p}});a.localize.preprocessor&&(f=a.localize.preprocessor(c,f));const d={firstWeekContainsDate:u,weekStartsOn:l,locale:a};return f.map(p=>{if(!p.isToken)return p.value;const g=p.value;(Gy(g)||Uy(g))&&Vy(g,r,String(t));const b=El[g[0]];return b(c,g,a.localize,d)}).join("")}function ew(t){const r=t.match(Xy);return r?r[1].replace(Jy,"'"):t}function tw(t,r,n){return K0(t,-r,n)}const _c={almostDailyReport:{folder:"l1almostDailyReport",name:"Daily Report"},"10daysReport":{folder:"l2tenL1ReportsReview",name:"10 Days Review"},"30daysReport":{folder:"l3ThreeL2Review",name:"30 Days Review"},"150daysReport":{folder:"l4FiveL3Review",name:"150 Days Review"}},yt=Xt(Jt.SavingService),Dr={get baseOutput(){return`${Ue?.projectDir??"vault"}/${Ue?.outputDir??"outputs"}`},get fileExtension(){return Ue?.reportFileExtension??".md"},get reportFolders(){const t={};for(const[r,{folder:n}]of Object.entries(_c))t[r]=`${this.baseOutput}/${n}`;return t},_today(){return Li(new Date,"yyyyMMdd")},_getFormattedDate(){return Li(new Date,"dd.MM.yyyy")},_getDaysRemainingInYear(){const t=new Date,n=new Date(t.getFullYear(),11,31).getTime()-t.getTime(),o=Math.ceil(n/(1e3*60*60*24));return String(o).padStart(3,"0")},async _ensureFolder(t){xe.vault.getAbstractFileByPath(t)||(yt.dev(`Creating folder: ${t}`),await xe.vault.createFolder(t))},async _listFiles(t){await this._ensureFolder(t);const r=xe.vault.getAbstractFileByPath(t);return!r||!r.children?[]:r.children.filter(n=>"extension"in n&&n.extension==="md").map(n=>n.name)},async _openFile(t){try{yt.dev(`_openFile start: ${t.path}`);const r=xe.workspace.getLeaf(!0);if(await r.openFile(t),yt.dev(`Main leaf opened file: ${t.path}`),Ue?.devMode){const n=xe.workspace.createLeafBySplit(r,"vertical",!1);await n.openFile(t);const o={type:"markdown",state:{file:t.path,mode:"source"}};try{await n.setViewState(o),yt.dev("DevMode: right leaf forced to source mode")}catch(a){yt.warn(`Failed to force right leaf to source mode: ${a.message}`)}}}catch(r){yt.error(`Failed to open file ${t.path}: ${r.message}`)}},async write(t){const r=t.data??t.content;if(!r)throw new Error("No content provided for write()");const n=this.reportFolders[t.type];if(!n)throw new Error(`Unknown report type: ${t.type}`);await this._ensureFolder(n);const o=this._getDaysRemainingInYear(),a=this._getFormattedDate(),l=(await this._listFiles(n)).length+1,c=String(l).padStart(5,"0"),f=`${o}-${a}-${c}-${t.type}${this.fileExtension}`,d=`${n}/${f}`;if(xe.vault.getAbstractFileByPath(d))return yt.warn(`File already exists: ${d}. Skipping write.`),d;yt.info(`Writing new file: ${d}`);const g=await xe.vault.create(d,r);return t?.open!==!1&&await this._openFile(g),d},async writeGeneral(t,r,n=!1){let o;const a=xe.vault.getAbstractFileByPath(t);if(a)if("extension"in a)yt.info(`Overwriting existing file: ${t}`),await xe.vault.modify(a,r),o=a;else throw yt.error(`Path exists but is not a file: ${t}`),new Error(`Path exists but is not a file: ${t}`);else yt.info(`Creating new file: ${t}`),o=await xe.vault.create(t,r);return n&&await this._openFile(o),t},async delete(t){const r=xe.vault.getAbstractFileByPath(t);r?(yt.info(`Deleting file: ${t}`),await xe.vault.delete(r)):yt.warn(`Cannot delete; file not found: ${t}`)}};function Ol(t){if(t)throw t}var oa,Dl;function nw(){if(Dl)return oa;Dl=1;var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=function(d){return typeof Array.isArray=="function"?Array.isArray(d):r.call(d)==="[object Array]"},u=function(d){if(!d||r.call(d)!=="[object Object]")return!1;var p=t.call(d,"constructor"),g=d.constructor&&d.constructor.prototype&&t.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!p&&!g)return!1;var b;for(b in d);return typeof b>"u"||t.call(d,b)},l=function(d,p){n&&p.name==="__proto__"?n(d,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):d[p.name]=p.newValue},c=function(d,p){if(p==="__proto__")if(t.call(d,p)){if(o)return o(d,p).value}else return;return d[p]};return oa=function f(){var d,p,g,b,y,T,P=arguments[0],B=1,D=arguments.length,H=!1;for(typeof P=="boolean"&&(H=P,P=arguments[1]||{},B=2),(P==null||typeof P!="object"&&typeof P!="function")&&(P={});B<D;++B)if(d=arguments[B],d!=null)for(p in d)g=c(P,p),b=c(d,p),P!==b&&(H&&b&&(u(b)||(y=a(b)))?(y?(y=!1,T=g&&a(g)?g:[]):T=g&&u(g)?g:{},l(P,{name:p,newValue:f(H,T,b)})):typeof b<"u"&&l(P,{name:p,newValue:b}));return P},oa}var rw=nw();const aa=gc(rw);function Ca(t){if(typeof t!="object"||t===null)return!1;const r=Object.getPrototypeOf(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function iw(){const t=[],r={run:n,use:o};return r;function n(...a){let u=-1;const l=a.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);c(null,...a);function c(f,...d){const p=t[++u];let g=-1;if(f){l(f);return}for(;++g<a.length;)(d[g]===null||d[g]===void 0)&&(d[g]=a[g]);a=d,p?ow(p,c)(...d):l(null,...d)}}function o(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return t.push(a),r}}function ow(t,r){let n;return o;function o(...l){const c=t.length>l.length;let f;c&&l.push(a);try{f=t.apply(this,l)}catch(d){const p=d;if(c&&n)throw p;return a(p)}c||(f&&f.then&&typeof f.then=="function"?f.then(u,a):f instanceof Error?a(f):u(f))}function a(l,...c){n||(n=!0,r(l,...c))}function u(l){a(null,l)}}function Pr(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Fl(t.position):"start"in t||"end"in t?Fl(t):"line"in t||"column"in t?Ta(t):""}function Ta(t){return Ll(t&&t.line)+":"+Ll(t&&t.column)}function Fl(t){return Ta(t&&t.start)+"-"+Ta(t&&t.end)}function Ll(t){return t&&typeof t=="number"?t:1}class at extends Error{constructor(r,n,o){super(),typeof n=="string"&&(o=n,n=void 0);let a="",u={},l=!1;if(n&&("line"in n&&"column"in n?u={place:n}:"start"in n&&"end"in n?u={place:n}:"type"in n?u={ancestors:[n],place:n.position}:u={...n}),typeof r=="string"?a=r:!u.cause&&r&&(l=!0,a=r.message,u.cause=r),!u.ruleId&&!u.source&&typeof o=="string"){const f=o.indexOf(":");f===-1?u.ruleId=o:(u.source=o.slice(0,f),u.ruleId=o.slice(f+1))}if(!u.place&&u.ancestors&&u.ancestors){const f=u.ancestors[u.ancestors.length-1];f&&(u.place=f.position)}const c=u.place&&"start"in u.place?u.place.start:u.place;this.ancestors=u.ancestors||void 0,this.cause=u.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=c?c.line:void 0,this.name=Pr(u.place)||"1:1",this.place=u.place||void 0,this.reason=this.message,this.ruleId=u.ruleId||void 0,this.source=u.source||void 0,this.stack=l&&u.cause&&typeof u.cause.stack=="string"?u.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}at.prototype.file="";at.prototype.name="";at.prototype.reason="";at.prototype.message="";at.prototype.stack="";at.prototype.column=void 0;at.prototype.line=void 0;at.prototype.ancestors=void 0;at.prototype.cause=void 0;at.prototype.fatal=void 0;at.prototype.place=void 0;at.prototype.ruleId=void 0;at.prototype.source=void 0;const Vt={basename:aw,dirname:sw,extname:uw,join:lw,sep:"/"};function aw(t,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');Fr(t);let n=0,o=-1,a=t.length,u;if(r===void 0||r.length===0||r.length>t.length){for(;a--;)if(t.codePointAt(a)===47){if(u){n=a+1;break}}else o<0&&(u=!0,o=a+1);return o<0?"":t.slice(n,o)}if(r===t)return"";let l=-1,c=r.length-1;for(;a--;)if(t.codePointAt(a)===47){if(u){n=a+1;break}}else l<0&&(u=!0,l=a+1),c>-1&&(t.codePointAt(a)===r.codePointAt(c--)?c<0&&(o=a):(c=-1,o=l));return n===o?o=l:o<0&&(o=t.length),t.slice(n,o)}function sw(t){if(Fr(t),t.length===0)return".";let r=-1,n=t.length,o;for(;--n;)if(t.codePointAt(n)===47){if(o){r=n;break}}else o||(o=!0);return r<0?t.codePointAt(0)===47?"/":".":r===1&&t.codePointAt(0)===47?"//":t.slice(0,r)}function uw(t){Fr(t);let r=t.length,n=-1,o=0,a=-1,u=0,l;for(;r--;){const c=t.codePointAt(r);if(c===47){if(l){o=r+1;break}continue}n<0&&(l=!0,n=r+1),c===46?a<0?a=r:u!==1&&(u=1):a>-1&&(u=-1)}return a<0||n<0||u===0||u===1&&a===n-1&&a===o+1?"":t.slice(a,n)}function lw(...t){let r=-1,n;for(;++r<t.length;)Fr(t[r]),t[r]&&(n=n===void 0?t[r]:n+"/"+t[r]);return n===void 0?".":cw(n)}function cw(t){Fr(t);const r=t.codePointAt(0)===47;let n=fw(t,!r);return n.length===0&&!r&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),r?"/"+n:n}function fw(t,r){let n="",o=0,a=-1,u=0,l=-1,c,f;for(;++l<=t.length;){if(l<t.length)c=t.codePointAt(l);else{if(c===47)break;c=47}if(c===47){if(!(a===l-1||u===1))if(a!==l-1&&u===2){if(n.length<2||o!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",o=0):(n=n.slice(0,f),o=n.length-1-n.lastIndexOf("/")),a=l,u=0;continue}}else if(n.length>0){n="",o=0,a=l,u=0;continue}}r&&(n=n.length>0?n+"/..":"..",o=2)}else n.length>0?n+="/"+t.slice(a+1,l):n=t.slice(a+1,l),o=l-a-1;a=l,u=0}else c===46&&u>-1?u++:u=-1}return n}function Fr(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const hw={cwd:dw};function dw(){return"/"}function Ea(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function pw(t){if(typeof t=="string")t=new URL(t);else if(!Ea(t)){const r=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw r.code="ERR_INVALID_ARG_TYPE",r}if(t.protocol!=="file:"){const r=new TypeError("The URL must be of scheme file");throw r.code="ERR_INVALID_URL_SCHEME",r}return gw(t)}function gw(t){if(t.hostname!==""){const o=new TypeError('File URL host must be "localhost" or empty on darwin');throw o.code="ERR_INVALID_FILE_URL_HOST",o}const r=t.pathname;let n=-1;for(;++n<r.length;)if(r.codePointAt(n)===37&&r.codePointAt(n+1)===50){const o=r.codePointAt(n+2);if(o===70||o===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(r)}const sa=["history","path","basename","stem","extname","dirname"];class mw{constructor(r){let n;r?Ea(r)?n={path:r}:typeof r=="string"||yw(r)?n={value:r}:n=r:n={},this.cwd="cwd"in n?"":hw.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let o=-1;for(;++o<sa.length;){const u=sa[o];u in n&&n[u]!==void 0&&n[u]!==null&&(this[u]=u==="history"?[...n[u]]:n[u])}let a;for(a in n)sa.includes(a)||(this[a]=n[a])}get basename(){return typeof this.path=="string"?Vt.basename(this.path):void 0}set basename(r){la(r,"basename"),ua(r,"basename"),this.path=Vt.join(this.dirname||"",r)}get dirname(){return typeof this.path=="string"?Vt.dirname(this.path):void 0}set dirname(r){Rl(this.basename,"dirname"),this.path=Vt.join(r||"",this.basename)}get extname(){return typeof this.path=="string"?Vt.extname(this.path):void 0}set extname(r){if(ua(r,"extname"),Rl(this.dirname,"extname"),r){if(r.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(r.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Vt.join(this.dirname,this.stem+(r||""))}get path(){return this.history[this.history.length-1]}set path(r){Ea(r)&&(r=pw(r)),la(r,"path"),this.path!==r&&this.history.push(r)}get stem(){return typeof this.path=="string"?Vt.basename(this.path,this.extname):void 0}set stem(r){la(r,"stem"),ua(r,"stem"),this.path=Vt.join(this.dirname||"",r+(this.extname||""))}fail(r,n,o){const a=this.message(r,n,o);throw a.fatal=!0,a}info(r,n,o){const a=this.message(r,n,o);return a.fatal=void 0,a}message(r,n,o){const a=new at(r,n,o);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(r){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(r||void 0).decode(this.value)}}function ua(t,r){if(t&&t.includes(Vt.sep))throw new Error("`"+r+"` cannot be a path: did not expect `"+Vt.sep+"`")}function la(t,r){if(!t)throw new Error("`"+r+"` cannot be empty")}function Rl(t,r){if(!t)throw new Error("Setting `"+r+"` requires `path` to be set too")}function yw(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const ww=(function(t){const o=this.constructor.prototype,a=o[t],u=function(){return a.apply(u,arguments)};return Object.setPrototypeOf(u,o),u}),bw={}.hasOwnProperty;class Ba extends ww{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=iw()}copy(){const r=new Ba;let n=-1;for(;++n<this.attachers.length;){const o=this.attachers[n];r.use(...o)}return r.data(aa(!0,{},this.namespace)),r}data(r,n){return typeof r=="string"?arguments.length===2?(ha("data",this.frozen),this.namespace[r]=n,this):bw.call(this.namespace,r)&&this.namespace[r]||void 0:r?(ha("data",this.frozen),this.namespace=r,this):this.namespace}freeze(){if(this.frozen)return this;const r=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...o]=this.attachers[this.freezeIndex];if(o[0]===!1)continue;o[0]===!0&&(o[0]=void 0);const a=n.call(r,...o);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(r){this.freeze();const n=Ei(r),o=this.parser||this.Parser;return ca("parse",o),o(String(n),n)}process(r,n){const o=this;return this.freeze(),ca("process",this.parser||this.Parser),fa("process",this.compiler||this.Compiler),n?a(void 0,n):new Promise(a);function a(u,l){const c=Ei(r),f=o.parse(c);o.run(f,c,function(p,g,b){if(p||!g||!b)return d(p);const y=g,T=o.stringify(y,b);xw(T)?b.value=T:b.result=T,d(p,b)});function d(p,g){p||!g?l(p):u?u(g):n(void 0,g)}}}processSync(r){let n=!1,o;return this.freeze(),ca("processSync",this.parser||this.Parser),fa("processSync",this.compiler||this.Compiler),this.process(r,a),Bl("processSync","process",n),o;function a(u,l){n=!0,Ol(u),o=l}}run(r,n,o){Nl(r),this.freeze();const a=this.transformers;return!o&&typeof n=="function"&&(o=n,n=void 0),o?u(void 0,o):new Promise(u);function u(l,c){const f=Ei(n);a.run(r,f,d);function d(p,g,b){const y=g||r;p?c(p):l?l(y):o(void 0,y,b)}}}runSync(r,n){let o=!1,a;return this.run(r,n,u),Bl("runSync","run",o),a;function u(l,c){Ol(l),a=c,o=!0}}stringify(r,n){this.freeze();const o=Ei(n),a=this.compiler||this.Compiler;return fa("stringify",a),Nl(r),a(r,o)}use(r,...n){const o=this.attachers,a=this.namespace;if(ha("use",this.frozen),r!=null)if(typeof r=="function")f(r,n);else if(typeof r=="object")Array.isArray(r)?c(r):l(r);else throw new TypeError("Expected usable value, not `"+r+"`");return this;function u(d){if(typeof d=="function")f(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[p,...g]=d;f(p,g)}else l(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function l(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(d.plugins),d.settings&&(a.settings=aa(!0,a.settings,d.settings))}function c(d){let p=-1;if(d!=null)if(Array.isArray(d))for(;++p<d.length;){const g=d[p];u(g)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function f(d,p){let g=-1,b=-1;for(;++g<o.length;)if(o[g][0]===d){b=g;break}if(b===-1)o.push([d,...p]);else if(p.length>0){let[y,...T]=p;const P=o[b][1];Ca(P)&&Ca(y)&&(y=aa(!0,P,y)),o[b]=[d,y,...T]}}}}const Aa=new Ba().freeze();function ca(t,r){if(typeof r!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function fa(t,r){if(typeof r!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function ha(t,r){if(r)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Nl(t){if(!Ca(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function Bl(t,r,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+r+"` instead")}function Ei(t){return vw(t)?t:new mw(t)}function vw(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function xw(t){return typeof t=="string"||_w(t)}function _w(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const kw={};function $a(t,r){const n=kw,o=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,a=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return kc(t,o,a)}function kc(t,r,n){if(Sw(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(r&&"alt"in t&&t.alt)return t.alt;if("children"in t)return $l(t.children,r,n)}return Array.isArray(t)?$l(t,r,n):""}function $l(t,r,n){const o=[];let a=-1;for(;++a<t.length;)o[a]=kc(t[a],r,n);return o.join("")}function Sw(t){return!!(t&&typeof t=="object")}const Wl=document.createElement("i");function Wa(t){const r="&"+t+";";Wl.innerHTML=r;const n=Wl.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===r?!1:n}function jt(t,r,n,o){const a=t.length;let u=0,l;if(r<0?r=-r>a?0:a+r:r=r>a?a:r,n=n>0?n:0,o.length<1e4)l=Array.from(o),l.unshift(r,n),t.splice(...l);else for(n&&t.splice(r,n);u<o.length;)l=o.slice(u,u+1e4),l.unshift(r,0),t.splice(...l),u+=1e4,r+=1e4}function At(t,r){return t.length>0?(jt(t,t.length,0,r),t):r}const zl={}.hasOwnProperty;function Iw(t){const r={};let n=-1;for(;++n<t.length;)Cw(r,t[n]);return r}function Cw(t,r){let n;for(n in r){const a=(zl.call(t,n)?t[n]:void 0)||(t[n]={}),u=r[n];let l;if(u)for(l in u){zl.call(a,l)||(a[l]=[]);const c=u[l];Tw(a[l],Array.isArray(c)?c:c?[c]:[])}}}function Tw(t,r){let n=-1;const o=[];for(;++n<r.length;)(r[n].add==="after"?t:o).push(r[n]);jt(t,0,0,o)}function Sc(t,r){const n=Number.parseInt(t,r);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"ÔøΩ":String.fromCodePoint(n)}function lr(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Qt=En(/[A-Za-z]/),zt=En(/[\dA-Za-z]/),Ew=En(/[#-'*+\--9=?A-Z^-~]/);function Pa(t){return t!==null&&(t<32||t===127)}const Ma=En(/\d/),Aw=En(/[\dA-Fa-f]/),Pw=En(/[!-/:-@[-`{-~]/);function te(t){return t!==null&&t<-2}function ot(t){return t!==null&&(t<0||t===32)}function ge(t){return t===-2||t===-1||t===32}const Mw=En(new RegExp("\\p{P}|\\p{S}","u")),Ow=En(/\s/);function En(t){return r;function r(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function ke(t,r,n,o){const a=o?o-1:Number.POSITIVE_INFINITY;let u=0;return l;function l(f){return ge(f)?(t.enter(n),c(f)):r(f)}function c(f){return ge(f)&&u++<a?(t.consume(f),c):(t.exit(n),r(f))}}const Dw={tokenize:Fw};function Fw(t){const r=t.attempt(this.parser.constructs.contentInitial,o,a);let n;return r;function o(c){if(c===null){t.consume(c);return}return t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),ke(t,r,"linePrefix")}function a(c){return t.enter("paragraph"),u(c)}function u(c){const f=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,l(c)}function l(c){if(c===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(c);return}return te(c)?(t.consume(c),t.exit("chunkText"),u):(t.consume(c),l)}}const Lw={tokenize:Rw},ql={tokenize:Nw};function Rw(t){const r=this,n=[];let o=0,a,u,l;return c;function c(z){if(o<n.length){const W=n[o];return r.containerState=W[1],t.attempt(W[0].continuation,f,d)(z)}return d(z)}function f(z){if(o++,r.containerState._closeFlow){r.containerState._closeFlow=void 0,a&&H();const W=r.events.length;let O=W,E;for(;O--;)if(r.events[O][0]==="exit"&&r.events[O][1].type==="chunkFlow"){E=r.events[O][1].end;break}D(o);let U=W;for(;U<r.events.length;)r.events[U][1].end={...E},U++;return jt(r.events,O+1,0,r.events.slice(W)),r.events.length=U,d(z)}return c(z)}function d(z){if(o===n.length){if(!a)return b(z);if(a.currentConstruct&&a.currentConstruct.concrete)return T(z);r.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return r.containerState={},t.check(ql,p,g)(z)}function p(z){return a&&H(),D(o),b(z)}function g(z){return r.parser.lazy[r.now().line]=o!==n.length,l=r.now().offset,T(z)}function b(z){return r.containerState={},t.attempt(ql,y,T)(z)}function y(z){return o++,n.push([r.currentConstruct,r.containerState]),b(z)}function T(z){if(z===null){a&&H(),D(0),t.consume(z);return}return a=a||r.parser.flow(r.now()),t.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:u}),P(z)}function P(z){if(z===null){B(t.exit("chunkFlow"),!0),D(0),t.consume(z);return}return te(z)?(t.consume(z),B(t.exit("chunkFlow")),o=0,r.interrupt=void 0,c):(t.consume(z),P)}function B(z,W){const O=r.sliceStream(z);if(W&&O.push(null),z.previous=u,u&&(u.next=z),u=z,a.defineSkip(z.start),a.write(O),r.parser.lazy[z.start.line]){let E=a.events.length;for(;E--;)if(a.events[E][1].start.offset<l&&(!a.events[E][1].end||a.events[E][1].end.offset>l))return;const U=r.events.length;let Q=U,ee,he;for(;Q--;)if(r.events[Q][0]==="exit"&&r.events[Q][1].type==="chunkFlow"){if(ee){he=r.events[Q][1].end;break}ee=!0}for(D(o),E=U;E<r.events.length;)r.events[E][1].end={...he},E++;jt(r.events,Q+1,0,r.events.slice(U)),r.events.length=E}}function D(z){let W=n.length;for(;W-- >z;){const O=n[W];r.containerState=O[1],O[0].exit.call(r,t)}n.length=z}function H(){a.write([null]),u=void 0,a=void 0,r.containerState._closeFlow=void 0}}function Nw(t,r,n){return ke(t,t.attempt(this.parser.constructs.document,r,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ri(t){if(t===null||ot(t)||Ow(t))return 1;if(Mw(t))return 2}function za(t,r,n){const o=[];let a=-1;for(;++a<t.length;){const u=t[a].resolveAll;u&&!o.includes(u)&&(r=u(r,n),o.push(u))}return r}const Oa={name:"attention",resolveAll:Bw,tokenize:$w};function Bw(t,r){let n=-1,o,a,u,l,c,f,d,p;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(o=n;o--;)if(t[o][0]==="exit"&&t[o][1].type==="attentionSequence"&&t[o][1]._open&&r.sliceSerialize(t[o][1]).charCodeAt(0)===r.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[o][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[o][1].end.offset-t[o][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;f=t[o][1].end.offset-t[o][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const g={...t[o][1].end},b={...t[n][1].start};Hl(g,-f),Hl(b,f),l={type:f>1?"strongSequence":"emphasisSequence",start:g,end:{...t[o][1].end}},c={type:f>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:b},u={type:f>1?"strongText":"emphasisText",start:{...t[o][1].end},end:{...t[n][1].start}},a={type:f>1?"strong":"emphasis",start:{...l.start},end:{...c.end}},t[o][1].end={...l.start},t[n][1].start={...c.end},d=[],t[o][1].end.offset-t[o][1].start.offset&&(d=At(d,[["enter",t[o][1],r],["exit",t[o][1],r]])),d=At(d,[["enter",a,r],["enter",l,r],["exit",l,r],["enter",u,r]]),d=At(d,za(r.parser.constructs.insideSpan.null,t.slice(o+1,n),r)),d=At(d,[["exit",u,r],["enter",c,r],["exit",c,r],["exit",a,r]]),t[n][1].end.offset-t[n][1].start.offset?(p=2,d=At(d,[["enter",t[n][1],r],["exit",t[n][1],r]])):p=0,jt(t,o-1,n-o+3,d),n=o+d.length-p-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function $w(t,r){const n=this.parser.constructs.attentionMarkers.null,o=this.previous,a=Ri(o);let u;return l;function l(f){return u=f,t.enter("attentionSequence"),c(f)}function c(f){if(f===u)return t.consume(f),c;const d=t.exit("attentionSequence"),p=Ri(f),g=!p||p===2&&a||n.includes(f),b=!a||a===2&&p||n.includes(o);return d._open=!!(u===42?g:g&&(a||!b)),d._close=!!(u===42?b:b&&(p||!g)),r(f)}}function Hl(t,r){t.column+=r,t.offset+=r,t._bufferIndex+=r}const Ww={name:"autolink",tokenize:zw};function zw(t,r,n){let o=0;return a;function a(y){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),u}function u(y){return Qt(y)?(t.consume(y),l):y===64?n(y):d(y)}function l(y){return y===43||y===45||y===46||zt(y)?(o=1,c(y)):d(y)}function c(y){return y===58?(t.consume(y),o=0,f):(y===43||y===45||y===46||zt(y))&&o++<32?(t.consume(y),c):(o=0,d(y))}function f(y){return y===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),r):y===null||y===32||y===60||Pa(y)?n(y):(t.consume(y),f)}function d(y){return y===64?(t.consume(y),p):Ew(y)?(t.consume(y),d):n(y)}function p(y){return zt(y)?g(y):n(y)}function g(y){return y===46?(t.consume(y),o=0,p):y===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),r):b(y)}function b(y){if((y===45||zt(y))&&o++<63){const T=y===45?b:g;return t.consume(y),T}return n(y)}}const Wi={partial:!0,tokenize:qw};function qw(t,r,n){return o;function o(u){return ge(u)?ke(t,a,"linePrefix")(u):a(u)}function a(u){return u===null||te(u)?r(u):n(u)}}const Ic={continuation:{tokenize:Yw},exit:Uw,name:"blockQuote",tokenize:Hw};function Hw(t,r,n){const o=this;return a;function a(l){if(l===62){const c=o.containerState;return c.open||(t.enter("blockQuote",{_container:!0}),c.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(l),t.exit("blockQuoteMarker"),u}return n(l)}function u(l){return ge(l)?(t.enter("blockQuotePrefixWhitespace"),t.consume(l),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),r):(t.exit("blockQuotePrefix"),r(l))}}function Yw(t,r,n){const o=this;return a;function a(l){return ge(l)?ke(t,u,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):u(l)}function u(l){return t.attempt(Ic,r,n)(l)}}function Uw(t){t.exit("blockQuote")}const Cc={name:"characterEscape",tokenize:Gw};function Gw(t,r,n){return o;function o(u){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(u),t.exit("escapeMarker"),a}function a(u){return Pw(u)?(t.enter("characterEscapeValue"),t.consume(u),t.exit("characterEscapeValue"),t.exit("characterEscape"),r):n(u)}}const Tc={name:"characterReference",tokenize:Vw};function Vw(t,r,n){const o=this;let a=0,u,l;return c;function c(g){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(g),t.exit("characterReferenceMarker"),f}function f(g){return g===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(g),t.exit("characterReferenceMarkerNumeric"),d):(t.enter("characterReferenceValue"),u=31,l=zt,p(g))}function d(g){return g===88||g===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(g),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),u=6,l=Aw,p):(t.enter("characterReferenceValue"),u=7,l=Ma,p(g))}function p(g){if(g===59&&a){const b=t.exit("characterReferenceValue");return l===zt&&!Wa(o.sliceSerialize(b))?n(g):(t.enter("characterReferenceMarker"),t.consume(g),t.exit("characterReferenceMarker"),t.exit("characterReference"),r)}return l(g)&&a++<u?(t.consume(g),p):n(g)}}const Yl={partial:!0,tokenize:jw},Ul={concrete:!0,name:"codeFenced",tokenize:Qw};function Qw(t,r,n){const o=this,a={partial:!0,tokenize:O};let u=0,l=0,c;return f;function f(E){return d(E)}function d(E){const U=o.events[o.events.length-1];return u=U&&U[1].type==="linePrefix"?U[2].sliceSerialize(U[1],!0).length:0,c=E,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),p(E)}function p(E){return E===c?(l++,t.consume(E),p):l<3?n(E):(t.exit("codeFencedFenceSequence"),ge(E)?ke(t,g,"whitespace")(E):g(E))}function g(E){return E===null||te(E)?(t.exit("codeFencedFence"),o.interrupt?r(E):t.check(Yl,P,W)(E)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),b(E))}function b(E){return E===null||te(E)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),g(E)):ge(E)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),ke(t,y,"whitespace")(E)):E===96&&E===c?n(E):(t.consume(E),b)}function y(E){return E===null||te(E)?g(E):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),T(E))}function T(E){return E===null||te(E)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),g(E)):E===96&&E===c?n(E):(t.consume(E),T)}function P(E){return t.attempt(a,W,B)(E)}function B(E){return t.enter("lineEnding"),t.consume(E),t.exit("lineEnding"),D}function D(E){return u>0&&ge(E)?ke(t,H,"linePrefix",u+1)(E):H(E)}function H(E){return E===null||te(E)?t.check(Yl,P,W)(E):(t.enter("codeFlowValue"),z(E))}function z(E){return E===null||te(E)?(t.exit("codeFlowValue"),H(E)):(t.consume(E),z)}function W(E){return t.exit("codeFenced"),r(E)}function O(E,U,Q){let ee=0;return he;function he(ce){return E.enter("lineEnding"),E.consume(ce),E.exit("lineEnding"),j}function j(ce){return E.enter("codeFencedFence"),ge(ce)?ke(E,V,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ce):V(ce)}function V(ce){return ce===c?(E.enter("codeFencedFenceSequence"),me(ce)):Q(ce)}function me(ce){return ce===c?(ee++,E.consume(ce),me):ee>=l?(E.exit("codeFencedFenceSequence"),ge(ce)?ke(E,Te,"whitespace")(ce):Te(ce)):Q(ce)}function Te(ce){return ce===null||te(ce)?(E.exit("codeFencedFence"),U(ce)):Q(ce)}}}function jw(t,r,n){const o=this;return a;function a(l){return l===null?n(l):(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),u)}function u(l){return o.parser.lazy[o.now().line]?n(l):r(l)}}const da={name:"codeIndented",tokenize:Xw},Kw={partial:!0,tokenize:Jw};function Xw(t,r,n){const o=this;return a;function a(d){return t.enter("codeIndented"),ke(t,u,"linePrefix",5)(d)}function u(d){const p=o.events[o.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?l(d):n(d)}function l(d){return d===null?f(d):te(d)?t.attempt(Kw,l,f)(d):(t.enter("codeFlowValue"),c(d))}function c(d){return d===null||te(d)?(t.exit("codeFlowValue"),l(d)):(t.consume(d),c)}function f(d){return t.exit("codeIndented"),r(d)}}function Jw(t,r,n){const o=this;return a;function a(l){return o.parser.lazy[o.now().line]?n(l):te(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a):ke(t,u,"linePrefix",5)(l)}function u(l){const c=o.events[o.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?r(l):te(l)?a(l):n(l)}}const Zw={name:"codeText",previous:tb,resolve:eb,tokenize:nb};function eb(t){let r=t.length-4,n=3,o,a;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[r][1].type==="lineEnding"||t[r][1].type==="space")){for(o=n;++o<r;)if(t[o][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[r][1].type="codeTextPadding",n+=2,r-=2;break}}for(o=n-1,r++;++o<=r;)a===void 0?o!==r&&t[o][1].type!=="lineEnding"&&(a=o):(o===r||t[o][1].type==="lineEnding")&&(t[a][1].type="codeTextData",o!==a+2&&(t[a][1].end=t[o-1][1].end,t.splice(a+2,o-a-2),r-=o-a-2,o=a+2),a=void 0);return t}function tb(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function nb(t,r,n){let o=0,a,u;return l;function l(g){return t.enter("codeText"),t.enter("codeTextSequence"),c(g)}function c(g){return g===96?(t.consume(g),o++,c):(t.exit("codeTextSequence"),f(g))}function f(g){return g===null?n(g):g===32?(t.enter("space"),t.consume(g),t.exit("space"),f):g===96?(u=t.enter("codeTextSequence"),a=0,p(g)):te(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),f):(t.enter("codeTextData"),d(g))}function d(g){return g===null||g===32||g===96||te(g)?(t.exit("codeTextData"),f(g)):(t.consume(g),d)}function p(g){return g===96?(t.consume(g),a++,p):a===o?(t.exit("codeTextSequence"),t.exit("codeText"),r(g)):(u.type="codeTextData",d(g))}}class rb{constructor(r){this.left=r?[...r]:[],this.right=[]}get(r){if(r<0||r>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+r+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return r<this.left.length?this.left[r]:this.right[this.right.length-r+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(r,n){const o=n??Number.POSITIVE_INFINITY;return o<this.left.length?this.left.slice(r,o):r>this.left.length?this.right.slice(this.right.length-o+this.left.length,this.right.length-r+this.left.length).reverse():this.left.slice(r).concat(this.right.slice(this.right.length-o+this.left.length).reverse())}splice(r,n,o){const a=n||0;this.setCursor(Math.trunc(r));const u=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return o&&Tr(this.left,o),u.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(r){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(r)}pushMany(r){this.setCursor(Number.POSITIVE_INFINITY),Tr(this.left,r)}unshift(r){this.setCursor(0),this.right.push(r)}unshiftMany(r){this.setCursor(0),Tr(this.right,r.reverse())}setCursor(r){if(!(r===this.left.length||r>this.left.length&&this.right.length===0||r<0&&this.left.length===0))if(r<this.left.length){const n=this.left.splice(r,Number.POSITIVE_INFINITY);Tr(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-r,Number.POSITIVE_INFINITY);Tr(this.left,n.reverse())}}}function Tr(t,r){let n=0;if(r.length<1e4)t.push(...r);else for(;n<r.length;)t.push(...r.slice(n,n+1e4)),n+=1e4}function Ec(t){const r={};let n=-1,o,a,u,l,c,f,d;const p=new rb(t);for(;++n<p.length;){for(;n in r;)n=r[n];if(o=p.get(n),n&&o[1].type==="chunkFlow"&&p.get(n-1)[1].type==="listItemPrefix"&&(f=o[1]._tokenizer.events,u=0,u<f.length&&f[u][1].type==="lineEndingBlank"&&(u+=2),u<f.length&&f[u][1].type==="content"))for(;++u<f.length&&f[u][1].type!=="content";)f[u][1].type==="chunkText"&&(f[u][1]._isInFirstContentOfListItem=!0,u++);if(o[0]==="enter")o[1].contentType&&(Object.assign(r,ib(p,n)),n=r[n],d=!0);else if(o[1]._container){for(u=n,a=void 0;u--;)if(l=p.get(u),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(a&&(p.get(a)[1].type="lineEndingBlank"),l[1].type="lineEnding",a=u);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;a&&(o[1].end={...p.get(a)[1].start},c=p.slice(a,n),c.unshift(o),p.splice(a,n-a+1,c))}}return jt(t,0,Number.POSITIVE_INFINITY,p.slice(0)),!d}function ib(t,r){const n=t.get(r)[1],o=t.get(r)[2];let a=r-1;const u=[];let l=n._tokenizer;l||(l=o.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const c=l.events,f=[],d={};let p,g,b=-1,y=n,T=0,P=0;const B=[P];for(;y;){for(;t.get(++a)[1]!==y;);u.push(a),y._tokenizer||(p=o.sliceStream(y),y.next||p.push(null),g&&l.defineSkip(y.start),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(p),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),g=y,y=y.next}for(y=n;++b<c.length;)c[b][0]==="exit"&&c[b-1][0]==="enter"&&c[b][1].type===c[b-1][1].type&&c[b][1].start.line!==c[b][1].end.line&&(P=b+1,B.push(P),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(l.events=[],y?(y._tokenizer=void 0,y.previous=void 0):B.pop(),b=B.length;b--;){const D=c.slice(B[b],B[b+1]),H=u.pop();f.push([H,H+D.length-1]),t.splice(H,2,D)}for(f.reverse(),b=-1;++b<f.length;)d[T+f[b][0]]=T+f[b][1],T+=f[b][1]-f[b][0]-1;return d}const ob={resolve:sb,tokenize:ub},ab={partial:!0,tokenize:lb};function sb(t){return Ec(t),t}function ub(t,r){let n;return o;function o(c){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),a(c)}function a(c){return c===null?u(c):te(c)?t.check(ab,l,u)(c):(t.consume(c),a)}function u(c){return t.exit("chunkContent"),t.exit("content"),r(c)}function l(c){return t.consume(c),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function lb(t,r,n){const o=this;return a;function a(l){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),ke(t,u,"linePrefix")}function u(l){if(l===null||te(l))return n(l);const c=o.events[o.events.length-1];return!o.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?r(l):t.interrupt(o.parser.constructs.flow,n,r)(l)}}function Ac(t,r,n,o,a,u,l,c,f){const d=f||Number.POSITIVE_INFINITY;let p=0;return g;function g(D){return D===60?(t.enter(o),t.enter(a),t.enter(u),t.consume(D),t.exit(u),b):D===null||D===32||D===41||Pa(D)?n(D):(t.enter(o),t.enter(l),t.enter(c),t.enter("chunkString",{contentType:"string"}),P(D))}function b(D){return D===62?(t.enter(u),t.consume(D),t.exit(u),t.exit(a),t.exit(o),r):(t.enter(c),t.enter("chunkString",{contentType:"string"}),y(D))}function y(D){return D===62?(t.exit("chunkString"),t.exit(c),b(D)):D===null||D===60||te(D)?n(D):(t.consume(D),D===92?T:y)}function T(D){return D===60||D===62||D===92?(t.consume(D),y):y(D)}function P(D){return!p&&(D===null||D===41||ot(D))?(t.exit("chunkString"),t.exit(c),t.exit(l),t.exit(o),r(D)):p<d&&D===40?(t.consume(D),p++,P):D===41?(t.consume(D),p--,P):D===null||D===32||D===40||Pa(D)?n(D):(t.consume(D),D===92?B:P)}function B(D){return D===40||D===41||D===92?(t.consume(D),P):P(D)}}function Pc(t,r,n,o,a,u){const l=this;let c=0,f;return d;function d(y){return t.enter(o),t.enter(a),t.consume(y),t.exit(a),t.enter(u),p}function p(y){return c>999||y===null||y===91||y===93&&!f||y===94&&!c&&"_hiddenFootnoteSupport"in l.parser.constructs?n(y):y===93?(t.exit(u),t.enter(a),t.consume(y),t.exit(a),t.exit(o),r):te(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),p):(t.enter("chunkString",{contentType:"string"}),g(y))}function g(y){return y===null||y===91||y===93||te(y)||c++>999?(t.exit("chunkString"),p(y)):(t.consume(y),f||(f=!ge(y)),y===92?b:g)}function b(y){return y===91||y===92||y===93?(t.consume(y),c++,g):g(y)}}function Mc(t,r,n,o,a,u){let l;return c;function c(b){return b===34||b===39||b===40?(t.enter(o),t.enter(a),t.consume(b),t.exit(a),l=b===40?41:b,f):n(b)}function f(b){return b===l?(t.enter(a),t.consume(b),t.exit(a),t.exit(o),r):(t.enter(u),d(b))}function d(b){return b===l?(t.exit(u),f(l)):b===null?n(b):te(b)?(t.enter("lineEnding"),t.consume(b),t.exit("lineEnding"),ke(t,d,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),p(b))}function p(b){return b===l||b===null||te(b)?(t.exit("chunkString"),d(b)):(t.consume(b),b===92?g:p)}function g(b){return b===l||b===92?(t.consume(b),p):p(b)}}function Mr(t,r){let n;return o;function o(a){return te(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),n=!0,o):ge(a)?ke(t,o,n?"linePrefix":"lineSuffix")(a):r(a)}}const cb={name:"definition",tokenize:hb},fb={partial:!0,tokenize:db};function hb(t,r,n){const o=this;let a;return u;function u(y){return t.enter("definition"),l(y)}function l(y){return Pc.call(o,t,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function c(y){return a=lr(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)),y===58?(t.enter("definitionMarker"),t.consume(y),t.exit("definitionMarker"),f):n(y)}function f(y){return ot(y)?Mr(t,d)(y):d(y)}function d(y){return Ac(t,p,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function p(y){return t.attempt(fb,g,g)(y)}function g(y){return ge(y)?ke(t,b,"whitespace")(y):b(y)}function b(y){return y===null||te(y)?(t.exit("definition"),o.parser.defined.push(a),r(y)):n(y)}}function db(t,r,n){return o;function o(c){return ot(c)?Mr(t,a)(c):n(c)}function a(c){return Mc(t,u,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function u(c){return ge(c)?ke(t,l,"whitespace")(c):l(c)}function l(c){return c===null||te(c)?r(c):n(c)}}const pb={name:"hardBreakEscape",tokenize:gb};function gb(t,r,n){return o;function o(u){return t.enter("hardBreakEscape"),t.consume(u),a}function a(u){return te(u)?(t.exit("hardBreakEscape"),r(u)):n(u)}}const mb={name:"headingAtx",resolve:yb,tokenize:wb};function yb(t,r){let n=t.length-2,o=3,a,u;return t[o][1].type==="whitespace"&&(o+=2),n-2>o&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(o===n-1||n-4>o&&t[n-2][1].type==="whitespace")&&(n-=o+1===n?2:4),n>o&&(a={type:"atxHeadingText",start:t[o][1].start,end:t[n][1].end},u={type:"chunkText",start:t[o][1].start,end:t[n][1].end,contentType:"text"},jt(t,o,n-o+1,[["enter",a,r],["enter",u,r],["exit",u,r],["exit",a,r]])),t}function wb(t,r,n){let o=0;return a;function a(p){return t.enter("atxHeading"),u(p)}function u(p){return t.enter("atxHeadingSequence"),l(p)}function l(p){return p===35&&o++<6?(t.consume(p),l):p===null||ot(p)?(t.exit("atxHeadingSequence"),c(p)):n(p)}function c(p){return p===35?(t.enter("atxHeadingSequence"),f(p)):p===null||te(p)?(t.exit("atxHeading"),r(p)):ge(p)?ke(t,c,"whitespace")(p):(t.enter("atxHeadingText"),d(p))}function f(p){return p===35?(t.consume(p),f):(t.exit("atxHeadingSequence"),c(p))}function d(p){return p===null||p===35||ot(p)?(t.exit("atxHeadingText"),c(p)):(t.consume(p),d)}}const bb=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Gl=["pre","script","style","textarea"],vb={concrete:!0,name:"htmlFlow",resolveTo:kb,tokenize:Sb},xb={partial:!0,tokenize:Cb},_b={partial:!0,tokenize:Ib};function kb(t){let r=t.length;for(;r--&&!(t[r][0]==="enter"&&t[r][1].type==="htmlFlow"););return r>1&&t[r-2][1].type==="linePrefix"&&(t[r][1].start=t[r-2][1].start,t[r+1][1].start=t[r-2][1].start,t.splice(r-2,2)),t}function Sb(t,r,n){const o=this;let a,u,l,c,f;return d;function d(S){return p(S)}function p(S){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(S),g}function g(S){return S===33?(t.consume(S),b):S===47?(t.consume(S),u=!0,P):S===63?(t.consume(S),a=3,o.interrupt?r:_):Qt(S)?(t.consume(S),l=String.fromCharCode(S),B):n(S)}function b(S){return S===45?(t.consume(S),a=2,y):S===91?(t.consume(S),a=5,c=0,T):Qt(S)?(t.consume(S),a=4,o.interrupt?r:_):n(S)}function y(S){return S===45?(t.consume(S),o.interrupt?r:_):n(S)}function T(S){const st="CDATA[";return S===st.charCodeAt(c++)?(t.consume(S),c===st.length?o.interrupt?r:V:T):n(S)}function P(S){return Qt(S)?(t.consume(S),l=String.fromCharCode(S),B):n(S)}function B(S){if(S===null||S===47||S===62||ot(S)){const st=S===47,Xe=l.toLowerCase();return!st&&!u&&Gl.includes(Xe)?(a=1,o.interrupt?r(S):V(S)):bb.includes(l.toLowerCase())?(a=6,st?(t.consume(S),D):o.interrupt?r(S):V(S)):(a=7,o.interrupt&&!o.parser.lazy[o.now().line]?n(S):u?H(S):z(S))}return S===45||zt(S)?(t.consume(S),l+=String.fromCharCode(S),B):n(S)}function D(S){return S===62?(t.consume(S),o.interrupt?r:V):n(S)}function H(S){return ge(S)?(t.consume(S),H):he(S)}function z(S){return S===47?(t.consume(S),he):S===58||S===95||Qt(S)?(t.consume(S),W):ge(S)?(t.consume(S),z):he(S)}function W(S){return S===45||S===46||S===58||S===95||zt(S)?(t.consume(S),W):O(S)}function O(S){return S===61?(t.consume(S),E):ge(S)?(t.consume(S),O):z(S)}function E(S){return S===null||S===60||S===61||S===62||S===96?n(S):S===34||S===39?(t.consume(S),f=S,U):ge(S)?(t.consume(S),E):Q(S)}function U(S){return S===f?(t.consume(S),f=null,ee):S===null||te(S)?n(S):(t.consume(S),U)}function Q(S){return S===null||S===34||S===39||S===47||S===60||S===61||S===62||S===96||ot(S)?O(S):(t.consume(S),Q)}function ee(S){return S===47||S===62||ge(S)?z(S):n(S)}function he(S){return S===62?(t.consume(S),j):n(S)}function j(S){return S===null||te(S)?V(S):ge(S)?(t.consume(S),j):n(S)}function V(S){return S===45&&a===2?(t.consume(S),Be):S===60&&a===1?(t.consume(S),Se):S===62&&a===4?(t.consume(S),Ae):S===63&&a===3?(t.consume(S),_):S===93&&a===5?(t.consume(S),Mt):te(S)&&(a===6||a===7)?(t.exit("htmlFlowData"),t.check(xb,Ot,me)(S)):S===null||te(S)?(t.exit("htmlFlowData"),me(S)):(t.consume(S),V)}function me(S){return t.check(_b,Te,Ot)(S)}function Te(S){return t.enter("lineEnding"),t.consume(S),t.exit("lineEnding"),ce}function ce(S){return S===null||te(S)?me(S):(t.enter("htmlFlowData"),V(S))}function Be(S){return S===45?(t.consume(S),_):V(S)}function Se(S){return S===47?(t.consume(S),l="",Le):V(S)}function Le(S){if(S===62){const st=l.toLowerCase();return Gl.includes(st)?(t.consume(S),Ae):V(S)}return Qt(S)&&l.length<8?(t.consume(S),l+=String.fromCharCode(S),Le):V(S)}function Mt(S){return S===93?(t.consume(S),_):V(S)}function _(S){return S===62?(t.consume(S),Ae):S===45&&a===2?(t.consume(S),_):V(S)}function Ae(S){return S===null||te(S)?(t.exit("htmlFlowData"),Ot(S)):(t.consume(S),Ae)}function Ot(S){return t.exit("htmlFlow"),r(S)}}function Ib(t,r,n){const o=this;return a;function a(l){return te(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),u):n(l)}function u(l){return o.parser.lazy[o.now().line]?n(l):r(l)}}function Cb(t,r,n){return o;function o(a){return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),t.attempt(Wi,r,n)}}const Tb={name:"htmlText",tokenize:Eb};function Eb(t,r,n){const o=this;let a,u,l;return c;function c(_){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(_),f}function f(_){return _===33?(t.consume(_),d):_===47?(t.consume(_),O):_===63?(t.consume(_),z):Qt(_)?(t.consume(_),Q):n(_)}function d(_){return _===45?(t.consume(_),p):_===91?(t.consume(_),u=0,T):Qt(_)?(t.consume(_),H):n(_)}function p(_){return _===45?(t.consume(_),y):n(_)}function g(_){return _===null?n(_):_===45?(t.consume(_),b):te(_)?(l=g,Se(_)):(t.consume(_),g)}function b(_){return _===45?(t.consume(_),y):g(_)}function y(_){return _===62?Be(_):_===45?b(_):g(_)}function T(_){const Ae="CDATA[";return _===Ae.charCodeAt(u++)?(t.consume(_),u===Ae.length?P:T):n(_)}function P(_){return _===null?n(_):_===93?(t.consume(_),B):te(_)?(l=P,Se(_)):(t.consume(_),P)}function B(_){return _===93?(t.consume(_),D):P(_)}function D(_){return _===62?Be(_):_===93?(t.consume(_),D):P(_)}function H(_){return _===null||_===62?Be(_):te(_)?(l=H,Se(_)):(t.consume(_),H)}function z(_){return _===null?n(_):_===63?(t.consume(_),W):te(_)?(l=z,Se(_)):(t.consume(_),z)}function W(_){return _===62?Be(_):z(_)}function O(_){return Qt(_)?(t.consume(_),E):n(_)}function E(_){return _===45||zt(_)?(t.consume(_),E):U(_)}function U(_){return te(_)?(l=U,Se(_)):ge(_)?(t.consume(_),U):Be(_)}function Q(_){return _===45||zt(_)?(t.consume(_),Q):_===47||_===62||ot(_)?ee(_):n(_)}function ee(_){return _===47?(t.consume(_),Be):_===58||_===95||Qt(_)?(t.consume(_),he):te(_)?(l=ee,Se(_)):ge(_)?(t.consume(_),ee):Be(_)}function he(_){return _===45||_===46||_===58||_===95||zt(_)?(t.consume(_),he):j(_)}function j(_){return _===61?(t.consume(_),V):te(_)?(l=j,Se(_)):ge(_)?(t.consume(_),j):ee(_)}function V(_){return _===null||_===60||_===61||_===62||_===96?n(_):_===34||_===39?(t.consume(_),a=_,me):te(_)?(l=V,Se(_)):ge(_)?(t.consume(_),V):(t.consume(_),Te)}function me(_){return _===a?(t.consume(_),a=void 0,ce):_===null?n(_):te(_)?(l=me,Se(_)):(t.consume(_),me)}function Te(_){return _===null||_===34||_===39||_===60||_===61||_===96?n(_):_===47||_===62||ot(_)?ee(_):(t.consume(_),Te)}function ce(_){return _===47||_===62||ot(_)?ee(_):n(_)}function Be(_){return _===62?(t.consume(_),t.exit("htmlTextData"),t.exit("htmlText"),r):n(_)}function Se(_){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(_),t.exit("lineEnding"),Le}function Le(_){return ge(_)?ke(t,Mt,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_):Mt(_)}function Mt(_){return t.enter("htmlTextData"),l(_)}}const qa={name:"labelEnd",resolveAll:Ob,resolveTo:Db,tokenize:Fb},Ab={tokenize:Lb},Pb={tokenize:Rb},Mb={tokenize:Nb};function Ob(t){let r=-1;const n=[];for(;++r<t.length;){const o=t[r][1];if(n.push(t[r]),o.type==="labelImage"||o.type==="labelLink"||o.type==="labelEnd"){const a=o.type==="labelImage"?4:2;o.type="data",r+=a}}return t.length!==n.length&&jt(t,0,t.length,n),t}function Db(t,r){let n=t.length,o=0,a,u,l,c;for(;n--;)if(a=t[n][1],u){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;t[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(l){if(t[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(u=n,a.type!=="labelLink")){o=2;break}}else a.type==="labelEnd"&&(l=n);const f={type:t[u][1].type==="labelLink"?"link":"image",start:{...t[u][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[u][1].start},end:{...t[l][1].end}},p={type:"labelText",start:{...t[u+o+2][1].end},end:{...t[l-2][1].start}};return c=[["enter",f,r],["enter",d,r]],c=At(c,t.slice(u+1,u+o+3)),c=At(c,[["enter",p,r]]),c=At(c,za(r.parser.constructs.insideSpan.null,t.slice(u+o+4,l-3),r)),c=At(c,[["exit",p,r],t[l-2],t[l-1],["exit",d,r]]),c=At(c,t.slice(l+1)),c=At(c,[["exit",f,r]]),jt(t,u,t.length,c),t}function Fb(t,r,n){const o=this;let a=o.events.length,u,l;for(;a--;)if((o.events[a][1].type==="labelImage"||o.events[a][1].type==="labelLink")&&!o.events[a][1]._balanced){u=o.events[a][1];break}return c;function c(b){return u?u._inactive?g(b):(l=o.parser.defined.includes(lr(o.sliceSerialize({start:u.end,end:o.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(b),t.exit("labelMarker"),t.exit("labelEnd"),f):n(b)}function f(b){return b===40?t.attempt(Ab,p,l?p:g)(b):b===91?t.attempt(Pb,p,l?d:g)(b):l?p(b):g(b)}function d(b){return t.attempt(Mb,p,g)(b)}function p(b){return r(b)}function g(b){return u._balanced=!0,n(b)}}function Lb(t,r,n){return o;function o(g){return t.enter("resource"),t.enter("resourceMarker"),t.consume(g),t.exit("resourceMarker"),a}function a(g){return ot(g)?Mr(t,u)(g):u(g)}function u(g){return g===41?p(g):Ac(t,l,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function l(g){return ot(g)?Mr(t,f)(g):p(g)}function c(g){return n(g)}function f(g){return g===34||g===39||g===40?Mc(t,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):p(g)}function d(g){return ot(g)?Mr(t,p)(g):p(g)}function p(g){return g===41?(t.enter("resourceMarker"),t.consume(g),t.exit("resourceMarker"),t.exit("resource"),r):n(g)}}function Rb(t,r,n){const o=this;return a;function a(c){return Pc.call(o,t,u,l,"reference","referenceMarker","referenceString")(c)}function u(c){return o.parser.defined.includes(lr(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)))?r(c):n(c)}function l(c){return n(c)}}function Nb(t,r,n){return o;function o(u){return t.enter("reference"),t.enter("referenceMarker"),t.consume(u),t.exit("referenceMarker"),a}function a(u){return u===93?(t.enter("referenceMarker"),t.consume(u),t.exit("referenceMarker"),t.exit("reference"),r):n(u)}}const Bb={name:"labelStartImage",resolveAll:qa.resolveAll,tokenize:$b};function $b(t,r,n){const o=this;return a;function a(c){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(c),t.exit("labelImageMarker"),u}function u(c){return c===91?(t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelImage"),l):n(c)}function l(c){return c===94&&"_hiddenFootnoteSupport"in o.parser.constructs?n(c):r(c)}}const Wb={name:"labelStartLink",resolveAll:qa.resolveAll,tokenize:zb};function zb(t,r,n){const o=this;return a;function a(l){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelLink"),u}function u(l){return l===94&&"_hiddenFootnoteSupport"in o.parser.constructs?n(l):r(l)}}const pa={name:"lineEnding",tokenize:qb};function qb(t,r){return n;function n(o){return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),ke(t,r,"linePrefix")}}const Mi={name:"thematicBreak",tokenize:Hb};function Hb(t,r,n){let o=0,a;return u;function u(d){return t.enter("thematicBreak"),l(d)}function l(d){return a=d,c(d)}function c(d){return d===a?(t.enter("thematicBreakSequence"),f(d)):o>=3&&(d===null||te(d))?(t.exit("thematicBreak"),r(d)):n(d)}function f(d){return d===a?(t.consume(d),o++,f):(t.exit("thematicBreakSequence"),ge(d)?ke(t,c,"whitespace")(d):c(d))}}const rt={continuation:{tokenize:Vb},exit:jb,name:"list",tokenize:Gb},Yb={partial:!0,tokenize:Kb},Ub={partial:!0,tokenize:Qb};function Gb(t,r,n){const o=this,a=o.events[o.events.length-1];let u=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,l=0;return c;function c(y){const T=o.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(T==="listUnordered"?!o.containerState.marker||y===o.containerState.marker:Ma(y)){if(o.containerState.type||(o.containerState.type=T,t.enter(T,{_container:!0})),T==="listUnordered")return t.enter("listItemPrefix"),y===42||y===45?t.check(Mi,n,d)(y):d(y);if(!o.interrupt||y===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),f(y)}return n(y)}function f(y){return Ma(y)&&++l<10?(t.consume(y),f):(!o.interrupt||l<2)&&(o.containerState.marker?y===o.containerState.marker:y===41||y===46)?(t.exit("listItemValue"),d(y)):n(y)}function d(y){return t.enter("listItemMarker"),t.consume(y),t.exit("listItemMarker"),o.containerState.marker=o.containerState.marker||y,t.check(Wi,o.interrupt?n:p,t.attempt(Yb,b,g))}function p(y){return o.containerState.initialBlankLine=!0,u++,b(y)}function g(y){return ge(y)?(t.enter("listItemPrefixWhitespace"),t.consume(y),t.exit("listItemPrefixWhitespace"),b):n(y)}function b(y){return o.containerState.size=u+o.sliceSerialize(t.exit("listItemPrefix"),!0).length,r(y)}}function Vb(t,r,n){const o=this;return o.containerState._closeFlow=void 0,t.check(Wi,a,u);function a(c){return o.containerState.furtherBlankLines=o.containerState.furtherBlankLines||o.containerState.initialBlankLine,ke(t,r,"listItemIndent",o.containerState.size+1)(c)}function u(c){return o.containerState.furtherBlankLines||!ge(c)?(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,l(c)):(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,t.attempt(Ub,r,l)(c))}function l(c){return o.containerState._closeFlow=!0,o.interrupt=void 0,ke(t,t.attempt(rt,r,n),"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function Qb(t,r,n){const o=this;return ke(t,a,"listItemIndent",o.containerState.size+1);function a(u){const l=o.events[o.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===o.containerState.size?r(u):n(u)}}function jb(t){t.exit(this.containerState.type)}function Kb(t,r,n){const o=this;return ke(t,a,"listItemPrefixWhitespace",o.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(u){const l=o.events[o.events.length-1];return!ge(u)&&l&&l[1].type==="listItemPrefixWhitespace"?r(u):n(u)}}const Vl={name:"setextUnderline",resolveTo:Xb,tokenize:Jb};function Xb(t,r){let n=t.length,o,a,u;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){o=n;break}t[n][1].type==="paragraph"&&(a=n)}else t[n][1].type==="content"&&t.splice(n,1),!u&&t[n][1].type==="definition"&&(u=n);const l={type:"setextHeading",start:{...t[o][1].start},end:{...t[t.length-1][1].end}};return t[a][1].type="setextHeadingText",u?(t.splice(a,0,["enter",l,r]),t.splice(u+1,0,["exit",t[o][1],r]),t[o][1].end={...t[u][1].end}):t[o][1]=l,t.push(["exit",l,r]),t}function Jb(t,r,n){const o=this;let a;return u;function u(d){let p=o.events.length,g;for(;p--;)if(o.events[p][1].type!=="lineEnding"&&o.events[p][1].type!=="linePrefix"&&o.events[p][1].type!=="content"){g=o.events[p][1].type==="paragraph";break}return!o.parser.lazy[o.now().line]&&(o.interrupt||g)?(t.enter("setextHeadingLine"),a=d,l(d)):n(d)}function l(d){return t.enter("setextHeadingLineSequence"),c(d)}function c(d){return d===a?(t.consume(d),c):(t.exit("setextHeadingLineSequence"),ge(d)?ke(t,f,"lineSuffix")(d):f(d))}function f(d){return d===null||te(d)?(t.exit("setextHeadingLine"),r(d)):n(d)}}const Zb={tokenize:ev};function ev(t){const r=this,n=t.attempt(Wi,o,t.attempt(this.parser.constructs.flowInitial,a,ke(t,t.attempt(this.parser.constructs.flow,a,t.attempt(ob,a)),"linePrefix")));return n;function o(u){if(u===null){t.consume(u);return}return t.enter("lineEndingBlank"),t.consume(u),t.exit("lineEndingBlank"),r.currentConstruct=void 0,n}function a(u){if(u===null){t.consume(u);return}return t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),r.currentConstruct=void 0,n}}const tv={resolveAll:Dc()},nv=Oc("string"),rv=Oc("text");function Oc(t){return{resolveAll:Dc(t==="text"?iv:void 0),tokenize:r};function r(n){const o=this,a=this.parser.constructs[t],u=n.attempt(a,l,c);return l;function l(p){return d(p)?u(p):c(p)}function c(p){if(p===null){n.consume(p);return}return n.enter("data"),n.consume(p),f}function f(p){return d(p)?(n.exit("data"),u(p)):(n.consume(p),f)}function d(p){if(p===null)return!0;const g=a[p];let b=-1;if(g)for(;++b<g.length;){const y=g[b];if(!y.previous||y.previous.call(o,o.previous))return!0}return!1}}}function Dc(t){return r;function r(n,o){let a=-1,u;for(;++a<=n.length;)u===void 0?n[a]&&n[a][1].type==="data"&&(u=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==u+2&&(n[u][1].end=n[a-1][1].end,n.splice(u+2,a-u-2),a=u+2),u=void 0);return t?t(n,o):n}}function iv(t,r){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const o=t[n-1][1],a=r.sliceStream(o);let u=a.length,l=-1,c=0,f;for(;u--;){const d=a[u];if(typeof d=="string"){for(l=d.length;d.charCodeAt(l-1)===32;)c++,l--;if(l)break;l=-1}else if(d===-2)f=!0,c++;else if(d!==-1){u++;break}}if(r._contentTypeTextTrailing&&n===t.length&&(c=0),c){const d={type:n===t.length||f||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:u?l:o.start._bufferIndex+l,_index:o.start._index+u,line:o.end.line,column:o.end.column-c,offset:o.end.offset-c},end:{...o.end}};o.end={...d.start},o.start.offset===o.end.offset?Object.assign(o,d):(t.splice(n,0,["enter",d,r],["exit",d,r]),n+=2)}n++}return t}const ov={42:rt,43:rt,45:rt,48:rt,49:rt,50:rt,51:rt,52:rt,53:rt,54:rt,55:rt,56:rt,57:rt,62:Ic},av={91:cb},sv={[-2]:da,[-1]:da,32:da},uv={35:mb,42:Mi,45:[Vl,Mi],60:vb,61:Vl,95:Mi,96:Ul,126:Ul},lv={38:Tc,92:Cc},cv={[-5]:pa,[-4]:pa,[-3]:pa,33:Bb,38:Tc,42:Oa,60:[Ww,Tb],91:Wb,92:[pb,Cc],93:qa,95:Oa,96:Zw},fv={null:[Oa,tv]},hv={null:[42,95]},dv={null:[]},pv=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:hv,contentInitial:av,disable:dv,document:ov,flow:uv,flowInitial:sv,insideSpan:fv,string:lv,text:cv},Symbol.toStringTag,{value:"Module"}));function gv(t,r,n){let o={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const a={},u=[];let l=[],c=[];const f={attempt:U(O),check:U(E),consume:H,enter:z,exit:W,interrupt:U(E,{interrupt:!0})},d={code:null,containerState:{},defineSkip:P,events:[],now:T,parser:t,previous:null,sliceSerialize:b,sliceStream:y,write:g};let p=r.tokenize.call(d,f);return r.resolveAll&&u.push(r),d;function g(j){return l=At(l,j),B(),l[l.length-1]!==null?[]:(Q(r,0),d.events=za(u,d.events,d),d.events)}function b(j,V){return yv(y(j),V)}function y(j){return mv(l,j)}function T(){const{_bufferIndex:j,_index:V,line:me,column:Te,offset:ce}=o;return{_bufferIndex:j,_index:V,line:me,column:Te,offset:ce}}function P(j){a[j.line]=j.column,he()}function B(){let j;for(;o._index<l.length;){const V=l[o._index];if(typeof V=="string")for(j=o._index,o._bufferIndex<0&&(o._bufferIndex=0);o._index===j&&o._bufferIndex<V.length;)D(V.charCodeAt(o._bufferIndex));else D(V)}}function D(j){p=p(j)}function H(j){te(j)?(o.line++,o.column=1,o.offset+=j===-3?2:1,he()):j!==-1&&(o.column++,o.offset++),o._bufferIndex<0?o._index++:(o._bufferIndex++,o._bufferIndex===l[o._index].length&&(o._bufferIndex=-1,o._index++)),d.previous=j}function z(j,V){const me=V||{};return me.type=j,me.start=T(),d.events.push(["enter",me,d]),c.push(me),me}function W(j){const V=c.pop();return V.end=T(),d.events.push(["exit",V,d]),V}function O(j,V){Q(j,V.from)}function E(j,V){V.restore()}function U(j,V){return me;function me(Te,ce,Be){let Se,Le,Mt,_;return Array.isArray(Te)?Ot(Te):"tokenize"in Te?Ot([Te]):Ae(Te);function Ae(Pe){return An;function An(Je){const wt=Je!==null&&Pe[Je],dn=Je!==null&&Pe.null,Zt=[...Array.isArray(wt)?wt:wt?[wt]:[],...Array.isArray(dn)?dn:dn?[dn]:[]];return Ot(Zt)(Je)}}function Ot(Pe){return Se=Pe,Le=0,Pe.length===0?Be:S(Pe[Le])}function S(Pe){return An;function An(Je){return _=ee(),Mt=Pe,Pe.partial||(d.currentConstruct=Pe),Pe.name&&d.parser.constructs.disable.null.includes(Pe.name)?Xe():Pe.tokenize.call(V?Object.assign(Object.create(d),V):d,f,st,Xe)(Je)}}function st(Pe){return j(Mt,_),ce}function Xe(Pe){return _.restore(),++Le<Se.length?S(Se[Le]):Be}}}function Q(j,V){j.resolveAll&&!u.includes(j)&&u.push(j),j.resolve&&jt(d.events,V,d.events.length-V,j.resolve(d.events.slice(V),d)),j.resolveTo&&(d.events=j.resolveTo(d.events,d))}function ee(){const j=T(),V=d.previous,me=d.currentConstruct,Te=d.events.length,ce=Array.from(c);return{from:Te,restore:Be};function Be(){o=j,d.previous=V,d.currentConstruct=me,d.events.length=Te,c=ce,he()}}function he(){o.line in a&&o.column<2&&(o.column=a[o.line],o.offset+=a[o.line]-1)}}function mv(t,r){const n=r.start._index,o=r.start._bufferIndex,a=r.end._index,u=r.end._bufferIndex;let l;if(n===a)l=[t[n].slice(o,u)];else{if(l=t.slice(n,a),o>-1){const c=l[0];typeof c=="string"?l[0]=c.slice(o):l.shift()}u>0&&l.push(t[a].slice(0,u))}return l}function yv(t,r){let n=-1;const o=[];let a;for(;++n<t.length;){const u=t[n];let l;if(typeof u=="string")l=u;else switch(u){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=r?" ":"	";break}case-1:{if(!r&&a)continue;l=" ";break}default:l=String.fromCharCode(u)}a=u===-2,o.push(l)}return o.join("")}function wv(t){const o={constructs:Iw([pv,...(t||{}).extensions||[]]),content:a(Dw),defined:[],document:a(Lw),flow:a(Zb),lazy:{},string:a(nv),text:a(rv)};return o;function a(u){return l;function l(c){return gv(o,u,c)}}}function bv(t){for(;!Ec(t););return t}const Ql=/[\0\t\n\r]/g;function vv(){let t=1,r="",n=!0,o;return a;function a(u,l,c){const f=[];let d,p,g,b,y;for(u=r+(typeof u=="string"?u.toString():new TextDecoder(l||void 0).decode(u)),g=0,r="",n&&(u.charCodeAt(0)===65279&&g++,n=void 0);g<u.length;){if(Ql.lastIndex=g,d=Ql.exec(u),b=d&&d.index!==void 0?d.index:u.length,y=u.charCodeAt(b),!d){r=u.slice(g);break}if(y===10&&g===b&&o)f.push(-3),o=void 0;else switch(o&&(f.push(-5),o=void 0),g<b&&(f.push(u.slice(g,b)),t+=b-g),y){case 0:{f.push(65533),t++;break}case 9:{for(p=Math.ceil(t/4)*4,f.push(-2);t++<p;)f.push(-1);break}case 10:{f.push(-4),t=1;break}default:o=!0,t=1}g=b+1}return c&&(o&&f.push(-5),r&&f.push(r),f.push(null)),f}}const xv=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Fc(t){return t.replace(xv,_v)}function _v(t,r,n){if(r)return r;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),u=a===120||a===88;return Sc(n.slice(u?2:1),u?16:10)}return Wa(n)||t}const Lc={}.hasOwnProperty;function kv(t,r,n){return typeof r!="string"&&(n=r,r=void 0),Sv(n)(bv(wv(n).document().write(vv()(t,r,!0))))}function Sv(t){const r={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:u(Br),autolinkProtocol:ee,autolinkEmail:ee,atxHeading:u(pn),blockQuote:u(dn),characterEscape:ee,characterReference:ee,codeFenced:u(Zt),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:u(Zt,l),codeText:u(Gn,l),codeTextData:ee,data:ee,codeFlowValue:ee,definition:u(Lr),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:u(ut),hardBreakEscape:u(Rr),hardBreakTrailing:u(Rr),htmlFlow:u(bt,l),htmlFlowData:ee,htmlText:u(bt,l),htmlTextData:ee,image:u(Nr),label:l,link:u(Br),listItem:u(lt),listItemValue:b,listOrdered:u(gn,g),listUnordered:u(gn),paragraph:u(Pn),reference:S,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:u(pn),strong:u(Vn),thematicBreak:u(Mn)},exit:{atxHeading:f(),atxHeadingSequence:O,autolink:f(),autolinkEmail:wt,autolinkProtocol:Je,blockQuote:f(),characterEscapeValue:he,characterReferenceMarkerHexadecimal:Xe,characterReferenceMarkerNumeric:Xe,characterReferenceValue:Pe,characterReference:An,codeFenced:f(B),codeFencedFence:P,codeFencedFenceInfo:y,codeFencedFenceMeta:T,codeFlowValue:he,codeIndented:f(D),codeText:f(ce),codeTextData:he,data:he,definition:f(),definitionDestinationString:W,definitionLabelString:H,definitionTitleString:z,emphasis:f(),hardBreakEscape:f(V),hardBreakTrailing:f(V),htmlFlow:f(me),htmlFlowData:he,htmlText:f(Te),htmlTextData:he,image:f(Se),label:Mt,labelText:Le,lineEnding:j,link:f(Be),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:st,resourceDestinationString:_,resourceTitleString:Ae,resource:Ot,setextHeading:f(Q),setextHeadingLineSequence:U,setextHeadingText:E,strong:f(),thematicBreak:f()}};Rc(r,(t||{}).mdastExtensions||[]);const n={};return o;function o(F){let $={type:"root",children:[]};const X={stack:[$],tokenStack:[],config:r,enter:c,exit:d,buffer:l,resume:p,data:n},ae=[];let de=-1;for(;++de<F.length;)if(F[de][1].type==="listOrdered"||F[de][1].type==="listUnordered")if(F[de][0]==="enter")ae.push(de);else{const Ve=ae.pop();de=a(F,Ve,de)}for(de=-1;++de<F.length;){const Ve=r[F[de][0]];Lc.call(Ve,F[de][1].type)&&Ve[F[de][1].type].call(Object.assign({sliceSerialize:F[de][2].sliceSerialize},X),F[de][1])}if(X.tokenStack.length>0){const Ve=X.tokenStack[X.tokenStack.length-1];(Ve[1]||jl).call(X,void 0,Ve[0])}for($.position={start:Cn(F.length>0?F[0][1].start:{line:1,column:1,offset:0}),end:Cn(F.length>0?F[F.length-2][1].end:{line:1,column:1,offset:0})},de=-1;++de<r.transforms.length;)$=r.transforms[de]($)||$;return $}function a(F,$,X){let ae=$-1,de=-1,Ve=!1,Dt,ct,en,tn;for(;++ae<=X;){const We=F[ae];switch(We[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{We[0]==="enter"?de++:de--,tn=void 0;break}case"lineEndingBlank":{We[0]==="enter"&&(Dt&&!tn&&!de&&!en&&(en=ae),tn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:tn=void 0}if(!de&&We[0]==="enter"&&We[1].type==="listItemPrefix"||de===-1&&We[0]==="exit"&&(We[1].type==="listUnordered"||We[1].type==="listOrdered")){if(Dt){let qt=ae;for(ct=void 0;qt--;){const Ft=F[qt];if(Ft[1].type==="lineEnding"||Ft[1].type==="lineEndingBlank"){if(Ft[0]==="exit")continue;ct&&(F[ct][1].type="lineEndingBlank",Ve=!0),Ft[1].type="lineEnding",ct=qt}else if(!(Ft[1].type==="linePrefix"||Ft[1].type==="blockQuotePrefix"||Ft[1].type==="blockQuotePrefixWhitespace"||Ft[1].type==="blockQuoteMarker"||Ft[1].type==="listItemIndent"))break}en&&(!ct||en<ct)&&(Dt._spread=!0),Dt.end=Object.assign({},ct?F[ct][1].start:We[1].end),F.splice(ct||ae,0,["exit",Dt,We[2]]),ae++,X++}if(We[1].type==="listItemPrefix"){const qt={type:"listItem",_spread:!1,start:Object.assign({},We[1].start),end:void 0};Dt=qt,F.splice(ae,0,["enter",qt,We[2]]),ae++,X++,en=void 0,tn=!0}}}return F[$][1]._spread=Ve,X}function u(F,$){return X;function X(ae){c.call(this,F(ae),ae),$&&$.call(this,ae)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(F,$,X){this.stack[this.stack.length-1].children.push(F),this.stack.push(F),this.tokenStack.push([$,X||void 0]),F.position={start:Cn($.start),end:void 0}}function f(F){return $;function $(X){F&&F.call(this,X),d.call(this,X)}}function d(F,$){const X=this.stack.pop(),ae=this.tokenStack.pop();if(ae)ae[0].type!==F.type&&($?$.call(this,F,ae[0]):(ae[1]||jl).call(this,F,ae[0]));else throw new Error("Cannot close `"+F.type+"` ("+Pr({start:F.start,end:F.end})+"): it‚Äôs not open");X.position.end=Cn(F.end)}function p(){return $a(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function b(F){if(this.data.expectingFirstListItemValue){const $=this.stack[this.stack.length-2];$.start=Number.parseInt(this.sliceSerialize(F),10),this.data.expectingFirstListItemValue=void 0}}function y(){const F=this.resume(),$=this.stack[this.stack.length-1];$.lang=F}function T(){const F=this.resume(),$=this.stack[this.stack.length-1];$.meta=F}function P(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function B(){const F=this.resume(),$=this.stack[this.stack.length-1];$.value=F.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function D(){const F=this.resume(),$=this.stack[this.stack.length-1];$.value=F.replace(/(\r?\n|\r)$/g,"")}function H(F){const $=this.resume(),X=this.stack[this.stack.length-1];X.label=$,X.identifier=lr(this.sliceSerialize(F)).toLowerCase()}function z(){const F=this.resume(),$=this.stack[this.stack.length-1];$.title=F}function W(){const F=this.resume(),$=this.stack[this.stack.length-1];$.url=F}function O(F){const $=this.stack[this.stack.length-1];if(!$.depth){const X=this.sliceSerialize(F).length;$.depth=X}}function E(){this.data.setextHeadingSlurpLineEnding=!0}function U(F){const $=this.stack[this.stack.length-1];$.depth=this.sliceSerialize(F).codePointAt(0)===61?1:2}function Q(){this.data.setextHeadingSlurpLineEnding=void 0}function ee(F){const X=this.stack[this.stack.length-1].children;let ae=X[X.length-1];(!ae||ae.type!=="text")&&(ae=qi(),ae.position={start:Cn(F.start),end:void 0},X.push(ae)),this.stack.push(ae)}function he(F){const $=this.stack.pop();$.value+=this.sliceSerialize(F),$.position.end=Cn(F.end)}function j(F){const $=this.stack[this.stack.length-1];if(this.data.atHardBreak){const X=$.children[$.children.length-1];X.position.end=Cn(F.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&r.canContainEols.includes($.type)&&(ee.call(this,F),he.call(this,F))}function V(){this.data.atHardBreak=!0}function me(){const F=this.resume(),$=this.stack[this.stack.length-1];$.value=F}function Te(){const F=this.resume(),$=this.stack[this.stack.length-1];$.value=F}function ce(){const F=this.resume(),$=this.stack[this.stack.length-1];$.value=F}function Be(){const F=this.stack[this.stack.length-1];if(this.data.inReference){const $=this.data.referenceType||"shortcut";F.type+="Reference",F.referenceType=$,delete F.url,delete F.title}else delete F.identifier,delete F.label;this.data.referenceType=void 0}function Se(){const F=this.stack[this.stack.length-1];if(this.data.inReference){const $=this.data.referenceType||"shortcut";F.type+="Reference",F.referenceType=$,delete F.url,delete F.title}else delete F.identifier,delete F.label;this.data.referenceType=void 0}function Le(F){const $=this.sliceSerialize(F),X=this.stack[this.stack.length-2];X.label=Fc($),X.identifier=lr($).toLowerCase()}function Mt(){const F=this.stack[this.stack.length-1],$=this.resume(),X=this.stack[this.stack.length-1];if(this.data.inReference=!0,X.type==="link"){const ae=F.children;X.children=ae}else X.alt=$}function _(){const F=this.resume(),$=this.stack[this.stack.length-1];$.url=F}function Ae(){const F=this.resume(),$=this.stack[this.stack.length-1];$.title=F}function Ot(){this.data.inReference=void 0}function S(){this.data.referenceType="collapsed"}function st(F){const $=this.resume(),X=this.stack[this.stack.length-1];X.label=$,X.identifier=lr(this.sliceSerialize(F)).toLowerCase(),this.data.referenceType="full"}function Xe(F){this.data.characterReferenceType=F.type}function Pe(F){const $=this.sliceSerialize(F),X=this.data.characterReferenceType;let ae;X?(ae=Sc($,X==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ae=Wa($);const de=this.stack[this.stack.length-1];de.value+=ae}function An(F){const $=this.stack.pop();$.position.end=Cn(F.end)}function Je(F){he.call(this,F);const $=this.stack[this.stack.length-1];$.url=this.sliceSerialize(F)}function wt(F){he.call(this,F);const $=this.stack[this.stack.length-1];$.url="mailto:"+this.sliceSerialize(F)}function dn(){return{type:"blockquote",children:[]}}function Zt(){return{type:"code",lang:null,meta:null,value:""}}function Gn(){return{type:"inlineCode",value:""}}function Lr(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ut(){return{type:"emphasis",children:[]}}function pn(){return{type:"heading",depth:0,children:[]}}function Rr(){return{type:"break"}}function bt(){return{type:"html",value:""}}function Nr(){return{type:"image",title:null,url:"",alt:null}}function Br(){return{type:"link",title:null,url:"",children:[]}}function gn(F){return{type:"list",ordered:F.type==="listOrdered",start:null,spread:F._spread,children:[]}}function lt(F){return{type:"listItem",spread:F._spread,checked:null,children:[]}}function Pn(){return{type:"paragraph",children:[]}}function Vn(){return{type:"strong",children:[]}}function qi(){return{type:"text",value:""}}function Mn(){return{type:"thematicBreak"}}}function Cn(t){return{line:t.line,column:t.column,offset:t.offset}}function Rc(t,r){let n=-1;for(;++n<r.length;){const o=r[n];Array.isArray(o)?Rc(t,o):Iv(t,o)}}function Iv(t,r){let n;for(n in r)if(Lc.call(r,n))switch(n){case"canContainEols":{const o=r[n];o&&t[n].push(...o);break}case"transforms":{const o=r[n];o&&t[n].push(...o);break}case"enter":case"exit":{const o=r[n];o&&Object.assign(t[n],o);break}}}function jl(t,r){throw t?new Error("Cannot close `"+t.type+"` ("+Pr({start:t.start,end:t.end})+"): a different token (`"+r.type+"`, "+Pr({start:r.start,end:r.end})+") is open"):new Error("Cannot close document, a token (`"+r.type+"`, "+Pr({start:r.start,end:r.end})+") is still open")}function Nc(t){const r=this;r.parser=n;function n(o){return kv(o,{...r.data("settings"),...t,extensions:r.data("micromarkExtensions")||[],mdastExtensions:r.data("fromMarkdownExtensions")||[]})}}const Ha=(function(t){if(t==null)return Av;if(typeof t=="function")return zi(t);if(typeof t=="object")return Array.isArray(t)?Cv(t):Tv(t);if(typeof t=="string")return Ev(t);throw new Error("Expected function, string, or object as test")});function Cv(t){const r=[];let n=-1;for(;++n<t.length;)r[n]=Ha(t[n]);return zi(o);function o(...a){let u=-1;for(;++u<r.length;)if(r[u].apply(this,a))return!0;return!1}}function Tv(t){const r=t;return zi(n);function n(o){const a=o;let u;for(u in t)if(a[u]!==r[u])return!1;return!0}}function Ev(t){return zi(r);function r(n){return n&&n.type===t}}function zi(t){return r;function r(n,o,a){return!!(Pv(n)&&t.call(this,n,typeof o=="number"?o:void 0,a||void 0))}}function Av(){return!0}function Pv(t){return t!==null&&typeof t=="object"&&"type"in t}const Bc=[],Mv=!0,Da=!1,Ov="skip";function Dv(t,r,n,o){let a;typeof r=="function"&&typeof n!="function"?(o=n,n=r):a=r;const u=Ha(a),l=o?-1:1;c(t,void 0,[])();function c(f,d,p){const g=f&&typeof f=="object"?f:{};if(typeof g.type=="string"){const y=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(b,"name",{value:"node ("+(f.type+(y?"<"+y+">":""))+")"})}return b;function b(){let y=Bc,T,P,B;if((!r||u(f,d,p[p.length-1]||void 0))&&(y=Fv(n(f,p)),y[0]===Da))return y;if("children"in f&&f.children){const D=f;if(D.children&&y[0]!==Ov)for(P=(o?D.children.length:-1)+l,B=p.concat(D);P>-1&&P<D.children.length;){const H=D.children[P];if(T=c(H,P,B)(),T[0]===Da)return T;P=typeof T[1]=="number"?T[1]:P+l}}return y}}}function Fv(t){return Array.isArray(t)?t:typeof t=="number"?[Mv,t]:t==null?Bc:[t]}function $c(t,r,n,o){let a,u,l;typeof r=="function"&&typeof n!="function"?(u=void 0,l=r,a=n):(u=r,l=n,a=o),Dv(t,u,c,a);function c(f,d){const p=d[d.length-1],g=p?p.children.indexOf(f):void 0;return l(f,g,p)}}const Un={component:"mdc-component",input:"mdc-input",hiddenValue:"mdc-hidden-value"};class Lv{constructor(){this.logger=Xt(Jt.TagsService),this.component={start:r=>{const n={componentName:r};return this.logger.dev("Component start",n),`<span class="${Un.component} start" data-meta='${JSON.stringify(n)}' style="display:none"></span>`},end:r=>{const n={componentName:r};return this.logger.dev("Component end",n),`<span class="${Un.component} end" data-meta='${JSON.stringify(n)}' style="display:none"></span>`},wrap:(r,n,o=!0)=>{const a=o?`
${n}
`:n;return this.logger.dev("Component wrap",{componentName:r,content:n}),this.component.start(r)+a+this.component.end(r)}},this.input={start:(r,n,o)=>{const a={componentName:r,inputName:n,inputType:o};return this.logger.dev("Input start",a),`<span class="${Un.input}" data-meta='${JSON.stringify(a)}' style="display:none"></span>`},end:(r,n,o)=>{const a={componentName:r,inputName:n,inputType:o};return this.logger.dev("Input end",a),`<span class="${Un.input} end" data-meta='${JSON.stringify(a)}' style="display:none"></span>`},wrap:r=>{const{componentName:n,inputName:o,inputType:a,content:u,withNewLines:l=!0}=r,c=l?`
${u}
`:u;return this.logger.dev("Input wrap",{componentName:n,inputName:o,content:u}),this.input.start(n,o,a)+c+this.input.end(n,o,a)}},this.hiddenValue=(r,n,o)=>{const a={componentName:r,inputName:n,value:o};return this.logger.dev("Hidden value set",a),`<span class="${Un.hiddenValue}" data-meta='${JSON.stringify(a)}' style="display:none"></span>`}}}const Fa=new Lv,ga=Xt(Jt.ValueExtractor);class Rv{extract(r){const n=Aa().use(Nc).parse(r),o=[],a=[],u={};$c(n,l=>{if(l.type==="html"&&l.position){const c=l.value,f=l.position.start.offset;if(c.includes(Un.input)){const d=this.getMeta(c);if(d){const p=this.key(d);c.includes('end"')?u[p]?u[p].endPos=l.position.start.offset:u[p]={meta:d,startPos:-1,endPos:l.position.start.offset,hiddenValues:[]}:u[p]?u[p].startPos=l.position.end.offset:u[p]={meta:d,startPos:l.position.end.offset,endPos:-1,hiddenValues:[]}}}else if(c.includes(Un.hiddenValue)){const d=this.getMeta(c);if(d&&d.value){const p=this.key(d);u[p]||(u[p]={meta:d,startPos:-1,endPos:-1,hiddenValues:[]}),u[p].hiddenValues.push({value:d.value,pos:f})}}}});for(const l in u){const{meta:c,startPos:f,endPos:d,hiddenValues:p}=u[l];if(f===-1||d===-1){ga.warn(`Input ${l} missing start or end tag, skipping`);continue}const b=r.substring(f,d).trim().replace(/<span[^>]*>.*?<\/span>/gs,"").trim(),y=p.filter(P=>P.pos>=f&&P.pos<d).map(P=>P.value),T=this.extractValue(c.inputType,b,y,c);T.errors.length>0&&a.push(...T.errors),o.push({componentName:c.componentName,inputName:c.inputName,inputType:c.inputType,value:T.value,errors:T.errors})}return ga.dev("Extracted values",o),a.length>0&&ga.error("Extraction errors:",a),o}getMeta(r){const n=r.match(/data-meta=(?:'([^']+)'|"([^"]+)")/);if(!n)return null;try{return JSON.parse(n[1]||n[2])}catch{return null}}key(r){return`${r.componentName}::${r.inputName}`}extractValue(r,n,o,a){const u=[];let l=null;switch(r){case"boolean":{n.includes("[x]")||n.includes("[X]")?l=!0:n.includes("[ ]")?l=!1:(u.push("Boolean input must be a markdown checkbox"),l=null);break}case"text":{const c=n.replace(/^>\s?/gm,"").replace(/<[^>]+>/g,"").trim();a.required&&!c&&u.push("Text input is required"),a.placeholder&&c===a.placeholder?l=null:l=c;break}case"richText":{const c=n.replace(/<[^>]+>/g,"").trim();a.required&&!c&&u.push("Rich text input is required"),a.placeholder&&c===a.placeholder?l=null:l=c;break}case"multicheckbox":{const c=[],f=n.split(`
`);let d=0;f.forEach(p=>{p.match(/\[(x|X)\]/)&&d<o.length&&c.push(o[d]),p.match(/\[[ xX]\]/)&&d++}),a.required&&c.length===0&&u.push("At least one option must be selected"),a.singleChoice?(c.length>1&&u.push(`Multiple checked values for singleChoice input: ${a.componentName}::${a.inputName} [${c.join(", ")}]`),l=c[0]??null):l=c;break}case"number":{const c=n.match(new RegExp("(?<!\\d)(\\d+(?:[.,]\\d+)?)"));c?(l=parseFloat(c[1].replace(",",".")),a.required&&(l==null||isNaN(l))&&u.push("Number input is required"),typeof l=="number"&&a.min!==void 0&&l<a.min&&u.push(`Number must be >= ${a.min}`),typeof l=="number"&&a.max!==void 0&&l>a.max&&u.push(`Number must be <= ${a.max}`)):(a.required&&u.push("Number input is required"),l=null);break}default:l=n}return{value:l,errors:u}}}const Nv=new Rv,Gt=Xt(Jt.InputCollector);class Bv{constructor(r){this.getConfig=r}async collectFromYesterday(){Gt.dev("Starting collection of inputs from yesterday‚Äôs reports");const r={};this.getConfig();for(const[n,{folder:o,name:a}]of Object.entries(_c))try{const u=`${Dr.baseOutput}/${o}`;Gt.dev(`Checking folder "${u}" for report: ${n}`);const l=await Dr._listFiles(u);if(!l.length){Gt.warn(`No files found in "${u}" for report: ${n}`);continue}const c=l.sort().reverse()[0];if(!c.includes(n)){Gt.warn(`Newest file "${c}" in folder "${u}" does not match report type: ${n}`);continue}const f=`${u}/${c}`,d=xe.vault.getAbstractFileByPath(f);if(!d||!("vault"in xe)){Gt.error(`Could not load file for report ${n}`,{filePath:f});continue}const p=c.match(/^(\d{8})-(\d{5})-/);let g="",b="";p&&(g=`${p[1].slice(0,4)}-${p[1].slice(4,6)}-${p[1].slice(6,8)}`,b=p[2]),Gt.dev(`Reading file: "${f}"`);const y=await xe.vault.read(d),P=Nv.extract(y).map(B=>({componentName:B.componentName,inputName:B.inputName,type:B.inputType??"unknown",value:B.value,errors:B.errors&&B.errors.length>0?B.errors:void 0,reportType:n,reportDate:g,reportNumber:b}));r[n]=P,Gt.dev(`Parsed ${P.length} inputs for report: ${n}`)}catch(u){Gt.error(`Failed collecting inputs for ${n}`,{error:u})}return Gt.info(`InputCollector finished. Collected reports: ${Object.keys(r).length}`),Gt.dev("Collected inputs summary:",{collectedByReport:r}),r}}const $v=new Bv(()=>Ue);function Wv(t,r){if(t===void 0)throw new Error("lowdb: missing adapter");if(r===void 0)throw new Error("lowdb: missing default data")}class zv{adapter;data;constructor(r,n){Wv(r,n),this.adapter=r,this.data=n}async read(){const r=await this.adapter.read();r&&(this.data=r)}async write(){this.data&&await this.adapter.write(this.data)}async update(r){r(this.data),await this.write()}}const it=Xt(Jt.DbService);class qv{constructor(r){this.dbPath=r}async read(){try{const r=xe.vault.getAbstractFileByPath(this.dbPath);if(r&&"extension"in r){const n=await xe.vault.read(r);return JSON.parse(n)}return null}catch(r){return it.error("Error reading database",{error:r}),null}}async write(r){try{const n=JSON.stringify(r,null,2),o=xe.vault.getAbstractFileByPath(this.dbPath);o&&"extension"in o?(await xe.vault.modify(o,n),it.dev(`Database saved to ${this.dbPath}`)):(await xe.vault.create(this.dbPath,n),it.info(`Database created at ${this.dbPath}`))}catch(n){it.error("Error writing database",{error:n})}}}class Hv{constructor(){this.db=null}getDbPath(){return`${Ue.projectDir}/${Ue.coreDir}/powerjournal-db.json`}async ensureCoreDir(){const r=`${Ue.projectDir}/${Ue.coreDir}`;xe.vault.getAbstractFileByPath(r)||(it.dev(`Creating core directory: ${r}`),await xe.vault.createFolder(r))}async ensureDb(){if(!this.db){await this.ensureCoreDir();const r=this.getDbPath(),n=new qv(r);this.db=new zv(n,{reports:{}}),it.dev(`Database adapter initialized for ${r}`)}return this.db}async init(){const r=await this.ensureDb();await r.read(),r.data||={reports:{}},it.dev("Database initialized")}async saveReportInputs(r,n){await this.init();const o=await this.ensureDb();o.data.reports[r]=n,await o.write(),it.info(`Saved ${n.length} inputs for report type: ${r}`)}async appendReportInputs(r,n){await this.init();const o=await this.ensureDb();o.data.reports[r]||(o.data.reports[r]=[]),o.data.reports[r].push(...n),await o.write(),it.info(`Appended ${n.length} inputs to report type: ${r}`)}async upsertReportInputs(r,n){await this.init();const o=await this.ensureDb();o.data.reports[r]||(o.data.reports[r]=[]);const a=new Set(n.map(l=>`${l.reportDate}-${l.reportNumber}`)),u=o.data.reports[r].filter(l=>{const c=`${l.reportDate}-${l.reportNumber}`;return!a.has(c)});o.data.reports[r]=[...u,...n],await o.write(),it.info(`Upserted ${n.length} inputs for ${r} (removed duplicates)`)}async getReportInputs(r){await this.init();const o=(await this.ensureDb()).data.reports[r]||[];return it.dev(`Retrieved ${o.length} inputs for report type: ${r}`),o}async getInputsByName(r,n,o){await this.init();const u=(await this.ensureDb()).data.reports[r]||[],l=Array.isArray(n)?n:[n],c=u.filter(f=>{const d=l.includes(f.inputName),p=o?f.componentName===o:!0;return d&&p});return it.dev(`Filtered ${c.length} inputs for ${l.join(", ")}${o?` in ${o}`:""}`),c}async getInputsLastNReports(r,n,o,a){const l=(await this.getInputsByName(r,n,a)).sort((p,g)=>{const b=(g.reportDate||"").localeCompare(p.reportDate||"");return b!==0?b:(g.reportNumber||"0").localeCompare(p.reportNumber||"0")}),f=Array.from(new Set(l.map(p=>p.reportDate))).slice(0,o),d=l.filter(p=>f.includes(p.reportDate));return it.info(`Retrieved ${d.length} inputs from last ${o} reports`),d}async getInputsInDateRange(r,n,o,a,u){const c=(await this.getInputsByName(r,n,u)).filter(f=>{const d=f.reportDate||"";return d>=o&&d<=a});return it.info(`Retrieved ${c.length} inputs between ${o} and ${a}`),c}async getAvailableInputs(r,n){await this.init();const a=(await this.ensureDb()).data.reports[r]||[],u=new Set(a.filter(l=>l.componentName===n).map(l=>l.inputName));return Array.from(u)}}const Kt=new Hv,Kl={}.hasOwnProperty;function Yv(t,r){const n=r||{};function o(a,...u){let l=o.invalid;const c=o.handlers;if(a&&Kl.call(a,t)){const f=String(a[t]);l=Kl.call(c,f)?c[f]:o.unknown}if(l)return l.call(this,a,...u)}return o.handlers=n.handlers||{},o.invalid=n.invalid,o.unknown=n.unknown,o}const Uv={}.hasOwnProperty;function Wc(t,r){let n=-1,o;if(r.extensions)for(;++n<r.extensions.length;)Wc(t,r.extensions[n]);for(o in r)if(Uv.call(r,o))switch(o){case"extensions":break;case"unsafe":{Xl(t[o],r[o]);break}case"join":{Xl(t[o],r[o]);break}case"handlers":{Gv(t[o],r[o]);break}default:t.options[o]=r[o]}return t}function Xl(t,r){r&&t.push(...r)}function Gv(t,r){r&&Object.assign(t,r)}function Vv(t,r,n,o){const a=n.enter("blockquote"),u=n.createTracker(o);u.move("> "),u.shift(2);const l=n.indentLines(n.containerFlow(t,u.current()),Qv);return a(),l}function Qv(t,r,n){return">"+(n?"":" ")+t}function zc(t,r){return Jl(t,r.inConstruct,!0)&&!Jl(t,r.notInConstruct,!1)}function Jl(t,r,n){if(typeof r=="string"&&(r=[r]),!r||r.length===0)return n;let o=-1;for(;++o<r.length;)if(t.includes(r[o]))return!0;return!1}function Zl(t,r,n,o){let a=-1;for(;++a<n.unsafe.length;)if(n.unsafe[a].character===`
`&&zc(n.stack,n.unsafe[a]))return/[ \t]/.test(o.before)?"":" ";return`\\
`}function jv(t,r){const n=String(t);let o=n.indexOf(r),a=o,u=0,l=0;if(typeof r!="string")throw new TypeError("Expected substring");for(;o!==-1;)o===a?++u>l&&(l=u):u=1,a=o+r.length,o=n.indexOf(r,a);return l}function La(t,r){return!!(r.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function Kv(t){const r=t.options.fence||"`";if(r!=="`"&&r!=="~")throw new Error("Cannot serialize code with `"+r+"` for `options.fence`, expected `` ` `` or `~`");return r}function Xv(t,r,n,o){const a=Kv(n),u=t.value||"",l=a==="`"?"GraveAccent":"Tilde";if(La(t,n)){const g=n.enter("codeIndented"),b=n.indentLines(u,Jv);return g(),b}const c=n.createTracker(o),f=a.repeat(Math.max(jv(u,a)+1,3)),d=n.enter("codeFenced");let p=c.move(f);if(t.lang){const g=n.enter(`codeFencedLang${l}`);p+=c.move(n.safe(t.lang,{before:p,after:" ",encode:["`"],...c.current()})),g()}if(t.lang&&t.meta){const g=n.enter(`codeFencedMeta${l}`);p+=c.move(" "),p+=c.move(n.safe(t.meta,{before:p,after:`
`,encode:["`"],...c.current()})),g()}return p+=c.move(`
`),u&&(p+=c.move(u+`
`)),p+=c.move(f),d(),p}function Jv(t,r,n){return(n?"":"    ")+t}function Ya(t){const r=t.options.quote||'"';if(r!=='"'&&r!=="'")throw new Error("Cannot serialize title with `"+r+"` for `options.quote`, expected `\"`, or `'`");return r}function Zv(t,r,n,o){const a=Ya(n),u=a==='"'?"Quote":"Apostrophe",l=n.enter("definition");let c=n.enter("label");const f=n.createTracker(o);let d=f.move("[");return d+=f.move(n.safe(n.associationId(t),{before:d,after:"]",...f.current()})),d+=f.move("]: "),c(),!t.url||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),d+=f.move("<"),d+=f.move(n.safe(t.url,{before:d,after:">",...f.current()})),d+=f.move(">")):(c=n.enter("destinationRaw"),d+=f.move(n.safe(t.url,{before:d,after:t.title?" ":`
`,...f.current()}))),c(),t.title&&(c=n.enter(`title${u}`),d+=f.move(" "+a),d+=f.move(n.safe(t.title,{before:d,after:a,...f.current()})),d+=f.move(a),c()),l(),d}function ex(t){const r=t.options.emphasis||"*";if(r!=="*"&&r!=="_")throw new Error("Cannot serialize emphasis with `"+r+"` for `options.emphasis`, expected `*`, or `_`");return r}function Tn(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Ni(t,r,n){const o=Ri(t),a=Ri(r);return o===void 0?a===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:o===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}qc.peek=tx;function qc(t,r,n,o){const a=ex(n),u=n.enter("emphasis"),l=n.createTracker(o),c=l.move(a);let f=l.move(n.containerPhrasing(t,{after:a,before:c,...l.current()}));const d=f.charCodeAt(0),p=Ni(o.before.charCodeAt(o.before.length-1),d,a);p.inside&&(f=Tn(d)+f.slice(1));const g=f.charCodeAt(f.length-1),b=Ni(o.after.charCodeAt(0),g,a);b.inside&&(f=f.slice(0,-1)+Tn(g));const y=l.move(a);return u(),n.attentionEncodeSurroundingInfo={after:b.outside,before:p.outside},c+f+y}function tx(t,r,n){return n.options.emphasis||"*"}function Hc(t,r){let n=!1;return $c(t,function(o){if("value"in o&&/\r?\n|\r/.test(o.value)||o.type==="break")return n=!0,Da}),!!((!t.depth||t.depth<3)&&$a(t)&&(r.options.setext||n))}function nx(t,r,n,o){const a=Math.max(Math.min(6,t.depth||1),1),u=n.createTracker(o);if(Hc(t,n)){const p=n.enter("headingSetext"),g=n.enter("phrasing"),b=n.containerPhrasing(t,{...u.current(),before:`
`,after:`
`});return g(),p(),b+`
`+(a===1?"=":"-").repeat(b.length-(Math.max(b.lastIndexOf("\r"),b.lastIndexOf(`
`))+1))}const l="#".repeat(a),c=n.enter("headingAtx"),f=n.enter("phrasing");u.move(l+" ");let d=n.containerPhrasing(t,{before:"# ",after:`
`,...u.current()});return/^[\t ]/.test(d)&&(d=Tn(d.charCodeAt(0))+d.slice(1)),d=d?l+" "+d:l,n.options.closeAtx&&(d+=" "+l),f(),c(),d}Yc.peek=rx;function Yc(t){return t.value||""}function rx(){return"<"}Uc.peek=ix;function Uc(t,r,n,o){const a=Ya(n),u=a==='"'?"Quote":"Apostrophe",l=n.enter("image");let c=n.enter("label");const f=n.createTracker(o);let d=f.move("![");return d+=f.move(n.safe(t.alt,{before:d,after:"]",...f.current()})),d+=f.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),d+=f.move("<"),d+=f.move(n.safe(t.url,{before:d,after:">",...f.current()})),d+=f.move(">")):(c=n.enter("destinationRaw"),d+=f.move(n.safe(t.url,{before:d,after:t.title?" ":")",...f.current()}))),c(),t.title&&(c=n.enter(`title${u}`),d+=f.move(" "+a),d+=f.move(n.safe(t.title,{before:d,after:a,...f.current()})),d+=f.move(a),c()),d+=f.move(")"),l(),d}function ix(){return"!"}Gc.peek=ox;function Gc(t,r,n,o){const a=t.referenceType,u=n.enter("imageReference");let l=n.enter("label");const c=n.createTracker(o);let f=c.move("![");const d=n.safe(t.alt,{before:f,after:"]",...c.current()});f+=c.move(d+"]["),l();const p=n.stack;n.stack=[],l=n.enter("reference");const g=n.safe(n.associationId(t),{before:f,after:"]",...c.current()});return l(),n.stack=p,u(),a==="full"||!d||d!==g?f+=c.move(g+"]"):a==="shortcut"?f=f.slice(0,-1):f+=c.move("]"),f}function ox(){return"!"}Vc.peek=ax;function Vc(t,r,n){let o=t.value||"",a="`",u=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(o);)a+="`";for(/[^ \r\n]/.test(o)&&(/^[ \r\n]/.test(o)&&/[ \r\n]$/.test(o)||/^`|`$/.test(o))&&(o=" "+o+" ");++u<n.unsafe.length;){const l=n.unsafe[u],c=n.compilePattern(l);let f;if(l.atBreak)for(;f=c.exec(o);){let d=f.index;o.charCodeAt(d)===10&&o.charCodeAt(d-1)===13&&d--,o=o.slice(0,d)+" "+o.slice(f.index+1)}}return a+o+a}function ax(){return"`"}function Qc(t,r){const n=$a(t);return!!(!r.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}jc.peek=sx;function jc(t,r,n,o){const a=Ya(n),u=a==='"'?"Quote":"Apostrophe",l=n.createTracker(o);let c,f;if(Qc(t,n)){const p=n.stack;n.stack=[],c=n.enter("autolink");let g=l.move("<");return g+=l.move(n.containerPhrasing(t,{before:g,after:">",...l.current()})),g+=l.move(">"),c(),n.stack=p,g}c=n.enter("link"),f=n.enter("label");let d=l.move("[");return d+=l.move(n.containerPhrasing(t,{before:d,after:"](",...l.current()})),d+=l.move("]("),f(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(f=n.enter("destinationLiteral"),d+=l.move("<"),d+=l.move(n.safe(t.url,{before:d,after:">",...l.current()})),d+=l.move(">")):(f=n.enter("destinationRaw"),d+=l.move(n.safe(t.url,{before:d,after:t.title?" ":")",...l.current()}))),f(),t.title&&(f=n.enter(`title${u}`),d+=l.move(" "+a),d+=l.move(n.safe(t.title,{before:d,after:a,...l.current()})),d+=l.move(a),f()),d+=l.move(")"),c(),d}function sx(t,r,n){return Qc(t,n)?"<":"["}Kc.peek=ux;function Kc(t,r,n,o){const a=t.referenceType,u=n.enter("linkReference");let l=n.enter("label");const c=n.createTracker(o);let f=c.move("[");const d=n.containerPhrasing(t,{before:f,after:"]",...c.current()});f+=c.move(d+"]["),l();const p=n.stack;n.stack=[],l=n.enter("reference");const g=n.safe(n.associationId(t),{before:f,after:"]",...c.current()});return l(),n.stack=p,u(),a==="full"||!d||d!==g?f+=c.move(g+"]"):a==="shortcut"?f=f.slice(0,-1):f+=c.move("]"),f}function ux(){return"["}function Ua(t){const r=t.options.bullet||"*";if(r!=="*"&&r!=="+"&&r!=="-")throw new Error("Cannot serialize items with `"+r+"` for `options.bullet`, expected `*`, `+`, or `-`");return r}function lx(t){const r=Ua(t),n=t.options.bulletOther;if(!n)return r==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===r)throw new Error("Expected `bullet` (`"+r+"`) and `bulletOther` (`"+n+"`) to be different");return n}function cx(t){const r=t.options.bulletOrdered||".";if(r!=="."&&r!==")")throw new Error("Cannot serialize items with `"+r+"` for `options.bulletOrdered`, expected `.` or `)`");return r}function Xc(t){const r=t.options.rule||"*";if(r!=="*"&&r!=="-"&&r!=="_")throw new Error("Cannot serialize rules with `"+r+"` for `options.rule`, expected `*`, `-`, or `_`");return r}function fx(t,r,n,o){const a=n.enter("list"),u=n.bulletCurrent;let l=t.ordered?cx(n):Ua(n);const c=t.ordered?l==="."?")":".":lx(n);let f=r&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!t.ordered){const p=t.children?t.children[0]:void 0;if((l==="*"||l==="-")&&p&&(!p.children||!p.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(f=!0),Xc(n)===l&&p){let g=-1;for(;++g<t.children.length;){const b=t.children[g];if(b&&b.type==="listItem"&&b.children&&b.children[0]&&b.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(l=c),n.bulletCurrent=l;const d=n.containerFlow(t,o);return n.bulletLastUsed=l,n.bulletCurrent=u,a(),d}function hx(t){const r=t.options.listItemIndent||"one";if(r!=="tab"&&r!=="one"&&r!=="mixed")throw new Error("Cannot serialize items with `"+r+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return r}function dx(t,r,n,o){const a=hx(n);let u=n.bulletCurrent||Ua(n);r&&r.type==="list"&&r.ordered&&(u=(typeof r.start=="number"&&r.start>-1?r.start:1)+(n.options.incrementListMarker===!1?0:r.children.indexOf(t))+u);let l=u.length+1;(a==="tab"||a==="mixed"&&(r&&r.type==="list"&&r.spread||t.spread))&&(l=Math.ceil(l/4)*4);const c=n.createTracker(o);c.move(u+" ".repeat(l-u.length)),c.shift(l);const f=n.enter("listItem"),d=n.indentLines(n.containerFlow(t,c.current()),p);return f(),d;function p(g,b,y){return b?(y?"":" ".repeat(l))+g:(y?u:u+" ".repeat(l-u.length))+g}}function px(t,r,n,o){const a=n.enter("paragraph"),u=n.enter("phrasing"),l=n.containerPhrasing(t,o);return u(),a(),l}const gx=Ha(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function mx(t,r,n,o){return(t.children.some(function(l){return gx(l)})?n.containerPhrasing:n.containerFlow).call(n,t,o)}function yx(t){const r=t.options.strong||"*";if(r!=="*"&&r!=="_")throw new Error("Cannot serialize strong with `"+r+"` for `options.strong`, expected `*`, or `_`");return r}Jc.peek=wx;function Jc(t,r,n,o){const a=yx(n),u=n.enter("strong"),l=n.createTracker(o),c=l.move(a+a);let f=l.move(n.containerPhrasing(t,{after:a,before:c,...l.current()}));const d=f.charCodeAt(0),p=Ni(o.before.charCodeAt(o.before.length-1),d,a);p.inside&&(f=Tn(d)+f.slice(1));const g=f.charCodeAt(f.length-1),b=Ni(o.after.charCodeAt(0),g,a);b.inside&&(f=f.slice(0,-1)+Tn(g));const y=l.move(a+a);return u(),n.attentionEncodeSurroundingInfo={after:b.outside,before:p.outside},c+f+y}function wx(t,r,n){return n.options.strong||"*"}function bx(t,r,n,o){return n.safe(t.value,o)}function vx(t){const r=t.options.ruleRepetition||3;if(r<3)throw new Error("Cannot serialize rules with repetition `"+r+"` for `options.ruleRepetition`, expected `3` or more");return r}function xx(t,r,n){const o=(Xc(n)+(n.options.ruleSpaces?" ":"")).repeat(vx(n));return n.options.ruleSpaces?o.slice(0,-1):o}const _x={blockquote:Vv,break:Zl,code:Xv,definition:Zv,emphasis:qc,hardBreak:Zl,heading:nx,html:Yc,image:Uc,imageReference:Gc,inlineCode:Vc,link:jc,linkReference:Kc,list:fx,listItem:dx,paragraph:px,root:mx,strong:Jc,text:bx,thematicBreak:xx},kx=[Sx];function Sx(t,r,n,o){if(r.type==="code"&&La(r,o)&&(t.type==="list"||t.type===r.type&&La(t,o)))return!1;if("spread"in n&&typeof n.spread=="boolean")return t.type==="paragraph"&&(t.type===r.type||r.type==="definition"||r.type==="heading"&&Hc(r,o))?void 0:n.spread?1:0}const qn=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],Ix=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:qn},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:qn},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:qn},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:qn},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:qn},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:qn},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:qn},{atBreak:!0,character:"~"}];function Cx(t){return t.label||!t.identifier?t.label||"":Fc(t.identifier)}function Tx(t){if(!t._compiled){const r=(t.atBreak?"[\\r\\n][\\t ]*":"")+(t.before?"(?:"+t.before+")":"");t._compiled=new RegExp((r?"("+r+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(t.character)?"\\":"")+t.character+(t.after?"(?:"+t.after+")":""),"g")}return t._compiled}function Ex(t,r,n){const o=r.indexStack,a=t.children||[],u=[];let l=-1,c=n.before,f;o.push(-1);let d=r.createTracker(n);for(;++l<a.length;){const p=a[l];let g;if(o[o.length-1]=l,l+1<a.length){let T=r.handle.handlers[a[l+1].type];T&&T.peek&&(T=T.peek),g=T?T(a[l+1],t,r,{before:"",after:"",...d.current()}).charAt(0):""}else g=n.after;u.length>0&&(c==="\r"||c===`
`)&&p.type==="html"&&(u[u.length-1]=u[u.length-1].replace(/(\r?\n|\r)$/," "),c=" ",d=r.createTracker(n),d.move(u.join("")));let b=r.handle(p,t,r,{...d.current(),after:g,before:c});f&&f===b.slice(0,1)&&(b=Tn(f.charCodeAt(0))+b.slice(1));const y=r.attentionEncodeSurroundingInfo;r.attentionEncodeSurroundingInfo=void 0,f=void 0,y&&(u.length>0&&y.before&&c===u[u.length-1].slice(-1)&&(u[u.length-1]=u[u.length-1].slice(0,-1)+Tn(c.charCodeAt(0))),y.after&&(f=g)),d.move(b),u.push(b),c=b.slice(-1)}return o.pop(),u.join("")}function Ax(t,r,n){const o=r.indexStack,a=t.children||[],u=r.createTracker(n),l=[];let c=-1;for(o.push(-1);++c<a.length;){const f=a[c];o[o.length-1]=c,l.push(u.move(r.handle(f,t,r,{before:`
`,after:`
`,...u.current()}))),f.type!=="list"&&(r.bulletLastUsed=void 0),c<a.length-1&&l.push(u.move(Px(f,a[c+1],t,r)))}return o.pop(),l.join("")}function Px(t,r,n,o){let a=o.join.length;for(;a--;){const u=o.join[a](t,r,n,o);if(u===!0||u===1)break;if(typeof u=="number")return`
`.repeat(1+u);if(u===!1)return`

<!---->

`}return`

`}const Mx=/\r?\n|\r/g;function Ox(t,r){const n=[];let o=0,a=0,u;for(;u=Mx.exec(t);)l(t.slice(o,u.index)),n.push(u[0]),o=u.index+u[0].length,a++;return l(t.slice(o)),n.join("");function l(c){n.push(r(c,a,!c))}}function Dx(t,r,n){const o=(n.before||"")+(r||"")+(n.after||""),a=[],u=[],l={};let c=-1;for(;++c<t.unsafe.length;){const p=t.unsafe[c];if(!zc(t.stack,p))continue;const g=t.compilePattern(p);let b;for(;b=g.exec(o);){const y="before"in p||!!p.atBreak,T="after"in p,P=b.index+(y?b[1].length:0);a.includes(P)?(l[P].before&&!y&&(l[P].before=!1),l[P].after&&!T&&(l[P].after=!1)):(a.push(P),l[P]={before:y,after:T})}}a.sort(Fx);let f=n.before?n.before.length:0;const d=o.length-(n.after?n.after.length:0);for(c=-1;++c<a.length;){const p=a[c];p<f||p>=d||p+1<d&&a[c+1]===p+1&&l[p].after&&!l[p+1].before&&!l[p+1].after||a[c-1]===p-1&&l[p].before&&!l[p-1].before&&!l[p-1].after||(f!==p&&u.push(ec(o.slice(f,p),"\\")),f=p,/[!-/:-@[-`{-~]/.test(o.charAt(p))&&(!n.encode||!n.encode.includes(o.charAt(p)))?u.push("\\"):(u.push(Tn(o.charCodeAt(p))),f++))}return u.push(ec(o.slice(f,d),n.after)),u.join("")}function Fx(t,r){return t-r}function ec(t,r){const n=/\\(?=[!-/:-@[-`{-~])/g,o=[],a=[],u=t+r;let l=-1,c=0,f;for(;f=n.exec(u);)o.push(f.index);for(;++l<o.length;)c!==o[l]&&a.push(t.slice(c,o[l])),a.push("\\"),c=o[l];return a.push(t.slice(c)),a.join("")}function Lx(t){const r=t||{},n=r.now||{};let o=r.lineShift||0,a=n.line||1,u=n.column||1;return{move:f,current:l,shift:c};function l(){return{now:{line:a,column:u},lineShift:o}}function c(d){o+=d}function f(d){const p=d||"",g=p.split(/\r?\n|\r/g),b=g[g.length-1];return a+=g.length-1,u=g.length===1?u+b.length:1+b.length+o,p}}function Rx(t,r){const n=r||{},o={associationId:Cx,containerPhrasing:Wx,containerFlow:zx,createTracker:Lx,compilePattern:Tx,enter:u,handlers:{..._x},handle:void 0,indentLines:Ox,indexStack:[],join:[...kx],options:{},safe:qx,stack:[],unsafe:[...Ix]};Wc(o,n),o.options.tightDefinitions&&o.join.push($x),o.handle=Yv("type",{invalid:Nx,unknown:Bx,handlers:o.handlers});let a=o.handle(t,void 0,o,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return a&&a.charCodeAt(a.length-1)!==10&&a.charCodeAt(a.length-1)!==13&&(a+=`
`),a;function u(l){return o.stack.push(l),c;function c(){o.stack.pop()}}}function Nx(t){throw new Error("Cannot handle value `"+t+"`, expected node")}function Bx(t){const r=t;throw new Error("Cannot handle unknown node `"+r.type+"`")}function $x(t,r){if(t.type==="definition"&&t.type===r.type)return 0}function Wx(t,r){return Ex(t,this,r)}function zx(t,r){return Ax(t,this,r)}function qx(t,r){return Dx(this,t,r)}function Hx(t){const r=this;r.compiler=n;function n(o){return Rx(o,{...r.data("settings"),...t,extensions:r.data("toMarkdownExtensions")||[]})}}const Wt={text:"text",boolean:"boolean",multicheckbox:"multicheckbox",richText:"richText",number:"number"};class Yx{constructor(){this.logger=Xt(Jt.InputCreator)}createInput(r){const{componentName:n,inputName:o,type:a}=r;let u="";try{switch(a){case Wt.text:case Wt.richText:{u=`> ${r.defaultValue??""}`;break}case Wt.boolean:{const l=r.defaultValue===!0?"x":" ",c=r.label??"Checkbox";u=`- [${l}] ${c}`;break}case Wt.multicheckbox:{const l=r.options??[];if(!l.length)throw this.logger.error("multicheckbox must have non-empty options array",{opts:r}),new Error("multicheckbox must have non-empty options array");u=l.map(c=>`- [ ] ${Fa.hiddenValue(n,o,c.value)} ${c.label}`).join(`
`);break}case Wt.number:{u=`> {Number} ${r.defaultValue??""}`;break}default:throw this.logger.error(`Unknown input type: ${a}`,{opts:r}),new Error("Unknown input type: "+a)}}catch(l){throw this.logger.error("Failed to create input",{error:l,opts:r}),l}return Fa.input.wrap({componentName:n,inputName:o,content:u,inputType:a})}parseMarkdown(r){try{return Aa().use(Nc).parse(r)}catch(n){throw this.logger.error("Failed to parse Markdown",{error:n,md:r}),n}}stringifyMarkdown(r){try{return Aa().use(Hx).stringify(r)}catch(n){throw this.logger.error("Failed to stringify Markdown",{error:n,ast:r}),n}}}const Hn=new Yx;class Ge{constructor(r){this.content=[],this.logger=Xt(Jt.ComponentBuilder),this.componentName=r}_md(r){const n=typeof r=="function"?r():r;return this.content.push(n),this}_divider(){return this.content.push(`
***
`),this}_fancyTitle(r,n="‚öõÔ∏é"){return r?this.content.push(`<center>${n} <strong>${r}</strong> ${n}</center>`):this.content.push("---"),this}_fancyDivider(r,n="‚öõÔ∏é"){return this._fancyTitle(r,n)}_themedDivider(r,n){return this.content.push(`### ${n} ${r}`),this}_blockquoteDivider(r){return r?this.content.push(`> ${r}`):this.content.push("> ---"),this}_foldable(r,n="Guidance"){const a=r.split(`
`).map(l=>`> ${l}`),u=`> [!note]- ${n}
${a.join(`
`)}`;return this.content.push(u),this.content.push(""),this}_input(r){const n={...r,componentName:this.componentName};return this.content.push(Hn.createInput(n)),this}_inputLabel(r,n){const o=n?`**${r}** ${n}`:`**${r}**`;return this.content.push(o),this}_text(r,n,o){const a=Hn.createInput({componentName:this.componentName,type:Wt.text,inputName:r,defaultValue:n,placeholder:o});return this.content.push(a),this.content.push(""),this}_richText(r,n,o){this.content.push("<center>¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑</center>");const a=Hn.createInput({componentName:this.componentName,type:Wt.richText,inputName:r,defaultValue:n,placeholder:o});return this.content.push(a),this.content.push("<center>¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑</center>"),this}_boolean(r,n,o){const a=Hn.createInput({componentName:this.componentName,type:Wt.boolean,inputName:r,label:n,defaultValue:o});return this.content.push(a),this}_number(r,n){const o=Hn.createInput({componentName:this.componentName,type:Wt.number,inputName:r,defaultValue:n});return this.content.push(o),this}_multiCheckbox(r,n,o,a){const u=Hn.createInput({componentName:this.componentName,type:Wt.multicheckbox,inputName:r,options:n,defaultValue:o,collapsed:a});return this.content.push(u),this}_multiCheckboxSC(r,n,o,a){const u=Hn.createInput({componentName:this.componentName,type:Wt.multicheckbox,inputName:r,options:n,singleChoice:!0,defaultValue:o,collapsed:a});return this.content.push(u),this}render(){const r=Fa.component.wrap(this.componentName,this.content.join(`
`));return this.logger.dev("Component rendered",{outputLength:r.length}),r}}async function Ux(){const t=new Ge("consistencyStats");try{const r=await Kt.getReportInputs("almostDailyReport");if(!r||r.length===0)return t._md("üìä **Consistency Tracker** ¬∑ üéØ Starting your journey today!"),t.render();const n=Array.from(new Set(r.map(y=>y.reportDate))).sort().reverse(),o=n[n.length-1],a=new Date(o),u=new Date,l=ty(u,a)+1,f=[{days:7,label:"7d"},{days:30,label:"30d"},{days:90,label:"90d"}].map(({days:y,label:T})=>{const P=Li(tw(u,y-1),"yyyy-MM-dd"),B=n.filter(z=>z>=P).length,D=Math.min(y,l),H=Math.round(B/D*100);return{label:T,reports:B,days:D,percentage:H}}),d=n.length,p=Math.round(d/l*100),g=[];for(const y of f){const T=parseInt(y.label.replace("d",""));if(y.days<T)continue;const P=y.percentage>=80?"üéâ":y.percentage>=60?"‚úÖ":y.percentage>=40?"üìà":"üå±";g.push(`${P} ${y.label}: ${y.reports}/${y.days} (${y.percentage}%)`)}const b=p>=80?"üèÜ":p>=60?"‚≠ê":"üéØ";g.push(`${b} All: ${d}/${l} (${p}%)`),t._md(`üìä **Consistency Tracker** ¬∑ ${g.join(" ¬∑ ")}`)}catch{t._md("üìä **Consistency Tracker** ¬∑ Starting fresh!")}return t.render()}function Gx(){const t="morningReflection",r=new Ge(t);return r._md("## üßò Morning Reflection (‚≠ê RECOMMENDED - 2-3 min)"),r._foldable(`**What This Practice Does:**
This is the foundational Stoic exercise that eliminates suffering by training you to focus only on what you can control.

**The Core Principle:**
The Stoics discovered that **all suffering comes from desiring things outside your control**. When you stop struggling against the unchangeable and channel your energy into what you CAN control, you gain peace of mind.

**‚úÖ COMPLETELY IN YOUR CONTROL:**
- Your judgments, opinions, and interpretations
- Your responses and reactions to events
- Your character, virtues, and values
- Your effort, attention, and choices
- How you treat others
- What you pursue and avoid

**‚ùå OUTSIDE YOUR CONTROL:**
- Other people's opinions, actions, and judgments
- Outcomes, results, and consequences
- Past events and future circumstances
- Your reputation and what others think
- External events (weather, traffic, delays)
- Natural processes (aging, sickness, death)

**How to Practice:**
When faced with any situation today, ask yourself: "Is this within my control?" If yes, take action. If no, accept it and focus on your response instead.

_"Make the best use of what is in your power, and take the rest as it happens."_ ‚Äî Epictetus`,"Stoic Practice: The Dichotomy of Control"),r._boolean("dichotomy_of_control_practiced","üìã I practiced the Dichotomy of Control (separating what I can/cannot control)"),r._foldable(`**What This Practice Does:**
Wu Wei teaches effortless action ‚Äì responding to life's obstacles with flexibility rather than rigid resistance.

**The Core Principle:**
From Taoism comes the wisdom of "flowing like water." Water doesn't fight obstacles ‚Äì it adapts, flows around them, and finds a way through. When you stop resisting what you cannot change, you conserve energy and discover creative solutions.

**How to Practice Wu Wei Today:**

1. **When you encounter an obstacle, pause and ask:**
   - "Can I change this?" ‚Üí If yes, take calm action. If no, accept it.
   - "What can I learn from this?"
   - "How would water respond to this?"

2. **Remember:** Fighting against unchangeable circumstances drains your energy. Flowing with them preserves it.

3. **The shift:** From "This shouldn't be happening" to "This IS happening ‚Äì how do I respond skillfully?"

_"The rigid tree breaks in the wind. The flexible tree bends and survives."_ ‚Äî Taoist wisdom`,"Taoist Practice: Wu Wei (Effortless Action)"),r._boolean("wu_wei_practiced","üåä I practiced Wu Wei (accepting what I cannot change and flowing like water)"),r._foldable(`**What This Practice Does:**
Transforms obstacles from problems into opportunities for growth, creativity, and building character.

**The Core Principle:**
Marcus Aurelius taught: **"The impediment to action advances action. What stands in the way becomes the way."**

This means every obstacle contains hidden opportunity:
- **Blocked plan?** ‚Üí Forces you to become more creative and resourceful
- **Frustrating person?** ‚Üí Opportunity to practice patience and understanding
- **Failure?** ‚Üí Valuable data for learning and improvement
- **Delay?** ‚Üí Gift of time to prepare better or rest

**The Reframe:**
Stop seeing obstacles as enemies. Start seeing them as **training equipment** for your character. Each challenge makes you stronger, wiser, more resilient.

**How to Practice:**
When you face a setback today, ask: "What opportunity is hidden in this obstacle? How is this making me better?"

_"The obstacle is not blocking your path ‚Äì it IS your path. It's revealing where you need to grow."_ ‚Äî Ryan Holiday`,"Stoic Practice: The Obstacle Is The Way"),r._boolean("obstacle_is_way_practiced","üèîÔ∏è I practiced 'The Obstacle Is The Way' (reframing obstacles as opportunities)"),r.render()}function Vx(){const t="negativeVisualization",r=new Ge(t);return r._md("## ü™û Negative Visualization (üí° OPTIONAL - 2 min)"),r._foldable(`**Praemeditatio Malorum** ‚Äî Ancient Stoic gratitude practice

This is NOT pessimism. This is **appreciation training** that the Stoics practiced daily.

**The Problem** ‚Äî we take everything for granted. Your health, your home, your loved ones ‚Äî you stop seeing them. Hedonic adaptation makes you numb to your blessings.

**The Solution** ‚Äî briefly imagine losing what you value. When you mentally "lose" something, you suddenly SEE it again with fresh eyes.

**What this practice does:**
- **Breaks hedonic adaptation** ‚Äî stop taking good things for granted
- **Generates genuine gratitude** ‚Äî feel appreciation, not just think it  
- **Prepares you mentally** ‚Äî if loss happens, the shock is less severe
- **Increases present joy** ‚Äî savor what you have RIGHT NOW

**How to practice:**
1. Close your eyes for 10-20 seconds
2. Vividly imagine ONE thing you value being gone (person, health, home, ability)
3. Feel the loss ‚Äî let it be uncomfortable for a moment
4. Open your eyes and appreciate that you STILL HAVE IT

This isn't dwelling on loss. It's a quick mental exercise to restore wonder.

_"He robs present ills of their power who has perceived their coming beforehand."_ ‚Äî Seneca`,"Stoic Gratitude Practice"),r._md("**Practice Steps:**"),r._md("1. **Close your eyes** ‚Äî take a slow breath"),r._md("2. **Imagine the loss** ‚Äî picture losing someone/something you love (10 seconds)"),r._md("3. **Feel it** ‚Äî don't rush past the discomfort"),r._md("4. **Open your eyes** ‚Äî look around. You still have them. Feel that relief."),r._boolean("negative_visualization_done","I have practiced negative visualization",!1),r.render()}function Qx(){const t="priorityPlanning",r=new Ge(t);return r._md("## üéØ Priority Planning (üìå CORE - 3-5 min)"),r._foldable(`**Start with Death, Plan with Clarity**

**Memento Mori** (from Stoicism) ‚Äî "Remember you will die." This isn't morbid‚Äîit's the ultimate focusing tool. When you remember death, trivialities fade and what truly matters becomes crystal clear.

**The Four Pillars of Life:**
1. **Happiness & Peace of Mind** ‚Äî inner tranquility and joy
2. **Body & Health** ‚Äî physical wellbeing and vitality  
3. **People & Relationships** ‚Äî love, connection, community
4. **Meaningful Work** ‚Äî contributing something valuable

_"You could leave life right now. Let that determine what you do and say and think."_ ‚Äî Marcus Aurelius

**Implementation Intentions** (from Atomic Habits) ‚Äî being specific doubles success rates:
"I will [BEHAVIOR] at [TIME] in [LOCATION]."

**The Process:**
1. Remember death ‚Üí What pillar needs attention?
2. Choose ONE priority that serves that pillar
3. Make a specific plan with when/where
4. Prepare for obstacles`,"Memento Mori + Implementation Intentions"),r._inputLabel("Death Reflection:",'"If today were my last day, which pillar needs my attention most?"'),r._text("priority_pillar","","e.g., 'Relationships - my family needs more of my presence and love'"),r._inputLabel("My #1 Priority Today","*What is the ONE thing that matters most? When & where? If-then plan for obstacles?*"),r._text("priority_plan","","e.g., Call mom and have a real conversation. At 7 PM after dinner, sitting in the quiet room with no distractions. If I feel awkward opening up, I'll remember she won't be here forever."),r.render()}function jx(){const t="voluntaryDiscomfort",r=new Ge(t);return r._md("## üßä Voluntary Discomfort (üí° OPTIONAL - 2 min)"),r._foldable(`**Practicing Poverty** ‚Äî Seneca's resilience training

The Stoics deliberately practiced small discomforts. Not to punish themselves, but to build mental strength and appreciation.

**The Problem** ‚Äî modern life is TOO comfortable. We become weak, dependent on luxuries, and terrified of any discomfort. When hardship comes, we collapse.

**The Stoic Solution** ‚Äî regularly choose small, voluntary discomforts. This trains your mind that discomfort is survivable‚Äîeven beneficial.

**What this practice does:**
1. **Builds resilience** ‚Äî when real hardship comes, you're prepared
2. **Breaks hedonic adaptation** ‚Äî you stop taking comfort for granted
3. **Strengthens willpower** ‚Äî you prove you can control urges  
4. **Increases appreciation** ‚Äî comfort feels AMAZING after voluntary discomfort
5. **Reduces fear** ‚Äî you learn: "Discomfort won't kill me. I'm stronger than I thought."

**The Science** ‚Äî your brain predicts suffering based on past experience. If you've never been uncomfortable, small discomforts feel catastrophic. If you practice discomfort, your brain learns: "This is manageable."

**How to practice:**
Choose ONE small discomfort today. Not as punishment ‚Äî as TRAINING.
- Physical: cold shower, skip a meal, exercise when tired
- Social: have the difficult conversation, say no to someone
- Habitual: skip coffee, no phone for 2 hours, sit in silence

**Key** ‚Äî the discomfort should be VOLUNTARY and MILD. You're training, not torturing.

_"We suffer more often in imagination than in reality."_ ‚Äî Seneca
_"Set aside a certain number of days to be content with little and practice poverty."_ ‚Äî Seneca`,"Stoic Resilience Training"),r._inputLabel("Today's Voluntary Discomfort","(choose ONE)"),r._md("- **Physical** ‚Äî cold shower (30-60 sec), skip dessert, walk instead of drive"),r._md("- **Social** ‚Äî difficult conversation, saying no, asking for what you need"),r._md("- **Habitual** ‚Äî skip coffee/treat, no phone for 2 hrs, wake 30 min earlier"),r._md("- **Environmental** ‚Äî sit on floor, less heat/AC, simpler meal"),r._inputLabel("Your choice","(be specific about what, when, and for how long)"),r._text("voluntary_discomfort_choice","","e.g., 'Cold shower for 60 seconds after regular shower, at 7am'"),r._boolean("voluntary_discomfort_done","I practiced voluntary discomfort today",!1),r.render()}function Zc(t){if(t.length===0)return 0;var r=t[0],n=0,o;if(typeof r!="number")return Number.NaN;for(var a=1;a<t.length;a++){if(typeof t[a]!="number")return Number.NaN;o=r+t[a],Math.abs(r)>=Math.abs(t[a])?n+=r-o+t[a]:n+=t[a]-o+r,r=o}return r+n}function ef(t){if(t.length===0)throw new Error("mean requires at least one data point");return Zc(t)/t.length}function Kx(t,r){var n=ef(t),o=0,a,u;for(u=0;u<t.length;u++)a=t[u]-n,o+=a*a;return o}function tf(t){if(t.length===0)throw new Error("variance requires at least one data point");return Kx(t)/t.length}function Xx(t){if(t.length===1)return 0;var r=tf(t);return Math.sqrt(r)}function Jx(t){if(t.length===0)throw new Error("mode requires at least one data point");if(t.length===1)return t[0];for(var r=t[0],n=Number.NaN,o=0,a=1,u=1;u<t.length+1;u++)t[u]!==r?(a>o&&(o=a,n=r),a=1,r=t[u]):a++;return n}function Zx(t){return t.slice().sort(function(r,n){return r-n})}function e_(t){return Jx(Zx(t))}function tc(t){if(t.length===0)throw new Error("min requires at least one data point");for(var r=t[0],n=1;n<t.length;n++)t[n]<r&&(r=t[n]);return r}function nc(t){if(t.length===0)throw new Error("max requires at least one data point");for(var r=t[0],n=1;n<t.length;n++)t[n]>r&&(r=t[n]);return r}function rc(t,r){var n=t.length*r;if(t.length===0)throw new Error("quantile requires at least one data point.");if(r<0||r>1)throw new Error("quantiles must be between 0 and 1");return r===1?t[t.length-1]:r===0?t[0]:n%1!==0?t[Math.ceil(n)-1]:t.length%2===0?(t[n-1]+t[n])/2:t[n]}function Oi(t,r,n,o){for(n=n||0,o=o||t.length-1;o>n;){if(o-n>600){var a=o-n+1,u=r-n+1,l=Math.log(a),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(a-c)/a);u-a/2<0&&(f*=-1);var d=Math.max(n,Math.floor(r-u*c/a+f)),p=Math.min(o,Math.floor(r+(a-u)*c/a+f));Oi(t,r,d,p)}var g=t[r],b=n,y=o;for(Er(t,n,r),t[o]>g&&Er(t,n,o);b<y;){for(Er(t,b,y),b++,y--;t[b]<g;)b++;for(;t[y]>g;)y--}t[n]===g?Er(t,n,y):(y++,Er(t,y,o)),y<=r&&(n=y+1),r<=y&&(o=y-1)}}function Er(t,r,n){var o=t[r];t[r]=t[n],t[n]=o}function Ra(t,r){var n=t.slice();if(Array.isArray(r)){t_(n,r);for(var o=[],a=0;a<r.length;a++)o[a]=rc(n,r[a]);return o}else{var u=rf(n.length,r);return nf(n,u,0,n.length-1),rc(n,r)}}function nf(t,r,n,o){r%1===0?Oi(t,r,n,o):(r=Math.floor(r),Oi(t,r,n,o),Oi(t,r+1,r+1,o))}function t_(t,r){for(var n=[0],o=0;o<r.length;o++)n.push(rf(t.length,r[o]));n.push(t.length-1),n.sort(n_);for(var a=[0,n.length-1];a.length;){var u=Math.ceil(a.pop()),l=Math.floor(a.pop());if(!(u-l<=1)){var c=Math.floor((l+u)/2);nf(t,n[c],Math.floor(n[l]),Math.ceil(n[u])),a.push(l,c,c,u)}}}function n_(t,r){return t-r}function rf(t,r){var n=t*r;return r===1?t-1:r===0?0:n%1!==0?Math.ceil(n)-1:t%2===0?n-.5:n}function r_(t){return+Ra(t,.5)}var ma={},ic;function i_(){return ic||(ic=1,(function(t){(function(r){r.black="\x1B[30m",r.red="\x1B[31m",r.green="\x1B[32m",r.yellow="\x1B[33m",r.blue="\x1B[34m",r.magenta="\x1B[35m",r.cyan="\x1B[36m",r.lightgray="\x1B[37m",r.default="\x1B[39m",r.darkgray="\x1B[90m",r.lightred="\x1B[91m",r.lightgreen="\x1B[92m",r.lightyellow="\x1B[93m",r.lightblue="\x1B[94m",r.lightmagenta="\x1B[95m",r.lightcyan="\x1B[96m",r.white="\x1B[97m",r.reset="\x1B[0m";function n(o,a){return a===void 0?o:a+o+r.reset}r.colored=n,r.plot=function(o,a=void 0){typeof o[0]=="number"&&(o=[o]),a=typeof a<"u"?a:{};let u=typeof a.min<"u"?a.min:o[0][0],l=typeof a.max<"u"?a.max:o[0][0];for(let O=0;O<o.length;O++)for(let E=0;E<o[O].length;E++)u=Math.min(u,o[O][E]),l=Math.max(l,o[O][E]);let c=["‚îº","‚î§","‚ï∂","‚ï¥","‚îÄ","‚ï∞","‚ï≠","‚ïÆ","‚ïØ","‚îÇ"],f=Math.abs(l-u),d=typeof a.offset<"u"?a.offset:3,p=typeof a.padding<"u"?a.padding:"           ",g=typeof a.height<"u"?a.height:f,b=typeof a.colors<"u"?a.colors:[],y=f!==0?g/f:1,T=Math.round(u*y),P=Math.round(l*y),B=Math.abs(P-T),D=0;for(let O=0;O<o.length;O++)D=Math.max(D,o[O].length);D=D+d;let H=typeof a.symbols<"u"?a.symbols:c,z=typeof a.format<"u"?a.format:function(O){return(p+O.toFixed(2)).slice(-p.length)},W=new Array(B+1);for(let O=0;O<=B;O++){W[O]=new Array(D);for(let E=0;E<D;E++)W[O][E]=" "}for(let O=T;O<=P;++O){let E=z(B>0?l-(O-T)*f/B:O,O-T);W[O-T][Math.max(d-E.length,0)]=E,W[O-T][d-1]=O==0?H[0]:H[1]}for(let O=0;O<o.length;O++){let E=b[O%b.length],U=Math.round(o[O][0]*y)-T;W[B-U][d-1]=n(H[0],E);for(let Q=0;Q<o[O].length-1;Q++){let ee=Math.round(o[O][Q+0]*y)-T,he=Math.round(o[O][Q+1]*y)-T;if(ee==he)W[B-ee][Q+d]=n(H[4],E);else{W[B-he][Q+d]=n(ee>he?H[5]:H[6],E),W[B-ee][Q+d]=n(ee>he?H[7]:H[8],E);let j=Math.min(ee,he),V=Math.max(ee,he);for(let me=j+1;me<V;me++)W[B-me][Q+d]=n(H[9],E)}}}return W.map(function(O){return O.join("")}).join(`
`)}})(t)})(ma)),ma}var o_=i_(),Di={exports:{}},ya,oc;function a_(){return oc||(oc=1,ya={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),ya}var wa,ac;function of(){if(ac)return wa;ac=1;const t=a_(),r={};for(const a of Object.keys(t))r[t[a]]=a;const n={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};wa=n;for(const a of Object.keys(n)){if(!("channels"in n[a]))throw new Error("missing channels property: "+a);if(!("labels"in n[a]))throw new Error("missing channel labels property: "+a);if(n[a].labels.length!==n[a].channels)throw new Error("channel and label counts mismatch: "+a);const{channels:u,labels:l}=n[a];delete n[a].channels,delete n[a].labels,Object.defineProperty(n[a],"channels",{value:u}),Object.defineProperty(n[a],"labels",{value:l})}n.rgb.hsl=function(a){const u=a[0]/255,l=a[1]/255,c=a[2]/255,f=Math.min(u,l,c),d=Math.max(u,l,c),p=d-f;let g,b;d===f?g=0:u===d?g=(l-c)/p:l===d?g=2+(c-u)/p:c===d&&(g=4+(u-l)/p),g=Math.min(g*60,360),g<0&&(g+=360);const y=(f+d)/2;return d===f?b=0:y<=.5?b=p/(d+f):b=p/(2-d-f),[g,b*100,y*100]},n.rgb.hsv=function(a){let u,l,c,f,d;const p=a[0]/255,g=a[1]/255,b=a[2]/255,y=Math.max(p,g,b),T=y-Math.min(p,g,b),P=function(B){return(y-B)/6/T+1/2};return T===0?(f=0,d=0):(d=T/y,u=P(p),l=P(g),c=P(b),p===y?f=c-l:g===y?f=1/3+u-c:b===y&&(f=2/3+l-u),f<0?f+=1:f>1&&(f-=1)),[f*360,d*100,y*100]},n.rgb.hwb=function(a){const u=a[0],l=a[1];let c=a[2];const f=n.rgb.hsl(a)[0],d=1/255*Math.min(u,Math.min(l,c));return c=1-1/255*Math.max(u,Math.max(l,c)),[f,d*100,c*100]},n.rgb.cmyk=function(a){const u=a[0]/255,l=a[1]/255,c=a[2]/255,f=Math.min(1-u,1-l,1-c),d=(1-u-f)/(1-f)||0,p=(1-l-f)/(1-f)||0,g=(1-c-f)/(1-f)||0;return[d*100,p*100,g*100,f*100]};function o(a,u){return(a[0]-u[0])**2+(a[1]-u[1])**2+(a[2]-u[2])**2}return n.rgb.keyword=function(a){const u=r[a];if(u)return u;let l=1/0,c;for(const f of Object.keys(t)){const d=t[f],p=o(a,d);p<l&&(l=p,c=f)}return c},n.keyword.rgb=function(a){return t[a]},n.rgb.xyz=function(a){let u=a[0]/255,l=a[1]/255,c=a[2]/255;u=u>.04045?((u+.055)/1.055)**2.4:u/12.92,l=l>.04045?((l+.055)/1.055)**2.4:l/12.92,c=c>.04045?((c+.055)/1.055)**2.4:c/12.92;const f=u*.4124+l*.3576+c*.1805,d=u*.2126+l*.7152+c*.0722,p=u*.0193+l*.1192+c*.9505;return[f*100,d*100,p*100]},n.rgb.lab=function(a){const u=n.rgb.xyz(a);let l=u[0],c=u[1],f=u[2];l/=95.047,c/=100,f/=108.883,l=l>.008856?l**(1/3):7.787*l+16/116,c=c>.008856?c**(1/3):7.787*c+16/116,f=f>.008856?f**(1/3):7.787*f+16/116;const d=116*c-16,p=500*(l-c),g=200*(c-f);return[d,p,g]},n.hsl.rgb=function(a){const u=a[0]/360,l=a[1]/100,c=a[2]/100;let f,d,p;if(l===0)return p=c*255,[p,p,p];c<.5?f=c*(1+l):f=c+l-c*l;const g=2*c-f,b=[0,0,0];for(let y=0;y<3;y++)d=u+1/3*-(y-1),d<0&&d++,d>1&&d--,6*d<1?p=g+(f-g)*6*d:2*d<1?p=f:3*d<2?p=g+(f-g)*(2/3-d)*6:p=g,b[y]=p*255;return b},n.hsl.hsv=function(a){const u=a[0];let l=a[1]/100,c=a[2]/100,f=l;const d=Math.max(c,.01);c*=2,l*=c<=1?c:2-c,f*=d<=1?d:2-d;const p=(c+l)/2,g=c===0?2*f/(d+f):2*l/(c+l);return[u,g*100,p*100]},n.hsv.rgb=function(a){const u=a[0]/60,l=a[1]/100;let c=a[2]/100;const f=Math.floor(u)%6,d=u-Math.floor(u),p=255*c*(1-l),g=255*c*(1-l*d),b=255*c*(1-l*(1-d));switch(c*=255,f){case 0:return[c,b,p];case 1:return[g,c,p];case 2:return[p,c,b];case 3:return[p,g,c];case 4:return[b,p,c];case 5:return[c,p,g]}},n.hsv.hsl=function(a){const u=a[0],l=a[1]/100,c=a[2]/100,f=Math.max(c,.01);let d,p;p=(2-l)*c;const g=(2-l)*f;return d=l*f,d/=g<=1?g:2-g,d=d||0,p/=2,[u,d*100,p*100]},n.hwb.rgb=function(a){const u=a[0]/360;let l=a[1]/100,c=a[2]/100;const f=l+c;let d;f>1&&(l/=f,c/=f);const p=Math.floor(6*u),g=1-c;d=6*u-p,(p&1)!==0&&(d=1-d);const b=l+d*(g-l);let y,T,P;switch(p){default:case 6:case 0:y=g,T=b,P=l;break;case 1:y=b,T=g,P=l;break;case 2:y=l,T=g,P=b;break;case 3:y=l,T=b,P=g;break;case 4:y=b,T=l,P=g;break;case 5:y=g,T=l,P=b;break}return[y*255,T*255,P*255]},n.cmyk.rgb=function(a){const u=a[0]/100,l=a[1]/100,c=a[2]/100,f=a[3]/100,d=1-Math.min(1,u*(1-f)+f),p=1-Math.min(1,l*(1-f)+f),g=1-Math.min(1,c*(1-f)+f);return[d*255,p*255,g*255]},n.xyz.rgb=function(a){const u=a[0]/100,l=a[1]/100,c=a[2]/100;let f,d,p;return f=u*3.2406+l*-1.5372+c*-.4986,d=u*-.9689+l*1.8758+c*.0415,p=u*.0557+l*-.204+c*1.057,f=f>.0031308?1.055*f**(1/2.4)-.055:f*12.92,d=d>.0031308?1.055*d**(1/2.4)-.055:d*12.92,p=p>.0031308?1.055*p**(1/2.4)-.055:p*12.92,f=Math.min(Math.max(0,f),1),d=Math.min(Math.max(0,d),1),p=Math.min(Math.max(0,p),1),[f*255,d*255,p*255]},n.xyz.lab=function(a){let u=a[0],l=a[1],c=a[2];u/=95.047,l/=100,c/=108.883,u=u>.008856?u**(1/3):7.787*u+16/116,l=l>.008856?l**(1/3):7.787*l+16/116,c=c>.008856?c**(1/3):7.787*c+16/116;const f=116*l-16,d=500*(u-l),p=200*(l-c);return[f,d,p]},n.lab.xyz=function(a){const u=a[0],l=a[1],c=a[2];let f,d,p;d=(u+16)/116,f=l/500+d,p=d-c/200;const g=d**3,b=f**3,y=p**3;return d=g>.008856?g:(d-16/116)/7.787,f=b>.008856?b:(f-16/116)/7.787,p=y>.008856?y:(p-16/116)/7.787,f*=95.047,d*=100,p*=108.883,[f,d,p]},n.lab.lch=function(a){const u=a[0],l=a[1],c=a[2];let f;f=Math.atan2(c,l)*360/2/Math.PI,f<0&&(f+=360);const p=Math.sqrt(l*l+c*c);return[u,p,f]},n.lch.lab=function(a){const u=a[0],l=a[1],f=a[2]/360*2*Math.PI,d=l*Math.cos(f),p=l*Math.sin(f);return[u,d,p]},n.rgb.ansi16=function(a,u=null){const[l,c,f]=a;let d=u===null?n.rgb.hsv(a)[2]:u;if(d=Math.round(d/50),d===0)return 30;let p=30+(Math.round(f/255)<<2|Math.round(c/255)<<1|Math.round(l/255));return d===2&&(p+=60),p},n.hsv.ansi16=function(a){return n.rgb.ansi16(n.hsv.rgb(a),a[2])},n.rgb.ansi256=function(a){const u=a[0],l=a[1],c=a[2];return u===l&&l===c?u<8?16:u>248?231:Math.round((u-8)/247*24)+232:16+36*Math.round(u/255*5)+6*Math.round(l/255*5)+Math.round(c/255*5)},n.ansi16.rgb=function(a){let u=a%10;if(u===0||u===7)return a>50&&(u+=3.5),u=u/10.5*255,[u,u,u];const l=(~~(a>50)+1)*.5,c=(u&1)*l*255,f=(u>>1&1)*l*255,d=(u>>2&1)*l*255;return[c,f,d]},n.ansi256.rgb=function(a){if(a>=232){const d=(a-232)*10+8;return[d,d,d]}a-=16;let u;const l=Math.floor(a/36)/5*255,c=Math.floor((u=a%36)/6)/5*255,f=u%6/5*255;return[l,c,f]},n.rgb.hex=function(a){const l=(((Math.round(a[0])&255)<<16)+((Math.round(a[1])&255)<<8)+(Math.round(a[2])&255)).toString(16).toUpperCase();return"000000".substring(l.length)+l},n.hex.rgb=function(a){const u=a.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!u)return[0,0,0];let l=u[0];u[0].length===3&&(l=l.split("").map(g=>g+g).join(""));const c=parseInt(l,16),f=c>>16&255,d=c>>8&255,p=c&255;return[f,d,p]},n.rgb.hcg=function(a){const u=a[0]/255,l=a[1]/255,c=a[2]/255,f=Math.max(Math.max(u,l),c),d=Math.min(Math.min(u,l),c),p=f-d;let g,b;return p<1?g=d/(1-p):g=0,p<=0?b=0:f===u?b=(l-c)/p%6:f===l?b=2+(c-u)/p:b=4+(u-l)/p,b/=6,b%=1,[b*360,p*100,g*100]},n.hsl.hcg=function(a){const u=a[1]/100,l=a[2]/100,c=l<.5?2*u*l:2*u*(1-l);let f=0;return c<1&&(f=(l-.5*c)/(1-c)),[a[0],c*100,f*100]},n.hsv.hcg=function(a){const u=a[1]/100,l=a[2]/100,c=u*l;let f=0;return c<1&&(f=(l-c)/(1-c)),[a[0],c*100,f*100]},n.hcg.rgb=function(a){const u=a[0]/360,l=a[1]/100,c=a[2]/100;if(l===0)return[c*255,c*255,c*255];const f=[0,0,0],d=u%1*6,p=d%1,g=1-p;let b=0;switch(Math.floor(d)){case 0:f[0]=1,f[1]=p,f[2]=0;break;case 1:f[0]=g,f[1]=1,f[2]=0;break;case 2:f[0]=0,f[1]=1,f[2]=p;break;case 3:f[0]=0,f[1]=g,f[2]=1;break;case 4:f[0]=p,f[1]=0,f[2]=1;break;default:f[0]=1,f[1]=0,f[2]=g}return b=(1-l)*c,[(l*f[0]+b)*255,(l*f[1]+b)*255,(l*f[2]+b)*255]},n.hcg.hsv=function(a){const u=a[1]/100,l=a[2]/100,c=u+l*(1-u);let f=0;return c>0&&(f=u/c),[a[0],f*100,c*100]},n.hcg.hsl=function(a){const u=a[1]/100,c=a[2]/100*(1-u)+.5*u;let f=0;return c>0&&c<.5?f=u/(2*c):c>=.5&&c<1&&(f=u/(2*(1-c))),[a[0],f*100,c*100]},n.hcg.hwb=function(a){const u=a[1]/100,l=a[2]/100,c=u+l*(1-u);return[a[0],(c-u)*100,(1-c)*100]},n.hwb.hcg=function(a){const u=a[1]/100,c=1-a[2]/100,f=c-u;let d=0;return f<1&&(d=(c-f)/(1-f)),[a[0],f*100,d*100]},n.apple.rgb=function(a){return[a[0]/65535*255,a[1]/65535*255,a[2]/65535*255]},n.rgb.apple=function(a){return[a[0]/255*65535,a[1]/255*65535,a[2]/255*65535]},n.gray.rgb=function(a){return[a[0]/100*255,a[0]/100*255,a[0]/100*255]},n.gray.hsl=function(a){return[0,0,a[0]]},n.gray.hsv=n.gray.hsl,n.gray.hwb=function(a){return[0,100,a[0]]},n.gray.cmyk=function(a){return[0,0,0,a[0]]},n.gray.lab=function(a){return[a[0],0,0]},n.gray.hex=function(a){const u=Math.round(a[0]/100*255)&255,c=((u<<16)+(u<<8)+u).toString(16).toUpperCase();return"000000".substring(c.length)+c},n.rgb.gray=function(a){return[(a[0]+a[1]+a[2])/3/255*100]},wa}var ba,sc;function s_(){if(sc)return ba;sc=1;const t=of();function r(){const u={},l=Object.keys(t);for(let c=l.length,f=0;f<c;f++)u[l[f]]={distance:-1,parent:null};return u}function n(u){const l=r(),c=[u];for(l[u].distance=0;c.length;){const f=c.pop(),d=Object.keys(t[f]);for(let p=d.length,g=0;g<p;g++){const b=d[g],y=l[b];y.distance===-1&&(y.distance=l[f].distance+1,y.parent=f,c.unshift(b))}}return l}function o(u,l){return function(c){return l(u(c))}}function a(u,l){const c=[l[u].parent,u];let f=t[l[u].parent][u],d=l[u].parent;for(;l[d].parent;)c.unshift(l[d].parent),f=o(t[l[d].parent][d],f),d=l[d].parent;return f.conversion=c,f}return ba=function(u){const l=n(u),c={},f=Object.keys(l);for(let d=f.length,p=0;p<d;p++){const g=f[p];l[g].parent!==null&&(c[g]=a(g,l))}return c},ba}var va,uc;function u_(){if(uc)return va;uc=1;const t=of(),r=s_(),n={},o=Object.keys(t);function a(l){const c=function(...f){const d=f[0];return d==null?d:(d.length>1&&(f=d),l(f))};return"conversion"in l&&(c.conversion=l.conversion),c}function u(l){const c=function(...f){const d=f[0];if(d==null)return d;d.length>1&&(f=d);const p=l(f);if(typeof p=="object")for(let g=p.length,b=0;b<g;b++)p[b]=Math.round(p[b]);return p};return"conversion"in l&&(c.conversion=l.conversion),c}return o.forEach(l=>{n[l]={},Object.defineProperty(n[l],"channels",{value:t[l].channels}),Object.defineProperty(n[l],"labels",{value:t[l].labels});const c=r(l);Object.keys(c).forEach(d=>{const p=c[d];n[l][d]=u(p),n[l][d].raw=a(p)})}),va=n,va}Di.exports;var lc;function l_(){return lc||(lc=1,(function(t){const r=(p,g)=>(...b)=>`\x1B[${p(...b)+g}m`,n=(p,g)=>(...b)=>{const y=p(...b);return`\x1B[${38+g};5;${y}m`},o=(p,g)=>(...b)=>{const y=p(...b);return`\x1B[${38+g};2;${y[0]};${y[1]};${y[2]}m`},a=p=>p,u=(p,g,b)=>[p,g,b],l=(p,g,b)=>{Object.defineProperty(p,g,{get:()=>{const y=b();return Object.defineProperty(p,g,{value:y,enumerable:!0,configurable:!0}),y},enumerable:!0,configurable:!0})};let c;const f=(p,g,b,y)=>{c===void 0&&(c=u_());const T=y?10:0,P={};for(const[B,D]of Object.entries(c)){const H=B==="ansi16"?"ansi":B;B===g?P[H]=p(b,T):typeof D=="object"&&(P[H]=p(D[g],T))}return P};function d(){const p=new Map,g={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};g.color.gray=g.color.blackBright,g.bgColor.bgGray=g.bgColor.bgBlackBright,g.color.grey=g.color.blackBright,g.bgColor.bgGrey=g.bgColor.bgBlackBright;for(const[b,y]of Object.entries(g)){for(const[T,P]of Object.entries(y))g[T]={open:`\x1B[${P[0]}m`,close:`\x1B[${P[1]}m`},y[T]=g[T],p.set(P[0],P[1]);Object.defineProperty(g,b,{value:y,enumerable:!1})}return Object.defineProperty(g,"codes",{value:p,enumerable:!1}),g.color.close="\x1B[39m",g.bgColor.close="\x1B[49m",l(g.color,"ansi",()=>f(r,"ansi16",a,!1)),l(g.color,"ansi256",()=>f(n,"ansi256",a,!1)),l(g.color,"ansi16m",()=>f(o,"rgb",u,!1)),l(g.bgColor,"ansi",()=>f(r,"ansi16",a,!0)),l(g.bgColor,"ansi256",()=>f(n,"ansi256",a,!0)),l(g.bgColor,"ansi16m",()=>f(o,"rgb",u,!0)),g}Object.defineProperty(t,"exports",{enumerable:!0,get:d})})(Di)),Di.exports}var xa,cc;function c_(){return cc||(cc=1,xa={stdout:!1,stderr:!1}),xa}var _a,fc;function f_(){return fc||(fc=1,_a={stringReplaceAll:(n,o,a)=>{let u=n.indexOf(o);if(u===-1)return n;const l=o.length;let c=0,f="";do f+=n.substr(c,u-c)+o+a,c=u+l,u=n.indexOf(o,c);while(u!==-1);return f+=n.substr(c),f},stringEncaseCRLFWithFirstIndex:(n,o,a,u)=>{let l=0,c="";do{const f=n[u-1]==="\r";c+=n.substr(l,(f?u-1:u)-l)+o+(f?`\r
`:`
`)+a,l=u+1,u=n.indexOf(`
`,l)}while(u!==-1);return c+=n.substr(l),c}}),_a}var ka,hc;function h_(){if(hc)return ka;hc=1;const t=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,r=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,n=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,o=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,a=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function u(d){const p=d[0]==="u",g=d[1]==="{";return p&&!g&&d.length===5||d[0]==="x"&&d.length===3?String.fromCharCode(parseInt(d.slice(1),16)):p&&g?String.fromCodePoint(parseInt(d.slice(2,-1),16)):a.get(d)||d}function l(d,p){const g=[],b=p.trim().split(/\s*,\s*/g);let y;for(const T of b){const P=Number(T);if(!Number.isNaN(P))g.push(P);else if(y=T.match(n))g.push(y[2].replace(o,(B,D,H)=>D?u(D):H));else throw new Error(`Invalid Chalk template style argument: ${T} (in style '${d}')`)}return g}function c(d){r.lastIndex=0;const p=[];let g;for(;(g=r.exec(d))!==null;){const b=g[1];if(g[2]){const y=l(b,g[2]);p.push([b].concat(y))}else p.push([b])}return p}function f(d,p){const g={};for(const y of p)for(const T of y.styles)g[T[0]]=y.inverse?null:T.slice(1);let b=d;for(const[y,T]of Object.entries(g))if(Array.isArray(T)){if(!(y in b))throw new Error(`Unknown Chalk style: ${y}`);b=T.length>0?b[y](...T):b[y]}return b}return ka=(d,p)=>{const g=[],b=[];let y=[];if(p.replace(t,(T,P,B,D,H,z)=>{if(P)y.push(u(P));else if(D){const W=y.join("");y=[],b.push(g.length===0?W:f(d,g)(W)),g.push({inverse:B,styles:c(D)})}else if(H){if(g.length===0)throw new Error("Found extraneous } in Chalk template literal");b.push(f(d,g)(y.join(""))),y=[],g.pop()}else y.push(z)}),b.push(y.join("")),g.length>0){const T=`Chalk template literal is missing ${g.length} closing bracket${g.length===1?"":"s"} (\`}\`)`;throw new Error(T)}return b.join("")},ka}var Sa,dc;function d_(){if(dc)return Sa;dc=1;const t=l_(),{stdout:r,stderr:n}=c_(),{stringReplaceAll:o,stringEncaseCRLFWithFirstIndex:a}=f_(),{isArray:u}=Array,l=["ansi","ansi","ansi256","ansi16m"],c=Object.create(null),f=(W,O={})=>{if(O.level&&!(Number.isInteger(O.level)&&O.level>=0&&O.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const E=r?r.level:0;W.level=O.level===void 0?E:O.level};class d{constructor(O){return p(O)}}const p=W=>{const O={};return f(O,W),O.template=(...E)=>H(O.template,...E),Object.setPrototypeOf(O,g.prototype),Object.setPrototypeOf(O.template,O),O.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},O.template.Instance=d,O.template};function g(W){return p(W)}for(const[W,O]of Object.entries(t))c[W]={get(){const E=P(this,T(O.open,O.close,this._styler),this._isEmpty);return Object.defineProperty(this,W,{value:E}),E}};c.visible={get(){const W=P(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:W}),W}};const b=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(const W of b)c[W]={get(){const{level:O}=this;return function(...E){const U=T(t.color[l[O]][W](...E),t.color.close,this._styler);return P(this,U,this._isEmpty)}}};for(const W of b){const O="bg"+W[0].toUpperCase()+W.slice(1);c[O]={get(){const{level:E}=this;return function(...U){const Q=T(t.bgColor[l[E]][W](...U),t.bgColor.close,this._styler);return P(this,Q,this._isEmpty)}}}}const y=Object.defineProperties(()=>{},{...c,level:{enumerable:!0,get(){return this._generator.level},set(W){this._generator.level=W}}}),T=(W,O,E)=>{let U,Q;return E===void 0?(U=W,Q=O):(U=E.openAll+W,Q=O+E.closeAll),{open:W,close:O,openAll:U,closeAll:Q,parent:E}},P=(W,O,E)=>{const U=(...Q)=>u(Q[0])&&u(Q[0].raw)?B(U,H(U,...Q)):B(U,Q.length===1?""+Q[0]:Q.join(" "));return Object.setPrototypeOf(U,y),U._generator=W,U._styler=O,U._isEmpty=E,U},B=(W,O)=>{if(W.level<=0||!O)return W._isEmpty?"":O;let E=W._styler;if(E===void 0)return O;const{openAll:U,closeAll:Q}=E;if(O.indexOf("\x1B")!==-1)for(;E!==void 0;)O=o(O,E.close,E.open),E=E.parent;const ee=O.indexOf(`
`);return ee!==-1&&(O=a(O,Q,U,ee)),U+O+Q};let D;const H=(W,...O)=>{const[E]=O;if(!u(E)||!u(E.raw))return O.join(" ");const U=O.slice(1),Q=[E.raw[0]];for(let ee=1;ee<E.length;ee++)Q.push(String(U[ee-1]).replace(/[{}\\]/g,"\\$&"),String(E.raw[ee]));return D===void 0&&(D=h_()),D(W,Q.join(""))};Object.defineProperties(g.prototype,c);const z=g();return z.supportsColor=r,z.stderr=g({level:n?n.level:0}),z.stderr.supportsColor=n,Sa=z,Sa}var p_=d_();const g_=gc(p_);function m_(t,r={}){if(!Array.isArray(t))throw new TypeError("Expected an array");let n=["‚ñÅ","‚ñÇ","‚ñÉ","‚ñÑ","‚ñÖ","‚ñÜ","‚ñá","‚ñà"];const o=[[5,5,4],[5,5,3],[5,5,0],[5,4,0],[5,3,0],[5,2,0],[5,1,0],[5,0,0]],a=t.filter(c=>Number.isFinite(c)),u=typeof r.minimum=="number"?r.minimum:typeof r.maximum=="number"?0:Math.min(...a),l=typeof r.maximum=="number"?r.maximum:Math.max(...a);return u===l&&l!==0&&(n=[n[4]]),t.map(c=>{if(!Number.isFinite(c))return" ";let f;return u===l?f=0:f=Math.ceil((c-u)/(l-u)*n.length)-1,f<0&&(f=0),r.style==="fire"?g_.rgb(...o[f])(n[f]):n[f]}).join("")}const Ai=Xt(Jt.StatisticsService);class y_{descriptiveStatistics(r,n){const o=r.filter(a=>typeof a=="number"&&!isNaN(a));if(o.length===0)return Ai.warn("No valid numeric values found for descriptive statistics"),null;try{const a=Ra(o,.25),u=Ra(o,.75),l={count:o.length,sum:Zc(o),mean:ef(o),median:r_(o),mode:e_(o),min:tc(o),max:nc(o),range:nc(o)-tc(o),variance:tf(o),standardDeviation:Xx(o),q1:a,q3:u,iqr:u-a};if(n?.includeVisualization){const c=n.chartHeight||10,f=this.createSparkline(o),d=this.createLineChart(o,c);l.visualization=`
**Sparkline:** ${f}

**Trend Chart:**
\`\`\`
${d}
\`\`\`
`.trim()}return Ai.dev("Calculated descriptive statistics",{stats:l}),l}catch(a){return Ai.error("Error calculating descriptive statistics",{error:a}),null}}booleanStatistics(r){const n=r.filter(T=>T===!0).length,o=r.filter(T=>T===!1).length,a=r.filter(T=>T===null).length,u=r.length;let l=0,c=0,f=0,d=null,p=0,g=0;for(const T of r)T===!0?(p++,g=0):T===!1&&(g++,p=0),l=Math.max(l,p),c=Math.max(c,g);const b=r[r.length-1];b===!0?(f=p,d="true"):b===!1&&(f=g,d="false");const y={count:u,trueCount:n,falseCount:o,nullCount:a,truePercentage:u>0?n/u*100:0,falsePercentage:u>0?o/u*100:0,longestTrueStreak:l,longestFalseStreak:c,currentStreak:f,currentStreakType:d};return Ai.dev("Calculated boolean statistics",{stats:y}),y}formatDescriptiveStats(r){return`
**Count:** ${r.count}
**Sum:** ${r.sum.toFixed(2)}
**Mean:** ${r.mean.toFixed(2)}
**Median:** ${r.median.toFixed(2)}
**Mode:** ${Array.isArray(r.mode)?r.mode.join(", "):r.mode}
**Min:** ${r.min.toFixed(2)}
**Max:** ${r.max.toFixed(2)}
**Range:** ${r.range.toFixed(2)}
**Std Dev:** ${r.standardDeviation.toFixed(2)}
**Variance:** ${r.variance.toFixed(2)}
**Q1 (25%):** ${r.q1.toFixed(2)}
**Q3 (75%):** ${r.q3.toFixed(2)}
**IQR:** ${r.iqr.toFixed(2)}
`.trim()}formatBooleanStats(r,n){const o=r.currentStreakType==="true"?"‚ú®":"‚ùÑÔ∏è";return`
**${n} Statistics**
- Total tracked: ${r.count} days
- Success rate: ${r.truePercentage.toFixed(1)}% (${r.trueCount}/${r.count})
- Longest streak: ${r.longestTrueStreak} days üèÜ
- Current streak: ${o} ${r.currentStreak} days
`.trim()}createLineChart(r,n=10,o){if(r.length===0)return"No data to display";const a={height:n};return o&&(a.width=o),o_.plot(r,a)}createSparkline(r){return r.length===0?"‚Äî":m_(r)}createBooleanBarChart(r,n=30){return r.slice(-n).map(u=>u===!0?"‚úÖ":u===!1?"‚ùå":"‚¨ú").join("")}createBooleanPieChart(r,n){return`\`\`\`mermaid
pie title ${n}
    "Completed" : ${r.trueCount}
    "Skipped" : ${r.falseCount}
    ${r.nullCount>0?`"Not Tracked" : ${r.nullCount}`:""}
\`\`\``}createBooleanVisualReport(r,n,o={}){const{showSparkline:a=!0,showBarChart:u=!0,showAsciiChart:l=!0,showPieChart:c=!1,dates:f=[]}=o,d=this.booleanStatistics(r),p=r.map(b=>b===!0?1:0);let g=`## üìä ${n}

`;if(g+=this.formatBooleanStats(d,n)+`

`,a&&(g+=`**Trend:** ${this.createSparkline(p)}

`),u&&(g+=`**Last ${Math.min(r.length,30)} days:**
`,g+=this.createBooleanBarChart(r,30)+`

`,f.length>0)){const b=f[0],y=f[f.length-1];g+=`*From ${b} to ${y}*

`}return l&&p.length>=3&&(g+="**Trend Chart:**\n```\n",g+=this.createLineChart(p,6),g+="\n```\n\n"),c&&(g+=this.createBooleanPieChart(d,`${n} Distribution`)+`

`),g}createNumericVisualReport(r,n,o={}){const{showSparkline:a=!0,showAsciiChart:u=!0,showStats:l=!0}=o,c=this.descriptiveStatistics(r);if(!c)return`## ${n}

No data available`;let f=`## üìà ${n}

`;return l&&(f+=this.formatDescriptiveStats(c)+`

`),a&&(f+=`**Trend:** ${this.createSparkline(r)}

`),u&&(f+="**Trend Chart:**\n```\n",f+=this.createLineChart(r,10),f+="\n```\n\n"),f}}const Bi=new y_;function w_(t){const r=new Date;switch(t.periodicityUnit){case Fe.Day:return r.toISOString().split("T")[0];case Fe.Week:const n=r.getDay(),o=new Date(r);return o.setDate(r.getDate()-(n===0?6:n-1)),o.toISOString().split("T")[0];case Fe.Month:return`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-01`;case Fe.Quarter:const u=Math.floor(r.getMonth()/3)*3+1;return`${r.getFullYear()}-${String(u).padStart(2,"0")}-01`;case Fe.Year:return`${r.getFullYear()}-01-01`;case Fe.Decade:return`${Math.floor(r.getFullYear()/10)*10}-01-01`;default:return r.toISOString().split("T")[0]}}function b_(t,r){const n=new Date;switch(r){case Fe.Day:const o=new Date(n);return o.setDate(n.getDate()-t),o.toISOString().split("T")[0];case Fe.Week:const a=new Date(n);return a.setDate(n.getDate()-t*7),a.toISOString().split("T")[0];case Fe.Month:const u=new Date(n);return u.setMonth(n.getMonth()-t),u.toISOString().split("T")[0];case Fe.Quarter:const l=new Date(n);return l.setMonth(n.getMonth()-t*3),l.toISOString().split("T")[0];case Fe.Year:const c=new Date(n);return c.setFullYear(n.getFullYear()-t),c.toISOString().split("T")[0];default:return n.toISOString().split("T")[0]}}async function v_(t){const r=w_(t);return(await Kt.getInputsByName("almostDailyReport",t.id)).filter(u=>u.reportDate&&u.reportDate>=r).filter(u=>u.value===!0).length}async function x_(t){if(!t.maxLimit)return null;const r=b_(t.maxLimit.periodicityMultiplier,t.maxLimit.periodicityUnit),a=(await Kt.getInputsByName("almostDailyReport",t.id)).filter(u=>u.reportDate&&u.reportDate>=r).filter(u=>u.value===!0).length;return{current:a,max:t.maxLimit.count,percentage:a/t.maxLimit.count*100}}async function __(){const t="habitTracking",r=new Ge(t),o=Ue.habits.filter(f=>f.active),u=(await Promise.all(o.map(async f=>{const d=await v_(f),p=await x_(f);return{habit:f,completedCount:d,isComplete:d>=f.targetCount,shouldShow:f.permanent||d<f.targetCount,maxLimitProgress:p}}))).filter(f=>f.shouldShow),l=u.map(f=>f.habit.id);let c=!1;try{const f=await Kt.getInputsLastNReports("almostDailyReport",l,10);if(c=f.length>0,c){r._md("## üìä Habit Statistics (Last 10 Reports)");for(const{habit:d}of u){const p=f.filter(g=>g.inputName===d.id);if(p.length>=2){const g=p.map(T=>T.value),b=Bi.booleanStatistics(g),y=Bi.createSparkline(g.map(T=>T===!0?1:0));r._md(`**${d.label}:** ${b.truePercentage.toFixed(0)}% (${b.trueCount}/${b.count}) ¬∑ ${y} ¬∑ ${b.currentStreakType==="true"?"‚ú®":"‚ùÑÔ∏è"} ${b.currentStreak} streak`)}}r._divider()}}catch(f){console.error("Failed to fetch habit statistics:",f)}return r._md("## ‚úÖ Today's Habits (üìå CORE - 1 min)"),r._foldable(`**Atomic Habits** ‚Äî every habit = Cue ‚Üí Craving ‚Üí Response ‚Üí Reward.
**Taoist Wu Wei** ‚Äî not perfection, but flow. Missed habits are okay‚Äîjust return gently.
**Power of Habit** ‚Äî the cue and reward make habits stick, not willpower alone.

**Check when complete:**`),u.length>0?(u.forEach(({habit:f,completedCount:d,maxLimitProgress:p})=>{const g=f.targetCount===1&&f.periodicityMultiplier===1&&f.periodicityUnit===Fe.Day;let b;if(g)b=f.label;else{let y;f.periodicityMultiplier===1?y=f.periodicityUnit:y=`${f.periodicityMultiplier} ${f.periodicityUnit}s`,b=`${f.label} (${d}/${f.targetCount} per ${y})`}if(r._boolean(f.id,b),r._md(`*Cue*: ${f.cue} ¬∑ *Reward*: ${f.reward}`),p){const{current:y,max:T,percentage:P}=p;let B;f.maxLimit.periodicityMultiplier===1?B=f.maxLimit.periodicityUnit:B=`${f.maxLimit.periodicityMultiplier} ${f.maxLimit.periodicityUnit}s`;const D=20,H=Math.round(y/T*D),z=D-H,W="‚ñà".repeat(H)+"‚ñë".repeat(z);let O="‚úÖ",E="";P>=100?(O="üö´",E=" **LIMIT REACHED**"):P>=80?(O="‚ö†Ô∏è",E=" **Approaching limit**"):P>=60&&(O="‚ö°"),r._md(`${O} **Limit tracker:** ${y}/${T} times per ${B} ¬∑ ${W} ${P.toFixed(0)}%${E}`)}}),r._md("> **Wisdom** ‚Äî missing once is an accident. Missing twice is the start of a pattern. Return gently.")):r._md("*üéâ All habits completed for this period! Well done!*"),r.render()}async function k_(){const t="messageFromYesterday",r=new Ge(t),n=await Kt.getInputsLastNReports("almostDailyReport",["message_for_tomorrow","tomorrow_priority"],1),o=n.find(c=>c.inputName==="message_for_tomorrow"),a=n.find(c=>c.inputName==="tomorrow_priority"),u=o&&o.value?.trim().length>0,l=a&&a.value?.trim().length>0;if(!u&&!l)return"";if(r._md("## üì® Message from Your Past Self (‚≠ê RECOMMENDED - 30 sec)"),l){const c=a.value;r._md(`### üéØ Today's Priority (set ${a.reportDate})`),r._md(`> ${c}`)}if(u){const c=o.value;r._md(`### üíå Message (from ${o.reportDate})`),r._md(`> ${c}`)}return r._foldable("Your past self sent you guidance! Take a moment to reflect on it.","A Gift from Yesterday"),r.render()}function S_(){const t="accomplishmentsAndObstacles",r=new Ge(t);return r._md("## üìä Wins & Obstacles (‚≠ê RECOMMENDED - 4-6 min)"),r._foldable(`**The Stoic Path** ‚Äî "The obstacle is the way." Every setback is training.

_"The impediment to action advances action. What stands in the way becomes the way."_ ‚Äî Marcus Aurelius

**Three Questions for Obstacles:**
1. **What happened?** (The external event‚Äînot in your control)
2. **How did I respond?** (Your reaction‚Äîentirely in your control)
3. **How will I overcome this?** (Your action plan‚Äîgrowth through adversity)

**Atomic Habits:** Every obstacle reveals a system flaw. Fix the system, not just the symptom.
**Growth Mindset:** You haven't mastered this *yet*. Struggle = growth happening.

Remember: You control your **effort, attitude, and response**‚Äînot outcomes.`),r._fancyTitle("Wins & Accomplishments","üèÜ"),r._inputLabel("My Win Today","*What was my proudest accomplishment? What effort/virtue made it possible?*"),r._text("wins_combined","","e.g., Stayed calm when criticized. I practiced patience by taking 3 deep breaths first and remembering it's not personal."),r._fancyTitle("Obstacles & The Way Forward","‚öîÔ∏è"),r._inputLabel("My Obstacle & Learning","*What happened? How did I respond? What did I learn? How will I use this?*"),r._text("obstacle_combined","","e.g., My proposal was rejected. Initially angry, then realized it's not personal. Learned I'm too attached to approval. Will practice not seeking validation and revise with feedback to make it stronger."),r._inputLabel("My Implementation Intention","(If this happens again, I will...) *If [OBSTACLE], then I will [RESPONSE]*"),r._text("if_then_plan","","e.g., If criticized, I'll pause 10 seconds, say 'thank you,' then decide if it's useful"),r._md("> **Stoic Wisdom**: This obstacle is not blocking your path‚Äîit IS the path. It's revealing where you need to grow."),r.render()}function I_(){const t="attentionAndWillpower",r=new Ge(t);return r._md("## üéØ Attention & Willpower Check (üí° OPTIONAL - 3-5 min)"),r._foldable(`**Hyperfocus** ‚Äî attention is your most valuable resource. Protect it fiercely.
**The Willpower Instinct** ‚Äî willpower depletes throughout the day and needs recovery (rest, breaks, nature).
**Atomic Habits** ‚Äî environment shapes behavior more than motivation.

Track patterns. Design better environments. Restore your willpower.`),r._fancyTitle("Attention Reflection","üëÅÔ∏è"),r._inputLabel("What distracted me most today?"),r._text("main_distraction","","e.g., Social media notifications, colleague interruptions"),r._inputLabel("When was I most focused?","(Flow state moments)"),r._text("flow_moments","","e.g., Morning deep work session from 9-11am"),r._inputLabel("What made my focus possible?","(Environment, time, task type)"),r._text("flow_enablers","","e.g., Quiet office, early morning energy, challenging but doable task"),r._fancyTitle("Willpower Reflection","üí™"),r._inputLabel("What was my biggest temptation/willpower challenge?"),r._text("willpower_challenge","","e.g., Urge to check phone during work, skip workout"),r._inputLabel("What time did my willpower feel weakest?","(Morning/afternoon/evening)"),r._text("willpower_time","","e.g., Late afternoon around 4pm"),r._inputLabel("Did I resist or give in?","(No judgment‚Äîjust awareness)"),r._text("willpower_outcome","","e.g., Gave in after lunch, resisted in the morning"),r._inputLabel("How did I restore my willpower today?","(Rest, breaks, nature, nourishment)"),r._text("willpower_recovery","","e.g., Took a walk outside, ate a healthy snack, got good sleep"),r._inputLabel("Environmental fix","What can I change tomorrow to make the right choice easier?"),r._text("environment_fix","","e.g., Put phone in another room, lay out workout clothes tonight"),r._md("> **Insight** ‚Äî you can't control urges, but you can control your environment. Make good choices the easy choices."),r.render()}function C_(){const t="gratitudeAndSavoring",r=new Ge(t);return r._md("## üôè Gratitude & Savoring (‚≠ê RECOMMENDED - 3-7 min)"),r._foldable(`**Three Good Things Intervention** ‚Äî writing WHY things went well is crucial for wellbeing.
**Stoicism** ‚Äî negative visualization‚Äîappreciate what you have by imagining its loss.
**Positive Psychology** ‚Äî gratitude is one of the strongest wellbeing predictors.

Savor simple pleasures: friendship, beauty, learning, nature. Your role matters.`),r._md("### Three Good Things Today"),r._inputLabel("1. Good Thing #1","*What happened? Why was it good? What was your role?*"),r._richText("gratitude_1","","e.g., Had a great conversation with a friend. Felt understood and connected. I reached out and asked how they were doing."),r._divider(),r._inputLabel("2. Good Thing #2","*What happened? Why was it good? What was your role?*"),r._richText("gratitude_2","","e.g., Enjoyed a beautiful sunset. Felt peaceful and present. I paused my work to step outside and notice it."),r._divider(),r._inputLabel("3. Good Thing #3","*What happened? Why was it good? What was your role?*"),r._richText("gratitude_3","","e.g., Made progress on a difficult task. Felt capable and proud of my effort. I stayed focused and didn't give up."),r._md("> **Practice** ‚Äî before sleep, briefly imagine losing one thing you're grateful for. Then appreciate that you still have it."),r.render()}function T_(){const t="mindfulMoment",r=new Ge(t);return r._md("## üßò Mindful Moment (üí° OPTIONAL - 2-3 min)"),r._foldable(`**Present Moment Awareness** ‚Äî The antidote to anxiety

Anxiety lives in the future (what if?). Regret lives in the past (if only...). Peace lives in NOW.

**The Problem** ‚Äî your mind is NEVER here. You eat lunch while planning dinner. You're with friends while mentally at work. You miss your ENTIRE LIFE because you're always somewhere else.

**The Solution** ‚Äî train yourself to return to the present moment‚Äîover and over.

**What this practice does:**
- **Reduces anxiety** ‚Äî the present moment is usually fine. Suffering is in your head.
- **Increases joy** ‚Äî life's beauty exists NOW, not in memory or anticipation
- **Improves focus** ‚Äî your attention is your most valuable resource
- **Creates calm** ‚Äî presence is inherently peaceful
- **Builds gratitude** ‚Äî you notice what you usually miss

**Why it works** (neuroscience):
Your brain has two modes:
- **Default Mode** (wandering mind) ‚Äî predicts, plans, worries, ruminates = stress
- **Present Mode** (focused attention) ‚Äî observes, senses, experiences = calm

This practice trains you to shift from Default to Present mode at will.

**How to practice:**
This is NOT about emptying your mind. It's about NOTICING when you were present today, and appreciating that moment.

When you recall being fully present‚Äîeven for 5 seconds‚Äîyou're training your brain to recognize and seek presence.`,"Mindfulness Practice"),r._md("### Practice (2 minutes)"),r._md("**Step 1** ‚Äî ground yourself"),r._md("Close your eyes or soften your gaze. Take three slow, deep breaths. Feel your body in the chair."),r._md("**Step 2** ‚Äî recall one present moment"),r._md("Remember ONE moment from today when you were fully HERE ‚Äî no past, no future, just NOW:"),r._md("- Morning coffee warmth on your hands"),r._md("- A genuine laugh with someone"),r._md("- Sunlight on your skin"),r._md("- The taste of your lunch"),r._md("- Wind in your hair"),r._md("- A moment of quiet"),r._md("**Step 3** ‚Äî explore the memory"),r._md("Hold that memory. Notice the details:"),r._md("- What did you SEE? (Colors, light, movement)"),r._md("- What did you HEAR? (Sounds, silence, rhythm)"),r._md("- What did you FEEL? (Temperature, texture, sensation)"),r._md("- What did you SMELL? TASTE?"),r._md("**Step 4** ‚Äî appreciate"),r._md("That simple moment‚ÄîTHAT is life. Not achievements or plans. Just being fully alive, right here, right now."),r._boolean("mindful_pause_taken","I have taken a mindful pause",!1),r._md('> _"The present moment is all you ever have."_ ‚Äî Eckhart Tolle'),r._md('> _"When you wash the dishes, wash the dishes."_ ‚Äî Th√≠ch Nh·∫•t H·∫°nh'),r.render()}function E_(){const t="emotionAwareness",r=new Ge(t);return r._md("## üí≠ Emotion Awareness (üí° OPTIONAL - 3-5 min)"),r._foldable(`**Emotional Intelligence** ‚Äî recognizing emotions is the first step to managing them.
**Stoicism** ‚Äî you can't control feelings arising, but you can control your response.
**Neuroscience** ‚Äî naming emotions reduces their intensity (affect labeling).

No judgment‚Äîjust awareness and learning.`),r._md("### Today's Emotional Landscape"),r._inputLabel("What was the strongest emotion I felt today?"),r._text("strongest_emotion","","e.g., Frustration, joy, anxiety, pride"),r._inputLabel("What triggered it?"),r._text("emotion_trigger","","e.g., Criticism from colleague, completing a goal"),r._inputLabel("How did I respond?","(What did I do/say?)"),r._text("emotion_response","","e.g., Snapped back, withdrew, celebrated"),r._inputLabel("On reflection, was this in my control or outside my control?"),r._text("emotion_control_assessment","","e.g., The trigger was outside; my response was in my control"),r._inputLabel("What would my 'wise self' do next time?"),r._text("emotion_wise_response","","e.g., Pause and breathe before responding, express needs calmly"),r._md(`> **Practice** ‚Äî when strong emotions arise, pause and label: _"I'm feeling [emotion]."_ This creates space between feeling and reaction.`),r.render()}function A_(){return new Date().toISOString().split("T")[0]}function P_(t){const r=new Date("2020-01-01"),o=new Date(t).getTime()-r.getTime();return Math.floor(o/(1e3*60*60*24))}function M_(t){if(!t.periodicity)return!0;const r=A_();return P_(r)%t.periodicity===0}async function O_(){const t="permaPlus",r=new Ge(t),n=Ue.wellbeingParameters.filter(g=>g.active),o=n.filter(M_),a=new Map;o.forEach(g=>{g.periodicity&&a.set(g.id,g.periodicity)});const u=n.map(g=>g.id);let l=new Map,c=new Map,f=new Map,d={first:"",last:"",reportCount:0};try{const g=await Kt.getInputsLastNReports("almostDailyReport",u,20);if(g.length>0){const b=Array.from(new Set(g.map(y=>y.reportDate||""))).sort();d={first:b[0],last:b[b.length-1],reportCount:b.length}}n.forEach(b=>{const y=g.filter(T=>T.inputName===b.id).map(T=>{const P=Array.isArray(T.value)?T.value[0]:T.value;return typeof P=="string"?parseFloat(P):P}).filter(T=>!isNaN(T));if(l.set(b.id,y),y.length>0){const T=y.slice(-5),P=T.reduce((D,H)=>D+H,0)/T.length;c.set(b.id,P);const B=y.reduce((D,H)=>D+H,0)/y.length;f.set(b.id,B)}})}catch(g){console.error("Failed to fetch PERMA historical data:",g)}r._md("## üíö PERMA+8 Wellbeing Check (üìå CORE - 2-3 min)"),r._foldable(`**PERMA+8 Model**: Comprehensive wellbeing framework covering 13 dimensions:

**Core PERMA:**
- Positive Emotions, Engagement, Relationships, Meaning, Accomplishment

**Body & Physical:**
- Sleep Quality, Embodiment (body acceptance), Physical Pleasure, Touch & Intimacy, Physical Condition

**Life Context:**
- Mindset, Environment, Economic Security

Rate honestly‚Äîawareness is the first step to change.

**Rate each dimension** (3 = Great, 2 = Adequate, 1 = Struggling):`);const p=[{label:"3 - Great",value:"3"},{label:"2 - Adequate",value:"2"},{label:"1 - Struggling",value:"1"}];if(o.forEach(g=>{const b=c.get(g.id),y=b!==void 0?` (last 5 reports: ${b.toFixed(1)})`:"",T=g.periodicity?` *(shown every ${g.periodicity} days)*`:"";r._md(`### ${g.label}${y}${T}`),r._md(`*${g.info}*`),r._multiCheckboxSC(g.id,p,void 0,!1)}),l.size>0&&Array.from(l.values()).some(g=>g.length>=3)){r._themedDivider("Wellbeing Trends","üìä");const g=[];if(l.forEach(b=>{g.push(...b)}),g.length>0){const b=g.reduce((P,B)=>P+B,0)/g.length,y=Bi.createSparkline(Array.from(l.values())[0]);r._md(`**Overall Wellbeing (last ${d.reportCount} reports): ${b.toFixed(1)}/3.0** ${y}`),d.first&&d.last&&r._md(`*Data from ${d.first} to ${d.last}*`);const T=n.map(P=>({param:P,avg:f.get(P.id)||0,dataPoints:l.get(P.id)?.length||0})).filter(P=>P.dataPoints>=3).sort((P,B)=>P.avg-B.avg);if(T.length>0){const P=T[0],B=T[T.length-1];r._md("**Insights:**"),P.avg<2&&r._md(`- ‚ö†Ô∏è **Needs attention**: ${P.param.label} (avg: ${P.avg.toFixed(1)}) ‚Äî Consider prioritizing this area`),B.avg>=2.5&&r._md(`- ‚ú® **Strength area**: ${B.param.label} (avg: ${B.avg.toFixed(1)}) ‚Äî Keep up the good work!`),r._md(`**Trends (last ${d.reportCount} reports):**`),n.forEach(D=>{const H=l.get(D.id);if(H&&H.length>=3){const z=f.get(D.id)||0,W=Bi.createSparkline(H),O=H.length>=2?H[H.length-1]>H[H.length-2]?"‚Üó":H[H.length-1]<H[H.length-2]?"‚Üò":"‚Üí":"‚Üí";r._md(`- ${D.label}: ${z.toFixed(1)} ${W} ${O}`)}})}}}return r._divider(),r._inputLabel("Quick Reflection","Which area needs attention tomorrow?"),r._text("perma_focus_tomorrow","","e.g., Relationships, Physical Wellbeing..."),r.render()}function D_(){const t="eveningReflection",r=new Ge(t);return r._md("## üåô Evening Reflection (‚≠ê RECOMMENDED - 2-3 min)"),r._foldable(`**The Stoic Evening Review** ‚Äî Ancient wisdom for modern peace

The Stoics ended each day with self-examination. Not to judge themselves harshly, but to **learn, release, and sleep peacefully**.

**The Problem** ‚Äî most people replay their day with regret or worry. They obsess over what they said, what went wrong, what others think. They carry the whole day into their sleep‚Äîand wake up still carrying it.

**The Stoic Solution** ‚Äî examine your day through the lens of CONTROL. Did you do your best with what you COULD control? If yes‚Äîpeace. If no‚Äîlearn and release.

**What this practice does:**
- **Ends the day cleanly** ‚Äî nothing carried into tomorrow that doesn't belong
- **Promotes learning** ‚Äî every day becomes data for improvement
- **Reduces rumination** ‚Äî you examined it once, mindfully. No need to replay endlessly.
- **Cultivates self-compassion** ‚Äî you did your best with what you knew and what you could control
- **Improves sleep** ‚Äî a peaceful mind sleeps deeply

**The Daily Question** (from Marcus Aurelius):
Not "Was I perfect?" but "Did I show up with virtue?"

**How to practice:**
Take 2 minutes. Review your day through the Dichotomy of Control:
- What was IN your control? (Your actions, responses, effort, character)
- What was NOT in your control? (Outcomes, other people, circumstances)
- Did you do your best with what you COULD control?

Then: learn if needed. Release what wasn't yours. Sleep in peace.`,"Stoic Review"),r._inputLabel("The Stoic Evening Question:","_Did I do my best with what was in my control today?_"),r._multiCheckboxSC("stoic_evening_reflection",[{label:"Yes - I showed up with virtue",value:"virtue"},{label:"No - But I learned something valuable",value:"learned"},{label:"Partially - Progress, not perfection",value:"progress"}],void 0,!1),r._inputLabel("What's one thing I'm better at today than yesterday?","Even 1% improvement compounds."),r._text("daily_improvement","","e.g., More patient, better listener, clearer thinking"),r._boolean("evening_reflection_done","I have completed this evening reflection",!1),r._md('> _"When you lie down, review your day. What did I do well? What could I improve? What did I leave undone?"_ ‚Äî Epictetus'),r._md('> _"I release what I cannot control. I am grateful for this day."_'),r.render()}function F_(){const t="sleepPreparation",r=new Ge(t);return r._md("## üí§ Sleep Preparation (üí° OPTIONAL - 2-3 min)"),r._foldable(`**Atomic Habits**: Make tomorrow's good habits obvious and easy tonight.
**Sleep Science**: Evening routine signals the brain to prepare for rest.

Set yourself up for success tomorrow. Prepare your environment tonight.`,"Tomorrow's Setup"),r._md("### Make Tomorrow Easy"),r._inputLabel("What can I prepare tonight to make tomorrow easier?","_Examples: Lay out workout clothes, prep lunch, charge devices, set out book_"),r._text("tomorrow_prep_action","","e.g., Lay out gym clothes, prepare breakfast ingredients"),r._boolean("tomorrow_prep_done","I have prepared something for tomorrow",!1),r._md("### Sleep Environment"),r._boolean("sleep_environment_ready","I have prepared my sleep environment (devices away, room cool/dark)",!1),r._md('> _"Tomorrow is a new opportunity to live with wisdom, courage, and kindness."_'),r.render()}function L_(){const t="messageForTomorrow",r=new Ge(t);return r._md("## üíå Message & Intention for Tomorrow (üìå CORE - 2 min)"),r._foldable(`Set yourself up for success tomorrow with clarity and encouragement.

**Tomorrow's Priority**: What's the ONE thing that matters most? When and where will you do it?
**Message to Future Self**: A reminder, encouragement, or lesson you don't want to forget.

Keep it short and meaningful. Your future self will thank you. ÔøΩ`),r._inputLabel("Tomorrow's #1 Priority"),r._text("tomorrow_priority"),r._inputLabel("Message for Tomorrow"),r._richText("message_for_tomorrow"),r.render()}class R_{async shouldShowComponent(r,n){const o=new Date().getDay();if(n.includes(o))return!0;const u=await this.wasComponentShownYesterday(r),l=await this.wasComponentCompletedYesterday(r);return u&&!l}async wasComponentShownYesterday(r){try{const n=this.getYesterdayDate();return(await Kt.getInputsByName("almostDailyReport",r)).some(a=>a.reportDate===n)}catch(n){return console.error("Error checking if component was shown:",n),!1}}async wasComponentCompletedYesterday(r){try{const n=this.getYesterdayDate();return(await Kt.getInputsByName("almostDailyReport",r)).find(u=>u.reportDate===n)?.value===!0}catch(n){return console.error("Error checking if component was completed:",n),!1}}getYesterdayDate(){const r=new Date;return r.setDate(r.getDate()-1),r.toISOString().split("T")[0]}}const Ia=new R_;async function N_(){const t=[];t.push(await Ux()),t.push(`
---
`),t.push("# üåÖ MORNING: Set the Day"),t.push("*Win the morning, win the day. Start with intention and clarity.*"),t.push(`
---
`);const r=await k_();r&&t.push(r),t.push(Gx()),await Ia.shouldShowComponent("negative_visualization_done",[1,3,5])&&t.push(Vx()),t.push(Qx()),await Ia.shouldShowComponent("voluntary_discomfort_done",[1,3,5])&&t.push(jx()),t.push(`
---
`),t.push("# üìã DAILY HABITS"),t.push("*Small actions, repeated daily, create remarkable results.*"),t.push(`
---
`),t.push(await __()),t.push(`
---
`),t.push("# üåô EVENING: Reflect & Close the Day"),t.push("*Review your day with honesty and gratitude. Learn, grow, prepare.*"),t.push(`
---
`),t.push(S_()),t.push(I_()),t.push(C_()),await Ia.shouldShowComponent("mindful_pause_taken",[1,3,5])&&t.push(T_()),t.push(E_()),t.push(await O_()),t.push(D_()),t.push(F_()),t.push(L_()),Dr.write({type:"almostDailyReport",data:t.join(`
`)})}class B_{async backfillPeriodicParameters(r){const n=[];for(const o of r){const a=Ue.wellbeingParameters.find(f=>f.id===o.inputName&&f.active);if(!a||!a.periodicity){n.push(o);continue}const u=a.periodicity,l=o.reportDate,c=await this.getReportDatesInPast(u,l);for(const f of c)n.push({...o,reportDate:f});n.push(o)}return n}async getReportDatesInPast(r,n){const o=[];try{const a=await Kt.getReportInputs("almostDailyReport");for(let u=1;u<r;u++){const l=this.getDateDaysAgo(u,n);a.some(f=>f.reportDate===l)&&o.push(l)}}catch(a){console.error("Error fetching past report dates:",a)}return o}getDateDaysAgo(r,n){const o=new Date(n);return o.setDate(o.getDate()-r),o.toISOString().split("T")[0]}}const $_=new B_,Et=Xt(Jt.FileService);async function W_(){try{const t=`${Li(new Date,"dd.MM.yyyy")}.md`,r=await z_();Et.dev("Input collection and empty report cleanup completed");const n=xe.workspace.getLeavesOfType("markdown"),o=[];for(const l of n){const f=l.view.file;f&&(o.push(f.path),f.path.endsWith(t)&&(Et.dev("Closing today's note: "+f.path),await l.detach()))}Et.dev("Currently open files: "+o.join(", "));const a=`${Ue.projectDir}/${Ue.coreDir}`,u=xe.vault.getAbstractFileByPath(a);if(u&&"children"in u){const l=/^\d{2}\.\d{2}\.\d{4}\.md$/;for(const c of u.children)"extension"in c&&c.extension==="md"&&l.test(c.name)&&c.name!==t&&(Et.dev("Deleting old app-triggering note: "+c.path),await xe.vault.delete(c))}if(r){for(const[l,c]of Object.entries(r))if(c&&c.length>0){const f=await $_.backfillPeriodicParameters(c);await Kt.upsertReportInputs(l,f),Et.info(`Saved ${f.length} inputs (${c.length} original + ${f.length-c.length} backfilled) for ${l} to database`)}}await N_(),Et.info("Daily report built successfully")}catch(t){Et.error("Failed to run onStart:",t)}}async function z_(){try{Et.dev("Checking for empty reports from yesterday...");const t=await $v.collectFromYesterday();for(const[r,n]of Object.entries(t)){if(!n||n.length===0){Et.dev(`No inputs found for report: ${r}`);continue}if(n.every(a=>!!(a.value===null||a.value===void 0||typeof a.value=="string"&&a.value.trim()===""||Array.isArray(a.value)&&a.value.length===0||typeof a.value=="boolean"&&a.value===!1||typeof a.value=="number"&&a.value===0))){const a=Dr.reportFolders[r],u=await Dr._listFiles(a);if(u.length>0){const l=u.sort().reverse()[0],c=n[0];if(c&&l.includes(c.reportDate.replace(/-/g,""))&&l.includes(c.reportNumber)){const f=`${a}/${l}`,d=xe.vault.getAbstractFileByPath(f);d&&"extension"in d&&(Et.info(`Deleting empty report: ${l}`),await xe.vault.delete(d))}}}else Et.dev(`Report ${r} has content - keeping it`)}return t}catch(t){return Et.error("Failed to delete empty reports:",t),{}}}const Pi=Xt(Jt.FileService);async function q_(t,r){Pi.info("runPowerJournal started");const n=await Q0(r);q0(t,n),Pi.dev("Globals set, config loaded");try{await W_(),Pi.info("Power Journal workflow completed successfully")}catch(o){Pi.error("Error in Power Journal workflow",{error:o})}}module.exports=q_;
