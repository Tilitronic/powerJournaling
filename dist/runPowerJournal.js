"use strict";const Vt={ComponentBuilder:"ComponentBuilder",SavingService:"SavingService",TagsService:"TagsService",InputCreator:"InputCreator",FileService:"FileService",OnStart:"OnStart",InputCollector:"InputCollector",ValueExtractor:"ValueExtractor",DbService:"DbService",StatisticsService:"StatisticsService"},hy={[Vt.ComponentBuilder]:{dev:!1,info:!0,warn:!0,error:!0},[Vt.SavingService]:{dev:!0,info:!0,warn:!0,error:!0},[Vt.TagsService]:{dev:!1,info:!0,warn:!0,error:!0},[Vt.InputCreator]:{dev:!1,info:!0,warn:!0,error:!0},[Vt.FileService]:{dev:!0,info:!0,warn:!0,error:!0},[Vt.OnStart]:{dev:!0,info:!0,warn:!0,error:!0},[Vt.InputCollector]:{dev:!0,info:!0,warn:!0,error:!0},[Vt.ValueExtractor]:{dev:!0,info:!0,warn:!0,error:!0},[Vt.DbService]:{dev:!0,info:!0,warn:!0,error:!0},[Vt.StatisticsService]:{dev:!0,info:!0,warn:!0,error:!0}},Zn={reset:"\x1B[0m",bold:"\x1B[1m",gray:"\x1B[90m",purple:"\x1B[35m"},dy={dev:"\x1B[44m\x1B[37m",info:"\x1B[42m\x1B[30m",warn:"\x1B[43m\x1B[30m",error:"\x1B[41m\x1B[37m"},py={dev:"üõ†",info:"‚ÑπÔ∏è",warn:"‚ö†Ô∏è",error:"‚ùå"},ya={},zl=["\x1B[36m","\x1B[33m","\x1B[32m","\x1B[34m","\x1B[31m","\x1B[95m","\x1B[96m","\x1B[92m","\x1B[93m"];let ql=0;function gy(r){return ya[r]||(ya[r]=zl[ql%zl.length],ql++),ya[r]}class Za{constructor(t,n){this.logs=[],this.serviceConfig={},this.getConfig=t,this.prefix=n??"global"}setServiceConfig(t){this.serviceConfig=t}addLog(t,n,o){const a={timestamp:new Date,level:t,service:this.prefix,message:n,meta:o};if(this.logs.push(a),!((this.serviceConfig[this.prefix]??{})[t]??!0))return;const c=a.timestamp.toISOString().split("T")[1].split(".")[0],f=`${Zn.gray}${c}${Zn.reset}`,h=`${Zn.purple}[PJ]${Zn.reset}`,p=`${gy(this.prefix)}${Zn.bold}[${this.prefix}]${Zn.reset}`,g=`${dy[t]}[${py[t]} ${t.toUpperCase().padEnd(5)}]${Zn.reset}`,w=`${f} ${h}${p}${g} ${n}`;try{t==="warn"?console.warn(w,o??""):t==="error"?console.error(w,o??""):console.log(w,o??"")}catch{console.log(`${f} ${h}[${this.prefix}][${t.toUpperCase()}] ${n}`,o??"")}}dev(t,n){this.addLog("dev",t,n)}info(t,n){this.addLog("info",t,n)}warn(t,n){this.addLog("warn",t,n)}error(t,n){this.addLog("error",t,n)}getAllLogs(){return this.logs}withPrefix(t){const n=new Za(this.getConfig,t);return n.setServiceConfig(this.serviceConfig),n}}let st;function my(r,t){st=t}const Rc=new Za(()=>st);Rc.setServiceConfig(hy);function un(r){return Rc.withPrefix(r)}const ln=Vt,ke=app;var Wi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lc(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var qr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var yy=qr.exports,Yl;function wy(){return Yl||(Yl=1,(function(r,t){(function(){var n,o="4.17.21",a=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",h=500,p="__lodash_placeholder__",g=1,w=2,y=4,S=1,P=2,F=1,A=2,N=4,z=8,W=16,D=32,E=64,U=128,V=256,ee=512,de=30,X="...",Q=800,be=16,Ae=1,fe=2,Ve=3,Te=1/0,qe=9007199254740991,Wt=17976931348623157e292,_=NaN,Fe=4294967295,zt=Fe-1,I=Fe>>>1,bt=[["ary",U],["bind",F],["bindKey",A],["curry",z],["curryRight",W],["flip",ee],["partial",D],["partialRight",E],["rearg",V]],ut="[object Arguments]",Re="[object Array]",zn="[object AsyncFunction]",lt="[object Boolean]",Pt="[object Date]",kn="[object DOMException]",cn="[object Error]",rr="[object Function]",Vr="[object GeneratorFunction]",xt="[object Map]",In="[object Number]",Xr="[object Null]",At="[object Object]",jr="[object Promise]",Kr="[object Proxy]",Sn="[object RegExp]",vt="[object Set]",qn="[object String]",ir="[object Symbol]",ro="[object Undefined]",Yn="[object WeakMap]",R="[object WeakSet]",q="[object ArrayBuffer]",K="[object DataView]",ae="[object Float32Array]",ge="[object Float64Array]",rt="[object Int8Array]",qt="[object Int16Array]",_t="[object Int32Array]",fn="[object Uint8Array]",hn="[object Uint8ClampedArray]",je="[object Uint16Array]",Kt="[object Uint32Array]",Yt=/\b__p \+= '';/g,Ff=/\b(__p \+=) '' \+/g,Rf=/(__e\(.*?\)|\b__t\)) \+\n'';/g,hs=/&(?:amp|lt|gt|quot|#39);/g,ds=/[&<>"']/g,Lf=RegExp(hs.source),$f=RegExp(ds.source),Bf=/<%-([\s\S]+?)%>/g,Nf=/<%([\s\S]+?)%>/g,ps=/<%=([\s\S]+?)%>/g,Wf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,zf=/^\w*$/,qf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,io=/[\\^$.*+?()[\]{}|]/g,Yf=RegExp(io.source),oo=/^\s+/,Hf=/\s/,Uf=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Gf=/\{\n\/\* \[wrapped with (.+)\] \*/,Qf=/,? & /,Vf=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Xf=/[()=,{}\[\]\/\s]/,jf=/\\(\\)?/g,Kf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,gs=/\w*$/,Jf=/^[-+]0x[0-9a-f]+$/i,Zf=/^0b[01]+$/i,eh=/^\[object .+?Constructor\]$/,th=/^0o[0-7]+$/i,nh=/^(?:0|[1-9]\d*)$/,rh=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Jr=/($^)/,ih=/['\n\r\u2028\u2029\\]/g,Zr="\\ud800-\\udfff",oh="\\u0300-\\u036f",ah="\\ufe20-\\ufe2f",sh="\\u20d0-\\u20ff",ms=oh+ah+sh,ys="\\u2700-\\u27bf",ws="a-z\\xdf-\\xf6\\xf8-\\xff",uh="\\xac\\xb1\\xd7\\xf7",lh="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ch="\\u2000-\\u206f",fh=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",bs="A-Z\\xc0-\\xd6\\xd8-\\xde",xs="\\ufe0e\\ufe0f",vs=uh+lh+ch+fh,ao="['‚Äô]",hh="["+Zr+"]",_s="["+vs+"]",ei="["+ms+"]",ks="\\d+",dh="["+ys+"]",Is="["+ws+"]",Ss="[^"+Zr+vs+ks+ys+ws+bs+"]",so="\\ud83c[\\udffb-\\udfff]",ph="(?:"+ei+"|"+so+")",Cs="[^"+Zr+"]",uo="(?:\\ud83c[\\udde6-\\uddff]){2}",lo="[\\ud800-\\udbff][\\udc00-\\udfff]",or="["+bs+"]",Ts="\\u200d",Es="(?:"+Is+"|"+Ss+")",gh="(?:"+or+"|"+Ss+")",Ps="(?:"+ao+"(?:d|ll|m|re|s|t|ve))?",As="(?:"+ao+"(?:D|LL|M|RE|S|T|VE))?",Ms=ph+"?",Ds="["+xs+"]?",mh="(?:"+Ts+"(?:"+[Cs,uo,lo].join("|")+")"+Ds+Ms+")*",yh="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",wh="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Os=Ds+Ms+mh,bh="(?:"+[dh,uo,lo].join("|")+")"+Os,xh="(?:"+[Cs+ei+"?",ei,uo,lo,hh].join("|")+")",vh=RegExp(ao,"g"),_h=RegExp(ei,"g"),co=RegExp(so+"(?="+so+")|"+xh+Os,"g"),kh=RegExp([or+"?"+Is+"+"+Ps+"(?="+[_s,or,"$"].join("|")+")",gh+"+"+As+"(?="+[_s,or+Es,"$"].join("|")+")",or+"?"+Es+"+"+Ps,or+"+"+As,wh,yh,ks,bh].join("|"),"g"),Ih=RegExp("["+Ts+Zr+ms+xs+"]"),Sh=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ch=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Th=-1,Ee={};Ee[ae]=Ee[ge]=Ee[rt]=Ee[qt]=Ee[_t]=Ee[fn]=Ee[hn]=Ee[je]=Ee[Kt]=!0,Ee[ut]=Ee[Re]=Ee[q]=Ee[lt]=Ee[K]=Ee[Pt]=Ee[cn]=Ee[rr]=Ee[xt]=Ee[In]=Ee[At]=Ee[Sn]=Ee[vt]=Ee[qn]=Ee[Yn]=!1;var Se={};Se[ut]=Se[Re]=Se[q]=Se[K]=Se[lt]=Se[Pt]=Se[ae]=Se[ge]=Se[rt]=Se[qt]=Se[_t]=Se[xt]=Se[In]=Se[At]=Se[Sn]=Se[vt]=Se[qn]=Se[ir]=Se[fn]=Se[hn]=Se[je]=Se[Kt]=!0,Se[cn]=Se[rr]=Se[Yn]=!1;var Eh={√Ä:"A",√Å:"A",√Ç:"A",√É:"A",√Ñ:"A",√Ö:"A",√†:"a",√°:"a",√¢:"a",√£:"a",√§:"a",√•:"a",√á:"C",√ß:"c",√ê:"D",√∞:"d",√à:"E",√â:"E",√ä:"E",√ã:"E",√®:"e",√©:"e",√™:"e",√´:"e",√å:"I",√ç:"I",√é:"I",√è:"I",√¨:"i",√≠:"i",√Æ:"i",√Ø:"i",√ë:"N",√±:"n",√í:"O",√ì:"O",√î:"O",√ï:"O",√ñ:"O",√ò:"O",√≤:"o",√≥:"o",√¥:"o",√µ:"o",√∂:"o",√∏:"o",√ô:"U",√ö:"U",√õ:"U",√ú:"U",√π:"u",√∫:"u",√ª:"u",√º:"u",√ù:"Y",√Ω:"y",√ø:"y",√Ü:"Ae",√¶:"ae",√û:"Th",√æ:"th",√ü:"ss",ƒÄ:"A",ƒÇ:"A",ƒÑ:"A",ƒÅ:"a",ƒÉ:"a",ƒÖ:"a",ƒÜ:"C",ƒà:"C",ƒä:"C",ƒå:"C",ƒá:"c",ƒâ:"c",ƒã:"c",ƒç:"c",ƒé:"D",ƒê:"D",ƒè:"d",ƒë:"d",ƒí:"E",ƒî:"E",ƒñ:"E",ƒò:"E",ƒö:"E",ƒì:"e",ƒï:"e",ƒó:"e",ƒô:"e",ƒõ:"e",ƒú:"G",ƒû:"G",ƒ†:"G",ƒ¢:"G",ƒù:"g",ƒü:"g",ƒ°:"g",ƒ£:"g",ƒ§:"H",ƒ¶:"H",ƒ•:"h",ƒß:"h",ƒ®:"I",ƒ™:"I",ƒ¨:"I",ƒÆ:"I",ƒ∞:"I",ƒ©:"i",ƒ´:"i",ƒ≠:"i",ƒØ:"i",ƒ±:"i",ƒ¥:"J",ƒµ:"j",ƒ∂:"K",ƒ∑:"k",ƒ∏:"k",ƒπ:"L",ƒª:"L",ƒΩ:"L",ƒø:"L",≈Å:"L",ƒ∫:"l",ƒº:"l",ƒæ:"l",≈Ä:"l",≈Ç:"l",≈É:"N",≈Ö:"N",≈á:"N",≈ä:"N",≈Ñ:"n",≈Ü:"n",≈à:"n",≈ã:"n",≈å:"O",≈é:"O",≈ê:"O",≈ç:"o",≈è:"o",≈ë:"o",≈î:"R",≈ñ:"R",≈ò:"R",≈ï:"r",≈ó:"r",≈ô:"r",≈ö:"S",≈ú:"S",≈û:"S",≈†:"S",≈õ:"s",≈ù:"s",≈ü:"s",≈°:"s",≈¢:"T",≈§:"T",≈¶:"T",≈£:"t",≈•:"t",≈ß:"t",≈®:"U",≈™:"U",≈¨:"U",≈Æ:"U",≈∞:"U",≈≤:"U",≈©:"u",≈´:"u",≈≠:"u",≈Ø:"u",≈±:"u",≈≥:"u",≈¥:"W",≈µ:"w",≈∂:"Y",≈∑:"y",≈∏:"Y",≈π:"Z",≈ª:"Z",≈Ω:"Z",≈∫:"z",≈º:"z",≈æ:"z",ƒ≤:"IJ",ƒ≥:"ij",≈í:"Oe",≈ì:"oe",≈â:"'n",≈ø:"s"},Ph={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ah={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Mh={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Dh=parseFloat,Oh=parseInt,Fs=typeof Wi=="object"&&Wi&&Wi.Object===Object&&Wi,Fh=typeof self=="object"&&self&&self.Object===Object&&self,Ke=Fs||Fh||Function("return this")(),fo=t&&!t.nodeType&&t,Hn=fo&&!0&&r&&!r.nodeType&&r,Rs=Hn&&Hn.exports===fo,ho=Rs&&Fs.process,Mt=(function(){try{var C=Hn&&Hn.require&&Hn.require("util").types;return C||ho&&ho.binding&&ho.binding("util")}catch{}})(),Ls=Mt&&Mt.isArrayBuffer,$s=Mt&&Mt.isDate,Bs=Mt&&Mt.isMap,Ns=Mt&&Mt.isRegExp,Ws=Mt&&Mt.isSet,zs=Mt&&Mt.isTypedArray;function kt(C,O,M){switch(M.length){case 0:return C.call(O);case 1:return C.call(O,M[0]);case 2:return C.call(O,M[0],M[1]);case 3:return C.call(O,M[0],M[1],M[2])}return C.apply(O,M)}function Rh(C,O,M,H){for(var ne=-1,me=C==null?0:C.length;++ne<me;){var Ge=C[ne];O(H,Ge,M(Ge),C)}return H}function Dt(C,O){for(var M=-1,H=C==null?0:C.length;++M<H&&O(C[M],M,C)!==!1;);return C}function Lh(C,O){for(var M=C==null?0:C.length;M--&&O(C[M],M,C)!==!1;);return C}function qs(C,O){for(var M=-1,H=C==null?0:C.length;++M<H;)if(!O(C[M],M,C))return!1;return!0}function Cn(C,O){for(var M=-1,H=C==null?0:C.length,ne=0,me=[];++M<H;){var Ge=C[M];O(Ge,M,C)&&(me[ne++]=Ge)}return me}function ti(C,O){var M=C==null?0:C.length;return!!M&&ar(C,O,0)>-1}function po(C,O,M){for(var H=-1,ne=C==null?0:C.length;++H<ne;)if(M(O,C[H]))return!0;return!1}function Pe(C,O){for(var M=-1,H=C==null?0:C.length,ne=Array(H);++M<H;)ne[M]=O(C[M],M,C);return ne}function Tn(C,O){for(var M=-1,H=O.length,ne=C.length;++M<H;)C[ne+M]=O[M];return C}function go(C,O,M,H){var ne=-1,me=C==null?0:C.length;for(H&&me&&(M=C[++ne]);++ne<me;)M=O(M,C[ne],ne,C);return M}function $h(C,O,M,H){var ne=C==null?0:C.length;for(H&&ne&&(M=C[--ne]);ne--;)M=O(M,C[ne],ne,C);return M}function mo(C,O){for(var M=-1,H=C==null?0:C.length;++M<H;)if(O(C[M],M,C))return!0;return!1}var Bh=yo("length");function Nh(C){return C.split("")}function Wh(C){return C.match(Vf)||[]}function Ys(C,O,M){var H;return M(C,function(ne,me,Ge){if(O(ne,me,Ge))return H=me,!1}),H}function ni(C,O,M,H){for(var ne=C.length,me=M+(H?1:-1);H?me--:++me<ne;)if(O(C[me],me,C))return me;return-1}function ar(C,O,M){return O===O?Jh(C,O,M):ni(C,Hs,M)}function zh(C,O,M,H){for(var ne=M-1,me=C.length;++ne<me;)if(H(C[ne],O))return ne;return-1}function Hs(C){return C!==C}function Us(C,O){var M=C==null?0:C.length;return M?bo(C,O)/M:_}function yo(C){return function(O){return O==null?n:O[C]}}function wo(C){return function(O){return C==null?n:C[O]}}function Gs(C,O,M,H,ne){return ne(C,function(me,Ge,Ie){M=H?(H=!1,me):O(M,me,Ge,Ie)}),M}function qh(C,O){var M=C.length;for(C.sort(O);M--;)C[M]=C[M].value;return C}function bo(C,O){for(var M,H=-1,ne=C.length;++H<ne;){var me=O(C[H]);me!==n&&(M=M===n?me:M+me)}return M}function xo(C,O){for(var M=-1,H=Array(C);++M<C;)H[M]=O(M);return H}function Yh(C,O){return Pe(O,function(M){return[M,C[M]]})}function Qs(C){return C&&C.slice(0,Ks(C)+1).replace(oo,"")}function It(C){return function(O){return C(O)}}function vo(C,O){return Pe(O,function(M){return C[M]})}function kr(C,O){return C.has(O)}function Vs(C,O){for(var M=-1,H=C.length;++M<H&&ar(O,C[M],0)>-1;);return M}function Xs(C,O){for(var M=C.length;M--&&ar(O,C[M],0)>-1;);return M}function Hh(C,O){for(var M=C.length,H=0;M--;)C[M]===O&&++H;return H}var Uh=wo(Eh),Gh=wo(Ph);function Qh(C){return"\\"+Mh[C]}function Vh(C,O){return C==null?n:C[O]}function sr(C){return Ih.test(C)}function Xh(C){return Sh.test(C)}function jh(C){for(var O,M=[];!(O=C.next()).done;)M.push(O.value);return M}function _o(C){var O=-1,M=Array(C.size);return C.forEach(function(H,ne){M[++O]=[ne,H]}),M}function js(C,O){return function(M){return C(O(M))}}function En(C,O){for(var M=-1,H=C.length,ne=0,me=[];++M<H;){var Ge=C[M];(Ge===O||Ge===p)&&(C[M]=p,me[ne++]=M)}return me}function ri(C){var O=-1,M=Array(C.size);return C.forEach(function(H){M[++O]=H}),M}function Kh(C){var O=-1,M=Array(C.size);return C.forEach(function(H){M[++O]=[H,H]}),M}function Jh(C,O,M){for(var H=M-1,ne=C.length;++H<ne;)if(C[H]===O)return H;return-1}function Zh(C,O,M){for(var H=M+1;H--;)if(C[H]===O)return H;return H}function ur(C){return sr(C)?td(C):Bh(C)}function Ht(C){return sr(C)?nd(C):Nh(C)}function Ks(C){for(var O=C.length;O--&&Hf.test(C.charAt(O)););return O}var ed=wo(Ah);function td(C){for(var O=co.lastIndex=0;co.test(C);)++O;return O}function nd(C){return C.match(co)||[]}function rd(C){return C.match(kh)||[]}var id=(function C(O){O=O==null?Ke:lr.defaults(Ke.Object(),O,lr.pick(Ke,Ch));var M=O.Array,H=O.Date,ne=O.Error,me=O.Function,Ge=O.Math,Ie=O.Object,ko=O.RegExp,od=O.String,Ot=O.TypeError,ii=M.prototype,ad=me.prototype,cr=Ie.prototype,oi=O["__core-js_shared__"],ai=ad.toString,ve=cr.hasOwnProperty,sd=0,Js=(function(){var e=/[^.]+$/.exec(oi&&oi.keys&&oi.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})(),si=cr.toString,ud=ai.call(Ie),ld=Ke._,cd=ko("^"+ai.call(ve).replace(io,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ui=Rs?O.Buffer:n,Pn=O.Symbol,li=O.Uint8Array,Zs=ui?ui.allocUnsafe:n,ci=js(Ie.getPrototypeOf,Ie),eu=Ie.create,tu=cr.propertyIsEnumerable,fi=ii.splice,nu=Pn?Pn.isConcatSpreadable:n,Ir=Pn?Pn.iterator:n,Un=Pn?Pn.toStringTag:n,hi=(function(){try{var e=jn(Ie,"defineProperty");return e({},"",{}),e}catch{}})(),fd=O.clearTimeout!==Ke.clearTimeout&&O.clearTimeout,hd=H&&H.now!==Ke.Date.now&&H.now,dd=O.setTimeout!==Ke.setTimeout&&O.setTimeout,di=Ge.ceil,pi=Ge.floor,Io=Ie.getOwnPropertySymbols,pd=ui?ui.isBuffer:n,ru=O.isFinite,gd=ii.join,md=js(Ie.keys,Ie),Qe=Ge.max,et=Ge.min,yd=H.now,wd=O.parseInt,iu=Ge.random,bd=ii.reverse,So=jn(O,"DataView"),Sr=jn(O,"Map"),Co=jn(O,"Promise"),fr=jn(O,"Set"),Cr=jn(O,"WeakMap"),Tr=jn(Ie,"create"),gi=Cr&&new Cr,hr={},xd=Kn(So),vd=Kn(Sr),_d=Kn(Co),kd=Kn(fr),Id=Kn(Cr),mi=Pn?Pn.prototype:n,Er=mi?mi.valueOf:n,ou=mi?mi.toString:n;function b(e){if(Le(e)&&!re(e)&&!(e instanceof ce)){if(e instanceof Ft)return e;if(ve.call(e,"__wrapped__"))return al(e)}return new Ft(e)}var dr=(function(){function e(){}return function(i){if(!Me(i))return{};if(eu)return eu(i);e.prototype=i;var s=new e;return e.prototype=n,s}})();function yi(){}function Ft(e,i){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=n}b.templateSettings={escape:Bf,evaluate:Nf,interpolate:ps,variable:"",imports:{_:b}},b.prototype=yi.prototype,b.prototype.constructor=b,Ft.prototype=dr(yi.prototype),Ft.prototype.constructor=Ft;function ce(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Fe,this.__views__=[]}function Sd(){var e=new ce(this.__wrapped__);return e.__actions__=ct(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ct(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ct(this.__views__),e}function Cd(){if(this.__filtered__){var e=new ce(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Td(){var e=this.__wrapped__.value(),i=this.__dir__,s=re(e),d=i<0,m=s?e.length:0,x=Np(0,m,this.__views__),v=x.start,k=x.end,T=k-v,L=d?k:v-1,$=this.__iteratees__,B=$.length,Y=0,G=et(T,this.__takeCount__);if(!s||!d&&m==T&&G==T)return Pu(e,this.__actions__);var J=[];e:for(;T--&&Y<G;){L+=i;for(var oe=-1,Z=e[L];++oe<B;){var le=$[oe],he=le.iteratee,Tt=le.type,at=he(Z);if(Tt==fe)Z=at;else if(!at){if(Tt==Ae)continue e;break e}}J[Y++]=Z}return J}ce.prototype=dr(yi.prototype),ce.prototype.constructor=ce;function Gn(e){var i=-1,s=e==null?0:e.length;for(this.clear();++i<s;){var d=e[i];this.set(d[0],d[1])}}function Ed(){this.__data__=Tr?Tr(null):{},this.size=0}function Pd(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}function Ad(e){var i=this.__data__;if(Tr){var s=i[e];return s===f?n:s}return ve.call(i,e)?i[e]:n}function Md(e){var i=this.__data__;return Tr?i[e]!==n:ve.call(i,e)}function Dd(e,i){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=Tr&&i===n?f:i,this}Gn.prototype.clear=Ed,Gn.prototype.delete=Pd,Gn.prototype.get=Ad,Gn.prototype.has=Md,Gn.prototype.set=Dd;function dn(e){var i=-1,s=e==null?0:e.length;for(this.clear();++i<s;){var d=e[i];this.set(d[0],d[1])}}function Od(){this.__data__=[],this.size=0}function Fd(e){var i=this.__data__,s=wi(i,e);if(s<0)return!1;var d=i.length-1;return s==d?i.pop():fi.call(i,s,1),--this.size,!0}function Rd(e){var i=this.__data__,s=wi(i,e);return s<0?n:i[s][1]}function Ld(e){return wi(this.__data__,e)>-1}function $d(e,i){var s=this.__data__,d=wi(s,e);return d<0?(++this.size,s.push([e,i])):s[d][1]=i,this}dn.prototype.clear=Od,dn.prototype.delete=Fd,dn.prototype.get=Rd,dn.prototype.has=Ld,dn.prototype.set=$d;function pn(e){var i=-1,s=e==null?0:e.length;for(this.clear();++i<s;){var d=e[i];this.set(d[0],d[1])}}function Bd(){this.size=0,this.__data__={hash:new Gn,map:new(Sr||dn),string:new Gn}}function Nd(e){var i=Ai(this,e).delete(e);return this.size-=i?1:0,i}function Wd(e){return Ai(this,e).get(e)}function zd(e){return Ai(this,e).has(e)}function qd(e,i){var s=Ai(this,e),d=s.size;return s.set(e,i),this.size+=s.size==d?0:1,this}pn.prototype.clear=Bd,pn.prototype.delete=Nd,pn.prototype.get=Wd,pn.prototype.has=zd,pn.prototype.set=qd;function Qn(e){var i=-1,s=e==null?0:e.length;for(this.__data__=new pn;++i<s;)this.add(e[i])}function Yd(e){return this.__data__.set(e,f),this}function Hd(e){return this.__data__.has(e)}Qn.prototype.add=Qn.prototype.push=Yd,Qn.prototype.has=Hd;function Ut(e){var i=this.__data__=new dn(e);this.size=i.size}function Ud(){this.__data__=new dn,this.size=0}function Gd(e){var i=this.__data__,s=i.delete(e);return this.size=i.size,s}function Qd(e){return this.__data__.get(e)}function Vd(e){return this.__data__.has(e)}function Xd(e,i){var s=this.__data__;if(s instanceof dn){var d=s.__data__;if(!Sr||d.length<a-1)return d.push([e,i]),this.size=++s.size,this;s=this.__data__=new pn(d)}return s.set(e,i),this.size=s.size,this}Ut.prototype.clear=Ud,Ut.prototype.delete=Gd,Ut.prototype.get=Qd,Ut.prototype.has=Vd,Ut.prototype.set=Xd;function au(e,i){var s=re(e),d=!s&&Jn(e),m=!s&&!d&&Fn(e),x=!s&&!d&&!m&&yr(e),v=s||d||m||x,k=v?xo(e.length,od):[],T=k.length;for(var L in e)(i||ve.call(e,L))&&!(v&&(L=="length"||m&&(L=="offset"||L=="parent")||x&&(L=="buffer"||L=="byteLength"||L=="byteOffset")||wn(L,T)))&&k.push(L);return k}function su(e){var i=e.length;return i?e[$o(0,i-1)]:n}function jd(e,i){return Mi(ct(e),Vn(i,0,e.length))}function Kd(e){return Mi(ct(e))}function To(e,i,s){(s!==n&&!Gt(e[i],s)||s===n&&!(i in e))&&gn(e,i,s)}function Pr(e,i,s){var d=e[i];(!(ve.call(e,i)&&Gt(d,s))||s===n&&!(i in e))&&gn(e,i,s)}function wi(e,i){for(var s=e.length;s--;)if(Gt(e[s][0],i))return s;return-1}function Jd(e,i,s,d){return An(e,function(m,x,v){i(d,m,s(m),v)}),d}function uu(e,i){return e&&Zt(i,Xe(i),e)}function Zd(e,i){return e&&Zt(i,ht(i),e)}function gn(e,i,s){i=="__proto__"&&hi?hi(e,i,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[i]=s}function Eo(e,i){for(var s=-1,d=i.length,m=M(d),x=e==null;++s<d;)m[s]=x?n:ua(e,i[s]);return m}function Vn(e,i,s){return e===e&&(s!==n&&(e=e<=s?e:s),i!==n&&(e=e>=i?e:i)),e}function Rt(e,i,s,d,m,x){var v,k=i&g,T=i&w,L=i&y;if(s&&(v=m?s(e,d,m,x):s(e)),v!==n)return v;if(!Me(e))return e;var $=re(e);if($){if(v=zp(e),!k)return ct(e,v)}else{var B=tt(e),Y=B==rr||B==Vr;if(Fn(e))return Du(e,k);if(B==At||B==ut||Y&&!m){if(v=T||Y?{}:Ku(e),!k)return T?Ap(e,Zd(v,e)):Pp(e,uu(v,e))}else{if(!Se[B])return m?e:{};v=qp(e,B,k)}}x||(x=new Ut);var G=x.get(e);if(G)return G;x.set(e,v),Cl(e)?e.forEach(function(Z){v.add(Rt(Z,i,s,Z,e,x))}):Il(e)&&e.forEach(function(Z,le){v.set(le,Rt(Z,i,s,le,e,x))});var J=L?T?Vo:Qo:T?ht:Xe,oe=$?n:J(e);return Dt(oe||e,function(Z,le){oe&&(le=Z,Z=e[le]),Pr(v,le,Rt(Z,i,s,le,e,x))}),v}function ep(e){var i=Xe(e);return function(s){return lu(s,e,i)}}function lu(e,i,s){var d=s.length;if(e==null)return!d;for(e=Ie(e);d--;){var m=s[d],x=i[m],v=e[m];if(v===n&&!(m in e)||!x(v))return!1}return!0}function cu(e,i,s){if(typeof e!="function")throw new Ot(l);return Lr(function(){e.apply(n,s)},i)}function Ar(e,i,s,d){var m=-1,x=ti,v=!0,k=e.length,T=[],L=i.length;if(!k)return T;s&&(i=Pe(i,It(s))),d?(x=po,v=!1):i.length>=a&&(x=kr,v=!1,i=new Qn(i));e:for(;++m<k;){var $=e[m],B=s==null?$:s($);if($=d||$!==0?$:0,v&&B===B){for(var Y=L;Y--;)if(i[Y]===B)continue e;T.push($)}else x(i,B,d)||T.push($)}return T}var An=$u(Jt),fu=$u(Ao,!0);function tp(e,i){var s=!0;return An(e,function(d,m,x){return s=!!i(d,m,x),s}),s}function bi(e,i,s){for(var d=-1,m=e.length;++d<m;){var x=e[d],v=i(x);if(v!=null&&(k===n?v===v&&!Ct(v):s(v,k)))var k=v,T=x}return T}function np(e,i,s,d){var m=e.length;for(s=ie(s),s<0&&(s=-s>m?0:m+s),d=d===n||d>m?m:ie(d),d<0&&(d+=m),d=s>d?0:El(d);s<d;)e[s++]=i;return e}function hu(e,i){var s=[];return An(e,function(d,m,x){i(d,m,x)&&s.push(d)}),s}function Je(e,i,s,d,m){var x=-1,v=e.length;for(s||(s=Hp),m||(m=[]);++x<v;){var k=e[x];i>0&&s(k)?i>1?Je(k,i-1,s,d,m):Tn(m,k):d||(m[m.length]=k)}return m}var Po=Bu(),du=Bu(!0);function Jt(e,i){return e&&Po(e,i,Xe)}function Ao(e,i){return e&&du(e,i,Xe)}function xi(e,i){return Cn(i,function(s){return bn(e[s])})}function Xn(e,i){i=Dn(i,e);for(var s=0,d=i.length;e!=null&&s<d;)e=e[en(i[s++])];return s&&s==d?e:n}function pu(e,i,s){var d=i(e);return re(e)?d:Tn(d,s(e))}function it(e){return e==null?e===n?ro:Xr:Un&&Un in Ie(e)?Bp(e):Kp(e)}function Mo(e,i){return e>i}function rp(e,i){return e!=null&&ve.call(e,i)}function ip(e,i){return e!=null&&i in Ie(e)}function op(e,i,s){return e>=et(i,s)&&e<Qe(i,s)}function Do(e,i,s){for(var d=s?po:ti,m=e[0].length,x=e.length,v=x,k=M(x),T=1/0,L=[];v--;){var $=e[v];v&&i&&($=Pe($,It(i))),T=et($.length,T),k[v]=!s&&(i||m>=120&&$.length>=120)?new Qn(v&&$):n}$=e[0];var B=-1,Y=k[0];e:for(;++B<m&&L.length<T;){var G=$[B],J=i?i(G):G;if(G=s||G!==0?G:0,!(Y?kr(Y,J):d(L,J,s))){for(v=x;--v;){var oe=k[v];if(!(oe?kr(oe,J):d(e[v],J,s)))continue e}Y&&Y.push(J),L.push(G)}}return L}function ap(e,i,s,d){return Jt(e,function(m,x,v){i(d,s(m),x,v)}),d}function Mr(e,i,s){i=Dn(i,e),e=tl(e,i);var d=e==null?e:e[en($t(i))];return d==null?n:kt(d,e,s)}function gu(e){return Le(e)&&it(e)==ut}function sp(e){return Le(e)&&it(e)==q}function up(e){return Le(e)&&it(e)==Pt}function Dr(e,i,s,d,m){return e===i?!0:e==null||i==null||!Le(e)&&!Le(i)?e!==e&&i!==i:lp(e,i,s,d,Dr,m)}function lp(e,i,s,d,m,x){var v=re(e),k=re(i),T=v?Re:tt(e),L=k?Re:tt(i);T=T==ut?At:T,L=L==ut?At:L;var $=T==At,B=L==At,Y=T==L;if(Y&&Fn(e)){if(!Fn(i))return!1;v=!0,$=!1}if(Y&&!$)return x||(x=new Ut),v||yr(e)?Vu(e,i,s,d,m,x):Lp(e,i,T,s,d,m,x);if(!(s&S)){var G=$&&ve.call(e,"__wrapped__"),J=B&&ve.call(i,"__wrapped__");if(G||J){var oe=G?e.value():e,Z=J?i.value():i;return x||(x=new Ut),m(oe,Z,s,d,x)}}return Y?(x||(x=new Ut),$p(e,i,s,d,m,x)):!1}function cp(e){return Le(e)&&tt(e)==xt}function Oo(e,i,s,d){var m=s.length,x=m,v=!d;if(e==null)return!x;for(e=Ie(e);m--;){var k=s[m];if(v&&k[2]?k[1]!==e[k[0]]:!(k[0]in e))return!1}for(;++m<x;){k=s[m];var T=k[0],L=e[T],$=k[1];if(v&&k[2]){if(L===n&&!(T in e))return!1}else{var B=new Ut;if(d)var Y=d(L,$,T,e,i,B);if(!(Y===n?Dr($,L,S|P,d,B):Y))return!1}}return!0}function mu(e){if(!Me(e)||Gp(e))return!1;var i=bn(e)?cd:eh;return i.test(Kn(e))}function fp(e){return Le(e)&&it(e)==Sn}function hp(e){return Le(e)&&tt(e)==vt}function dp(e){return Le(e)&&$i(e.length)&&!!Ee[it(e)]}function yu(e){return typeof e=="function"?e:e==null?dt:typeof e=="object"?re(e)?xu(e[0],e[1]):bu(e):Nl(e)}function Fo(e){if(!Rr(e))return md(e);var i=[];for(var s in Ie(e))ve.call(e,s)&&s!="constructor"&&i.push(s);return i}function pp(e){if(!Me(e))return jp(e);var i=Rr(e),s=[];for(var d in e)d=="constructor"&&(i||!ve.call(e,d))||s.push(d);return s}function Ro(e,i){return e<i}function wu(e,i){var s=-1,d=ft(e)?M(e.length):[];return An(e,function(m,x,v){d[++s]=i(m,x,v)}),d}function bu(e){var i=jo(e);return i.length==1&&i[0][2]?Zu(i[0][0],i[0][1]):function(s){return s===e||Oo(s,e,i)}}function xu(e,i){return Jo(e)&&Ju(i)?Zu(en(e),i):function(s){var d=ua(s,e);return d===n&&d===i?la(s,e):Dr(i,d,S|P)}}function vi(e,i,s,d,m){e!==i&&Po(i,function(x,v){if(m||(m=new Ut),Me(x))gp(e,i,v,s,vi,d,m);else{var k=d?d(ea(e,v),x,v+"",e,i,m):n;k===n&&(k=x),To(e,v,k)}},ht)}function gp(e,i,s,d,m,x,v){var k=ea(e,s),T=ea(i,s),L=v.get(T);if(L){To(e,s,L);return}var $=x?x(k,T,s+"",e,i,v):n,B=$===n;if(B){var Y=re(T),G=!Y&&Fn(T),J=!Y&&!G&&yr(T);$=T,Y||G||J?re(k)?$=k:Be(k)?$=ct(k):G?(B=!1,$=Du(T,!0)):J?(B=!1,$=Ou(T,!0)):$=[]:$r(T)||Jn(T)?($=k,Jn(k)?$=Pl(k):(!Me(k)||bn(k))&&($=Ku(T))):B=!1}B&&(v.set(T,$),m($,T,d,x,v),v.delete(T)),To(e,s,$)}function vu(e,i){var s=e.length;if(s)return i+=i<0?s:0,wn(i,s)?e[i]:n}function _u(e,i,s){i.length?i=Pe(i,function(x){return re(x)?function(v){return Xn(v,x.length===1?x[0]:x)}:x}):i=[dt];var d=-1;i=Pe(i,It(j()));var m=wu(e,function(x,v,k){var T=Pe(i,function(L){return L(x)});return{criteria:T,index:++d,value:x}});return qh(m,function(x,v){return Ep(x,v,s)})}function mp(e,i){return ku(e,i,function(s,d){return la(e,d)})}function ku(e,i,s){for(var d=-1,m=i.length,x={};++d<m;){var v=i[d],k=Xn(e,v);s(k,v)&&Or(x,Dn(v,e),k)}return x}function yp(e){return function(i){return Xn(i,e)}}function Lo(e,i,s,d){var m=d?zh:ar,x=-1,v=i.length,k=e;for(e===i&&(i=ct(i)),s&&(k=Pe(e,It(s)));++x<v;)for(var T=0,L=i[x],$=s?s(L):L;(T=m(k,$,T,d))>-1;)k!==e&&fi.call(k,T,1),fi.call(e,T,1);return e}function Iu(e,i){for(var s=e?i.length:0,d=s-1;s--;){var m=i[s];if(s==d||m!==x){var x=m;wn(m)?fi.call(e,m,1):Wo(e,m)}}return e}function $o(e,i){return e+pi(iu()*(i-e+1))}function wp(e,i,s,d){for(var m=-1,x=Qe(di((i-e)/(s||1)),0),v=M(x);x--;)v[d?x:++m]=e,e+=s;return v}function Bo(e,i){var s="";if(!e||i<1||i>qe)return s;do i%2&&(s+=e),i=pi(i/2),i&&(e+=e);while(i);return s}function se(e,i){return ta(el(e,i,dt),e+"")}function bp(e){return su(wr(e))}function xp(e,i){var s=wr(e);return Mi(s,Vn(i,0,s.length))}function Or(e,i,s,d){if(!Me(e))return e;i=Dn(i,e);for(var m=-1,x=i.length,v=x-1,k=e;k!=null&&++m<x;){var T=en(i[m]),L=s;if(T==="__proto__"||T==="constructor"||T==="prototype")return e;if(m!=v){var $=k[T];L=d?d($,T,k):n,L===n&&(L=Me($)?$:wn(i[m+1])?[]:{})}Pr(k,T,L),k=k[T]}return e}var Su=gi?function(e,i){return gi.set(e,i),e}:dt,vp=hi?function(e,i){return hi(e,"toString",{configurable:!0,enumerable:!1,value:fa(i),writable:!0})}:dt;function _p(e){return Mi(wr(e))}function Lt(e,i,s){var d=-1,m=e.length;i<0&&(i=-i>m?0:m+i),s=s>m?m:s,s<0&&(s+=m),m=i>s?0:s-i>>>0,i>>>=0;for(var x=M(m);++d<m;)x[d]=e[d+i];return x}function kp(e,i){var s;return An(e,function(d,m,x){return s=i(d,m,x),!s}),!!s}function _i(e,i,s){var d=0,m=e==null?d:e.length;if(typeof i=="number"&&i===i&&m<=I){for(;d<m;){var x=d+m>>>1,v=e[x];v!==null&&!Ct(v)&&(s?v<=i:v<i)?d=x+1:m=x}return m}return No(e,i,dt,s)}function No(e,i,s,d){var m=0,x=e==null?0:e.length;if(x===0)return 0;i=s(i);for(var v=i!==i,k=i===null,T=Ct(i),L=i===n;m<x;){var $=pi((m+x)/2),B=s(e[$]),Y=B!==n,G=B===null,J=B===B,oe=Ct(B);if(v)var Z=d||J;else L?Z=J&&(d||Y):k?Z=J&&Y&&(d||!G):T?Z=J&&Y&&!G&&(d||!oe):G||oe?Z=!1:Z=d?B<=i:B<i;Z?m=$+1:x=$}return et(x,zt)}function Cu(e,i){for(var s=-1,d=e.length,m=0,x=[];++s<d;){var v=e[s],k=i?i(v):v;if(!s||!Gt(k,T)){var T=k;x[m++]=v===0?0:v}}return x}function Tu(e){return typeof e=="number"?e:Ct(e)?_:+e}function St(e){if(typeof e=="string")return e;if(re(e))return Pe(e,St)+"";if(Ct(e))return ou?ou.call(e):"";var i=e+"";return i=="0"&&1/e==-Te?"-0":i}function Mn(e,i,s){var d=-1,m=ti,x=e.length,v=!0,k=[],T=k;if(s)v=!1,m=po;else if(x>=a){var L=i?null:Fp(e);if(L)return ri(L);v=!1,m=kr,T=new Qn}else T=i?[]:k;e:for(;++d<x;){var $=e[d],B=i?i($):$;if($=s||$!==0?$:0,v&&B===B){for(var Y=T.length;Y--;)if(T[Y]===B)continue e;i&&T.push(B),k.push($)}else m(T,B,s)||(T!==k&&T.push(B),k.push($))}return k}function Wo(e,i){return i=Dn(i,e),e=tl(e,i),e==null||delete e[en($t(i))]}function Eu(e,i,s,d){return Or(e,i,s(Xn(e,i)),d)}function ki(e,i,s,d){for(var m=e.length,x=d?m:-1;(d?x--:++x<m)&&i(e[x],x,e););return s?Lt(e,d?0:x,d?x+1:m):Lt(e,d?x+1:0,d?m:x)}function Pu(e,i){var s=e;return s instanceof ce&&(s=s.value()),go(i,function(d,m){return m.func.apply(m.thisArg,Tn([d],m.args))},s)}function zo(e,i,s){var d=e.length;if(d<2)return d?Mn(e[0]):[];for(var m=-1,x=M(d);++m<d;)for(var v=e[m],k=-1;++k<d;)k!=m&&(x[m]=Ar(x[m]||v,e[k],i,s));return Mn(Je(x,1),i,s)}function Au(e,i,s){for(var d=-1,m=e.length,x=i.length,v={};++d<m;){var k=d<x?i[d]:n;s(v,e[d],k)}return v}function qo(e){return Be(e)?e:[]}function Yo(e){return typeof e=="function"?e:dt}function Dn(e,i){return re(e)?e:Jo(e,i)?[e]:ol(xe(e))}var Ip=se;function On(e,i,s){var d=e.length;return s=s===n?d:s,!i&&s>=d?e:Lt(e,i,s)}var Mu=fd||function(e){return Ke.clearTimeout(e)};function Du(e,i){if(i)return e.slice();var s=e.length,d=Zs?Zs(s):new e.constructor(s);return e.copy(d),d}function Ho(e){var i=new e.constructor(e.byteLength);return new li(i).set(new li(e)),i}function Sp(e,i){var s=i?Ho(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.byteLength)}function Cp(e){var i=new e.constructor(e.source,gs.exec(e));return i.lastIndex=e.lastIndex,i}function Tp(e){return Er?Ie(Er.call(e)):{}}function Ou(e,i){var s=i?Ho(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}function Fu(e,i){if(e!==i){var s=e!==n,d=e===null,m=e===e,x=Ct(e),v=i!==n,k=i===null,T=i===i,L=Ct(i);if(!k&&!L&&!x&&e>i||x&&v&&T&&!k&&!L||d&&v&&T||!s&&T||!m)return 1;if(!d&&!x&&!L&&e<i||L&&s&&m&&!d&&!x||k&&s&&m||!v&&m||!T)return-1}return 0}function Ep(e,i,s){for(var d=-1,m=e.criteria,x=i.criteria,v=m.length,k=s.length;++d<v;){var T=Fu(m[d],x[d]);if(T){if(d>=k)return T;var L=s[d];return T*(L=="desc"?-1:1)}}return e.index-i.index}function Ru(e,i,s,d){for(var m=-1,x=e.length,v=s.length,k=-1,T=i.length,L=Qe(x-v,0),$=M(T+L),B=!d;++k<T;)$[k]=i[k];for(;++m<v;)(B||m<x)&&($[s[m]]=e[m]);for(;L--;)$[k++]=e[m++];return $}function Lu(e,i,s,d){for(var m=-1,x=e.length,v=-1,k=s.length,T=-1,L=i.length,$=Qe(x-k,0),B=M($+L),Y=!d;++m<$;)B[m]=e[m];for(var G=m;++T<L;)B[G+T]=i[T];for(;++v<k;)(Y||m<x)&&(B[G+s[v]]=e[m++]);return B}function ct(e,i){var s=-1,d=e.length;for(i||(i=M(d));++s<d;)i[s]=e[s];return i}function Zt(e,i,s,d){var m=!s;s||(s={});for(var x=-1,v=i.length;++x<v;){var k=i[x],T=d?d(s[k],e[k],k,s,e):n;T===n&&(T=e[k]),m?gn(s,k,T):Pr(s,k,T)}return s}function Pp(e,i){return Zt(e,Ko(e),i)}function Ap(e,i){return Zt(e,Xu(e),i)}function Ii(e,i){return function(s,d){var m=re(s)?Rh:Jd,x=i?i():{};return m(s,e,j(d,2),x)}}function pr(e){return se(function(i,s){var d=-1,m=s.length,x=m>1?s[m-1]:n,v=m>2?s[2]:n;for(x=e.length>3&&typeof x=="function"?(m--,x):n,v&&ot(s[0],s[1],v)&&(x=m<3?n:x,m=1),i=Ie(i);++d<m;){var k=s[d];k&&e(i,k,d,x)}return i})}function $u(e,i){return function(s,d){if(s==null)return s;if(!ft(s))return e(s,d);for(var m=s.length,x=i?m:-1,v=Ie(s);(i?x--:++x<m)&&d(v[x],x,v)!==!1;);return s}}function Bu(e){return function(i,s,d){for(var m=-1,x=Ie(i),v=d(i),k=v.length;k--;){var T=v[e?k:++m];if(s(x[T],T,x)===!1)break}return i}}function Mp(e,i,s){var d=i&F,m=Fr(e);function x(){var v=this&&this!==Ke&&this instanceof x?m:e;return v.apply(d?s:this,arguments)}return x}function Nu(e){return function(i){i=xe(i);var s=sr(i)?Ht(i):n,d=s?s[0]:i.charAt(0),m=s?On(s,1).join(""):i.slice(1);return d[e]()+m}}function gr(e){return function(i){return go($l(Ll(i).replace(vh,"")),e,"")}}function Fr(e){return function(){var i=arguments;switch(i.length){case 0:return new e;case 1:return new e(i[0]);case 2:return new e(i[0],i[1]);case 3:return new e(i[0],i[1],i[2]);case 4:return new e(i[0],i[1],i[2],i[3]);case 5:return new e(i[0],i[1],i[2],i[3],i[4]);case 6:return new e(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new e(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var s=dr(e.prototype),d=e.apply(s,i);return Me(d)?d:s}}function Dp(e,i,s){var d=Fr(e);function m(){for(var x=arguments.length,v=M(x),k=x,T=mr(m);k--;)v[k]=arguments[k];var L=x<3&&v[0]!==T&&v[x-1]!==T?[]:En(v,T);if(x-=L.length,x<s)return Hu(e,i,Si,m.placeholder,n,v,L,n,n,s-x);var $=this&&this!==Ke&&this instanceof m?d:e;return kt($,this,v)}return m}function Wu(e){return function(i,s,d){var m=Ie(i);if(!ft(i)){var x=j(s,3);i=Xe(i),s=function(k){return x(m[k],k,m)}}var v=e(i,s,d);return v>-1?m[x?i[v]:v]:n}}function zu(e){return yn(function(i){var s=i.length,d=s,m=Ft.prototype.thru;for(e&&i.reverse();d--;){var x=i[d];if(typeof x!="function")throw new Ot(l);if(m&&!v&&Pi(x)=="wrapper")var v=new Ft([],!0)}for(d=v?d:s;++d<s;){x=i[d];var k=Pi(x),T=k=="wrapper"?Xo(x):n;T&&Zo(T[0])&&T[1]==(U|z|D|V)&&!T[4].length&&T[9]==1?v=v[Pi(T[0])].apply(v,T[3]):v=x.length==1&&Zo(x)?v[k]():v.thru(x)}return function(){var L=arguments,$=L[0];if(v&&L.length==1&&re($))return v.plant($).value();for(var B=0,Y=s?i[B].apply(this,L):$;++B<s;)Y=i[B].call(this,Y);return Y}})}function Si(e,i,s,d,m,x,v,k,T,L){var $=i&U,B=i&F,Y=i&A,G=i&(z|W),J=i&ee,oe=Y?n:Fr(e);function Z(){for(var le=arguments.length,he=M(le),Tt=le;Tt--;)he[Tt]=arguments[Tt];if(G)var at=mr(Z),Et=Hh(he,at);if(d&&(he=Ru(he,d,m,G)),x&&(he=Lu(he,x,v,G)),le-=Et,G&&le<L){var Ne=En(he,at);return Hu(e,i,Si,Z.placeholder,s,he,Ne,k,T,L-le)}var Qt=B?s:this,vn=Y?Qt[e]:e;return le=he.length,k?he=Jp(he,k):J&&le>1&&he.reverse(),$&&T<le&&(he.length=T),this&&this!==Ke&&this instanceof Z&&(vn=oe||Fr(vn)),vn.apply(Qt,he)}return Z}function qu(e,i){return function(s,d){return ap(s,e,i(d),{})}}function Ci(e,i){return function(s,d){var m;if(s===n&&d===n)return i;if(s!==n&&(m=s),d!==n){if(m===n)return d;typeof s=="string"||typeof d=="string"?(s=St(s),d=St(d)):(s=Tu(s),d=Tu(d)),m=e(s,d)}return m}}function Uo(e){return yn(function(i){return i=Pe(i,It(j())),se(function(s){var d=this;return e(i,function(m){return kt(m,d,s)})})})}function Ti(e,i){i=i===n?" ":St(i);var s=i.length;if(s<2)return s?Bo(i,e):i;var d=Bo(i,di(e/ur(i)));return sr(i)?On(Ht(d),0,e).join(""):d.slice(0,e)}function Op(e,i,s,d){var m=i&F,x=Fr(e);function v(){for(var k=-1,T=arguments.length,L=-1,$=d.length,B=M($+T),Y=this&&this!==Ke&&this instanceof v?x:e;++L<$;)B[L]=d[L];for(;T--;)B[L++]=arguments[++k];return kt(Y,m?s:this,B)}return v}function Yu(e){return function(i,s,d){return d&&typeof d!="number"&&ot(i,s,d)&&(s=d=n),i=xn(i),s===n?(s=i,i=0):s=xn(s),d=d===n?i<s?1:-1:xn(d),wp(i,s,d,e)}}function Ei(e){return function(i,s){return typeof i=="string"&&typeof s=="string"||(i=Bt(i),s=Bt(s)),e(i,s)}}function Hu(e,i,s,d,m,x,v,k,T,L){var $=i&z,B=$?v:n,Y=$?n:v,G=$?x:n,J=$?n:x;i|=$?D:E,i&=~($?E:D),i&N||(i&=-4);var oe=[e,i,m,G,B,J,Y,k,T,L],Z=s.apply(n,oe);return Zo(e)&&nl(Z,oe),Z.placeholder=d,rl(Z,e,i)}function Go(e){var i=Ge[e];return function(s,d){if(s=Bt(s),d=d==null?0:et(ie(d),292),d&&ru(s)){var m=(xe(s)+"e").split("e"),x=i(m[0]+"e"+(+m[1]+d));return m=(xe(x)+"e").split("e"),+(m[0]+"e"+(+m[1]-d))}return i(s)}}var Fp=fr&&1/ri(new fr([,-0]))[1]==Te?function(e){return new fr(e)}:pa;function Uu(e){return function(i){var s=tt(i);return s==xt?_o(i):s==vt?Kh(i):Yh(i,e(i))}}function mn(e,i,s,d,m,x,v,k){var T=i&A;if(!T&&typeof e!="function")throw new Ot(l);var L=d?d.length:0;if(L||(i&=-97,d=m=n),v=v===n?v:Qe(ie(v),0),k=k===n?k:ie(k),L-=m?m.length:0,i&E){var $=d,B=m;d=m=n}var Y=T?n:Xo(e),G=[e,i,s,d,m,$,B,x,v,k];if(Y&&Xp(G,Y),e=G[0],i=G[1],s=G[2],d=G[3],m=G[4],k=G[9]=G[9]===n?T?0:e.length:Qe(G[9]-L,0),!k&&i&(z|W)&&(i&=-25),!i||i==F)var J=Mp(e,i,s);else i==z||i==W?J=Dp(e,i,k):(i==D||i==(F|D))&&!m.length?J=Op(e,i,s,d):J=Si.apply(n,G);var oe=Y?Su:nl;return rl(oe(J,G),e,i)}function Gu(e,i,s,d){return e===n||Gt(e,cr[s])&&!ve.call(d,s)?i:e}function Qu(e,i,s,d,m,x){return Me(e)&&Me(i)&&(x.set(i,e),vi(e,i,n,Qu,x),x.delete(i)),e}function Rp(e){return $r(e)?n:e}function Vu(e,i,s,d,m,x){var v=s&S,k=e.length,T=i.length;if(k!=T&&!(v&&T>k))return!1;var L=x.get(e),$=x.get(i);if(L&&$)return L==i&&$==e;var B=-1,Y=!0,G=s&P?new Qn:n;for(x.set(e,i),x.set(i,e);++B<k;){var J=e[B],oe=i[B];if(d)var Z=v?d(oe,J,B,i,e,x):d(J,oe,B,e,i,x);if(Z!==n){if(Z)continue;Y=!1;break}if(G){if(!mo(i,function(le,he){if(!kr(G,he)&&(J===le||m(J,le,s,d,x)))return G.push(he)})){Y=!1;break}}else if(!(J===oe||m(J,oe,s,d,x))){Y=!1;break}}return x.delete(e),x.delete(i),Y}function Lp(e,i,s,d,m,x,v){switch(s){case K:if(e.byteLength!=i.byteLength||e.byteOffset!=i.byteOffset)return!1;e=e.buffer,i=i.buffer;case q:return!(e.byteLength!=i.byteLength||!x(new li(e),new li(i)));case lt:case Pt:case In:return Gt(+e,+i);case cn:return e.name==i.name&&e.message==i.message;case Sn:case qn:return e==i+"";case xt:var k=_o;case vt:var T=d&S;if(k||(k=ri),e.size!=i.size&&!T)return!1;var L=v.get(e);if(L)return L==i;d|=P,v.set(e,i);var $=Vu(k(e),k(i),d,m,x,v);return v.delete(e),$;case ir:if(Er)return Er.call(e)==Er.call(i)}return!1}function $p(e,i,s,d,m,x){var v=s&S,k=Qo(e),T=k.length,L=Qo(i),$=L.length;if(T!=$&&!v)return!1;for(var B=T;B--;){var Y=k[B];if(!(v?Y in i:ve.call(i,Y)))return!1}var G=x.get(e),J=x.get(i);if(G&&J)return G==i&&J==e;var oe=!0;x.set(e,i),x.set(i,e);for(var Z=v;++B<T;){Y=k[B];var le=e[Y],he=i[Y];if(d)var Tt=v?d(he,le,Y,i,e,x):d(le,he,Y,e,i,x);if(!(Tt===n?le===he||m(le,he,s,d,x):Tt)){oe=!1;break}Z||(Z=Y=="constructor")}if(oe&&!Z){var at=e.constructor,Et=i.constructor;at!=Et&&"constructor"in e&&"constructor"in i&&!(typeof at=="function"&&at instanceof at&&typeof Et=="function"&&Et instanceof Et)&&(oe=!1)}return x.delete(e),x.delete(i),oe}function yn(e){return ta(el(e,n,ll),e+"")}function Qo(e){return pu(e,Xe,Ko)}function Vo(e){return pu(e,ht,Xu)}var Xo=gi?function(e){return gi.get(e)}:pa;function Pi(e){for(var i=e.name+"",s=hr[i],d=ve.call(hr,i)?s.length:0;d--;){var m=s[d],x=m.func;if(x==null||x==e)return m.name}return i}function mr(e){var i=ve.call(b,"placeholder")?b:e;return i.placeholder}function j(){var e=b.iteratee||ha;return e=e===ha?yu:e,arguments.length?e(arguments[0],arguments[1]):e}function Ai(e,i){var s=e.__data__;return Up(i)?s[typeof i=="string"?"string":"hash"]:s.map}function jo(e){for(var i=Xe(e),s=i.length;s--;){var d=i[s],m=e[d];i[s]=[d,m,Ju(m)]}return i}function jn(e,i){var s=Vh(e,i);return mu(s)?s:n}function Bp(e){var i=ve.call(e,Un),s=e[Un];try{e[Un]=n;var d=!0}catch{}var m=si.call(e);return d&&(i?e[Un]=s:delete e[Un]),m}var Ko=Io?function(e){return e==null?[]:(e=Ie(e),Cn(Io(e),function(i){return tu.call(e,i)}))}:ga,Xu=Io?function(e){for(var i=[];e;)Tn(i,Ko(e)),e=ci(e);return i}:ga,tt=it;(So&&tt(new So(new ArrayBuffer(1)))!=K||Sr&&tt(new Sr)!=xt||Co&&tt(Co.resolve())!=jr||fr&&tt(new fr)!=vt||Cr&&tt(new Cr)!=Yn)&&(tt=function(e){var i=it(e),s=i==At?e.constructor:n,d=s?Kn(s):"";if(d)switch(d){case xd:return K;case vd:return xt;case _d:return jr;case kd:return vt;case Id:return Yn}return i});function Np(e,i,s){for(var d=-1,m=s.length;++d<m;){var x=s[d],v=x.size;switch(x.type){case"drop":e+=v;break;case"dropRight":i-=v;break;case"take":i=et(i,e+v);break;case"takeRight":e=Qe(e,i-v);break}}return{start:e,end:i}}function Wp(e){var i=e.match(Gf);return i?i[1].split(Qf):[]}function ju(e,i,s){i=Dn(i,e);for(var d=-1,m=i.length,x=!1;++d<m;){var v=en(i[d]);if(!(x=e!=null&&s(e,v)))break;e=e[v]}return x||++d!=m?x:(m=e==null?0:e.length,!!m&&$i(m)&&wn(v,m)&&(re(e)||Jn(e)))}function zp(e){var i=e.length,s=new e.constructor(i);return i&&typeof e[0]=="string"&&ve.call(e,"index")&&(s.index=e.index,s.input=e.input),s}function Ku(e){return typeof e.constructor=="function"&&!Rr(e)?dr(ci(e)):{}}function qp(e,i,s){var d=e.constructor;switch(i){case q:return Ho(e);case lt:case Pt:return new d(+e);case K:return Sp(e,s);case ae:case ge:case rt:case qt:case _t:case fn:case hn:case je:case Kt:return Ou(e,s);case xt:return new d;case In:case qn:return new d(e);case Sn:return Cp(e);case vt:return new d;case ir:return Tp(e)}}function Yp(e,i){var s=i.length;if(!s)return e;var d=s-1;return i[d]=(s>1?"& ":"")+i[d],i=i.join(s>2?", ":" "),e.replace(Uf,`{
/* [wrapped with `+i+`] */
`)}function Hp(e){return re(e)||Jn(e)||!!(nu&&e&&e[nu])}function wn(e,i){var s=typeof e;return i=i??qe,!!i&&(s=="number"||s!="symbol"&&nh.test(e))&&e>-1&&e%1==0&&e<i}function ot(e,i,s){if(!Me(s))return!1;var d=typeof i;return(d=="number"?ft(s)&&wn(i,s.length):d=="string"&&i in s)?Gt(s[i],e):!1}function Jo(e,i){if(re(e))return!1;var s=typeof e;return s=="number"||s=="symbol"||s=="boolean"||e==null||Ct(e)?!0:zf.test(e)||!Wf.test(e)||i!=null&&e in Ie(i)}function Up(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null}function Zo(e){var i=Pi(e),s=b[i];if(typeof s!="function"||!(i in ce.prototype))return!1;if(e===s)return!0;var d=Xo(s);return!!d&&e===d[0]}function Gp(e){return!!Js&&Js in e}var Qp=oi?bn:ma;function Rr(e){var i=e&&e.constructor,s=typeof i=="function"&&i.prototype||cr;return e===s}function Ju(e){return e===e&&!Me(e)}function Zu(e,i){return function(s){return s==null?!1:s[e]===i&&(i!==n||e in Ie(s))}}function Vp(e){var i=Ri(e,function(d){return s.size===h&&s.clear(),d}),s=i.cache;return i}function Xp(e,i){var s=e[1],d=i[1],m=s|d,x=m<(F|A|U),v=d==U&&s==z||d==U&&s==V&&e[7].length<=i[8]||d==(U|V)&&i[7].length<=i[8]&&s==z;if(!(x||v))return e;d&F&&(e[2]=i[2],m|=s&F?0:N);var k=i[3];if(k){var T=e[3];e[3]=T?Ru(T,k,i[4]):k,e[4]=T?En(e[3],p):i[4]}return k=i[5],k&&(T=e[5],e[5]=T?Lu(T,k,i[6]):k,e[6]=T?En(e[5],p):i[6]),k=i[7],k&&(e[7]=k),d&U&&(e[8]=e[8]==null?i[8]:et(e[8],i[8])),e[9]==null&&(e[9]=i[9]),e[0]=i[0],e[1]=m,e}function jp(e){var i=[];if(e!=null)for(var s in Ie(e))i.push(s);return i}function Kp(e){return si.call(e)}function el(e,i,s){return i=Qe(i===n?e.length-1:i,0),function(){for(var d=arguments,m=-1,x=Qe(d.length-i,0),v=M(x);++m<x;)v[m]=d[i+m];m=-1;for(var k=M(i+1);++m<i;)k[m]=d[m];return k[i]=s(v),kt(e,this,k)}}function tl(e,i){return i.length<2?e:Xn(e,Lt(i,0,-1))}function Jp(e,i){for(var s=e.length,d=et(i.length,s),m=ct(e);d--;){var x=i[d];e[d]=wn(x,s)?m[x]:n}return e}function ea(e,i){if(!(i==="constructor"&&typeof e[i]=="function")&&i!="__proto__")return e[i]}var nl=il(Su),Lr=dd||function(e,i){return Ke.setTimeout(e,i)},ta=il(vp);function rl(e,i,s){var d=i+"";return ta(e,Yp(d,Zp(Wp(d),s)))}function il(e){var i=0,s=0;return function(){var d=yd(),m=be-(d-s);if(s=d,m>0){if(++i>=Q)return arguments[0]}else i=0;return e.apply(n,arguments)}}function Mi(e,i){var s=-1,d=e.length,m=d-1;for(i=i===n?d:i;++s<i;){var x=$o(s,m),v=e[x];e[x]=e[s],e[s]=v}return e.length=i,e}var ol=Vp(function(e){var i=[];return e.charCodeAt(0)===46&&i.push(""),e.replace(qf,function(s,d,m,x){i.push(m?x.replace(jf,"$1"):d||s)}),i});function en(e){if(typeof e=="string"||Ct(e))return e;var i=e+"";return i=="0"&&1/e==-Te?"-0":i}function Kn(e){if(e!=null){try{return ai.call(e)}catch{}try{return e+""}catch{}}return""}function Zp(e,i){return Dt(bt,function(s){var d="_."+s[0];i&s[1]&&!ti(e,d)&&e.push(d)}),e.sort()}function al(e){if(e instanceof ce)return e.clone();var i=new Ft(e.__wrapped__,e.__chain__);return i.__actions__=ct(e.__actions__),i.__index__=e.__index__,i.__values__=e.__values__,i}function eg(e,i,s){(s?ot(e,i,s):i===n)?i=1:i=Qe(ie(i),0);var d=e==null?0:e.length;if(!d||i<1)return[];for(var m=0,x=0,v=M(di(d/i));m<d;)v[x++]=Lt(e,m,m+=i);return v}function tg(e){for(var i=-1,s=e==null?0:e.length,d=0,m=[];++i<s;){var x=e[i];x&&(m[d++]=x)}return m}function ng(){var e=arguments.length;if(!e)return[];for(var i=M(e-1),s=arguments[0],d=e;d--;)i[d-1]=arguments[d];return Tn(re(s)?ct(s):[s],Je(i,1))}var rg=se(function(e,i){return Be(e)?Ar(e,Je(i,1,Be,!0)):[]}),ig=se(function(e,i){var s=$t(i);return Be(s)&&(s=n),Be(e)?Ar(e,Je(i,1,Be,!0),j(s,2)):[]}),og=se(function(e,i){var s=$t(i);return Be(s)&&(s=n),Be(e)?Ar(e,Je(i,1,Be,!0),n,s):[]});function ag(e,i,s){var d=e==null?0:e.length;return d?(i=s||i===n?1:ie(i),Lt(e,i<0?0:i,d)):[]}function sg(e,i,s){var d=e==null?0:e.length;return d?(i=s||i===n?1:ie(i),i=d-i,Lt(e,0,i<0?0:i)):[]}function ug(e,i){return e&&e.length?ki(e,j(i,3),!0,!0):[]}function lg(e,i){return e&&e.length?ki(e,j(i,3),!0):[]}function cg(e,i,s,d){var m=e==null?0:e.length;return m?(s&&typeof s!="number"&&ot(e,i,s)&&(s=0,d=m),np(e,i,s,d)):[]}function sl(e,i,s){var d=e==null?0:e.length;if(!d)return-1;var m=s==null?0:ie(s);return m<0&&(m=Qe(d+m,0)),ni(e,j(i,3),m)}function ul(e,i,s){var d=e==null?0:e.length;if(!d)return-1;var m=d-1;return s!==n&&(m=ie(s),m=s<0?Qe(d+m,0):et(m,d-1)),ni(e,j(i,3),m,!0)}function ll(e){var i=e==null?0:e.length;return i?Je(e,1):[]}function fg(e){var i=e==null?0:e.length;return i?Je(e,Te):[]}function hg(e,i){var s=e==null?0:e.length;return s?(i=i===n?1:ie(i),Je(e,i)):[]}function dg(e){for(var i=-1,s=e==null?0:e.length,d={};++i<s;){var m=e[i];d[m[0]]=m[1]}return d}function cl(e){return e&&e.length?e[0]:n}function pg(e,i,s){var d=e==null?0:e.length;if(!d)return-1;var m=s==null?0:ie(s);return m<0&&(m=Qe(d+m,0)),ar(e,i,m)}function gg(e){var i=e==null?0:e.length;return i?Lt(e,0,-1):[]}var mg=se(function(e){var i=Pe(e,qo);return i.length&&i[0]===e[0]?Do(i):[]}),yg=se(function(e){var i=$t(e),s=Pe(e,qo);return i===$t(s)?i=n:s.pop(),s.length&&s[0]===e[0]?Do(s,j(i,2)):[]}),wg=se(function(e){var i=$t(e),s=Pe(e,qo);return i=typeof i=="function"?i:n,i&&s.pop(),s.length&&s[0]===e[0]?Do(s,n,i):[]});function bg(e,i){return e==null?"":gd.call(e,i)}function $t(e){var i=e==null?0:e.length;return i?e[i-1]:n}function xg(e,i,s){var d=e==null?0:e.length;if(!d)return-1;var m=d;return s!==n&&(m=ie(s),m=m<0?Qe(d+m,0):et(m,d-1)),i===i?Zh(e,i,m):ni(e,Hs,m,!0)}function vg(e,i){return e&&e.length?vu(e,ie(i)):n}var _g=se(fl);function fl(e,i){return e&&e.length&&i&&i.length?Lo(e,i):e}function kg(e,i,s){return e&&e.length&&i&&i.length?Lo(e,i,j(s,2)):e}function Ig(e,i,s){return e&&e.length&&i&&i.length?Lo(e,i,n,s):e}var Sg=yn(function(e,i){var s=e==null?0:e.length,d=Eo(e,i);return Iu(e,Pe(i,function(m){return wn(m,s)?+m:m}).sort(Fu)),d});function Cg(e,i){var s=[];if(!(e&&e.length))return s;var d=-1,m=[],x=e.length;for(i=j(i,3);++d<x;){var v=e[d];i(v,d,e)&&(s.push(v),m.push(d))}return Iu(e,m),s}function na(e){return e==null?e:bd.call(e)}function Tg(e,i,s){var d=e==null?0:e.length;return d?(s&&typeof s!="number"&&ot(e,i,s)?(i=0,s=d):(i=i==null?0:ie(i),s=s===n?d:ie(s)),Lt(e,i,s)):[]}function Eg(e,i){return _i(e,i)}function Pg(e,i,s){return No(e,i,j(s,2))}function Ag(e,i){var s=e==null?0:e.length;if(s){var d=_i(e,i);if(d<s&&Gt(e[d],i))return d}return-1}function Mg(e,i){return _i(e,i,!0)}function Dg(e,i,s){return No(e,i,j(s,2),!0)}function Og(e,i){var s=e==null?0:e.length;if(s){var d=_i(e,i,!0)-1;if(Gt(e[d],i))return d}return-1}function Fg(e){return e&&e.length?Cu(e):[]}function Rg(e,i){return e&&e.length?Cu(e,j(i,2)):[]}function Lg(e){var i=e==null?0:e.length;return i?Lt(e,1,i):[]}function $g(e,i,s){return e&&e.length?(i=s||i===n?1:ie(i),Lt(e,0,i<0?0:i)):[]}function Bg(e,i,s){var d=e==null?0:e.length;return d?(i=s||i===n?1:ie(i),i=d-i,Lt(e,i<0?0:i,d)):[]}function Ng(e,i){return e&&e.length?ki(e,j(i,3),!1,!0):[]}function Wg(e,i){return e&&e.length?ki(e,j(i,3)):[]}var zg=se(function(e){return Mn(Je(e,1,Be,!0))}),qg=se(function(e){var i=$t(e);return Be(i)&&(i=n),Mn(Je(e,1,Be,!0),j(i,2))}),Yg=se(function(e){var i=$t(e);return i=typeof i=="function"?i:n,Mn(Je(e,1,Be,!0),n,i)});function Hg(e){return e&&e.length?Mn(e):[]}function Ug(e,i){return e&&e.length?Mn(e,j(i,2)):[]}function Gg(e,i){return i=typeof i=="function"?i:n,e&&e.length?Mn(e,n,i):[]}function ra(e){if(!(e&&e.length))return[];var i=0;return e=Cn(e,function(s){if(Be(s))return i=Qe(s.length,i),!0}),xo(i,function(s){return Pe(e,yo(s))})}function hl(e,i){if(!(e&&e.length))return[];var s=ra(e);return i==null?s:Pe(s,function(d){return kt(i,n,d)})}var Qg=se(function(e,i){return Be(e)?Ar(e,i):[]}),Vg=se(function(e){return zo(Cn(e,Be))}),Xg=se(function(e){var i=$t(e);return Be(i)&&(i=n),zo(Cn(e,Be),j(i,2))}),jg=se(function(e){var i=$t(e);return i=typeof i=="function"?i:n,zo(Cn(e,Be),n,i)}),Kg=se(ra);function Jg(e,i){return Au(e||[],i||[],Pr)}function Zg(e,i){return Au(e||[],i||[],Or)}var em=se(function(e){var i=e.length,s=i>1?e[i-1]:n;return s=typeof s=="function"?(e.pop(),s):n,hl(e,s)});function dl(e){var i=b(e);return i.__chain__=!0,i}function tm(e,i){return i(e),e}function Di(e,i){return i(e)}var nm=yn(function(e){var i=e.length,s=i?e[0]:0,d=this.__wrapped__,m=function(x){return Eo(x,e)};return i>1||this.__actions__.length||!(d instanceof ce)||!wn(s)?this.thru(m):(d=d.slice(s,+s+(i?1:0)),d.__actions__.push({func:Di,args:[m],thisArg:n}),new Ft(d,this.__chain__).thru(function(x){return i&&!x.length&&x.push(n),x}))});function rm(){return dl(this)}function im(){return new Ft(this.value(),this.__chain__)}function om(){this.__values__===n&&(this.__values__=Tl(this.value()));var e=this.__index__>=this.__values__.length,i=e?n:this.__values__[this.__index__++];return{done:e,value:i}}function am(){return this}function sm(e){for(var i,s=this;s instanceof yi;){var d=al(s);d.__index__=0,d.__values__=n,i?m.__wrapped__=d:i=d;var m=d;s=s.__wrapped__}return m.__wrapped__=e,i}function um(){var e=this.__wrapped__;if(e instanceof ce){var i=e;return this.__actions__.length&&(i=new ce(this)),i=i.reverse(),i.__actions__.push({func:Di,args:[na],thisArg:n}),new Ft(i,this.__chain__)}return this.thru(na)}function lm(){return Pu(this.__wrapped__,this.__actions__)}var cm=Ii(function(e,i,s){ve.call(e,s)?++e[s]:gn(e,s,1)});function fm(e,i,s){var d=re(e)?qs:tp;return s&&ot(e,i,s)&&(i=n),d(e,j(i,3))}function hm(e,i){var s=re(e)?Cn:hu;return s(e,j(i,3))}var dm=Wu(sl),pm=Wu(ul);function gm(e,i){return Je(Oi(e,i),1)}function mm(e,i){return Je(Oi(e,i),Te)}function ym(e,i,s){return s=s===n?1:ie(s),Je(Oi(e,i),s)}function pl(e,i){var s=re(e)?Dt:An;return s(e,j(i,3))}function gl(e,i){var s=re(e)?Lh:fu;return s(e,j(i,3))}var wm=Ii(function(e,i,s){ve.call(e,s)?e[s].push(i):gn(e,s,[i])});function bm(e,i,s,d){e=ft(e)?e:wr(e),s=s&&!d?ie(s):0;var m=e.length;return s<0&&(s=Qe(m+s,0)),Bi(e)?s<=m&&e.indexOf(i,s)>-1:!!m&&ar(e,i,s)>-1}var xm=se(function(e,i,s){var d=-1,m=typeof i=="function",x=ft(e)?M(e.length):[];return An(e,function(v){x[++d]=m?kt(i,v,s):Mr(v,i,s)}),x}),vm=Ii(function(e,i,s){gn(e,s,i)});function Oi(e,i){var s=re(e)?Pe:wu;return s(e,j(i,3))}function _m(e,i,s,d){return e==null?[]:(re(i)||(i=i==null?[]:[i]),s=d?n:s,re(s)||(s=s==null?[]:[s]),_u(e,i,s))}var km=Ii(function(e,i,s){e[s?0:1].push(i)},function(){return[[],[]]});function Im(e,i,s){var d=re(e)?go:Gs,m=arguments.length<3;return d(e,j(i,4),s,m,An)}function Sm(e,i,s){var d=re(e)?$h:Gs,m=arguments.length<3;return d(e,j(i,4),s,m,fu)}function Cm(e,i){var s=re(e)?Cn:hu;return s(e,Li(j(i,3)))}function Tm(e){var i=re(e)?su:bp;return i(e)}function Em(e,i,s){(s?ot(e,i,s):i===n)?i=1:i=ie(i);var d=re(e)?jd:xp;return d(e,i)}function Pm(e){var i=re(e)?Kd:_p;return i(e)}function Am(e){if(e==null)return 0;if(ft(e))return Bi(e)?ur(e):e.length;var i=tt(e);return i==xt||i==vt?e.size:Fo(e).length}function Mm(e,i,s){var d=re(e)?mo:kp;return s&&ot(e,i,s)&&(i=n),d(e,j(i,3))}var Dm=se(function(e,i){if(e==null)return[];var s=i.length;return s>1&&ot(e,i[0],i[1])?i=[]:s>2&&ot(i[0],i[1],i[2])&&(i=[i[0]]),_u(e,Je(i,1),[])}),Fi=hd||function(){return Ke.Date.now()};function Om(e,i){if(typeof i!="function")throw new Ot(l);return e=ie(e),function(){if(--e<1)return i.apply(this,arguments)}}function ml(e,i,s){return i=s?n:i,i=e&&i==null?e.length:i,mn(e,U,n,n,n,n,i)}function yl(e,i){var s;if(typeof i!="function")throw new Ot(l);return e=ie(e),function(){return--e>0&&(s=i.apply(this,arguments)),e<=1&&(i=n),s}}var ia=se(function(e,i,s){var d=F;if(s.length){var m=En(s,mr(ia));d|=D}return mn(e,d,i,s,m)}),wl=se(function(e,i,s){var d=F|A;if(s.length){var m=En(s,mr(wl));d|=D}return mn(i,d,e,s,m)});function bl(e,i,s){i=s?n:i;var d=mn(e,z,n,n,n,n,n,i);return d.placeholder=bl.placeholder,d}function xl(e,i,s){i=s?n:i;var d=mn(e,W,n,n,n,n,n,i);return d.placeholder=xl.placeholder,d}function vl(e,i,s){var d,m,x,v,k,T,L=0,$=!1,B=!1,Y=!0;if(typeof e!="function")throw new Ot(l);i=Bt(i)||0,Me(s)&&($=!!s.leading,B="maxWait"in s,x=B?Qe(Bt(s.maxWait)||0,i):x,Y="trailing"in s?!!s.trailing:Y);function G(Ne){var Qt=d,vn=m;return d=m=n,L=Ne,v=e.apply(vn,Qt),v}function J(Ne){return L=Ne,k=Lr(le,i),$?G(Ne):v}function oe(Ne){var Qt=Ne-T,vn=Ne-L,Wl=i-Qt;return B?et(Wl,x-vn):Wl}function Z(Ne){var Qt=Ne-T,vn=Ne-L;return T===n||Qt>=i||Qt<0||B&&vn>=x}function le(){var Ne=Fi();if(Z(Ne))return he(Ne);k=Lr(le,oe(Ne))}function he(Ne){return k=n,Y&&d?G(Ne):(d=m=n,v)}function Tt(){k!==n&&Mu(k),L=0,d=T=m=k=n}function at(){return k===n?v:he(Fi())}function Et(){var Ne=Fi(),Qt=Z(Ne);if(d=arguments,m=this,T=Ne,Qt){if(k===n)return J(T);if(B)return Mu(k),k=Lr(le,i),G(T)}return k===n&&(k=Lr(le,i)),v}return Et.cancel=Tt,Et.flush=at,Et}var Fm=se(function(e,i){return cu(e,1,i)}),Rm=se(function(e,i,s){return cu(e,Bt(i)||0,s)});function Lm(e){return mn(e,ee)}function Ri(e,i){if(typeof e!="function"||i!=null&&typeof i!="function")throw new Ot(l);var s=function(){var d=arguments,m=i?i.apply(this,d):d[0],x=s.cache;if(x.has(m))return x.get(m);var v=e.apply(this,d);return s.cache=x.set(m,v)||x,v};return s.cache=new(Ri.Cache||pn),s}Ri.Cache=pn;function Li(e){if(typeof e!="function")throw new Ot(l);return function(){var i=arguments;switch(i.length){case 0:return!e.call(this);case 1:return!e.call(this,i[0]);case 2:return!e.call(this,i[0],i[1]);case 3:return!e.call(this,i[0],i[1],i[2])}return!e.apply(this,i)}}function $m(e){return yl(2,e)}var Bm=Ip(function(e,i){i=i.length==1&&re(i[0])?Pe(i[0],It(j())):Pe(Je(i,1),It(j()));var s=i.length;return se(function(d){for(var m=-1,x=et(d.length,s);++m<x;)d[m]=i[m].call(this,d[m]);return kt(e,this,d)})}),oa=se(function(e,i){var s=En(i,mr(oa));return mn(e,D,n,i,s)}),_l=se(function(e,i){var s=En(i,mr(_l));return mn(e,E,n,i,s)}),Nm=yn(function(e,i){return mn(e,V,n,n,n,i)});function Wm(e,i){if(typeof e!="function")throw new Ot(l);return i=i===n?i:ie(i),se(e,i)}function zm(e,i){if(typeof e!="function")throw new Ot(l);return i=i==null?0:Qe(ie(i),0),se(function(s){var d=s[i],m=On(s,0,i);return d&&Tn(m,d),kt(e,this,m)})}function qm(e,i,s){var d=!0,m=!0;if(typeof e!="function")throw new Ot(l);return Me(s)&&(d="leading"in s?!!s.leading:d,m="trailing"in s?!!s.trailing:m),vl(e,i,{leading:d,maxWait:i,trailing:m})}function Ym(e){return ml(e,1)}function Hm(e,i){return oa(Yo(i),e)}function Um(){if(!arguments.length)return[];var e=arguments[0];return re(e)?e:[e]}function Gm(e){return Rt(e,y)}function Qm(e,i){return i=typeof i=="function"?i:n,Rt(e,y,i)}function Vm(e){return Rt(e,g|y)}function Xm(e,i){return i=typeof i=="function"?i:n,Rt(e,g|y,i)}function jm(e,i){return i==null||lu(e,i,Xe(i))}function Gt(e,i){return e===i||e!==e&&i!==i}var Km=Ei(Mo),Jm=Ei(function(e,i){return e>=i}),Jn=gu((function(){return arguments})())?gu:function(e){return Le(e)&&ve.call(e,"callee")&&!tu.call(e,"callee")},re=M.isArray,Zm=Ls?It(Ls):sp;function ft(e){return e!=null&&$i(e.length)&&!bn(e)}function Be(e){return Le(e)&&ft(e)}function e0(e){return e===!0||e===!1||Le(e)&&it(e)==lt}var Fn=pd||ma,t0=$s?It($s):up;function n0(e){return Le(e)&&e.nodeType===1&&!$r(e)}function r0(e){if(e==null)return!0;if(ft(e)&&(re(e)||typeof e=="string"||typeof e.splice=="function"||Fn(e)||yr(e)||Jn(e)))return!e.length;var i=tt(e);if(i==xt||i==vt)return!e.size;if(Rr(e))return!Fo(e).length;for(var s in e)if(ve.call(e,s))return!1;return!0}function i0(e,i){return Dr(e,i)}function o0(e,i,s){s=typeof s=="function"?s:n;var d=s?s(e,i):n;return d===n?Dr(e,i,n,s):!!d}function aa(e){if(!Le(e))return!1;var i=it(e);return i==cn||i==kn||typeof e.message=="string"&&typeof e.name=="string"&&!$r(e)}function a0(e){return typeof e=="number"&&ru(e)}function bn(e){if(!Me(e))return!1;var i=it(e);return i==rr||i==Vr||i==zn||i==Kr}function kl(e){return typeof e=="number"&&e==ie(e)}function $i(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=qe}function Me(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}function Le(e){return e!=null&&typeof e=="object"}var Il=Bs?It(Bs):cp;function s0(e,i){return e===i||Oo(e,i,jo(i))}function u0(e,i,s){return s=typeof s=="function"?s:n,Oo(e,i,jo(i),s)}function l0(e){return Sl(e)&&e!=+e}function c0(e){if(Qp(e))throw new ne(u);return mu(e)}function f0(e){return e===null}function h0(e){return e==null}function Sl(e){return typeof e=="number"||Le(e)&&it(e)==In}function $r(e){if(!Le(e)||it(e)!=At)return!1;var i=ci(e);if(i===null)return!0;var s=ve.call(i,"constructor")&&i.constructor;return typeof s=="function"&&s instanceof s&&ai.call(s)==ud}var sa=Ns?It(Ns):fp;function d0(e){return kl(e)&&e>=-qe&&e<=qe}var Cl=Ws?It(Ws):hp;function Bi(e){return typeof e=="string"||!re(e)&&Le(e)&&it(e)==qn}function Ct(e){return typeof e=="symbol"||Le(e)&&it(e)==ir}var yr=zs?It(zs):dp;function p0(e){return e===n}function g0(e){return Le(e)&&tt(e)==Yn}function m0(e){return Le(e)&&it(e)==R}var y0=Ei(Ro),w0=Ei(function(e,i){return e<=i});function Tl(e){if(!e)return[];if(ft(e))return Bi(e)?Ht(e):ct(e);if(Ir&&e[Ir])return jh(e[Ir]());var i=tt(e),s=i==xt?_o:i==vt?ri:wr;return s(e)}function xn(e){if(!e)return e===0?e:0;if(e=Bt(e),e===Te||e===-Te){var i=e<0?-1:1;return i*Wt}return e===e?e:0}function ie(e){var i=xn(e),s=i%1;return i===i?s?i-s:i:0}function El(e){return e?Vn(ie(e),0,Fe):0}function Bt(e){if(typeof e=="number")return e;if(Ct(e))return _;if(Me(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=Me(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=Qs(e);var s=Zf.test(e);return s||th.test(e)?Oh(e.slice(2),s?2:8):Jf.test(e)?_:+e}function Pl(e){return Zt(e,ht(e))}function b0(e){return e?Vn(ie(e),-qe,qe):e===0?e:0}function xe(e){return e==null?"":St(e)}var x0=pr(function(e,i){if(Rr(i)||ft(i)){Zt(i,Xe(i),e);return}for(var s in i)ve.call(i,s)&&Pr(e,s,i[s])}),Al=pr(function(e,i){Zt(i,ht(i),e)}),Ni=pr(function(e,i,s,d){Zt(i,ht(i),e,d)}),v0=pr(function(e,i,s,d){Zt(i,Xe(i),e,d)}),_0=yn(Eo);function k0(e,i){var s=dr(e);return i==null?s:uu(s,i)}var I0=se(function(e,i){e=Ie(e);var s=-1,d=i.length,m=d>2?i[2]:n;for(m&&ot(i[0],i[1],m)&&(d=1);++s<d;)for(var x=i[s],v=ht(x),k=-1,T=v.length;++k<T;){var L=v[k],$=e[L];($===n||Gt($,cr[L])&&!ve.call(e,L))&&(e[L]=x[L])}return e}),S0=se(function(e){return e.push(n,Qu),kt(Ml,n,e)});function C0(e,i){return Ys(e,j(i,3),Jt)}function T0(e,i){return Ys(e,j(i,3),Ao)}function E0(e,i){return e==null?e:Po(e,j(i,3),ht)}function P0(e,i){return e==null?e:du(e,j(i,3),ht)}function A0(e,i){return e&&Jt(e,j(i,3))}function M0(e,i){return e&&Ao(e,j(i,3))}function D0(e){return e==null?[]:xi(e,Xe(e))}function O0(e){return e==null?[]:xi(e,ht(e))}function ua(e,i,s){var d=e==null?n:Xn(e,i);return d===n?s:d}function F0(e,i){return e!=null&&ju(e,i,rp)}function la(e,i){return e!=null&&ju(e,i,ip)}var R0=qu(function(e,i,s){i!=null&&typeof i.toString!="function"&&(i=si.call(i)),e[i]=s},fa(dt)),L0=qu(function(e,i,s){i!=null&&typeof i.toString!="function"&&(i=si.call(i)),ve.call(e,i)?e[i].push(s):e[i]=[s]},j),$0=se(Mr);function Xe(e){return ft(e)?au(e):Fo(e)}function ht(e){return ft(e)?au(e,!0):pp(e)}function B0(e,i){var s={};return i=j(i,3),Jt(e,function(d,m,x){gn(s,i(d,m,x),d)}),s}function N0(e,i){var s={};return i=j(i,3),Jt(e,function(d,m,x){gn(s,m,i(d,m,x))}),s}var W0=pr(function(e,i,s){vi(e,i,s)}),Ml=pr(function(e,i,s,d){vi(e,i,s,d)}),z0=yn(function(e,i){var s={};if(e==null)return s;var d=!1;i=Pe(i,function(x){return x=Dn(x,e),d||(d=x.length>1),x}),Zt(e,Vo(e),s),d&&(s=Rt(s,g|w|y,Rp));for(var m=i.length;m--;)Wo(s,i[m]);return s});function q0(e,i){return Dl(e,Li(j(i)))}var Y0=yn(function(e,i){return e==null?{}:mp(e,i)});function Dl(e,i){if(e==null)return{};var s=Pe(Vo(e),function(d){return[d]});return i=j(i),ku(e,s,function(d,m){return i(d,m[0])})}function H0(e,i,s){i=Dn(i,e);var d=-1,m=i.length;for(m||(m=1,e=n);++d<m;){var x=e==null?n:e[en(i[d])];x===n&&(d=m,x=s),e=bn(x)?x.call(e):x}return e}function U0(e,i,s){return e==null?e:Or(e,i,s)}function G0(e,i,s,d){return d=typeof d=="function"?d:n,e==null?e:Or(e,i,s,d)}var Ol=Uu(Xe),Fl=Uu(ht);function Q0(e,i,s){var d=re(e),m=d||Fn(e)||yr(e);if(i=j(i,4),s==null){var x=e&&e.constructor;m?s=d?new x:[]:Me(e)?s=bn(x)?dr(ci(e)):{}:s={}}return(m?Dt:Jt)(e,function(v,k,T){return i(s,v,k,T)}),s}function V0(e,i){return e==null?!0:Wo(e,i)}function X0(e,i,s){return e==null?e:Eu(e,i,Yo(s))}function j0(e,i,s,d){return d=typeof d=="function"?d:n,e==null?e:Eu(e,i,Yo(s),d)}function wr(e){return e==null?[]:vo(e,Xe(e))}function K0(e){return e==null?[]:vo(e,ht(e))}function J0(e,i,s){return s===n&&(s=i,i=n),s!==n&&(s=Bt(s),s=s===s?s:0),i!==n&&(i=Bt(i),i=i===i?i:0),Vn(Bt(e),i,s)}function Z0(e,i,s){return i=xn(i),s===n?(s=i,i=0):s=xn(s),e=Bt(e),op(e,i,s)}function e1(e,i,s){if(s&&typeof s!="boolean"&&ot(e,i,s)&&(i=s=n),s===n&&(typeof i=="boolean"?(s=i,i=n):typeof e=="boolean"&&(s=e,e=n)),e===n&&i===n?(e=0,i=1):(e=xn(e),i===n?(i=e,e=0):i=xn(i)),e>i){var d=e;e=i,i=d}if(s||e%1||i%1){var m=iu();return et(e+m*(i-e+Dh("1e-"+((m+"").length-1))),i)}return $o(e,i)}var t1=gr(function(e,i,s){return i=i.toLowerCase(),e+(s?Rl(i):i)});function Rl(e){return ca(xe(e).toLowerCase())}function Ll(e){return e=xe(e),e&&e.replace(rh,Uh).replace(_h,"")}function n1(e,i,s){e=xe(e),i=St(i);var d=e.length;s=s===n?d:Vn(ie(s),0,d);var m=s;return s-=i.length,s>=0&&e.slice(s,m)==i}function r1(e){return e=xe(e),e&&$f.test(e)?e.replace(ds,Gh):e}function i1(e){return e=xe(e),e&&Yf.test(e)?e.replace(io,"\\$&"):e}var o1=gr(function(e,i,s){return e+(s?"-":"")+i.toLowerCase()}),a1=gr(function(e,i,s){return e+(s?" ":"")+i.toLowerCase()}),s1=Nu("toLowerCase");function u1(e,i,s){e=xe(e),i=ie(i);var d=i?ur(e):0;if(!i||d>=i)return e;var m=(i-d)/2;return Ti(pi(m),s)+e+Ti(di(m),s)}function l1(e,i,s){e=xe(e),i=ie(i);var d=i?ur(e):0;return i&&d<i?e+Ti(i-d,s):e}function c1(e,i,s){e=xe(e),i=ie(i);var d=i?ur(e):0;return i&&d<i?Ti(i-d,s)+e:e}function f1(e,i,s){return s||i==null?i=0:i&&(i=+i),wd(xe(e).replace(oo,""),i||0)}function h1(e,i,s){return(s?ot(e,i,s):i===n)?i=1:i=ie(i),Bo(xe(e),i)}function d1(){var e=arguments,i=xe(e[0]);return e.length<3?i:i.replace(e[1],e[2])}var p1=gr(function(e,i,s){return e+(s?"_":"")+i.toLowerCase()});function g1(e,i,s){return s&&typeof s!="number"&&ot(e,i,s)&&(i=s=n),s=s===n?Fe:s>>>0,s?(e=xe(e),e&&(typeof i=="string"||i!=null&&!sa(i))&&(i=St(i),!i&&sr(e))?On(Ht(e),0,s):e.split(i,s)):[]}var m1=gr(function(e,i,s){return e+(s?" ":"")+ca(i)});function y1(e,i,s){return e=xe(e),s=s==null?0:Vn(ie(s),0,e.length),i=St(i),e.slice(s,s+i.length)==i}function w1(e,i,s){var d=b.templateSettings;s&&ot(e,i,s)&&(i=n),e=xe(e),i=Ni({},i,d,Gu);var m=Ni({},i.imports,d.imports,Gu),x=Xe(m),v=vo(m,x),k,T,L=0,$=i.interpolate||Jr,B="__p += '",Y=ko((i.escape||Jr).source+"|"+$.source+"|"+($===ps?Kf:Jr).source+"|"+(i.evaluate||Jr).source+"|$","g"),G="//# sourceURL="+(ve.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Th+"]")+`
`;e.replace(Y,function(Z,le,he,Tt,at,Et){return he||(he=Tt),B+=e.slice(L,Et).replace(ih,Qh),le&&(k=!0,B+=`' +
__e(`+le+`) +
'`),at&&(T=!0,B+=`';
`+at+`;
__p += '`),he&&(B+=`' +
((__t = (`+he+`)) == null ? '' : __t) +
'`),L=Et+Z.length,Z}),B+=`';
`;var J=ve.call(i,"variable")&&i.variable;if(!J)B=`with (obj) {
`+B+`
}
`;else if(Xf.test(J))throw new ne(c);B=(T?B.replace(Yt,""):B).replace(Ff,"$1").replace(Rf,"$1;"),B="function("+(J||"obj")+`) {
`+(J?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(k?", __e = _.escape":"")+(T?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+B+`return __p
}`;var oe=Bl(function(){return me(x,G+"return "+B).apply(n,v)});if(oe.source=B,aa(oe))throw oe;return oe}function b1(e){return xe(e).toLowerCase()}function x1(e){return xe(e).toUpperCase()}function v1(e,i,s){if(e=xe(e),e&&(s||i===n))return Qs(e);if(!e||!(i=St(i)))return e;var d=Ht(e),m=Ht(i),x=Vs(d,m),v=Xs(d,m)+1;return On(d,x,v).join("")}function _1(e,i,s){if(e=xe(e),e&&(s||i===n))return e.slice(0,Ks(e)+1);if(!e||!(i=St(i)))return e;var d=Ht(e),m=Xs(d,Ht(i))+1;return On(d,0,m).join("")}function k1(e,i,s){if(e=xe(e),e&&(s||i===n))return e.replace(oo,"");if(!e||!(i=St(i)))return e;var d=Ht(e),m=Vs(d,Ht(i));return On(d,m).join("")}function I1(e,i){var s=de,d=X;if(Me(i)){var m="separator"in i?i.separator:m;s="length"in i?ie(i.length):s,d="omission"in i?St(i.omission):d}e=xe(e);var x=e.length;if(sr(e)){var v=Ht(e);x=v.length}if(s>=x)return e;var k=s-ur(d);if(k<1)return d;var T=v?On(v,0,k).join(""):e.slice(0,k);if(m===n)return T+d;if(v&&(k+=T.length-k),sa(m)){if(e.slice(k).search(m)){var L,$=T;for(m.global||(m=ko(m.source,xe(gs.exec(m))+"g")),m.lastIndex=0;L=m.exec($);)var B=L.index;T=T.slice(0,B===n?k:B)}}else if(e.indexOf(St(m),k)!=k){var Y=T.lastIndexOf(m);Y>-1&&(T=T.slice(0,Y))}return T+d}function S1(e){return e=xe(e),e&&Lf.test(e)?e.replace(hs,ed):e}var C1=gr(function(e,i,s){return e+(s?" ":"")+i.toUpperCase()}),ca=Nu("toUpperCase");function $l(e,i,s){return e=xe(e),i=s?n:i,i===n?Xh(e)?rd(e):Wh(e):e.match(i)||[]}var Bl=se(function(e,i){try{return kt(e,n,i)}catch(s){return aa(s)?s:new ne(s)}}),T1=yn(function(e,i){return Dt(i,function(s){s=en(s),gn(e,s,ia(e[s],e))}),e});function E1(e){var i=e==null?0:e.length,s=j();return e=i?Pe(e,function(d){if(typeof d[1]!="function")throw new Ot(l);return[s(d[0]),d[1]]}):[],se(function(d){for(var m=-1;++m<i;){var x=e[m];if(kt(x[0],this,d))return kt(x[1],this,d)}})}function P1(e){return ep(Rt(e,g))}function fa(e){return function(){return e}}function A1(e,i){return e==null||e!==e?i:e}var M1=zu(),D1=zu(!0);function dt(e){return e}function ha(e){return yu(typeof e=="function"?e:Rt(e,g))}function O1(e){return bu(Rt(e,g))}function F1(e,i){return xu(e,Rt(i,g))}var R1=se(function(e,i){return function(s){return Mr(s,e,i)}}),L1=se(function(e,i){return function(s){return Mr(e,s,i)}});function da(e,i,s){var d=Xe(i),m=xi(i,d);s==null&&!(Me(i)&&(m.length||!d.length))&&(s=i,i=e,e=this,m=xi(i,Xe(i)));var x=!(Me(s)&&"chain"in s)||!!s.chain,v=bn(e);return Dt(m,function(k){var T=i[k];e[k]=T,v&&(e.prototype[k]=function(){var L=this.__chain__;if(x||L){var $=e(this.__wrapped__),B=$.__actions__=ct(this.__actions__);return B.push({func:T,args:arguments,thisArg:e}),$.__chain__=L,$}return T.apply(e,Tn([this.value()],arguments))})}),e}function $1(){return Ke._===this&&(Ke._=ld),this}function pa(){}function B1(e){return e=ie(e),se(function(i){return vu(i,e)})}var N1=Uo(Pe),W1=Uo(qs),z1=Uo(mo);function Nl(e){return Jo(e)?yo(en(e)):yp(e)}function q1(e){return function(i){return e==null?n:Xn(e,i)}}var Y1=Yu(),H1=Yu(!0);function ga(){return[]}function ma(){return!1}function U1(){return{}}function G1(){return""}function Q1(){return!0}function V1(e,i){if(e=ie(e),e<1||e>qe)return[];var s=Fe,d=et(e,Fe);i=j(i),e-=Fe;for(var m=xo(d,i);++s<e;)i(s);return m}function X1(e){return re(e)?Pe(e,en):Ct(e)?[e]:ct(ol(xe(e)))}function j1(e){var i=++sd;return xe(e)+i}var K1=Ci(function(e,i){return e+i},0),J1=Go("ceil"),Z1=Ci(function(e,i){return e/i},1),ey=Go("floor");function ty(e){return e&&e.length?bi(e,dt,Mo):n}function ny(e,i){return e&&e.length?bi(e,j(i,2),Mo):n}function ry(e){return Us(e,dt)}function iy(e,i){return Us(e,j(i,2))}function oy(e){return e&&e.length?bi(e,dt,Ro):n}function ay(e,i){return e&&e.length?bi(e,j(i,2),Ro):n}var sy=Ci(function(e,i){return e*i},1),uy=Go("round"),ly=Ci(function(e,i){return e-i},0);function cy(e){return e&&e.length?bo(e,dt):0}function fy(e,i){return e&&e.length?bo(e,j(i,2)):0}return b.after=Om,b.ary=ml,b.assign=x0,b.assignIn=Al,b.assignInWith=Ni,b.assignWith=v0,b.at=_0,b.before=yl,b.bind=ia,b.bindAll=T1,b.bindKey=wl,b.castArray=Um,b.chain=dl,b.chunk=eg,b.compact=tg,b.concat=ng,b.cond=E1,b.conforms=P1,b.constant=fa,b.countBy=cm,b.create=k0,b.curry=bl,b.curryRight=xl,b.debounce=vl,b.defaults=I0,b.defaultsDeep=S0,b.defer=Fm,b.delay=Rm,b.difference=rg,b.differenceBy=ig,b.differenceWith=og,b.drop=ag,b.dropRight=sg,b.dropRightWhile=ug,b.dropWhile=lg,b.fill=cg,b.filter=hm,b.flatMap=gm,b.flatMapDeep=mm,b.flatMapDepth=ym,b.flatten=ll,b.flattenDeep=fg,b.flattenDepth=hg,b.flip=Lm,b.flow=M1,b.flowRight=D1,b.fromPairs=dg,b.functions=D0,b.functionsIn=O0,b.groupBy=wm,b.initial=gg,b.intersection=mg,b.intersectionBy=yg,b.intersectionWith=wg,b.invert=R0,b.invertBy=L0,b.invokeMap=xm,b.iteratee=ha,b.keyBy=vm,b.keys=Xe,b.keysIn=ht,b.map=Oi,b.mapKeys=B0,b.mapValues=N0,b.matches=O1,b.matchesProperty=F1,b.memoize=Ri,b.merge=W0,b.mergeWith=Ml,b.method=R1,b.methodOf=L1,b.mixin=da,b.negate=Li,b.nthArg=B1,b.omit=z0,b.omitBy=q0,b.once=$m,b.orderBy=_m,b.over=N1,b.overArgs=Bm,b.overEvery=W1,b.overSome=z1,b.partial=oa,b.partialRight=_l,b.partition=km,b.pick=Y0,b.pickBy=Dl,b.property=Nl,b.propertyOf=q1,b.pull=_g,b.pullAll=fl,b.pullAllBy=kg,b.pullAllWith=Ig,b.pullAt=Sg,b.range=Y1,b.rangeRight=H1,b.rearg=Nm,b.reject=Cm,b.remove=Cg,b.rest=Wm,b.reverse=na,b.sampleSize=Em,b.set=U0,b.setWith=G0,b.shuffle=Pm,b.slice=Tg,b.sortBy=Dm,b.sortedUniq=Fg,b.sortedUniqBy=Rg,b.split=g1,b.spread=zm,b.tail=Lg,b.take=$g,b.takeRight=Bg,b.takeRightWhile=Ng,b.takeWhile=Wg,b.tap=tm,b.throttle=qm,b.thru=Di,b.toArray=Tl,b.toPairs=Ol,b.toPairsIn=Fl,b.toPath=X1,b.toPlainObject=Pl,b.transform=Q0,b.unary=Ym,b.union=zg,b.unionBy=qg,b.unionWith=Yg,b.uniq=Hg,b.uniqBy=Ug,b.uniqWith=Gg,b.unset=V0,b.unzip=ra,b.unzipWith=hl,b.update=X0,b.updateWith=j0,b.values=wr,b.valuesIn=K0,b.without=Qg,b.words=$l,b.wrap=Hm,b.xor=Vg,b.xorBy=Xg,b.xorWith=jg,b.zip=Kg,b.zipObject=Jg,b.zipObjectDeep=Zg,b.zipWith=em,b.entries=Ol,b.entriesIn=Fl,b.extend=Al,b.extendWith=Ni,da(b,b),b.add=K1,b.attempt=Bl,b.camelCase=t1,b.capitalize=Rl,b.ceil=J1,b.clamp=J0,b.clone=Gm,b.cloneDeep=Vm,b.cloneDeepWith=Xm,b.cloneWith=Qm,b.conformsTo=jm,b.deburr=Ll,b.defaultTo=A1,b.divide=Z1,b.endsWith=n1,b.eq=Gt,b.escape=r1,b.escapeRegExp=i1,b.every=fm,b.find=dm,b.findIndex=sl,b.findKey=C0,b.findLast=pm,b.findLastIndex=ul,b.findLastKey=T0,b.floor=ey,b.forEach=pl,b.forEachRight=gl,b.forIn=E0,b.forInRight=P0,b.forOwn=A0,b.forOwnRight=M0,b.get=ua,b.gt=Km,b.gte=Jm,b.has=F0,b.hasIn=la,b.head=cl,b.identity=dt,b.includes=bm,b.indexOf=pg,b.inRange=Z0,b.invoke=$0,b.isArguments=Jn,b.isArray=re,b.isArrayBuffer=Zm,b.isArrayLike=ft,b.isArrayLikeObject=Be,b.isBoolean=e0,b.isBuffer=Fn,b.isDate=t0,b.isElement=n0,b.isEmpty=r0,b.isEqual=i0,b.isEqualWith=o0,b.isError=aa,b.isFinite=a0,b.isFunction=bn,b.isInteger=kl,b.isLength=$i,b.isMap=Il,b.isMatch=s0,b.isMatchWith=u0,b.isNaN=l0,b.isNative=c0,b.isNil=h0,b.isNull=f0,b.isNumber=Sl,b.isObject=Me,b.isObjectLike=Le,b.isPlainObject=$r,b.isRegExp=sa,b.isSafeInteger=d0,b.isSet=Cl,b.isString=Bi,b.isSymbol=Ct,b.isTypedArray=yr,b.isUndefined=p0,b.isWeakMap=g0,b.isWeakSet=m0,b.join=bg,b.kebabCase=o1,b.last=$t,b.lastIndexOf=xg,b.lowerCase=a1,b.lowerFirst=s1,b.lt=y0,b.lte=w0,b.max=ty,b.maxBy=ny,b.mean=ry,b.meanBy=iy,b.min=oy,b.minBy=ay,b.stubArray=ga,b.stubFalse=ma,b.stubObject=U1,b.stubString=G1,b.stubTrue=Q1,b.multiply=sy,b.nth=vg,b.noConflict=$1,b.noop=pa,b.now=Fi,b.pad=u1,b.padEnd=l1,b.padStart=c1,b.parseInt=f1,b.random=e1,b.reduce=Im,b.reduceRight=Sm,b.repeat=h1,b.replace=d1,b.result=H0,b.round=uy,b.runInContext=C,b.sample=Tm,b.size=Am,b.snakeCase=p1,b.some=Mm,b.sortedIndex=Eg,b.sortedIndexBy=Pg,b.sortedIndexOf=Ag,b.sortedLastIndex=Mg,b.sortedLastIndexBy=Dg,b.sortedLastIndexOf=Og,b.startCase=m1,b.startsWith=y1,b.subtract=ly,b.sum=cy,b.sumBy=fy,b.template=w1,b.times=V1,b.toFinite=xn,b.toInteger=ie,b.toLength=El,b.toLower=b1,b.toNumber=Bt,b.toSafeInteger=b0,b.toString=xe,b.toUpper=x1,b.trim=v1,b.trimEnd=_1,b.trimStart=k1,b.truncate=I1,b.unescape=S1,b.uniqueId=j1,b.upperCase=C1,b.upperFirst=ca,b.each=pl,b.eachRight=gl,b.first=cl,da(b,(function(){var e={};return Jt(b,function(i,s){ve.call(b.prototype,s)||(e[s]=i)}),e})(),{chain:!1}),b.VERSION=o,Dt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){b[e].placeholder=b}),Dt(["drop","take"],function(e,i){ce.prototype[e]=function(s){s=s===n?1:Qe(ie(s),0);var d=this.__filtered__&&!i?new ce(this):this.clone();return d.__filtered__?d.__takeCount__=et(s,d.__takeCount__):d.__views__.push({size:et(s,Fe),type:e+(d.__dir__<0?"Right":"")}),d},ce.prototype[e+"Right"]=function(s){return this.reverse()[e](s).reverse()}}),Dt(["filter","map","takeWhile"],function(e,i){var s=i+1,d=s==Ae||s==Ve;ce.prototype[e]=function(m){var x=this.clone();return x.__iteratees__.push({iteratee:j(m,3),type:s}),x.__filtered__=x.__filtered__||d,x}}),Dt(["head","last"],function(e,i){var s="take"+(i?"Right":"");ce.prototype[e]=function(){return this[s](1).value()[0]}}),Dt(["initial","tail"],function(e,i){var s="drop"+(i?"":"Right");ce.prototype[e]=function(){return this.__filtered__?new ce(this):this[s](1)}}),ce.prototype.compact=function(){return this.filter(dt)},ce.prototype.find=function(e){return this.filter(e).head()},ce.prototype.findLast=function(e){return this.reverse().find(e)},ce.prototype.invokeMap=se(function(e,i){return typeof e=="function"?new ce(this):this.map(function(s){return Mr(s,e,i)})}),ce.prototype.reject=function(e){return this.filter(Li(j(e)))},ce.prototype.slice=function(e,i){e=ie(e);var s=this;return s.__filtered__&&(e>0||i<0)?new ce(s):(e<0?s=s.takeRight(-e):e&&(s=s.drop(e)),i!==n&&(i=ie(i),s=i<0?s.dropRight(-i):s.take(i-e)),s)},ce.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},ce.prototype.toArray=function(){return this.take(Fe)},Jt(ce.prototype,function(e,i){var s=/^(?:filter|find|map|reject)|While$/.test(i),d=/^(?:head|last)$/.test(i),m=b[d?"take"+(i=="last"?"Right":""):i],x=d||/^find/.test(i);m&&(b.prototype[i]=function(){var v=this.__wrapped__,k=d?[1]:arguments,T=v instanceof ce,L=k[0],$=T||re(v),B=function(le){var he=m.apply(b,Tn([le],k));return d&&Y?he[0]:he};$&&s&&typeof L=="function"&&L.length!=1&&(T=$=!1);var Y=this.__chain__,G=!!this.__actions__.length,J=x&&!Y,oe=T&&!G;if(!x&&$){v=oe?v:new ce(this);var Z=e.apply(v,k);return Z.__actions__.push({func:Di,args:[B],thisArg:n}),new Ft(Z,Y)}return J&&oe?e.apply(this,k):(Z=this.thru(B),J?d?Z.value()[0]:Z.value():Z)})}),Dt(["pop","push","shift","sort","splice","unshift"],function(e){var i=ii[e],s=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",d=/^(?:pop|shift)$/.test(e);b.prototype[e]=function(){var m=arguments;if(d&&!this.__chain__){var x=this.value();return i.apply(re(x)?x:[],m)}return this[s](function(v){return i.apply(re(v)?v:[],m)})}}),Jt(ce.prototype,function(e,i){var s=b[i];if(s){var d=s.name+"";ve.call(hr,d)||(hr[d]=[]),hr[d].push({name:i,func:s})}}),hr[Si(n,A).name]=[{name:"wrapper",func:n}],ce.prototype.clone=Sd,ce.prototype.reverse=Cd,ce.prototype.value=Td,b.prototype.at=nm,b.prototype.chain=rm,b.prototype.commit=im,b.prototype.next=om,b.prototype.plant=sm,b.prototype.reverse=um,b.prototype.toJSON=b.prototype.valueOf=b.prototype.value=lm,b.prototype.first=b.prototype.head,Ir&&(b.prototype[Ir]=am),b}),lr=id();Hn?((Hn.exports=lr)._=lr,fo._=lr):Ke._=lr}).call(yy)})(qr,qr.exports)),qr.exports}var by=wy();const wa={projectDir:"powerJournal",outputDir:"reports",coreDir:"core",devLogging:!0,devMode:!1,reportFileExtension:".pjf.md"};async function xy(r){if(!r||typeof r!="object"||Array.isArray(r))return wa;try{return by.merge({},wa,r)}catch(t){return console.warn("[PowerJournal] Failed to merge user config, using defaults.",t),wa}}const $c=6048e5,vy=864e5,_y=6e4,ky=36e5,Iy=1e3,Hl=Symbol.for("constructDateFrom");function He(r,t){return typeof r=="function"?r(t):r&&typeof r=="object"&&Hl in r?r[Hl](t):r instanceof Date?new r.constructor(t):new Date(t)}function Ue(r,t){return He(t||r,r)}function es(r,t,n){const o=Ue(r,n?.in);return isNaN(t)?He(n?.in||r,NaN):(t&&o.setDate(o.getDate()+t),o)}function Sy(r,t,n){const o=Ue(r,n?.in);if(isNaN(t))return He(r,NaN);const a=o.getDate(),u=He(r,o.getTime());u.setMonth(o.getMonth()+t+1,0);const l=u.getDate();return a>=l?u:(o.setFullYear(u.getFullYear(),u.getMonth(),a),o)}let Cy={};function _r(){return Cy}function Bn(r,t){const n=_r(),o=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=Ue(r,t?.in),u=a.getDay(),l=(u<o?7:0)+u-o;return a.setDate(a.getDate()-l),a.setHours(0,0,0,0),a}function vr(r,t){return Bn(r,{...t,weekStartsOn:1})}function Bc(r,t){const n=Ue(r,t?.in),o=n.getFullYear(),a=He(n,0);a.setFullYear(o+1,0,4),a.setHours(0,0,0,0);const u=vr(a),l=He(n,0);l.setFullYear(o,0,4),l.setHours(0,0,0,0);const c=vr(l);return n.getTime()>=u.getTime()?o+1:n.getTime()>=c.getTime()?o:o-1}function Vi(r){const t=Ue(r),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+r-+n}function Nc(r,...t){const n=He.bind(null,t.find(o=>typeof o=="object"));return t.map(n)}function Ul(r,t){const n=Ue(r,t?.in);return n.setHours(0,0,0,0),n}function Wc(r,t,n){const[o,a]=Nc(n?.in,r,t),u=Ul(o),l=Ul(a),c=+u-Vi(u),f=+l-Vi(l);return Math.round((c-f)/vy)}function Ty(r,t){const n=Bc(r,t),o=He(r,0);return o.setFullYear(n,0,4),o.setHours(0,0,0,0),vr(o)}function Ey(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function Py(r){return!(!Ey(r)&&typeof r!="number"||isNaN(+Ue(r)))}function Ay(r,t,n){const[o,a]=Nc(n?.in,r,t),u=Gl(o,a),l=Math.abs(Wc(o,a));o.setDate(o.getDate()-u*l);const c=+(Gl(o,a)===-u),f=u*(l-c);return f===0?0:f}function Gl(r,t){const n=r.getFullYear()-t.getFullYear()||r.getMonth()-t.getMonth()||r.getDate()-t.getDate()||r.getHours()-t.getHours()||r.getMinutes()-t.getMinutes()||r.getSeconds()-t.getSeconds()||r.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function My(r,t){const n=Ue(r,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Dy={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Oy=(r,t,n)=>{let o;const a=Dy[r];return typeof a=="string"?o=a:t===1?o=a.one:o=a.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+o:o+" ago":o};function ba(r){return(t={})=>{const n=t.width?String(t.width):r.defaultWidth;return r.formats[n]||r.formats[r.defaultWidth]}}const Fy={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ry={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ly={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$y={date:ba({formats:Fy,defaultWidth:"full"}),time:ba({formats:Ry,defaultWidth:"full"}),dateTime:ba({formats:Ly,defaultWidth:"full"})},By={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ny=(r,t,n,o)=>By[r];function Br(r){return(t,n)=>{const o=n?.context?String(n.context):"standalone";let a;if(o==="formatting"&&r.formattingValues){const l=r.defaultFormattingWidth||r.defaultWidth,c=n?.width?String(n.width):l;a=r.formattingValues[c]||r.formattingValues[l]}else{const l=r.defaultWidth,c=n?.width?String(n.width):r.defaultWidth;a=r.values[c]||r.values[l]}const u=r.argumentCallback?r.argumentCallback(t):t;return a[u]}}const Wy={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},zy={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},qy={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Yy={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Hy={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Uy={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Gy=(r,t)=>{const n=Number(r),o=n%100;if(o>20||o<10)switch(o%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Qy={ordinalNumber:Gy,era:Br({values:Wy,defaultWidth:"wide"}),quarter:Br({values:zy,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Br({values:qy,defaultWidth:"wide"}),day:Br({values:Yy,defaultWidth:"wide"}),dayPeriod:Br({values:Hy,defaultWidth:"wide",formattingValues:Uy,defaultFormattingWidth:"wide"})};function Nr(r){return(t,n={})=>{const o=n.width,a=o&&r.matchPatterns[o]||r.matchPatterns[r.defaultMatchWidth],u=t.match(a);if(!u)return null;const l=u[0],c=o&&r.parsePatterns[o]||r.parsePatterns[r.defaultParseWidth],f=Array.isArray(c)?Xy(c,g=>g.test(l)):Vy(c,g=>g.test(l));let h;h=r.valueCallback?r.valueCallback(f):f,h=n.valueCallback?n.valueCallback(h):h;const p=t.slice(l.length);return{value:h,rest:p}}}function Vy(r,t){for(const n in r)if(Object.prototype.hasOwnProperty.call(r,n)&&t(r[n]))return n}function Xy(r,t){for(let n=0;n<r.length;n++)if(t(r[n]))return n}function jy(r){return(t,n={})=>{const o=t.match(r.matchPattern);if(!o)return null;const a=o[0],u=t.match(r.parsePattern);if(!u)return null;let l=r.valueCallback?r.valueCallback(u[0]):u[0];l=n.valueCallback?n.valueCallback(l):l;const c=t.slice(a.length);return{value:l,rest:c}}}const Ky=/^(\d+)(th|st|nd|rd)?/i,Jy=/\d+/i,Zy={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ew={any:[/^b/i,/^(a|c)/i]},tw={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},nw={any:[/1/i,/2/i,/3/i,/4/i]},rw={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},iw={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ow={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},aw={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},sw={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},uw={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},lw={ordinalNumber:jy({matchPattern:Ky,parsePattern:Jy,valueCallback:r=>parseInt(r,10)}),era:Nr({matchPatterns:Zy,defaultMatchWidth:"wide",parsePatterns:ew,defaultParseWidth:"any"}),quarter:Nr({matchPatterns:tw,defaultMatchWidth:"wide",parsePatterns:nw,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Nr({matchPatterns:rw,defaultMatchWidth:"wide",parsePatterns:iw,defaultParseWidth:"any"}),day:Nr({matchPatterns:ow,defaultMatchWidth:"wide",parsePatterns:aw,defaultParseWidth:"any"}),dayPeriod:Nr({matchPatterns:sw,defaultMatchWidth:"any",parsePatterns:uw,defaultParseWidth:"any"})},zc={code:"en-US",formatDistance:Oy,formatLong:$y,formatRelative:Ny,localize:Qy,match:lw,options:{weekStartsOn:0,firstWeekContainsDate:1}};function cw(r,t){const n=Ue(r,t?.in);return Wc(n,My(n))+1}function qc(r,t){const n=Ue(r,t?.in),o=+vr(n)-+Ty(n);return Math.round(o/$c)+1}function ts(r,t){const n=Ue(r,t?.in),o=n.getFullYear(),a=_r(),u=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,l=He(t?.in||r,0);l.setFullYear(o+1,0,u),l.setHours(0,0,0,0);const c=Bn(l,t),f=He(t?.in||r,0);f.setFullYear(o,0,u),f.setHours(0,0,0,0);const h=Bn(f,t);return+n>=+c?o+1:+n>=+h?o:o-1}function fw(r,t){const n=_r(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,a=ts(r,t),u=He(t?.in||r,0);return u.setFullYear(a,0,o),u.setHours(0,0,0,0),Bn(u,t)}function Yc(r,t){const n=Ue(r,t?.in),o=+Bn(n,t)-+fw(n,t);return Math.round(o/$c)+1}function _e(r,t){const n=r<0?"-":"",o=Math.abs(r).toString().padStart(t,"0");return n+o}const Rn={y(r,t){const n=r.getFullYear(),o=n>0?n:1-n;return _e(t==="yy"?o%100:o,t.length)},M(r,t){const n=r.getMonth();return t==="M"?String(n+1):_e(n+1,2)},d(r,t){return _e(r.getDate(),t.length)},a(r,t){const n=r.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(r,t){return _e(r.getHours()%12||12,t.length)},H(r,t){return _e(r.getHours(),t.length)},m(r,t){return _e(r.getMinutes(),t.length)},s(r,t){return _e(r.getSeconds(),t.length)},S(r,t){const n=t.length,o=r.getMilliseconds(),a=Math.trunc(o*Math.pow(10,n-3));return _e(a,t.length)}},br={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ql={G:function(r,t,n){const o=r.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(o,{width:"abbreviated"});case"GGGGG":return n.era(o,{width:"narrow"});case"GGGG":default:return n.era(o,{width:"wide"})}},y:function(r,t,n){if(t==="yo"){const o=r.getFullYear(),a=o>0?o:1-o;return n.ordinalNumber(a,{unit:"year"})}return Rn.y(r,t)},Y:function(r,t,n,o){const a=ts(r,o),u=a>0?a:1-a;if(t==="YY"){const l=u%100;return _e(l,2)}return t==="Yo"?n.ordinalNumber(u,{unit:"year"}):_e(u,t.length)},R:function(r,t){const n=Bc(r);return _e(n,t.length)},u:function(r,t){const n=r.getFullYear();return _e(n,t.length)},Q:function(r,t,n){const o=Math.ceil((r.getMonth()+1)/3);switch(t){case"Q":return String(o);case"QQ":return _e(o,2);case"Qo":return n.ordinalNumber(o,{unit:"quarter"});case"QQQ":return n.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(o,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(o,{width:"wide",context:"formatting"})}},q:function(r,t,n){const o=Math.ceil((r.getMonth()+1)/3);switch(t){case"q":return String(o);case"qq":return _e(o,2);case"qo":return n.ordinalNumber(o,{unit:"quarter"});case"qqq":return n.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(o,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(o,{width:"wide",context:"standalone"})}},M:function(r,t,n){const o=r.getMonth();switch(t){case"M":case"MM":return Rn.M(r,t);case"Mo":return n.ordinalNumber(o+1,{unit:"month"});case"MMM":return n.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(o,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(o,{width:"wide",context:"formatting"})}},L:function(r,t,n){const o=r.getMonth();switch(t){case"L":return String(o+1);case"LL":return _e(o+1,2);case"Lo":return n.ordinalNumber(o+1,{unit:"month"});case"LLL":return n.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(o,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(o,{width:"wide",context:"standalone"})}},w:function(r,t,n,o){const a=Yc(r,o);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):_e(a,t.length)},I:function(r,t,n){const o=qc(r);return t==="Io"?n.ordinalNumber(o,{unit:"week"}):_e(o,t.length)},d:function(r,t,n){return t==="do"?n.ordinalNumber(r.getDate(),{unit:"date"}):Rn.d(r,t)},D:function(r,t,n){const o=cw(r);return t==="Do"?n.ordinalNumber(o,{unit:"dayOfYear"}):_e(o,t.length)},E:function(r,t,n){const o=r.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(o,{width:"short",context:"formatting"});case"EEEE":default:return n.day(o,{width:"wide",context:"formatting"})}},e:function(r,t,n,o){const a=r.getDay(),u=(a-o.weekStartsOn+8)%7||7;switch(t){case"e":return String(u);case"ee":return _e(u,2);case"eo":return n.ordinalNumber(u,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(r,t,n,o){const a=r.getDay(),u=(a-o.weekStartsOn+8)%7||7;switch(t){case"c":return String(u);case"cc":return _e(u,t.length);case"co":return n.ordinalNumber(u,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(r,t,n){const o=r.getDay(),a=o===0?7:o;switch(t){case"i":return String(a);case"ii":return _e(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(o,{width:"short",context:"formatting"});case"iiii":default:return n.day(o,{width:"wide",context:"formatting"})}},a:function(r,t,n){const a=r.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(r,t,n){const o=r.getHours();let a;switch(o===12?a=br.noon:o===0?a=br.midnight:a=o/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(r,t,n){const o=r.getHours();let a;switch(o>=17?a=br.evening:o>=12?a=br.afternoon:o>=4?a=br.morning:a=br.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(r,t,n){if(t==="ho"){let o=r.getHours()%12;return o===0&&(o=12),n.ordinalNumber(o,{unit:"hour"})}return Rn.h(r,t)},H:function(r,t,n){return t==="Ho"?n.ordinalNumber(r.getHours(),{unit:"hour"}):Rn.H(r,t)},K:function(r,t,n){const o=r.getHours()%12;return t==="Ko"?n.ordinalNumber(o,{unit:"hour"}):_e(o,t.length)},k:function(r,t,n){let o=r.getHours();return o===0&&(o=24),t==="ko"?n.ordinalNumber(o,{unit:"hour"}):_e(o,t.length)},m:function(r,t,n){return t==="mo"?n.ordinalNumber(r.getMinutes(),{unit:"minute"}):Rn.m(r,t)},s:function(r,t,n){return t==="so"?n.ordinalNumber(r.getSeconds(),{unit:"second"}):Rn.s(r,t)},S:function(r,t){return Rn.S(r,t)},X:function(r,t,n){const o=r.getTimezoneOffset();if(o===0)return"Z";switch(t){case"X":return Xl(o);case"XXXX":case"XX":return tr(o);case"XXXXX":case"XXX":default:return tr(o,":")}},x:function(r,t,n){const o=r.getTimezoneOffset();switch(t){case"x":return Xl(o);case"xxxx":case"xx":return tr(o);case"xxxxx":case"xxx":default:return tr(o,":")}},O:function(r,t,n){const o=r.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Vl(o,":");case"OOOO":default:return"GMT"+tr(o,":")}},z:function(r,t,n){const o=r.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Vl(o,":");case"zzzz":default:return"GMT"+tr(o,":")}},t:function(r,t,n){const o=Math.trunc(+r/1e3);return _e(o,t.length)},T:function(r,t,n){return _e(+r,t.length)}};function Vl(r,t=""){const n=r>0?"-":"+",o=Math.abs(r),a=Math.trunc(o/60),u=o%60;return u===0?n+String(a):n+String(a)+t+_e(u,2)}function Xl(r,t){return r%60===0?(r>0?"-":"+")+_e(Math.abs(r)/60,2):tr(r,t)}function tr(r,t=""){const n=r>0?"-":"+",o=Math.abs(r),a=_e(Math.trunc(o/60),2),u=_e(o%60,2);return n+a+t+u}const jl=(r,t)=>{switch(r){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Hc=(r,t)=>{switch(r){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},hw=(r,t)=>{const n=r.match(/(P+)(p+)?/)||[],o=n[1],a=n[2];if(!a)return jl(r,t);let u;switch(o){case"P":u=t.dateTime({width:"short"});break;case"PP":u=t.dateTime({width:"medium"});break;case"PPP":u=t.dateTime({width:"long"});break;case"PPPP":default:u=t.dateTime({width:"full"});break}return u.replace("{{date}}",jl(o,t)).replace("{{time}}",Hc(a,t))},Na={p:Hc,P:hw},dw=/^D+$/,pw=/^Y+$/,gw=["D","DD","YY","YYYY"];function Uc(r){return dw.test(r)}function Gc(r){return pw.test(r)}function Wa(r,t,n){const o=mw(r,t,n);if(console.warn(o),gw.includes(r))throw new RangeError(o)}function mw(r,t,n){const o=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${t}\`) for formatting ${o} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const yw=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ww=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,bw=/^'([^]*?)'?$/,xw=/''/g,vw=/[a-zA-Z]/;function _n(r,t,n){const o=_r(),a=o.locale??zc,u=o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,l=o.weekStartsOn??o.locale?.options?.weekStartsOn??0,c=Ue(r,n?.in);if(!Py(c))throw new RangeError("Invalid time value");let f=t.match(ww).map(p=>{const g=p[0];if(g==="p"||g==="P"){const w=Na[g];return w(p,a.formatLong)}return p}).join("").match(yw).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const g=p[0];if(g==="'")return{isToken:!1,value:_w(p)};if(Ql[g])return{isToken:!0,value:p};if(g.match(vw))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:p}});a.localize.preprocessor&&(f=a.localize.preprocessor(c,f));const h={firstWeekContainsDate:u,weekStartsOn:l,locale:a};return f.map(p=>{if(!p.isToken)return p.value;const g=p.value;(Gc(g)||Uc(g))&&Wa(g,t,String(r));const w=Ql[g[0]];return w(c,g,a.localize,h)}).join("")}function _w(r){const t=r.match(bw);return t?t[1].replace(xw,"'"):r}function kw(){return Object.assign({},_r())}function Iw(r,t){const n=Ue(r,t?.in).getDay();return n===0?7:n}function Sw(r,t){const n=Cw(t)?new t(0):He(t,0);return n.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()),n.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),n}function Cw(r){return typeof r=="function"&&r.prototype?.constructor===r}const Tw=10;class Qc{subPriority=0;validate(t,n){return!0}}class Ew extends Qc{constructor(t,n,o,a,u){super(),this.value=t,this.validateValue=n,this.setValue=o,this.priority=a,u&&(this.subPriority=u)}validate(t,n){return this.validateValue(t,this.value,n)}set(t,n,o){return this.setValue(t,n,this.value,o)}}class Pw extends Qc{priority=Tw;subPriority=-1;constructor(t,n){super(),this.context=t||(o=>He(n,o))}set(t,n){return n.timestampIsSet?t:He(t,Sw(t,this.context))}}class we{run(t,n,o,a){const u=this.parse(t,n,o,a);return u?{setter:new Ew(u.value,this.validate,this.set,this.priority,this.subPriority),rest:u.rest}:null}validate(t,n,o){return!0}}class Aw extends we{priority=140;parse(t,n,o){switch(n){case"G":case"GG":case"GGG":return o.era(t,{width:"abbreviated"})||o.era(t,{width:"narrow"});case"GGGGG":return o.era(t,{width:"narrow"});case"GGGG":default:return o.era(t,{width:"wide"})||o.era(t,{width:"abbreviated"})||o.era(t,{width:"narrow"})}}set(t,n,o){return n.era=o,t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["R","u","t","T"]}const We={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},rn={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function ze(r,t){return r&&{value:t(r.value),rest:r.rest}}function De(r,t){const n=t.match(r);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function on(r,t){const n=t.match(r);if(!n)return null;if(n[0]==="Z")return{value:0,rest:t.slice(1)};const o=n[1]==="+"?1:-1,a=n[2]?parseInt(n[2],10):0,u=n[3]?parseInt(n[3],10):0,l=n[5]?parseInt(n[5],10):0;return{value:o*(a*ky+u*_y+l*Iy),rest:t.slice(n[0].length)}}function Vc(r){return De(We.anyDigitsSigned,r)}function $e(r,t){switch(r){case 1:return De(We.singleDigit,t);case 2:return De(We.twoDigits,t);case 3:return De(We.threeDigits,t);case 4:return De(We.fourDigits,t);default:return De(new RegExp("^\\d{1,"+r+"}"),t)}}function Xi(r,t){switch(r){case 1:return De(We.singleDigitSigned,t);case 2:return De(We.twoDigitsSigned,t);case 3:return De(We.threeDigitsSigned,t);case 4:return De(We.fourDigitsSigned,t);default:return De(new RegExp("^-?\\d{1,"+r+"}"),t)}}function ns(r){switch(r){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Xc(r,t){const n=t>0,o=n?t:1-t;let a;if(o<=50)a=r||100;else{const u=o+50,l=Math.trunc(u/100)*100,c=r>=u%100;a=r+l-(c?100:0)}return n?a:1-a}function jc(r){return r%400===0||r%4===0&&r%100!==0}class Mw extends we{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(t,n,o){const a=u=>({year:u,isTwoDigitYear:n==="yy"});switch(n){case"y":return ze($e(4,t),a);case"yo":return ze(o.ordinalNumber(t,{unit:"year"}),a);default:return ze($e(n.length,t),a)}}validate(t,n){return n.isTwoDigitYear||n.year>0}set(t,n,o){const a=t.getFullYear();if(o.isTwoDigitYear){const l=Xc(o.year,a);return t.setFullYear(l,0,1),t.setHours(0,0,0,0),t}const u=!("era"in n)||n.era===1?o.year:1-o.year;return t.setFullYear(u,0,1),t.setHours(0,0,0,0),t}}class Dw extends we{priority=130;parse(t,n,o){const a=u=>({year:u,isTwoDigitYear:n==="YY"});switch(n){case"Y":return ze($e(4,t),a);case"Yo":return ze(o.ordinalNumber(t,{unit:"year"}),a);default:return ze($e(n.length,t),a)}}validate(t,n){return n.isTwoDigitYear||n.year>0}set(t,n,o,a){const u=ts(t,a);if(o.isTwoDigitYear){const c=Xc(o.year,u);return t.setFullYear(c,0,a.firstWeekContainsDate),t.setHours(0,0,0,0),Bn(t,a)}const l=!("era"in n)||n.era===1?o.year:1-o.year;return t.setFullYear(l,0,a.firstWeekContainsDate),t.setHours(0,0,0,0),Bn(t,a)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class Ow extends we{priority=130;parse(t,n){return Xi(n==="R"?4:n.length,t)}set(t,n,o){const a=He(t,0);return a.setFullYear(o,0,4),a.setHours(0,0,0,0),vr(a)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class Fw extends we{priority=130;parse(t,n){return Xi(n==="u"?4:n.length,t)}set(t,n,o){return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class Rw extends we{priority=120;parse(t,n,o){switch(n){case"Q":case"QQ":return $e(n.length,t);case"Qo":return o.ordinalNumber(t,{unit:"quarter"});case"QQQ":return o.quarter(t,{width:"abbreviated",context:"formatting"})||o.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(t,{width:"wide",context:"formatting"})||o.quarter(t,{width:"abbreviated",context:"formatting"})||o.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=1&&n<=4}set(t,n,o){return t.setMonth((o-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class Lw extends we{priority=120;parse(t,n,o){switch(n){case"q":case"qq":return $e(n.length,t);case"qo":return o.ordinalNumber(t,{unit:"quarter"});case"qqq":return o.quarter(t,{width:"abbreviated",context:"standalone"})||o.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(t,{width:"wide",context:"standalone"})||o.quarter(t,{width:"abbreviated",context:"standalone"})||o.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=1&&n<=4}set(t,n,o){return t.setMonth((o-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class $w extends we{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(t,n,o){const a=u=>u-1;switch(n){case"M":return ze(De(We.month,t),a);case"MM":return ze($e(2,t),a);case"Mo":return ze(o.ordinalNumber(t,{unit:"month"}),a);case"MMM":return o.month(t,{width:"abbreviated",context:"formatting"})||o.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(t,{width:"wide",context:"formatting"})||o.month(t,{width:"abbreviated",context:"formatting"})||o.month(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=11}set(t,n,o){return t.setMonth(o,1),t.setHours(0,0,0,0),t}}class Bw extends we{priority=110;parse(t,n,o){const a=u=>u-1;switch(n){case"L":return ze(De(We.month,t),a);case"LL":return ze($e(2,t),a);case"Lo":return ze(o.ordinalNumber(t,{unit:"month"}),a);case"LLL":return o.month(t,{width:"abbreviated",context:"standalone"})||o.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(t,{width:"wide",context:"standalone"})||o.month(t,{width:"abbreviated",context:"standalone"})||o.month(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=0&&n<=11}set(t,n,o){return t.setMonth(o,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function Nw(r,t,n){const o=Ue(r,n?.in),a=Yc(o,n)-t;return o.setDate(o.getDate()-a*7),Ue(o,n?.in)}class Ww extends we{priority=100;parse(t,n,o){switch(n){case"w":return De(We.week,t);case"wo":return o.ordinalNumber(t,{unit:"week"});default:return $e(n.length,t)}}validate(t,n){return n>=1&&n<=53}set(t,n,o,a){return Bn(Nw(t,o,a),a)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function zw(r,t,n){const o=Ue(r,n?.in),a=qc(o,n)-t;return o.setDate(o.getDate()-a*7),o}class qw extends we{priority=100;parse(t,n,o){switch(n){case"I":return De(We.week,t);case"Io":return o.ordinalNumber(t,{unit:"week"});default:return $e(n.length,t)}}validate(t,n){return n>=1&&n<=53}set(t,n,o){return vr(zw(t,o))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const Yw=[31,28,31,30,31,30,31,31,30,31,30,31],Hw=[31,29,31,30,31,30,31,31,30,31,30,31];class Uw extends we{priority=90;subPriority=1;parse(t,n,o){switch(n){case"d":return De(We.date,t);case"do":return o.ordinalNumber(t,{unit:"date"});default:return $e(n.length,t)}}validate(t,n){const o=t.getFullYear(),a=jc(o),u=t.getMonth();return a?n>=1&&n<=Hw[u]:n>=1&&n<=Yw[u]}set(t,n,o){return t.setDate(o),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class Gw extends we{priority=90;subpriority=1;parse(t,n,o){switch(n){case"D":case"DD":return De(We.dayOfYear,t);case"Do":return o.ordinalNumber(t,{unit:"date"});default:return $e(n.length,t)}}validate(t,n){const o=t.getFullYear();return jc(o)?n>=1&&n<=366:n>=1&&n<=365}set(t,n,o){return t.setMonth(0,o),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function rs(r,t,n){const o=_r(),a=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??o.weekStartsOn??o.locale?.options?.weekStartsOn??0,u=Ue(r,n?.in),l=u.getDay(),f=(t%7+7)%7,h=7-a,p=t<0||t>6?t-(l+h)%7:(f+h)%7-(l+h)%7;return es(u,p,n)}class Qw extends we{priority=90;parse(t,n,o){switch(n){case"E":case"EE":case"EEE":return o.day(t,{width:"abbreviated",context:"formatting"})||o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return o.day(t,{width:"wide",context:"formatting"})||o.day(t,{width:"abbreviated",context:"formatting"})||o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=6}set(t,n,o,a){return t=rs(t,o,a),t.setHours(0,0,0,0),t}incompatibleTokens=["D","i","e","c","t","T"]}class Vw extends we{priority=90;parse(t,n,o,a){const u=l=>{const c=Math.floor((l-1)/7)*7;return(l+a.weekStartsOn+6)%7+c};switch(n){case"e":case"ee":return ze($e(n.length,t),u);case"eo":return ze(o.ordinalNumber(t,{unit:"day"}),u);case"eee":return o.day(t,{width:"abbreviated",context:"formatting"})||o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"});case"eeeee":return o.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return o.day(t,{width:"wide",context:"formatting"})||o.day(t,{width:"abbreviated",context:"formatting"})||o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=6}set(t,n,o,a){return t=rs(t,o,a),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class Xw extends we{priority=90;parse(t,n,o,a){const u=l=>{const c=Math.floor((l-1)/7)*7;return(l+a.weekStartsOn+6)%7+c};switch(n){case"c":case"cc":return ze($e(n.length,t),u);case"co":return ze(o.ordinalNumber(t,{unit:"day"}),u);case"ccc":return o.day(t,{width:"abbreviated",context:"standalone"})||o.day(t,{width:"short",context:"standalone"})||o.day(t,{width:"narrow",context:"standalone"});case"ccccc":return o.day(t,{width:"narrow",context:"standalone"});case"cccccc":return o.day(t,{width:"short",context:"standalone"})||o.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return o.day(t,{width:"wide",context:"standalone"})||o.day(t,{width:"abbreviated",context:"standalone"})||o.day(t,{width:"short",context:"standalone"})||o.day(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=0&&n<=6}set(t,n,o,a){return t=rs(t,o,a),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function jw(r,t,n){const o=Ue(r,n?.in),a=Iw(o,n),u=t-a;return es(o,u,n)}class Kw extends we{priority=90;parse(t,n,o){const a=u=>u===0?7:u;switch(n){case"i":case"ii":return $e(n.length,t);case"io":return o.ordinalNumber(t,{unit:"day"});case"iii":return ze(o.day(t,{width:"abbreviated",context:"formatting"})||o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"}),a);case"iiiii":return ze(o.day(t,{width:"narrow",context:"formatting"}),a);case"iiiiii":return ze(o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"}),a);case"iiii":default:return ze(o.day(t,{width:"wide",context:"formatting"})||o.day(t,{width:"abbreviated",context:"formatting"})||o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"}),a)}}validate(t,n){return n>=1&&n<=7}set(t,n,o){return t=jw(t,o),t.setHours(0,0,0,0),t}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class Jw extends we{priority=80;parse(t,n,o){switch(n){case"a":case"aa":case"aaa":return o.dayPeriod(t,{width:"abbreviated",context:"formatting"})||o.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(t,{width:"wide",context:"formatting"})||o.dayPeriod(t,{width:"abbreviated",context:"formatting"})||o.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,o){return t.setHours(ns(o),0,0,0),t}incompatibleTokens=["b","B","H","k","t","T"]}class Zw extends we{priority=80;parse(t,n,o){switch(n){case"b":case"bb":case"bbb":return o.dayPeriod(t,{width:"abbreviated",context:"formatting"})||o.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(t,{width:"wide",context:"formatting"})||o.dayPeriod(t,{width:"abbreviated",context:"formatting"})||o.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,o){return t.setHours(ns(o),0,0,0),t}incompatibleTokens=["a","B","H","k","t","T"]}class eb extends we{priority=80;parse(t,n,o){switch(n){case"B":case"BB":case"BBB":return o.dayPeriod(t,{width:"abbreviated",context:"formatting"})||o.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(t,{width:"wide",context:"formatting"})||o.dayPeriod(t,{width:"abbreviated",context:"formatting"})||o.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,o){return t.setHours(ns(o),0,0,0),t}incompatibleTokens=["a","b","t","T"]}class tb extends we{priority=70;parse(t,n,o){switch(n){case"h":return De(We.hour12h,t);case"ho":return o.ordinalNumber(t,{unit:"hour"});default:return $e(n.length,t)}}validate(t,n){return n>=1&&n<=12}set(t,n,o){const a=t.getHours()>=12;return a&&o<12?t.setHours(o+12,0,0,0):!a&&o===12?t.setHours(0,0,0,0):t.setHours(o,0,0,0),t}incompatibleTokens=["H","K","k","t","T"]}class nb extends we{priority=70;parse(t,n,o){switch(n){case"H":return De(We.hour23h,t);case"Ho":return o.ordinalNumber(t,{unit:"hour"});default:return $e(n.length,t)}}validate(t,n){return n>=0&&n<=23}set(t,n,o){return t.setHours(o,0,0,0),t}incompatibleTokens=["a","b","h","K","k","t","T"]}class rb extends we{priority=70;parse(t,n,o){switch(n){case"K":return De(We.hour11h,t);case"Ko":return o.ordinalNumber(t,{unit:"hour"});default:return $e(n.length,t)}}validate(t,n){return n>=0&&n<=11}set(t,n,o){return t.getHours()>=12&&o<12?t.setHours(o+12,0,0,0):t.setHours(o,0,0,0),t}incompatibleTokens=["h","H","k","t","T"]}class ib extends we{priority=70;parse(t,n,o){switch(n){case"k":return De(We.hour24h,t);case"ko":return o.ordinalNumber(t,{unit:"hour"});default:return $e(n.length,t)}}validate(t,n){return n>=1&&n<=24}set(t,n,o){const a=o<=24?o%24:o;return t.setHours(a,0,0,0),t}incompatibleTokens=["a","b","h","H","K","t","T"]}class ob extends we{priority=60;parse(t,n,o){switch(n){case"m":return De(We.minute,t);case"mo":return o.ordinalNumber(t,{unit:"minute"});default:return $e(n.length,t)}}validate(t,n){return n>=0&&n<=59}set(t,n,o){return t.setMinutes(o,0,0),t}incompatibleTokens=["t","T"]}class ab extends we{priority=50;parse(t,n,o){switch(n){case"s":return De(We.second,t);case"so":return o.ordinalNumber(t,{unit:"second"});default:return $e(n.length,t)}}validate(t,n){return n>=0&&n<=59}set(t,n,o){return t.setSeconds(o,0),t}incompatibleTokens=["t","T"]}class sb extends we{priority=30;parse(t,n){const o=a=>Math.trunc(a*Math.pow(10,-n.length+3));return ze($e(n.length,t),o)}set(t,n,o){return t.setMilliseconds(o),t}incompatibleTokens=["t","T"]}class ub extends we{priority=10;parse(t,n){switch(n){case"X":return on(rn.basicOptionalMinutes,t);case"XX":return on(rn.basic,t);case"XXXX":return on(rn.basicOptionalSeconds,t);case"XXXXX":return on(rn.extendedOptionalSeconds,t);case"XXX":default:return on(rn.extended,t)}}set(t,n,o){return n.timestampIsSet?t:He(t,t.getTime()-Vi(t)-o)}incompatibleTokens=["t","T","x"]}class lb extends we{priority=10;parse(t,n){switch(n){case"x":return on(rn.basicOptionalMinutes,t);case"xx":return on(rn.basic,t);case"xxxx":return on(rn.basicOptionalSeconds,t);case"xxxxx":return on(rn.extendedOptionalSeconds,t);case"xxx":default:return on(rn.extended,t)}}set(t,n,o){return n.timestampIsSet?t:He(t,t.getTime()-Vi(t)-o)}incompatibleTokens=["t","T","X"]}class cb extends we{priority=40;parse(t){return Vc(t)}set(t,n,o){return[He(t,o*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class fb extends we{priority=20;parse(t){return Vc(t)}set(t,n,o){return[He(t,o),{timestampIsSet:!0}]}incompatibleTokens="*"}const hb={G:new Aw,y:new Mw,Y:new Dw,R:new Ow,u:new Fw,Q:new Rw,q:new Lw,M:new $w,L:new Bw,w:new Ww,I:new qw,d:new Uw,D:new Gw,E:new Qw,e:new Vw,c:new Xw,i:new Kw,a:new Jw,b:new Zw,B:new eb,h:new tb,H:new nb,K:new rb,k:new ib,m:new ob,s:new ab,S:new sb,X:new ub,x:new lb,t:new cb,T:new fb},db=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,pb=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,gb=/^'([^]*?)'?$/,mb=/''/g,yb=/\S/,wb=/[a-zA-Z]/;function bb(r,t,n,o){const a=()=>He(n,NaN),u=kw(),l=u.locale??zc,c=u.firstWeekContainsDate??u.locale?.options?.firstWeekContainsDate??1,f=u.weekStartsOn??u.locale?.options?.weekStartsOn??0,h={firstWeekContainsDate:c,weekStartsOn:f,locale:l},p=[new Pw(o?.in,n)],g=t.match(pb).map(F=>{const A=F[0];if(A in Na){const N=Na[A];return N(F,l.formatLong)}return F}).join("").match(db),w=[];for(let F of g){Gc(F)&&Wa(F,t,r),Uc(F)&&Wa(F,t,r);const A=F[0],N=hb[A];if(N){const{incompatibleTokens:z}=N;if(Array.isArray(z)){const D=w.find(E=>z.includes(E.token)||E.token===A);if(D)throw new RangeError(`The format string mustn't contain \`${D.fullToken}\` and \`${F}\` at the same time`)}else if(N.incompatibleTokens==="*"&&w.length>0)throw new RangeError(`The format string mustn't contain \`${F}\` and any other token at the same time`);w.push({token:A,fullToken:F});const W=N.run(r,F,l.match,h);if(!W)return a();p.push(W.setter),r=W.rest}else{if(A.match(wb))throw new RangeError("Format string contains an unescaped latin alphabet character `"+A+"`");if(F==="''"?F="'":A==="'"&&(F=xb(F)),r.indexOf(F)===0)r=r.slice(F.length);else return a()}}if(r.length>0&&yb.test(r))return a();const y=p.map(F=>F.priority).sort((F,A)=>A-F).filter((F,A,N)=>N.indexOf(F)===A).map(F=>p.filter(A=>A.priority===F).sort((A,N)=>N.subPriority-A.subPriority)).map(F=>F[0]);let S=Ue(n,o?.in);if(isNaN(+S))return a();const P={};for(const F of y){if(!F.validate(S,h))return a();const A=F.set(S,P,h);Array.isArray(A)?(S=A[0],Object.assign(P,A[1])):S=A}return S}function xb(r){return r.match(gb)[1].replace(mb,"'")}function Kc(r,t,n){return es(r,-t,n)}function vb(r,t,n){return Sy(r,-6,n)}const Jc={almostDailyReport:{folder:"l1almostDailyReport",name:"Daily Report"},"10daysReport":{folder:"l2tenL1ReportsReview",name:"10 Days Review"},"30daysReport":{folder:"l3ThreeL2Review",name:"30 Days Review"},"150daysReport":{folder:"l4FiveL3Review",name:"150 Days Review"}},nr={ALMOST_DAILY:"almostDailyReport",TEN_DAYS:"10daysReport",THIRTY_DAYS:"30daysReport",ONE_FIFTY_DAYS:"150daysReport"},nn={component:"mdc-component",input:"mdc-input",hiddenValue:"mdc-hidden-value",reportMetadata:"mdc-report-metadata"};class _b{constructor(){this.logger=un(ln.TagsService),this.component={start:t=>{const n={componentId:t};return this.logger.dev("Component start",n),`<span class="$${nn.component} start" data-meta='${JSON.stringify(n)}' style="display:none"></span>`},end:t=>{const n={componentId:t};return this.logger.dev("Component end",n),`<span class="$${nn.component} end" data-meta='${JSON.stringify(n)}' style="display:none"></span>`},wrap:(t,n,o=!0)=>{const a=o?`
${n}
`:n;return this.logger.dev("Component wrap",{componentId:t,content:n}),this.component.start(t)+a+this.component.end(t)}},this.input={start:(t,n,o,a)=>{const u={componentId:t,inputId:n,inputType:o,technicalPrefix:a};return this.logger.dev("Input start",u),`<span class="$${nn.input}" data-meta='${JSON.stringify(u)}' style="display:none"></span>`},end:(t,n,o,a)=>{const u={componentId:t,inputId:n,inputType:o,technicalPrefix:a};return this.logger.dev("Input end",u),`<span class="$${nn.input} end" data-meta='${JSON.stringify(u)}' style="display:none"></span>`},wrap:t=>{const{componentId:n,inputId:o,inputType:a,content:u,withNewLines:l=!0,technicalPrefix:c}=t,f=l?`
${u}
`:u;return this.logger.dev("Input wrap",{componentId:n,inputId:o,content:u}),this.input.start(n,o,a,c)+f+this.input.end(n,o,a,c)}},this.hiddenValue=(t,n,o)=>{const a={componentId:t,inputId:n,value:o};return this.logger.dev("Hidden value set",a),`<span class="$${nn.hiddenValue}" data-meta='${JSON.stringify(a)}' style="display:none"></span>`},this.reportMetadata={wrap:t=>`<span class="$${nn.reportMetadata}" data-meta='${t}' style="display:none"></span>`}}}const ji=new _b,Ze=un(ln.SavingService),Ur={get baseOutput(){return`${st?.projectDir??"vault"}/${st?.outputDir??"outputs"}`},get fileExtension(){return st?.reportFileExtension??".md"},get reportFolders(){const r={};for(const[t,{folder:n}]of Object.entries(Jc))r[t]=`${this.baseOutput}/${n}`;return r},_today(){return _n(new Date,"yyyyMMdd")},_getFormattedDate(){return _n(new Date,"dd.MM.yyyy")},_getDaysRemainingInYear(){const r=new Date,n=new Date(r.getFullYear(),11,31).getTime()-r.getTime(),o=Math.ceil(n/(1e3*60*60*24));return String(o).padStart(3,"0")},async _ensureFolder(r){ke.vault.getAbstractFileByPath(r)||(Ze.dev(`Creating folder: ${r}`),await ke.vault.createFolder(r))},async _listFiles(r){await this._ensureFolder(r);const t=ke.vault.getAbstractFileByPath(r);return!t||!t.children?[]:t.children.filter(n=>"extension"in n&&n.extension==="md").map(n=>n.name)},async _openFile(r){try{Ze.dev(`_openFile start: ${r.path}`);const t=ke.workspace.getLeaf(!0);if(await t.openFile(r),Ze.dev(`Main leaf opened file: ${r.path}`),st?.devMode){const n=ke.workspace.createLeafBySplit(t,"vertical",!1);await n.openFile(r);const o={type:"markdown",state:{file:r.path,mode:"source"}};try{await n.setViewState(o),Ze.dev("DevMode: right leaf forced to source mode")}catch(a){Ze.warn(`Failed to force right leaf to source mode: ${a.message}`)}}}catch(t){Ze.error(`Failed to open file ${r.path}: ${t.message}`)}},async write(r){let t=r.data??r.content;if(!t)throw new Error("No content provided for write()");const n=this.reportFolders[r.type];if(!n)throw new Error(`Unknown report type: ${r.type}`);await this._ensureFolder(n);const o=this._getDaysRemainingInYear(),a=this._getFormattedDate(),l=(await this._listFiles(n)).length+1,c=String(l).padStart(5,"0"),f=`${o}-${a}-${c}-${r.type}${this.fileExtension}`,h=`${n}/${f}`;if(ke.vault.getAbstractFileByPath(h))return Ze.warn(`File already exists: ${h}. Skipping write.`),h;const w=_n(new Date,"yyyy-MM-dd"),y=c,S={reportType:r.type,reportDate:w,reportNumber:y};Ze.info("[SavingService] Generated metadata",{metadata:S});const P=ji.reportMetadata.wrap(JSON.stringify(S));Ze.info("[SavingService] Metadata tag created",{tagLength:P.length}),Ze.dev(`[SavingService] Metadata tag content: ${P.substring(0,300)}`),t=P+`

`+t,Ze.info(`[SavingService] Content length after adding metadata: ${t.length}`),Ze.info(`Writing new file: ${h}`);const F=await ke.vault.create(h,t);return r?.open!==!1&&await this._openFile(F),h},async writeGeneral(r,t,n=!1){let o;const a=ke.vault.getAbstractFileByPath(r);if(a)if("extension"in a)Ze.info(`Overwriting existing file: ${r}`),await ke.vault.modify(a,t),o=a;else throw Ze.error(`Path exists but is not a file: ${r}`),new Error(`Path exists but is not a file: ${r}`);else Ze.info(`Creating new file: ${r}`),o=await ke.vault.create(r,t);return n&&await this._openFile(o),r},async delete(r){const t=ke.vault.getAbstractFileByPath(r);t?(Ze.info(`Deleting file: ${r}`),await ke.vault.delete(t)):Ze.warn(`Cannot delete; file not found: ${r}`)}};function Kl(r){if(r)throw r}var xa,Jl;function kb(){if(Jl)return xa;Jl=1;var r=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=function(h){return typeof Array.isArray=="function"?Array.isArray(h):t.call(h)==="[object Array]"},u=function(h){if(!h||t.call(h)!=="[object Object]")return!1;var p=r.call(h,"constructor"),g=h.constructor&&h.constructor.prototype&&r.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!p&&!g)return!1;var w;for(w in h);return typeof w>"u"||r.call(h,w)},l=function(h,p){n&&p.name==="__proto__"?n(h,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):h[p.name]=p.newValue},c=function(h,p){if(p==="__proto__")if(r.call(h,p)){if(o)return o(h,p).value}else return;return h[p]};return xa=function f(){var h,p,g,w,y,S,P=arguments[0],F=1,A=arguments.length,N=!1;for(typeof P=="boolean"&&(N=P,P=arguments[1]||{},F=2),(P==null||typeof P!="object"&&typeof P!="function")&&(P={});F<A;++F)if(h=arguments[F],h!=null)for(p in h)g=c(P,p),w=c(h,p),P!==w&&(N&&w&&(u(w)||(y=a(w)))?(y?(y=!1,S=g&&a(g)?g:[]):S=g&&u(g)?g:{},l(P,{name:p,newValue:f(N,S,w)})):typeof w<"u"&&l(P,{name:p,newValue:w}));return P},xa}var Ib=kb();const va=Lc(Ib);function za(r){if(typeof r!="object"||r===null)return!1;const t=Object.getPrototypeOf(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)}function Sb(){const r=[],t={run:n,use:o};return t;function n(...a){let u=-1;const l=a.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);c(null,...a);function c(f,...h){const p=r[++u];let g=-1;if(f){l(f);return}for(;++g<a.length;)(h[g]===null||h[g]===void 0)&&(h[g]=a[g]);a=h,p?Cb(p,c)(...h):l(null,...h)}}function o(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return r.push(a),t}}function Cb(r,t){let n;return o;function o(...l){const c=r.length>l.length;let f;c&&l.push(a);try{f=r.apply(this,l)}catch(h){const p=h;if(c&&n)throw p;return a(p)}c||(f&&f.then&&typeof f.then=="function"?f.then(u,a):f instanceof Error?a(f):u(f))}function a(l,...c){n||(n=!0,t(l,...c))}function u(l){a(null,l)}}function Yr(r){return!r||typeof r!="object"?"":"position"in r||"type"in r?Zl(r.position):"start"in r||"end"in r?Zl(r):"line"in r||"column"in r?qa(r):""}function qa(r){return ec(r&&r.line)+":"+ec(r&&r.column)}function Zl(r){return qa(r&&r.start)+"-"+qa(r&&r.end)}function ec(r){return r&&typeof r=="number"?r:1}class yt extends Error{constructor(t,n,o){super(),typeof n=="string"&&(o=n,n=void 0);let a="",u={},l=!1;if(n&&("line"in n&&"column"in n?u={place:n}:"start"in n&&"end"in n?u={place:n}:"type"in n?u={ancestors:[n],place:n.position}:u={...n}),typeof t=="string"?a=t:!u.cause&&t&&(l=!0,a=t.message,u.cause=t),!u.ruleId&&!u.source&&typeof o=="string"){const f=o.indexOf(":");f===-1?u.ruleId=o:(u.source=o.slice(0,f),u.ruleId=o.slice(f+1))}if(!u.place&&u.ancestors&&u.ancestors){const f=u.ancestors[u.ancestors.length-1];f&&(u.place=f.position)}const c=u.place&&"start"in u.place?u.place.start:u.place;this.ancestors=u.ancestors||void 0,this.cause=u.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=c?c.line:void 0,this.name=Yr(u.place)||"1:1",this.place=u.place||void 0,this.reason=this.message,this.ruleId=u.ruleId||void 0,this.source=u.source||void 0,this.stack=l&&u.cause&&typeof u.cause.stack=="string"?u.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}yt.prototype.file="";yt.prototype.name="";yt.prototype.reason="";yt.prototype.message="";yt.prototype.stack="";yt.prototype.column=void 0;yt.prototype.line=void 0;yt.prototype.ancestors=void 0;yt.prototype.cause=void 0;yt.prototype.fatal=void 0;yt.prototype.place=void 0;yt.prototype.ruleId=void 0;yt.prototype.source=void 0;const tn={basename:Tb,dirname:Eb,extname:Pb,join:Ab,sep:"/"};function Tb(r,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Qr(r);let n=0,o=-1,a=r.length,u;if(t===void 0||t.length===0||t.length>r.length){for(;a--;)if(r.codePointAt(a)===47){if(u){n=a+1;break}}else o<0&&(u=!0,o=a+1);return o<0?"":r.slice(n,o)}if(t===r)return"";let l=-1,c=t.length-1;for(;a--;)if(r.codePointAt(a)===47){if(u){n=a+1;break}}else l<0&&(u=!0,l=a+1),c>-1&&(r.codePointAt(a)===t.codePointAt(c--)?c<0&&(o=a):(c=-1,o=l));return n===o?o=l:o<0&&(o=r.length),r.slice(n,o)}function Eb(r){if(Qr(r),r.length===0)return".";let t=-1,n=r.length,o;for(;--n;)if(r.codePointAt(n)===47){if(o){t=n;break}}else o||(o=!0);return t<0?r.codePointAt(0)===47?"/":".":t===1&&r.codePointAt(0)===47?"//":r.slice(0,t)}function Pb(r){Qr(r);let t=r.length,n=-1,o=0,a=-1,u=0,l;for(;t--;){const c=r.codePointAt(t);if(c===47){if(l){o=t+1;break}continue}n<0&&(l=!0,n=t+1),c===46?a<0?a=t:u!==1&&(u=1):a>-1&&(u=-1)}return a<0||n<0||u===0||u===1&&a===n-1&&a===o+1?"":r.slice(a,n)}function Ab(...r){let t=-1,n;for(;++t<r.length;)Qr(r[t]),r[t]&&(n=n===void 0?r[t]:n+"/"+r[t]);return n===void 0?".":Mb(n)}function Mb(r){Qr(r);const t=r.codePointAt(0)===47;let n=Db(r,!t);return n.length===0&&!t&&(n="."),n.length>0&&r.codePointAt(r.length-1)===47&&(n+="/"),t?"/"+n:n}function Db(r,t){let n="",o=0,a=-1,u=0,l=-1,c,f;for(;++l<=r.length;){if(l<r.length)c=r.codePointAt(l);else{if(c===47)break;c=47}if(c===47){if(!(a===l-1||u===1))if(a!==l-1&&u===2){if(n.length<2||o!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",o=0):(n=n.slice(0,f),o=n.length-1-n.lastIndexOf("/")),a=l,u=0;continue}}else if(n.length>0){n="",o=0,a=l,u=0;continue}}t&&(n=n.length>0?n+"/..":"..",o=2)}else n.length>0?n+="/"+r.slice(a+1,l):n=r.slice(a+1,l),o=l-a-1;a=l,u=0}else c===46&&u>-1?u++:u=-1}return n}function Qr(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}const Ob={cwd:Fb};function Fb(){return"/"}function Ya(r){return!!(r!==null&&typeof r=="object"&&"href"in r&&r.href&&"protocol"in r&&r.protocol&&r.auth===void 0)}function Rb(r){if(typeof r=="string")r=new URL(r);else if(!Ya(r)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+r+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(r.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Lb(r)}function Lb(r){if(r.hostname!==""){const o=new TypeError('File URL host must be "localhost" or empty on darwin');throw o.code="ERR_INVALID_FILE_URL_HOST",o}const t=r.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const o=t.codePointAt(n+2);if(o===70||o===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const _a=["history","path","basename","stem","extname","dirname"];class $b{constructor(t){let n;t?Ya(t)?n={path:t}:typeof t=="string"||Bb(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":Ob.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let o=-1;for(;++o<_a.length;){const u=_a[o];u in n&&n[u]!==void 0&&n[u]!==null&&(this[u]=u==="history"?[...n[u]]:n[u])}let a;for(a in n)_a.includes(a)||(this[a]=n[a])}get basename(){return typeof this.path=="string"?tn.basename(this.path):void 0}set basename(t){Ia(t,"basename"),ka(t,"basename"),this.path=tn.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?tn.dirname(this.path):void 0}set dirname(t){tc(this.basename,"dirname"),this.path=tn.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?tn.extname(this.path):void 0}set extname(t){if(ka(t,"extname"),tc(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=tn.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Ya(t)&&(t=Rb(t)),Ia(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?tn.basename(this.path,this.extname):void 0}set stem(t){Ia(t,"stem"),ka(t,"stem"),this.path=tn.join(this.dirname||"",t+(this.extname||""))}fail(t,n,o){const a=this.message(t,n,o);throw a.fatal=!0,a}info(t,n,o){const a=this.message(t,n,o);return a.fatal=void 0,a}message(t,n,o){const a=new yt(t,n,o);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function ka(r,t){if(r&&r.includes(tn.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+tn.sep+"`")}function Ia(r,t){if(!r)throw new Error("`"+t+"` cannot be empty")}function tc(r,t){if(!r)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Bb(r){return!!(r&&typeof r=="object"&&"byteLength"in r&&"byteOffset"in r)}const Nb=(function(r){const o=this.constructor.prototype,a=o[r],u=function(){return a.apply(u,arguments)};return Object.setPrototypeOf(u,o),u}),Wb={}.hasOwnProperty;class is extends Nb{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Sb()}copy(){const t=new is;let n=-1;for(;++n<this.attachers.length;){const o=this.attachers[n];t.use(...o)}return t.data(va(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Ta("data",this.frozen),this.namespace[t]=n,this):Wb.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Ta("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...o]=this.attachers[this.freezeIndex];if(o[0]===!1)continue;o[0]===!0&&(o[0]=void 0);const a=n.call(t,...o);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=zi(t),o=this.parser||this.Parser;return Sa("parse",o),o(String(n),n)}process(t,n){const o=this;return this.freeze(),Sa("process",this.parser||this.Parser),Ca("process",this.compiler||this.Compiler),n?a(void 0,n):new Promise(a);function a(u,l){const c=zi(t),f=o.parse(c);o.run(f,c,function(p,g,w){if(p||!g||!w)return h(p);const y=g,S=o.stringify(y,w);qb(S)?w.value=S:w.result=S,h(p,w)});function h(p,g){p||!g?l(p):u?u(g):n(void 0,g)}}}processSync(t){let n=!1,o;return this.freeze(),Sa("processSync",this.parser||this.Parser),Ca("processSync",this.compiler||this.Compiler),this.process(t,a),rc("processSync","process",n),o;function a(u,l){n=!0,Kl(u),o=l}}run(t,n,o){nc(t),this.freeze();const a=this.transformers;return!o&&typeof n=="function"&&(o=n,n=void 0),o?u(void 0,o):new Promise(u);function u(l,c){const f=zi(n);a.run(t,f,h);function h(p,g,w){const y=g||t;p?c(p):l?l(y):o(void 0,y,w)}}}runSync(t,n){let o=!1,a;return this.run(t,n,u),rc("runSync","run",o),a;function u(l,c){Kl(l),a=c,o=!0}}stringify(t,n){this.freeze();const o=zi(n),a=this.compiler||this.Compiler;return Ca("stringify",a),nc(t),a(t,o)}use(t,...n){const o=this.attachers,a=this.namespace;if(Ta("use",this.frozen),t!=null)if(typeof t=="function")f(t,n);else if(typeof t=="object")Array.isArray(t)?c(t):l(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function u(h){if(typeof h=="function")f(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[p,...g]=h;f(p,g)}else l(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function l(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(h.plugins),h.settings&&(a.settings=va(!0,a.settings,h.settings))}function c(h){let p=-1;if(h!=null)if(Array.isArray(h))for(;++p<h.length;){const g=h[p];u(g)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function f(h,p){let g=-1,w=-1;for(;++g<o.length;)if(o[g][0]===h){w=g;break}if(w===-1)o.push([h,...p]);else if(p.length>0){let[y,...S]=p;const P=o[w][1];za(P)&&za(y)&&(y=va(!0,P,y)),o[w]=[h,y,...S]}}}}const Ki=new is().freeze();function Sa(r,t){if(typeof t!="function")throw new TypeError("Cannot `"+r+"` without `parser`")}function Ca(r,t){if(typeof t!="function")throw new TypeError("Cannot `"+r+"` without `compiler`")}function Ta(r,t){if(t)throw new Error("Cannot call `"+r+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function nc(r){if(!za(r)||typeof r.type!="string")throw new TypeError("Expected node, got `"+r+"`")}function rc(r,t,n){if(!n)throw new Error("`"+r+"` finished async. Use `"+t+"` instead")}function zi(r){return zb(r)?r:new $b(r)}function zb(r){return!!(r&&typeof r=="object"&&"message"in r&&"messages"in r)}function qb(r){return typeof r=="string"||Yb(r)}function Yb(r){return!!(r&&typeof r=="object"&&"byteLength"in r&&"byteOffset"in r)}const Hb={};function os(r,t){const n=Hb,o=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,a=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Zc(r,o,a)}function Zc(r,t,n){if(Ub(r)){if("value"in r)return r.type==="html"&&!n?"":r.value;if(t&&"alt"in r&&r.alt)return r.alt;if("children"in r)return ic(r.children,t,n)}return Array.isArray(r)?ic(r,t,n):""}function ic(r,t,n){const o=[];let a=-1;for(;++a<r.length;)o[a]=Zc(r[a],t,n);return o.join("")}function Ub(r){return!!(r&&typeof r=="object")}const oc=document.createElement("i");function as(r){const t="&"+r+";";oc.innerHTML=t;const n=oc.textContent;return n.charCodeAt(n.length-1)===59&&r!=="semi"||n===t?!1:n}function sn(r,t,n,o){const a=r.length;let u=0,l;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,n=n>0?n:0,o.length<1e4)l=Array.from(o),l.unshift(t,n),r.splice(...l);else for(n&&r.splice(t,n);u<o.length;)l=o.slice(u,u+1e4),l.unshift(t,0),r.splice(...l),u+=1e4,t+=1e4}function Nt(r,t){return r.length>0?(sn(r,r.length,0,t),r):t}const ac={}.hasOwnProperty;function Gb(r){const t={};let n=-1;for(;++n<r.length;)Qb(t,r[n]);return t}function Qb(r,t){let n;for(n in t){const a=(ac.call(r,n)?r[n]:void 0)||(r[n]={}),u=t[n];let l;if(u)for(l in u){ac.call(a,l)||(a[l]=[]);const c=u[l];Vb(a[l],Array.isArray(c)?c:c?[c]:[])}}}function Vb(r,t){let n=-1;const o=[];for(;++n<t.length;)(t[n].add==="after"?r:o).push(t[n]);sn(r,0,0,o)}function ef(r,t){const n=Number.parseInt(r,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"ÔøΩ":String.fromCodePoint(n)}function xr(r){return r.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const an=Wn(/[A-Za-z]/),Xt=Wn(/[\dA-Za-z]/),Xb=Wn(/[#-'*+\--9=?A-Z^-~]/);function Ha(r){return r!==null&&(r<32||r===127)}const Ua=Wn(/\d/),jb=Wn(/[\dA-Fa-f]/),Kb=Wn(/[!-/:-@[-`{-~]/);function te(r){return r!==null&&r<-2}function mt(r){return r!==null&&(r<0||r===32)}function ye(r){return r===-2||r===-1||r===32}const Jb=Wn(new RegExp("\\p{P}|\\p{S}","u")),Zb=Wn(/\s/);function Wn(r){return t;function t(n){return n!==null&&n>-1&&r.test(String.fromCharCode(n))}}function Ce(r,t,n,o){const a=o?o-1:Number.POSITIVE_INFINITY;let u=0;return l;function l(f){return ye(f)?(r.enter(n),c(f)):t(f)}function c(f){return ye(f)&&u++<a?(r.consume(f),c):(r.exit(n),t(f))}}const ex={tokenize:tx};function tx(r){const t=r.attempt(this.parser.constructs.contentInitial,o,a);let n;return t;function o(c){if(c===null){r.consume(c);return}return r.enter("lineEnding"),r.consume(c),r.exit("lineEnding"),Ce(r,t,"linePrefix")}function a(c){return r.enter("paragraph"),u(c)}function u(c){const f=r.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,l(c)}function l(c){if(c===null){r.exit("chunkText"),r.exit("paragraph"),r.consume(c);return}return te(c)?(r.consume(c),r.exit("chunkText"),u):(r.consume(c),l)}}const nx={tokenize:rx},sc={tokenize:ix};function rx(r){const t=this,n=[];let o=0,a,u,l;return c;function c(z){if(o<n.length){const W=n[o];return t.containerState=W[1],r.attempt(W[0].continuation,f,h)(z)}return h(z)}function f(z){if(o++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&N();const W=t.events.length;let D=W,E;for(;D--;)if(t.events[D][0]==="exit"&&t.events[D][1].type==="chunkFlow"){E=t.events[D][1].end;break}A(o);let U=W;for(;U<t.events.length;)t.events[U][1].end={...E},U++;return sn(t.events,D+1,0,t.events.slice(W)),t.events.length=U,h(z)}return c(z)}function h(z){if(o===n.length){if(!a)return w(z);if(a.currentConstruct&&a.currentConstruct.concrete)return S(z);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},r.check(sc,p,g)(z)}function p(z){return a&&N(),A(o),w(z)}function g(z){return t.parser.lazy[t.now().line]=o!==n.length,l=t.now().offset,S(z)}function w(z){return t.containerState={},r.attempt(sc,y,S)(z)}function y(z){return o++,n.push([t.currentConstruct,t.containerState]),w(z)}function S(z){if(z===null){a&&N(),A(0),r.consume(z);return}return a=a||t.parser.flow(t.now()),r.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:u}),P(z)}function P(z){if(z===null){F(r.exit("chunkFlow"),!0),A(0),r.consume(z);return}return te(z)?(r.consume(z),F(r.exit("chunkFlow")),o=0,t.interrupt=void 0,c):(r.consume(z),P)}function F(z,W){const D=t.sliceStream(z);if(W&&D.push(null),z.previous=u,u&&(u.next=z),u=z,a.defineSkip(z.start),a.write(D),t.parser.lazy[z.start.line]){let E=a.events.length;for(;E--;)if(a.events[E][1].start.offset<l&&(!a.events[E][1].end||a.events[E][1].end.offset>l))return;const U=t.events.length;let V=U,ee,de;for(;V--;)if(t.events[V][0]==="exit"&&t.events[V][1].type==="chunkFlow"){if(ee){de=t.events[V][1].end;break}ee=!0}for(A(o),E=U;E<t.events.length;)t.events[E][1].end={...de},E++;sn(t.events,V+1,0,t.events.slice(U)),t.events.length=E}}function A(z){let W=n.length;for(;W-- >z;){const D=n[W];t.containerState=D[1],D[0].exit.call(t,r)}n.length=z}function N(){a.write([null]),u=void 0,a=void 0,t.containerState._closeFlow=void 0}}function ix(r,t,n){return Ce(r,r.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ji(r){if(r===null||mt(r)||Zb(r))return 1;if(Jb(r))return 2}function ss(r,t,n){const o=[];let a=-1;for(;++a<r.length;){const u=r[a].resolveAll;u&&!o.includes(u)&&(t=u(t,n),o.push(u))}return t}const Ga={name:"attention",resolveAll:ox,tokenize:ax};function ox(r,t){let n=-1,o,a,u,l,c,f,h,p;for(;++n<r.length;)if(r[n][0]==="enter"&&r[n][1].type==="attentionSequence"&&r[n][1]._close){for(o=n;o--;)if(r[o][0]==="exit"&&r[o][1].type==="attentionSequence"&&r[o][1]._open&&t.sliceSerialize(r[o][1]).charCodeAt(0)===t.sliceSerialize(r[n][1]).charCodeAt(0)){if((r[o][1]._close||r[n][1]._open)&&(r[n][1].end.offset-r[n][1].start.offset)%3&&!((r[o][1].end.offset-r[o][1].start.offset+r[n][1].end.offset-r[n][1].start.offset)%3))continue;f=r[o][1].end.offset-r[o][1].start.offset>1&&r[n][1].end.offset-r[n][1].start.offset>1?2:1;const g={...r[o][1].end},w={...r[n][1].start};uc(g,-f),uc(w,f),l={type:f>1?"strongSequence":"emphasisSequence",start:g,end:{...r[o][1].end}},c={type:f>1?"strongSequence":"emphasisSequence",start:{...r[n][1].start},end:w},u={type:f>1?"strongText":"emphasisText",start:{...r[o][1].end},end:{...r[n][1].start}},a={type:f>1?"strong":"emphasis",start:{...l.start},end:{...c.end}},r[o][1].end={...l.start},r[n][1].start={...c.end},h=[],r[o][1].end.offset-r[o][1].start.offset&&(h=Nt(h,[["enter",r[o][1],t],["exit",r[o][1],t]])),h=Nt(h,[["enter",a,t],["enter",l,t],["exit",l,t],["enter",u,t]]),h=Nt(h,ss(t.parser.constructs.insideSpan.null,r.slice(o+1,n),t)),h=Nt(h,[["exit",u,t],["enter",c,t],["exit",c,t],["exit",a,t]]),r[n][1].end.offset-r[n][1].start.offset?(p=2,h=Nt(h,[["enter",r[n][1],t],["exit",r[n][1],t]])):p=0,sn(r,o-1,n-o+3,h),n=o+h.length-p-2;break}}for(n=-1;++n<r.length;)r[n][1].type==="attentionSequence"&&(r[n][1].type="data");return r}function ax(r,t){const n=this.parser.constructs.attentionMarkers.null,o=this.previous,a=Ji(o);let u;return l;function l(f){return u=f,r.enter("attentionSequence"),c(f)}function c(f){if(f===u)return r.consume(f),c;const h=r.exit("attentionSequence"),p=Ji(f),g=!p||p===2&&a||n.includes(f),w=!a||a===2&&p||n.includes(o);return h._open=!!(u===42?g:g&&(a||!w)),h._close=!!(u===42?w:w&&(p||!g)),t(f)}}function uc(r,t){r.column+=t,r.offset+=t,r._bufferIndex+=t}const sx={name:"autolink",tokenize:ux};function ux(r,t,n){let o=0;return a;function a(y){return r.enter("autolink"),r.enter("autolinkMarker"),r.consume(y),r.exit("autolinkMarker"),r.enter("autolinkProtocol"),u}function u(y){return an(y)?(r.consume(y),l):y===64?n(y):h(y)}function l(y){return y===43||y===45||y===46||Xt(y)?(o=1,c(y)):h(y)}function c(y){return y===58?(r.consume(y),o=0,f):(y===43||y===45||y===46||Xt(y))&&o++<32?(r.consume(y),c):(o=0,h(y))}function f(y){return y===62?(r.exit("autolinkProtocol"),r.enter("autolinkMarker"),r.consume(y),r.exit("autolinkMarker"),r.exit("autolink"),t):y===null||y===32||y===60||Ha(y)?n(y):(r.consume(y),f)}function h(y){return y===64?(r.consume(y),p):Xb(y)?(r.consume(y),h):n(y)}function p(y){return Xt(y)?g(y):n(y)}function g(y){return y===46?(r.consume(y),o=0,p):y===62?(r.exit("autolinkProtocol").type="autolinkEmail",r.enter("autolinkMarker"),r.consume(y),r.exit("autolinkMarker"),r.exit("autolink"),t):w(y)}function w(y){if((y===45||Xt(y))&&o++<63){const S=y===45?w:g;return r.consume(y),S}return n(y)}}const to={partial:!0,tokenize:lx};function lx(r,t,n){return o;function o(u){return ye(u)?Ce(r,a,"linePrefix")(u):a(u)}function a(u){return u===null||te(u)?t(u):n(u)}}const tf={continuation:{tokenize:fx},exit:hx,name:"blockQuote",tokenize:cx};function cx(r,t,n){const o=this;return a;function a(l){if(l===62){const c=o.containerState;return c.open||(r.enter("blockQuote",{_container:!0}),c.open=!0),r.enter("blockQuotePrefix"),r.enter("blockQuoteMarker"),r.consume(l),r.exit("blockQuoteMarker"),u}return n(l)}function u(l){return ye(l)?(r.enter("blockQuotePrefixWhitespace"),r.consume(l),r.exit("blockQuotePrefixWhitespace"),r.exit("blockQuotePrefix"),t):(r.exit("blockQuotePrefix"),t(l))}}function fx(r,t,n){const o=this;return a;function a(l){return ye(l)?Ce(r,u,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):u(l)}function u(l){return r.attempt(tf,t,n)(l)}}function hx(r){r.exit("blockQuote")}const nf={name:"characterEscape",tokenize:dx};function dx(r,t,n){return o;function o(u){return r.enter("characterEscape"),r.enter("escapeMarker"),r.consume(u),r.exit("escapeMarker"),a}function a(u){return Kb(u)?(r.enter("characterEscapeValue"),r.consume(u),r.exit("characterEscapeValue"),r.exit("characterEscape"),t):n(u)}}const rf={name:"characterReference",tokenize:px};function px(r,t,n){const o=this;let a=0,u,l;return c;function c(g){return r.enter("characterReference"),r.enter("characterReferenceMarker"),r.consume(g),r.exit("characterReferenceMarker"),f}function f(g){return g===35?(r.enter("characterReferenceMarkerNumeric"),r.consume(g),r.exit("characterReferenceMarkerNumeric"),h):(r.enter("characterReferenceValue"),u=31,l=Xt,p(g))}function h(g){return g===88||g===120?(r.enter("characterReferenceMarkerHexadecimal"),r.consume(g),r.exit("characterReferenceMarkerHexadecimal"),r.enter("characterReferenceValue"),u=6,l=jb,p):(r.enter("characterReferenceValue"),u=7,l=Ua,p(g))}function p(g){if(g===59&&a){const w=r.exit("characterReferenceValue");return l===Xt&&!as(o.sliceSerialize(w))?n(g):(r.enter("characterReferenceMarker"),r.consume(g),r.exit("characterReferenceMarker"),r.exit("characterReference"),t)}return l(g)&&a++<u?(r.consume(g),p):n(g)}}const lc={partial:!0,tokenize:mx},cc={concrete:!0,name:"codeFenced",tokenize:gx};function gx(r,t,n){const o=this,a={partial:!0,tokenize:D};let u=0,l=0,c;return f;function f(E){return h(E)}function h(E){const U=o.events[o.events.length-1];return u=U&&U[1].type==="linePrefix"?U[2].sliceSerialize(U[1],!0).length:0,c=E,r.enter("codeFenced"),r.enter("codeFencedFence"),r.enter("codeFencedFenceSequence"),p(E)}function p(E){return E===c?(l++,r.consume(E),p):l<3?n(E):(r.exit("codeFencedFenceSequence"),ye(E)?Ce(r,g,"whitespace")(E):g(E))}function g(E){return E===null||te(E)?(r.exit("codeFencedFence"),o.interrupt?t(E):r.check(lc,P,W)(E)):(r.enter("codeFencedFenceInfo"),r.enter("chunkString",{contentType:"string"}),w(E))}function w(E){return E===null||te(E)?(r.exit("chunkString"),r.exit("codeFencedFenceInfo"),g(E)):ye(E)?(r.exit("chunkString"),r.exit("codeFencedFenceInfo"),Ce(r,y,"whitespace")(E)):E===96&&E===c?n(E):(r.consume(E),w)}function y(E){return E===null||te(E)?g(E):(r.enter("codeFencedFenceMeta"),r.enter("chunkString",{contentType:"string"}),S(E))}function S(E){return E===null||te(E)?(r.exit("chunkString"),r.exit("codeFencedFenceMeta"),g(E)):E===96&&E===c?n(E):(r.consume(E),S)}function P(E){return r.attempt(a,W,F)(E)}function F(E){return r.enter("lineEnding"),r.consume(E),r.exit("lineEnding"),A}function A(E){return u>0&&ye(E)?Ce(r,N,"linePrefix",u+1)(E):N(E)}function N(E){return E===null||te(E)?r.check(lc,P,W)(E):(r.enter("codeFlowValue"),z(E))}function z(E){return E===null||te(E)?(r.exit("codeFlowValue"),N(E)):(r.consume(E),z)}function W(E){return r.exit("codeFenced"),t(E)}function D(E,U,V){let ee=0;return de;function de(fe){return E.enter("lineEnding"),E.consume(fe),E.exit("lineEnding"),X}function X(fe){return E.enter("codeFencedFence"),ye(fe)?Ce(E,Q,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(fe):Q(fe)}function Q(fe){return fe===c?(E.enter("codeFencedFenceSequence"),be(fe)):V(fe)}function be(fe){return fe===c?(ee++,E.consume(fe),be):ee>=l?(E.exit("codeFencedFenceSequence"),ye(fe)?Ce(E,Ae,"whitespace")(fe):Ae(fe)):V(fe)}function Ae(fe){return fe===null||te(fe)?(E.exit("codeFencedFence"),U(fe)):V(fe)}}}function mx(r,t,n){const o=this;return a;function a(l){return l===null?n(l):(r.enter("lineEnding"),r.consume(l),r.exit("lineEnding"),u)}function u(l){return o.parser.lazy[o.now().line]?n(l):t(l)}}const Ea={name:"codeIndented",tokenize:wx},yx={partial:!0,tokenize:bx};function wx(r,t,n){const o=this;return a;function a(h){return r.enter("codeIndented"),Ce(r,u,"linePrefix",5)(h)}function u(h){const p=o.events[o.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?l(h):n(h)}function l(h){return h===null?f(h):te(h)?r.attempt(yx,l,f)(h):(r.enter("codeFlowValue"),c(h))}function c(h){return h===null||te(h)?(r.exit("codeFlowValue"),l(h)):(r.consume(h),c)}function f(h){return r.exit("codeIndented"),t(h)}}function bx(r,t,n){const o=this;return a;function a(l){return o.parser.lazy[o.now().line]?n(l):te(l)?(r.enter("lineEnding"),r.consume(l),r.exit("lineEnding"),a):Ce(r,u,"linePrefix",5)(l)}function u(l){const c=o.events[o.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?t(l):te(l)?a(l):n(l)}}const xx={name:"codeText",previous:_x,resolve:vx,tokenize:kx};function vx(r){let t=r.length-4,n=3,o,a;if((r[n][1].type==="lineEnding"||r[n][1].type==="space")&&(r[t][1].type==="lineEnding"||r[t][1].type==="space")){for(o=n;++o<t;)if(r[o][1].type==="codeTextData"){r[n][1].type="codeTextPadding",r[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(o=n-1,t++;++o<=t;)a===void 0?o!==t&&r[o][1].type!=="lineEnding"&&(a=o):(o===t||r[o][1].type==="lineEnding")&&(r[a][1].type="codeTextData",o!==a+2&&(r[a][1].end=r[o-1][1].end,r.splice(a+2,o-a-2),t-=o-a-2,o=a+2),a=void 0);return r}function _x(r){return r!==96||this.events[this.events.length-1][1].type==="characterEscape"}function kx(r,t,n){let o=0,a,u;return l;function l(g){return r.enter("codeText"),r.enter("codeTextSequence"),c(g)}function c(g){return g===96?(r.consume(g),o++,c):(r.exit("codeTextSequence"),f(g))}function f(g){return g===null?n(g):g===32?(r.enter("space"),r.consume(g),r.exit("space"),f):g===96?(u=r.enter("codeTextSequence"),a=0,p(g)):te(g)?(r.enter("lineEnding"),r.consume(g),r.exit("lineEnding"),f):(r.enter("codeTextData"),h(g))}function h(g){return g===null||g===32||g===96||te(g)?(r.exit("codeTextData"),f(g)):(r.consume(g),h)}function p(g){return g===96?(r.consume(g),a++,p):a===o?(r.exit("codeTextSequence"),r.exit("codeText"),t(g)):(u.type="codeTextData",h(g))}}class Ix{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const o=n??Number.POSITIVE_INFINITY;return o<this.left.length?this.left.slice(t,o):t>this.left.length?this.right.slice(this.right.length-o+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-o+this.left.length).reverse())}splice(t,n,o){const a=n||0;this.setCursor(Math.trunc(t));const u=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return o&&Wr(this.left,o),u.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Wr(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Wr(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Wr(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Wr(this.left,n.reverse())}}}function Wr(r,t){let n=0;if(t.length<1e4)r.push(...t);else for(;n<t.length;)r.push(...t.slice(n,n+1e4)),n+=1e4}function of(r){const t={};let n=-1,o,a,u,l,c,f,h;const p=new Ix(r);for(;++n<p.length;){for(;n in t;)n=t[n];if(o=p.get(n),n&&o[1].type==="chunkFlow"&&p.get(n-1)[1].type==="listItemPrefix"&&(f=o[1]._tokenizer.events,u=0,u<f.length&&f[u][1].type==="lineEndingBlank"&&(u+=2),u<f.length&&f[u][1].type==="content"))for(;++u<f.length&&f[u][1].type!=="content";)f[u][1].type==="chunkText"&&(f[u][1]._isInFirstContentOfListItem=!0,u++);if(o[0]==="enter")o[1].contentType&&(Object.assign(t,Sx(p,n)),n=t[n],h=!0);else if(o[1]._container){for(u=n,a=void 0;u--;)if(l=p.get(u),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(a&&(p.get(a)[1].type="lineEndingBlank"),l[1].type="lineEnding",a=u);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;a&&(o[1].end={...p.get(a)[1].start},c=p.slice(a,n),c.unshift(o),p.splice(a,n-a+1,c))}}return sn(r,0,Number.POSITIVE_INFINITY,p.slice(0)),!h}function Sx(r,t){const n=r.get(t)[1],o=r.get(t)[2];let a=t-1;const u=[];let l=n._tokenizer;l||(l=o.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const c=l.events,f=[],h={};let p,g,w=-1,y=n,S=0,P=0;const F=[P];for(;y;){for(;r.get(++a)[1]!==y;);u.push(a),y._tokenizer||(p=o.sliceStream(y),y.next||p.push(null),g&&l.defineSkip(y.start),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(p),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),g=y,y=y.next}for(y=n;++w<c.length;)c[w][0]==="exit"&&c[w-1][0]==="enter"&&c[w][1].type===c[w-1][1].type&&c[w][1].start.line!==c[w][1].end.line&&(P=w+1,F.push(P),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(l.events=[],y?(y._tokenizer=void 0,y.previous=void 0):F.pop(),w=F.length;w--;){const A=c.slice(F[w],F[w+1]),N=u.pop();f.push([N,N+A.length-1]),r.splice(N,2,A)}for(f.reverse(),w=-1;++w<f.length;)h[S+f[w][0]]=S+f[w][1],S+=f[w][1]-f[w][0]-1;return h}const Cx={resolve:Ex,tokenize:Px},Tx={partial:!0,tokenize:Ax};function Ex(r){return of(r),r}function Px(r,t){let n;return o;function o(c){return r.enter("content"),n=r.enter("chunkContent",{contentType:"content"}),a(c)}function a(c){return c===null?u(c):te(c)?r.check(Tx,l,u)(c):(r.consume(c),a)}function u(c){return r.exit("chunkContent"),r.exit("content"),t(c)}function l(c){return r.consume(c),r.exit("chunkContent"),n.next=r.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function Ax(r,t,n){const o=this;return a;function a(l){return r.exit("chunkContent"),r.enter("lineEnding"),r.consume(l),r.exit("lineEnding"),Ce(r,u,"linePrefix")}function u(l){if(l===null||te(l))return n(l);const c=o.events[o.events.length-1];return!o.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?t(l):r.interrupt(o.parser.constructs.flow,n,t)(l)}}function af(r,t,n,o,a,u,l,c,f){const h=f||Number.POSITIVE_INFINITY;let p=0;return g;function g(A){return A===60?(r.enter(o),r.enter(a),r.enter(u),r.consume(A),r.exit(u),w):A===null||A===32||A===41||Ha(A)?n(A):(r.enter(o),r.enter(l),r.enter(c),r.enter("chunkString",{contentType:"string"}),P(A))}function w(A){return A===62?(r.enter(u),r.consume(A),r.exit(u),r.exit(a),r.exit(o),t):(r.enter(c),r.enter("chunkString",{contentType:"string"}),y(A))}function y(A){return A===62?(r.exit("chunkString"),r.exit(c),w(A)):A===null||A===60||te(A)?n(A):(r.consume(A),A===92?S:y)}function S(A){return A===60||A===62||A===92?(r.consume(A),y):y(A)}function P(A){return!p&&(A===null||A===41||mt(A))?(r.exit("chunkString"),r.exit(c),r.exit(l),r.exit(o),t(A)):p<h&&A===40?(r.consume(A),p++,P):A===41?(r.consume(A),p--,P):A===null||A===32||A===40||Ha(A)?n(A):(r.consume(A),A===92?F:P)}function F(A){return A===40||A===41||A===92?(r.consume(A),P):P(A)}}function sf(r,t,n,o,a,u){const l=this;let c=0,f;return h;function h(y){return r.enter(o),r.enter(a),r.consume(y),r.exit(a),r.enter(u),p}function p(y){return c>999||y===null||y===91||y===93&&!f||y===94&&!c&&"_hiddenFootnoteSupport"in l.parser.constructs?n(y):y===93?(r.exit(u),r.enter(a),r.consume(y),r.exit(a),r.exit(o),t):te(y)?(r.enter("lineEnding"),r.consume(y),r.exit("lineEnding"),p):(r.enter("chunkString",{contentType:"string"}),g(y))}function g(y){return y===null||y===91||y===93||te(y)||c++>999?(r.exit("chunkString"),p(y)):(r.consume(y),f||(f=!ye(y)),y===92?w:g)}function w(y){return y===91||y===92||y===93?(r.consume(y),c++,g):g(y)}}function uf(r,t,n,o,a,u){let l;return c;function c(w){return w===34||w===39||w===40?(r.enter(o),r.enter(a),r.consume(w),r.exit(a),l=w===40?41:w,f):n(w)}function f(w){return w===l?(r.enter(a),r.consume(w),r.exit(a),r.exit(o),t):(r.enter(u),h(w))}function h(w){return w===l?(r.exit(u),f(l)):w===null?n(w):te(w)?(r.enter("lineEnding"),r.consume(w),r.exit("lineEnding"),Ce(r,h,"linePrefix")):(r.enter("chunkString",{contentType:"string"}),p(w))}function p(w){return w===l||w===null||te(w)?(r.exit("chunkString"),h(w)):(r.consume(w),w===92?g:p)}function g(w){return w===l||w===92?(r.consume(w),p):p(w)}}function Hr(r,t){let n;return o;function o(a){return te(a)?(r.enter("lineEnding"),r.consume(a),r.exit("lineEnding"),n=!0,o):ye(a)?Ce(r,o,n?"linePrefix":"lineSuffix")(a):t(a)}}const Mx={name:"definition",tokenize:Ox},Dx={partial:!0,tokenize:Fx};function Ox(r,t,n){const o=this;let a;return u;function u(y){return r.enter("definition"),l(y)}function l(y){return sf.call(o,r,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function c(y){return a=xr(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)),y===58?(r.enter("definitionMarker"),r.consume(y),r.exit("definitionMarker"),f):n(y)}function f(y){return mt(y)?Hr(r,h)(y):h(y)}function h(y){return af(r,p,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function p(y){return r.attempt(Dx,g,g)(y)}function g(y){return ye(y)?Ce(r,w,"whitespace")(y):w(y)}function w(y){return y===null||te(y)?(r.exit("definition"),o.parser.defined.push(a),t(y)):n(y)}}function Fx(r,t,n){return o;function o(c){return mt(c)?Hr(r,a)(c):n(c)}function a(c){return uf(r,u,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function u(c){return ye(c)?Ce(r,l,"whitespace")(c):l(c)}function l(c){return c===null||te(c)?t(c):n(c)}}const Rx={name:"hardBreakEscape",tokenize:Lx};function Lx(r,t,n){return o;function o(u){return r.enter("hardBreakEscape"),r.consume(u),a}function a(u){return te(u)?(r.exit("hardBreakEscape"),t(u)):n(u)}}const $x={name:"headingAtx",resolve:Bx,tokenize:Nx};function Bx(r,t){let n=r.length-2,o=3,a,u;return r[o][1].type==="whitespace"&&(o+=2),n-2>o&&r[n][1].type==="whitespace"&&(n-=2),r[n][1].type==="atxHeadingSequence"&&(o===n-1||n-4>o&&r[n-2][1].type==="whitespace")&&(n-=o+1===n?2:4),n>o&&(a={type:"atxHeadingText",start:r[o][1].start,end:r[n][1].end},u={type:"chunkText",start:r[o][1].start,end:r[n][1].end,contentType:"text"},sn(r,o,n-o+1,[["enter",a,t],["enter",u,t],["exit",u,t],["exit",a,t]])),r}function Nx(r,t,n){let o=0;return a;function a(p){return r.enter("atxHeading"),u(p)}function u(p){return r.enter("atxHeadingSequence"),l(p)}function l(p){return p===35&&o++<6?(r.consume(p),l):p===null||mt(p)?(r.exit("atxHeadingSequence"),c(p)):n(p)}function c(p){return p===35?(r.enter("atxHeadingSequence"),f(p)):p===null||te(p)?(r.exit("atxHeading"),t(p)):ye(p)?Ce(r,c,"whitespace")(p):(r.enter("atxHeadingText"),h(p))}function f(p){return p===35?(r.consume(p),f):(r.exit("atxHeadingSequence"),c(p))}function h(p){return p===null||p===35||mt(p)?(r.exit("atxHeadingText"),c(p)):(r.consume(p),h)}}const Wx=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],fc=["pre","script","style","textarea"],zx={concrete:!0,name:"htmlFlow",resolveTo:Hx,tokenize:Ux},qx={partial:!0,tokenize:Qx},Yx={partial:!0,tokenize:Gx};function Hx(r){let t=r.length;for(;t--&&!(r[t][0]==="enter"&&r[t][1].type==="htmlFlow"););return t>1&&r[t-2][1].type==="linePrefix"&&(r[t][1].start=r[t-2][1].start,r[t+1][1].start=r[t-2][1].start,r.splice(t-2,2)),r}function Ux(r,t,n){const o=this;let a,u,l,c,f;return h;function h(I){return p(I)}function p(I){return r.enter("htmlFlow"),r.enter("htmlFlowData"),r.consume(I),g}function g(I){return I===33?(r.consume(I),w):I===47?(r.consume(I),u=!0,P):I===63?(r.consume(I),a=3,o.interrupt?t:_):an(I)?(r.consume(I),l=String.fromCharCode(I),F):n(I)}function w(I){return I===45?(r.consume(I),a=2,y):I===91?(r.consume(I),a=5,c=0,S):an(I)?(r.consume(I),a=4,o.interrupt?t:_):n(I)}function y(I){return I===45?(r.consume(I),o.interrupt?t:_):n(I)}function S(I){const bt="CDATA[";return I===bt.charCodeAt(c++)?(r.consume(I),c===bt.length?o.interrupt?t:Q:S):n(I)}function P(I){return an(I)?(r.consume(I),l=String.fromCharCode(I),F):n(I)}function F(I){if(I===null||I===47||I===62||mt(I)){const bt=I===47,ut=l.toLowerCase();return!bt&&!u&&fc.includes(ut)?(a=1,o.interrupt?t(I):Q(I)):Wx.includes(l.toLowerCase())?(a=6,bt?(r.consume(I),A):o.interrupt?t(I):Q(I)):(a=7,o.interrupt&&!o.parser.lazy[o.now().line]?n(I):u?N(I):z(I))}return I===45||Xt(I)?(r.consume(I),l+=String.fromCharCode(I),F):n(I)}function A(I){return I===62?(r.consume(I),o.interrupt?t:Q):n(I)}function N(I){return ye(I)?(r.consume(I),N):de(I)}function z(I){return I===47?(r.consume(I),de):I===58||I===95||an(I)?(r.consume(I),W):ye(I)?(r.consume(I),z):de(I)}function W(I){return I===45||I===46||I===58||I===95||Xt(I)?(r.consume(I),W):D(I)}function D(I){return I===61?(r.consume(I),E):ye(I)?(r.consume(I),D):z(I)}function E(I){return I===null||I===60||I===61||I===62||I===96?n(I):I===34||I===39?(r.consume(I),f=I,U):ye(I)?(r.consume(I),E):V(I)}function U(I){return I===f?(r.consume(I),f=null,ee):I===null||te(I)?n(I):(r.consume(I),U)}function V(I){return I===null||I===34||I===39||I===47||I===60||I===61||I===62||I===96||mt(I)?D(I):(r.consume(I),V)}function ee(I){return I===47||I===62||ye(I)?z(I):n(I)}function de(I){return I===62?(r.consume(I),X):n(I)}function X(I){return I===null||te(I)?Q(I):ye(I)?(r.consume(I),X):n(I)}function Q(I){return I===45&&a===2?(r.consume(I),Ve):I===60&&a===1?(r.consume(I),Te):I===62&&a===4?(r.consume(I),Fe):I===63&&a===3?(r.consume(I),_):I===93&&a===5?(r.consume(I),Wt):te(I)&&(a===6||a===7)?(r.exit("htmlFlowData"),r.check(qx,zt,be)(I)):I===null||te(I)?(r.exit("htmlFlowData"),be(I)):(r.consume(I),Q)}function be(I){return r.check(Yx,Ae,zt)(I)}function Ae(I){return r.enter("lineEnding"),r.consume(I),r.exit("lineEnding"),fe}function fe(I){return I===null||te(I)?be(I):(r.enter("htmlFlowData"),Q(I))}function Ve(I){return I===45?(r.consume(I),_):Q(I)}function Te(I){return I===47?(r.consume(I),l="",qe):Q(I)}function qe(I){if(I===62){const bt=l.toLowerCase();return fc.includes(bt)?(r.consume(I),Fe):Q(I)}return an(I)&&l.length<8?(r.consume(I),l+=String.fromCharCode(I),qe):Q(I)}function Wt(I){return I===93?(r.consume(I),_):Q(I)}function _(I){return I===62?(r.consume(I),Fe):I===45&&a===2?(r.consume(I),_):Q(I)}function Fe(I){return I===null||te(I)?(r.exit("htmlFlowData"),zt(I)):(r.consume(I),Fe)}function zt(I){return r.exit("htmlFlow"),t(I)}}function Gx(r,t,n){const o=this;return a;function a(l){return te(l)?(r.enter("lineEnding"),r.consume(l),r.exit("lineEnding"),u):n(l)}function u(l){return o.parser.lazy[o.now().line]?n(l):t(l)}}function Qx(r,t,n){return o;function o(a){return r.enter("lineEnding"),r.consume(a),r.exit("lineEnding"),r.attempt(to,t,n)}}const Vx={name:"htmlText",tokenize:Xx};function Xx(r,t,n){const o=this;let a,u,l;return c;function c(_){return r.enter("htmlText"),r.enter("htmlTextData"),r.consume(_),f}function f(_){return _===33?(r.consume(_),h):_===47?(r.consume(_),D):_===63?(r.consume(_),z):an(_)?(r.consume(_),V):n(_)}function h(_){return _===45?(r.consume(_),p):_===91?(r.consume(_),u=0,S):an(_)?(r.consume(_),N):n(_)}function p(_){return _===45?(r.consume(_),y):n(_)}function g(_){return _===null?n(_):_===45?(r.consume(_),w):te(_)?(l=g,Te(_)):(r.consume(_),g)}function w(_){return _===45?(r.consume(_),y):g(_)}function y(_){return _===62?Ve(_):_===45?w(_):g(_)}function S(_){const Fe="CDATA[";return _===Fe.charCodeAt(u++)?(r.consume(_),u===Fe.length?P:S):n(_)}function P(_){return _===null?n(_):_===93?(r.consume(_),F):te(_)?(l=P,Te(_)):(r.consume(_),P)}function F(_){return _===93?(r.consume(_),A):P(_)}function A(_){return _===62?Ve(_):_===93?(r.consume(_),A):P(_)}function N(_){return _===null||_===62?Ve(_):te(_)?(l=N,Te(_)):(r.consume(_),N)}function z(_){return _===null?n(_):_===63?(r.consume(_),W):te(_)?(l=z,Te(_)):(r.consume(_),z)}function W(_){return _===62?Ve(_):z(_)}function D(_){return an(_)?(r.consume(_),E):n(_)}function E(_){return _===45||Xt(_)?(r.consume(_),E):U(_)}function U(_){return te(_)?(l=U,Te(_)):ye(_)?(r.consume(_),U):Ve(_)}function V(_){return _===45||Xt(_)?(r.consume(_),V):_===47||_===62||mt(_)?ee(_):n(_)}function ee(_){return _===47?(r.consume(_),Ve):_===58||_===95||an(_)?(r.consume(_),de):te(_)?(l=ee,Te(_)):ye(_)?(r.consume(_),ee):Ve(_)}function de(_){return _===45||_===46||_===58||_===95||Xt(_)?(r.consume(_),de):X(_)}function X(_){return _===61?(r.consume(_),Q):te(_)?(l=X,Te(_)):ye(_)?(r.consume(_),X):ee(_)}function Q(_){return _===null||_===60||_===61||_===62||_===96?n(_):_===34||_===39?(r.consume(_),a=_,be):te(_)?(l=Q,Te(_)):ye(_)?(r.consume(_),Q):(r.consume(_),Ae)}function be(_){return _===a?(r.consume(_),a=void 0,fe):_===null?n(_):te(_)?(l=be,Te(_)):(r.consume(_),be)}function Ae(_){return _===null||_===34||_===39||_===60||_===61||_===96?n(_):_===47||_===62||mt(_)?ee(_):(r.consume(_),Ae)}function fe(_){return _===47||_===62||mt(_)?ee(_):n(_)}function Ve(_){return _===62?(r.consume(_),r.exit("htmlTextData"),r.exit("htmlText"),t):n(_)}function Te(_){return r.exit("htmlTextData"),r.enter("lineEnding"),r.consume(_),r.exit("lineEnding"),qe}function qe(_){return ye(_)?Ce(r,Wt,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_):Wt(_)}function Wt(_){return r.enter("htmlTextData"),l(_)}}const us={name:"labelEnd",resolveAll:Zx,resolveTo:ev,tokenize:tv},jx={tokenize:nv},Kx={tokenize:rv},Jx={tokenize:iv};function Zx(r){let t=-1;const n=[];for(;++t<r.length;){const o=r[t][1];if(n.push(r[t]),o.type==="labelImage"||o.type==="labelLink"||o.type==="labelEnd"){const a=o.type==="labelImage"?4:2;o.type="data",t+=a}}return r.length!==n.length&&sn(r,0,r.length,n),r}function ev(r,t){let n=r.length,o=0,a,u,l,c;for(;n--;)if(a=r[n][1],u){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;r[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(l){if(r[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(u=n,a.type!=="labelLink")){o=2;break}}else a.type==="labelEnd"&&(l=n);const f={type:r[u][1].type==="labelLink"?"link":"image",start:{...r[u][1].start},end:{...r[r.length-1][1].end}},h={type:"label",start:{...r[u][1].start},end:{...r[l][1].end}},p={type:"labelText",start:{...r[u+o+2][1].end},end:{...r[l-2][1].start}};return c=[["enter",f,t],["enter",h,t]],c=Nt(c,r.slice(u+1,u+o+3)),c=Nt(c,[["enter",p,t]]),c=Nt(c,ss(t.parser.constructs.insideSpan.null,r.slice(u+o+4,l-3),t)),c=Nt(c,[["exit",p,t],r[l-2],r[l-1],["exit",h,t]]),c=Nt(c,r.slice(l+1)),c=Nt(c,[["exit",f,t]]),sn(r,u,r.length,c),r}function tv(r,t,n){const o=this;let a=o.events.length,u,l;for(;a--;)if((o.events[a][1].type==="labelImage"||o.events[a][1].type==="labelLink")&&!o.events[a][1]._balanced){u=o.events[a][1];break}return c;function c(w){return u?u._inactive?g(w):(l=o.parser.defined.includes(xr(o.sliceSerialize({start:u.end,end:o.now()}))),r.enter("labelEnd"),r.enter("labelMarker"),r.consume(w),r.exit("labelMarker"),r.exit("labelEnd"),f):n(w)}function f(w){return w===40?r.attempt(jx,p,l?p:g)(w):w===91?r.attempt(Kx,p,l?h:g)(w):l?p(w):g(w)}function h(w){return r.attempt(Jx,p,g)(w)}function p(w){return t(w)}function g(w){return u._balanced=!0,n(w)}}function nv(r,t,n){return o;function o(g){return r.enter("resource"),r.enter("resourceMarker"),r.consume(g),r.exit("resourceMarker"),a}function a(g){return mt(g)?Hr(r,u)(g):u(g)}function u(g){return g===41?p(g):af(r,l,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function l(g){return mt(g)?Hr(r,f)(g):p(g)}function c(g){return n(g)}function f(g){return g===34||g===39||g===40?uf(r,h,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):p(g)}function h(g){return mt(g)?Hr(r,p)(g):p(g)}function p(g){return g===41?(r.enter("resourceMarker"),r.consume(g),r.exit("resourceMarker"),r.exit("resource"),t):n(g)}}function rv(r,t,n){const o=this;return a;function a(c){return sf.call(o,r,u,l,"reference","referenceMarker","referenceString")(c)}function u(c){return o.parser.defined.includes(xr(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)))?t(c):n(c)}function l(c){return n(c)}}function iv(r,t,n){return o;function o(u){return r.enter("reference"),r.enter("referenceMarker"),r.consume(u),r.exit("referenceMarker"),a}function a(u){return u===93?(r.enter("referenceMarker"),r.consume(u),r.exit("referenceMarker"),r.exit("reference"),t):n(u)}}const ov={name:"labelStartImage",resolveAll:us.resolveAll,tokenize:av};function av(r,t,n){const o=this;return a;function a(c){return r.enter("labelImage"),r.enter("labelImageMarker"),r.consume(c),r.exit("labelImageMarker"),u}function u(c){return c===91?(r.enter("labelMarker"),r.consume(c),r.exit("labelMarker"),r.exit("labelImage"),l):n(c)}function l(c){return c===94&&"_hiddenFootnoteSupport"in o.parser.constructs?n(c):t(c)}}const sv={name:"labelStartLink",resolveAll:us.resolveAll,tokenize:uv};function uv(r,t,n){const o=this;return a;function a(l){return r.enter("labelLink"),r.enter("labelMarker"),r.consume(l),r.exit("labelMarker"),r.exit("labelLink"),u}function u(l){return l===94&&"_hiddenFootnoteSupport"in o.parser.constructs?n(l):t(l)}}const Pa={name:"lineEnding",tokenize:lv};function lv(r,t){return n;function n(o){return r.enter("lineEnding"),r.consume(o),r.exit("lineEnding"),Ce(r,t,"linePrefix")}}const Ui={name:"thematicBreak",tokenize:cv};function cv(r,t,n){let o=0,a;return u;function u(h){return r.enter("thematicBreak"),l(h)}function l(h){return a=h,c(h)}function c(h){return h===a?(r.enter("thematicBreakSequence"),f(h)):o>=3&&(h===null||te(h))?(r.exit("thematicBreak"),t(h)):n(h)}function f(h){return h===a?(r.consume(h),o++,f):(r.exit("thematicBreakSequence"),ye(h)?Ce(r,c,"whitespace")(h):c(h))}}const pt={continuation:{tokenize:pv},exit:mv,name:"list",tokenize:dv},fv={partial:!0,tokenize:yv},hv={partial:!0,tokenize:gv};function dv(r,t,n){const o=this,a=o.events[o.events.length-1];let u=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,l=0;return c;function c(y){const S=o.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(S==="listUnordered"?!o.containerState.marker||y===o.containerState.marker:Ua(y)){if(o.containerState.type||(o.containerState.type=S,r.enter(S,{_container:!0})),S==="listUnordered")return r.enter("listItemPrefix"),y===42||y===45?r.check(Ui,n,h)(y):h(y);if(!o.interrupt||y===49)return r.enter("listItemPrefix"),r.enter("listItemValue"),f(y)}return n(y)}function f(y){return Ua(y)&&++l<10?(r.consume(y),f):(!o.interrupt||l<2)&&(o.containerState.marker?y===o.containerState.marker:y===41||y===46)?(r.exit("listItemValue"),h(y)):n(y)}function h(y){return r.enter("listItemMarker"),r.consume(y),r.exit("listItemMarker"),o.containerState.marker=o.containerState.marker||y,r.check(to,o.interrupt?n:p,r.attempt(fv,w,g))}function p(y){return o.containerState.initialBlankLine=!0,u++,w(y)}function g(y){return ye(y)?(r.enter("listItemPrefixWhitespace"),r.consume(y),r.exit("listItemPrefixWhitespace"),w):n(y)}function w(y){return o.containerState.size=u+o.sliceSerialize(r.exit("listItemPrefix"),!0).length,t(y)}}function pv(r,t,n){const o=this;return o.containerState._closeFlow=void 0,r.check(to,a,u);function a(c){return o.containerState.furtherBlankLines=o.containerState.furtherBlankLines||o.containerState.initialBlankLine,Ce(r,t,"listItemIndent",o.containerState.size+1)(c)}function u(c){return o.containerState.furtherBlankLines||!ye(c)?(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,l(c)):(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,r.attempt(hv,t,l)(c))}function l(c){return o.containerState._closeFlow=!0,o.interrupt=void 0,Ce(r,r.attempt(pt,t,n),"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function gv(r,t,n){const o=this;return Ce(r,a,"listItemIndent",o.containerState.size+1);function a(u){const l=o.events[o.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===o.containerState.size?t(u):n(u)}}function mv(r){r.exit(this.containerState.type)}function yv(r,t,n){const o=this;return Ce(r,a,"listItemPrefixWhitespace",o.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(u){const l=o.events[o.events.length-1];return!ye(u)&&l&&l[1].type==="listItemPrefixWhitespace"?t(u):n(u)}}const hc={name:"setextUnderline",resolveTo:wv,tokenize:bv};function wv(r,t){let n=r.length,o,a,u;for(;n--;)if(r[n][0]==="enter"){if(r[n][1].type==="content"){o=n;break}r[n][1].type==="paragraph"&&(a=n)}else r[n][1].type==="content"&&r.splice(n,1),!u&&r[n][1].type==="definition"&&(u=n);const l={type:"setextHeading",start:{...r[o][1].start},end:{...r[r.length-1][1].end}};return r[a][1].type="setextHeadingText",u?(r.splice(a,0,["enter",l,t]),r.splice(u+1,0,["exit",r[o][1],t]),r[o][1].end={...r[u][1].end}):r[o][1]=l,r.push(["exit",l,t]),r}function bv(r,t,n){const o=this;let a;return u;function u(h){let p=o.events.length,g;for(;p--;)if(o.events[p][1].type!=="lineEnding"&&o.events[p][1].type!=="linePrefix"&&o.events[p][1].type!=="content"){g=o.events[p][1].type==="paragraph";break}return!o.parser.lazy[o.now().line]&&(o.interrupt||g)?(r.enter("setextHeadingLine"),a=h,l(h)):n(h)}function l(h){return r.enter("setextHeadingLineSequence"),c(h)}function c(h){return h===a?(r.consume(h),c):(r.exit("setextHeadingLineSequence"),ye(h)?Ce(r,f,"lineSuffix")(h):f(h))}function f(h){return h===null||te(h)?(r.exit("setextHeadingLine"),t(h)):n(h)}}const xv={tokenize:vv};function vv(r){const t=this,n=r.attempt(to,o,r.attempt(this.parser.constructs.flowInitial,a,Ce(r,r.attempt(this.parser.constructs.flow,a,r.attempt(Cx,a)),"linePrefix")));return n;function o(u){if(u===null){r.consume(u);return}return r.enter("lineEndingBlank"),r.consume(u),r.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function a(u){if(u===null){r.consume(u);return}return r.enter("lineEnding"),r.consume(u),r.exit("lineEnding"),t.currentConstruct=void 0,n}}const _v={resolveAll:cf()},kv=lf("string"),Iv=lf("text");function lf(r){return{resolveAll:cf(r==="text"?Sv:void 0),tokenize:t};function t(n){const o=this,a=this.parser.constructs[r],u=n.attempt(a,l,c);return l;function l(p){return h(p)?u(p):c(p)}function c(p){if(p===null){n.consume(p);return}return n.enter("data"),n.consume(p),f}function f(p){return h(p)?(n.exit("data"),u(p)):(n.consume(p),f)}function h(p){if(p===null)return!0;const g=a[p];let w=-1;if(g)for(;++w<g.length;){const y=g[w];if(!y.previous||y.previous.call(o,o.previous))return!0}return!1}}}function cf(r){return t;function t(n,o){let a=-1,u;for(;++a<=n.length;)u===void 0?n[a]&&n[a][1].type==="data"&&(u=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==u+2&&(n[u][1].end=n[a-1][1].end,n.splice(u+2,a-u-2),a=u+2),u=void 0);return r?r(n,o):n}}function Sv(r,t){let n=0;for(;++n<=r.length;)if((n===r.length||r[n][1].type==="lineEnding")&&r[n-1][1].type==="data"){const o=r[n-1][1],a=t.sliceStream(o);let u=a.length,l=-1,c=0,f;for(;u--;){const h=a[u];if(typeof h=="string"){for(l=h.length;h.charCodeAt(l-1)===32;)c++,l--;if(l)break;l=-1}else if(h===-2)f=!0,c++;else if(h!==-1){u++;break}}if(t._contentTypeTextTrailing&&n===r.length&&(c=0),c){const h={type:n===r.length||f||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:u?l:o.start._bufferIndex+l,_index:o.start._index+u,line:o.end.line,column:o.end.column-c,offset:o.end.offset-c},end:{...o.end}};o.end={...h.start},o.start.offset===o.end.offset?Object.assign(o,h):(r.splice(n,0,["enter",h,t],["exit",h,t]),n+=2)}n++}return r}const Cv={42:pt,43:pt,45:pt,48:pt,49:pt,50:pt,51:pt,52:pt,53:pt,54:pt,55:pt,56:pt,57:pt,62:tf},Tv={91:Mx},Ev={[-2]:Ea,[-1]:Ea,32:Ea},Pv={35:$x,42:Ui,45:[hc,Ui],60:zx,61:hc,95:Ui,96:cc,126:cc},Av={38:rf,92:nf},Mv={[-5]:Pa,[-4]:Pa,[-3]:Pa,33:ov,38:rf,42:Ga,60:[sx,Vx],91:sv,92:[Rx,nf],93:us,95:Ga,96:xx},Dv={null:[Ga,_v]},Ov={null:[42,95]},Fv={null:[]},Rv=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Ov,contentInitial:Tv,disable:Fv,document:Cv,flow:Pv,flowInitial:Ev,insideSpan:Dv,string:Av,text:Mv},Symbol.toStringTag,{value:"Module"}));function Lv(r,t,n){let o={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const a={},u=[];let l=[],c=[];const f={attempt:U(D),check:U(E),consume:N,enter:z,exit:W,interrupt:U(E,{interrupt:!0})},h={code:null,containerState:{},defineSkip:P,events:[],now:S,parser:r,previous:null,sliceSerialize:w,sliceStream:y,write:g};let p=t.tokenize.call(h,f);return t.resolveAll&&u.push(t),h;function g(X){return l=Nt(l,X),F(),l[l.length-1]!==null?[]:(V(t,0),h.events=ss(u,h.events,h),h.events)}function w(X,Q){return Bv(y(X),Q)}function y(X){return $v(l,X)}function S(){const{_bufferIndex:X,_index:Q,line:be,column:Ae,offset:fe}=o;return{_bufferIndex:X,_index:Q,line:be,column:Ae,offset:fe}}function P(X){a[X.line]=X.column,de()}function F(){let X;for(;o._index<l.length;){const Q=l[o._index];if(typeof Q=="string")for(X=o._index,o._bufferIndex<0&&(o._bufferIndex=0);o._index===X&&o._bufferIndex<Q.length;)A(Q.charCodeAt(o._bufferIndex));else A(Q)}}function A(X){p=p(X)}function N(X){te(X)?(o.line++,o.column=1,o.offset+=X===-3?2:1,de()):X!==-1&&(o.column++,o.offset++),o._bufferIndex<0?o._index++:(o._bufferIndex++,o._bufferIndex===l[o._index].length&&(o._bufferIndex=-1,o._index++)),h.previous=X}function z(X,Q){const be=Q||{};return be.type=X,be.start=S(),h.events.push(["enter",be,h]),c.push(be),be}function W(X){const Q=c.pop();return Q.end=S(),h.events.push(["exit",Q,h]),Q}function D(X,Q){V(X,Q.from)}function E(X,Q){Q.restore()}function U(X,Q){return be;function be(Ae,fe,Ve){let Te,qe,Wt,_;return Array.isArray(Ae)?zt(Ae):"tokenize"in Ae?zt([Ae]):Fe(Ae);function Fe(Re){return zn;function zn(lt){const Pt=lt!==null&&Re[lt],kn=lt!==null&&Re.null,cn=[...Array.isArray(Pt)?Pt:Pt?[Pt]:[],...Array.isArray(kn)?kn:kn?[kn]:[]];return zt(cn)(lt)}}function zt(Re){return Te=Re,qe=0,Re.length===0?Ve:I(Re[qe])}function I(Re){return zn;function zn(lt){return _=ee(),Wt=Re,Re.partial||(h.currentConstruct=Re),Re.name&&h.parser.constructs.disable.null.includes(Re.name)?ut():Re.tokenize.call(Q?Object.assign(Object.create(h),Q):h,f,bt,ut)(lt)}}function bt(Re){return X(Wt,_),fe}function ut(Re){return _.restore(),++qe<Te.length?I(Te[qe]):Ve}}}function V(X,Q){X.resolveAll&&!u.includes(X)&&u.push(X),X.resolve&&sn(h.events,Q,h.events.length-Q,X.resolve(h.events.slice(Q),h)),X.resolveTo&&(h.events=X.resolveTo(h.events,h))}function ee(){const X=S(),Q=h.previous,be=h.currentConstruct,Ae=h.events.length,fe=Array.from(c);return{from:Ae,restore:Ve};function Ve(){o=X,h.previous=Q,h.currentConstruct=be,h.events.length=Ae,c=fe,de()}}function de(){o.line in a&&o.column<2&&(o.column=a[o.line],o.offset+=a[o.line]-1)}}function $v(r,t){const n=t.start._index,o=t.start._bufferIndex,a=t.end._index,u=t.end._bufferIndex;let l;if(n===a)l=[r[n].slice(o,u)];else{if(l=r.slice(n,a),o>-1){const c=l[0];typeof c=="string"?l[0]=c.slice(o):l.shift()}u>0&&l.push(r[a].slice(0,u))}return l}function Bv(r,t){let n=-1;const o=[];let a;for(;++n<r.length;){const u=r[n];let l;if(typeof u=="string")l=u;else switch(u){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=t?" ":"	";break}case-1:{if(!t&&a)continue;l=" ";break}default:l=String.fromCharCode(u)}a=u===-2,o.push(l)}return o.join("")}function Nv(r){const o={constructs:Gb([Rv,...(r||{}).extensions||[]]),content:a(ex),defined:[],document:a(nx),flow:a(xv),lazy:{},string:a(kv),text:a(Iv)};return o;function a(u){return l;function l(c){return Lv(o,u,c)}}}function Wv(r){for(;!of(r););return r}const dc=/[\0\t\n\r]/g;function zv(){let r=1,t="",n=!0,o;return a;function a(u,l,c){const f=[];let h,p,g,w,y;for(u=t+(typeof u=="string"?u.toString():new TextDecoder(l||void 0).decode(u)),g=0,t="",n&&(u.charCodeAt(0)===65279&&g++,n=void 0);g<u.length;){if(dc.lastIndex=g,h=dc.exec(u),w=h&&h.index!==void 0?h.index:u.length,y=u.charCodeAt(w),!h){t=u.slice(g);break}if(y===10&&g===w&&o)f.push(-3),o=void 0;else switch(o&&(f.push(-5),o=void 0),g<w&&(f.push(u.slice(g,w)),r+=w-g),y){case 0:{f.push(65533),r++;break}case 9:{for(p=Math.ceil(r/4)*4,f.push(-2);r++<p;)f.push(-1);break}case 10:{f.push(-4),r=1;break}default:o=!0,r=1}g=w+1}return c&&(o&&f.push(-5),t&&f.push(t),f.push(null)),f}}const qv=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function ff(r){return r.replace(qv,Yv)}function Yv(r,t,n){if(t)return t;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),u=a===120||a===88;return ef(n.slice(u?2:1),u?16:10)}return as(n)||r}const hf={}.hasOwnProperty;function Hv(r,t,n){return typeof t!="string"&&(n=t,t=void 0),Uv(n)(Wv(Nv(n).document().write(zv()(r,t,!0))))}function Uv(r){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:u(Kr),autolinkProtocol:ee,autolinkEmail:ee,atxHeading:u(In),blockQuote:u(kn),characterEscape:ee,characterReference:ee,codeFenced:u(cn),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:u(cn,l),codeText:u(rr,l),codeTextData:ee,data:ee,codeFlowValue:ee,definition:u(Vr),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:u(xt),hardBreakEscape:u(Xr),hardBreakTrailing:u(Xr),htmlFlow:u(At,l),htmlFlowData:ee,htmlText:u(At,l),htmlTextData:ee,image:u(jr),label:l,link:u(Kr),listItem:u(vt),listItemValue:w,listOrdered:u(Sn,g),listUnordered:u(Sn),paragraph:u(qn),reference:I,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:u(In),strong:u(ir),thematicBreak:u(Yn)},exit:{atxHeading:f(),atxHeadingSequence:D,autolink:f(),autolinkEmail:Pt,autolinkProtocol:lt,blockQuote:f(),characterEscapeValue:de,characterReferenceMarkerHexadecimal:ut,characterReferenceMarkerNumeric:ut,characterReferenceValue:Re,characterReference:zn,codeFenced:f(F),codeFencedFence:P,codeFencedFenceInfo:y,codeFencedFenceMeta:S,codeFlowValue:de,codeIndented:f(A),codeText:f(fe),codeTextData:de,data:de,definition:f(),definitionDestinationString:W,definitionLabelString:N,definitionTitleString:z,emphasis:f(),hardBreakEscape:f(Q),hardBreakTrailing:f(Q),htmlFlow:f(be),htmlFlowData:de,htmlText:f(Ae),htmlTextData:de,image:f(Te),label:Wt,labelText:qe,lineEnding:X,link:f(Ve),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:bt,resourceDestinationString:_,resourceTitleString:Fe,resource:zt,setextHeading:f(V),setextHeadingLineSequence:U,setextHeadingText:E,strong:f(),thematicBreak:f()}};df(t,(r||{}).mdastExtensions||[]);const n={};return o;function o(R){let q={type:"root",children:[]};const K={stack:[q],tokenStack:[],config:t,enter:c,exit:h,buffer:l,resume:p,data:n},ae=[];let ge=-1;for(;++ge<R.length;)if(R[ge][1].type==="listOrdered"||R[ge][1].type==="listUnordered")if(R[ge][0]==="enter")ae.push(ge);else{const rt=ae.pop();ge=a(R,rt,ge)}for(ge=-1;++ge<R.length;){const rt=t[R[ge][0]];hf.call(rt,R[ge][1].type)&&rt[R[ge][1].type].call(Object.assign({sliceSerialize:R[ge][2].sliceSerialize},K),R[ge][1])}if(K.tokenStack.length>0){const rt=K.tokenStack[K.tokenStack.length-1];(rt[1]||pc).call(K,void 0,rt[0])}for(q.position={start:Ln(R.length>0?R[0][1].start:{line:1,column:1,offset:0}),end:Ln(R.length>0?R[R.length-2][1].end:{line:1,column:1,offset:0})},ge=-1;++ge<t.transforms.length;)q=t.transforms[ge](q)||q;return q}function a(R,q,K){let ae=q-1,ge=-1,rt=!1,qt,_t,fn,hn;for(;++ae<=K;){const je=R[ae];switch(je[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{je[0]==="enter"?ge++:ge--,hn=void 0;break}case"lineEndingBlank":{je[0]==="enter"&&(qt&&!hn&&!ge&&!fn&&(fn=ae),hn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:hn=void 0}if(!ge&&je[0]==="enter"&&je[1].type==="listItemPrefix"||ge===-1&&je[0]==="exit"&&(je[1].type==="listUnordered"||je[1].type==="listOrdered")){if(qt){let Kt=ae;for(_t=void 0;Kt--;){const Yt=R[Kt];if(Yt[1].type==="lineEnding"||Yt[1].type==="lineEndingBlank"){if(Yt[0]==="exit")continue;_t&&(R[_t][1].type="lineEndingBlank",rt=!0),Yt[1].type="lineEnding",_t=Kt}else if(!(Yt[1].type==="linePrefix"||Yt[1].type==="blockQuotePrefix"||Yt[1].type==="blockQuotePrefixWhitespace"||Yt[1].type==="blockQuoteMarker"||Yt[1].type==="listItemIndent"))break}fn&&(!_t||fn<_t)&&(qt._spread=!0),qt.end=Object.assign({},_t?R[_t][1].start:je[1].end),R.splice(_t||ae,0,["exit",qt,je[2]]),ae++,K++}if(je[1].type==="listItemPrefix"){const Kt={type:"listItem",_spread:!1,start:Object.assign({},je[1].start),end:void 0};qt=Kt,R.splice(ae,0,["enter",Kt,je[2]]),ae++,K++,fn=void 0,hn=!0}}}return R[q][1]._spread=rt,K}function u(R,q){return K;function K(ae){c.call(this,R(ae),ae),q&&q.call(this,ae)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(R,q,K){this.stack[this.stack.length-1].children.push(R),this.stack.push(R),this.tokenStack.push([q,K||void 0]),R.position={start:Ln(q.start),end:void 0}}function f(R){return q;function q(K){R&&R.call(this,K),h.call(this,K)}}function h(R,q){const K=this.stack.pop(),ae=this.tokenStack.pop();if(ae)ae[0].type!==R.type&&(q?q.call(this,R,ae[0]):(ae[1]||pc).call(this,R,ae[0]));else throw new Error("Cannot close `"+R.type+"` ("+Yr({start:R.start,end:R.end})+"): it‚Äôs not open");K.position.end=Ln(R.end)}function p(){return os(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function w(R){if(this.data.expectingFirstListItemValue){const q=this.stack[this.stack.length-2];q.start=Number.parseInt(this.sliceSerialize(R),10),this.data.expectingFirstListItemValue=void 0}}function y(){const R=this.resume(),q=this.stack[this.stack.length-1];q.lang=R}function S(){const R=this.resume(),q=this.stack[this.stack.length-1];q.meta=R}function P(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function F(){const R=this.resume(),q=this.stack[this.stack.length-1];q.value=R.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function A(){const R=this.resume(),q=this.stack[this.stack.length-1];q.value=R.replace(/(\r?\n|\r)$/g,"")}function N(R){const q=this.resume(),K=this.stack[this.stack.length-1];K.label=q,K.identifier=xr(this.sliceSerialize(R)).toLowerCase()}function z(){const R=this.resume(),q=this.stack[this.stack.length-1];q.title=R}function W(){const R=this.resume(),q=this.stack[this.stack.length-1];q.url=R}function D(R){const q=this.stack[this.stack.length-1];if(!q.depth){const K=this.sliceSerialize(R).length;q.depth=K}}function E(){this.data.setextHeadingSlurpLineEnding=!0}function U(R){const q=this.stack[this.stack.length-1];q.depth=this.sliceSerialize(R).codePointAt(0)===61?1:2}function V(){this.data.setextHeadingSlurpLineEnding=void 0}function ee(R){const K=this.stack[this.stack.length-1].children;let ae=K[K.length-1];(!ae||ae.type!=="text")&&(ae=ro(),ae.position={start:Ln(R.start),end:void 0},K.push(ae)),this.stack.push(ae)}function de(R){const q=this.stack.pop();q.value+=this.sliceSerialize(R),q.position.end=Ln(R.end)}function X(R){const q=this.stack[this.stack.length-1];if(this.data.atHardBreak){const K=q.children[q.children.length-1];K.position.end=Ln(R.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(q.type)&&(ee.call(this,R),de.call(this,R))}function Q(){this.data.atHardBreak=!0}function be(){const R=this.resume(),q=this.stack[this.stack.length-1];q.value=R}function Ae(){const R=this.resume(),q=this.stack[this.stack.length-1];q.value=R}function fe(){const R=this.resume(),q=this.stack[this.stack.length-1];q.value=R}function Ve(){const R=this.stack[this.stack.length-1];if(this.data.inReference){const q=this.data.referenceType||"shortcut";R.type+="Reference",R.referenceType=q,delete R.url,delete R.title}else delete R.identifier,delete R.label;this.data.referenceType=void 0}function Te(){const R=this.stack[this.stack.length-1];if(this.data.inReference){const q=this.data.referenceType||"shortcut";R.type+="Reference",R.referenceType=q,delete R.url,delete R.title}else delete R.identifier,delete R.label;this.data.referenceType=void 0}function qe(R){const q=this.sliceSerialize(R),K=this.stack[this.stack.length-2];K.label=ff(q),K.identifier=xr(q).toLowerCase()}function Wt(){const R=this.stack[this.stack.length-1],q=this.resume(),K=this.stack[this.stack.length-1];if(this.data.inReference=!0,K.type==="link"){const ae=R.children;K.children=ae}else K.alt=q}function _(){const R=this.resume(),q=this.stack[this.stack.length-1];q.url=R}function Fe(){const R=this.resume(),q=this.stack[this.stack.length-1];q.title=R}function zt(){this.data.inReference=void 0}function I(){this.data.referenceType="collapsed"}function bt(R){const q=this.resume(),K=this.stack[this.stack.length-1];K.label=q,K.identifier=xr(this.sliceSerialize(R)).toLowerCase(),this.data.referenceType="full"}function ut(R){this.data.characterReferenceType=R.type}function Re(R){const q=this.sliceSerialize(R),K=this.data.characterReferenceType;let ae;K?(ae=ef(q,K==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ae=as(q);const ge=this.stack[this.stack.length-1];ge.value+=ae}function zn(R){const q=this.stack.pop();q.position.end=Ln(R.end)}function lt(R){de.call(this,R);const q=this.stack[this.stack.length-1];q.url=this.sliceSerialize(R)}function Pt(R){de.call(this,R);const q=this.stack[this.stack.length-1];q.url="mailto:"+this.sliceSerialize(R)}function kn(){return{type:"blockquote",children:[]}}function cn(){return{type:"code",lang:null,meta:null,value:""}}function rr(){return{type:"inlineCode",value:""}}function Vr(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function xt(){return{type:"emphasis",children:[]}}function In(){return{type:"heading",depth:0,children:[]}}function Xr(){return{type:"break"}}function At(){return{type:"html",value:""}}function jr(){return{type:"image",title:null,url:"",alt:null}}function Kr(){return{type:"link",title:null,url:"",children:[]}}function Sn(R){return{type:"list",ordered:R.type==="listOrdered",start:null,spread:R._spread,children:[]}}function vt(R){return{type:"listItem",spread:R._spread,checked:null,children:[]}}function qn(){return{type:"paragraph",children:[]}}function ir(){return{type:"strong",children:[]}}function ro(){return{type:"text",value:""}}function Yn(){return{type:"thematicBreak"}}}function Ln(r){return{line:r.line,column:r.column,offset:r.offset}}function df(r,t){let n=-1;for(;++n<t.length;){const o=t[n];Array.isArray(o)?df(r,o):Gv(r,o)}}function Gv(r,t){let n;for(n in t)if(hf.call(t,n))switch(n){case"canContainEols":{const o=t[n];o&&r[n].push(...o);break}case"transforms":{const o=t[n];o&&r[n].push(...o);break}case"enter":case"exit":{const o=t[n];o&&Object.assign(r[n],o);break}}}function pc(r,t){throw r?new Error("Cannot close `"+r.type+"` ("+Yr({start:r.start,end:r.end})+"): a different token (`"+t.type+"`, "+Yr({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Yr({start:t.start,end:t.end})+") is still open")}function Qa(r){const t=this;t.parser=n;function n(o){return Hv(o,{...t.data("settings"),...r,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}const ls=(function(r){if(r==null)return jv;if(typeof r=="function")return no(r);if(typeof r=="object")return Array.isArray(r)?Qv(r):Vv(r);if(typeof r=="string")return Xv(r);throw new Error("Expected function, string, or object as test")});function Qv(r){const t=[];let n=-1;for(;++n<r.length;)t[n]=ls(r[n]);return no(o);function o(...a){let u=-1;for(;++u<t.length;)if(t[u].apply(this,a))return!0;return!1}}function Vv(r){const t=r;return no(n);function n(o){const a=o;let u;for(u in r)if(a[u]!==t[u])return!1;return!0}}function Xv(r){return no(t);function t(n){return n&&n.type===r}}function no(r){return t;function t(n,o,a){return!!(Kv(n)&&r.call(this,n,typeof o=="number"?o:void 0,a||void 0))}}function jv(){return!0}function Kv(r){return r!==null&&typeof r=="object"&&"type"in r}const pf=[],Jv=!0,Va=!1,Zv="skip";function e_(r,t,n,o){let a;typeof t=="function"&&typeof n!="function"?(o=n,n=t):a=t;const u=ls(a),l=o?-1:1;c(r,void 0,[])();function c(f,h,p){const g=f&&typeof f=="object"?f:{};if(typeof g.type=="string"){const y=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(w,"name",{value:"node ("+(f.type+(y?"<"+y+">":""))+")"})}return w;function w(){let y=pf,S,P,F;if((!t||u(f,h,p[p.length-1]||void 0))&&(y=t_(n(f,p)),y[0]===Va))return y;if("children"in f&&f.children){const A=f;if(A.children&&y[0]!==Zv)for(P=(o?A.children.length:-1)+l,F=p.concat(A);P>-1&&P<A.children.length;){const N=A.children[P];if(S=c(N,P,F)(),S[0]===Va)return S;P=typeof S[1]=="number"?S[1]:P+l}}return y}}}function t_(r){return Array.isArray(r)?r:typeof r=="number"?[Jv,r]:r==null?pf:[r]}function Xa(r,t,n,o){let a,u,l;typeof t=="function"&&typeof n!="function"?(u=void 0,l=t,a=n):(u=t,l=n,a=o),e_(r,u,c,a);function c(f,h){const p=h[h.length-1],g=p?p.children.indexOf(f):void 0;return l(f,g,p)}}const qi=un(ln.ValueExtractor);class n_{extract(t){const n=Ki().use(Qa).parse(t),o=[],a=[],u={};Xa(n,l=>{if(l.type==="html"&&l.position){const c=l.value,f=l.position.start.offset;if(c.includes(nn.input)){const h=this.getMeta(c);if(h){const p=this.key(h);c.includes('end"')?u[p]?u[p].endPos=l.position.start.offset:u[p]={meta:h,startPos:-1,endPos:l.position.start.offset,hiddenValues:[]}:u[p]?u[p].startPos=l.position.end.offset:u[p]={meta:h,startPos:l.position.end.offset,endPos:-1,hiddenValues:[]}}}else if(c.includes(nn.hiddenValue)){const h=this.getMeta(c);if(h&&h.value){const p=this.key(h);u[p]||(u[p]={meta:h,startPos:-1,endPos:-1,hiddenValues:[]}),u[p].hiddenValues.push({value:h.value,pos:f})}}}});for(const l in u){const{meta:c,startPos:f,endPos:h,hiddenValues:p}=u[l];if(f===-1||h===-1){if(c.inputType==="text"||c.inputType==="richText"){if(f!==-1&&h===-1){const P=this.findNextInputTagPosition(t,f);if(P!==-1){const A=t.substring(f,P).trim().replace(/^>\s?/gm,"").replace(/<[^>]+>/g,"").trim();if(!A||A===">"){o.push({componentId:c.componentId,inputId:c.inputId,inputType:c.inputType,value:null,errors:[]});continue}}}o.push({componentId:c.componentId,inputId:c.inputId,inputType:c.inputType,value:null,errors:[]});continue}qi.warn(`Input ${l} missing start or end tag, skipping`);continue}const w=t.substring(f,h).trim().replace(/<\/?span[^>]*>/gs,"").trim(),y=p.filter(P=>P.pos>=f&&P.pos<h).map(P=>P.value),S=this.extractValue(c.inputType,w,y,c);S.errors.length>0&&a.push(...S.errors),o.push({componentId:c.componentId,inputId:c.inputId,inputType:c.inputType,value:S.value,errors:S.errors})}return qi.dev("Extracted values",o),a.length>0&&qi.error("Extraction errors:",a),o}findNextInputTagPosition(t,n){const o=new RegExp(`<span[^>]*class="\\$${nn.input}[^"]*"`,"g");o.lastIndex=n;const a=o.exec(t);return a?a.index:-1}getMeta(t){const n=t.match(/data-meta=(?:'([^']+)'|"([^"]+)")/);if(!n)return null;try{return JSON.parse(n[1]||n[2])}catch{return null}}key(t){return`${t.componentId}::${t.inputId}`}extractValue(t,n,o,a){const u=[];let l=null;switch(t){case"boolean":{n.includes("[x]")||n.includes("[X]")?l=!0:n.includes("[ ]")?l=!1:(u.push("Boolean input must be a markdown checkbox"),l=null);break}case"text":{let c=n;if(a.technicalPrefix&&n.trim()===a.technicalPrefix.trim()){l=null;break}if(a.technicalPrefix){const p=a.technicalPrefix.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&");c=c.replace(new RegExp(`^${p}\\s*`,"gm"),"")}else c=c.replace(/^>\s*/gm,"");const f=c.replace(/<[^>]+>/g,"").trim();a.required&&!f&&u.push("Text input is required"),a.placeholder&&f===a.placeholder?l=null:l=f||null;break}case"richText":{let c=n;if(a.technicalPrefix&&n.trim()===a.technicalPrefix.trim()){l=null;break}if(a.technicalPrefix){const p=a.technicalPrefix.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&");c=c.replace(new RegExp(`^${p}\\s*`,"gm"),"")}else c=c.replace(/^>\s*/gm,"");const f=c.replace(/<[^>]+>/g,"").trim();a.required&&!f&&u.push("Rich text input is required"),a.placeholder&&f===a.placeholder?l=null:l=f||null;break}case"multicheckbox":{const c=[],f=n.split(`
`);let h=0;f.forEach(p=>{p.match(/\[(x|X)\]/)&&h<o.length&&c.push(o[h]),p.match(/\[[ xX]\]/)&&h++}),a.required&&c.length===0&&u.push("At least one option must be selected"),a.singleChoice?(c.length>1&&u.push(`Multiple checked values for singleChoice input: ${a.componentId}::${a.inputId} [${c.join(", ")}]`),l=c[0]??null):l=c;break}case"number":{let c=n;if(a.technicalPrefix){const h=a.technicalPrefix.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");c=c.replace(new RegExp(`^${h}`,"gm"),"")}const f=c.match(new RegExp("(?<!\\d)(\\d+(?:[.,]\\d+)?)"));f?(l=parseFloat(f[1].replace(",",".")),a.required&&(l==null||isNaN(l))&&u.push("Number input is required"),typeof l=="number"&&a.min!==void 0&&l<a.min&&u.push(`Number must be >= ${a.min}`),typeof l=="number"&&a.max!==void 0&&l>a.max&&u.push(`Number must be <= ${a.max}`)):(a.required&&u.push("Number input is required"),l=null);break}default:l=n}return{value:l,errors:u}}extractReportMetadata(t){try{const n=Ki().use(Qa).parse(t);let o=null;return Xa(n,a=>{if(a.type==="html"){const u=a.value;if(u.includes(nn.reportMetadata)){const l=this.getMeta(u);if(l)return o=l,!1}}}),o}catch(n){return qi.error("Failed to extract report metadata",{error:n}),null}}}const gc=new n_,nt=un(ln.InputCollector);class r_{constructor(t){this.getConfig=t}async collectFromYesterday(){nt.dev("Starting collection of inputs from yesterday‚Äôs reports");const t={};this.getConfig();for(const[n,{folder:o,name:a}]of Object.entries(Jc))try{const u=`${Ur.baseOutput}/${o}`;nt.dev(`Checking folder "${u}" for report: ${n}`);const l=await Ur._listFiles(u);if(!l.length){nt.warn(`No files found in "${u}" for report: ${n}`);continue}const f=l.sort((N,z)=>{const W=N.match(/-(\d{5})-/),D=z.match(/-(\d{5})-/);return!W||!D?0:parseInt(D[1])-parseInt(W[1])})[0];if(!f.includes(n)){nt.warn(`Newest file "${f}" in folder "${u}" does not match report type: ${n}`);continue}const h=`${u}/${f}`,p=ke.vault.getAbstractFileByPath(h);if(!p||!("vault"in ke)){nt.error(`Could not load file for report ${n}`,{filePath:h});continue}const g=f.match(/^(\d{8})-(\d{5})-/);let w="",y="";g&&(w=`${g[1].slice(0,4)}-${g[1].slice(4,6)}-${g[1].slice(6,8)}`,y=g[2]),nt.dev(`Reading file: "${h}"`);const S=await ke.vault.read(p);nt.info(`[InputCollector] File content length: ${S.length}`),nt.dev(`[InputCollector] First 500 chars: ${S.substring(0,500)}`);const P=gc.extractReportMetadata(S);nt.info("[InputCollector] Extracted metadata",{reportMetadata:P}),P?(w=P.reportDate,y=P.reportNumber,nt.info(`[InputCollector] Using report metadata from file: date=${w}, number=${y}`)):(nt.warn(`[InputCollector] No metadata found in file, using filename parsing: ${f}`),nt.warn(`[InputCollector] Fallback - reportDate=${w}, reportNumber=${y}`));const A=gc.extract(S).map(N=>({componentId:N.componentId,inputId:N.inputId,type:N.inputType??"unknown",value:N.value,errors:N.errors&&N.errors.length>0?N.errors:void 0,reportType:n,reportDate:w,reportNumber:y}));t[n]=A,nt.dev(`Parsed ${A.length} inputs for report: ${n}`)}catch(u){nt.error(`Failed collecting inputs for ${n}`,{error:u})}return nt.info(`InputCollector finished. Collected reports: ${Object.keys(t).length}`),nt.dev("Collected inputs summary:",{collectedByReport:t}),t}}const i_=new r_(()=>st);function o_(r,t){if(r===void 0)throw new Error("lowdb: missing adapter");if(t===void 0)throw new Error("lowdb: missing default data")}class a_{adapter;data;constructor(t,n){o_(t,n),this.adapter=t,this.data=n}async read(){const t=await this.adapter.read();t&&(this.data=t)}async write(){this.data&&await this.adapter.write(this.data)}async update(t){t(this.data),await this.write()}}const gt=un(ln.DbService);class s_{constructor(t){this.dbPath=t}async read(){try{const t=ke.vault.getAbstractFileByPath(this.dbPath);if(t&&"extension"in t){const n=await ke.vault.read(t);return JSON.parse(n)}return null}catch(t){return gt.error("Error reading database",{error:t}),null}}async write(t){try{const n=JSON.stringify(t,null,2),o=ke.vault.getAbstractFileByPath(this.dbPath);o&&"extension"in o?(await ke.vault.modify(o,n),gt.dev(`Database saved to ${this.dbPath}`)):(await ke.vault.create(this.dbPath,n),gt.info(`Database created at ${this.dbPath}`))}catch(n){gt.error("Error writing database",{error:n})}}}class u_{constructor(){this.db=null}getDbPath(){return`${st.projectDir}/${st.coreDir}/powerjournal-db.json`}async ensureCoreDir(){const t=`${st.projectDir}/${st.coreDir}`;ke.vault.getAbstractFileByPath(t)||(gt.dev(`Creating core directory: ${t}`),await ke.vault.createFolder(t))}async ensureDb(){if(!this.db){await this.ensureCoreDir();const t=this.getDbPath(),n=new s_(t);this.db=new a_(n,{reports:{}}),gt.dev(`Database adapter initialized for ${t}`)}return this.db}async init(){const t=await this.ensureDb();await t.read(),t.data||={reports:{}},gt.dev("Database initialized")}async saveReportInputs(t,n){await this.init();const o=await this.ensureDb();o.data.reports[t]=n,await o.write(),gt.info(`Saved ${n.length} inputs for report type: ${t}`)}async appendReportInputs(t,n){await this.init();const o=await this.ensureDb();o.data.reports[t]||(o.data.reports[t]=[]),o.data.reports[t].push(...n),await o.write(),gt.info(`Appended ${n.length} inputs to report type: ${t}`)}async upsertReportInputs(t,n){await this.init();const o=await this.ensureDb();o.data.reports[t]||(o.data.reports[t]=[]);const a=new Set(n.map(l=>`${l.reportDate}-${l.reportNumber}`)),u=o.data.reports[t].filter(l=>{const c=`${l.reportDate}-${l.reportNumber}`;return!a.has(c)});o.data.reports[t]=[...u,...n],await o.write(),gt.info(`Upserted ${n.length} inputs for ${t} (removed duplicates)`)}async getReportInputs(t){await this.init();const o=(await this.ensureDb()).data.reports[t]||[];return gt.dev(`Retrieved ${o.length} inputs for report type: ${t}`),o}async getInputsById(t,n,o){await this.init();const u=(await this.ensureDb()).data.reports[t]||[],l=Array.isArray(n)?n:[n],c=u.filter(f=>{const h=l.includes(f.inputId),p=o?f.componentId===o:!0;return h&&p});return gt.dev(`Filtered ${c.length} inputs for ${l.join(", ")}${o?` in ${o}`:""}`),c}async getInputsLastNReports(t){const{inputIds:n,count:o,componentId:a,reportType:u=nr.ALMOST_DAILY}=t,c=(await this.getInputsById(u,n,a)).sort((g,w)=>{const y=(w.reportDate||"").localeCompare(g.reportDate||"");return y!==0?y:(w.reportNumber||"0").localeCompare(g.reportNumber||"0")}),h=Array.from(new Set(c.map(g=>g.reportDate))).slice(0,o),p=c.filter(g=>h.includes(g.reportDate));return gt.info(`Retrieved ${p.length} inputs from last ${o} reports`),p}async getInputsInDateRange(t,n,o,a,u){const c=(await this.getInputsById(t,n,u)).filter(f=>{const h=f.reportDate||"";return h>=o&&h<=a});return gt.info(`Retrieved ${c.length} inputs between ${o} and ${a}`),c}async getAvailableInputs(t,n){await this.init();const a=(await this.ensureDb()).data.reports[t]||[],u=new Set(a.filter(l=>l.componentId===n).map(l=>l.inputId));return Array.from(u)}}const jt=new u_,mc={}.hasOwnProperty;function l_(r,t){const n=t||{};function o(a,...u){let l=o.invalid;const c=o.handlers;if(a&&mc.call(a,r)){const f=String(a[r]);l=mc.call(c,f)?c[f]:o.unknown}if(l)return l.call(this,a,...u)}return o.handlers=n.handlers||{},o.invalid=n.invalid,o.unknown=n.unknown,o}const c_={}.hasOwnProperty;function gf(r,t){let n=-1,o;if(t.extensions)for(;++n<t.extensions.length;)gf(r,t.extensions[n]);for(o in t)if(c_.call(t,o))switch(o){case"extensions":break;case"unsafe":{yc(r[o],t[o]);break}case"join":{yc(r[o],t[o]);break}case"handlers":{f_(r[o],t[o]);break}default:r.options[o]=t[o]}return r}function yc(r,t){t&&r.push(...t)}function f_(r,t){t&&Object.assign(r,t)}function h_(r,t,n,o){const a=n.enter("blockquote"),u=n.createTracker(o);u.move("> "),u.shift(2);const l=n.indentLines(n.containerFlow(r,u.current()),d_);return a(),l}function d_(r,t,n){return">"+(n?"":" ")+r}function mf(r,t){return wc(r,t.inConstruct,!0)&&!wc(r,t.notInConstruct,!1)}function wc(r,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let o=-1;for(;++o<t.length;)if(r.includes(t[o]))return!0;return!1}function bc(r,t,n,o){let a=-1;for(;++a<n.unsafe.length;)if(n.unsafe[a].character===`
`&&mf(n.stack,n.unsafe[a]))return/[ \t]/.test(o.before)?"":" ";return`\\
`}function p_(r,t){const n=String(r);let o=n.indexOf(t),a=o,u=0,l=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;o!==-1;)o===a?++u>l&&(l=u):u=1,a=o+t.length,o=n.indexOf(t,a);return l}function ja(r,t){return!!(t.options.fences===!1&&r.value&&!r.lang&&/[^ \r\n]/.test(r.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(r.value))}function g_(r){const t=r.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function m_(r,t,n,o){const a=g_(n),u=r.value||"",l=a==="`"?"GraveAccent":"Tilde";if(ja(r,n)){const g=n.enter("codeIndented"),w=n.indentLines(u,y_);return g(),w}const c=n.createTracker(o),f=a.repeat(Math.max(p_(u,a)+1,3)),h=n.enter("codeFenced");let p=c.move(f);if(r.lang){const g=n.enter(`codeFencedLang${l}`);p+=c.move(n.safe(r.lang,{before:p,after:" ",encode:["`"],...c.current()})),g()}if(r.lang&&r.meta){const g=n.enter(`codeFencedMeta${l}`);p+=c.move(" "),p+=c.move(n.safe(r.meta,{before:p,after:`
`,encode:["`"],...c.current()})),g()}return p+=c.move(`
`),u&&(p+=c.move(u+`
`)),p+=c.move(f),h(),p}function y_(r,t,n){return(n?"":"    ")+r}function cs(r){const t=r.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function w_(r,t,n,o){const a=cs(n),u=a==='"'?"Quote":"Apostrophe",l=n.enter("definition");let c=n.enter("label");const f=n.createTracker(o);let h=f.move("[");return h+=f.move(n.safe(n.associationId(r),{before:h,after:"]",...f.current()})),h+=f.move("]: "),c(),!r.url||/[\0- \u007F]/.test(r.url)?(c=n.enter("destinationLiteral"),h+=f.move("<"),h+=f.move(n.safe(r.url,{before:h,after:">",...f.current()})),h+=f.move(">")):(c=n.enter("destinationRaw"),h+=f.move(n.safe(r.url,{before:h,after:r.title?" ":`
`,...f.current()}))),c(),r.title&&(c=n.enter(`title${u}`),h+=f.move(" "+a),h+=f.move(n.safe(r.title,{before:h,after:a,...f.current()})),h+=f.move(a),c()),l(),h}function b_(r){const t=r.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Nn(r){return"&#x"+r.toString(16).toUpperCase()+";"}function Zi(r,t,n){const o=Ji(r),a=Ji(t);return o===void 0?a===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:o===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}yf.peek=x_;function yf(r,t,n,o){const a=b_(n),u=n.enter("emphasis"),l=n.createTracker(o),c=l.move(a);let f=l.move(n.containerPhrasing(r,{after:a,before:c,...l.current()}));const h=f.charCodeAt(0),p=Zi(o.before.charCodeAt(o.before.length-1),h,a);p.inside&&(f=Nn(h)+f.slice(1));const g=f.charCodeAt(f.length-1),w=Zi(o.after.charCodeAt(0),g,a);w.inside&&(f=f.slice(0,-1)+Nn(g));const y=l.move(a);return u(),n.attentionEncodeSurroundingInfo={after:w.outside,before:p.outside},c+f+y}function x_(r,t,n){return n.options.emphasis||"*"}function wf(r,t){let n=!1;return Xa(r,function(o){if("value"in o&&/\r?\n|\r/.test(o.value)||o.type==="break")return n=!0,Va}),!!((!r.depth||r.depth<3)&&os(r)&&(t.options.setext||n))}function v_(r,t,n,o){const a=Math.max(Math.min(6,r.depth||1),1),u=n.createTracker(o);if(wf(r,n)){const p=n.enter("headingSetext"),g=n.enter("phrasing"),w=n.containerPhrasing(r,{...u.current(),before:`
`,after:`
`});return g(),p(),w+`
`+(a===1?"=":"-").repeat(w.length-(Math.max(w.lastIndexOf("\r"),w.lastIndexOf(`
`))+1))}const l="#".repeat(a),c=n.enter("headingAtx"),f=n.enter("phrasing");u.move(l+" ");let h=n.containerPhrasing(r,{before:"# ",after:`
`,...u.current()});return/^[\t ]/.test(h)&&(h=Nn(h.charCodeAt(0))+h.slice(1)),h=h?l+" "+h:l,n.options.closeAtx&&(h+=" "+l),f(),c(),h}bf.peek=__;function bf(r){return r.value||""}function __(){return"<"}xf.peek=k_;function xf(r,t,n,o){const a=cs(n),u=a==='"'?"Quote":"Apostrophe",l=n.enter("image");let c=n.enter("label");const f=n.createTracker(o);let h=f.move("![");return h+=f.move(n.safe(r.alt,{before:h,after:"]",...f.current()})),h+=f.move("]("),c(),!r.url&&r.title||/[\0- \u007F]/.test(r.url)?(c=n.enter("destinationLiteral"),h+=f.move("<"),h+=f.move(n.safe(r.url,{before:h,after:">",...f.current()})),h+=f.move(">")):(c=n.enter("destinationRaw"),h+=f.move(n.safe(r.url,{before:h,after:r.title?" ":")",...f.current()}))),c(),r.title&&(c=n.enter(`title${u}`),h+=f.move(" "+a),h+=f.move(n.safe(r.title,{before:h,after:a,...f.current()})),h+=f.move(a),c()),h+=f.move(")"),l(),h}function k_(){return"!"}vf.peek=I_;function vf(r,t,n,o){const a=r.referenceType,u=n.enter("imageReference");let l=n.enter("label");const c=n.createTracker(o);let f=c.move("![");const h=n.safe(r.alt,{before:f,after:"]",...c.current()});f+=c.move(h+"]["),l();const p=n.stack;n.stack=[],l=n.enter("reference");const g=n.safe(n.associationId(r),{before:f,after:"]",...c.current()});return l(),n.stack=p,u(),a==="full"||!h||h!==g?f+=c.move(g+"]"):a==="shortcut"?f=f.slice(0,-1):f+=c.move("]"),f}function I_(){return"!"}_f.peek=S_;function _f(r,t,n){let o=r.value||"",a="`",u=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(o);)a+="`";for(/[^ \r\n]/.test(o)&&(/^[ \r\n]/.test(o)&&/[ \r\n]$/.test(o)||/^`|`$/.test(o))&&(o=" "+o+" ");++u<n.unsafe.length;){const l=n.unsafe[u],c=n.compilePattern(l);let f;if(l.atBreak)for(;f=c.exec(o);){let h=f.index;o.charCodeAt(h)===10&&o.charCodeAt(h-1)===13&&h--,o=o.slice(0,h)+" "+o.slice(f.index+1)}}return a+o+a}function S_(){return"`"}function kf(r,t){const n=os(r);return!!(!t.options.resourceLink&&r.url&&!r.title&&r.children&&r.children.length===1&&r.children[0].type==="text"&&(n===r.url||"mailto:"+n===r.url)&&/^[a-z][a-z+.-]+:/i.test(r.url)&&!/[\0- <>\u007F]/.test(r.url))}If.peek=C_;function If(r,t,n,o){const a=cs(n),u=a==='"'?"Quote":"Apostrophe",l=n.createTracker(o);let c,f;if(kf(r,n)){const p=n.stack;n.stack=[],c=n.enter("autolink");let g=l.move("<");return g+=l.move(n.containerPhrasing(r,{before:g,after:">",...l.current()})),g+=l.move(">"),c(),n.stack=p,g}c=n.enter("link"),f=n.enter("label");let h=l.move("[");return h+=l.move(n.containerPhrasing(r,{before:h,after:"](",...l.current()})),h+=l.move("]("),f(),!r.url&&r.title||/[\0- \u007F]/.test(r.url)?(f=n.enter("destinationLiteral"),h+=l.move("<"),h+=l.move(n.safe(r.url,{before:h,after:">",...l.current()})),h+=l.move(">")):(f=n.enter("destinationRaw"),h+=l.move(n.safe(r.url,{before:h,after:r.title?" ":")",...l.current()}))),f(),r.title&&(f=n.enter(`title${u}`),h+=l.move(" "+a),h+=l.move(n.safe(r.title,{before:h,after:a,...l.current()})),h+=l.move(a),f()),h+=l.move(")"),c(),h}function C_(r,t,n){return kf(r,n)?"<":"["}Sf.peek=T_;function Sf(r,t,n,o){const a=r.referenceType,u=n.enter("linkReference");let l=n.enter("label");const c=n.createTracker(o);let f=c.move("[");const h=n.containerPhrasing(r,{before:f,after:"]",...c.current()});f+=c.move(h+"]["),l();const p=n.stack;n.stack=[],l=n.enter("reference");const g=n.safe(n.associationId(r),{before:f,after:"]",...c.current()});return l(),n.stack=p,u(),a==="full"||!h||h!==g?f+=c.move(g+"]"):a==="shortcut"?f=f.slice(0,-1):f+=c.move("]"),f}function T_(){return"["}function fs(r){const t=r.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function E_(r){const t=fs(r),n=r.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function P_(r){const t=r.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function Cf(r){const t=r.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function A_(r,t,n,o){const a=n.enter("list"),u=n.bulletCurrent;let l=r.ordered?P_(n):fs(n);const c=r.ordered?l==="."?")":".":E_(n);let f=t&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!r.ordered){const p=r.children?r.children[0]:void 0;if((l==="*"||l==="-")&&p&&(!p.children||!p.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(f=!0),Cf(n)===l&&p){let g=-1;for(;++g<r.children.length;){const w=r.children[g];if(w&&w.type==="listItem"&&w.children&&w.children[0]&&w.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(l=c),n.bulletCurrent=l;const h=n.containerFlow(r,o);return n.bulletLastUsed=l,n.bulletCurrent=u,a(),h}function M_(r){const t=r.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function D_(r,t,n,o){const a=M_(n);let u=n.bulletCurrent||fs(n);t&&t.type==="list"&&t.ordered&&(u=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(r))+u);let l=u.length+1;(a==="tab"||a==="mixed"&&(t&&t.type==="list"&&t.spread||r.spread))&&(l=Math.ceil(l/4)*4);const c=n.createTracker(o);c.move(u+" ".repeat(l-u.length)),c.shift(l);const f=n.enter("listItem"),h=n.indentLines(n.containerFlow(r,c.current()),p);return f(),h;function p(g,w,y){return w?(y?"":" ".repeat(l))+g:(y?u:u+" ".repeat(l-u.length))+g}}function O_(r,t,n,o){const a=n.enter("paragraph"),u=n.enter("phrasing"),l=n.containerPhrasing(r,o);return u(),a(),l}const F_=ls(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function R_(r,t,n,o){return(r.children.some(function(l){return F_(l)})?n.containerPhrasing:n.containerFlow).call(n,r,o)}function L_(r){const t=r.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}Tf.peek=$_;function Tf(r,t,n,o){const a=L_(n),u=n.enter("strong"),l=n.createTracker(o),c=l.move(a+a);let f=l.move(n.containerPhrasing(r,{after:a,before:c,...l.current()}));const h=f.charCodeAt(0),p=Zi(o.before.charCodeAt(o.before.length-1),h,a);p.inside&&(f=Nn(h)+f.slice(1));const g=f.charCodeAt(f.length-1),w=Zi(o.after.charCodeAt(0),g,a);w.inside&&(f=f.slice(0,-1)+Nn(g));const y=l.move(a+a);return u(),n.attentionEncodeSurroundingInfo={after:w.outside,before:p.outside},c+f+y}function $_(r,t,n){return n.options.strong||"*"}function B_(r,t,n,o){return n.safe(r.value,o)}function N_(r){const t=r.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function W_(r,t,n){const o=(Cf(n)+(n.options.ruleSpaces?" ":"")).repeat(N_(n));return n.options.ruleSpaces?o.slice(0,-1):o}const z_={blockquote:h_,break:bc,code:m_,definition:w_,emphasis:yf,hardBreak:bc,heading:v_,html:bf,image:xf,imageReference:vf,inlineCode:_f,link:If,linkReference:Sf,list:A_,listItem:D_,paragraph:O_,root:R_,strong:Tf,text:B_,thematicBreak:W_},q_=[Y_];function Y_(r,t,n,o){if(t.type==="code"&&ja(t,o)&&(r.type==="list"||r.type===t.type&&ja(r,o)))return!1;if("spread"in n&&typeof n.spread=="boolean")return r.type==="paragraph"&&(r.type===t.type||t.type==="definition"||t.type==="heading"&&wf(t,o))?void 0:n.spread?1:0}const er=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],H_=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:er},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:er},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:er},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:er},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:er},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:er},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:er},{atBreak:!0,character:"~"}];function U_(r){return r.label||!r.identifier?r.label||"":ff(r.identifier)}function G_(r){if(!r._compiled){const t=(r.atBreak?"[\\r\\n][\\t ]*":"")+(r.before?"(?:"+r.before+")":"");r._compiled=new RegExp((t?"("+t+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(r.character)?"\\":"")+r.character+(r.after?"(?:"+r.after+")":""),"g")}return r._compiled}function Q_(r,t,n){const o=t.indexStack,a=r.children||[],u=[];let l=-1,c=n.before,f;o.push(-1);let h=t.createTracker(n);for(;++l<a.length;){const p=a[l];let g;if(o[o.length-1]=l,l+1<a.length){let S=t.handle.handlers[a[l+1].type];S&&S.peek&&(S=S.peek),g=S?S(a[l+1],r,t,{before:"",after:"",...h.current()}).charAt(0):""}else g=n.after;u.length>0&&(c==="\r"||c===`
`)&&p.type==="html"&&(u[u.length-1]=u[u.length-1].replace(/(\r?\n|\r)$/," "),c=" ",h=t.createTracker(n),h.move(u.join("")));let w=t.handle(p,r,t,{...h.current(),after:g,before:c});f&&f===w.slice(0,1)&&(w=Nn(f.charCodeAt(0))+w.slice(1));const y=t.attentionEncodeSurroundingInfo;t.attentionEncodeSurroundingInfo=void 0,f=void 0,y&&(u.length>0&&y.before&&c===u[u.length-1].slice(-1)&&(u[u.length-1]=u[u.length-1].slice(0,-1)+Nn(c.charCodeAt(0))),y.after&&(f=g)),h.move(w),u.push(w),c=w.slice(-1)}return o.pop(),u.join("")}function V_(r,t,n){const o=t.indexStack,a=r.children||[],u=t.createTracker(n),l=[];let c=-1;for(o.push(-1);++c<a.length;){const f=a[c];o[o.length-1]=c,l.push(u.move(t.handle(f,r,t,{before:`
`,after:`
`,...u.current()}))),f.type!=="list"&&(t.bulletLastUsed=void 0),c<a.length-1&&l.push(u.move(X_(f,a[c+1],r,t)))}return o.pop(),l.join("")}function X_(r,t,n,o){let a=o.join.length;for(;a--;){const u=o.join[a](r,t,n,o);if(u===!0||u===1)break;if(typeof u=="number")return`
`.repeat(1+u);if(u===!1)return`

<!---->

`}return`

`}const j_=/\r?\n|\r/g;function K_(r,t){const n=[];let o=0,a=0,u;for(;u=j_.exec(r);)l(r.slice(o,u.index)),n.push(u[0]),o=u.index+u[0].length,a++;return l(r.slice(o)),n.join("");function l(c){n.push(t(c,a,!c))}}function J_(r,t,n){const o=(n.before||"")+(t||"")+(n.after||""),a=[],u=[],l={};let c=-1;for(;++c<r.unsafe.length;){const p=r.unsafe[c];if(!mf(r.stack,p))continue;const g=r.compilePattern(p);let w;for(;w=g.exec(o);){const y="before"in p||!!p.atBreak,S="after"in p,P=w.index+(y?w[1].length:0);a.includes(P)?(l[P].before&&!y&&(l[P].before=!1),l[P].after&&!S&&(l[P].after=!1)):(a.push(P),l[P]={before:y,after:S})}}a.sort(Z_);let f=n.before?n.before.length:0;const h=o.length-(n.after?n.after.length:0);for(c=-1;++c<a.length;){const p=a[c];p<f||p>=h||p+1<h&&a[c+1]===p+1&&l[p].after&&!l[p+1].before&&!l[p+1].after||a[c-1]===p-1&&l[p].before&&!l[p-1].before&&!l[p-1].after||(f!==p&&u.push(xc(o.slice(f,p),"\\")),f=p,/[!-/:-@[-`{-~]/.test(o.charAt(p))&&(!n.encode||!n.encode.includes(o.charAt(p)))?u.push("\\"):(u.push(Nn(o.charCodeAt(p))),f++))}return u.push(xc(o.slice(f,h),n.after)),u.join("")}function Z_(r,t){return r-t}function xc(r,t){const n=/\\(?=[!-/:-@[-`{-~])/g,o=[],a=[],u=r+t;let l=-1,c=0,f;for(;f=n.exec(u);)o.push(f.index);for(;++l<o.length;)c!==o[l]&&a.push(r.slice(c,o[l])),a.push("\\"),c=o[l];return a.push(r.slice(c)),a.join("")}function e2(r){const t=r||{},n=t.now||{};let o=t.lineShift||0,a=n.line||1,u=n.column||1;return{move:f,current:l,shift:c};function l(){return{now:{line:a,column:u},lineShift:o}}function c(h){o+=h}function f(h){const p=h||"",g=p.split(/\r?\n|\r/g),w=g[g.length-1];return a+=g.length-1,u=g.length===1?u+w.length:1+w.length+o,p}}function t2(r,t){const n=t||{},o={associationId:U_,containerPhrasing:o2,containerFlow:a2,createTracker:e2,compilePattern:G_,enter:u,handlers:{...z_},handle:void 0,indentLines:K_,indexStack:[],join:[...q_],options:{},safe:s2,stack:[],unsafe:[...H_]};gf(o,n),o.options.tightDefinitions&&o.join.push(i2),o.handle=l_("type",{invalid:n2,unknown:r2,handlers:o.handlers});let a=o.handle(r,void 0,o,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return a&&a.charCodeAt(a.length-1)!==10&&a.charCodeAt(a.length-1)!==13&&(a+=`
`),a;function u(l){return o.stack.push(l),c;function c(){o.stack.pop()}}}function n2(r){throw new Error("Cannot handle value `"+r+"`, expected node")}function r2(r){const t=r;throw new Error("Cannot handle unknown node `"+t.type+"`")}function i2(r,t){if(r.type==="definition"&&r.type===t.type)return 0}function o2(r,t){return Q_(r,this,t)}function a2(r,t){return V_(r,this,t)}function s2(r,t){return J_(this,r,t)}function u2(r){const t=this;t.compiler=n;function n(o){return t2(o,{...t.data("settings"),...r,extensions:t.data("toMarkdownExtensions")||[]})}}const ue={text:"text",boolean:"boolean",multicheckbox:"multicheckbox",richText:"richText",number:"number"};class l2{constructor(){this.logger=un(ln.InputCreator)}createInput(t){const{componentId:n,inputId:o,type:a}=t;let u="",l="";try{switch(a){case ue.text:case ue.richText:{const c=t.defaultValue??"";l=">",u=`${l}${c}`;break}case ue.boolean:{const c=t.defaultValue===!0?"x":" ",f=t.label??"Checkbox";u=`- [${c}] ${f}`;break}case ue.multicheckbox:{const c=t.options??[];if(!c.length)throw this.logger.error("multicheckbox must have non-empty options array",{opts:t}),new Error("multicheckbox must have non-empty options array");u=c.map(f=>`- [ ] ${ji.hiddenValue(n,o,f.value)} ${f.label}`).join(`
`);break}case ue.number:{const c=t.defaultValue??"";l="> {Number} ",u=`${l}${c}`;break}default:throw this.logger.error(`Unknown input type: ${a}`,{opts:t}),new Error("Unknown input type: "+a)}}catch(c){throw this.logger.error("Failed to create input",{error:c,opts:t}),c}return ji.input.wrap({componentId:n,inputId:o,content:u,inputType:a,technicalPrefix:l})}parseMarkdown(t){try{return Ki().use(Qa).parse(t)}catch(n){throw this.logger.error("Failed to parse Markdown",{error:n,md:t}),n}}stringifyMarkdown(t){try{return Ki().use(u2).stringify(t)}catch(n){throw this.logger.error("Failed to stringify Markdown",{error:n,ast:t}),n}}}const $n=new l2,pe={Day:"day",Week:"week",Month:"month",Quarter:"quarter",Year:"year",Decade:"decade"};class c2{async shouldShowInput(t,n=nr.ALMOST_DAILY){const{id:o,schedule:a}=t;return a?!(a.active===!1||!this.isWithinTimeBoundaries(a)||!await this.checkDependencies(a,n)||a.condition&&!a.condition()||!this.shouldShowBasedOnPeriodicity(a)||a.target&&!a.target.keepShowing&&await this.isTargetMet(o,a,n)||a.limit&&await this.isLimitReached(o,a,n)):!0}async getInputProgress(t,n=nr.ALMOST_DAILY){const{id:o,schedule:a}=t,u={};if(!a)return u;if(a.target){const l=this.getPeriodStartDate(a.target.per),c=await this.getCompletionCount(o,l,n);u.targetProgress={current:c,target:a.target.count,isComplete:c>=a.target.count}}if(a.limit){const l=this.getPeriodStartDate(a.limit.per),c=await this.getCompletionCount(o,l,n);u.limitProgress={current:c,limit:a.limit.max,percentage:c/a.limit.max*100}}return u}isWithinTimeBoundaries(t){const o=new Date().toISOString().split("T")[0];return!(t.startDate&&o<t.startDate||t.endDate&&o>t.endDate)}async checkDependencies(t,n){if(t.requiresCompleted&&t.requiresCompleted.length>0){const o=new Date().toISOString().split("T")[0];for(const a of t.requiresCompleted){const l=(await jt.getInputsById(n,a)).find(c=>c.reportDate===o);if(!l||l.value!==!0)return!1}}if(t.hideIfCompleted&&t.hideIfCompleted.length>0){const o=new Date().toISOString().split("T")[0];for(const a of t.hideIfCompleted){const l=(await jt.getInputsById(n,a)).find(c=>c.reportDate===o);if(l&&l.value===!0)return!1}}return!0}shouldShowBasedOnPeriodicity(t){const n=new Date;if(n.toISOString().split("T")[0],t.daysOfWeek&&t.daysOfWeek.length>0){const o=n.getDay();return t.daysOfWeek.map(u=>u===7?0:(u>=1&&u<=6,u)).includes(o)}if(t.datesOfMonth&&t.datesOfMonth.length>0){const o=n.getDate();return t.datesOfMonth.includes(o)}return t.showEvery?this.shouldShowBasedOnShowEvery(t.showEvery.count,t.showEvery.unit):!0}shouldShowBasedOnShowEvery(t,n){if(t===1)return!0;const o=new Date().toISOString().split("T")[0],a=this.getDayNumberFromEpoch(o);switch(n){case pe.Day:return a%t===0;case pe.Week:return Math.floor(a/7)%t===0;case pe.Month:return this.getMonthNumberFromEpoch(o)%t===0;case pe.Quarter:return this.getQuarterNumberFromEpoch(o)%t===0;case pe.Year:return this.getYearNumberFromEpoch(o)%t===0;default:return!0}}async isTargetMet(t,n,o){if(!n.target)return!1;const a=this.getPeriodStartDate(n.target.per);return await this.getCompletionCount(t,a,o)>=n.target.count}async isLimitReached(t,n,o){if(!n.limit)return!1;const a=this.getPeriodStartDate(n.limit.per);return await this.getCompletionCount(t,a,o)>=n.limit.max}async getCompletionCount(t,n,o){return(await jt.getInputsById(o,t)).filter(c=>c.reportDate&&c.reportDate>=n).filter(c=>c.value===!0).length}getPeriodStartDate(t){const n=new Date;switch(t.unit){case pe.Day:if(t.count===1)return n.toISOString().split("T")[0];const o=new Date(n);return o.setDate(n.getDate()-t.count),o.toISOString().split("T")[0];case pe.Week:if(t.count===1){const h=n.getDay(),p=new Date(n);return p.setDate(n.getDate()-(h===0?6:h-1)),p.toISOString().split("T")[0]}const a=new Date(n);return a.setDate(n.getDate()-t.count*7),a.toISOString().split("T")[0];case pe.Month:if(t.count===1)return`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-01`;const u=new Date(n);return u.setMonth(n.getMonth()-t.count),u.toISOString().split("T")[0];case pe.Quarter:if(t.count===1){const p=Math.floor(n.getMonth()/3)*3;return`${n.getFullYear()}-${String(p+1).padStart(2,"0")}-01`}const l=new Date(n);return l.setMonth(n.getMonth()-t.count*3),l.toISOString().split("T")[0];case pe.Year:if(t.count===1)return`${n.getFullYear()}-01-01`;const c=new Date(n);return c.setFullYear(n.getFullYear()-t.count),c.toISOString().split("T")[0];case pe.Decade:return`${Math.floor(n.getFullYear()/10)*10}-01-01`;default:return n.toISOString().split("T")[0]}}getDayNumberFromEpoch(t){const n=new Date("2020-01-01"),a=new Date(t).getTime()-n.getTime();return Math.floor(a/(1e3*60*60*24))}getMonthNumberFromEpoch(t){const n=new Date("2020-01-01"),o=new Date(t),a=o.getFullYear()-n.getFullYear(),u=o.getMonth()-n.getMonth();return a*12+u}getQuarterNumberFromEpoch(t){const n=this.getMonthNumberFromEpoch(t);return Math.floor(n/3)}getYearNumberFromEpoch(t){const n=new Date(t),o=new Date("2020-01-01");return n.getFullYear()-o.getFullYear()}}const Gr=new c2;class wt{constructor(t){this.content=[],this.logger=un(ln.ComponentBuilder),this.componentSchedule=null,this.componentId=t}_md(t,n){const o=typeof t=="function"?t():t;return this.content.push({md:o,schedule:n}),this}_divider(t){return this.content.push({md:`
***
`,schedule:t}),this}_fancyTitle(t,n="‚öõÔ∏é",o){return t?this.content.push({md:`<center>${n} <strong>${t}</strong> ${n}</center>`,schedule:o}):this.content.push({md:"---",schedule:o}),this}_fancyDivider(t,n="‚öõÔ∏é"){return this._fancyTitle(t,n)}_themedDivider(t,n,o){return this.content.push({md:`### ${n} ${t}`,schedule:o}),this}_blockquoteDivider(t,n){return t?this.content.push({md:`> ${t}`,schedule:n}):this.content.push({md:"> ---",schedule:n}),this}_foldable(t,n="Guidance",o){const u=t.split(`
`).map(c=>`> ${c}`),l=`> [!note]- ${n}
${u.join(`
`)}`;return this.content.push({md:l,schedule:o}),this.content.push({md:"",schedule:o}),this}schedule(t){return"schedule"in t&&t.schedule?this.componentSchedule=t.schedule:this.componentSchedule=t,this}_input(t){if("id"in t&&"inputOptions"in t){const o=t;o.inputOptions.type!==ue.boolean&&this._inputLabel(o.label,o.description);const a={...o.inputOptions,componentId:this.componentId};this.content.push({md:$n.createInput(a),schedule:o.schedule,isInput:!0}),o.inputOptions.type!==ue.boolean&&o.inputOptions.type!==ue.multicheckbox&&this.content.push({md:""})}else{const o={...t,componentId:this.componentId};this.content.push({md:$n.createInput(o),isInput:!0})}return this}_inputLabel(t,n){const o=n?`**${t}** ${n}`:`**${t}**`;return this.content.push({md:o}),this}_text(t,n,o){const a=$n.createInput({componentId:this.componentId,type:ue.text,inputId:t,defaultValue:n,placeholder:o});return this.content.push({md:a}),this.content.push({md:""}),this}_richText(t,n,o){this.content.push({md:"<center>¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑</center>"});const a=$n.createInput({componentId:this.componentId,type:ue.richText,inputId:t,defaultValue:n,placeholder:o});return this.content.push({md:a}),this.content.push({md:"<center>¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑ ¬∑</center>"}),this}_boolean(t,n,o){const a=$n.createInput({componentId:this.componentId,type:ue.boolean,inputId:t,label:n,defaultValue:o});return this.content.push({md:a}),this}_number(t,n){const o=$n.createInput({componentId:this.componentId,type:ue.number,inputId:t,defaultValue:n});return this.content.push({md:o}),this}_multiCheckbox(t,n,o,a){const u=$n.createInput({componentId:this.componentId,type:ue.multicheckbox,inputId:t,options:n,defaultValue:o,collapsed:a});return this.content.push({md:u}),this}_multiCheckboxSC(t,n,o,a){const u=$n.createInput({componentId:this.componentId,type:ue.multicheckbox,inputId:t,options:n,singleChoice:!0,defaultValue:o,collapsed:a});return this.content.push({md:u}),this}_nl(){return this.content.push({md:`
`}),this}async render(){if(this.componentSchedule&&!await Gr.shouldShowInput({id:this.componentId,inputOptions:{inputId:this.componentId,type:ue.text},label:this.componentId,schedule:this.componentSchedule}))return this.logger.dev("Component hidden by explicit schedule",{componentId:this.componentId}),"";const t=[];let n=!1,o=0;for(const u of this.content){if(u.isInput&&(n=!0),!u.schedule){t.push(u.md),u.isInput&&o++;continue}await Gr.shouldShowInput({id:`${this.componentId}_item`,inputOptions:{inputId:`${this.componentId}_item`,type:ue.text},label:`${this.componentId}_item`,schedule:u.schedule})&&(t.push(u.md),u.isInput&&o++)}if(n&&o===0)return this.logger.dev("Component hidden - has inputs but none passed schedule evaluation",{componentId:this.componentId}),"";if(t.length===0)return this.logger.dev("Component hidden - no content after schedule evaluation",{componentId:this.componentId}),"";const a=ji.component.wrap(this.componentId,t.join(`
`));return this.logger.dev("Component rendered",{outputLength:a.length,itemsEvaluated:this.content.length,itemsRendered:t.length,inputsRendered:o}),a}}async function f2(){const r=new wt("consistencyStats");try{const t=await jt.getReportInputs(nr.ALMOST_DAILY);if(!t||t.length===0)return r._md("üìä **Consistency Tracker** ¬∑ üéØ Starting your journey today!"),r.render();const n=Array.from(new Set(t.map(S=>S.reportDate))).sort().reverse(),o=n[n.length-1],a=n[0],u=new Date(o),l=new Date(a),c=Ay(l,u)+1,h=[{days:7,label:"7d"},{days:30,label:"30d"},{days:90,label:"90d"}].map(({days:S,label:P})=>{const F=Math.min(S,c),A=_n(Kc(l,F-1),"yyyy-MM-dd"),N=n.filter(W=>W>=A).length,z=Math.round(N/F*100);return{label:P,requestedDays:S,reports:N,days:F,percentage:z,shouldShow:!1}});for(let S=0;S<h.length;S++){const P=h[S];P.days<P.requestedDays||h.slice(0,S).some(A=>A.shouldShow&&A.days===P.days)||(P.shouldShow=!0)}const p=n.length,g=Math.round(p/c*100),w=[];for(const S of h){if(!S.shouldShow)continue;const P=S.percentage>=80?"üéâ":S.percentage>=60?"‚úÖ":S.percentage>=40?"üìà":"üå±";w.push(`${P} ${S.label}: ${S.reports}/${S.days} (${S.percentage}%)`)}const y=g>=80?"üèÜ":g>=60?"‚≠ê":"üéØ";w.push(`${y} All: ${p}/${c} (${g}%)`),r._md(`üìä **Consistency Tracker** ¬∑ ${w.join(" ¬∑ ")}`)}catch(t){console.error("Consistency stats error:",t),r._md("üìä **Consistency Tracker** ¬∑ Starting fresh!")}return await r.render()}const h2=r=>({...r,inputOptions:{inputId:r.id,type:ue.boolean,label:r.label}}),d2=[{id:"dayPlanning",label:"Planning my day",cue:"After breakfast",reward:"More productive and organized day",schedule:{target:{count:1,per:{count:1,unit:pe.Day}}}},{id:"exercise",label:"Exercise",cue:"Any suitable time during the day",reward:"Better health, more energy, and improved mood",schedule:{target:{count:5,per:{count:1,unit:pe.Week},keepShowing:!0}}},{id:"morningWarmUp",label:"Morning Physical Warm-Up",cue:"After waking up",reward:"Increased energy and readiness for the day",schedule:{target:{count:1,per:{count:1,unit:pe.Day}}}},{id:"recreation",label:"Having fun",cue:"In the evening or during free time",reward:"Relaxation, joy, and stress relief",schedule:{target:{count:1,per:{count:1,unit:pe.Day}}}},{id:"selfPleasure",label:"FPF",cue:"At free from work personal time",reward:"Better focus and increasing ability to feel joy",schedule:{target:{count:7,per:{count:10,unit:pe.Day}}}},{id:"poetryEngaging",label:"Spend time with poetry",cue:"At leisure time",reward:"Happiness and healthy feelings expression from engaging with poetry",schedule:{daysOfWeek:[1,5,6,7],target:{count:3,per:{count:1,unit:pe.Month}}}},{id:"programmingLearning",label:"Programming study",cue:"Dedicated learning time",reward:"Skill development, career growth, and problem-solving mastery",schedule:{target:{count:3,per:{count:1,unit:pe.Week}}}},{id:"recreationalCannabis",label:"Getting high",cue:"Day off (if next day is also day off, then) in safe calm well prepared environment and mood",reward:"Self-care routine, relaxation, stress relief",schedule:{target:{count:1,per:{count:1,unit:pe.Week}},daysOfWeek:[5,6,7],limit:{max:20,per:{count:6,unit:pe.Month}}}},{id:"fastMorningEveningRoutine",label:"Complete morning & evening routine efficiently",cue:"During morning (breakfast, hygiene) and evening (cleaning teeth, preparing for bed) routines",reward:"Save up to 1 hour daily, more productive day, less stress"},{id:"phoneDetox",label:"No phone for 3 hours",cue:"During focused work or leisure time",reward:"Better focus, reduced distractions, mental clarity, reclaimed time",schedule:{target:{count:3,per:{count:1,unit:pe.Week},keepShowing:!0}}}],p2=d2.map(h2),g2=[{label:"3 - Great",value:"3"},{label:"2 - Adequate",value:"2"},{label:"1 - Struggling",value:"1"}],m2=r=>({...r,inputOptions:{inputId:r.id,type:ue.multicheckbox,options:g2,singleChoice:!0}}),y2=[{id:"positiveEmotions",label:"Positive Emotions",description:"Feelings of joy, gratitude, contentment, hope, and pleasure. Includes savoring the moment, reflecting on past positives, and hopeful anticipation of the future."},{id:"engagement",label:"Engagement",description:"Deep involvement in activities; being absorbed, losing sense of time (‚Äòflow‚Äô). Doing work or hobbies that challenge your skills just enough that you‚Äôre fully present."},{id:"relationships",label:"Relationships",description:"Supportive, meaningful social connections. Feeling loved, valued, belonging; giving and receiving support. Close friendships, family bonds, community ties.",schedule:{showEvery:{count:2,unit:pe.Day}}},{id:"meaning",label:"Meaning",description:"Having a sense of purpose, belonging to something bigger than yourself. Knowing what matters in your life and using your strengths in service of values, causes or goals."},{id:"accomplishment",label:"Accomplishment",description:"Mastery, achievement, working toward goals. Sense of progress, competence, whether or not it brings immediate joy‚Äîachieving things that matter to you."},{id:"sleepQuality",label:"Sleep Quality",description:"How well-rested you feel. Quality of sleep, sufficient hours, feeling refreshed upon waking. Sleep is foundational to physical and mental wellbeing."},{id:"embodiment",label:"Embodiment",description:"Body acceptance and feeling at home in your body. Being present in your physical self, body image, self-compassion toward your body, feeling connected rather than disconnected from your physical form.",schedule:{showEvery:{count:3,unit:pe.Day}}},{id:"physicalPleasure",label:"Physical Pleasure",description:"Sensory experiences and bodily comfort. Enjoying food, warmth, movement, relaxation. The simple joys of physical existence‚Äîa hot shower, soft blanket, delicious meal, or stretching your body.",schedule:{showEvery:{count:2,unit:pe.Day}}},{id:"touchAndIntimacy",label:"Touch & Intimacy",description:"Physical affection, connection, and love. Hugs, cuddles, holding hands, sexual intimacy. The warmth and safety of physical closeness with loved ones. Human touch is a fundamental need.",schedule:{showEvery:{count:3,unit:pe.Day}}},{id:"physicalCondition",label:"Physical Condition",description:"Your bodily health: exercise, energy levels and how physically capable you feel. General fitness and vitality."},{id:"nutrition",label:"Nutrition",description:"Quality of your food choices and eating patterns. Nourishing your body with balanced meals, adequate hydration, and mindful eating. Good nutrition fuels energy, mood, and long-term health."},{id:"mindset",label:"Mindset",description:"Cultivating optimism, resilience, self-efficacy, and a growth mindset. A positive mindset shapes how you interpret setbacks, sustain motivation, and approach challenges."},{id:"environment",label:"Environment",description:"Living and working in spaces that feel safe, comfortable, and supportive of wellbeing. Includes access to nature, orderliness, and resources that help you thrive.",schedule:{showEvery:{count:3,unit:pe.Day}}},{id:"economicSecurity",label:"Economic Security",description:"Having financial stability, freedom from chronic money stress, and satisfaction with work. Economic security supports autonomy and reduces background stress that erodes wellbeing.",schedule:{showEvery:{count:10,unit:pe.Day}}}],Ka=y2.map(m2),w2=r=>({...r,inputOptions:{inputId:r.id,type:ue.boolean,label:r.label}}),b2=[{id:"dichotomy_of_control_practice",label:"Stoic Practice. The Dichotomy of Control",category:"stoic",component:"morningReflection",description:"Epictetus' core practice and foundational Stoic exercise that eliminates suffering by training you to focus only on what you can control",guide:`**The Core Principle:**
The Stoics discovered that **all suffering comes from desiring things outside your control**. When you stop struggling against the unchangeable and channel your energy into what you CAN control, you gain peace of mind.

**‚úÖ COMPLETELY IN YOUR CONTROL:**
- Your judgments, opinions, and interpretations
- Your responses and reactions to events
- Your character, virtues, and values
- Your effort, attention, and choices
- How you treat others
- What you pursue and avoid

**‚ùå OUTSIDE YOUR CONTROL:**
- Other people's opinions, actions, and judgments
- Outcomes, results, and consequences
- Past events and future circumstances
- Your reputation and what others think
- External events (weather, traffic, delays)
- Natural processes (aging, sickness, death)

**How to Practice:**
When faced with any situation today, ask yourself: "Is this within my control?" If yes, take action. If no, accept it and focus on your response instead.

_"Make the best use of what is in your power, and take the rest as it happens."_ ‚Äî Epictetus`},{id:"obstacle_is_way_practice",label:"Stoic Practice. The Obstacle Is The Way",category:"stoic",component:"morningReflection",description:"Marcus Aurelius' teaching: obstacles contain hidden opportunities for growth",guide:`**The Core Principle:**
Marcus Aurelius taught: **"The impediment to action advances action. What stands in the way becomes the way."**

This means every obstacle contains hidden opportunity:
- **Blocked plan?** ‚Üí Forces you to become more creative and resourceful
- **Frustrating person?** ‚Üí Opportunity to practice patience and understanding
- **Failure?** ‚Üí Valuable data for learning and improvement
- **Delay?** ‚Üí Gift of time to prepare better or rest

**The Reframe:**
Stop seeing obstacles as enemies. Start seeing them as **training equipment** for your character. Each challenge makes you stronger, wiser, more resilient.

**How to Practice:**
When you face a setback today, ask: "What opportunity is hidden in this obstacle? How is this making me better?"

_"The obstacle is not blocking your path ‚Äì it IS your path. It's revealing where you need to grow."_ ‚Äî Ryan Holiday`}],x2=b2.map(w2),v2=r=>{let t={id:r.inputOptions.inputId,...r,description:r.description||""};return r.inputOptions.type===ue.boolean&&(t.inputOptions.label=r.label),t},_2=[{label:"What Matters Most (Memento Mori)",inputOptions:{inputId:"memento_mori_focus",type:ue.text},description:"You will die. Your days are numbered. What truly matters? Which pillar deserves your limited time?"},{inputOptions:{inputId:"priority_plan",type:ue.text},label:"My #1 Task Today",description:"ONE concrete action serving what matters. When & where will I do it? What's my first 2-minute step?"},{inputOptions:{inputId:"tomorrow_priority",type:ue.text},label:"Tomorrow's #1 Priority"},{inputOptions:{inputId:"message_for_tomorrow",type:ue.richText},label:"Message for Tomorrow",description:"Short and meaningful message for your future self"},{inputOptions:{inputId:"plan_next_day",type:ue.boolean},label:"Plan next day",description:"Calendar events, tasks, notifications"},{inputOptions:{inputId:"accomplishments",type:ue.text},label:"My Win Today",description:"What was my proudest accomplishment? What effort/virtue made it possible?"},{inputOptions:{inputId:"obstacles",type:ue.text},label:"My Obstacle & Learning",description:"What happened? How did I respond? What did I learn? How will I use this?"},{inputOptions:{inputId:"if_then_plan",type:ue.text},label:"My Implementation Intention",description:"If this happens again, I will... (If [OBSTACLE], then I will [RESPONSE])"},{inputOptions:{inputId:"gratitudes",type:ue.richText,placeholder:" 1. "},label:"Three Good Things",description:"*What good happened? Why was it good? What was your role?*"},{inputOptions:{inputId:"main_distraction",type:ue.text},label:"What distracted me most today?",schedule:{showEvery:{count:2,unit:pe.Day}}},{inputOptions:{inputId:"flow_moments",type:ue.text},label:"What helped me focus?",description:"(Environment, time, task type)",schedule:{showEvery:{count:2,unit:pe.Day}}},{inputOptions:{inputId:"willpower_challenge",type:ue.text},label:"What was my biggest temptation/willpower challenge?",schedule:{showEvery:{count:2,unit:pe.Day}}},{inputOptions:{inputId:"strongest_emotion",type:ue.text},label:"What was my strongest emotion today?"},{inputOptions:{inputId:"emotion_trigger",type:ue.text},label:"What triggered it?",description:"Situation, person, thought"},{inputOptions:{inputId:"emotion_response",type:ue.text},label:"How did I respond?"},{inputOptions:{inputId:"better_emotion_response",type:ue.text},label:"What response would I choose next time?"},{inputOptions:{inputId:"negative_visualization",type:ue.text},label:"What you visualized",description:"5 min reflection on what I could lose",schedule:{daysOfWeek:[1,3,5]}},{inputOptions:{inputId:"voluntary_discomfort_practice",type:ue.multicheckbox,options:[{label:"Cold shower (30-60 sec)",value:"cold_shower"},{label:"Less heat/AC than comfortable",value:"less_climate_control"},{label:"Skip stimulants (coffee, guarana, etc.)",value:"skip_stimulants"}],singleChoice:!0},label:"Today's Voluntary Discomfort",description:"Choose ONE small discomfort to practice today",schedule:{daysOfWeek:[1,3,5]}},{inputOptions:{inputId:"mindful_pause_taken",type:ue.boolean},label:"I have taken a mindful pause",schedule:{daysOfWeek:[1,3,5]}}],k2=_2.map(v2),Oe=k2.reduce((r,t)=>({...r,[String(t.id)]:t}),{});async function I2(){const r="morningReflection",t=new wt(r);return t._md("## üßò Morning Reflection (‚≠ê RECOMMENDED)"),x2.filter(n=>n.component===r).forEach(n=>{t._foldable(n.guide,n.label),t._input(n.inputOptions)}),await t.render()}async function S2(){const r="negativeVisualization",t=new wt(r);t._md("## ü™û Negative Visualization (üí° OPTIONAL)"),t._foldable(`**Praemeditatio Malorum** ‚Äî Ancient Stoic gratitude practice

This is NOT pessimism. This is **appreciation training** that the Stoics practiced daily.

**The Problem** ‚Äî we take everything for granted. Your health, your home, your loved ones ‚Äî you stop seeing them. Hedonic adaptation makes you numb to your blessings.

**The Solution** ‚Äî briefly imagine losing what you value. When you mentally "lose" something, you suddenly SEE it again with fresh eyes.

**What this practice does:**
- **Breaks hedonic adaptation** ‚Äî stop taking good things for granted
- **Generates genuine gratitude** ‚Äî feel appreciation, not just think it  
- **Prepares you mentally** ‚Äî if loss happens, the shock is less severe
- **Increases present joy** ‚Äî savor what you have RIGHT NOW

**How to practice:**
1. Close your eyes for 10-20 seconds
2. Vividly imagine ONE thing you value being gone (person, health, home, ability)
3. Feel the loss ‚Äî let it be uncomfortable for a moment
4. Open your eyes and appreciate that you STILL HAVE IT

This isn't dwelling on loss. It's a quick mental exercise to restore wonder.

_"He robs present ills of their power who has perceived their coming beforehand."_ ‚Äî Seneca`,"Stoic Gratitude Practice"),t._md("**Practice Steps:**"),t._md("1. **Close your eyes** ‚Äî take a slow breath"),t._md("2. **Imagine the loss** ‚Äî picture losing someone/something you love (10 seconds)"),t._md("3. **Feel it** ‚Äî don't rush past the discomfort"),t._md("4. **Open your eyes** ‚Äî look around. You still have them. Feel that relief.");try{const n=await jt.getInputsById(nr.ALMOST_DAILY,"negative_visualization");if(n&&n.length>0){const o=_n(vb(new Date,6),"yyyy-MM-dd"),a=n.filter(u=>u.reportDate>=o&&u.value);if(a.length>0){const u=new Map;a.forEach(c=>{const f=String(c.value).trim().toLowerCase();f&&u.set(f,(u.get(f)||0)+1)});const l=Array.from(u.entries()).sort((c,f)=>f[1]-c[1]).slice(0,10).map(([c,f])=>({item:c,count:f}));l.length>0&&(t._md(`
**Your Most Visualized (Last 6 Months):**`),l.forEach(({item:c,count:f})=>{t._md(`- ${c} (${f}√ó)`)}))}}}catch(n){console.error("Error fetching negative visualization history:",n)}return t._input(Oe.negative_visualization),await t.render()}async function C2(){const r="priorityPlanning",t=new wt(r);t._md("## üéØ Priority Planning (üìå CORE - 3-5 min)"),t._foldable(`**Start with Death, Plan with Clarity**

**Memento Mori** (from Stoicism) ‚Äî "Remember you will die." This isn't morbid‚Äîit's the ultimate focusing tool. When you remember death, trivialities fade and what truly matters becomes crystal clear.

**The Four Pillars of Life:**
1. **Happiness & Peace of Mind** ‚Äî inner tranquility and joy
2. **Body & Health** ‚Äî physical wellbeing and vitality  
3. **People & Relationships** ‚Äî love, connection, community
4. **Meaningful Work** ‚Äî contributing something valuable

_"You could leave life right now. Let that determine what you do and say and think."_ ‚Äî Marcus Aurelius

**Implementation Intentions** (from Atomic Habits) ‚Äî being specific doubles success rates:
"I will [BEHAVIOR] at [TIME] in [LOCATION]."

**The Process:**
1. Remember death ‚Üí What pillar needs attention?
2. Choose ONE priority that serves that pillar
3. Make a specific plan with when/where
4. Prepare for obstacles`,"Memento Mori + Implementation Intentions"),t._input(Oe.memento_mori_focus);let n=!0;try{const o=_n(Kc(new Date,1),"yyyy-MM-dd");(await jt.getInputsInDateRange(nr.ALMOST_DAILY,"tomorrow_priority",o,o)).some(l=>l.value&&l.value.trim().length>0)&&(n=!1)}catch(o){console.error("Error checking yesterday's priority:",o)}return n&&t._input(Oe.priority_plan),await t.render()}async function T2(){const r="voluntaryDiscomfort",t=new wt(r);return t._md("## üßä Voluntary Discomfort (üí° OPTIONAL - 2 min)"),t._foldable(`**Practicing Poverty** ‚Äî Seneca's resilience training

The Stoics deliberately practiced small discomforts. Not to punish themselves, but to build mental strength and appreciation.

**The Problem** ‚Äî modern life is TOO comfortable. We become weak, dependent on luxuries, and terrified of any discomfort. When hardship comes, we collapse.

**The Stoic Solution** ‚Äî regularly choose small, voluntary discomforts. This trains your mind that discomfort is survivable‚Äîeven beneficial.

**What this practice does:**
1. **Builds resilience** ‚Äî when real hardship comes, you're prepared
2. **Breaks hedonic adaptation** ‚Äî you stop taking comfort for granted
3. **Strengthens willpower** ‚Äî you prove you can control urges  
4. **Increases appreciation** ‚Äî comfort feels AMAZING after voluntary discomfort
5. **Reduces fear** ‚Äî you learn: "Discomfort won't kill me. I'm stronger than I thought."

**The Science** ‚Äî your brain predicts suffering based on past experience. If you've never been uncomfortable, small discomforts feel catastrophic. If you practice discomfort, your brain learns: "This is manageable."

**How to practice:**
Choose ONE small discomfort today. Not as punishment ‚Äî as TRAINING.
- Physical: cold shower, skip a meal, exercise when tired
- Social: have the difficult conversation, say no to someone
- Habitual: skip coffee, no phone for 2 hours, sit in silence

**Key** ‚Äî the discomfort should be VOLUNTARY and MILD. You're training, not torturing.

_"We suffer more often in imagination than in reality."_ ‚Äî Seneca
_"Set aside a certain number of days to be content with little and practice poverty."_ ‚Äî Seneca`,"Stoic Resilience Training"),t._input(Oe.voluntary_discomfort_practice),await t.render()}function Ef(r){if(r.length===0)return 0;var t=r[0],n=0,o;if(typeof t!="number")return Number.NaN;for(var a=1;a<r.length;a++){if(typeof r[a]!="number")return Number.NaN;o=t+r[a],Math.abs(t)>=Math.abs(r[a])?n+=t-o+r[a]:n+=r[a]-o+t,t=o}return t+n}function Pf(r){if(r.length===0)throw new Error("mean requires at least one data point");return Ef(r)/r.length}function E2(r,t){var n=Pf(r),o=0,a,u;for(u=0;u<r.length;u++)a=r[u]-n,o+=a*a;return o}function Af(r){if(r.length===0)throw new Error("variance requires at least one data point");return E2(r)/r.length}function P2(r){if(r.length===1)return 0;var t=Af(r);return Math.sqrt(t)}function A2(r){if(r.length===0)throw new Error("mode requires at least one data point");if(r.length===1)return r[0];for(var t=r[0],n=Number.NaN,o=0,a=1,u=1;u<r.length+1;u++)r[u]!==t?(a>o&&(o=a,n=t),a=1,t=r[u]):a++;return n}function M2(r){return r.slice().sort(function(t,n){return t-n})}function D2(r){return A2(M2(r))}function vc(r){if(r.length===0)throw new Error("min requires at least one data point");for(var t=r[0],n=1;n<r.length;n++)r[n]<t&&(t=r[n]);return t}function _c(r){if(r.length===0)throw new Error("max requires at least one data point");for(var t=r[0],n=1;n<r.length;n++)r[n]>t&&(t=r[n]);return t}function kc(r,t){var n=r.length*t;if(r.length===0)throw new Error("quantile requires at least one data point.");if(t<0||t>1)throw new Error("quantiles must be between 0 and 1");return t===1?r[r.length-1]:t===0?r[0]:n%1!==0?r[Math.ceil(n)-1]:r.length%2===0?(r[n-1]+r[n])/2:r[n]}function Gi(r,t,n,o){for(n=n||0,o=o||r.length-1;o>n;){if(o-n>600){var a=o-n+1,u=t-n+1,l=Math.log(a),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(a-c)/a);u-a/2<0&&(f*=-1);var h=Math.max(n,Math.floor(t-u*c/a+f)),p=Math.min(o,Math.floor(t+(a-u)*c/a+f));Gi(r,t,h,p)}var g=r[t],w=n,y=o;for(zr(r,n,t),r[o]>g&&zr(r,n,o);w<y;){for(zr(r,w,y),w++,y--;r[w]<g;)w++;for(;r[y]>g;)y--}r[n]===g?zr(r,n,y):(y++,zr(r,y,o)),y<=t&&(n=y+1),t<=y&&(o=y-1)}}function zr(r,t,n){var o=r[t];r[t]=r[n],r[n]=o}function Ja(r,t){var n=r.slice();if(Array.isArray(t)){O2(n,t);for(var o=[],a=0;a<t.length;a++)o[a]=kc(n,t[a]);return o}else{var u=Df(n.length,t);return Mf(n,u,0,n.length-1),kc(n,t)}}function Mf(r,t,n,o){t%1===0?Gi(r,t,n,o):(t=Math.floor(t),Gi(r,t,n,o),Gi(r,t+1,t+1,o))}function O2(r,t){for(var n=[0],o=0;o<t.length;o++)n.push(Df(r.length,t[o]));n.push(r.length-1),n.sort(F2);for(var a=[0,n.length-1];a.length;){var u=Math.ceil(a.pop()),l=Math.floor(a.pop());if(!(u-l<=1)){var c=Math.floor((l+u)/2);Mf(r,n[c],Math.floor(n[l]),Math.ceil(n[u])),a.push(l,c,c,u)}}}function F2(r,t){return r-t}function Df(r,t){var n=r*t;return t===1?r-1:t===0?0:n%1!==0?Math.ceil(n)-1:r%2===0?n-.5:n}function R2(r){return+Ja(r,.5)}var Aa={},Ic;function L2(){return Ic||(Ic=1,(function(r){(function(t){t.black="\x1B[30m",t.red="\x1B[31m",t.green="\x1B[32m",t.yellow="\x1B[33m",t.blue="\x1B[34m",t.magenta="\x1B[35m",t.cyan="\x1B[36m",t.lightgray="\x1B[37m",t.default="\x1B[39m",t.darkgray="\x1B[90m",t.lightred="\x1B[91m",t.lightgreen="\x1B[92m",t.lightyellow="\x1B[93m",t.lightblue="\x1B[94m",t.lightmagenta="\x1B[95m",t.lightcyan="\x1B[96m",t.white="\x1B[97m",t.reset="\x1B[0m";function n(o,a){return a===void 0?o:a+o+t.reset}t.colored=n,t.plot=function(o,a=void 0){typeof o[0]=="number"&&(o=[o]),a=typeof a<"u"?a:{};let u=typeof a.min<"u"?a.min:o[0][0],l=typeof a.max<"u"?a.max:o[0][0];for(let D=0;D<o.length;D++)for(let E=0;E<o[D].length;E++)u=Math.min(u,o[D][E]),l=Math.max(l,o[D][E]);let c=["‚îº","‚î§","‚ï∂","‚ï¥","‚îÄ","‚ï∞","‚ï≠","‚ïÆ","‚ïØ","‚îÇ"],f=Math.abs(l-u),h=typeof a.offset<"u"?a.offset:3,p=typeof a.padding<"u"?a.padding:"           ",g=typeof a.height<"u"?a.height:f,w=typeof a.colors<"u"?a.colors:[],y=f!==0?g/f:1,S=Math.round(u*y),P=Math.round(l*y),F=Math.abs(P-S),A=0;for(let D=0;D<o.length;D++)A=Math.max(A,o[D].length);A=A+h;let N=typeof a.symbols<"u"?a.symbols:c,z=typeof a.format<"u"?a.format:function(D){return(p+D.toFixed(2)).slice(-p.length)},W=new Array(F+1);for(let D=0;D<=F;D++){W[D]=new Array(A);for(let E=0;E<A;E++)W[D][E]=" "}for(let D=S;D<=P;++D){let E=z(F>0?l-(D-S)*f/F:D,D-S);W[D-S][Math.max(h-E.length,0)]=E,W[D-S][h-1]=D==0?N[0]:N[1]}for(let D=0;D<o.length;D++){let E=w[D%w.length],U=Math.round(o[D][0]*y)-S;W[F-U][h-1]=n(N[0],E);for(let V=0;V<o[D].length-1;V++){let ee=Math.round(o[D][V+0]*y)-S,de=Math.round(o[D][V+1]*y)-S;if(ee==de)W[F-ee][V+h]=n(N[4],E);else{W[F-de][V+h]=n(ee>de?N[5]:N[6],E),W[F-ee][V+h]=n(ee>de?N[7]:N[8],E);let X=Math.min(ee,de),Q=Math.max(ee,de);for(let be=X+1;be<Q;be++)W[F-be][V+h]=n(N[9],E)}}}return W.map(function(D){return D.join("")}).join(`
`)}})(r)})(Aa)),Aa}var $2=L2(),Qi={exports:{}},Ma,Sc;function B2(){return Sc||(Sc=1,Ma={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),Ma}var Da,Cc;function Of(){if(Cc)return Da;Cc=1;const r=B2(),t={};for(const a of Object.keys(r))t[r[a]]=a;const n={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};Da=n;for(const a of Object.keys(n)){if(!("channels"in n[a]))throw new Error("missing channels property: "+a);if(!("labels"in n[a]))throw new Error("missing channel labels property: "+a);if(n[a].labels.length!==n[a].channels)throw new Error("channel and label counts mismatch: "+a);const{channels:u,labels:l}=n[a];delete n[a].channels,delete n[a].labels,Object.defineProperty(n[a],"channels",{value:u}),Object.defineProperty(n[a],"labels",{value:l})}n.rgb.hsl=function(a){const u=a[0]/255,l=a[1]/255,c=a[2]/255,f=Math.min(u,l,c),h=Math.max(u,l,c),p=h-f;let g,w;h===f?g=0:u===h?g=(l-c)/p:l===h?g=2+(c-u)/p:c===h&&(g=4+(u-l)/p),g=Math.min(g*60,360),g<0&&(g+=360);const y=(f+h)/2;return h===f?w=0:y<=.5?w=p/(h+f):w=p/(2-h-f),[g,w*100,y*100]},n.rgb.hsv=function(a){let u,l,c,f,h;const p=a[0]/255,g=a[1]/255,w=a[2]/255,y=Math.max(p,g,w),S=y-Math.min(p,g,w),P=function(F){return(y-F)/6/S+1/2};return S===0?(f=0,h=0):(h=S/y,u=P(p),l=P(g),c=P(w),p===y?f=c-l:g===y?f=1/3+u-c:w===y&&(f=2/3+l-u),f<0?f+=1:f>1&&(f-=1)),[f*360,h*100,y*100]},n.rgb.hwb=function(a){const u=a[0],l=a[1];let c=a[2];const f=n.rgb.hsl(a)[0],h=1/255*Math.min(u,Math.min(l,c));return c=1-1/255*Math.max(u,Math.max(l,c)),[f,h*100,c*100]},n.rgb.cmyk=function(a){const u=a[0]/255,l=a[1]/255,c=a[2]/255,f=Math.min(1-u,1-l,1-c),h=(1-u-f)/(1-f)||0,p=(1-l-f)/(1-f)||0,g=(1-c-f)/(1-f)||0;return[h*100,p*100,g*100,f*100]};function o(a,u){return(a[0]-u[0])**2+(a[1]-u[1])**2+(a[2]-u[2])**2}return n.rgb.keyword=function(a){const u=t[a];if(u)return u;let l=1/0,c;for(const f of Object.keys(r)){const h=r[f],p=o(a,h);p<l&&(l=p,c=f)}return c},n.keyword.rgb=function(a){return r[a]},n.rgb.xyz=function(a){let u=a[0]/255,l=a[1]/255,c=a[2]/255;u=u>.04045?((u+.055)/1.055)**2.4:u/12.92,l=l>.04045?((l+.055)/1.055)**2.4:l/12.92,c=c>.04045?((c+.055)/1.055)**2.4:c/12.92;const f=u*.4124+l*.3576+c*.1805,h=u*.2126+l*.7152+c*.0722,p=u*.0193+l*.1192+c*.9505;return[f*100,h*100,p*100]},n.rgb.lab=function(a){const u=n.rgb.xyz(a);let l=u[0],c=u[1],f=u[2];l/=95.047,c/=100,f/=108.883,l=l>.008856?l**(1/3):7.787*l+16/116,c=c>.008856?c**(1/3):7.787*c+16/116,f=f>.008856?f**(1/3):7.787*f+16/116;const h=116*c-16,p=500*(l-c),g=200*(c-f);return[h,p,g]},n.hsl.rgb=function(a){const u=a[0]/360,l=a[1]/100,c=a[2]/100;let f,h,p;if(l===0)return p=c*255,[p,p,p];c<.5?f=c*(1+l):f=c+l-c*l;const g=2*c-f,w=[0,0,0];for(let y=0;y<3;y++)h=u+1/3*-(y-1),h<0&&h++,h>1&&h--,6*h<1?p=g+(f-g)*6*h:2*h<1?p=f:3*h<2?p=g+(f-g)*(2/3-h)*6:p=g,w[y]=p*255;return w},n.hsl.hsv=function(a){const u=a[0];let l=a[1]/100,c=a[2]/100,f=l;const h=Math.max(c,.01);c*=2,l*=c<=1?c:2-c,f*=h<=1?h:2-h;const p=(c+l)/2,g=c===0?2*f/(h+f):2*l/(c+l);return[u,g*100,p*100]},n.hsv.rgb=function(a){const u=a[0]/60,l=a[1]/100;let c=a[2]/100;const f=Math.floor(u)%6,h=u-Math.floor(u),p=255*c*(1-l),g=255*c*(1-l*h),w=255*c*(1-l*(1-h));switch(c*=255,f){case 0:return[c,w,p];case 1:return[g,c,p];case 2:return[p,c,w];case 3:return[p,g,c];case 4:return[w,p,c];case 5:return[c,p,g]}},n.hsv.hsl=function(a){const u=a[0],l=a[1]/100,c=a[2]/100,f=Math.max(c,.01);let h,p;p=(2-l)*c;const g=(2-l)*f;return h=l*f,h/=g<=1?g:2-g,h=h||0,p/=2,[u,h*100,p*100]},n.hwb.rgb=function(a){const u=a[0]/360;let l=a[1]/100,c=a[2]/100;const f=l+c;let h;f>1&&(l/=f,c/=f);const p=Math.floor(6*u),g=1-c;h=6*u-p,(p&1)!==0&&(h=1-h);const w=l+h*(g-l);let y,S,P;switch(p){default:case 6:case 0:y=g,S=w,P=l;break;case 1:y=w,S=g,P=l;break;case 2:y=l,S=g,P=w;break;case 3:y=l,S=w,P=g;break;case 4:y=w,S=l,P=g;break;case 5:y=g,S=l,P=w;break}return[y*255,S*255,P*255]},n.cmyk.rgb=function(a){const u=a[0]/100,l=a[1]/100,c=a[2]/100,f=a[3]/100,h=1-Math.min(1,u*(1-f)+f),p=1-Math.min(1,l*(1-f)+f),g=1-Math.min(1,c*(1-f)+f);return[h*255,p*255,g*255]},n.xyz.rgb=function(a){const u=a[0]/100,l=a[1]/100,c=a[2]/100;let f,h,p;return f=u*3.2406+l*-1.5372+c*-.4986,h=u*-.9689+l*1.8758+c*.0415,p=u*.0557+l*-.204+c*1.057,f=f>.0031308?1.055*f**(1/2.4)-.055:f*12.92,h=h>.0031308?1.055*h**(1/2.4)-.055:h*12.92,p=p>.0031308?1.055*p**(1/2.4)-.055:p*12.92,f=Math.min(Math.max(0,f),1),h=Math.min(Math.max(0,h),1),p=Math.min(Math.max(0,p),1),[f*255,h*255,p*255]},n.xyz.lab=function(a){let u=a[0],l=a[1],c=a[2];u/=95.047,l/=100,c/=108.883,u=u>.008856?u**(1/3):7.787*u+16/116,l=l>.008856?l**(1/3):7.787*l+16/116,c=c>.008856?c**(1/3):7.787*c+16/116;const f=116*l-16,h=500*(u-l),p=200*(l-c);return[f,h,p]},n.lab.xyz=function(a){const u=a[0],l=a[1],c=a[2];let f,h,p;h=(u+16)/116,f=l/500+h,p=h-c/200;const g=h**3,w=f**3,y=p**3;return h=g>.008856?g:(h-16/116)/7.787,f=w>.008856?w:(f-16/116)/7.787,p=y>.008856?y:(p-16/116)/7.787,f*=95.047,h*=100,p*=108.883,[f,h,p]},n.lab.lch=function(a){const u=a[0],l=a[1],c=a[2];let f;f=Math.atan2(c,l)*360/2/Math.PI,f<0&&(f+=360);const p=Math.sqrt(l*l+c*c);return[u,p,f]},n.lch.lab=function(a){const u=a[0],l=a[1],f=a[2]/360*2*Math.PI,h=l*Math.cos(f),p=l*Math.sin(f);return[u,h,p]},n.rgb.ansi16=function(a,u=null){const[l,c,f]=a;let h=u===null?n.rgb.hsv(a)[2]:u;if(h=Math.round(h/50),h===0)return 30;let p=30+(Math.round(f/255)<<2|Math.round(c/255)<<1|Math.round(l/255));return h===2&&(p+=60),p},n.hsv.ansi16=function(a){return n.rgb.ansi16(n.hsv.rgb(a),a[2])},n.rgb.ansi256=function(a){const u=a[0],l=a[1],c=a[2];return u===l&&l===c?u<8?16:u>248?231:Math.round((u-8)/247*24)+232:16+36*Math.round(u/255*5)+6*Math.round(l/255*5)+Math.round(c/255*5)},n.ansi16.rgb=function(a){let u=a%10;if(u===0||u===7)return a>50&&(u+=3.5),u=u/10.5*255,[u,u,u];const l=(~~(a>50)+1)*.5,c=(u&1)*l*255,f=(u>>1&1)*l*255,h=(u>>2&1)*l*255;return[c,f,h]},n.ansi256.rgb=function(a){if(a>=232){const h=(a-232)*10+8;return[h,h,h]}a-=16;let u;const l=Math.floor(a/36)/5*255,c=Math.floor((u=a%36)/6)/5*255,f=u%6/5*255;return[l,c,f]},n.rgb.hex=function(a){const l=(((Math.round(a[0])&255)<<16)+((Math.round(a[1])&255)<<8)+(Math.round(a[2])&255)).toString(16).toUpperCase();return"000000".substring(l.length)+l},n.hex.rgb=function(a){const u=a.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!u)return[0,0,0];let l=u[0];u[0].length===3&&(l=l.split("").map(g=>g+g).join(""));const c=parseInt(l,16),f=c>>16&255,h=c>>8&255,p=c&255;return[f,h,p]},n.rgb.hcg=function(a){const u=a[0]/255,l=a[1]/255,c=a[2]/255,f=Math.max(Math.max(u,l),c),h=Math.min(Math.min(u,l),c),p=f-h;let g,w;return p<1?g=h/(1-p):g=0,p<=0?w=0:f===u?w=(l-c)/p%6:f===l?w=2+(c-u)/p:w=4+(u-l)/p,w/=6,w%=1,[w*360,p*100,g*100]},n.hsl.hcg=function(a){const u=a[1]/100,l=a[2]/100,c=l<.5?2*u*l:2*u*(1-l);let f=0;return c<1&&(f=(l-.5*c)/(1-c)),[a[0],c*100,f*100]},n.hsv.hcg=function(a){const u=a[1]/100,l=a[2]/100,c=u*l;let f=0;return c<1&&(f=(l-c)/(1-c)),[a[0],c*100,f*100]},n.hcg.rgb=function(a){const u=a[0]/360,l=a[1]/100,c=a[2]/100;if(l===0)return[c*255,c*255,c*255];const f=[0,0,0],h=u%1*6,p=h%1,g=1-p;let w=0;switch(Math.floor(h)){case 0:f[0]=1,f[1]=p,f[2]=0;break;case 1:f[0]=g,f[1]=1,f[2]=0;break;case 2:f[0]=0,f[1]=1,f[2]=p;break;case 3:f[0]=0,f[1]=g,f[2]=1;break;case 4:f[0]=p,f[1]=0,f[2]=1;break;default:f[0]=1,f[1]=0,f[2]=g}return w=(1-l)*c,[(l*f[0]+w)*255,(l*f[1]+w)*255,(l*f[2]+w)*255]},n.hcg.hsv=function(a){const u=a[1]/100,l=a[2]/100,c=u+l*(1-u);let f=0;return c>0&&(f=u/c),[a[0],f*100,c*100]},n.hcg.hsl=function(a){const u=a[1]/100,c=a[2]/100*(1-u)+.5*u;let f=0;return c>0&&c<.5?f=u/(2*c):c>=.5&&c<1&&(f=u/(2*(1-c))),[a[0],f*100,c*100]},n.hcg.hwb=function(a){const u=a[1]/100,l=a[2]/100,c=u+l*(1-u);return[a[0],(c-u)*100,(1-c)*100]},n.hwb.hcg=function(a){const u=a[1]/100,c=1-a[2]/100,f=c-u;let h=0;return f<1&&(h=(c-f)/(1-f)),[a[0],f*100,h*100]},n.apple.rgb=function(a){return[a[0]/65535*255,a[1]/65535*255,a[2]/65535*255]},n.rgb.apple=function(a){return[a[0]/255*65535,a[1]/255*65535,a[2]/255*65535]},n.gray.rgb=function(a){return[a[0]/100*255,a[0]/100*255,a[0]/100*255]},n.gray.hsl=function(a){return[0,0,a[0]]},n.gray.hsv=n.gray.hsl,n.gray.hwb=function(a){return[0,100,a[0]]},n.gray.cmyk=function(a){return[0,0,0,a[0]]},n.gray.lab=function(a){return[a[0],0,0]},n.gray.hex=function(a){const u=Math.round(a[0]/100*255)&255,c=((u<<16)+(u<<8)+u).toString(16).toUpperCase();return"000000".substring(c.length)+c},n.rgb.gray=function(a){return[(a[0]+a[1]+a[2])/3/255*100]},Da}var Oa,Tc;function N2(){if(Tc)return Oa;Tc=1;const r=Of();function t(){const u={},l=Object.keys(r);for(let c=l.length,f=0;f<c;f++)u[l[f]]={distance:-1,parent:null};return u}function n(u){const l=t(),c=[u];for(l[u].distance=0;c.length;){const f=c.pop(),h=Object.keys(r[f]);for(let p=h.length,g=0;g<p;g++){const w=h[g],y=l[w];y.distance===-1&&(y.distance=l[f].distance+1,y.parent=f,c.unshift(w))}}return l}function o(u,l){return function(c){return l(u(c))}}function a(u,l){const c=[l[u].parent,u];let f=r[l[u].parent][u],h=l[u].parent;for(;l[h].parent;)c.unshift(l[h].parent),f=o(r[l[h].parent][h],f),h=l[h].parent;return f.conversion=c,f}return Oa=function(u){const l=n(u),c={},f=Object.keys(l);for(let h=f.length,p=0;p<h;p++){const g=f[p];l[g].parent!==null&&(c[g]=a(g,l))}return c},Oa}var Fa,Ec;function W2(){if(Ec)return Fa;Ec=1;const r=Of(),t=N2(),n={},o=Object.keys(r);function a(l){const c=function(...f){const h=f[0];return h==null?h:(h.length>1&&(f=h),l(f))};return"conversion"in l&&(c.conversion=l.conversion),c}function u(l){const c=function(...f){const h=f[0];if(h==null)return h;h.length>1&&(f=h);const p=l(f);if(typeof p=="object")for(let g=p.length,w=0;w<g;w++)p[w]=Math.round(p[w]);return p};return"conversion"in l&&(c.conversion=l.conversion),c}return o.forEach(l=>{n[l]={},Object.defineProperty(n[l],"channels",{value:r[l].channels}),Object.defineProperty(n[l],"labels",{value:r[l].labels});const c=t(l);Object.keys(c).forEach(h=>{const p=c[h];n[l][h]=u(p),n[l][h].raw=a(p)})}),Fa=n,Fa}Qi.exports;var Pc;function z2(){return Pc||(Pc=1,(function(r){const t=(p,g)=>(...w)=>`\x1B[${p(...w)+g}m`,n=(p,g)=>(...w)=>{const y=p(...w);return`\x1B[${38+g};5;${y}m`},o=(p,g)=>(...w)=>{const y=p(...w);return`\x1B[${38+g};2;${y[0]};${y[1]};${y[2]}m`},a=p=>p,u=(p,g,w)=>[p,g,w],l=(p,g,w)=>{Object.defineProperty(p,g,{get:()=>{const y=w();return Object.defineProperty(p,g,{value:y,enumerable:!0,configurable:!0}),y},enumerable:!0,configurable:!0})};let c;const f=(p,g,w,y)=>{c===void 0&&(c=W2());const S=y?10:0,P={};for(const[F,A]of Object.entries(c)){const N=F==="ansi16"?"ansi":F;F===g?P[N]=p(w,S):typeof A=="object"&&(P[N]=p(A[g],S))}return P};function h(){const p=new Map,g={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};g.color.gray=g.color.blackBright,g.bgColor.bgGray=g.bgColor.bgBlackBright,g.color.grey=g.color.blackBright,g.bgColor.bgGrey=g.bgColor.bgBlackBright;for(const[w,y]of Object.entries(g)){for(const[S,P]of Object.entries(y))g[S]={open:`\x1B[${P[0]}m`,close:`\x1B[${P[1]}m`},y[S]=g[S],p.set(P[0],P[1]);Object.defineProperty(g,w,{value:y,enumerable:!1})}return Object.defineProperty(g,"codes",{value:p,enumerable:!1}),g.color.close="\x1B[39m",g.bgColor.close="\x1B[49m",l(g.color,"ansi",()=>f(t,"ansi16",a,!1)),l(g.color,"ansi256",()=>f(n,"ansi256",a,!1)),l(g.color,"ansi16m",()=>f(o,"rgb",u,!1)),l(g.bgColor,"ansi",()=>f(t,"ansi16",a,!0)),l(g.bgColor,"ansi256",()=>f(n,"ansi256",a,!0)),l(g.bgColor,"ansi16m",()=>f(o,"rgb",u,!0)),g}Object.defineProperty(r,"exports",{enumerable:!0,get:h})})(Qi)),Qi.exports}var Ra,Ac;function q2(){return Ac||(Ac=1,Ra={stdout:!1,stderr:!1}),Ra}var La,Mc;function Y2(){return Mc||(Mc=1,La={stringReplaceAll:(n,o,a)=>{let u=n.indexOf(o);if(u===-1)return n;const l=o.length;let c=0,f="";do f+=n.substr(c,u-c)+o+a,c=u+l,u=n.indexOf(o,c);while(u!==-1);return f+=n.substr(c),f},stringEncaseCRLFWithFirstIndex:(n,o,a,u)=>{let l=0,c="";do{const f=n[u-1]==="\r";c+=n.substr(l,(f?u-1:u)-l)+o+(f?`\r
`:`
`)+a,l=u+1,u=n.indexOf(`
`,l)}while(u!==-1);return c+=n.substr(l),c}}),La}var $a,Dc;function H2(){if(Dc)return $a;Dc=1;const r=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,t=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,n=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,o=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,a=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function u(h){const p=h[0]==="u",g=h[1]==="{";return p&&!g&&h.length===5||h[0]==="x"&&h.length===3?String.fromCharCode(parseInt(h.slice(1),16)):p&&g?String.fromCodePoint(parseInt(h.slice(2,-1),16)):a.get(h)||h}function l(h,p){const g=[],w=p.trim().split(/\s*,\s*/g);let y;for(const S of w){const P=Number(S);if(!Number.isNaN(P))g.push(P);else if(y=S.match(n))g.push(y[2].replace(o,(F,A,N)=>A?u(A):N));else throw new Error(`Invalid Chalk template style argument: ${S} (in style '${h}')`)}return g}function c(h){t.lastIndex=0;const p=[];let g;for(;(g=t.exec(h))!==null;){const w=g[1];if(g[2]){const y=l(w,g[2]);p.push([w].concat(y))}else p.push([w])}return p}function f(h,p){const g={};for(const y of p)for(const S of y.styles)g[S[0]]=y.inverse?null:S.slice(1);let w=h;for(const[y,S]of Object.entries(g))if(Array.isArray(S)){if(!(y in w))throw new Error(`Unknown Chalk style: ${y}`);w=S.length>0?w[y](...S):w[y]}return w}return $a=(h,p)=>{const g=[],w=[];let y=[];if(p.replace(r,(S,P,F,A,N,z)=>{if(P)y.push(u(P));else if(A){const W=y.join("");y=[],w.push(g.length===0?W:f(h,g)(W)),g.push({inverse:F,styles:c(A)})}else if(N){if(g.length===0)throw new Error("Found extraneous } in Chalk template literal");w.push(f(h,g)(y.join(""))),y=[],g.pop()}else y.push(z)}),w.push(y.join("")),g.length>0){const S=`Chalk template literal is missing ${g.length} closing bracket${g.length===1?"":"s"} (\`}\`)`;throw new Error(S)}return w.join("")},$a}var Ba,Oc;function U2(){if(Oc)return Ba;Oc=1;const r=z2(),{stdout:t,stderr:n}=q2(),{stringReplaceAll:o,stringEncaseCRLFWithFirstIndex:a}=Y2(),{isArray:u}=Array,l=["ansi","ansi","ansi256","ansi16m"],c=Object.create(null),f=(W,D={})=>{if(D.level&&!(Number.isInteger(D.level)&&D.level>=0&&D.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const E=t?t.level:0;W.level=D.level===void 0?E:D.level};class h{constructor(D){return p(D)}}const p=W=>{const D={};return f(D,W),D.template=(...E)=>N(D.template,...E),Object.setPrototypeOf(D,g.prototype),Object.setPrototypeOf(D.template,D),D.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},D.template.Instance=h,D.template};function g(W){return p(W)}for(const[W,D]of Object.entries(r))c[W]={get(){const E=P(this,S(D.open,D.close,this._styler),this._isEmpty);return Object.defineProperty(this,W,{value:E}),E}};c.visible={get(){const W=P(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:W}),W}};const w=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(const W of w)c[W]={get(){const{level:D}=this;return function(...E){const U=S(r.color[l[D]][W](...E),r.color.close,this._styler);return P(this,U,this._isEmpty)}}};for(const W of w){const D="bg"+W[0].toUpperCase()+W.slice(1);c[D]={get(){const{level:E}=this;return function(...U){const V=S(r.bgColor[l[E]][W](...U),r.bgColor.close,this._styler);return P(this,V,this._isEmpty)}}}}const y=Object.defineProperties(()=>{},{...c,level:{enumerable:!0,get(){return this._generator.level},set(W){this._generator.level=W}}}),S=(W,D,E)=>{let U,V;return E===void 0?(U=W,V=D):(U=E.openAll+W,V=D+E.closeAll),{open:W,close:D,openAll:U,closeAll:V,parent:E}},P=(W,D,E)=>{const U=(...V)=>u(V[0])&&u(V[0].raw)?F(U,N(U,...V)):F(U,V.length===1?""+V[0]:V.join(" "));return Object.setPrototypeOf(U,y),U._generator=W,U._styler=D,U._isEmpty=E,U},F=(W,D)=>{if(W.level<=0||!D)return W._isEmpty?"":D;let E=W._styler;if(E===void 0)return D;const{openAll:U,closeAll:V}=E;if(D.indexOf("\x1B")!==-1)for(;E!==void 0;)D=o(D,E.close,E.open),E=E.parent;const ee=D.indexOf(`
`);return ee!==-1&&(D=a(D,V,U,ee)),U+D+V};let A;const N=(W,...D)=>{const[E]=D;if(!u(E)||!u(E.raw))return D.join(" ");const U=D.slice(1),V=[E.raw[0]];for(let ee=1;ee<E.length;ee++)V.push(String(U[ee-1]).replace(/[{}\\]/g,"\\$&"),String(E.raw[ee]));return A===void 0&&(A=H2()),A(W,V.join(""))};Object.defineProperties(g.prototype,c);const z=g();return z.supportsColor=t,z.stderr=g({level:n?n.level:0}),z.stderr.supportsColor=n,Ba=z,Ba}var G2=U2();const Q2=Lc(G2);function V2(r,t={}){if(!Array.isArray(r))throw new TypeError("Expected an array");let n=["‚ñÅ","‚ñÇ","‚ñÉ","‚ñÑ","‚ñÖ","‚ñÜ","‚ñá","‚ñà"];const o=[[5,5,4],[5,5,3],[5,5,0],[5,4,0],[5,3,0],[5,2,0],[5,1,0],[5,0,0]],a=r.filter(c=>Number.isFinite(c)),u=typeof t.minimum=="number"?t.minimum:typeof t.maximum=="number"?0:Math.min(...a),l=typeof t.maximum=="number"?t.maximum:Math.max(...a);return u===l&&l!==0&&(n=[n[4]]),r.map(c=>{if(!Number.isFinite(c))return" ";let f;return u===l?f=0:f=Math.ceil((c-u)/(l-u)*n.length)-1,f<0&&(f=0),t.style==="fire"?Q2.rgb(...o[f])(n[f]):n[f]}).join("")}const Yi=un(ln.StatisticsService);class X2{descriptiveStatistics(t,n){const o=t.filter(a=>typeof a=="number"&&!isNaN(a));if(o.length===0)return Yi.warn("No valid numeric values found for descriptive statistics"),null;try{const a=Ja(o,.25),u=Ja(o,.75),l={count:o.length,sum:Ef(o),mean:Pf(o),median:R2(o),mode:D2(o),min:vc(o),max:_c(o),range:_c(o)-vc(o),variance:Af(o),standardDeviation:P2(o),q1:a,q3:u,iqr:u-a};if(n?.includeVisualization){const c=n.chartHeight||10,f=this.createSparkline(o),h=this.createLineChart(o,c);l.visualization=`
**Sparkline:** ${f}

**Trend Chart:**
\`\`\`
${h}
\`\`\`
`.trim()}return Yi.dev("Calculated descriptive statistics",{stats:l}),l}catch(a){return Yi.error("Error calculating descriptive statistics",{error:a}),null}}booleanStatistics(t){const n=t.filter(S=>S===!0).length,o=t.filter(S=>S===!1).length,a=t.filter(S=>S===null).length,u=t.length;let l=0,c=0,f=0,h=null,p=0,g=0;for(const S of t)S===!0?(p++,g=0):S===!1&&(g++,p=0),l=Math.max(l,p),c=Math.max(c,g);const w=t[t.length-1];w===!0?(f=p,h="true"):w===!1&&(f=g,h="false");const y={count:u,trueCount:n,falseCount:o,nullCount:a,truePercentage:u>0?n/u*100:0,falsePercentage:u>0?o/u*100:0,longestTrueStreak:l,longestFalseStreak:c,currentStreak:f,currentStreakType:h};return Yi.dev("Calculated boolean statistics",{stats:y}),y}formatDescriptiveStats(t){return`
**Count:** ${t.count}
**Sum:** ${t.sum.toFixed(2)}
**Mean:** ${t.mean.toFixed(2)}
**Median:** ${t.median.toFixed(2)}
**Mode:** ${Array.isArray(t.mode)?t.mode.join(", "):t.mode}
**Min:** ${t.min.toFixed(2)}
**Max:** ${t.max.toFixed(2)}
**Range:** ${t.range.toFixed(2)}
**Std Dev:** ${t.standardDeviation.toFixed(2)}
**Variance:** ${t.variance.toFixed(2)}
**Q1 (25%):** ${t.q1.toFixed(2)}
**Q3 (75%):** ${t.q3.toFixed(2)}
**IQR:** ${t.iqr.toFixed(2)}
`.trim()}formatBooleanStats(t,n){const o=t.currentStreakType==="true"?"‚ú®":"‚ùÑÔ∏è";return`
**${n} Statistics**
- Total tracked: ${t.count} days
- Success rate: ${t.truePercentage.toFixed(1)}% (${t.trueCount}/${t.count})
- Longest streak: ${t.longestTrueStreak} days üèÜ
- Current streak: ${o} ${t.currentStreak} days
`.trim()}createLineChart(t,n=10,o){if(t.length===0)return"No data to display";const a={height:n};return o&&(a.width=o),$2.plot(t,a)}createSparkline(t){return t.length===0?"‚Äî":V2(t)}createBooleanBarChart(t,n=30){return t.slice(-n).map(u=>u===!0?"‚úÖ":u===!1?"‚ùå":"‚¨ú").join("")}createBooleanPieChart(t,n){return`\`\`\`mermaid
pie title ${n}
    "Completed" : ${t.trueCount}
    "Skipped" : ${t.falseCount}
    ${t.nullCount>0?`"Not Tracked" : ${t.nullCount}`:""}
\`\`\``}createBooleanVisualReport(t,n,o={}){const{showSparkline:a=!0,showBarChart:u=!0,showAsciiChart:l=!0,showPieChart:c=!1,dates:f=[]}=o,h=this.booleanStatistics(t),p=t.map(w=>w===!0?1:0);let g=`## üìä ${n}

`;if(g+=this.formatBooleanStats(h,n)+`

`,a&&(g+=`**Trend:** ${this.createSparkline(p)}

`),u&&(g+=`**Last ${Math.min(t.length,30)} days:**
`,g+=this.createBooleanBarChart(t,30)+`

`,f.length>0)){const w=f[0],y=f[f.length-1];g+=`*From ${w} to ${y}*

`}return l&&p.length>=3&&(g+="**Trend Chart:**\n```\n",g+=this.createLineChart(p,6),g+="\n```\n\n"),c&&(g+=this.createBooleanPieChart(h,`${n} Distribution`)+`

`),g}createNumericVisualReport(t,n,o={}){const{showSparkline:a=!0,showAsciiChart:u=!0,showStats:l=!0}=o,c=this.descriptiveStatistics(t);if(!c)return`## ${n}

No data available`;let f=`## üìà ${n}

`;return l&&(f+=this.formatDescriptiveStats(c)+`

`),a&&(f+=`**Trend:** ${this.createSparkline(t)}

`),u&&(f+="**Trend Chart:**\n```\n",f+=this.createLineChart(t,10),f+="\n```\n\n"),f}}const eo=new X2;async function j2(){const r="habitTracking",t=new wt(r),n=p2.map(async c=>{if(!await Gr.shouldShowInput(c))return null;const h=await Gr.getInputProgress(c);return{habit:c,completedCount:h.targetProgress?.current||0,targetCount:c.schedule?.target?.count||1,isComplete:h.targetProgress?.isComplete||!1,shouldShow:!0,maxLimitProgress:h.limitProgress?{current:h.limitProgress.current,max:h.limitProgress.limit,percentage:h.limitProgress.percentage}:null}}),a=(await Promise.all(n)).filter(c=>c!==null);t._md("## ‚úÖ Today's Habits (üìå CORE)"),t._foldable(`**Atomic Habits** ‚Äî every habit = Cue ‚Üí Craving ‚Üí Response ‚Üí Reward.
**Taoist Wu Wei** ‚Äî not perfection, but flow. Missed habits are okay‚Äîjust return gently.
**Power of Habit** ‚Äî the cue and reward make habits stick, not willpower alone.

**Check when complete:**`),a.length>0?(a.forEach(({habit:c,completedCount:f,maxLimitProgress:h,targetCount:p})=>{const g=c.schedule?.target?.per.count||1,w=c.schedule?.target?.per.unit||pe.Day,y=p===1&&g===1&&w===pe.Day;let S=[c.label];if(!y){let F;g===1?F=w:F=`${g} ${w}s`,S.push(`target: ${f}/${p} per ${F}`)}if(h){const{current:F,max:A}=h,N=c.schedule?.limit?.per.count||1,z=c.schedule?.limit?.per.unit||"day",W=N===1?z:`${N} ${z}s`;S.push(`limit: ${F}/${A} per ${W}`)}const P={...c.inputOptions,label:S.join(" ¬∑ ")};t._input(P),t._md(`*Cue*: ${c.cue} ¬∑ *Reward*: ${c.reward}`)}),t._nl(),t._md("Missing once is an accident. Missing twice is the start of a pattern. Return gently.")):t._md("*üéâ All habits completed for this period! Well done!*");const u=a.map(c=>c.habit.id);let l=!1;try{const c=await jt.getInputsLastNReports({inputIds:u,count:10});if(l=c.length>0,l){t._divider();let f="";for(const{habit:h}of a){const p=c.filter(g=>g.inputId===h.id);if(p.length>=2){const g=p.map(S=>S.value),w=eo.booleanStatistics(g),y=eo.createSparkline(g.map(S=>S===!0?1:0));f+=`**${h.label}:** ${w.truePercentage.toFixed(0)}% (${w.trueCount}/${w.count}) ¬∑ ${y} ¬∑ ${w.currentStreakType==="true"?"‚ú®":"‚ùÑÔ∏è"} ${w.currentStreak} streak
`}}t._foldable(f.trim(),"üìä Habit Statistics (Last 10 Reports)")}}catch(c){console.error("Failed to fetch habit statistics:",c)}return await t.render()}const Fc=r=>{try{const t=bb(r,"yyyy-MM-dd",new Date);return _n(t,"dd.MM.yyyy")}catch{return r}};async function K2(){const r="messageFromYesterday",t=new wt(r),n=await jt.getInputsLastNReports({inputIds:[Oe.message_for_tomorrow.id,Oe.tomorrow_priority.id],count:1}),o=n.find(c=>c.inputId===Oe.message_for_tomorrow.id),a=n.find(c=>c.inputId===Oe.tomorrow_priority.id),u=o&&o.value?.trim().length>0,l=a&&a.value?.trim().length>0;if(!u&&!l)return"";if(t._md("## üì® Message from Your Past Self (‚≠ê RECOMMENDED)"),l){const c=a.value,f=Fc(a.reportDate);t._md(`### üéØ Today's Priority (set ${f})`),t._md(`**${c}**`)}if(u){const c=o.value,f=Fc(o.reportDate);t._md(`### üíå Message (from ${f})`),t._md(`**${c}**`)}return await t.render()}async function J2(){const r="accomplishmentsAndObstacles",t=new wt(r);return t._md("## üìä Wins & Obstacles (‚≠ê RECOMMENDED)"),t._foldable(`**The Stoic Path** ‚Äî "The obstacle is the way." Every setback is training.

_"The impediment to action advances action. What stands in the way becomes the way."_ ‚Äî Marcus Aurelius

**Three Questions for Obstacles:**
1. **What happened?** (The external event‚Äînot in your control)
2. **How did I respond?** (Your reaction‚Äîentirely in your control)
3. **How will I overcome this?** (Your action plan‚Äîgrowth through adversity)

**Atomic Habits:** Every obstacle reveals a system flaw. Fix the system, not just the symptom.
**Growth Mindset:** You haven't mastered this *yet*. Struggle = growth happening.

Remember: You control your **effort, attitude, and response** ‚Äî not outcomes.`),t._fancyTitle("Wins & Accomplishments","üèÜ"),t._input(Oe.accomplishments),t._fancyTitle("Obstacles & The Way Forward","‚öîÔ∏è"),t._input(Oe.obstacles),t._input(Oe.if_then_plan),t._md("**Stoic Wisdom**: This obstacle is not blocking your path‚Äîit IS the path. It's revealing where you need to grow."),await t.render()}async function Z2(){const r="attentionAndWillpower",t=new wt(r);return t._md("## üéØ Attention & Willpower Check (üí° OPTIONAL - 3-5 min)"),t._foldable(`**Hyperfocus** ‚Äî attention is your most valuable resource. Protect it fiercely.
**The Willpower Instinct** ‚Äî willpower depletes throughout the day and needs recovery (rest, breaks, nature).
**Atomic Habits** ‚Äî environment shapes behavior more than motivation.

Track patterns. Design better environments. Restore your willpower.`),t._fancyTitle("Attention Reflection","üëÅÔ∏è"),t._input(Oe.main_distraction),t._input(Oe.flow_moments),t._fancyTitle("Willpower Reflection","üí™"),t._input(Oe.willpower_challenge),t._md("**Insight** ‚Äî you can't control urges, but you can control your environment. Make good choices the easy choices."),await t.render()}async function ek(){const r="gratitudeAndSavoring",t=new wt(r);return t._md("## üôè Gratitude & Savoring (‚≠ê RECOMMENDED)"),t._foldable(`**Three Good Things Intervention** ‚Äî writing WHY things went well is crucial for wellbeing.
**Stoicism** ‚Äî negative visualization‚Äîappreciate what you have by imagining its loss.
**Positive Psychology** ‚Äî gratitude is one of the strongest wellbeing predictors.

Savor simple pleasures: friendship, beauty, learning, nature. Your role matters.`),t._md("### Three Good Things Today"),t._input(Oe.gratitudes),await t.render()}async function tk(){const r="mindfulMoment",t=new wt(r);return t._md("## üßò Mindful Moment (üí° OPTIONAL - 2-3 min)"),t._foldable(`**Present Moment Awareness** ‚Äî The antidote to anxiety

Anxiety lives in the future (what if?). Regret lives in the past (if only...). Peace lives in NOW.

**The Problem** ‚Äî your mind is NEVER here. You eat lunch while planning dinner. You're with friends while mentally at work. You miss your ENTIRE LIFE because you're always somewhere else.

**The Solution** ‚Äî train yourself to return to the present moment‚Äîover and over.

**What this practice does:**
- **Reduces anxiety** ‚Äî the present moment is usually fine. Suffering is in your head.
- **Increases joy** ‚Äî life's beauty exists NOW, not in memory or anticipation
- **Improves focus** ‚Äî your attention is your most valuable resource
- **Creates calm** ‚Äî presence is inherently peaceful
- **Builds gratitude** ‚Äî you notice what you usually miss

**Why it works** (neuroscience):
Your brain has two modes:
- **Default Mode** (wandering mind) ‚Äî predicts, plans, worries, ruminates = stress
- **Present Mode** (focused attention) ‚Äî observes, senses, experiences = calm

This practice trains you to shift from Default to Present mode at will.

**How to practice:**
This is NOT about emptying your mind. It's about NOTICING when you were present today, and appreciating that moment.

When you recall being fully present‚Äîeven for 5 seconds‚Äîyou're training your brain to recognize and seek presence.`,"Mindfulness Practice"),t._md("### Practice (2 minutes)"),t._md("**Step 1** ‚Äî ground yourself"),t._md("Close your eyes or soften your gaze. Take three slow, deep breaths. Feel your body in the chair."),t._md("**Step 2** ‚Äî recall one present moment"),t._md("Remember ONE moment from today when you were fully HERE ‚Äî no past, no future, just NOW:"),t._md("- Morning coffee warmth on your hands"),t._md("- A genuine laugh with someone"),t._md("- Sunlight on your skin"),t._md("- The taste of your lunch"),t._md("- Wind in your hair"),t._md("- A moment of quiet"),t._md("**Step 3** ‚Äî explore the memory"),t._md("Hold that memory. Notice the details:"),t._md("- What did you SEE? (Colors, light, movement)"),t._md("- What did you HEAR? (Sounds, silence, rhythm)"),t._md("- What did you FEEL? (Temperature, texture, sensation)"),t._md("- What did you SMELL? TASTE?"),t._md("**Step 4** ‚Äî appreciate"),t._md("That simple moment‚ÄîTHAT is life. Not achievements or plans. Just being fully alive, right here, right now."),t._input(Oe.mindful_pause_taken),t._md('> _"The present moment is all you ever have."_ ‚Äî Eckhart Tolle'),t._md('> _"When you wash the dishes, wash the dishes."_ ‚Äî Th√≠ch Nh·∫•t H·∫°nh'),await t.render()}async function nk(){const r="emotionAwareness",t=new wt(r);return t._md("## üí≠ Emotion Awareness (üí° OPTIONAL - 3-5 min)"),t._foldable(`**Emotional Intelligence** ‚Äî recognizing emotions is the first step to managing them.
**Stoicism** ‚Äî you can't control feelings arising, but you can control your response.
**Neuroscience** ‚Äî naming emotions reduces their intensity (affect labeling).

No judgment‚Äîjust awareness and learning.`),t._md("### Today's Emotional Landscape"),t._input(Oe.strongest_emotion),t._input(Oe.emotion_trigger),t._input(Oe.emotion_response),t._input(Oe.better_emotion_response),t._md(`> **Practice** ‚Äî when strong emotions arise, pause and label: _"I'm feeling [emotion]."_ This creates space between feeling and reaction.`),await t.render()}async function rk(){const r="permaPlus",t=new wt(r),n=Ka.map(async g=>await Gr.shouldShowInput(g)?g:null),o=(await Promise.all(n)).filter(g=>g!==null),a=new Map;o.forEach(g=>{g.schedule?.showEvery?.unit===pe.Day&&a.set(g.id,g.schedule.showEvery.count)});const u=Ka.filter(g=>!g.schedule||g.schedule.active!==!1),l=u.map(g=>g.id);let c=new Map,f=new Map,h=new Map,p={first:"",last:"",reportCount:0};try{const g=await jt.getInputsLastNReports({inputIds:l,count:20});if(g.length>0){const w=Array.from(new Set(g.map(y=>y.reportDate||""))).sort();p={first:w[0],last:w[w.length-1],reportCount:w.length}}u.forEach(w=>{const y=g.filter(S=>S.inputId===w.id).map(S=>{const P=Array.isArray(S.value)?S.value[0]:S.value;return typeof P=="string"?parseFloat(P):P}).filter(S=>!isNaN(S));if(c.set(w.id,y),y.length>0){const S=y.slice(-5),P=S.reduce((A,N)=>A+N,0)/S.length;f.set(w.id,P);const F=y.reduce((A,N)=>A+N,0)/y.length;h.set(w.id,F)}})}catch(g){console.error("Failed to fetch PERMA historical data:",g)}if(t._md("## üíö PERMA+8 Wellbeing Check (üìå CORE - 2-3 min)"),t._foldable(`**PERMA+8 Model**: Comprehensive wellbeing framework covering 13 dimensions:

**Core PERMA:**
- Positive Emotions, Engagement, Relationships, Meaning, Accomplishment

**Body & Physical:**
- Sleep Quality, Embodiment (body acceptance), Physical Pleasure, Touch & Intimacy, Physical Condition

**Life Context:**
- Mindset, Environment, Economic Security

Rate honestly‚Äîawareness is the first step to change.

**Rate each dimension** (3 = Great, 2 = Adequate, 1 = Struggling):`),o.forEach(g=>{const w=f.get(g.id),y=w!==void 0?` (last 5 reports: ${w.toFixed(1)})`:"",S=g.schedule?.showEvery?` *(shown every ${g.schedule.showEvery.count} ${g.schedule.showEvery.unit}${g.schedule.showEvery.count>1?"s":""})*`:"";t._inputLabel(`${g.label}${y}${S}`,`*${g.description}*`),t._input(g.inputOptions)}),c.size>0&&Array.from(c.values()).some(g=>g.length>=3)){t._themedDivider("Wellbeing Trends","üìä");const g=[];if(c.forEach(w=>{g.push(...w)}),g.length>0){const w=g.reduce((P,F)=>P+F,0)/g.length,y=eo.createSparkline(Array.from(c.values())[0]);t._md(`**Overall Wellbeing (last ${p.reportCount} reports): ${w.toFixed(1)}/3.0** ${y}`),p.first&&p.last&&t._md(`*Data from ${p.first} to ${p.last}*`);const S=u.map(P=>({param:P,avg:h.get(P.id)||0,dataPoints:c.get(P.id)?.length||0})).filter(P=>P.dataPoints>=3).sort((P,F)=>P.avg-F.avg);if(S.length>0){const P=S[0],F=S[S.length-1];t._md("**Insights:**"),P.avg<2&&t._md(`- ‚ö†Ô∏è **Needs attention**: ${P.param.label} (avg: ${P.avg.toFixed(1)}) ‚Äî Consider prioritizing this area`),F.avg>=2.5&&t._md(`- ‚ú® **Strength area**: ${F.param.label} (avg: ${F.avg.toFixed(1)}) ‚Äî Keep up the good work!`),t._md(`**Trends (last ${p.reportCount} reports):**`),u.forEach(A=>{const N=c.get(A.id);if(N&&N.length>=3){const z=h.get(A.id)||0,W=eo.createSparkline(N),D=N.length>=2?N[N.length-1]>N[N.length-2]?"‚Üó":N[N.length-1]<N[N.length-2]?"‚Üò":"‚Üí":"‚Üí";t._md(`- ${A.label}: ${z.toFixed(1)} ${W} ${D}`)}})}}}return await t.render()}async function ik(){const r="messageForTomorrow",t=new wt(r);return t._md("## üíå Message & Intention for Tomorrow (üìå CORE - 2 min)"),t._foldable(`Set yourself up for success tomorrow with clarity and encouragement.

**Tomorrow's Priority**: What's the ONE thing that matters most? When and where will you do it?
**Message to Future Self**: A reminder, encouragement, or lesson you don't want to forget.

What can I prepare tonight to make tomorrow easier?

Which PERMA plus parameter needs special attention tomorrow?

Keep it short and meaningful. Your future self will thank you.`),t._input(Oe.tomorrow_priority),t._input(Oe.message_for_tomorrow),t._input(Oe.plan_next_day),await t.render()}async function ok(){const r=[];r.push(await f2()),r.push(`
---
`),r.push("# üåÖ MORNING: Set the Day"),r.push("*Win the morning, win the day. Start with intention and clarity.*"),r.push(`
---
`),r.push(await K2()),r.push(await I2()),r.push(await S2()),r.push(await tk()),r.push(await C2()),r.push(`
---
`),r.push("# üìã DAILY HABITS & PRACTICES"),r.push("*Small actions, repeated daily, create remarkable results.*"),r.push(`
---
`),r.push(await j2()),r.push(await T2()),r.push(`
---
`),r.push("# üåô EVENING: Reflect & Close the Day"),r.push("*Review your day with honesty and gratitude. Learn, grow, prepare.*"),r.push(`
---
`),r.push(await J2()),r.push(await Z2()),r.push(await ek()),r.push(await nk()),r.push(await rk()),r.push(await ik()),Ur.write({type:nr.ALMOST_DAILY,data:r.join(`
`)})}class ak{async backfillPeriodicParameters(t){const n=[];for(const o of t){const a=Ka.find(f=>f.id===o.inputId&&f.schedule?.active!==!1);if(!a||!a.schedule?.showEvery){n.push(o);continue}const u=a.schedule.showEvery.unit===pe.Day?a.schedule.showEvery.count:1,l=o.reportDate,c=await this.getReportDatesInPast(u,l);for(const f of c)n.push({...o,reportDate:f});n.push(o)}return n}async getReportDatesInPast(t,n){const o=[];try{const a=await jt.getReportInputs("almostDailyReport");for(let u=1;u<t;u++){const l=this.getDateDaysAgo(u,n);a.some(f=>f.reportDate===l)&&o.push(l)}}catch(a){console.error("Error fetching past report dates:",a)}return o}getDateDaysAgo(t,n){(!n||n.trim()==="")&&(console.warn(`Invalid fromDate provided to getDateDaysAgo: "${n}". Using today's date.`),n=new Date().toISOString().split("T")[0]);const o=new Date(n);return isNaN(o.getTime())?(console.error(`Invalid date string: "${n}". Using today's date.`),new Date().toISOString().split("T")[0]):(o.setDate(o.getDate()-t),o.toISOString().split("T")[0])}}const sk=new ak,Ye=un(ln.FileService);async function uk(){try{const r=new Date,t=r.getHours(),n=`${_n(r,"dd.MM.yyyy")}.md`;if(t>=0&&t<4){Ye.info(`Current time is ${_n(r,"HH:mm")} (before 04:00) - aborting report creation`);const f=`${st.projectDir}/${st.coreDir}`,h=ke.vault.getAbstractFileByPath(f);if(h&&"children"in h){const p=/^\d{2}\.\d{2}\.\d{4}\.md$/;let g=0;Ye.info(`Core directory children count: ${h.children.length}`);for(const w of h.children){const y="extension"in w;Ye.info(`Found child: ${w.name} (type: ${y?"md":"folder"})`)}for(const w of h.children)if("extension"in w&&w.extension==="md"&&p.test(w.name))try{Ye.info(`Deleting script-triggering note (early morning abort): ${w.name}`),await ke.vault.delete(w),g++}catch(S){Ye.error(`Failed to delete ${w.name}:`,S)}Ye.info(`Early morning cleanup: deleted ${g} script-triggering note(s)`)}else Ye.warn(`Core directory not found or is not a folder: ${f}`);Ye.info("Report creation aborted. Please open after 04:00 to create today's report.");return}const o=await lk();Ye.dev("Input collection and empty report cleanup completed");const a=ke.workspace.getLeavesOfType("markdown"),u=[];for(const f of a){const p=f.view.file;p&&(u.push(p.path),p.path.endsWith(n)&&(Ye.dev("Closing today's note: "+p.path),await f.detach()))}Ye.dev("Currently open files: "+u.join(", "));const l=`${st.projectDir}/${st.coreDir}`,c=ke.vault.getAbstractFileByPath(l);if(c&&"children"in c){const f=/^\d{2}\.\d{2}\.\d{4}\.md$/;for(const h of c.children)"extension"in h&&h.extension==="md"&&f.test(h.name)&&h.name!==n&&(Ye.dev("Deleting old app-triggering note: "+h.path),await ke.vault.delete(h))}if(o){for(const[f,h]of Object.entries(o))if(h&&h.length>0){const p=await sk.backfillPeriodicParameters(h);await jt.upsertReportInputs(f,p),Ye.info(`Saved ${p.length} inputs (${h.length} original + ${p.length-h.length} backfilled) for ${f} to database`)}}await ok(),Ye.info("Daily report built successfully")}catch(r){Ye.error("Failed to run onStart:",r)}}async function lk(){try{Ye.dev("Checking for empty reports from yesterday...");const r=await i_.collectFromYesterday();for(const[t,n]of Object.entries(r)){if(!n||n.length===0){Ye.dev(`No inputs found for report: ${t}`);continue}if(n.every(a=>!!(a.value===null||a.value===void 0||typeof a.value=="string"&&a.value.trim()===""||Array.isArray(a.value)&&a.value.length===0||typeof a.value=="boolean"&&a.value===!1||typeof a.value=="number"&&a.value===0))){const a=Ur.reportFolders[t],u=await Ur._listFiles(a);if(u.length>0){const l=u.sort().reverse()[0],c=n[0];if(c&&l.includes(c.reportDate.replace(/-/g,""))&&l.includes(c.reportNumber)){const f=`${a}/${l}`,h=ke.vault.getAbstractFileByPath(f);h&&"extension"in h&&(Ye.info(`Deleting empty report: ${l}`),await ke.vault.delete(h))}}}else Ye.dev(`Report ${t} has content - keeping it`)}return r}catch(r){return Ye.error("Failed to delete empty reports:",r),{}}}const Hi=un(ln.FileService);async function ck(r,t){Hi.info("runPowerJournal started");const n=await xy(t);my(r,n),Hi.dev("Globals set, config loaded");try{await uk(),Hi.info("Power Journal workflow completed successfully")}catch(o){Hi.error("Error in Power Journal workflow",{error:o})}}module.exports=ck;
