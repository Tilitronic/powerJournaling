"use strict";const qt={ComponentBuilder:"ComponentBuilder",SavingService:"SavingService",TagsService:"TagsService",InputCreator:"InputCreator",FileService:"FileService",OnStart:"OnStart",InputCollector:"InputCollector",ValueExtractor:"ValueExtractor",DbService:"DbService",StatisticsService:"StatisticsService"},wy={[qt.ComponentBuilder]:{dev:!1,info:!0,warn:!0,error:!0},[qt.SavingService]:{dev:!0,info:!0,warn:!0,error:!0},[qt.TagsService]:{dev:!1,info:!0,warn:!0,error:!0},[qt.InputCreator]:{dev:!1,info:!0,warn:!0,error:!0},[qt.FileService]:{dev:!0,info:!0,warn:!0,error:!0},[qt.OnStart]:{dev:!0,info:!0,warn:!0,error:!0},[qt.InputCollector]:{dev:!0,info:!0,warn:!0,error:!0},[qt.ValueExtractor]:{dev:!0,info:!0,warn:!0,error:!0},[qt.DbService]:{dev:!0,info:!0,warn:!0,error:!0},[qt.StatisticsService]:{dev:!0,info:!0,warn:!0,error:!0}},Gn={reset:"\x1B[0m",bold:"\x1B[1m",gray:"\x1B[90m",purple:"\x1B[35m"},vy={dev:"\x1B[44m\x1B[37m",info:"\x1B[42m\x1B[30m",warn:"\x1B[43m\x1B[30m",error:"\x1B[41m\x1B[37m"},xy={dev:"🛠",info:"ℹ️",warn:"⚠️",error:"❌"},ba={},Nl=["\x1B[36m","\x1B[33m","\x1B[32m","\x1B[34m","\x1B[31m","\x1B[95m","\x1B[96m","\x1B[92m","\x1B[93m"];let Wl=0;function _y(t){return ba[t]||(ba[t]=Nl[Wl%Nl.length],Wl++),ba[t]}class es{constructor(r,n){this.logs=[],this.serviceConfig={},this.getConfig=r,this.prefix=n??"global"}setServiceConfig(r){this.serviceConfig=r}addLog(r,n,a){const o={timestamp:new Date,level:r,service:this.prefix,message:n,meta:a};if(this.logs.push(o),!((this.serviceConfig[this.prefix]??{})[r]??!0))return;const c=o.timestamp.toISOString().split("T")[1].split(".")[0],f=`${Gn.gray}${c}${Gn.reset}`,h=`${Gn.purple}[PJ]${Gn.reset}`,p=`${_y(this.prefix)}${Gn.bold}[${this.prefix}]${Gn.reset}`,g=`${vy[r]}[${xy[r]} ${r.toUpperCase().padEnd(5)}]${Gn.reset}`,b=`${f} ${h}${p}${g} ${n}`;try{r==="warn"?console.warn(b,a??""):r==="error"?console.error(b,a??""):console.log(b,a??"")}catch{console.log(`${f} ${h}[${this.prefix}][${r.toUpperCase()}] ${n}`,a??"")}}dev(r,n){this.addLog("dev",r,n)}info(r,n){this.addLog("info",r,n)}warn(r,n){this.addLog("warn",r,n)}error(r,n){this.addLog("error",r,n)}getAllLogs(){return this.logs}withPrefix(r){const n=new es(this.getConfig,r);return n.setServiceConfig(this.serviceConfig),n}}let vt;function ky(t,r){vt=r}const Gc=new es(()=>vt);Gc.setServiceConfig(wy);function Zt(t){return Gc.withPrefix(t)}const en=qt,ke=app;var zi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ts(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Sy=qr.exports,zl;function Iy(){return zl||(zl=1,(function(t,r){(function(){var n,a="4.17.21",o=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",h=500,p="__lodash_placeholder__",g=1,b=2,y=4,C=1,I=2,M=1,P=2,$=4,N=8,z=16,F=32,A=64,Y=128,G=256,ee=512,ce=30,Q="...",j=800,be=16,Ae=1,he=2,We=3,Ce=1/0,Re=9007199254740991,Dt=17976931348623157e292,_=NaN,Me=4294967295,Lt=Me-1,S=Me>>>1,ut=[["ary",Y],["bind",M],["bindKey",P],["curry",N],["curryRight",z],["flip",ee],["partial",F],["partialRight",A],["rearg",G]],Xe="[object Arguments]",Oe="[object Array]",Ln="[object AsyncFunction]",Je="[object Boolean]",xt="[object Date]",yn="[object DOMException]",tn="[object Error]",Jn="[object Function]",Qr="[object GeneratorFunction]",lt="[object Map]",bn="[object Number]",Kr="[object Null]",_t="[object Object]",Xr="[object Promise]",Jr="[object Proxy]",wn="[object RegExp]",ct="[object Set]",Rn="[object String]",Zn="[object Symbol]",io="[object Undefined]",$n="[object WeakMap]",L="[object WeakSet]",q="[object ArrayBuffer]",X="[object DataView]",ae="[object Float32Array]",ge="[object Float64Array]",Ge="[object Int8Array]",Rt="[object Int16Array]",ft="[object Int32Array]",nn="[object Uint8Array]",rn="[object Uint8ClampedArray]",qe="[object Uint16Array]",Yt="[object Uint32Array]",$t=/\b__p \+= '';/g,zf=/\b(__p \+=) '' \+/g,qf=/(__e\(.*?\)|\b__t\)) \+\n'';/g,cs=/&(?:amp|lt|gt|quot|#39);/g,fs=/[&<>"']/g,Hf=RegExp(cs.source),Yf=RegExp(fs.source),Uf=/<%-([\s\S]+?)%>/g,Vf=/<%([\s\S]+?)%>/g,hs=/<%=([\s\S]+?)%>/g,Gf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jf=/^\w*$/,Qf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oo=/[\\^$.*+?()[\]{}|]/g,Kf=RegExp(oo.source),ao=/^\s+/,Xf=/\s/,Jf=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Zf=/\{\n\/\* \[wrapped with (.+)\] \*/,eh=/,? & /,th=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,nh=/[()=,{}\[\]\/\s]/,rh=/\\(\\)?/g,ih=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ds=/\w*$/,oh=/^[-+]0x[0-9a-f]+$/i,ah=/^0b[01]+$/i,sh=/^\[object .+?Constructor\]$/,uh=/^0o[0-7]+$/i,lh=/^(?:0|[1-9]\d*)$/,ch=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Zr=/($^)/,fh=/['\n\r\u2028\u2029\\]/g,ei="\\ud800-\\udfff",hh="\\u0300-\\u036f",dh="\\ufe20-\\ufe2f",ph="\\u20d0-\\u20ff",ps=hh+dh+ph,gs="\\u2700-\\u27bf",ms="a-z\\xdf-\\xf6\\xf8-\\xff",gh="\\xac\\xb1\\xd7\\xf7",mh="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",yh="\\u2000-\\u206f",bh=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ys="A-Z\\xc0-\\xd6\\xd8-\\xde",bs="\\ufe0e\\ufe0f",ws=gh+mh+yh+bh,so="['’]",wh="["+ei+"]",vs="["+ws+"]",ti="["+ps+"]",xs="\\d+",vh="["+gs+"]",_s="["+ms+"]",ks="[^"+ei+ws+xs+gs+ms+ys+"]",uo="\\ud83c[\\udffb-\\udfff]",xh="(?:"+ti+"|"+uo+")",Ss="[^"+ei+"]",lo="(?:\\ud83c[\\udde6-\\uddff]){2}",co="[\\ud800-\\udbff][\\udc00-\\udfff]",er="["+ys+"]",Is="\\u200d",Cs="(?:"+_s+"|"+ks+")",_h="(?:"+er+"|"+ks+")",Es="(?:"+so+"(?:d|ll|m|re|s|t|ve))?",Ts="(?:"+so+"(?:D|LL|M|RE|S|T|VE))?",As=xh+"?",Ps="["+bs+"]?",kh="(?:"+Is+"(?:"+[Ss,lo,co].join("|")+")"+Ps+As+")*",Sh="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ih="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ms=Ps+As+kh,Ch="(?:"+[vh,lo,co].join("|")+")"+Ms,Eh="(?:"+[Ss+ti+"?",ti,lo,co,wh].join("|")+")",Th=RegExp(so,"g"),Ah=RegExp(ti,"g"),fo=RegExp(uo+"(?="+uo+")|"+Eh+Ms,"g"),Ph=RegExp([er+"?"+_s+"+"+Es+"(?="+[vs,er,"$"].join("|")+")",_h+"+"+Ts+"(?="+[vs,er+Cs,"$"].join("|")+")",er+"?"+Cs+"+"+Es,er+"+"+Ts,Ih,Sh,xs,Ch].join("|"),"g"),Mh=RegExp("["+Is+ei+ps+bs+"]"),Oh=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Fh=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Dh=-1,Ee={};Ee[ae]=Ee[ge]=Ee[Ge]=Ee[Rt]=Ee[ft]=Ee[nn]=Ee[rn]=Ee[qe]=Ee[Yt]=!0,Ee[Xe]=Ee[Oe]=Ee[q]=Ee[Je]=Ee[X]=Ee[xt]=Ee[tn]=Ee[Jn]=Ee[lt]=Ee[bn]=Ee[_t]=Ee[wn]=Ee[ct]=Ee[Rn]=Ee[$n]=!1;var Se={};Se[Xe]=Se[Oe]=Se[q]=Se[X]=Se[Je]=Se[xt]=Se[ae]=Se[ge]=Se[Ge]=Se[Rt]=Se[ft]=Se[lt]=Se[bn]=Se[_t]=Se[wn]=Se[ct]=Se[Rn]=Se[Zn]=Se[nn]=Se[rn]=Se[qe]=Se[Yt]=!0,Se[tn]=Se[Jn]=Se[$n]=!1;var Lh={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Rh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$h={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Bh={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Nh=parseFloat,Wh=parseInt,Os=typeof zi=="object"&&zi&&zi.Object===Object&&zi,zh=typeof self=="object"&&self&&self.Object===Object&&self,He=Os||zh||Function("return this")(),ho=r&&!r.nodeType&&r,Bn=ho&&!0&&t&&!t.nodeType&&t,Fs=Bn&&Bn.exports===ho,po=Fs&&Os.process,kt=(function(){try{var E=Bn&&Bn.require&&Bn.require("util").types;return E||po&&po.binding&&po.binding("util")}catch{}})(),Ds=kt&&kt.isArrayBuffer,Ls=kt&&kt.isDate,Rs=kt&&kt.isMap,$s=kt&&kt.isRegExp,Bs=kt&&kt.isSet,Ns=kt&&kt.isTypedArray;function ht(E,D,O){switch(O.length){case 0:return E.call(D);case 1:return E.call(D,O[0]);case 2:return E.call(D,O[0],O[1]);case 3:return E.call(D,O[0],O[1],O[2])}return E.apply(D,O)}function qh(E,D,O,U){for(var ne=-1,me=E==null?0:E.length;++ne<me;){var $e=E[ne];D(U,$e,O($e),E)}return U}function St(E,D){for(var O=-1,U=E==null?0:E.length;++O<U&&D(E[O],O,E)!==!1;);return E}function Hh(E,D){for(var O=E==null?0:E.length;O--&&D(E[O],O,E)!==!1;);return E}function Ws(E,D){for(var O=-1,U=E==null?0:E.length;++O<U;)if(!D(E[O],O,E))return!1;return!0}function vn(E,D){for(var O=-1,U=E==null?0:E.length,ne=0,me=[];++O<U;){var $e=E[O];D($e,O,E)&&(me[ne++]=$e)}return me}function ni(E,D){var O=E==null?0:E.length;return!!O&&tr(E,D,0)>-1}function go(E,D,O){for(var U=-1,ne=E==null?0:E.length;++U<ne;)if(O(D,E[U]))return!0;return!1}function Te(E,D){for(var O=-1,U=E==null?0:E.length,ne=Array(U);++O<U;)ne[O]=D(E[O],O,E);return ne}function xn(E,D){for(var O=-1,U=D.length,ne=E.length;++O<U;)E[ne+O]=D[O];return E}function mo(E,D,O,U){var ne=-1,me=E==null?0:E.length;for(U&&me&&(O=E[++ne]);++ne<me;)O=D(O,E[ne],ne,E);return O}function Yh(E,D,O,U){var ne=E==null?0:E.length;for(U&&ne&&(O=E[--ne]);ne--;)O=D(O,E[ne],ne,E);return O}function yo(E,D){for(var O=-1,U=E==null?0:E.length;++O<U;)if(D(E[O],O,E))return!0;return!1}var Uh=bo("length");function Vh(E){return E.split("")}function Gh(E){return E.match(th)||[]}function zs(E,D,O){var U;return O(E,function(ne,me,$e){if(D(ne,me,$e))return U=me,!1}),U}function ri(E,D,O,U){for(var ne=E.length,me=O+(U?1:-1);U?me--:++me<ne;)if(D(E[me],me,E))return me;return-1}function tr(E,D,O){return D===D?od(E,D,O):ri(E,qs,O)}function jh(E,D,O,U){for(var ne=O-1,me=E.length;++ne<me;)if(U(E[ne],D))return ne;return-1}function qs(E){return E!==E}function Hs(E,D){var O=E==null?0:E.length;return O?vo(E,D)/O:_}function bo(E){return function(D){return D==null?n:D[E]}}function wo(E){return function(D){return E==null?n:E[D]}}function Ys(E,D,O,U,ne){return ne(E,function(me,$e,_e){O=U?(U=!1,me):D(O,me,$e,_e)}),O}function Qh(E,D){var O=E.length;for(E.sort(D);O--;)E[O]=E[O].value;return E}function vo(E,D){for(var O,U=-1,ne=E.length;++U<ne;){var me=D(E[U]);me!==n&&(O=O===n?me:O+me)}return O}function xo(E,D){for(var O=-1,U=Array(E);++O<E;)U[O]=D(O);return U}function Kh(E,D){return Te(D,function(O){return[O,E[O]]})}function Us(E){return E&&E.slice(0,Qs(E)+1).replace(ao,"")}function dt(E){return function(D){return E(D)}}function _o(E,D){return Te(D,function(O){return E[O]})}function xr(E,D){return E.has(D)}function Vs(E,D){for(var O=-1,U=E.length;++O<U&&tr(D,E[O],0)>-1;);return O}function Gs(E,D){for(var O=E.length;O--&&tr(D,E[O],0)>-1;);return O}function Xh(E,D){for(var O=E.length,U=0;O--;)E[O]===D&&++U;return U}var Jh=wo(Lh),Zh=wo(Rh);function ed(E){return"\\"+Bh[E]}function td(E,D){return E==null?n:E[D]}function nr(E){return Mh.test(E)}function nd(E){return Oh.test(E)}function rd(E){for(var D,O=[];!(D=E.next()).done;)O.push(D.value);return O}function ko(E){var D=-1,O=Array(E.size);return E.forEach(function(U,ne){O[++D]=[ne,U]}),O}function js(E,D){return function(O){return E(D(O))}}function _n(E,D){for(var O=-1,U=E.length,ne=0,me=[];++O<U;){var $e=E[O];($e===D||$e===p)&&(E[O]=p,me[ne++]=O)}return me}function ii(E){var D=-1,O=Array(E.size);return E.forEach(function(U){O[++D]=U}),O}function id(E){var D=-1,O=Array(E.size);return E.forEach(function(U){O[++D]=[U,U]}),O}function od(E,D,O){for(var U=O-1,ne=E.length;++U<ne;)if(E[U]===D)return U;return-1}function ad(E,D,O){for(var U=O+1;U--;)if(E[U]===D)return U;return U}function rr(E){return nr(E)?ud(E):Uh(E)}function Bt(E){return nr(E)?ld(E):Vh(E)}function Qs(E){for(var D=E.length;D--&&Xf.test(E.charAt(D)););return D}var sd=wo($h);function ud(E){for(var D=fo.lastIndex=0;fo.test(E);)++D;return D}function ld(E){return E.match(fo)||[]}function cd(E){return E.match(Ph)||[]}var fd=(function E(D){D=D==null?He:ir.defaults(He.Object(),D,ir.pick(He,Fh));var O=D.Array,U=D.Date,ne=D.Error,me=D.Function,$e=D.Math,_e=D.Object,So=D.RegExp,hd=D.String,It=D.TypeError,oi=O.prototype,dd=me.prototype,or=_e.prototype,ai=D["__core-js_shared__"],si=dd.toString,ve=or.hasOwnProperty,pd=0,Ks=(function(){var e=/[^.]+$/.exec(ai&&ai.keys&&ai.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})(),ui=or.toString,gd=si.call(_e),md=He._,yd=So("^"+si.call(ve).replace(oo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),li=Fs?D.Buffer:n,kn=D.Symbol,ci=D.Uint8Array,Xs=li?li.allocUnsafe:n,fi=js(_e.getPrototypeOf,_e),Js=_e.create,Zs=or.propertyIsEnumerable,hi=oi.splice,eu=kn?kn.isConcatSpreadable:n,_r=kn?kn.iterator:n,Nn=kn?kn.toStringTag:n,di=(function(){try{var e=Yn(_e,"defineProperty");return e({},"",{}),e}catch{}})(),bd=D.clearTimeout!==He.clearTimeout&&D.clearTimeout,wd=U&&U.now!==He.Date.now&&U.now,vd=D.setTimeout!==He.setTimeout&&D.setTimeout,pi=$e.ceil,gi=$e.floor,Io=_e.getOwnPropertySymbols,xd=li?li.isBuffer:n,tu=D.isFinite,_d=oi.join,kd=js(_e.keys,_e),Be=$e.max,Ue=$e.min,Sd=U.now,Id=D.parseInt,nu=$e.random,Cd=oi.reverse,Co=Yn(D,"DataView"),kr=Yn(D,"Map"),Eo=Yn(D,"Promise"),ar=Yn(D,"Set"),Sr=Yn(D,"WeakMap"),Ir=Yn(_e,"create"),mi=Sr&&new Sr,sr={},Ed=Un(Co),Td=Un(kr),Ad=Un(Eo),Pd=Un(ar),Md=Un(Sr),yi=kn?kn.prototype:n,Cr=yi?yi.valueOf:n,ru=yi?yi.toString:n;function w(e){if(Fe(e)&&!re(e)&&!(e instanceof fe)){if(e instanceof Ct)return e;if(ve.call(e,"__wrapped__"))return il(e)}return new Ct(e)}var ur=(function(){function e(){}return function(i){if(!Pe(i))return{};if(Js)return Js(i);e.prototype=i;var u=new e;return e.prototype=n,u}})();function bi(){}function Ct(e,i){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=n}w.templateSettings={escape:Uf,evaluate:Vf,interpolate:hs,variable:"",imports:{_:w}},w.prototype=bi.prototype,w.prototype.constructor=w,Ct.prototype=ur(bi.prototype),Ct.prototype.constructor=Ct;function fe(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Me,this.__views__=[]}function Od(){var e=new fe(this.__wrapped__);return e.__actions__=Ze(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ze(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ze(this.__views__),e}function Fd(){if(this.__filtered__){var e=new fe(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Dd(){var e=this.__wrapped__.value(),i=this.__dir__,u=re(e),d=i<0,m=u?e.length:0,v=Vp(0,m,this.__views__),x=v.start,k=v.end,T=k-x,R=d?k:x-1,B=this.__iteratees__,W=B.length,H=0,V=Ue(T,this.__takeCount__);if(!u||!d&&m==T&&V==T)return Eu(e,this.__actions__);var J=[];e:for(;T--&&H<V;){R+=i;for(var oe=-1,Z=e[R];++oe<W;){var le=B[oe],de=le.iteratee,mt=le.type,Ke=de(Z);if(mt==he)Z=Ke;else if(!Ke){if(mt==Ae)continue e;break e}}J[H++]=Z}return J}fe.prototype=ur(bi.prototype),fe.prototype.constructor=fe;function Wn(e){var i=-1,u=e==null?0:e.length;for(this.clear();++i<u;){var d=e[i];this.set(d[0],d[1])}}function Ld(){this.__data__=Ir?Ir(null):{},this.size=0}function Rd(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}function $d(e){var i=this.__data__;if(Ir){var u=i[e];return u===f?n:u}return ve.call(i,e)?i[e]:n}function Bd(e){var i=this.__data__;return Ir?i[e]!==n:ve.call(i,e)}function Nd(e,i){var u=this.__data__;return this.size+=this.has(e)?0:1,u[e]=Ir&&i===n?f:i,this}Wn.prototype.clear=Ld,Wn.prototype.delete=Rd,Wn.prototype.get=$d,Wn.prototype.has=Bd,Wn.prototype.set=Nd;function on(e){var i=-1,u=e==null?0:e.length;for(this.clear();++i<u;){var d=e[i];this.set(d[0],d[1])}}function Wd(){this.__data__=[],this.size=0}function zd(e){var i=this.__data__,u=wi(i,e);if(u<0)return!1;var d=i.length-1;return u==d?i.pop():hi.call(i,u,1),--this.size,!0}function qd(e){var i=this.__data__,u=wi(i,e);return u<0?n:i[u][1]}function Hd(e){return wi(this.__data__,e)>-1}function Yd(e,i){var u=this.__data__,d=wi(u,e);return d<0?(++this.size,u.push([e,i])):u[d][1]=i,this}on.prototype.clear=Wd,on.prototype.delete=zd,on.prototype.get=qd,on.prototype.has=Hd,on.prototype.set=Yd;function an(e){var i=-1,u=e==null?0:e.length;for(this.clear();++i<u;){var d=e[i];this.set(d[0],d[1])}}function Ud(){this.size=0,this.__data__={hash:new Wn,map:new(kr||on),string:new Wn}}function Vd(e){var i=Mi(this,e).delete(e);return this.size-=i?1:0,i}function Gd(e){return Mi(this,e).get(e)}function jd(e){return Mi(this,e).has(e)}function Qd(e,i){var u=Mi(this,e),d=u.size;return u.set(e,i),this.size+=u.size==d?0:1,this}an.prototype.clear=Ud,an.prototype.delete=Vd,an.prototype.get=Gd,an.prototype.has=jd,an.prototype.set=Qd;function zn(e){var i=-1,u=e==null?0:e.length;for(this.__data__=new an;++i<u;)this.add(e[i])}function Kd(e){return this.__data__.set(e,f),this}function Xd(e){return this.__data__.has(e)}zn.prototype.add=zn.prototype.push=Kd,zn.prototype.has=Xd;function Nt(e){var i=this.__data__=new on(e);this.size=i.size}function Jd(){this.__data__=new on,this.size=0}function Zd(e){var i=this.__data__,u=i.delete(e);return this.size=i.size,u}function ep(e){return this.__data__.get(e)}function tp(e){return this.__data__.has(e)}function np(e,i){var u=this.__data__;if(u instanceof on){var d=u.__data__;if(!kr||d.length<o-1)return d.push([e,i]),this.size=++u.size,this;u=this.__data__=new an(d)}return u.set(e,i),this.size=u.size,this}Nt.prototype.clear=Jd,Nt.prototype.delete=Zd,Nt.prototype.get=ep,Nt.prototype.has=tp,Nt.prototype.set=np;function iu(e,i){var u=re(e),d=!u&&Vn(e),m=!u&&!d&&Tn(e),v=!u&&!d&&!m&&hr(e),x=u||d||m||v,k=x?xo(e.length,hd):[],T=k.length;for(var R in e)(i||ve.call(e,R))&&!(x&&(R=="length"||m&&(R=="offset"||R=="parent")||v&&(R=="buffer"||R=="byteLength"||R=="byteOffset")||cn(R,T)))&&k.push(R);return k}function ou(e){var i=e.length;return i?e[Bo(0,i-1)]:n}function rp(e,i){return Oi(Ze(e),qn(i,0,e.length))}function ip(e){return Oi(Ze(e))}function To(e,i,u){(u!==n&&!Wt(e[i],u)||u===n&&!(i in e))&&sn(e,i,u)}function Er(e,i,u){var d=e[i];(!(ve.call(e,i)&&Wt(d,u))||u===n&&!(i in e))&&sn(e,i,u)}function wi(e,i){for(var u=e.length;u--;)if(Wt(e[u][0],i))return u;return-1}function op(e,i,u,d){return Sn(e,function(m,v,x){i(d,m,u(m),x)}),d}function au(e,i){return e&&Vt(i,ze(i),e)}function ap(e,i){return e&&Vt(i,tt(i),e)}function sn(e,i,u){i=="__proto__"&&di?di(e,i,{configurable:!0,enumerable:!0,value:u,writable:!0}):e[i]=u}function Ao(e,i){for(var u=-1,d=i.length,m=O(d),v=e==null;++u<d;)m[u]=v?n:la(e,i[u]);return m}function qn(e,i,u){return e===e&&(u!==n&&(e=e<=u?e:u),i!==n&&(e=e>=i?e:i)),e}function Et(e,i,u,d,m,v){var x,k=i&g,T=i&b,R=i&y;if(u&&(x=m?u(e,d,m,v):u(e)),x!==n)return x;if(!Pe(e))return e;var B=re(e);if(B){if(x=jp(e),!k)return Ze(e,x)}else{var W=Ve(e),H=W==Jn||W==Qr;if(Tn(e))return Pu(e,k);if(W==_t||W==Xe||H&&!m){if(x=T||H?{}:Qu(e),!k)return T?$p(e,ap(x,e)):Rp(e,au(x,e))}else{if(!Se[W])return m?e:{};x=Qp(e,W,k)}}v||(v=new Nt);var V=v.get(e);if(V)return V;v.set(e,x),Sl(e)?e.forEach(function(Z){x.add(Et(Z,i,u,Z,e,v))}):_l(e)&&e.forEach(function(Z,le){x.set(le,Et(Z,i,u,le,e,v))});var J=R?T?Qo:jo:T?tt:ze,oe=B?n:J(e);return St(oe||e,function(Z,le){oe&&(le=Z,Z=e[le]),Er(x,le,Et(Z,i,u,le,e,v))}),x}function sp(e){var i=ze(e);return function(u){return su(u,e,i)}}function su(e,i,u){var d=u.length;if(e==null)return!d;for(e=_e(e);d--;){var m=u[d],v=i[m],x=e[m];if(x===n&&!(m in e)||!v(x))return!1}return!0}function uu(e,i,u){if(typeof e!="function")throw new It(l);return Dr(function(){e.apply(n,u)},i)}function Tr(e,i,u,d){var m=-1,v=ni,x=!0,k=e.length,T=[],R=i.length;if(!k)return T;u&&(i=Te(i,dt(u))),d?(v=go,x=!1):i.length>=o&&(v=xr,x=!1,i=new zn(i));e:for(;++m<k;){var B=e[m],W=u==null?B:u(B);if(B=d||B!==0?B:0,x&&W===W){for(var H=R;H--;)if(i[H]===W)continue e;T.push(B)}else v(i,W,d)||T.push(B)}return T}var Sn=Lu(Ut),lu=Lu(Mo,!0);function up(e,i){var u=!0;return Sn(e,function(d,m,v){return u=!!i(d,m,v),u}),u}function vi(e,i,u){for(var d=-1,m=e.length;++d<m;){var v=e[d],x=i(v);if(x!=null&&(k===n?x===x&&!gt(x):u(x,k)))var k=x,T=v}return T}function lp(e,i,u,d){var m=e.length;for(u=ie(u),u<0&&(u=-u>m?0:m+u),d=d===n||d>m?m:ie(d),d<0&&(d+=m),d=u>d?0:Cl(d);u<d;)e[u++]=i;return e}function cu(e,i){var u=[];return Sn(e,function(d,m,v){i(d,m,v)&&u.push(d)}),u}function Ye(e,i,u,d,m){var v=-1,x=e.length;for(u||(u=Xp),m||(m=[]);++v<x;){var k=e[v];i>0&&u(k)?i>1?Ye(k,i-1,u,d,m):xn(m,k):d||(m[m.length]=k)}return m}var Po=Ru(),fu=Ru(!0);function Ut(e,i){return e&&Po(e,i,ze)}function Mo(e,i){return e&&fu(e,i,ze)}function xi(e,i){return vn(i,function(u){return fn(e[u])})}function Hn(e,i){i=Cn(i,e);for(var u=0,d=i.length;e!=null&&u<d;)e=e[Gt(i[u++])];return u&&u==d?e:n}function hu(e,i,u){var d=i(e);return re(e)?d:xn(d,u(e))}function je(e){return e==null?e===n?io:Kr:Nn&&Nn in _e(e)?Up(e):ig(e)}function Oo(e,i){return e>i}function cp(e,i){return e!=null&&ve.call(e,i)}function fp(e,i){return e!=null&&i in _e(e)}function hp(e,i,u){return e>=Ue(i,u)&&e<Be(i,u)}function Fo(e,i,u){for(var d=u?go:ni,m=e[0].length,v=e.length,x=v,k=O(v),T=1/0,R=[];x--;){var B=e[x];x&&i&&(B=Te(B,dt(i))),T=Ue(B.length,T),k[x]=!u&&(i||m>=120&&B.length>=120)?new zn(x&&B):n}B=e[0];var W=-1,H=k[0];e:for(;++W<m&&R.length<T;){var V=B[W],J=i?i(V):V;if(V=u||V!==0?V:0,!(H?xr(H,J):d(R,J,u))){for(x=v;--x;){var oe=k[x];if(!(oe?xr(oe,J):d(e[x],J,u)))continue e}H&&H.push(J),R.push(V)}}return R}function dp(e,i,u,d){return Ut(e,function(m,v,x){i(d,u(m),v,x)}),d}function Ar(e,i,u){i=Cn(i,e),e=Zu(e,i);var d=e==null?e:e[Gt(At(i))];return d==null?n:ht(d,e,u)}function du(e){return Fe(e)&&je(e)==Xe}function pp(e){return Fe(e)&&je(e)==q}function gp(e){return Fe(e)&&je(e)==xt}function Pr(e,i,u,d,m){return e===i?!0:e==null||i==null||!Fe(e)&&!Fe(i)?e!==e&&i!==i:mp(e,i,u,d,Pr,m)}function mp(e,i,u,d,m,v){var x=re(e),k=re(i),T=x?Oe:Ve(e),R=k?Oe:Ve(i);T=T==Xe?_t:T,R=R==Xe?_t:R;var B=T==_t,W=R==_t,H=T==R;if(H&&Tn(e)){if(!Tn(i))return!1;x=!0,B=!1}if(H&&!B)return v||(v=new Nt),x||hr(e)?Vu(e,i,u,d,m,v):Hp(e,i,T,u,d,m,v);if(!(u&C)){var V=B&&ve.call(e,"__wrapped__"),J=W&&ve.call(i,"__wrapped__");if(V||J){var oe=V?e.value():e,Z=J?i.value():i;return v||(v=new Nt),m(oe,Z,u,d,v)}}return H?(v||(v=new Nt),Yp(e,i,u,d,m,v)):!1}function yp(e){return Fe(e)&&Ve(e)==lt}function Do(e,i,u,d){var m=u.length,v=m,x=!d;if(e==null)return!v;for(e=_e(e);m--;){var k=u[m];if(x&&k[2]?k[1]!==e[k[0]]:!(k[0]in e))return!1}for(;++m<v;){k=u[m];var T=k[0],R=e[T],B=k[1];if(x&&k[2]){if(R===n&&!(T in e))return!1}else{var W=new Nt;if(d)var H=d(R,B,T,e,i,W);if(!(H===n?Pr(B,R,C|I,d,W):H))return!1}}return!0}function pu(e){if(!Pe(e)||Zp(e))return!1;var i=fn(e)?yd:sh;return i.test(Un(e))}function bp(e){return Fe(e)&&je(e)==wn}function wp(e){return Fe(e)&&Ve(e)==ct}function vp(e){return Fe(e)&&Bi(e.length)&&!!Ee[je(e)]}function gu(e){return typeof e=="function"?e:e==null?nt:typeof e=="object"?re(e)?bu(e[0],e[1]):yu(e):$l(e)}function Lo(e){if(!Fr(e))return kd(e);var i=[];for(var u in _e(e))ve.call(e,u)&&u!="constructor"&&i.push(u);return i}function xp(e){if(!Pe(e))return rg(e);var i=Fr(e),u=[];for(var d in e)d=="constructor"&&(i||!ve.call(e,d))||u.push(d);return u}function Ro(e,i){return e<i}function mu(e,i){var u=-1,d=et(e)?O(e.length):[];return Sn(e,function(m,v,x){d[++u]=i(m,v,x)}),d}function yu(e){var i=Xo(e);return i.length==1&&i[0][2]?Xu(i[0][0],i[0][1]):function(u){return u===e||Do(u,e,i)}}function bu(e,i){return Zo(e)&&Ku(i)?Xu(Gt(e),i):function(u){var d=la(u,e);return d===n&&d===i?ca(u,e):Pr(i,d,C|I)}}function _i(e,i,u,d,m){e!==i&&Po(i,function(v,x){if(m||(m=new Nt),Pe(v))_p(e,i,x,u,_i,d,m);else{var k=d?d(ta(e,x),v,x+"",e,i,m):n;k===n&&(k=v),To(e,x,k)}},tt)}function _p(e,i,u,d,m,v,x){var k=ta(e,u),T=ta(i,u),R=x.get(T);if(R){To(e,u,R);return}var B=v?v(k,T,u+"",e,i,x):n,W=B===n;if(W){var H=re(T),V=!H&&Tn(T),J=!H&&!V&&hr(T);B=T,H||V||J?re(k)?B=k:De(k)?B=Ze(k):V?(W=!1,B=Pu(T,!0)):J?(W=!1,B=Mu(T,!0)):B=[]:Lr(T)||Vn(T)?(B=k,Vn(k)?B=El(k):(!Pe(k)||fn(k))&&(B=Qu(T))):W=!1}W&&(x.set(T,B),m(B,T,d,v,x),x.delete(T)),To(e,u,B)}function wu(e,i){var u=e.length;if(u)return i+=i<0?u:0,cn(i,u)?e[i]:n}function vu(e,i,u){i.length?i=Te(i,function(v){return re(v)?function(x){return Hn(x,v.length===1?v[0]:v)}:v}):i=[nt];var d=-1;i=Te(i,dt(K()));var m=mu(e,function(v,x,k){var T=Te(i,function(R){return R(v)});return{criteria:T,index:++d,value:v}});return Qh(m,function(v,x){return Lp(v,x,u)})}function kp(e,i){return xu(e,i,function(u,d){return ca(e,d)})}function xu(e,i,u){for(var d=-1,m=i.length,v={};++d<m;){var x=i[d],k=Hn(e,x);u(k,x)&&Mr(v,Cn(x,e),k)}return v}function Sp(e){return function(i){return Hn(i,e)}}function $o(e,i,u,d){var m=d?jh:tr,v=-1,x=i.length,k=e;for(e===i&&(i=Ze(i)),u&&(k=Te(e,dt(u)));++v<x;)for(var T=0,R=i[v],B=u?u(R):R;(T=m(k,B,T,d))>-1;)k!==e&&hi.call(k,T,1),hi.call(e,T,1);return e}function _u(e,i){for(var u=e?i.length:0,d=u-1;u--;){var m=i[u];if(u==d||m!==v){var v=m;cn(m)?hi.call(e,m,1):zo(e,m)}}return e}function Bo(e,i){return e+gi(nu()*(i-e+1))}function Ip(e,i,u,d){for(var m=-1,v=Be(pi((i-e)/(u||1)),0),x=O(v);v--;)x[d?v:++m]=e,e+=u;return x}function No(e,i){var u="";if(!e||i<1||i>Re)return u;do i%2&&(u+=e),i=gi(i/2),i&&(e+=e);while(i);return u}function se(e,i){return na(Ju(e,i,nt),e+"")}function Cp(e){return ou(dr(e))}function Ep(e,i){var u=dr(e);return Oi(u,qn(i,0,u.length))}function Mr(e,i,u,d){if(!Pe(e))return e;i=Cn(i,e);for(var m=-1,v=i.length,x=v-1,k=e;k!=null&&++m<v;){var T=Gt(i[m]),R=u;if(T==="__proto__"||T==="constructor"||T==="prototype")return e;if(m!=x){var B=k[T];R=d?d(B,T,k):n,R===n&&(R=Pe(B)?B:cn(i[m+1])?[]:{})}Er(k,T,R),k=k[T]}return e}var ku=mi?function(e,i){return mi.set(e,i),e}:nt,Tp=di?function(e,i){return di(e,"toString",{configurable:!0,enumerable:!1,value:ha(i),writable:!0})}:nt;function Ap(e){return Oi(dr(e))}function Tt(e,i,u){var d=-1,m=e.length;i<0&&(i=-i>m?0:m+i),u=u>m?m:u,u<0&&(u+=m),m=i>u?0:u-i>>>0,i>>>=0;for(var v=O(m);++d<m;)v[d]=e[d+i];return v}function Pp(e,i){var u;return Sn(e,function(d,m,v){return u=i(d,m,v),!u}),!!u}function ki(e,i,u){var d=0,m=e==null?d:e.length;if(typeof i=="number"&&i===i&&m<=S){for(;d<m;){var v=d+m>>>1,x=e[v];x!==null&&!gt(x)&&(u?x<=i:x<i)?d=v+1:m=v}return m}return Wo(e,i,nt,u)}function Wo(e,i,u,d){var m=0,v=e==null?0:e.length;if(v===0)return 0;i=u(i);for(var x=i!==i,k=i===null,T=gt(i),R=i===n;m<v;){var B=gi((m+v)/2),W=u(e[B]),H=W!==n,V=W===null,J=W===W,oe=gt(W);if(x)var Z=d||J;else R?Z=J&&(d||H):k?Z=J&&H&&(d||!V):T?Z=J&&H&&!V&&(d||!oe):V||oe?Z=!1:Z=d?W<=i:W<i;Z?m=B+1:v=B}return Ue(v,Lt)}function Su(e,i){for(var u=-1,d=e.length,m=0,v=[];++u<d;){var x=e[u],k=i?i(x):x;if(!u||!Wt(k,T)){var T=k;v[m++]=x===0?0:x}}return v}function Iu(e){return typeof e=="number"?e:gt(e)?_:+e}function pt(e){if(typeof e=="string")return e;if(re(e))return Te(e,pt)+"";if(gt(e))return ru?ru.call(e):"";var i=e+"";return i=="0"&&1/e==-Ce?"-0":i}function In(e,i,u){var d=-1,m=ni,v=e.length,x=!0,k=[],T=k;if(u)x=!1,m=go;else if(v>=o){var R=i?null:zp(e);if(R)return ii(R);x=!1,m=xr,T=new zn}else T=i?[]:k;e:for(;++d<v;){var B=e[d],W=i?i(B):B;if(B=u||B!==0?B:0,x&&W===W){for(var H=T.length;H--;)if(T[H]===W)continue e;i&&T.push(W),k.push(B)}else m(T,W,u)||(T!==k&&T.push(W),k.push(B))}return k}function zo(e,i){return i=Cn(i,e),e=Zu(e,i),e==null||delete e[Gt(At(i))]}function Cu(e,i,u,d){return Mr(e,i,u(Hn(e,i)),d)}function Si(e,i,u,d){for(var m=e.length,v=d?m:-1;(d?v--:++v<m)&&i(e[v],v,e););return u?Tt(e,d?0:v,d?v+1:m):Tt(e,d?v+1:0,d?m:v)}function Eu(e,i){var u=e;return u instanceof fe&&(u=u.value()),mo(i,function(d,m){return m.func.apply(m.thisArg,xn([d],m.args))},u)}function qo(e,i,u){var d=e.length;if(d<2)return d?In(e[0]):[];for(var m=-1,v=O(d);++m<d;)for(var x=e[m],k=-1;++k<d;)k!=m&&(v[m]=Tr(v[m]||x,e[k],i,u));return In(Ye(v,1),i,u)}function Tu(e,i,u){for(var d=-1,m=e.length,v=i.length,x={};++d<m;){var k=d<v?i[d]:n;u(x,e[d],k)}return x}function Ho(e){return De(e)?e:[]}function Yo(e){return typeof e=="function"?e:nt}function Cn(e,i){return re(e)?e:Zo(e,i)?[e]:rl(we(e))}var Mp=se;function En(e,i,u){var d=e.length;return u=u===n?d:u,!i&&u>=d?e:Tt(e,i,u)}var Au=bd||function(e){return He.clearTimeout(e)};function Pu(e,i){if(i)return e.slice();var u=e.length,d=Xs?Xs(u):new e.constructor(u);return e.copy(d),d}function Uo(e){var i=new e.constructor(e.byteLength);return new ci(i).set(new ci(e)),i}function Op(e,i){var u=i?Uo(e.buffer):e.buffer;return new e.constructor(u,e.byteOffset,e.byteLength)}function Fp(e){var i=new e.constructor(e.source,ds.exec(e));return i.lastIndex=e.lastIndex,i}function Dp(e){return Cr?_e(Cr.call(e)):{}}function Mu(e,i){var u=i?Uo(e.buffer):e.buffer;return new e.constructor(u,e.byteOffset,e.length)}function Ou(e,i){if(e!==i){var u=e!==n,d=e===null,m=e===e,v=gt(e),x=i!==n,k=i===null,T=i===i,R=gt(i);if(!k&&!R&&!v&&e>i||v&&x&&T&&!k&&!R||d&&x&&T||!u&&T||!m)return 1;if(!d&&!v&&!R&&e<i||R&&u&&m&&!d&&!v||k&&u&&m||!x&&m||!T)return-1}return 0}function Lp(e,i,u){for(var d=-1,m=e.criteria,v=i.criteria,x=m.length,k=u.length;++d<x;){var T=Ou(m[d],v[d]);if(T){if(d>=k)return T;var R=u[d];return T*(R=="desc"?-1:1)}}return e.index-i.index}function Fu(e,i,u,d){for(var m=-1,v=e.length,x=u.length,k=-1,T=i.length,R=Be(v-x,0),B=O(T+R),W=!d;++k<T;)B[k]=i[k];for(;++m<x;)(W||m<v)&&(B[u[m]]=e[m]);for(;R--;)B[k++]=e[m++];return B}function Du(e,i,u,d){for(var m=-1,v=e.length,x=-1,k=u.length,T=-1,R=i.length,B=Be(v-k,0),W=O(B+R),H=!d;++m<B;)W[m]=e[m];for(var V=m;++T<R;)W[V+T]=i[T];for(;++x<k;)(H||m<v)&&(W[V+u[x]]=e[m++]);return W}function Ze(e,i){var u=-1,d=e.length;for(i||(i=O(d));++u<d;)i[u]=e[u];return i}function Vt(e,i,u,d){var m=!u;u||(u={});for(var v=-1,x=i.length;++v<x;){var k=i[v],T=d?d(u[k],e[k],k,u,e):n;T===n&&(T=e[k]),m?sn(u,k,T):Er(u,k,T)}return u}function Rp(e,i){return Vt(e,Jo(e),i)}function $p(e,i){return Vt(e,Gu(e),i)}function Ii(e,i){return function(u,d){var m=re(u)?qh:op,v=i?i():{};return m(u,e,K(d,2),v)}}function lr(e){return se(function(i,u){var d=-1,m=u.length,v=m>1?u[m-1]:n,x=m>2?u[2]:n;for(v=e.length>3&&typeof v=="function"?(m--,v):n,x&&Qe(u[0],u[1],x)&&(v=m<3?n:v,m=1),i=_e(i);++d<m;){var k=u[d];k&&e(i,k,d,v)}return i})}function Lu(e,i){return function(u,d){if(u==null)return u;if(!et(u))return e(u,d);for(var m=u.length,v=i?m:-1,x=_e(u);(i?v--:++v<m)&&d(x[v],v,x)!==!1;);return u}}function Ru(e){return function(i,u,d){for(var m=-1,v=_e(i),x=d(i),k=x.length;k--;){var T=x[e?k:++m];if(u(v[T],T,v)===!1)break}return i}}function Bp(e,i,u){var d=i&M,m=Or(e);function v(){var x=this&&this!==He&&this instanceof v?m:e;return x.apply(d?u:this,arguments)}return v}function $u(e){return function(i){i=we(i);var u=nr(i)?Bt(i):n,d=u?u[0]:i.charAt(0),m=u?En(u,1).join(""):i.slice(1);return d[e]()+m}}function cr(e){return function(i){return mo(Ll(Dl(i).replace(Th,"")),e,"")}}function Or(e){return function(){var i=arguments;switch(i.length){case 0:return new e;case 1:return new e(i[0]);case 2:return new e(i[0],i[1]);case 3:return new e(i[0],i[1],i[2]);case 4:return new e(i[0],i[1],i[2],i[3]);case 5:return new e(i[0],i[1],i[2],i[3],i[4]);case 6:return new e(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new e(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var u=ur(e.prototype),d=e.apply(u,i);return Pe(d)?d:u}}function Np(e,i,u){var d=Or(e);function m(){for(var v=arguments.length,x=O(v),k=v,T=fr(m);k--;)x[k]=arguments[k];var R=v<3&&x[0]!==T&&x[v-1]!==T?[]:_n(x,T);if(v-=R.length,v<u)return qu(e,i,Ci,m.placeholder,n,x,R,n,n,u-v);var B=this&&this!==He&&this instanceof m?d:e;return ht(B,this,x)}return m}function Bu(e){return function(i,u,d){var m=_e(i);if(!et(i)){var v=K(u,3);i=ze(i),u=function(k){return v(m[k],k,m)}}var x=e(i,u,d);return x>-1?m[v?i[x]:x]:n}}function Nu(e){return ln(function(i){var u=i.length,d=u,m=Ct.prototype.thru;for(e&&i.reverse();d--;){var v=i[d];if(typeof v!="function")throw new It(l);if(m&&!x&&Pi(v)=="wrapper")var x=new Ct([],!0)}for(d=x?d:u;++d<u;){v=i[d];var k=Pi(v),T=k=="wrapper"?Ko(v):n;T&&ea(T[0])&&T[1]==(Y|N|F|G)&&!T[4].length&&T[9]==1?x=x[Pi(T[0])].apply(x,T[3]):x=v.length==1&&ea(v)?x[k]():x.thru(v)}return function(){var R=arguments,B=R[0];if(x&&R.length==1&&re(B))return x.plant(B).value();for(var W=0,H=u?i[W].apply(this,R):B;++W<u;)H=i[W].call(this,H);return H}})}function Ci(e,i,u,d,m,v,x,k,T,R){var B=i&Y,W=i&M,H=i&P,V=i&(N|z),J=i&ee,oe=H?n:Or(e);function Z(){for(var le=arguments.length,de=O(le),mt=le;mt--;)de[mt]=arguments[mt];if(V)var Ke=fr(Z),yt=Xh(de,Ke);if(d&&(de=Fu(de,d,m,V)),v&&(de=Du(de,v,x,V)),le-=yt,V&&le<R){var Le=_n(de,Ke);return qu(e,i,Ci,Z.placeholder,u,de,Le,k,T,R-le)}var zt=W?u:this,dn=H?zt[e]:e;return le=de.length,k?de=og(de,k):J&&le>1&&de.reverse(),B&&T<le&&(de.length=T),this&&this!==He&&this instanceof Z&&(dn=oe||Or(dn)),dn.apply(zt,de)}return Z}function Wu(e,i){return function(u,d){return dp(u,e,i(d),{})}}function Ei(e,i){return function(u,d){var m;if(u===n&&d===n)return i;if(u!==n&&(m=u),d!==n){if(m===n)return d;typeof u=="string"||typeof d=="string"?(u=pt(u),d=pt(d)):(u=Iu(u),d=Iu(d)),m=e(u,d)}return m}}function Vo(e){return ln(function(i){return i=Te(i,dt(K())),se(function(u){var d=this;return e(i,function(m){return ht(m,d,u)})})})}function Ti(e,i){i=i===n?" ":pt(i);var u=i.length;if(u<2)return u?No(i,e):i;var d=No(i,pi(e/rr(i)));return nr(i)?En(Bt(d),0,e).join(""):d.slice(0,e)}function Wp(e,i,u,d){var m=i&M,v=Or(e);function x(){for(var k=-1,T=arguments.length,R=-1,B=d.length,W=O(B+T),H=this&&this!==He&&this instanceof x?v:e;++R<B;)W[R]=d[R];for(;T--;)W[R++]=arguments[++k];return ht(H,m?u:this,W)}return x}function zu(e){return function(i,u,d){return d&&typeof d!="number"&&Qe(i,u,d)&&(u=d=n),i=hn(i),u===n?(u=i,i=0):u=hn(u),d=d===n?i<u?1:-1:hn(d),Ip(i,u,d,e)}}function Ai(e){return function(i,u){return typeof i=="string"&&typeof u=="string"||(i=Pt(i),u=Pt(u)),e(i,u)}}function qu(e,i,u,d,m,v,x,k,T,R){var B=i&N,W=B?x:n,H=B?n:x,V=B?v:n,J=B?n:v;i|=B?F:A,i&=~(B?A:F),i&$||(i&=-4);var oe=[e,i,m,V,W,J,H,k,T,R],Z=u.apply(n,oe);return ea(e)&&el(Z,oe),Z.placeholder=d,tl(Z,e,i)}function Go(e){var i=$e[e];return function(u,d){if(u=Pt(u),d=d==null?0:Ue(ie(d),292),d&&tu(u)){var m=(we(u)+"e").split("e"),v=i(m[0]+"e"+(+m[1]+d));return m=(we(v)+"e").split("e"),+(m[0]+"e"+(+m[1]-d))}return i(u)}}var zp=ar&&1/ii(new ar([,-0]))[1]==Ce?function(e){return new ar(e)}:ga;function Hu(e){return function(i){var u=Ve(i);return u==lt?ko(i):u==ct?id(i):Kh(i,e(i))}}function un(e,i,u,d,m,v,x,k){var T=i&P;if(!T&&typeof e!="function")throw new It(l);var R=d?d.length:0;if(R||(i&=-97,d=m=n),x=x===n?x:Be(ie(x),0),k=k===n?k:ie(k),R-=m?m.length:0,i&A){var B=d,W=m;d=m=n}var H=T?n:Ko(e),V=[e,i,u,d,m,B,W,v,x,k];if(H&&ng(V,H),e=V[0],i=V[1],u=V[2],d=V[3],m=V[4],k=V[9]=V[9]===n?T?0:e.length:Be(V[9]-R,0),!k&&i&(N|z)&&(i&=-25),!i||i==M)var J=Bp(e,i,u);else i==N||i==z?J=Np(e,i,k):(i==F||i==(M|F))&&!m.length?J=Wp(e,i,u,d):J=Ci.apply(n,V);var oe=H?ku:el;return tl(oe(J,V),e,i)}function Yu(e,i,u,d){return e===n||Wt(e,or[u])&&!ve.call(d,u)?i:e}function Uu(e,i,u,d,m,v){return Pe(e)&&Pe(i)&&(v.set(i,e),_i(e,i,n,Uu,v),v.delete(i)),e}function qp(e){return Lr(e)?n:e}function Vu(e,i,u,d,m,v){var x=u&C,k=e.length,T=i.length;if(k!=T&&!(x&&T>k))return!1;var R=v.get(e),B=v.get(i);if(R&&B)return R==i&&B==e;var W=-1,H=!0,V=u&I?new zn:n;for(v.set(e,i),v.set(i,e);++W<k;){var J=e[W],oe=i[W];if(d)var Z=x?d(oe,J,W,i,e,v):d(J,oe,W,e,i,v);if(Z!==n){if(Z)continue;H=!1;break}if(V){if(!yo(i,function(le,de){if(!xr(V,de)&&(J===le||m(J,le,u,d,v)))return V.push(de)})){H=!1;break}}else if(!(J===oe||m(J,oe,u,d,v))){H=!1;break}}return v.delete(e),v.delete(i),H}function Hp(e,i,u,d,m,v,x){switch(u){case X:if(e.byteLength!=i.byteLength||e.byteOffset!=i.byteOffset)return!1;e=e.buffer,i=i.buffer;case q:return!(e.byteLength!=i.byteLength||!v(new ci(e),new ci(i)));case Je:case xt:case bn:return Wt(+e,+i);case tn:return e.name==i.name&&e.message==i.message;case wn:case Rn:return e==i+"";case lt:var k=ko;case ct:var T=d&C;if(k||(k=ii),e.size!=i.size&&!T)return!1;var R=x.get(e);if(R)return R==i;d|=I,x.set(e,i);var B=Vu(k(e),k(i),d,m,v,x);return x.delete(e),B;case Zn:if(Cr)return Cr.call(e)==Cr.call(i)}return!1}function Yp(e,i,u,d,m,v){var x=u&C,k=jo(e),T=k.length,R=jo(i),B=R.length;if(T!=B&&!x)return!1;for(var W=T;W--;){var H=k[W];if(!(x?H in i:ve.call(i,H)))return!1}var V=v.get(e),J=v.get(i);if(V&&J)return V==i&&J==e;var oe=!0;v.set(e,i),v.set(i,e);for(var Z=x;++W<T;){H=k[W];var le=e[H],de=i[H];if(d)var mt=x?d(de,le,H,i,e,v):d(le,de,H,e,i,v);if(!(mt===n?le===de||m(le,de,u,d,v):mt)){oe=!1;break}Z||(Z=H=="constructor")}if(oe&&!Z){var Ke=e.constructor,yt=i.constructor;Ke!=yt&&"constructor"in e&&"constructor"in i&&!(typeof Ke=="function"&&Ke instanceof Ke&&typeof yt=="function"&&yt instanceof yt)&&(oe=!1)}return v.delete(e),v.delete(i),oe}function ln(e){return na(Ju(e,n,sl),e+"")}function jo(e){return hu(e,ze,Jo)}function Qo(e){return hu(e,tt,Gu)}var Ko=mi?function(e){return mi.get(e)}:ga;function Pi(e){for(var i=e.name+"",u=sr[i],d=ve.call(sr,i)?u.length:0;d--;){var m=u[d],v=m.func;if(v==null||v==e)return m.name}return i}function fr(e){var i=ve.call(w,"placeholder")?w:e;return i.placeholder}function K(){var e=w.iteratee||da;return e=e===da?gu:e,arguments.length?e(arguments[0],arguments[1]):e}function Mi(e,i){var u=e.__data__;return Jp(i)?u[typeof i=="string"?"string":"hash"]:u.map}function Xo(e){for(var i=ze(e),u=i.length;u--;){var d=i[u],m=e[d];i[u]=[d,m,Ku(m)]}return i}function Yn(e,i){var u=td(e,i);return pu(u)?u:n}function Up(e){var i=ve.call(e,Nn),u=e[Nn];try{e[Nn]=n;var d=!0}catch{}var m=ui.call(e);return d&&(i?e[Nn]=u:delete e[Nn]),m}var Jo=Io?function(e){return e==null?[]:(e=_e(e),vn(Io(e),function(i){return Zs.call(e,i)}))}:ma,Gu=Io?function(e){for(var i=[];e;)xn(i,Jo(e)),e=fi(e);return i}:ma,Ve=je;(Co&&Ve(new Co(new ArrayBuffer(1)))!=X||kr&&Ve(new kr)!=lt||Eo&&Ve(Eo.resolve())!=Xr||ar&&Ve(new ar)!=ct||Sr&&Ve(new Sr)!=$n)&&(Ve=function(e){var i=je(e),u=i==_t?e.constructor:n,d=u?Un(u):"";if(d)switch(d){case Ed:return X;case Td:return lt;case Ad:return Xr;case Pd:return ct;case Md:return $n}return i});function Vp(e,i,u){for(var d=-1,m=u.length;++d<m;){var v=u[d],x=v.size;switch(v.type){case"drop":e+=x;break;case"dropRight":i-=x;break;case"take":i=Ue(i,e+x);break;case"takeRight":e=Be(e,i-x);break}}return{start:e,end:i}}function Gp(e){var i=e.match(Zf);return i?i[1].split(eh):[]}function ju(e,i,u){i=Cn(i,e);for(var d=-1,m=i.length,v=!1;++d<m;){var x=Gt(i[d]);if(!(v=e!=null&&u(e,x)))break;e=e[x]}return v||++d!=m?v:(m=e==null?0:e.length,!!m&&Bi(m)&&cn(x,m)&&(re(e)||Vn(e)))}function jp(e){var i=e.length,u=new e.constructor(i);return i&&typeof e[0]=="string"&&ve.call(e,"index")&&(u.index=e.index,u.input=e.input),u}function Qu(e){return typeof e.constructor=="function"&&!Fr(e)?ur(fi(e)):{}}function Qp(e,i,u){var d=e.constructor;switch(i){case q:return Uo(e);case Je:case xt:return new d(+e);case X:return Op(e,u);case ae:case ge:case Ge:case Rt:case ft:case nn:case rn:case qe:case Yt:return Mu(e,u);case lt:return new d;case bn:case Rn:return new d(e);case wn:return Fp(e);case ct:return new d;case Zn:return Dp(e)}}function Kp(e,i){var u=i.length;if(!u)return e;var d=u-1;return i[d]=(u>1?"& ":"")+i[d],i=i.join(u>2?", ":" "),e.replace(Jf,`{
/* [wrapped with `+i+`] */
`)}function Xp(e){return re(e)||Vn(e)||!!(eu&&e&&e[eu])}function cn(e,i){var u=typeof e;return i=i??Re,!!i&&(u=="number"||u!="symbol"&&lh.test(e))&&e>-1&&e%1==0&&e<i}function Qe(e,i,u){if(!Pe(u))return!1;var d=typeof i;return(d=="number"?et(u)&&cn(i,u.length):d=="string"&&i in u)?Wt(u[i],e):!1}function Zo(e,i){if(re(e))return!1;var u=typeof e;return u=="number"||u=="symbol"||u=="boolean"||e==null||gt(e)?!0:jf.test(e)||!Gf.test(e)||i!=null&&e in _e(i)}function Jp(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null}function ea(e){var i=Pi(e),u=w[i];if(typeof u!="function"||!(i in fe.prototype))return!1;if(e===u)return!0;var d=Ko(u);return!!d&&e===d[0]}function Zp(e){return!!Ks&&Ks in e}var eg=ai?fn:ya;function Fr(e){var i=e&&e.constructor,u=typeof i=="function"&&i.prototype||or;return e===u}function Ku(e){return e===e&&!Pe(e)}function Xu(e,i){return function(u){return u==null?!1:u[e]===i&&(i!==n||e in _e(u))}}function tg(e){var i=Ri(e,function(d){return u.size===h&&u.clear(),d}),u=i.cache;return i}function ng(e,i){var u=e[1],d=i[1],m=u|d,v=m<(M|P|Y),x=d==Y&&u==N||d==Y&&u==G&&e[7].length<=i[8]||d==(Y|G)&&i[7].length<=i[8]&&u==N;if(!(v||x))return e;d&M&&(e[2]=i[2],m|=u&M?0:$);var k=i[3];if(k){var T=e[3];e[3]=T?Fu(T,k,i[4]):k,e[4]=T?_n(e[3],p):i[4]}return k=i[5],k&&(T=e[5],e[5]=T?Du(T,k,i[6]):k,e[6]=T?_n(e[5],p):i[6]),k=i[7],k&&(e[7]=k),d&Y&&(e[8]=e[8]==null?i[8]:Ue(e[8],i[8])),e[9]==null&&(e[9]=i[9]),e[0]=i[0],e[1]=m,e}function rg(e){var i=[];if(e!=null)for(var u in _e(e))i.push(u);return i}function ig(e){return ui.call(e)}function Ju(e,i,u){return i=Be(i===n?e.length-1:i,0),function(){for(var d=arguments,m=-1,v=Be(d.length-i,0),x=O(v);++m<v;)x[m]=d[i+m];m=-1;for(var k=O(i+1);++m<i;)k[m]=d[m];return k[i]=u(x),ht(e,this,k)}}function Zu(e,i){return i.length<2?e:Hn(e,Tt(i,0,-1))}function og(e,i){for(var u=e.length,d=Ue(i.length,u),m=Ze(e);d--;){var v=i[d];e[d]=cn(v,u)?m[v]:n}return e}function ta(e,i){if(!(i==="constructor"&&typeof e[i]=="function")&&i!="__proto__")return e[i]}var el=nl(ku),Dr=vd||function(e,i){return He.setTimeout(e,i)},na=nl(Tp);function tl(e,i,u){var d=i+"";return na(e,Kp(d,ag(Gp(d),u)))}function nl(e){var i=0,u=0;return function(){var d=Sd(),m=be-(d-u);if(u=d,m>0){if(++i>=j)return arguments[0]}else i=0;return e.apply(n,arguments)}}function Oi(e,i){var u=-1,d=e.length,m=d-1;for(i=i===n?d:i;++u<i;){var v=Bo(u,m),x=e[v];e[v]=e[u],e[u]=x}return e.length=i,e}var rl=tg(function(e){var i=[];return e.charCodeAt(0)===46&&i.push(""),e.replace(Qf,function(u,d,m,v){i.push(m?v.replace(rh,"$1"):d||u)}),i});function Gt(e){if(typeof e=="string"||gt(e))return e;var i=e+"";return i=="0"&&1/e==-Ce?"-0":i}function Un(e){if(e!=null){try{return si.call(e)}catch{}try{return e+""}catch{}}return""}function ag(e,i){return St(ut,function(u){var d="_."+u[0];i&u[1]&&!ni(e,d)&&e.push(d)}),e.sort()}function il(e){if(e instanceof fe)return e.clone();var i=new Ct(e.__wrapped__,e.__chain__);return i.__actions__=Ze(e.__actions__),i.__index__=e.__index__,i.__values__=e.__values__,i}function sg(e,i,u){(u?Qe(e,i,u):i===n)?i=1:i=Be(ie(i),0);var d=e==null?0:e.length;if(!d||i<1)return[];for(var m=0,v=0,x=O(pi(d/i));m<d;)x[v++]=Tt(e,m,m+=i);return x}function ug(e){for(var i=-1,u=e==null?0:e.length,d=0,m=[];++i<u;){var v=e[i];v&&(m[d++]=v)}return m}function lg(){var e=arguments.length;if(!e)return[];for(var i=O(e-1),u=arguments[0],d=e;d--;)i[d-1]=arguments[d];return xn(re(u)?Ze(u):[u],Ye(i,1))}var cg=se(function(e,i){return De(e)?Tr(e,Ye(i,1,De,!0)):[]}),fg=se(function(e,i){var u=At(i);return De(u)&&(u=n),De(e)?Tr(e,Ye(i,1,De,!0),K(u,2)):[]}),hg=se(function(e,i){var u=At(i);return De(u)&&(u=n),De(e)?Tr(e,Ye(i,1,De,!0),n,u):[]});function dg(e,i,u){var d=e==null?0:e.length;return d?(i=u||i===n?1:ie(i),Tt(e,i<0?0:i,d)):[]}function pg(e,i,u){var d=e==null?0:e.length;return d?(i=u||i===n?1:ie(i),i=d-i,Tt(e,0,i<0?0:i)):[]}function gg(e,i){return e&&e.length?Si(e,K(i,3),!0,!0):[]}function mg(e,i){return e&&e.length?Si(e,K(i,3),!0):[]}function yg(e,i,u,d){var m=e==null?0:e.length;return m?(u&&typeof u!="number"&&Qe(e,i,u)&&(u=0,d=m),lp(e,i,u,d)):[]}function ol(e,i,u){var d=e==null?0:e.length;if(!d)return-1;var m=u==null?0:ie(u);return m<0&&(m=Be(d+m,0)),ri(e,K(i,3),m)}function al(e,i,u){var d=e==null?0:e.length;if(!d)return-1;var m=d-1;return u!==n&&(m=ie(u),m=u<0?Be(d+m,0):Ue(m,d-1)),ri(e,K(i,3),m,!0)}function sl(e){var i=e==null?0:e.length;return i?Ye(e,1):[]}function bg(e){var i=e==null?0:e.length;return i?Ye(e,Ce):[]}function wg(e,i){var u=e==null?0:e.length;return u?(i=i===n?1:ie(i),Ye(e,i)):[]}function vg(e){for(var i=-1,u=e==null?0:e.length,d={};++i<u;){var m=e[i];d[m[0]]=m[1]}return d}function ul(e){return e&&e.length?e[0]:n}function xg(e,i,u){var d=e==null?0:e.length;if(!d)return-1;var m=u==null?0:ie(u);return m<0&&(m=Be(d+m,0)),tr(e,i,m)}function _g(e){var i=e==null?0:e.length;return i?Tt(e,0,-1):[]}var kg=se(function(e){var i=Te(e,Ho);return i.length&&i[0]===e[0]?Fo(i):[]}),Sg=se(function(e){var i=At(e),u=Te(e,Ho);return i===At(u)?i=n:u.pop(),u.length&&u[0]===e[0]?Fo(u,K(i,2)):[]}),Ig=se(function(e){var i=At(e),u=Te(e,Ho);return i=typeof i=="function"?i:n,i&&u.pop(),u.length&&u[0]===e[0]?Fo(u,n,i):[]});function Cg(e,i){return e==null?"":_d.call(e,i)}function At(e){var i=e==null?0:e.length;return i?e[i-1]:n}function Eg(e,i,u){var d=e==null?0:e.length;if(!d)return-1;var m=d;return u!==n&&(m=ie(u),m=m<0?Be(d+m,0):Ue(m,d-1)),i===i?ad(e,i,m):ri(e,qs,m,!0)}function Tg(e,i){return e&&e.length?wu(e,ie(i)):n}var Ag=se(ll);function ll(e,i){return e&&e.length&&i&&i.length?$o(e,i):e}function Pg(e,i,u){return e&&e.length&&i&&i.length?$o(e,i,K(u,2)):e}function Mg(e,i,u){return e&&e.length&&i&&i.length?$o(e,i,n,u):e}var Og=ln(function(e,i){var u=e==null?0:e.length,d=Ao(e,i);return _u(e,Te(i,function(m){return cn(m,u)?+m:m}).sort(Ou)),d});function Fg(e,i){var u=[];if(!(e&&e.length))return u;var d=-1,m=[],v=e.length;for(i=K(i,3);++d<v;){var x=e[d];i(x,d,e)&&(u.push(x),m.push(d))}return _u(e,m),u}function ra(e){return e==null?e:Cd.call(e)}function Dg(e,i,u){var d=e==null?0:e.length;return d?(u&&typeof u!="number"&&Qe(e,i,u)?(i=0,u=d):(i=i==null?0:ie(i),u=u===n?d:ie(u)),Tt(e,i,u)):[]}function Lg(e,i){return ki(e,i)}function Rg(e,i,u){return Wo(e,i,K(u,2))}function $g(e,i){var u=e==null?0:e.length;if(u){var d=ki(e,i);if(d<u&&Wt(e[d],i))return d}return-1}function Bg(e,i){return ki(e,i,!0)}function Ng(e,i,u){return Wo(e,i,K(u,2),!0)}function Wg(e,i){var u=e==null?0:e.length;if(u){var d=ki(e,i,!0)-1;if(Wt(e[d],i))return d}return-1}function zg(e){return e&&e.length?Su(e):[]}function qg(e,i){return e&&e.length?Su(e,K(i,2)):[]}function Hg(e){var i=e==null?0:e.length;return i?Tt(e,1,i):[]}function Yg(e,i,u){return e&&e.length?(i=u||i===n?1:ie(i),Tt(e,0,i<0?0:i)):[]}function Ug(e,i,u){var d=e==null?0:e.length;return d?(i=u||i===n?1:ie(i),i=d-i,Tt(e,i<0?0:i,d)):[]}function Vg(e,i){return e&&e.length?Si(e,K(i,3),!1,!0):[]}function Gg(e,i){return e&&e.length?Si(e,K(i,3)):[]}var jg=se(function(e){return In(Ye(e,1,De,!0))}),Qg=se(function(e){var i=At(e);return De(i)&&(i=n),In(Ye(e,1,De,!0),K(i,2))}),Kg=se(function(e){var i=At(e);return i=typeof i=="function"?i:n,In(Ye(e,1,De,!0),n,i)});function Xg(e){return e&&e.length?In(e):[]}function Jg(e,i){return e&&e.length?In(e,K(i,2)):[]}function Zg(e,i){return i=typeof i=="function"?i:n,e&&e.length?In(e,n,i):[]}function ia(e){if(!(e&&e.length))return[];var i=0;return e=vn(e,function(u){if(De(u))return i=Be(u.length,i),!0}),xo(i,function(u){return Te(e,bo(u))})}function cl(e,i){if(!(e&&e.length))return[];var u=ia(e);return i==null?u:Te(u,function(d){return ht(i,n,d)})}var em=se(function(e,i){return De(e)?Tr(e,i):[]}),tm=se(function(e){return qo(vn(e,De))}),nm=se(function(e){var i=At(e);return De(i)&&(i=n),qo(vn(e,De),K(i,2))}),rm=se(function(e){var i=At(e);return i=typeof i=="function"?i:n,qo(vn(e,De),n,i)}),im=se(ia);function om(e,i){return Tu(e||[],i||[],Er)}function am(e,i){return Tu(e||[],i||[],Mr)}var sm=se(function(e){var i=e.length,u=i>1?e[i-1]:n;return u=typeof u=="function"?(e.pop(),u):n,cl(e,u)});function fl(e){var i=w(e);return i.__chain__=!0,i}function um(e,i){return i(e),e}function Fi(e,i){return i(e)}var lm=ln(function(e){var i=e.length,u=i?e[0]:0,d=this.__wrapped__,m=function(v){return Ao(v,e)};return i>1||this.__actions__.length||!(d instanceof fe)||!cn(u)?this.thru(m):(d=d.slice(u,+u+(i?1:0)),d.__actions__.push({func:Fi,args:[m],thisArg:n}),new Ct(d,this.__chain__).thru(function(v){return i&&!v.length&&v.push(n),v}))});function cm(){return fl(this)}function fm(){return new Ct(this.value(),this.__chain__)}function hm(){this.__values__===n&&(this.__values__=Il(this.value()));var e=this.__index__>=this.__values__.length,i=e?n:this.__values__[this.__index__++];return{done:e,value:i}}function dm(){return this}function pm(e){for(var i,u=this;u instanceof bi;){var d=il(u);d.__index__=0,d.__values__=n,i?m.__wrapped__=d:i=d;var m=d;u=u.__wrapped__}return m.__wrapped__=e,i}function gm(){var e=this.__wrapped__;if(e instanceof fe){var i=e;return this.__actions__.length&&(i=new fe(this)),i=i.reverse(),i.__actions__.push({func:Fi,args:[ra],thisArg:n}),new Ct(i,this.__chain__)}return this.thru(ra)}function mm(){return Eu(this.__wrapped__,this.__actions__)}var ym=Ii(function(e,i,u){ve.call(e,u)?++e[u]:sn(e,u,1)});function bm(e,i,u){var d=re(e)?Ws:up;return u&&Qe(e,i,u)&&(i=n),d(e,K(i,3))}function wm(e,i){var u=re(e)?vn:cu;return u(e,K(i,3))}var vm=Bu(ol),xm=Bu(al);function _m(e,i){return Ye(Di(e,i),1)}function km(e,i){return Ye(Di(e,i),Ce)}function Sm(e,i,u){return u=u===n?1:ie(u),Ye(Di(e,i),u)}function hl(e,i){var u=re(e)?St:Sn;return u(e,K(i,3))}function dl(e,i){var u=re(e)?Hh:lu;return u(e,K(i,3))}var Im=Ii(function(e,i,u){ve.call(e,u)?e[u].push(i):sn(e,u,[i])});function Cm(e,i,u,d){e=et(e)?e:dr(e),u=u&&!d?ie(u):0;var m=e.length;return u<0&&(u=Be(m+u,0)),Ni(e)?u<=m&&e.indexOf(i,u)>-1:!!m&&tr(e,i,u)>-1}var Em=se(function(e,i,u){var d=-1,m=typeof i=="function",v=et(e)?O(e.length):[];return Sn(e,function(x){v[++d]=m?ht(i,x,u):Ar(x,i,u)}),v}),Tm=Ii(function(e,i,u){sn(e,u,i)});function Di(e,i){var u=re(e)?Te:mu;return u(e,K(i,3))}function Am(e,i,u,d){return e==null?[]:(re(i)||(i=i==null?[]:[i]),u=d?n:u,re(u)||(u=u==null?[]:[u]),vu(e,i,u))}var Pm=Ii(function(e,i,u){e[u?0:1].push(i)},function(){return[[],[]]});function Mm(e,i,u){var d=re(e)?mo:Ys,m=arguments.length<3;return d(e,K(i,4),u,m,Sn)}function Om(e,i,u){var d=re(e)?Yh:Ys,m=arguments.length<3;return d(e,K(i,4),u,m,lu)}function Fm(e,i){var u=re(e)?vn:cu;return u(e,$i(K(i,3)))}function Dm(e){var i=re(e)?ou:Cp;return i(e)}function Lm(e,i,u){(u?Qe(e,i,u):i===n)?i=1:i=ie(i);var d=re(e)?rp:Ep;return d(e,i)}function Rm(e){var i=re(e)?ip:Ap;return i(e)}function $m(e){if(e==null)return 0;if(et(e))return Ni(e)?rr(e):e.length;var i=Ve(e);return i==lt||i==ct?e.size:Lo(e).length}function Bm(e,i,u){var d=re(e)?yo:Pp;return u&&Qe(e,i,u)&&(i=n),d(e,K(i,3))}var Nm=se(function(e,i){if(e==null)return[];var u=i.length;return u>1&&Qe(e,i[0],i[1])?i=[]:u>2&&Qe(i[0],i[1],i[2])&&(i=[i[0]]),vu(e,Ye(i,1),[])}),Li=wd||function(){return He.Date.now()};function Wm(e,i){if(typeof i!="function")throw new It(l);return e=ie(e),function(){if(--e<1)return i.apply(this,arguments)}}function pl(e,i,u){return i=u?n:i,i=e&&i==null?e.length:i,un(e,Y,n,n,n,n,i)}function gl(e,i){var u;if(typeof i!="function")throw new It(l);return e=ie(e),function(){return--e>0&&(u=i.apply(this,arguments)),e<=1&&(i=n),u}}var oa=se(function(e,i,u){var d=M;if(u.length){var m=_n(u,fr(oa));d|=F}return un(e,d,i,u,m)}),ml=se(function(e,i,u){var d=M|P;if(u.length){var m=_n(u,fr(ml));d|=F}return un(i,d,e,u,m)});function yl(e,i,u){i=u?n:i;var d=un(e,N,n,n,n,n,n,i);return d.placeholder=yl.placeholder,d}function bl(e,i,u){i=u?n:i;var d=un(e,z,n,n,n,n,n,i);return d.placeholder=bl.placeholder,d}function wl(e,i,u){var d,m,v,x,k,T,R=0,B=!1,W=!1,H=!0;if(typeof e!="function")throw new It(l);i=Pt(i)||0,Pe(u)&&(B=!!u.leading,W="maxWait"in u,v=W?Be(Pt(u.maxWait)||0,i):v,H="trailing"in u?!!u.trailing:H);function V(Le){var zt=d,dn=m;return d=m=n,R=Le,x=e.apply(dn,zt),x}function J(Le){return R=Le,k=Dr(le,i),B?V(Le):x}function oe(Le){var zt=Le-T,dn=Le-R,Bl=i-zt;return W?Ue(Bl,v-dn):Bl}function Z(Le){var zt=Le-T,dn=Le-R;return T===n||zt>=i||zt<0||W&&dn>=v}function le(){var Le=Li();if(Z(Le))return de(Le);k=Dr(le,oe(Le))}function de(Le){return k=n,H&&d?V(Le):(d=m=n,x)}function mt(){k!==n&&Au(k),R=0,d=T=m=k=n}function Ke(){return k===n?x:de(Li())}function yt(){var Le=Li(),zt=Z(Le);if(d=arguments,m=this,T=Le,zt){if(k===n)return J(T);if(W)return Au(k),k=Dr(le,i),V(T)}return k===n&&(k=Dr(le,i)),x}return yt.cancel=mt,yt.flush=Ke,yt}var zm=se(function(e,i){return uu(e,1,i)}),qm=se(function(e,i,u){return uu(e,Pt(i)||0,u)});function Hm(e){return un(e,ee)}function Ri(e,i){if(typeof e!="function"||i!=null&&typeof i!="function")throw new It(l);var u=function(){var d=arguments,m=i?i.apply(this,d):d[0],v=u.cache;if(v.has(m))return v.get(m);var x=e.apply(this,d);return u.cache=v.set(m,x)||v,x};return u.cache=new(Ri.Cache||an),u}Ri.Cache=an;function $i(e){if(typeof e!="function")throw new It(l);return function(){var i=arguments;switch(i.length){case 0:return!e.call(this);case 1:return!e.call(this,i[0]);case 2:return!e.call(this,i[0],i[1]);case 3:return!e.call(this,i[0],i[1],i[2])}return!e.apply(this,i)}}function Ym(e){return gl(2,e)}var Um=Mp(function(e,i){i=i.length==1&&re(i[0])?Te(i[0],dt(K())):Te(Ye(i,1),dt(K()));var u=i.length;return se(function(d){for(var m=-1,v=Ue(d.length,u);++m<v;)d[m]=i[m].call(this,d[m]);return ht(e,this,d)})}),aa=se(function(e,i){var u=_n(i,fr(aa));return un(e,F,n,i,u)}),vl=se(function(e,i){var u=_n(i,fr(vl));return un(e,A,n,i,u)}),Vm=ln(function(e,i){return un(e,G,n,n,n,i)});function Gm(e,i){if(typeof e!="function")throw new It(l);return i=i===n?i:ie(i),se(e,i)}function jm(e,i){if(typeof e!="function")throw new It(l);return i=i==null?0:Be(ie(i),0),se(function(u){var d=u[i],m=En(u,0,i);return d&&xn(m,d),ht(e,this,m)})}function Qm(e,i,u){var d=!0,m=!0;if(typeof e!="function")throw new It(l);return Pe(u)&&(d="leading"in u?!!u.leading:d,m="trailing"in u?!!u.trailing:m),wl(e,i,{leading:d,maxWait:i,trailing:m})}function Km(e){return pl(e,1)}function Xm(e,i){return aa(Yo(i),e)}function Jm(){if(!arguments.length)return[];var e=arguments[0];return re(e)?e:[e]}function Zm(e){return Et(e,y)}function e0(e,i){return i=typeof i=="function"?i:n,Et(e,y,i)}function t0(e){return Et(e,g|y)}function n0(e,i){return i=typeof i=="function"?i:n,Et(e,g|y,i)}function r0(e,i){return i==null||su(e,i,ze(i))}function Wt(e,i){return e===i||e!==e&&i!==i}var i0=Ai(Oo),o0=Ai(function(e,i){return e>=i}),Vn=du((function(){return arguments})())?du:function(e){return Fe(e)&&ve.call(e,"callee")&&!Zs.call(e,"callee")},re=O.isArray,a0=Ds?dt(Ds):pp;function et(e){return e!=null&&Bi(e.length)&&!fn(e)}function De(e){return Fe(e)&&et(e)}function s0(e){return e===!0||e===!1||Fe(e)&&je(e)==Je}var Tn=xd||ya,u0=Ls?dt(Ls):gp;function l0(e){return Fe(e)&&e.nodeType===1&&!Lr(e)}function c0(e){if(e==null)return!0;if(et(e)&&(re(e)||typeof e=="string"||typeof e.splice=="function"||Tn(e)||hr(e)||Vn(e)))return!e.length;var i=Ve(e);if(i==lt||i==ct)return!e.size;if(Fr(e))return!Lo(e).length;for(var u in e)if(ve.call(e,u))return!1;return!0}function f0(e,i){return Pr(e,i)}function h0(e,i,u){u=typeof u=="function"?u:n;var d=u?u(e,i):n;return d===n?Pr(e,i,n,u):!!d}function sa(e){if(!Fe(e))return!1;var i=je(e);return i==tn||i==yn||typeof e.message=="string"&&typeof e.name=="string"&&!Lr(e)}function d0(e){return typeof e=="number"&&tu(e)}function fn(e){if(!Pe(e))return!1;var i=je(e);return i==Jn||i==Qr||i==Ln||i==Jr}function xl(e){return typeof e=="number"&&e==ie(e)}function Bi(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Re}function Pe(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}function Fe(e){return e!=null&&typeof e=="object"}var _l=Rs?dt(Rs):yp;function p0(e,i){return e===i||Do(e,i,Xo(i))}function g0(e,i,u){return u=typeof u=="function"?u:n,Do(e,i,Xo(i),u)}function m0(e){return kl(e)&&e!=+e}function y0(e){if(eg(e))throw new ne(s);return pu(e)}function b0(e){return e===null}function w0(e){return e==null}function kl(e){return typeof e=="number"||Fe(e)&&je(e)==bn}function Lr(e){if(!Fe(e)||je(e)!=_t)return!1;var i=fi(e);if(i===null)return!0;var u=ve.call(i,"constructor")&&i.constructor;return typeof u=="function"&&u instanceof u&&si.call(u)==gd}var ua=$s?dt($s):bp;function v0(e){return xl(e)&&e>=-Re&&e<=Re}var Sl=Bs?dt(Bs):wp;function Ni(e){return typeof e=="string"||!re(e)&&Fe(e)&&je(e)==Rn}function gt(e){return typeof e=="symbol"||Fe(e)&&je(e)==Zn}var hr=Ns?dt(Ns):vp;function x0(e){return e===n}function _0(e){return Fe(e)&&Ve(e)==$n}function k0(e){return Fe(e)&&je(e)==L}var S0=Ai(Ro),I0=Ai(function(e,i){return e<=i});function Il(e){if(!e)return[];if(et(e))return Ni(e)?Bt(e):Ze(e);if(_r&&e[_r])return rd(e[_r]());var i=Ve(e),u=i==lt?ko:i==ct?ii:dr;return u(e)}function hn(e){if(!e)return e===0?e:0;if(e=Pt(e),e===Ce||e===-Ce){var i=e<0?-1:1;return i*Dt}return e===e?e:0}function ie(e){var i=hn(e),u=i%1;return i===i?u?i-u:i:0}function Cl(e){return e?qn(ie(e),0,Me):0}function Pt(e){if(typeof e=="number")return e;if(gt(e))return _;if(Pe(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=Pe(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=Us(e);var u=ah.test(e);return u||uh.test(e)?Wh(e.slice(2),u?2:8):oh.test(e)?_:+e}function El(e){return Vt(e,tt(e))}function C0(e){return e?qn(ie(e),-Re,Re):e===0?e:0}function we(e){return e==null?"":pt(e)}var E0=lr(function(e,i){if(Fr(i)||et(i)){Vt(i,ze(i),e);return}for(var u in i)ve.call(i,u)&&Er(e,u,i[u])}),Tl=lr(function(e,i){Vt(i,tt(i),e)}),Wi=lr(function(e,i,u,d){Vt(i,tt(i),e,d)}),T0=lr(function(e,i,u,d){Vt(i,ze(i),e,d)}),A0=ln(Ao);function P0(e,i){var u=ur(e);return i==null?u:au(u,i)}var M0=se(function(e,i){e=_e(e);var u=-1,d=i.length,m=d>2?i[2]:n;for(m&&Qe(i[0],i[1],m)&&(d=1);++u<d;)for(var v=i[u],x=tt(v),k=-1,T=x.length;++k<T;){var R=x[k],B=e[R];(B===n||Wt(B,or[R])&&!ve.call(e,R))&&(e[R]=v[R])}return e}),O0=se(function(e){return e.push(n,Uu),ht(Al,n,e)});function F0(e,i){return zs(e,K(i,3),Ut)}function D0(e,i){return zs(e,K(i,3),Mo)}function L0(e,i){return e==null?e:Po(e,K(i,3),tt)}function R0(e,i){return e==null?e:fu(e,K(i,3),tt)}function $0(e,i){return e&&Ut(e,K(i,3))}function B0(e,i){return e&&Mo(e,K(i,3))}function N0(e){return e==null?[]:xi(e,ze(e))}function W0(e){return e==null?[]:xi(e,tt(e))}function la(e,i,u){var d=e==null?n:Hn(e,i);return d===n?u:d}function z0(e,i){return e!=null&&ju(e,i,cp)}function ca(e,i){return e!=null&&ju(e,i,fp)}var q0=Wu(function(e,i,u){i!=null&&typeof i.toString!="function"&&(i=ui.call(i)),e[i]=u},ha(nt)),H0=Wu(function(e,i,u){i!=null&&typeof i.toString!="function"&&(i=ui.call(i)),ve.call(e,i)?e[i].push(u):e[i]=[u]},K),Y0=se(Ar);function ze(e){return et(e)?iu(e):Lo(e)}function tt(e){return et(e)?iu(e,!0):xp(e)}function U0(e,i){var u={};return i=K(i,3),Ut(e,function(d,m,v){sn(u,i(d,m,v),d)}),u}function V0(e,i){var u={};return i=K(i,3),Ut(e,function(d,m,v){sn(u,m,i(d,m,v))}),u}var G0=lr(function(e,i,u){_i(e,i,u)}),Al=lr(function(e,i,u,d){_i(e,i,u,d)}),j0=ln(function(e,i){var u={};if(e==null)return u;var d=!1;i=Te(i,function(v){return v=Cn(v,e),d||(d=v.length>1),v}),Vt(e,Qo(e),u),d&&(u=Et(u,g|b|y,qp));for(var m=i.length;m--;)zo(u,i[m]);return u});function Q0(e,i){return Pl(e,$i(K(i)))}var K0=ln(function(e,i){return e==null?{}:kp(e,i)});function Pl(e,i){if(e==null)return{};var u=Te(Qo(e),function(d){return[d]});return i=K(i),xu(e,u,function(d,m){return i(d,m[0])})}function X0(e,i,u){i=Cn(i,e);var d=-1,m=i.length;for(m||(m=1,e=n);++d<m;){var v=e==null?n:e[Gt(i[d])];v===n&&(d=m,v=u),e=fn(v)?v.call(e):v}return e}function J0(e,i,u){return e==null?e:Mr(e,i,u)}function Z0(e,i,u,d){return d=typeof d=="function"?d:n,e==null?e:Mr(e,i,u,d)}var Ml=Hu(ze),Ol=Hu(tt);function e1(e,i,u){var d=re(e),m=d||Tn(e)||hr(e);if(i=K(i,4),u==null){var v=e&&e.constructor;m?u=d?new v:[]:Pe(e)?u=fn(v)?ur(fi(e)):{}:u={}}return(m?St:Ut)(e,function(x,k,T){return i(u,x,k,T)}),u}function t1(e,i){return e==null?!0:zo(e,i)}function n1(e,i,u){return e==null?e:Cu(e,i,Yo(u))}function r1(e,i,u,d){return d=typeof d=="function"?d:n,e==null?e:Cu(e,i,Yo(u),d)}function dr(e){return e==null?[]:_o(e,ze(e))}function i1(e){return e==null?[]:_o(e,tt(e))}function o1(e,i,u){return u===n&&(u=i,i=n),u!==n&&(u=Pt(u),u=u===u?u:0),i!==n&&(i=Pt(i),i=i===i?i:0),qn(Pt(e),i,u)}function a1(e,i,u){return i=hn(i),u===n?(u=i,i=0):u=hn(u),e=Pt(e),hp(e,i,u)}function s1(e,i,u){if(u&&typeof u!="boolean"&&Qe(e,i,u)&&(i=u=n),u===n&&(typeof i=="boolean"?(u=i,i=n):typeof e=="boolean"&&(u=e,e=n)),e===n&&i===n?(e=0,i=1):(e=hn(e),i===n?(i=e,e=0):i=hn(i)),e>i){var d=e;e=i,i=d}if(u||e%1||i%1){var m=nu();return Ue(e+m*(i-e+Nh("1e-"+((m+"").length-1))),i)}return Bo(e,i)}var u1=cr(function(e,i,u){return i=i.toLowerCase(),e+(u?Fl(i):i)});function Fl(e){return fa(we(e).toLowerCase())}function Dl(e){return e=we(e),e&&e.replace(ch,Jh).replace(Ah,"")}function l1(e,i,u){e=we(e),i=pt(i);var d=e.length;u=u===n?d:qn(ie(u),0,d);var m=u;return u-=i.length,u>=0&&e.slice(u,m)==i}function c1(e){return e=we(e),e&&Yf.test(e)?e.replace(fs,Zh):e}function f1(e){return e=we(e),e&&Kf.test(e)?e.replace(oo,"\\$&"):e}var h1=cr(function(e,i,u){return e+(u?"-":"")+i.toLowerCase()}),d1=cr(function(e,i,u){return e+(u?" ":"")+i.toLowerCase()}),p1=$u("toLowerCase");function g1(e,i,u){e=we(e),i=ie(i);var d=i?rr(e):0;if(!i||d>=i)return e;var m=(i-d)/2;return Ti(gi(m),u)+e+Ti(pi(m),u)}function m1(e,i,u){e=we(e),i=ie(i);var d=i?rr(e):0;return i&&d<i?e+Ti(i-d,u):e}function y1(e,i,u){e=we(e),i=ie(i);var d=i?rr(e):0;return i&&d<i?Ti(i-d,u)+e:e}function b1(e,i,u){return u||i==null?i=0:i&&(i=+i),Id(we(e).replace(ao,""),i||0)}function w1(e,i,u){return(u?Qe(e,i,u):i===n)?i=1:i=ie(i),No(we(e),i)}function v1(){var e=arguments,i=we(e[0]);return e.length<3?i:i.replace(e[1],e[2])}var x1=cr(function(e,i,u){return e+(u?"_":"")+i.toLowerCase()});function _1(e,i,u){return u&&typeof u!="number"&&Qe(e,i,u)&&(i=u=n),u=u===n?Me:u>>>0,u?(e=we(e),e&&(typeof i=="string"||i!=null&&!ua(i))&&(i=pt(i),!i&&nr(e))?En(Bt(e),0,u):e.split(i,u)):[]}var k1=cr(function(e,i,u){return e+(u?" ":"")+fa(i)});function S1(e,i,u){return e=we(e),u=u==null?0:qn(ie(u),0,e.length),i=pt(i),e.slice(u,u+i.length)==i}function I1(e,i,u){var d=w.templateSettings;u&&Qe(e,i,u)&&(i=n),e=we(e),i=Wi({},i,d,Yu);var m=Wi({},i.imports,d.imports,Yu),v=ze(m),x=_o(m,v),k,T,R=0,B=i.interpolate||Zr,W="__p += '",H=So((i.escape||Zr).source+"|"+B.source+"|"+(B===hs?ih:Zr).source+"|"+(i.evaluate||Zr).source+"|$","g"),V="//# sourceURL="+(ve.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Dh+"]")+`
`;e.replace(H,function(Z,le,de,mt,Ke,yt){return de||(de=mt),W+=e.slice(R,yt).replace(fh,ed),le&&(k=!0,W+=`' +
__e(`+le+`) +
'`),Ke&&(T=!0,W+=`';
`+Ke+`;
__p += '`),de&&(W+=`' +
((__t = (`+de+`)) == null ? '' : __t) +
'`),R=yt+Z.length,Z}),W+=`';
`;var J=ve.call(i,"variable")&&i.variable;if(!J)W=`with (obj) {
`+W+`
}
`;else if(nh.test(J))throw new ne(c);W=(T?W.replace($t,""):W).replace(zf,"$1").replace(qf,"$1;"),W="function("+(J||"obj")+`) {
`+(J?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(k?", __e = _.escape":"")+(T?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+W+`return __p
}`;var oe=Rl(function(){return me(v,V+"return "+W).apply(n,x)});if(oe.source=W,sa(oe))throw oe;return oe}function C1(e){return we(e).toLowerCase()}function E1(e){return we(e).toUpperCase()}function T1(e,i,u){if(e=we(e),e&&(u||i===n))return Us(e);if(!e||!(i=pt(i)))return e;var d=Bt(e),m=Bt(i),v=Vs(d,m),x=Gs(d,m)+1;return En(d,v,x).join("")}function A1(e,i,u){if(e=we(e),e&&(u||i===n))return e.slice(0,Qs(e)+1);if(!e||!(i=pt(i)))return e;var d=Bt(e),m=Gs(d,Bt(i))+1;return En(d,0,m).join("")}function P1(e,i,u){if(e=we(e),e&&(u||i===n))return e.replace(ao,"");if(!e||!(i=pt(i)))return e;var d=Bt(e),m=Vs(d,Bt(i));return En(d,m).join("")}function M1(e,i){var u=ce,d=Q;if(Pe(i)){var m="separator"in i?i.separator:m;u="length"in i?ie(i.length):u,d="omission"in i?pt(i.omission):d}e=we(e);var v=e.length;if(nr(e)){var x=Bt(e);v=x.length}if(u>=v)return e;var k=u-rr(d);if(k<1)return d;var T=x?En(x,0,k).join(""):e.slice(0,k);if(m===n)return T+d;if(x&&(k+=T.length-k),ua(m)){if(e.slice(k).search(m)){var R,B=T;for(m.global||(m=So(m.source,we(ds.exec(m))+"g")),m.lastIndex=0;R=m.exec(B);)var W=R.index;T=T.slice(0,W===n?k:W)}}else if(e.indexOf(pt(m),k)!=k){var H=T.lastIndexOf(m);H>-1&&(T=T.slice(0,H))}return T+d}function O1(e){return e=we(e),e&&Hf.test(e)?e.replace(cs,sd):e}var F1=cr(function(e,i,u){return e+(u?" ":"")+i.toUpperCase()}),fa=$u("toUpperCase");function Ll(e,i,u){return e=we(e),i=u?n:i,i===n?nd(e)?cd(e):Gh(e):e.match(i)||[]}var Rl=se(function(e,i){try{return ht(e,n,i)}catch(u){return sa(u)?u:new ne(u)}}),D1=ln(function(e,i){return St(i,function(u){u=Gt(u),sn(e,u,oa(e[u],e))}),e});function L1(e){var i=e==null?0:e.length,u=K();return e=i?Te(e,function(d){if(typeof d[1]!="function")throw new It(l);return[u(d[0]),d[1]]}):[],se(function(d){for(var m=-1;++m<i;){var v=e[m];if(ht(v[0],this,d))return ht(v[1],this,d)}})}function R1(e){return sp(Et(e,g))}function ha(e){return function(){return e}}function $1(e,i){return e==null||e!==e?i:e}var B1=Nu(),N1=Nu(!0);function nt(e){return e}function da(e){return gu(typeof e=="function"?e:Et(e,g))}function W1(e){return yu(Et(e,g))}function z1(e,i){return bu(e,Et(i,g))}var q1=se(function(e,i){return function(u){return Ar(u,e,i)}}),H1=se(function(e,i){return function(u){return Ar(e,u,i)}});function pa(e,i,u){var d=ze(i),m=xi(i,d);u==null&&!(Pe(i)&&(m.length||!d.length))&&(u=i,i=e,e=this,m=xi(i,ze(i)));var v=!(Pe(u)&&"chain"in u)||!!u.chain,x=fn(e);return St(m,function(k){var T=i[k];e[k]=T,x&&(e.prototype[k]=function(){var R=this.__chain__;if(v||R){var B=e(this.__wrapped__),W=B.__actions__=Ze(this.__actions__);return W.push({func:T,args:arguments,thisArg:e}),B.__chain__=R,B}return T.apply(e,xn([this.value()],arguments))})}),e}function Y1(){return He._===this&&(He._=md),this}function ga(){}function U1(e){return e=ie(e),se(function(i){return wu(i,e)})}var V1=Vo(Te),G1=Vo(Ws),j1=Vo(yo);function $l(e){return Zo(e)?bo(Gt(e)):Sp(e)}function Q1(e){return function(i){return e==null?n:Hn(e,i)}}var K1=zu(),X1=zu(!0);function ma(){return[]}function ya(){return!1}function J1(){return{}}function Z1(){return""}function ey(){return!0}function ty(e,i){if(e=ie(e),e<1||e>Re)return[];var u=Me,d=Ue(e,Me);i=K(i),e-=Me;for(var m=xo(d,i);++u<e;)i(u);return m}function ny(e){return re(e)?Te(e,Gt):gt(e)?[e]:Ze(rl(we(e)))}function ry(e){var i=++pd;return we(e)+i}var iy=Ei(function(e,i){return e+i},0),oy=Go("ceil"),ay=Ei(function(e,i){return e/i},1),sy=Go("floor");function uy(e){return e&&e.length?vi(e,nt,Oo):n}function ly(e,i){return e&&e.length?vi(e,K(i,2),Oo):n}function cy(e){return Hs(e,nt)}function fy(e,i){return Hs(e,K(i,2))}function hy(e){return e&&e.length?vi(e,nt,Ro):n}function dy(e,i){return e&&e.length?vi(e,K(i,2),Ro):n}var py=Ei(function(e,i){return e*i},1),gy=Go("round"),my=Ei(function(e,i){return e-i},0);function yy(e){return e&&e.length?vo(e,nt):0}function by(e,i){return e&&e.length?vo(e,K(i,2)):0}return w.after=Wm,w.ary=pl,w.assign=E0,w.assignIn=Tl,w.assignInWith=Wi,w.assignWith=T0,w.at=A0,w.before=gl,w.bind=oa,w.bindAll=D1,w.bindKey=ml,w.castArray=Jm,w.chain=fl,w.chunk=sg,w.compact=ug,w.concat=lg,w.cond=L1,w.conforms=R1,w.constant=ha,w.countBy=ym,w.create=P0,w.curry=yl,w.curryRight=bl,w.debounce=wl,w.defaults=M0,w.defaultsDeep=O0,w.defer=zm,w.delay=qm,w.difference=cg,w.differenceBy=fg,w.differenceWith=hg,w.drop=dg,w.dropRight=pg,w.dropRightWhile=gg,w.dropWhile=mg,w.fill=yg,w.filter=wm,w.flatMap=_m,w.flatMapDeep=km,w.flatMapDepth=Sm,w.flatten=sl,w.flattenDeep=bg,w.flattenDepth=wg,w.flip=Hm,w.flow=B1,w.flowRight=N1,w.fromPairs=vg,w.functions=N0,w.functionsIn=W0,w.groupBy=Im,w.initial=_g,w.intersection=kg,w.intersectionBy=Sg,w.intersectionWith=Ig,w.invert=q0,w.invertBy=H0,w.invokeMap=Em,w.iteratee=da,w.keyBy=Tm,w.keys=ze,w.keysIn=tt,w.map=Di,w.mapKeys=U0,w.mapValues=V0,w.matches=W1,w.matchesProperty=z1,w.memoize=Ri,w.merge=G0,w.mergeWith=Al,w.method=q1,w.methodOf=H1,w.mixin=pa,w.negate=$i,w.nthArg=U1,w.omit=j0,w.omitBy=Q0,w.once=Ym,w.orderBy=Am,w.over=V1,w.overArgs=Um,w.overEvery=G1,w.overSome=j1,w.partial=aa,w.partialRight=vl,w.partition=Pm,w.pick=K0,w.pickBy=Pl,w.property=$l,w.propertyOf=Q1,w.pull=Ag,w.pullAll=ll,w.pullAllBy=Pg,w.pullAllWith=Mg,w.pullAt=Og,w.range=K1,w.rangeRight=X1,w.rearg=Vm,w.reject=Fm,w.remove=Fg,w.rest=Gm,w.reverse=ra,w.sampleSize=Lm,w.set=J0,w.setWith=Z0,w.shuffle=Rm,w.slice=Dg,w.sortBy=Nm,w.sortedUniq=zg,w.sortedUniqBy=qg,w.split=_1,w.spread=jm,w.tail=Hg,w.take=Yg,w.takeRight=Ug,w.takeRightWhile=Vg,w.takeWhile=Gg,w.tap=um,w.throttle=Qm,w.thru=Fi,w.toArray=Il,w.toPairs=Ml,w.toPairsIn=Ol,w.toPath=ny,w.toPlainObject=El,w.transform=e1,w.unary=Km,w.union=jg,w.unionBy=Qg,w.unionWith=Kg,w.uniq=Xg,w.uniqBy=Jg,w.uniqWith=Zg,w.unset=t1,w.unzip=ia,w.unzipWith=cl,w.update=n1,w.updateWith=r1,w.values=dr,w.valuesIn=i1,w.without=em,w.words=Ll,w.wrap=Xm,w.xor=tm,w.xorBy=nm,w.xorWith=rm,w.zip=im,w.zipObject=om,w.zipObjectDeep=am,w.zipWith=sm,w.entries=Ml,w.entriesIn=Ol,w.extend=Tl,w.extendWith=Wi,pa(w,w),w.add=iy,w.attempt=Rl,w.camelCase=u1,w.capitalize=Fl,w.ceil=oy,w.clamp=o1,w.clone=Zm,w.cloneDeep=t0,w.cloneDeepWith=n0,w.cloneWith=e0,w.conformsTo=r0,w.deburr=Dl,w.defaultTo=$1,w.divide=ay,w.endsWith=l1,w.eq=Wt,w.escape=c1,w.escapeRegExp=f1,w.every=bm,w.find=vm,w.findIndex=ol,w.findKey=F0,w.findLast=xm,w.findLastIndex=al,w.findLastKey=D0,w.floor=sy,w.forEach=hl,w.forEachRight=dl,w.forIn=L0,w.forInRight=R0,w.forOwn=$0,w.forOwnRight=B0,w.get=la,w.gt=i0,w.gte=o0,w.has=z0,w.hasIn=ca,w.head=ul,w.identity=nt,w.includes=Cm,w.indexOf=xg,w.inRange=a1,w.invoke=Y0,w.isArguments=Vn,w.isArray=re,w.isArrayBuffer=a0,w.isArrayLike=et,w.isArrayLikeObject=De,w.isBoolean=s0,w.isBuffer=Tn,w.isDate=u0,w.isElement=l0,w.isEmpty=c0,w.isEqual=f0,w.isEqualWith=h0,w.isError=sa,w.isFinite=d0,w.isFunction=fn,w.isInteger=xl,w.isLength=Bi,w.isMap=_l,w.isMatch=p0,w.isMatchWith=g0,w.isNaN=m0,w.isNative=y0,w.isNil=w0,w.isNull=b0,w.isNumber=kl,w.isObject=Pe,w.isObjectLike=Fe,w.isPlainObject=Lr,w.isRegExp=ua,w.isSafeInteger=v0,w.isSet=Sl,w.isString=Ni,w.isSymbol=gt,w.isTypedArray=hr,w.isUndefined=x0,w.isWeakMap=_0,w.isWeakSet=k0,w.join=Cg,w.kebabCase=h1,w.last=At,w.lastIndexOf=Eg,w.lowerCase=d1,w.lowerFirst=p1,w.lt=S0,w.lte=I0,w.max=uy,w.maxBy=ly,w.mean=cy,w.meanBy=fy,w.min=hy,w.minBy=dy,w.stubArray=ma,w.stubFalse=ya,w.stubObject=J1,w.stubString=Z1,w.stubTrue=ey,w.multiply=py,w.nth=Tg,w.noConflict=Y1,w.noop=ga,w.now=Li,w.pad=g1,w.padEnd=m1,w.padStart=y1,w.parseInt=b1,w.random=s1,w.reduce=Mm,w.reduceRight=Om,w.repeat=w1,w.replace=v1,w.result=X0,w.round=gy,w.runInContext=E,w.sample=Dm,w.size=$m,w.snakeCase=x1,w.some=Bm,w.sortedIndex=Lg,w.sortedIndexBy=Rg,w.sortedIndexOf=$g,w.sortedLastIndex=Bg,w.sortedLastIndexBy=Ng,w.sortedLastIndexOf=Wg,w.startCase=k1,w.startsWith=S1,w.subtract=my,w.sum=yy,w.sumBy=by,w.template=I1,w.times=ty,w.toFinite=hn,w.toInteger=ie,w.toLength=Cl,w.toLower=C1,w.toNumber=Pt,w.toSafeInteger=C0,w.toString=we,w.toUpper=E1,w.trim=T1,w.trimEnd=A1,w.trimStart=P1,w.truncate=M1,w.unescape=O1,w.uniqueId=ry,w.upperCase=F1,w.upperFirst=fa,w.each=hl,w.eachRight=dl,w.first=ul,pa(w,(function(){var e={};return Ut(w,function(i,u){ve.call(w.prototype,u)||(e[u]=i)}),e})(),{chain:!1}),w.VERSION=a,St(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){w[e].placeholder=w}),St(["drop","take"],function(e,i){fe.prototype[e]=function(u){u=u===n?1:Be(ie(u),0);var d=this.__filtered__&&!i?new fe(this):this.clone();return d.__filtered__?d.__takeCount__=Ue(u,d.__takeCount__):d.__views__.push({size:Ue(u,Me),type:e+(d.__dir__<0?"Right":"")}),d},fe.prototype[e+"Right"]=function(u){return this.reverse()[e](u).reverse()}}),St(["filter","map","takeWhile"],function(e,i){var u=i+1,d=u==Ae||u==We;fe.prototype[e]=function(m){var v=this.clone();return v.__iteratees__.push({iteratee:K(m,3),type:u}),v.__filtered__=v.__filtered__||d,v}}),St(["head","last"],function(e,i){var u="take"+(i?"Right":"");fe.prototype[e]=function(){return this[u](1).value()[0]}}),St(["initial","tail"],function(e,i){var u="drop"+(i?"":"Right");fe.prototype[e]=function(){return this.__filtered__?new fe(this):this[u](1)}}),fe.prototype.compact=function(){return this.filter(nt)},fe.prototype.find=function(e){return this.filter(e).head()},fe.prototype.findLast=function(e){return this.reverse().find(e)},fe.prototype.invokeMap=se(function(e,i){return typeof e=="function"?new fe(this):this.map(function(u){return Ar(u,e,i)})}),fe.prototype.reject=function(e){return this.filter($i(K(e)))},fe.prototype.slice=function(e,i){e=ie(e);var u=this;return u.__filtered__&&(e>0||i<0)?new fe(u):(e<0?u=u.takeRight(-e):e&&(u=u.drop(e)),i!==n&&(i=ie(i),u=i<0?u.dropRight(-i):u.take(i-e)),u)},fe.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},fe.prototype.toArray=function(){return this.take(Me)},Ut(fe.prototype,function(e,i){var u=/^(?:filter|find|map|reject)|While$/.test(i),d=/^(?:head|last)$/.test(i),m=w[d?"take"+(i=="last"?"Right":""):i],v=d||/^find/.test(i);m&&(w.prototype[i]=function(){var x=this.__wrapped__,k=d?[1]:arguments,T=x instanceof fe,R=k[0],B=T||re(x),W=function(le){var de=m.apply(w,xn([le],k));return d&&H?de[0]:de};B&&u&&typeof R=="function"&&R.length!=1&&(T=B=!1);var H=this.__chain__,V=!!this.__actions__.length,J=v&&!H,oe=T&&!V;if(!v&&B){x=oe?x:new fe(this);var Z=e.apply(x,k);return Z.__actions__.push({func:Fi,args:[W],thisArg:n}),new Ct(Z,H)}return J&&oe?e.apply(this,k):(Z=this.thru(W),J?d?Z.value()[0]:Z.value():Z)})}),St(["pop","push","shift","sort","splice","unshift"],function(e){var i=oi[e],u=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",d=/^(?:pop|shift)$/.test(e);w.prototype[e]=function(){var m=arguments;if(d&&!this.__chain__){var v=this.value();return i.apply(re(v)?v:[],m)}return this[u](function(x){return i.apply(re(x)?x:[],m)})}}),Ut(fe.prototype,function(e,i){var u=w[i];if(u){var d=u.name+"";ve.call(sr,d)||(sr[d]=[]),sr[d].push({name:i,func:u})}}),sr[Ci(n,P).name]=[{name:"wrapper",func:n}],fe.prototype.clone=Od,fe.prototype.reverse=Fd,fe.prototype.value=Dd,w.prototype.at=lm,w.prototype.chain=cm,w.prototype.commit=fm,w.prototype.next=hm,w.prototype.plant=pm,w.prototype.reverse=gm,w.prototype.toJSON=w.prototype.valueOf=w.prototype.value=mm,w.prototype.first=w.prototype.head,_r&&(w.prototype[_r]=dm),w}),ir=fd();Bn?((Bn.exports=ir)._=ir,ho._=ir):He._=ir}).call(Sy)})(qr,qr.exports)),qr.exports}var Cy=Iy();const wa={projectDir:"powerJournal",outputDir:"reports",coreDir:"core",devLogging:!0,devMode:!1,reportFileExtension:".pjf.md"};async function Ey(t){if(!t||typeof t!="object"||Array.isArray(t))return wa;try{return Cy.merge({},wa,t)}catch(r){return console.warn("[PowerJournal] Failed to merge user config, using defaults.",r),wa}}const jc=6048e5,Ty=864e5,ql=Symbol.for("constructDateFrom");function mn(t,r){return typeof t=="function"?t(r):t&&typeof t=="object"&&ql in t?t[ql](r):t instanceof Date?new t.constructor(r):new Date(r)}function Ft(t,r){return mn(r||t,t)}function Ay(t,r,n){const a=Ft(t,n?.in);return isNaN(r)?mn(t,NaN):(r&&a.setDate(a.getDate()+r),a)}let Py={};function to(){return Py}function Ur(t,r){const n=to(),a=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=Ft(t,r?.in),s=o.getDay(),l=(s<a?7:0)+s-a;return o.setDate(o.getDate()-l),o.setHours(0,0,0,0),o}function Ki(t,r){return Ur(t,{...r,weekStartsOn:1})}function Qc(t,r){const n=Ft(t,r?.in),a=n.getFullYear(),o=mn(n,0);o.setFullYear(a+1,0,4),o.setHours(0,0,0,0);const s=Ki(o),l=mn(n,0);l.setFullYear(a,0,4),l.setHours(0,0,0,0);const c=Ki(l);return n.getTime()>=s.getTime()?a+1:n.getTime()>=c.getTime()?a:a-1}function Hl(t){const r=Ft(t),n=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return n.setUTCFullYear(r.getFullYear()),+t-+n}function Kc(t,...r){const n=mn.bind(null,r.find(a=>typeof a=="object"));return r.map(n)}function Yl(t,r){const n=Ft(t,r?.in);return n.setHours(0,0,0,0),n}function Xc(t,r,n){const[a,o]=Kc(n?.in,t,r),s=Yl(a),l=Yl(o),c=+s-Hl(s),f=+l-Hl(l);return Math.round((c-f)/Ty)}function My(t,r){const n=Qc(t,r),a=mn(t,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),Ki(a)}function Oy(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Fy(t){return!(!Oy(t)&&typeof t!="number"||isNaN(+Ft(t)))}function Dy(t,r,n){const[a,o]=Kc(n?.in,t,r),s=Ul(a,o),l=Math.abs(Xc(a,o));a.setDate(a.getDate()-s*l);const c=+(Ul(a,o)===-s),f=s*(l-c);return f===0?0:f}function Ul(t,r){const n=t.getFullYear()-r.getFullYear()||t.getMonth()-r.getMonth()||t.getDate()-r.getDate()||t.getHours()-r.getHours()||t.getMinutes()-r.getMinutes()||t.getSeconds()-r.getSeconds()||t.getMilliseconds()-r.getMilliseconds();return n<0?-1:n>0?1:n}function Ly(t,r){const n=Ft(t,r?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Ry={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$y=(t,r,n)=>{let a;const o=Ry[t];return typeof o=="string"?a=o:r===1?a=o.one:a=o.other.replace("{{count}}",r.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function va(t){return(r={})=>{const n=r.width?String(r.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const By={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ny={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Wy={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},zy={date:va({formats:By,defaultWidth:"full"}),time:va({formats:Ny,defaultWidth:"full"}),dateTime:va({formats:Wy,defaultWidth:"full"})},qy={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Hy=(t,r,n,a)=>qy[t];function Rr(t){return(r,n)=>{const a=n?.context?String(n.context):"standalone";let o;if(a==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,c=n?.width?String(n.width):l;o=t.formattingValues[c]||t.formattingValues[l]}else{const l=t.defaultWidth,c=n?.width?String(n.width):t.defaultWidth;o=t.values[c]||t.values[l]}const s=t.argumentCallback?t.argumentCallback(r):r;return o[s]}}const Yy={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Uy={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Vy={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Gy={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},jy={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Qy={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ky=(t,r)=>{const n=Number(t),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Xy={ordinalNumber:Ky,era:Rr({values:Yy,defaultWidth:"wide"}),quarter:Rr({values:Uy,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Rr({values:Vy,defaultWidth:"wide"}),day:Rr({values:Gy,defaultWidth:"wide"}),dayPeriod:Rr({values:jy,defaultWidth:"wide",formattingValues:Qy,defaultFormattingWidth:"wide"})};function $r(t){return(r,n={})=>{const a=n.width,o=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],s=r.match(o);if(!s)return null;const l=s[0],c=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],f=Array.isArray(c)?Zy(c,g=>g.test(l)):Jy(c,g=>g.test(l));let h;h=t.valueCallback?t.valueCallback(f):f,h=n.valueCallback?n.valueCallback(h):h;const p=r.slice(l.length);return{value:h,rest:p}}}function Jy(t,r){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r(t[n]))return n}function Zy(t,r){for(let n=0;n<t.length;n++)if(r(t[n]))return n}function eb(t){return(r,n={})=>{const a=r.match(t.matchPattern);if(!a)return null;const o=a[0],s=r.match(t.parsePattern);if(!s)return null;let l=t.valueCallback?t.valueCallback(s[0]):s[0];l=n.valueCallback?n.valueCallback(l):l;const c=r.slice(o.length);return{value:l,rest:c}}}const tb=/^(\d+)(th|st|nd|rd)?/i,nb=/\d+/i,rb={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ib={any:[/^b/i,/^(a|c)/i]},ob={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ab={any:[/1/i,/2/i,/3/i,/4/i]},sb={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ub={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},lb={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},cb={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},fb={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},hb={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},db={ordinalNumber:eb({matchPattern:tb,parsePattern:nb,valueCallback:t=>parseInt(t,10)}),era:$r({matchPatterns:rb,defaultMatchWidth:"wide",parsePatterns:ib,defaultParseWidth:"any"}),quarter:$r({matchPatterns:ob,defaultMatchWidth:"wide",parsePatterns:ab,defaultParseWidth:"any",valueCallback:t=>t+1}),month:$r({matchPatterns:sb,defaultMatchWidth:"wide",parsePatterns:ub,defaultParseWidth:"any"}),day:$r({matchPatterns:lb,defaultMatchWidth:"wide",parsePatterns:cb,defaultParseWidth:"any"}),dayPeriod:$r({matchPatterns:fb,defaultMatchWidth:"any",parsePatterns:hb,defaultParseWidth:"any"})},pb={code:"en-US",formatDistance:$y,formatLong:zy,formatRelative:Hy,localize:Xy,match:db,options:{weekStartsOn:0,firstWeekContainsDate:1}};function gb(t,r){const n=Ft(t,r?.in);return Xc(n,Ly(n))+1}function mb(t,r){const n=Ft(t,r?.in),a=+Ki(n)-+My(n);return Math.round(a/jc)+1}function Jc(t,r){const n=Ft(t,r?.in),a=n.getFullYear(),o=to(),s=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,l=mn(r?.in||t,0);l.setFullYear(a+1,0,s),l.setHours(0,0,0,0);const c=Ur(l,r),f=mn(r?.in||t,0);f.setFullYear(a,0,s),f.setHours(0,0,0,0);const h=Ur(f,r);return+n>=+c?a+1:+n>=+h?a:a-1}function yb(t,r){const n=to(),a=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=Jc(t,r),s=mn(r?.in||t,0);return s.setFullYear(o,0,a),s.setHours(0,0,0,0),Ur(s,r)}function bb(t,r){const n=Ft(t,r?.in),a=+Ur(n,r)-+yb(n,r);return Math.round(a/jc)+1}function xe(t,r){const n=t<0?"-":"",a=Math.abs(t).toString().padStart(r,"0");return n+a}const An={y(t,r){const n=t.getFullYear(),a=n>0?n:1-n;return xe(r==="yy"?a%100:a,r.length)},M(t,r){const n=t.getMonth();return r==="M"?String(n+1):xe(n+1,2)},d(t,r){return xe(t.getDate(),r.length)},a(t,r){const n=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,r){return xe(t.getHours()%12||12,r.length)},H(t,r){return xe(t.getHours(),r.length)},m(t,r){return xe(t.getMinutes(),r.length)},s(t,r){return xe(t.getSeconds(),r.length)},S(t,r){const n=r.length,a=t.getMilliseconds(),o=Math.trunc(a*Math.pow(10,n-3));return xe(o,r.length)}},pr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Vl={G:function(t,r,n){const a=t.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});case"GGGG":default:return n.era(a,{width:"wide"})}},y:function(t,r,n){if(r==="yo"){const a=t.getFullYear(),o=a>0?a:1-a;return n.ordinalNumber(o,{unit:"year"})}return An.y(t,r)},Y:function(t,r,n,a){const o=Jc(t,a),s=o>0?o:1-o;if(r==="YY"){const l=s%100;return xe(l,2)}return r==="Yo"?n.ordinalNumber(s,{unit:"year"}):xe(s,r.length)},R:function(t,r){const n=Qc(t);return xe(n,r.length)},u:function(t,r){const n=t.getFullYear();return xe(n,r.length)},Q:function(t,r,n){const a=Math.ceil((t.getMonth()+1)/3);switch(r){case"Q":return String(a);case"QQ":return xe(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,r,n){const a=Math.ceil((t.getMonth()+1)/3);switch(r){case"q":return String(a);case"qq":return xe(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,r,n){const a=t.getMonth();switch(r){case"M":case"MM":return An.M(t,r);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(t,r,n){const a=t.getMonth();switch(r){case"L":return String(a+1);case"LL":return xe(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(t,r,n,a){const o=bb(t,a);return r==="wo"?n.ordinalNumber(o,{unit:"week"}):xe(o,r.length)},I:function(t,r,n){const a=mb(t);return r==="Io"?n.ordinalNumber(a,{unit:"week"}):xe(a,r.length)},d:function(t,r,n){return r==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):An.d(t,r)},D:function(t,r,n){const a=gb(t);return r==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):xe(a,r.length)},E:function(t,r,n){const a=t.getDay();switch(r){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});case"EEEE":default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(t,r,n,a){const o=t.getDay(),s=(o-a.weekStartsOn+8)%7||7;switch(r){case"e":return String(s);case"ee":return xe(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(t,r,n,a){const o=t.getDay(),s=(o-a.weekStartsOn+8)%7||7;switch(r){case"c":return String(s);case"cc":return xe(s,r.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(t,r,n){const a=t.getDay(),o=a===0?7:a;switch(r){case"i":return String(o);case"ii":return xe(o,r.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});case"iiii":default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(t,r,n){const o=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,r,n){const a=t.getHours();let o;switch(a===12?o=pr.noon:a===0?o=pr.midnight:o=a/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,r,n){const a=t.getHours();let o;switch(a>=17?o=pr.evening:a>=12?o=pr.afternoon:a>=4?o=pr.morning:o=pr.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,r,n){if(r==="ho"){let a=t.getHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return An.h(t,r)},H:function(t,r,n){return r==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):An.H(t,r)},K:function(t,r,n){const a=t.getHours()%12;return r==="Ko"?n.ordinalNumber(a,{unit:"hour"}):xe(a,r.length)},k:function(t,r,n){let a=t.getHours();return a===0&&(a=24),r==="ko"?n.ordinalNumber(a,{unit:"hour"}):xe(a,r.length)},m:function(t,r,n){return r==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):An.m(t,r)},s:function(t,r,n){return r==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):An.s(t,r)},S:function(t,r){return An.S(t,r)},X:function(t,r,n){const a=t.getTimezoneOffset();if(a===0)return"Z";switch(r){case"X":return jl(a);case"XXXX":case"XX":return Qn(a);case"XXXXX":case"XXX":default:return Qn(a,":")}},x:function(t,r,n){const a=t.getTimezoneOffset();switch(r){case"x":return jl(a);case"xxxx":case"xx":return Qn(a);case"xxxxx":case"xxx":default:return Qn(a,":")}},O:function(t,r,n){const a=t.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+Gl(a,":");case"OOOO":default:return"GMT"+Qn(a,":")}},z:function(t,r,n){const a=t.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+Gl(a,":");case"zzzz":default:return"GMT"+Qn(a,":")}},t:function(t,r,n){const a=Math.trunc(+t/1e3);return xe(a,r.length)},T:function(t,r,n){return xe(+t,r.length)}};function Gl(t,r=""){const n=t>0?"-":"+",a=Math.abs(t),o=Math.trunc(a/60),s=a%60;return s===0?n+String(o):n+String(o)+r+xe(s,2)}function jl(t,r){return t%60===0?(t>0?"-":"+")+xe(Math.abs(t)/60,2):Qn(t,r)}function Qn(t,r=""){const n=t>0?"-":"+",a=Math.abs(t),o=xe(Math.trunc(a/60),2),s=xe(a%60,2);return n+o+r+s}const Ql=(t,r)=>{switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},Zc=(t,r)=>{switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},wb=(t,r)=>{const n=t.match(/(P+)(p+)?/)||[],a=n[1],o=n[2];if(!o)return Ql(t,r);let s;switch(a){case"P":s=r.dateTime({width:"short"});break;case"PP":s=r.dateTime({width:"medium"});break;case"PPP":s=r.dateTime({width:"long"});break;case"PPPP":default:s=r.dateTime({width:"full"});break}return s.replace("{{date}}",Ql(a,r)).replace("{{time}}",Zc(o,r))},vb={p:Zc,P:wb},xb=/^D+$/,_b=/^Y+$/,kb=["D","DD","YY","YYYY"];function Sb(t){return xb.test(t)}function Ib(t){return _b.test(t)}function Cb(t,r,n){const a=Eb(t,r,n);if(console.warn(a),kb.includes(t))throw new RangeError(a)}function Eb(t,r,n){const a=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${r}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Tb=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ab=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Pb=/^'([^]*?)'?$/,Mb=/''/g,Ob=/[a-zA-Z]/;function Xi(t,r,n){const a=to(),o=a.locale??pb,s=a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,l=a.weekStartsOn??a.locale?.options?.weekStartsOn??0,c=Ft(t,n?.in);if(!Fy(c))throw new RangeError("Invalid time value");let f=r.match(Ab).map(p=>{const g=p[0];if(g==="p"||g==="P"){const b=vb[g];return b(p,o.formatLong)}return p}).join("").match(Tb).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const g=p[0];if(g==="'")return{isToken:!1,value:Fb(p)};if(Vl[g])return{isToken:!0,value:p};if(g.match(Ob))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:p}});o.localize.preprocessor&&(f=o.localize.preprocessor(c,f));const h={firstWeekContainsDate:s,weekStartsOn:l,locale:o};return f.map(p=>{if(!p.isToken)return p.value;const g=p.value;(Ib(g)||Sb(g))&&Cb(g,r,String(t));const b=Vl[g[0]];return b(c,g,o.localize,h)}).join("")}function Fb(t){const r=t.match(Pb);return r?r[1].replace(Mb,"'"):t}function Db(t,r,n){return Ay(t,-r,n)}const ef={almostDailyReport:{folder:"l1almostDailyReport",name:"Daily Report"},"10daysReport":{folder:"l2tenL1ReportsReview",name:"10 Days Review"},"30daysReport":{folder:"l3ThreeL2Review",name:"30 Days Review"},"150daysReport":{folder:"l4FiveL3Review",name:"150 Days Review"}},Xn={ALMOST_DAILY:"almostDailyReport",TEN_DAYS:"10daysReport",THIRTY_DAYS:"30daysReport",ONE_FIFTY_DAYS:"150daysReport"},bt=Zt(en.SavingService),Vr={get baseOutput(){return`${vt?.projectDir??"vault"}/${vt?.outputDir??"outputs"}`},get fileExtension(){return vt?.reportFileExtension??".md"},get reportFolders(){const t={};for(const[r,{folder:n}]of Object.entries(ef))t[r]=`${this.baseOutput}/${n}`;return t},_today(){return Xi(new Date,"yyyyMMdd")},_getFormattedDate(){return Xi(new Date,"dd.MM.yyyy")},_getDaysRemainingInYear(){const t=new Date,n=new Date(t.getFullYear(),11,31).getTime()-t.getTime(),a=Math.ceil(n/(1e3*60*60*24));return String(a).padStart(3,"0")},async _ensureFolder(t){ke.vault.getAbstractFileByPath(t)||(bt.dev(`Creating folder: ${t}`),await ke.vault.createFolder(t))},async _listFiles(t){await this._ensureFolder(t);const r=ke.vault.getAbstractFileByPath(t);return!r||!r.children?[]:r.children.filter(n=>"extension"in n&&n.extension==="md").map(n=>n.name)},async _openFile(t){try{bt.dev(`_openFile start: ${t.path}`);const r=ke.workspace.getLeaf(!0);if(await r.openFile(t),bt.dev(`Main leaf opened file: ${t.path}`),vt?.devMode){const n=ke.workspace.createLeafBySplit(r,"vertical",!1);await n.openFile(t);const a={type:"markdown",state:{file:t.path,mode:"source"}};try{await n.setViewState(a),bt.dev("DevMode: right leaf forced to source mode")}catch(o){bt.warn(`Failed to force right leaf to source mode: ${o.message}`)}}}catch(r){bt.error(`Failed to open file ${t.path}: ${r.message}`)}},async write(t){const r=t.data??t.content;if(!r)throw new Error("No content provided for write()");const n=this.reportFolders[t.type];if(!n)throw new Error(`Unknown report type: ${t.type}`);await this._ensureFolder(n);const a=this._getDaysRemainingInYear(),o=this._getFormattedDate(),l=(await this._listFiles(n)).length+1,c=String(l).padStart(5,"0"),f=`${a}-${o}-${c}-${t.type}${this.fileExtension}`,h=`${n}/${f}`;if(ke.vault.getAbstractFileByPath(h))return bt.warn(`File already exists: ${h}. Skipping write.`),h;bt.info(`Writing new file: ${h}`);const g=await ke.vault.create(h,r);return t?.open!==!1&&await this._openFile(g),h},async writeGeneral(t,r,n=!1){let a;const o=ke.vault.getAbstractFileByPath(t);if(o)if("extension"in o)bt.info(`Overwriting existing file: ${t}`),await ke.vault.modify(o,r),a=o;else throw bt.error(`Path exists but is not a file: ${t}`),new Error(`Path exists but is not a file: ${t}`);else bt.info(`Creating new file: ${t}`),a=await ke.vault.create(t,r);return n&&await this._openFile(a),t},async delete(t){const r=ke.vault.getAbstractFileByPath(t);r?(bt.info(`Deleting file: ${t}`),await ke.vault.delete(r)):bt.warn(`Cannot delete; file not found: ${t}`)}};function Kl(t){if(t)throw t}var xa,Xl;function Lb(){if(Xl)return xa;Xl=1;var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=Object.defineProperty,a=Object.getOwnPropertyDescriptor,o=function(h){return typeof Array.isArray=="function"?Array.isArray(h):r.call(h)==="[object Array]"},s=function(h){if(!h||r.call(h)!=="[object Object]")return!1;var p=t.call(h,"constructor"),g=h.constructor&&h.constructor.prototype&&t.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!p&&!g)return!1;var b;for(b in h);return typeof b>"u"||t.call(h,b)},l=function(h,p){n&&p.name==="__proto__"?n(h,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):h[p.name]=p.newValue},c=function(h,p){if(p==="__proto__")if(t.call(h,p)){if(a)return a(h,p).value}else return;return h[p]};return xa=function f(){var h,p,g,b,y,C,I=arguments[0],M=1,P=arguments.length,$=!1;for(typeof I=="boolean"&&($=I,I=arguments[1]||{},M=2),(I==null||typeof I!="object"&&typeof I!="function")&&(I={});M<P;++M)if(h=arguments[M],h!=null)for(p in h)g=c(I,p),b=c(h,p),I!==b&&($&&b&&(s(b)||(y=o(b)))?(y?(y=!1,C=g&&o(g)?g:[]):C=g&&s(g)?g:{},l(I,{name:p,newValue:f($,C,b)})):typeof b<"u"&&l(I,{name:p,newValue:b}));return I},xa}var Rb=Lb();const _a=ts(Rb);function qa(t){if(typeof t!="object"||t===null)return!1;const r=Object.getPrototypeOf(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function $b(){const t=[],r={run:n,use:a};return r;function n(...o){let s=-1;const l=o.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);c(null,...o);function c(f,...h){const p=t[++s];let g=-1;if(f){l(f);return}for(;++g<o.length;)(h[g]===null||h[g]===void 0)&&(h[g]=o[g]);o=h,p?Bb(p,c)(...h):l(null,...h)}}function a(o){if(typeof o!="function")throw new TypeError("Expected `middelware` to be a function, not "+o);return t.push(o),r}}function Bb(t,r){let n;return a;function a(...l){const c=t.length>l.length;let f;c&&l.push(o);try{f=t.apply(this,l)}catch(h){const p=h;if(c&&n)throw p;return o(p)}c||(f&&f.then&&typeof f.then=="function"?f.then(s,o):f instanceof Error?o(f):s(f))}function o(l,...c){n||(n=!0,r(l,...c))}function s(l){o(null,l)}}function Hr(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Jl(t.position):"start"in t||"end"in t?Jl(t):"line"in t||"column"in t?Ha(t):""}function Ha(t){return Zl(t&&t.line)+":"+Zl(t&&t.column)}function Jl(t){return Ha(t&&t.start)+"-"+Ha(t&&t.end)}function Zl(t){return t&&typeof t=="number"?t:1}class at extends Error{constructor(r,n,a){super(),typeof n=="string"&&(a=n,n=void 0);let o="",s={},l=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof r=="string"?o=r:!s.cause&&r&&(l=!0,o=r.message,s.cause=r),!s.ruleId&&!s.source&&typeof a=="string"){const f=a.indexOf(":");f===-1?s.ruleId=a:(s.source=a.slice(0,f),s.ruleId=a.slice(f+1))}if(!s.place&&s.ancestors&&s.ancestors){const f=s.ancestors[s.ancestors.length-1];f&&(s.place=f.position)}const c=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=o,this.line=c?c.line:void 0,this.name=Hr(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=l&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}at.prototype.file="";at.prototype.name="";at.prototype.reason="";at.prototype.message="";at.prototype.stack="";at.prototype.column=void 0;at.prototype.line=void 0;at.prototype.ancestors=void 0;at.prototype.cause=void 0;at.prototype.fatal=void 0;at.prototype.place=void 0;at.prototype.ruleId=void 0;at.prototype.source=void 0;const Kt={basename:Nb,dirname:Wb,extname:zb,join:qb,sep:"/"};function Nb(t,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');jr(t);let n=0,a=-1,o=t.length,s;if(r===void 0||r.length===0||r.length>t.length){for(;o--;)if(t.codePointAt(o)===47){if(s){n=o+1;break}}else a<0&&(s=!0,a=o+1);return a<0?"":t.slice(n,a)}if(r===t)return"";let l=-1,c=r.length-1;for(;o--;)if(t.codePointAt(o)===47){if(s){n=o+1;break}}else l<0&&(s=!0,l=o+1),c>-1&&(t.codePointAt(o)===r.codePointAt(c--)?c<0&&(a=o):(c=-1,a=l));return n===a?a=l:a<0&&(a=t.length),t.slice(n,a)}function Wb(t){if(jr(t),t.length===0)return".";let r=-1,n=t.length,a;for(;--n;)if(t.codePointAt(n)===47){if(a){r=n;break}}else a||(a=!0);return r<0?t.codePointAt(0)===47?"/":".":r===1&&t.codePointAt(0)===47?"//":t.slice(0,r)}function zb(t){jr(t);let r=t.length,n=-1,a=0,o=-1,s=0,l;for(;r--;){const c=t.codePointAt(r);if(c===47){if(l){a=r+1;break}continue}n<0&&(l=!0,n=r+1),c===46?o<0?o=r:s!==1&&(s=1):o>-1&&(s=-1)}return o<0||n<0||s===0||s===1&&o===n-1&&o===a+1?"":t.slice(o,n)}function qb(...t){let r=-1,n;for(;++r<t.length;)jr(t[r]),t[r]&&(n=n===void 0?t[r]:n+"/"+t[r]);return n===void 0?".":Hb(n)}function Hb(t){jr(t);const r=t.codePointAt(0)===47;let n=Yb(t,!r);return n.length===0&&!r&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),r?"/"+n:n}function Yb(t,r){let n="",a=0,o=-1,s=0,l=-1,c,f;for(;++l<=t.length;){if(l<t.length)c=t.codePointAt(l);else{if(c===47)break;c=47}if(c===47){if(!(o===l-1||s===1))if(o!==l-1&&s===2){if(n.length<2||a!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",a=0):(n=n.slice(0,f),a=n.length-1-n.lastIndexOf("/")),o=l,s=0;continue}}else if(n.length>0){n="",a=0,o=l,s=0;continue}}r&&(n=n.length>0?n+"/..":"..",a=2)}else n.length>0?n+="/"+t.slice(o+1,l):n=t.slice(o+1,l),a=l-o-1;o=l,s=0}else c===46&&s>-1?s++:s=-1}return n}function jr(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Ub={cwd:Vb};function Vb(){return"/"}function Ya(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function Gb(t){if(typeof t=="string")t=new URL(t);else if(!Ya(t)){const r=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw r.code="ERR_INVALID_ARG_TYPE",r}if(t.protocol!=="file:"){const r=new TypeError("The URL must be of scheme file");throw r.code="ERR_INVALID_URL_SCHEME",r}return jb(t)}function jb(t){if(t.hostname!==""){const a=new TypeError('File URL host must be "localhost" or empty on darwin');throw a.code="ERR_INVALID_FILE_URL_HOST",a}const r=t.pathname;let n=-1;for(;++n<r.length;)if(r.codePointAt(n)===37&&r.codePointAt(n+1)===50){const a=r.codePointAt(n+2);if(a===70||a===102){const o=new TypeError("File URL path must not include encoded / characters");throw o.code="ERR_INVALID_FILE_URL_PATH",o}}return decodeURIComponent(r)}const ka=["history","path","basename","stem","extname","dirname"];class Qb{constructor(r){let n;r?Ya(r)?n={path:r}:typeof r=="string"||Kb(r)?n={value:r}:n=r:n={},this.cwd="cwd"in n?"":Ub.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let a=-1;for(;++a<ka.length;){const s=ka[a];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let o;for(o in n)ka.includes(o)||(this[o]=n[o])}get basename(){return typeof this.path=="string"?Kt.basename(this.path):void 0}set basename(r){Ia(r,"basename"),Sa(r,"basename"),this.path=Kt.join(this.dirname||"",r)}get dirname(){return typeof this.path=="string"?Kt.dirname(this.path):void 0}set dirname(r){ec(this.basename,"dirname"),this.path=Kt.join(r||"",this.basename)}get extname(){return typeof this.path=="string"?Kt.extname(this.path):void 0}set extname(r){if(Sa(r,"extname"),ec(this.dirname,"extname"),r){if(r.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(r.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Kt.join(this.dirname,this.stem+(r||""))}get path(){return this.history[this.history.length-1]}set path(r){Ya(r)&&(r=Gb(r)),Ia(r,"path"),this.path!==r&&this.history.push(r)}get stem(){return typeof this.path=="string"?Kt.basename(this.path,this.extname):void 0}set stem(r){Ia(r,"stem"),Sa(r,"stem"),this.path=Kt.join(this.dirname||"",r+(this.extname||""))}fail(r,n,a){const o=this.message(r,n,a);throw o.fatal=!0,o}info(r,n,a){const o=this.message(r,n,a);return o.fatal=void 0,o}message(r,n,a){const o=new at(r,n,a);return this.path&&(o.name=this.path+":"+o.name,o.file=this.path),o.fatal=!1,this.messages.push(o),o}toString(r){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(r||void 0).decode(this.value)}}function Sa(t,r){if(t&&t.includes(Kt.sep))throw new Error("`"+r+"` cannot be a path: did not expect `"+Kt.sep+"`")}function Ia(t,r){if(!t)throw new Error("`"+r+"` cannot be empty")}function ec(t,r){if(!t)throw new Error("Setting `"+r+"` requires `path` to be set too")}function Kb(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Xb=(function(t){const a=this.constructor.prototype,o=a[t],s=function(){return o.apply(s,arguments)};return Object.setPrototypeOf(s,a),s}),Jb={}.hasOwnProperty;class ns extends Xb{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=$b()}copy(){const r=new ns;let n=-1;for(;++n<this.attachers.length;){const a=this.attachers[n];r.use(...a)}return r.data(_a(!0,{},this.namespace)),r}data(r,n){return typeof r=="string"?arguments.length===2?(Ta("data",this.frozen),this.namespace[r]=n,this):Jb.call(this.namespace,r)&&this.namespace[r]||void 0:r?(Ta("data",this.frozen),this.namespace=r,this):this.namespace}freeze(){if(this.frozen)return this;const r=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...a]=this.attachers[this.freezeIndex];if(a[0]===!1)continue;a[0]===!0&&(a[0]=void 0);const o=n.call(r,...a);typeof o=="function"&&this.transformers.use(o)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(r){this.freeze();const n=qi(r),a=this.parser||this.Parser;return Ca("parse",a),a(String(n),n)}process(r,n){const a=this;return this.freeze(),Ca("process",this.parser||this.Parser),Ea("process",this.compiler||this.Compiler),n?o(void 0,n):new Promise(o);function o(s,l){const c=qi(r),f=a.parse(c);a.run(f,c,function(p,g,b){if(p||!g||!b)return h(p);const y=g,C=a.stringify(y,b);ew(C)?b.value=C:b.result=C,h(p,b)});function h(p,g){p||!g?l(p):s?s(g):n(void 0,g)}}}processSync(r){let n=!1,a;return this.freeze(),Ca("processSync",this.parser||this.Parser),Ea("processSync",this.compiler||this.Compiler),this.process(r,o),nc("processSync","process",n),a;function o(s,l){n=!0,Kl(s),a=l}}run(r,n,a){tc(r),this.freeze();const o=this.transformers;return!a&&typeof n=="function"&&(a=n,n=void 0),a?s(void 0,a):new Promise(s);function s(l,c){const f=qi(n);o.run(r,f,h);function h(p,g,b){const y=g||r;p?c(p):l?l(y):a(void 0,y,b)}}}runSync(r,n){let a=!1,o;return this.run(r,n,s),nc("runSync","run",a),o;function s(l,c){Kl(l),o=c,a=!0}}stringify(r,n){this.freeze();const a=qi(n),o=this.compiler||this.Compiler;return Ea("stringify",o),tc(r),o(r,a)}use(r,...n){const a=this.attachers,o=this.namespace;if(Ta("use",this.frozen),r!=null)if(typeof r=="function")f(r,n);else if(typeof r=="object")Array.isArray(r)?c(r):l(r);else throw new TypeError("Expected usable value, not `"+r+"`");return this;function s(h){if(typeof h=="function")f(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[p,...g]=h;f(p,g)}else l(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function l(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(h.plugins),h.settings&&(o.settings=_a(!0,o.settings,h.settings))}function c(h){let p=-1;if(h!=null)if(Array.isArray(h))for(;++p<h.length;){const g=h[p];s(g)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function f(h,p){let g=-1,b=-1;for(;++g<a.length;)if(a[g][0]===h){b=g;break}if(b===-1)a.push([h,...p]);else if(p.length>0){let[y,...C]=p;const I=a[b][1];qa(I)&&qa(y)&&(y=_a(!0,I,y)),a[b]=[h,y,...C]}}}}const Ua=new ns().freeze();function Ca(t,r){if(typeof r!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Ea(t,r){if(typeof r!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Ta(t,r){if(r)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function tc(t){if(!qa(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function nc(t,r,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+r+"` instead")}function qi(t){return Zb(t)?t:new Qb(t)}function Zb(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function ew(t){return typeof t=="string"||tw(t)}function tw(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const nw={};function rs(t,r){const n=nw,a=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,o=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return tf(t,a,o)}function tf(t,r,n){if(rw(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(r&&"alt"in t&&t.alt)return t.alt;if("children"in t)return rc(t.children,r,n)}return Array.isArray(t)?rc(t,r,n):""}function rc(t,r,n){const a=[];let o=-1;for(;++o<t.length;)a[o]=tf(t[o],r,n);return a.join("")}function rw(t){return!!(t&&typeof t=="object")}const ic=document.createElement("i");function is(t){const r="&"+t+";";ic.innerHTML=r;const n=ic.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===r?!1:n}function Jt(t,r,n,a){const o=t.length;let s=0,l;if(r<0?r=-r>o?0:o+r:r=r>o?o:r,n=n>0?n:0,a.length<1e4)l=Array.from(a),l.unshift(r,n),t.splice(...l);else for(n&&t.splice(r,n);s<a.length;)l=a.slice(s,s+1e4),l.unshift(r,0),t.splice(...l),s+=1e4,r+=1e4}function Ot(t,r){return t.length>0?(Jt(t,t.length,0,r),t):r}const oc={}.hasOwnProperty;function iw(t){const r={};let n=-1;for(;++n<t.length;)ow(r,t[n]);return r}function ow(t,r){let n;for(n in r){const o=(oc.call(t,n)?t[n]:void 0)||(t[n]={}),s=r[n];let l;if(s)for(l in s){oc.call(o,l)||(o[l]=[]);const c=s[l];aw(o[l],Array.isArray(c)?c:c?[c]:[])}}}function aw(t,r){let n=-1;const a=[];for(;++n<r.length;)(r[n].add==="after"?t:a).push(r[n]);Jt(t,0,0,a)}function nf(t,r){const n=Number.parseInt(t,r);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function vr(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Xt=Dn(/[A-Za-z]/),Ht=Dn(/[\dA-Za-z]/),sw=Dn(/[#-'*+\--9=?A-Z^-~]/);function Va(t){return t!==null&&(t<32||t===127)}const Ga=Dn(/\d/),uw=Dn(/[\dA-Fa-f]/),lw=Dn(/[!-/:-@[-`{-~]/);function te(t){return t!==null&&t<-2}function ot(t){return t!==null&&(t<0||t===32)}function ye(t){return t===-2||t===-1||t===32}const cw=Dn(new RegExp("\\p{P}|\\p{S}","u")),fw=Dn(/\s/);function Dn(t){return r;function r(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Ie(t,r,n,a){const o=a?a-1:Number.POSITIVE_INFINITY;let s=0;return l;function l(f){return ye(f)?(t.enter(n),c(f)):r(f)}function c(f){return ye(f)&&s++<o?(t.consume(f),c):(t.exit(n),r(f))}}const hw={tokenize:dw};function dw(t){const r=t.attempt(this.parser.constructs.contentInitial,a,o);let n;return r;function a(c){if(c===null){t.consume(c);return}return t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),Ie(t,r,"linePrefix")}function o(c){return t.enter("paragraph"),s(c)}function s(c){const f=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,l(c)}function l(c){if(c===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(c);return}return te(c)?(t.consume(c),t.exit("chunkText"),s):(t.consume(c),l)}}const pw={tokenize:gw},ac={tokenize:mw};function gw(t){const r=this,n=[];let a=0,o,s,l;return c;function c(N){if(a<n.length){const z=n[a];return r.containerState=z[1],t.attempt(z[0].continuation,f,h)(N)}return h(N)}function f(N){if(a++,r.containerState._closeFlow){r.containerState._closeFlow=void 0,o&&$();const z=r.events.length;let F=z,A;for(;F--;)if(r.events[F][0]==="exit"&&r.events[F][1].type==="chunkFlow"){A=r.events[F][1].end;break}P(a);let Y=z;for(;Y<r.events.length;)r.events[Y][1].end={...A},Y++;return Jt(r.events,F+1,0,r.events.slice(z)),r.events.length=Y,h(N)}return c(N)}function h(N){if(a===n.length){if(!o)return b(N);if(o.currentConstruct&&o.currentConstruct.concrete)return C(N);r.interrupt=!!(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return r.containerState={},t.check(ac,p,g)(N)}function p(N){return o&&$(),P(a),b(N)}function g(N){return r.parser.lazy[r.now().line]=a!==n.length,l=r.now().offset,C(N)}function b(N){return r.containerState={},t.attempt(ac,y,C)(N)}function y(N){return a++,n.push([r.currentConstruct,r.containerState]),b(N)}function C(N){if(N===null){o&&$(),P(0),t.consume(N);return}return o=o||r.parser.flow(r.now()),t.enter("chunkFlow",{_tokenizer:o,contentType:"flow",previous:s}),I(N)}function I(N){if(N===null){M(t.exit("chunkFlow"),!0),P(0),t.consume(N);return}return te(N)?(t.consume(N),M(t.exit("chunkFlow")),a=0,r.interrupt=void 0,c):(t.consume(N),I)}function M(N,z){const F=r.sliceStream(N);if(z&&F.push(null),N.previous=s,s&&(s.next=N),s=N,o.defineSkip(N.start),o.write(F),r.parser.lazy[N.start.line]){let A=o.events.length;for(;A--;)if(o.events[A][1].start.offset<l&&(!o.events[A][1].end||o.events[A][1].end.offset>l))return;const Y=r.events.length;let G=Y,ee,ce;for(;G--;)if(r.events[G][0]==="exit"&&r.events[G][1].type==="chunkFlow"){if(ee){ce=r.events[G][1].end;break}ee=!0}for(P(a),A=Y;A<r.events.length;)r.events[A][1].end={...ce},A++;Jt(r.events,G+1,0,r.events.slice(Y)),r.events.length=A}}function P(N){let z=n.length;for(;z-- >N;){const F=n[z];r.containerState=F[1],F[0].exit.call(r,t)}n.length=N}function $(){o.write([null]),s=void 0,o=void 0,r.containerState._closeFlow=void 0}}function mw(t,r,n){return Ie(t,t.attempt(this.parser.constructs.document,r,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ji(t){if(t===null||ot(t)||fw(t))return 1;if(cw(t))return 2}function os(t,r,n){const a=[];let o=-1;for(;++o<t.length;){const s=t[o].resolveAll;s&&!a.includes(s)&&(r=s(r,n),a.push(s))}return r}const ja={name:"attention",resolveAll:yw,tokenize:bw};function yw(t,r){let n=-1,a,o,s,l,c,f,h,p;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(a=n;a--;)if(t[a][0]==="exit"&&t[a][1].type==="attentionSequence"&&t[a][1]._open&&r.sliceSerialize(t[a][1]).charCodeAt(0)===r.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[a][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[a][1].end.offset-t[a][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;f=t[a][1].end.offset-t[a][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const g={...t[a][1].end},b={...t[n][1].start};sc(g,-f),sc(b,f),l={type:f>1?"strongSequence":"emphasisSequence",start:g,end:{...t[a][1].end}},c={type:f>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:b},s={type:f>1?"strongText":"emphasisText",start:{...t[a][1].end},end:{...t[n][1].start}},o={type:f>1?"strong":"emphasis",start:{...l.start},end:{...c.end}},t[a][1].end={...l.start},t[n][1].start={...c.end},h=[],t[a][1].end.offset-t[a][1].start.offset&&(h=Ot(h,[["enter",t[a][1],r],["exit",t[a][1],r]])),h=Ot(h,[["enter",o,r],["enter",l,r],["exit",l,r],["enter",s,r]]),h=Ot(h,os(r.parser.constructs.insideSpan.null,t.slice(a+1,n),r)),h=Ot(h,[["exit",s,r],["enter",c,r],["exit",c,r],["exit",o,r]]),t[n][1].end.offset-t[n][1].start.offset?(p=2,h=Ot(h,[["enter",t[n][1],r],["exit",t[n][1],r]])):p=0,Jt(t,a-1,n-a+3,h),n=a+h.length-p-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function bw(t,r){const n=this.parser.constructs.attentionMarkers.null,a=this.previous,o=Ji(a);let s;return l;function l(f){return s=f,t.enter("attentionSequence"),c(f)}function c(f){if(f===s)return t.consume(f),c;const h=t.exit("attentionSequence"),p=Ji(f),g=!p||p===2&&o||n.includes(f),b=!o||o===2&&p||n.includes(a);return h._open=!!(s===42?g:g&&(o||!b)),h._close=!!(s===42?b:b&&(p||!g)),r(f)}}function sc(t,r){t.column+=r,t.offset+=r,t._bufferIndex+=r}const ww={name:"autolink",tokenize:vw};function vw(t,r,n){let a=0;return o;function o(y){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(y){return Xt(y)?(t.consume(y),l):y===64?n(y):h(y)}function l(y){return y===43||y===45||y===46||Ht(y)?(a=1,c(y)):h(y)}function c(y){return y===58?(t.consume(y),a=0,f):(y===43||y===45||y===46||Ht(y))&&a++<32?(t.consume(y),c):(a=0,h(y))}function f(y){return y===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),r):y===null||y===32||y===60||Va(y)?n(y):(t.consume(y),f)}function h(y){return y===64?(t.consume(y),p):sw(y)?(t.consume(y),h):n(y)}function p(y){return Ht(y)?g(y):n(y)}function g(y){return y===46?(t.consume(y),a=0,p):y===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),r):b(y)}function b(y){if((y===45||Ht(y))&&a++<63){const C=y===45?b:g;return t.consume(y),C}return n(y)}}const no={partial:!0,tokenize:xw};function xw(t,r,n){return a;function a(s){return ye(s)?Ie(t,o,"linePrefix")(s):o(s)}function o(s){return s===null||te(s)?r(s):n(s)}}const rf={continuation:{tokenize:kw},exit:Sw,name:"blockQuote",tokenize:_w};function _w(t,r,n){const a=this;return o;function o(l){if(l===62){const c=a.containerState;return c.open||(t.enter("blockQuote",{_container:!0}),c.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(l),t.exit("blockQuoteMarker"),s}return n(l)}function s(l){return ye(l)?(t.enter("blockQuotePrefixWhitespace"),t.consume(l),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),r):(t.exit("blockQuotePrefix"),r(l))}}function kw(t,r,n){const a=this;return o;function o(l){return ye(l)?Ie(t,s,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):s(l)}function s(l){return t.attempt(rf,r,n)(l)}}function Sw(t){t.exit("blockQuote")}const of={name:"characterEscape",tokenize:Iw};function Iw(t,r,n){return a;function a(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),o}function o(s){return lw(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),r):n(s)}}const af={name:"characterReference",tokenize:Cw};function Cw(t,r,n){const a=this;let o=0,s,l;return c;function c(g){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(g),t.exit("characterReferenceMarker"),f}function f(g){return g===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(g),t.exit("characterReferenceMarkerNumeric"),h):(t.enter("characterReferenceValue"),s=31,l=Ht,p(g))}function h(g){return g===88||g===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(g),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,l=uw,p):(t.enter("characterReferenceValue"),s=7,l=Ga,p(g))}function p(g){if(g===59&&o){const b=t.exit("characterReferenceValue");return l===Ht&&!is(a.sliceSerialize(b))?n(g):(t.enter("characterReferenceMarker"),t.consume(g),t.exit("characterReferenceMarker"),t.exit("characterReference"),r)}return l(g)&&o++<s?(t.consume(g),p):n(g)}}const uc={partial:!0,tokenize:Tw},lc={concrete:!0,name:"codeFenced",tokenize:Ew};function Ew(t,r,n){const a=this,o={partial:!0,tokenize:F};let s=0,l=0,c;return f;function f(A){return h(A)}function h(A){const Y=a.events[a.events.length-1];return s=Y&&Y[1].type==="linePrefix"?Y[2].sliceSerialize(Y[1],!0).length:0,c=A,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),p(A)}function p(A){return A===c?(l++,t.consume(A),p):l<3?n(A):(t.exit("codeFencedFenceSequence"),ye(A)?Ie(t,g,"whitespace")(A):g(A))}function g(A){return A===null||te(A)?(t.exit("codeFencedFence"),a.interrupt?r(A):t.check(uc,I,z)(A)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),b(A))}function b(A){return A===null||te(A)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),g(A)):ye(A)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Ie(t,y,"whitespace")(A)):A===96&&A===c?n(A):(t.consume(A),b)}function y(A){return A===null||te(A)?g(A):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),C(A))}function C(A){return A===null||te(A)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),g(A)):A===96&&A===c?n(A):(t.consume(A),C)}function I(A){return t.attempt(o,z,M)(A)}function M(A){return t.enter("lineEnding"),t.consume(A),t.exit("lineEnding"),P}function P(A){return s>0&&ye(A)?Ie(t,$,"linePrefix",s+1)(A):$(A)}function $(A){return A===null||te(A)?t.check(uc,I,z)(A):(t.enter("codeFlowValue"),N(A))}function N(A){return A===null||te(A)?(t.exit("codeFlowValue"),$(A)):(t.consume(A),N)}function z(A){return t.exit("codeFenced"),r(A)}function F(A,Y,G){let ee=0;return ce;function ce(he){return A.enter("lineEnding"),A.consume(he),A.exit("lineEnding"),Q}function Q(he){return A.enter("codeFencedFence"),ye(he)?Ie(A,j,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(he):j(he)}function j(he){return he===c?(A.enter("codeFencedFenceSequence"),be(he)):G(he)}function be(he){return he===c?(ee++,A.consume(he),be):ee>=l?(A.exit("codeFencedFenceSequence"),ye(he)?Ie(A,Ae,"whitespace")(he):Ae(he)):G(he)}function Ae(he){return he===null||te(he)?(A.exit("codeFencedFence"),Y(he)):G(he)}}}function Tw(t,r,n){const a=this;return o;function o(l){return l===null?n(l):(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),s)}function s(l){return a.parser.lazy[a.now().line]?n(l):r(l)}}const Aa={name:"codeIndented",tokenize:Pw},Aw={partial:!0,tokenize:Mw};function Pw(t,r,n){const a=this;return o;function o(h){return t.enter("codeIndented"),Ie(t,s,"linePrefix",5)(h)}function s(h){const p=a.events[a.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?l(h):n(h)}function l(h){return h===null?f(h):te(h)?t.attempt(Aw,l,f)(h):(t.enter("codeFlowValue"),c(h))}function c(h){return h===null||te(h)?(t.exit("codeFlowValue"),l(h)):(t.consume(h),c)}function f(h){return t.exit("codeIndented"),r(h)}}function Mw(t,r,n){const a=this;return o;function o(l){return a.parser.lazy[a.now().line]?n(l):te(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),o):Ie(t,s,"linePrefix",5)(l)}function s(l){const c=a.events[a.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?r(l):te(l)?o(l):n(l)}}const Ow={name:"codeText",previous:Dw,resolve:Fw,tokenize:Lw};function Fw(t){let r=t.length-4,n=3,a,o;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[r][1].type==="lineEnding"||t[r][1].type==="space")){for(a=n;++a<r;)if(t[a][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[r][1].type="codeTextPadding",n+=2,r-=2;break}}for(a=n-1,r++;++a<=r;)o===void 0?a!==r&&t[a][1].type!=="lineEnding"&&(o=a):(a===r||t[a][1].type==="lineEnding")&&(t[o][1].type="codeTextData",a!==o+2&&(t[o][1].end=t[a-1][1].end,t.splice(o+2,a-o-2),r-=a-o-2,a=o+2),o=void 0);return t}function Dw(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Lw(t,r,n){let a=0,o,s;return l;function l(g){return t.enter("codeText"),t.enter("codeTextSequence"),c(g)}function c(g){return g===96?(t.consume(g),a++,c):(t.exit("codeTextSequence"),f(g))}function f(g){return g===null?n(g):g===32?(t.enter("space"),t.consume(g),t.exit("space"),f):g===96?(s=t.enter("codeTextSequence"),o=0,p(g)):te(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),f):(t.enter("codeTextData"),h(g))}function h(g){return g===null||g===32||g===96||te(g)?(t.exit("codeTextData"),f(g)):(t.consume(g),h)}function p(g){return g===96?(t.consume(g),o++,p):o===a?(t.exit("codeTextSequence"),t.exit("codeText"),r(g)):(s.type="codeTextData",h(g))}}class Rw{constructor(r){this.left=r?[...r]:[],this.right=[]}get(r){if(r<0||r>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+r+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return r<this.left.length?this.left[r]:this.right[this.right.length-r+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(r,n){const a=n??Number.POSITIVE_INFINITY;return a<this.left.length?this.left.slice(r,a):r>this.left.length?this.right.slice(this.right.length-a+this.left.length,this.right.length-r+this.left.length).reverse():this.left.slice(r).concat(this.right.slice(this.right.length-a+this.left.length).reverse())}splice(r,n,a){const o=n||0;this.setCursor(Math.trunc(r));const s=this.right.splice(this.right.length-o,Number.POSITIVE_INFINITY);return a&&Br(this.left,a),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(r){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(r)}pushMany(r){this.setCursor(Number.POSITIVE_INFINITY),Br(this.left,r)}unshift(r){this.setCursor(0),this.right.push(r)}unshiftMany(r){this.setCursor(0),Br(this.right,r.reverse())}setCursor(r){if(!(r===this.left.length||r>this.left.length&&this.right.length===0||r<0&&this.left.length===0))if(r<this.left.length){const n=this.left.splice(r,Number.POSITIVE_INFINITY);Br(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-r,Number.POSITIVE_INFINITY);Br(this.left,n.reverse())}}}function Br(t,r){let n=0;if(r.length<1e4)t.push(...r);else for(;n<r.length;)t.push(...r.slice(n,n+1e4)),n+=1e4}function sf(t){const r={};let n=-1,a,o,s,l,c,f,h;const p=new Rw(t);for(;++n<p.length;){for(;n in r;)n=r[n];if(a=p.get(n),n&&a[1].type==="chunkFlow"&&p.get(n-1)[1].type==="listItemPrefix"&&(f=a[1]._tokenizer.events,s=0,s<f.length&&f[s][1].type==="lineEndingBlank"&&(s+=2),s<f.length&&f[s][1].type==="content"))for(;++s<f.length&&f[s][1].type!=="content";)f[s][1].type==="chunkText"&&(f[s][1]._isInFirstContentOfListItem=!0,s++);if(a[0]==="enter")a[1].contentType&&(Object.assign(r,$w(p,n)),n=r[n],h=!0);else if(a[1]._container){for(s=n,o=void 0;s--;)if(l=p.get(s),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(o&&(p.get(o)[1].type="lineEndingBlank"),l[1].type="lineEnding",o=s);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;o&&(a[1].end={...p.get(o)[1].start},c=p.slice(o,n),c.unshift(a),p.splice(o,n-o+1,c))}}return Jt(t,0,Number.POSITIVE_INFINITY,p.slice(0)),!h}function $w(t,r){const n=t.get(r)[1],a=t.get(r)[2];let o=r-1;const s=[];let l=n._tokenizer;l||(l=a.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const c=l.events,f=[],h={};let p,g,b=-1,y=n,C=0,I=0;const M=[I];for(;y;){for(;t.get(++o)[1]!==y;);s.push(o),y._tokenizer||(p=a.sliceStream(y),y.next||p.push(null),g&&l.defineSkip(y.start),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(p),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),g=y,y=y.next}for(y=n;++b<c.length;)c[b][0]==="exit"&&c[b-1][0]==="enter"&&c[b][1].type===c[b-1][1].type&&c[b][1].start.line!==c[b][1].end.line&&(I=b+1,M.push(I),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(l.events=[],y?(y._tokenizer=void 0,y.previous=void 0):M.pop(),b=M.length;b--;){const P=c.slice(M[b],M[b+1]),$=s.pop();f.push([$,$+P.length-1]),t.splice($,2,P)}for(f.reverse(),b=-1;++b<f.length;)h[C+f[b][0]]=C+f[b][1],C+=f[b][1]-f[b][0]-1;return h}const Bw={resolve:Ww,tokenize:zw},Nw={partial:!0,tokenize:qw};function Ww(t){return sf(t),t}function zw(t,r){let n;return a;function a(c){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),o(c)}function o(c){return c===null?s(c):te(c)?t.check(Nw,l,s)(c):(t.consume(c),o)}function s(c){return t.exit("chunkContent"),t.exit("content"),r(c)}function l(c){return t.consume(c),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,o}}function qw(t,r,n){const a=this;return o;function o(l){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),Ie(t,s,"linePrefix")}function s(l){if(l===null||te(l))return n(l);const c=a.events[a.events.length-1];return!a.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?r(l):t.interrupt(a.parser.constructs.flow,n,r)(l)}}function uf(t,r,n,a,o,s,l,c,f){const h=f||Number.POSITIVE_INFINITY;let p=0;return g;function g(P){return P===60?(t.enter(a),t.enter(o),t.enter(s),t.consume(P),t.exit(s),b):P===null||P===32||P===41||Va(P)?n(P):(t.enter(a),t.enter(l),t.enter(c),t.enter("chunkString",{contentType:"string"}),I(P))}function b(P){return P===62?(t.enter(s),t.consume(P),t.exit(s),t.exit(o),t.exit(a),r):(t.enter(c),t.enter("chunkString",{contentType:"string"}),y(P))}function y(P){return P===62?(t.exit("chunkString"),t.exit(c),b(P)):P===null||P===60||te(P)?n(P):(t.consume(P),P===92?C:y)}function C(P){return P===60||P===62||P===92?(t.consume(P),y):y(P)}function I(P){return!p&&(P===null||P===41||ot(P))?(t.exit("chunkString"),t.exit(c),t.exit(l),t.exit(a),r(P)):p<h&&P===40?(t.consume(P),p++,I):P===41?(t.consume(P),p--,I):P===null||P===32||P===40||Va(P)?n(P):(t.consume(P),P===92?M:I)}function M(P){return P===40||P===41||P===92?(t.consume(P),I):I(P)}}function lf(t,r,n,a,o,s){const l=this;let c=0,f;return h;function h(y){return t.enter(a),t.enter(o),t.consume(y),t.exit(o),t.enter(s),p}function p(y){return c>999||y===null||y===91||y===93&&!f||y===94&&!c&&"_hiddenFootnoteSupport"in l.parser.constructs?n(y):y===93?(t.exit(s),t.enter(o),t.consume(y),t.exit(o),t.exit(a),r):te(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),p):(t.enter("chunkString",{contentType:"string"}),g(y))}function g(y){return y===null||y===91||y===93||te(y)||c++>999?(t.exit("chunkString"),p(y)):(t.consume(y),f||(f=!ye(y)),y===92?b:g)}function b(y){return y===91||y===92||y===93?(t.consume(y),c++,g):g(y)}}function cf(t,r,n,a,o,s){let l;return c;function c(b){return b===34||b===39||b===40?(t.enter(a),t.enter(o),t.consume(b),t.exit(o),l=b===40?41:b,f):n(b)}function f(b){return b===l?(t.enter(o),t.consume(b),t.exit(o),t.exit(a),r):(t.enter(s),h(b))}function h(b){return b===l?(t.exit(s),f(l)):b===null?n(b):te(b)?(t.enter("lineEnding"),t.consume(b),t.exit("lineEnding"),Ie(t,h,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),p(b))}function p(b){return b===l||b===null||te(b)?(t.exit("chunkString"),h(b)):(t.consume(b),b===92?g:p)}function g(b){return b===l||b===92?(t.consume(b),p):p(b)}}function Yr(t,r){let n;return a;function a(o){return te(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),n=!0,a):ye(o)?Ie(t,a,n?"linePrefix":"lineSuffix")(o):r(o)}}const Hw={name:"definition",tokenize:Uw},Yw={partial:!0,tokenize:Vw};function Uw(t,r,n){const a=this;let o;return s;function s(y){return t.enter("definition"),l(y)}function l(y){return lf.call(a,t,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function c(y){return o=vr(a.sliceSerialize(a.events[a.events.length-1][1]).slice(1,-1)),y===58?(t.enter("definitionMarker"),t.consume(y),t.exit("definitionMarker"),f):n(y)}function f(y){return ot(y)?Yr(t,h)(y):h(y)}function h(y){return uf(t,p,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function p(y){return t.attempt(Yw,g,g)(y)}function g(y){return ye(y)?Ie(t,b,"whitespace")(y):b(y)}function b(y){return y===null||te(y)?(t.exit("definition"),a.parser.defined.push(o),r(y)):n(y)}}function Vw(t,r,n){return a;function a(c){return ot(c)?Yr(t,o)(c):n(c)}function o(c){return cf(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function s(c){return ye(c)?Ie(t,l,"whitespace")(c):l(c)}function l(c){return c===null||te(c)?r(c):n(c)}}const Gw={name:"hardBreakEscape",tokenize:jw};function jw(t,r,n){return a;function a(s){return t.enter("hardBreakEscape"),t.consume(s),o}function o(s){return te(s)?(t.exit("hardBreakEscape"),r(s)):n(s)}}const Qw={name:"headingAtx",resolve:Kw,tokenize:Xw};function Kw(t,r){let n=t.length-2,a=3,o,s;return t[a][1].type==="whitespace"&&(a+=2),n-2>a&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(a===n-1||n-4>a&&t[n-2][1].type==="whitespace")&&(n-=a+1===n?2:4),n>a&&(o={type:"atxHeadingText",start:t[a][1].start,end:t[n][1].end},s={type:"chunkText",start:t[a][1].start,end:t[n][1].end,contentType:"text"},Jt(t,a,n-a+1,[["enter",o,r],["enter",s,r],["exit",s,r],["exit",o,r]])),t}function Xw(t,r,n){let a=0;return o;function o(p){return t.enter("atxHeading"),s(p)}function s(p){return t.enter("atxHeadingSequence"),l(p)}function l(p){return p===35&&a++<6?(t.consume(p),l):p===null||ot(p)?(t.exit("atxHeadingSequence"),c(p)):n(p)}function c(p){return p===35?(t.enter("atxHeadingSequence"),f(p)):p===null||te(p)?(t.exit("atxHeading"),r(p)):ye(p)?Ie(t,c,"whitespace")(p):(t.enter("atxHeadingText"),h(p))}function f(p){return p===35?(t.consume(p),f):(t.exit("atxHeadingSequence"),c(p))}function h(p){return p===null||p===35||ot(p)?(t.exit("atxHeadingText"),c(p)):(t.consume(p),h)}}const Jw=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],cc=["pre","script","style","textarea"],Zw={concrete:!0,name:"htmlFlow",resolveTo:nv,tokenize:rv},ev={partial:!0,tokenize:ov},tv={partial:!0,tokenize:iv};function nv(t){let r=t.length;for(;r--&&!(t[r][0]==="enter"&&t[r][1].type==="htmlFlow"););return r>1&&t[r-2][1].type==="linePrefix"&&(t[r][1].start=t[r-2][1].start,t[r+1][1].start=t[r-2][1].start,t.splice(r-2,2)),t}function rv(t,r,n){const a=this;let o,s,l,c,f;return h;function h(S){return p(S)}function p(S){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(S),g}function g(S){return S===33?(t.consume(S),b):S===47?(t.consume(S),s=!0,I):S===63?(t.consume(S),o=3,a.interrupt?r:_):Xt(S)?(t.consume(S),l=String.fromCharCode(S),M):n(S)}function b(S){return S===45?(t.consume(S),o=2,y):S===91?(t.consume(S),o=5,c=0,C):Xt(S)?(t.consume(S),o=4,a.interrupt?r:_):n(S)}function y(S){return S===45?(t.consume(S),a.interrupt?r:_):n(S)}function C(S){const ut="CDATA[";return S===ut.charCodeAt(c++)?(t.consume(S),c===ut.length?a.interrupt?r:j:C):n(S)}function I(S){return Xt(S)?(t.consume(S),l=String.fromCharCode(S),M):n(S)}function M(S){if(S===null||S===47||S===62||ot(S)){const ut=S===47,Xe=l.toLowerCase();return!ut&&!s&&cc.includes(Xe)?(o=1,a.interrupt?r(S):j(S)):Jw.includes(l.toLowerCase())?(o=6,ut?(t.consume(S),P):a.interrupt?r(S):j(S)):(o=7,a.interrupt&&!a.parser.lazy[a.now().line]?n(S):s?$(S):N(S))}return S===45||Ht(S)?(t.consume(S),l+=String.fromCharCode(S),M):n(S)}function P(S){return S===62?(t.consume(S),a.interrupt?r:j):n(S)}function $(S){return ye(S)?(t.consume(S),$):ce(S)}function N(S){return S===47?(t.consume(S),ce):S===58||S===95||Xt(S)?(t.consume(S),z):ye(S)?(t.consume(S),N):ce(S)}function z(S){return S===45||S===46||S===58||S===95||Ht(S)?(t.consume(S),z):F(S)}function F(S){return S===61?(t.consume(S),A):ye(S)?(t.consume(S),F):N(S)}function A(S){return S===null||S===60||S===61||S===62||S===96?n(S):S===34||S===39?(t.consume(S),f=S,Y):ye(S)?(t.consume(S),A):G(S)}function Y(S){return S===f?(t.consume(S),f=null,ee):S===null||te(S)?n(S):(t.consume(S),Y)}function G(S){return S===null||S===34||S===39||S===47||S===60||S===61||S===62||S===96||ot(S)?F(S):(t.consume(S),G)}function ee(S){return S===47||S===62||ye(S)?N(S):n(S)}function ce(S){return S===62?(t.consume(S),Q):n(S)}function Q(S){return S===null||te(S)?j(S):ye(S)?(t.consume(S),Q):n(S)}function j(S){return S===45&&o===2?(t.consume(S),We):S===60&&o===1?(t.consume(S),Ce):S===62&&o===4?(t.consume(S),Me):S===63&&o===3?(t.consume(S),_):S===93&&o===5?(t.consume(S),Dt):te(S)&&(o===6||o===7)?(t.exit("htmlFlowData"),t.check(ev,Lt,be)(S)):S===null||te(S)?(t.exit("htmlFlowData"),be(S)):(t.consume(S),j)}function be(S){return t.check(tv,Ae,Lt)(S)}function Ae(S){return t.enter("lineEnding"),t.consume(S),t.exit("lineEnding"),he}function he(S){return S===null||te(S)?be(S):(t.enter("htmlFlowData"),j(S))}function We(S){return S===45?(t.consume(S),_):j(S)}function Ce(S){return S===47?(t.consume(S),l="",Re):j(S)}function Re(S){if(S===62){const ut=l.toLowerCase();return cc.includes(ut)?(t.consume(S),Me):j(S)}return Xt(S)&&l.length<8?(t.consume(S),l+=String.fromCharCode(S),Re):j(S)}function Dt(S){return S===93?(t.consume(S),_):j(S)}function _(S){return S===62?(t.consume(S),Me):S===45&&o===2?(t.consume(S),_):j(S)}function Me(S){return S===null||te(S)?(t.exit("htmlFlowData"),Lt(S)):(t.consume(S),Me)}function Lt(S){return t.exit("htmlFlow"),r(S)}}function iv(t,r,n){const a=this;return o;function o(l){return te(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),s):n(l)}function s(l){return a.parser.lazy[a.now().line]?n(l):r(l)}}function ov(t,r,n){return a;function a(o){return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),t.attempt(no,r,n)}}const av={name:"htmlText",tokenize:sv};function sv(t,r,n){const a=this;let o,s,l;return c;function c(_){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(_),f}function f(_){return _===33?(t.consume(_),h):_===47?(t.consume(_),F):_===63?(t.consume(_),N):Xt(_)?(t.consume(_),G):n(_)}function h(_){return _===45?(t.consume(_),p):_===91?(t.consume(_),s=0,C):Xt(_)?(t.consume(_),$):n(_)}function p(_){return _===45?(t.consume(_),y):n(_)}function g(_){return _===null?n(_):_===45?(t.consume(_),b):te(_)?(l=g,Ce(_)):(t.consume(_),g)}function b(_){return _===45?(t.consume(_),y):g(_)}function y(_){return _===62?We(_):_===45?b(_):g(_)}function C(_){const Me="CDATA[";return _===Me.charCodeAt(s++)?(t.consume(_),s===Me.length?I:C):n(_)}function I(_){return _===null?n(_):_===93?(t.consume(_),M):te(_)?(l=I,Ce(_)):(t.consume(_),I)}function M(_){return _===93?(t.consume(_),P):I(_)}function P(_){return _===62?We(_):_===93?(t.consume(_),P):I(_)}function $(_){return _===null||_===62?We(_):te(_)?(l=$,Ce(_)):(t.consume(_),$)}function N(_){return _===null?n(_):_===63?(t.consume(_),z):te(_)?(l=N,Ce(_)):(t.consume(_),N)}function z(_){return _===62?We(_):N(_)}function F(_){return Xt(_)?(t.consume(_),A):n(_)}function A(_){return _===45||Ht(_)?(t.consume(_),A):Y(_)}function Y(_){return te(_)?(l=Y,Ce(_)):ye(_)?(t.consume(_),Y):We(_)}function G(_){return _===45||Ht(_)?(t.consume(_),G):_===47||_===62||ot(_)?ee(_):n(_)}function ee(_){return _===47?(t.consume(_),We):_===58||_===95||Xt(_)?(t.consume(_),ce):te(_)?(l=ee,Ce(_)):ye(_)?(t.consume(_),ee):We(_)}function ce(_){return _===45||_===46||_===58||_===95||Ht(_)?(t.consume(_),ce):Q(_)}function Q(_){return _===61?(t.consume(_),j):te(_)?(l=Q,Ce(_)):ye(_)?(t.consume(_),Q):ee(_)}function j(_){return _===null||_===60||_===61||_===62||_===96?n(_):_===34||_===39?(t.consume(_),o=_,be):te(_)?(l=j,Ce(_)):ye(_)?(t.consume(_),j):(t.consume(_),Ae)}function be(_){return _===o?(t.consume(_),o=void 0,he):_===null?n(_):te(_)?(l=be,Ce(_)):(t.consume(_),be)}function Ae(_){return _===null||_===34||_===39||_===60||_===61||_===96?n(_):_===47||_===62||ot(_)?ee(_):(t.consume(_),Ae)}function he(_){return _===47||_===62||ot(_)?ee(_):n(_)}function We(_){return _===62?(t.consume(_),t.exit("htmlTextData"),t.exit("htmlText"),r):n(_)}function Ce(_){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(_),t.exit("lineEnding"),Re}function Re(_){return ye(_)?Ie(t,Dt,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_):Dt(_)}function Dt(_){return t.enter("htmlTextData"),l(_)}}const as={name:"labelEnd",resolveAll:fv,resolveTo:hv,tokenize:dv},uv={tokenize:pv},lv={tokenize:gv},cv={tokenize:mv};function fv(t){let r=-1;const n=[];for(;++r<t.length;){const a=t[r][1];if(n.push(t[r]),a.type==="labelImage"||a.type==="labelLink"||a.type==="labelEnd"){const o=a.type==="labelImage"?4:2;a.type="data",r+=o}}return t.length!==n.length&&Jt(t,0,t.length,n),t}function hv(t,r){let n=t.length,a=0,o,s,l,c;for(;n--;)if(o=t[n][1],s){if(o.type==="link"||o.type==="labelLink"&&o._inactive)break;t[n][0]==="enter"&&o.type==="labelLink"&&(o._inactive=!0)}else if(l){if(t[n][0]==="enter"&&(o.type==="labelImage"||o.type==="labelLink")&&!o._balanced&&(s=n,o.type!=="labelLink")){a=2;break}}else o.type==="labelEnd"&&(l=n);const f={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},h={type:"label",start:{...t[s][1].start},end:{...t[l][1].end}},p={type:"labelText",start:{...t[s+a+2][1].end},end:{...t[l-2][1].start}};return c=[["enter",f,r],["enter",h,r]],c=Ot(c,t.slice(s+1,s+a+3)),c=Ot(c,[["enter",p,r]]),c=Ot(c,os(r.parser.constructs.insideSpan.null,t.slice(s+a+4,l-3),r)),c=Ot(c,[["exit",p,r],t[l-2],t[l-1],["exit",h,r]]),c=Ot(c,t.slice(l+1)),c=Ot(c,[["exit",f,r]]),Jt(t,s,t.length,c),t}function dv(t,r,n){const a=this;let o=a.events.length,s,l;for(;o--;)if((a.events[o][1].type==="labelImage"||a.events[o][1].type==="labelLink")&&!a.events[o][1]._balanced){s=a.events[o][1];break}return c;function c(b){return s?s._inactive?g(b):(l=a.parser.defined.includes(vr(a.sliceSerialize({start:s.end,end:a.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(b),t.exit("labelMarker"),t.exit("labelEnd"),f):n(b)}function f(b){return b===40?t.attempt(uv,p,l?p:g)(b):b===91?t.attempt(lv,p,l?h:g)(b):l?p(b):g(b)}function h(b){return t.attempt(cv,p,g)(b)}function p(b){return r(b)}function g(b){return s._balanced=!0,n(b)}}function pv(t,r,n){return a;function a(g){return t.enter("resource"),t.enter("resourceMarker"),t.consume(g),t.exit("resourceMarker"),o}function o(g){return ot(g)?Yr(t,s)(g):s(g)}function s(g){return g===41?p(g):uf(t,l,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function l(g){return ot(g)?Yr(t,f)(g):p(g)}function c(g){return n(g)}function f(g){return g===34||g===39||g===40?cf(t,h,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):p(g)}function h(g){return ot(g)?Yr(t,p)(g):p(g)}function p(g){return g===41?(t.enter("resourceMarker"),t.consume(g),t.exit("resourceMarker"),t.exit("resource"),r):n(g)}}function gv(t,r,n){const a=this;return o;function o(c){return lf.call(a,t,s,l,"reference","referenceMarker","referenceString")(c)}function s(c){return a.parser.defined.includes(vr(a.sliceSerialize(a.events[a.events.length-1][1]).slice(1,-1)))?r(c):n(c)}function l(c){return n(c)}}function mv(t,r,n){return a;function a(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),o}function o(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),r):n(s)}}const yv={name:"labelStartImage",resolveAll:as.resolveAll,tokenize:bv};function bv(t,r,n){const a=this;return o;function o(c){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(c),t.exit("labelImageMarker"),s}function s(c){return c===91?(t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelImage"),l):n(c)}function l(c){return c===94&&"_hiddenFootnoteSupport"in a.parser.constructs?n(c):r(c)}}const wv={name:"labelStartLink",resolveAll:as.resolveAll,tokenize:vv};function vv(t,r,n){const a=this;return o;function o(l){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelLink"),s}function s(l){return l===94&&"_hiddenFootnoteSupport"in a.parser.constructs?n(l):r(l)}}const Pa={name:"lineEnding",tokenize:xv};function xv(t,r){return n;function n(a){return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Ie(t,r,"linePrefix")}}const Gi={name:"thematicBreak",tokenize:_v};function _v(t,r,n){let a=0,o;return s;function s(h){return t.enter("thematicBreak"),l(h)}function l(h){return o=h,c(h)}function c(h){return h===o?(t.enter("thematicBreakSequence"),f(h)):a>=3&&(h===null||te(h))?(t.exit("thematicBreak"),r(h)):n(h)}function f(h){return h===o?(t.consume(h),a++,f):(t.exit("thematicBreakSequence"),ye(h)?Ie(t,c,"whitespace")(h):c(h))}}const rt={continuation:{tokenize:Cv},exit:Tv,name:"list",tokenize:Iv},kv={partial:!0,tokenize:Av},Sv={partial:!0,tokenize:Ev};function Iv(t,r,n){const a=this,o=a.events[a.events.length-1];let s=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0,l=0;return c;function c(y){const C=a.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(C==="listUnordered"?!a.containerState.marker||y===a.containerState.marker:Ga(y)){if(a.containerState.type||(a.containerState.type=C,t.enter(C,{_container:!0})),C==="listUnordered")return t.enter("listItemPrefix"),y===42||y===45?t.check(Gi,n,h)(y):h(y);if(!a.interrupt||y===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),f(y)}return n(y)}function f(y){return Ga(y)&&++l<10?(t.consume(y),f):(!a.interrupt||l<2)&&(a.containerState.marker?y===a.containerState.marker:y===41||y===46)?(t.exit("listItemValue"),h(y)):n(y)}function h(y){return t.enter("listItemMarker"),t.consume(y),t.exit("listItemMarker"),a.containerState.marker=a.containerState.marker||y,t.check(no,a.interrupt?n:p,t.attempt(kv,b,g))}function p(y){return a.containerState.initialBlankLine=!0,s++,b(y)}function g(y){return ye(y)?(t.enter("listItemPrefixWhitespace"),t.consume(y),t.exit("listItemPrefixWhitespace"),b):n(y)}function b(y){return a.containerState.size=s+a.sliceSerialize(t.exit("listItemPrefix"),!0).length,r(y)}}function Cv(t,r,n){const a=this;return a.containerState._closeFlow=void 0,t.check(no,o,s);function o(c){return a.containerState.furtherBlankLines=a.containerState.furtherBlankLines||a.containerState.initialBlankLine,Ie(t,r,"listItemIndent",a.containerState.size+1)(c)}function s(c){return a.containerState.furtherBlankLines||!ye(c)?(a.containerState.furtherBlankLines=void 0,a.containerState.initialBlankLine=void 0,l(c)):(a.containerState.furtherBlankLines=void 0,a.containerState.initialBlankLine=void 0,t.attempt(Sv,r,l)(c))}function l(c){return a.containerState._closeFlow=!0,a.interrupt=void 0,Ie(t,t.attempt(rt,r,n),"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function Ev(t,r,n){const a=this;return Ie(t,o,"listItemIndent",a.containerState.size+1);function o(s){const l=a.events[a.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===a.containerState.size?r(s):n(s)}}function Tv(t){t.exit(this.containerState.type)}function Av(t,r,n){const a=this;return Ie(t,o,"listItemPrefixWhitespace",a.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function o(s){const l=a.events[a.events.length-1];return!ye(s)&&l&&l[1].type==="listItemPrefixWhitespace"?r(s):n(s)}}const fc={name:"setextUnderline",resolveTo:Pv,tokenize:Mv};function Pv(t,r){let n=t.length,a,o,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){a=n;break}t[n][1].type==="paragraph"&&(o=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const l={type:"setextHeading",start:{...t[a][1].start},end:{...t[t.length-1][1].end}};return t[o][1].type="setextHeadingText",s?(t.splice(o,0,["enter",l,r]),t.splice(s+1,0,["exit",t[a][1],r]),t[a][1].end={...t[s][1].end}):t[a][1]=l,t.push(["exit",l,r]),t}function Mv(t,r,n){const a=this;let o;return s;function s(h){let p=a.events.length,g;for(;p--;)if(a.events[p][1].type!=="lineEnding"&&a.events[p][1].type!=="linePrefix"&&a.events[p][1].type!=="content"){g=a.events[p][1].type==="paragraph";break}return!a.parser.lazy[a.now().line]&&(a.interrupt||g)?(t.enter("setextHeadingLine"),o=h,l(h)):n(h)}function l(h){return t.enter("setextHeadingLineSequence"),c(h)}function c(h){return h===o?(t.consume(h),c):(t.exit("setextHeadingLineSequence"),ye(h)?Ie(t,f,"lineSuffix")(h):f(h))}function f(h){return h===null||te(h)?(t.exit("setextHeadingLine"),r(h)):n(h)}}const Ov={tokenize:Fv};function Fv(t){const r=this,n=t.attempt(no,a,t.attempt(this.parser.constructs.flowInitial,o,Ie(t,t.attempt(this.parser.constructs.flow,o,t.attempt(Bw,o)),"linePrefix")));return n;function a(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),r.currentConstruct=void 0,n}function o(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),r.currentConstruct=void 0,n}}const Dv={resolveAll:hf()},Lv=ff("string"),Rv=ff("text");function ff(t){return{resolveAll:hf(t==="text"?$v:void 0),tokenize:r};function r(n){const a=this,o=this.parser.constructs[t],s=n.attempt(o,l,c);return l;function l(p){return h(p)?s(p):c(p)}function c(p){if(p===null){n.consume(p);return}return n.enter("data"),n.consume(p),f}function f(p){return h(p)?(n.exit("data"),s(p)):(n.consume(p),f)}function h(p){if(p===null)return!0;const g=o[p];let b=-1;if(g)for(;++b<g.length;){const y=g[b];if(!y.previous||y.previous.call(a,a.previous))return!0}return!1}}}function hf(t){return r;function r(n,a){let o=-1,s;for(;++o<=n.length;)s===void 0?n[o]&&n[o][1].type==="data"&&(s=o,o++):(!n[o]||n[o][1].type!=="data")&&(o!==s+2&&(n[s][1].end=n[o-1][1].end,n.splice(s+2,o-s-2),o=s+2),s=void 0);return t?t(n,a):n}}function $v(t,r){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const a=t[n-1][1],o=r.sliceStream(a);let s=o.length,l=-1,c=0,f;for(;s--;){const h=o[s];if(typeof h=="string"){for(l=h.length;h.charCodeAt(l-1)===32;)c++,l--;if(l)break;l=-1}else if(h===-2)f=!0,c++;else if(h!==-1){s++;break}}if(r._contentTypeTextTrailing&&n===t.length&&(c=0),c){const h={type:n===t.length||f||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?l:a.start._bufferIndex+l,_index:a.start._index+s,line:a.end.line,column:a.end.column-c,offset:a.end.offset-c},end:{...a.end}};a.end={...h.start},a.start.offset===a.end.offset?Object.assign(a,h):(t.splice(n,0,["enter",h,r],["exit",h,r]),n+=2)}n++}return t}const Bv={42:rt,43:rt,45:rt,48:rt,49:rt,50:rt,51:rt,52:rt,53:rt,54:rt,55:rt,56:rt,57:rt,62:rf},Nv={91:Hw},Wv={[-2]:Aa,[-1]:Aa,32:Aa},zv={35:Qw,42:Gi,45:[fc,Gi],60:Zw,61:fc,95:Gi,96:lc,126:lc},qv={38:af,92:of},Hv={[-5]:Pa,[-4]:Pa,[-3]:Pa,33:yv,38:af,42:ja,60:[ww,av],91:wv,92:[Gw,of],93:as,95:ja,96:Ow},Yv={null:[ja,Dv]},Uv={null:[42,95]},Vv={null:[]},Gv=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Uv,contentInitial:Nv,disable:Vv,document:Bv,flow:zv,flowInitial:Wv,insideSpan:Yv,string:qv,text:Hv},Symbol.toStringTag,{value:"Module"}));function jv(t,r,n){let a={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const o={},s=[];let l=[],c=[];const f={attempt:Y(F),check:Y(A),consume:$,enter:N,exit:z,interrupt:Y(A,{interrupt:!0})},h={code:null,containerState:{},defineSkip:I,events:[],now:C,parser:t,previous:null,sliceSerialize:b,sliceStream:y,write:g};let p=r.tokenize.call(h,f);return r.resolveAll&&s.push(r),h;function g(Q){return l=Ot(l,Q),M(),l[l.length-1]!==null?[]:(G(r,0),h.events=os(s,h.events,h),h.events)}function b(Q,j){return Kv(y(Q),j)}function y(Q){return Qv(l,Q)}function C(){const{_bufferIndex:Q,_index:j,line:be,column:Ae,offset:he}=a;return{_bufferIndex:Q,_index:j,line:be,column:Ae,offset:he}}function I(Q){o[Q.line]=Q.column,ce()}function M(){let Q;for(;a._index<l.length;){const j=l[a._index];if(typeof j=="string")for(Q=a._index,a._bufferIndex<0&&(a._bufferIndex=0);a._index===Q&&a._bufferIndex<j.length;)P(j.charCodeAt(a._bufferIndex));else P(j)}}function P(Q){p=p(Q)}function $(Q){te(Q)?(a.line++,a.column=1,a.offset+=Q===-3?2:1,ce()):Q!==-1&&(a.column++,a.offset++),a._bufferIndex<0?a._index++:(a._bufferIndex++,a._bufferIndex===l[a._index].length&&(a._bufferIndex=-1,a._index++)),h.previous=Q}function N(Q,j){const be=j||{};return be.type=Q,be.start=C(),h.events.push(["enter",be,h]),c.push(be),be}function z(Q){const j=c.pop();return j.end=C(),h.events.push(["exit",j,h]),j}function F(Q,j){G(Q,j.from)}function A(Q,j){j.restore()}function Y(Q,j){return be;function be(Ae,he,We){let Ce,Re,Dt,_;return Array.isArray(Ae)?Lt(Ae):"tokenize"in Ae?Lt([Ae]):Me(Ae);function Me(Oe){return Ln;function Ln(Je){const xt=Je!==null&&Oe[Je],yn=Je!==null&&Oe.null,tn=[...Array.isArray(xt)?xt:xt?[xt]:[],...Array.isArray(yn)?yn:yn?[yn]:[]];return Lt(tn)(Je)}}function Lt(Oe){return Ce=Oe,Re=0,Oe.length===0?We:S(Oe[Re])}function S(Oe){return Ln;function Ln(Je){return _=ee(),Dt=Oe,Oe.partial||(h.currentConstruct=Oe),Oe.name&&h.parser.constructs.disable.null.includes(Oe.name)?Xe():Oe.tokenize.call(j?Object.assign(Object.create(h),j):h,f,ut,Xe)(Je)}}function ut(Oe){return Q(Dt,_),he}function Xe(Oe){return _.restore(),++Re<Ce.length?S(Ce[Re]):We}}}function G(Q,j){Q.resolveAll&&!s.includes(Q)&&s.push(Q),Q.resolve&&Jt(h.events,j,h.events.length-j,Q.resolve(h.events.slice(j),h)),Q.resolveTo&&(h.events=Q.resolveTo(h.events,h))}function ee(){const Q=C(),j=h.previous,be=h.currentConstruct,Ae=h.events.length,he=Array.from(c);return{from:Ae,restore:We};function We(){a=Q,h.previous=j,h.currentConstruct=be,h.events.length=Ae,c=he,ce()}}function ce(){a.line in o&&a.column<2&&(a.column=o[a.line],a.offset+=o[a.line]-1)}}function Qv(t,r){const n=r.start._index,a=r.start._bufferIndex,o=r.end._index,s=r.end._bufferIndex;let l;if(n===o)l=[t[n].slice(a,s)];else{if(l=t.slice(n,o),a>-1){const c=l[0];typeof c=="string"?l[0]=c.slice(a):l.shift()}s>0&&l.push(t[o].slice(0,s))}return l}function Kv(t,r){let n=-1;const a=[];let o;for(;++n<t.length;){const s=t[n];let l;if(typeof s=="string")l=s;else switch(s){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=r?" ":"	";break}case-1:{if(!r&&o)continue;l=" ";break}default:l=String.fromCharCode(s)}o=s===-2,a.push(l)}return a.join("")}function Xv(t){const a={constructs:iw([Gv,...(t||{}).extensions||[]]),content:o(hw),defined:[],document:o(pw),flow:o(Ov),lazy:{},string:o(Lv),text:o(Rv)};return a;function o(s){return l;function l(c){return jv(a,s,c)}}}function Jv(t){for(;!sf(t););return t}const hc=/[\0\t\n\r]/g;function Zv(){let t=1,r="",n=!0,a;return o;function o(s,l,c){const f=[];let h,p,g,b,y;for(s=r+(typeof s=="string"?s.toString():new TextDecoder(l||void 0).decode(s)),g=0,r="",n&&(s.charCodeAt(0)===65279&&g++,n=void 0);g<s.length;){if(hc.lastIndex=g,h=hc.exec(s),b=h&&h.index!==void 0?h.index:s.length,y=s.charCodeAt(b),!h){r=s.slice(g);break}if(y===10&&g===b&&a)f.push(-3),a=void 0;else switch(a&&(f.push(-5),a=void 0),g<b&&(f.push(s.slice(g,b)),t+=b-g),y){case 0:{f.push(65533),t++;break}case 9:{for(p=Math.ceil(t/4)*4,f.push(-2);t++<p;)f.push(-1);break}case 10:{f.push(-4),t=1;break}default:a=!0,t=1}g=b+1}return c&&(a&&f.push(-5),r&&f.push(r),f.push(null)),f}}const ex=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function df(t){return t.replace(ex,tx)}function tx(t,r,n){if(r)return r;if(n.charCodeAt(0)===35){const o=n.charCodeAt(1),s=o===120||o===88;return nf(n.slice(s?2:1),s?16:10)}return is(n)||t}const pf={}.hasOwnProperty;function nx(t,r,n){return typeof r!="string"&&(n=r,r=void 0),rx(n)(Jv(Xv(n).document().write(Zv()(t,r,!0))))}function rx(t){const r={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Jr),autolinkProtocol:ee,autolinkEmail:ee,atxHeading:s(bn),blockQuote:s(yn),characterEscape:ee,characterReference:ee,codeFenced:s(tn),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:s(tn,l),codeText:s(Jn,l),codeTextData:ee,data:ee,codeFlowValue:ee,definition:s(Qr),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:s(lt),hardBreakEscape:s(Kr),hardBreakTrailing:s(Kr),htmlFlow:s(_t,l),htmlFlowData:ee,htmlText:s(_t,l),htmlTextData:ee,image:s(Xr),label:l,link:s(Jr),listItem:s(ct),listItemValue:b,listOrdered:s(wn,g),listUnordered:s(wn),paragraph:s(Rn),reference:S,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:s(bn),strong:s(Zn),thematicBreak:s($n)},exit:{atxHeading:f(),atxHeadingSequence:F,autolink:f(),autolinkEmail:xt,autolinkProtocol:Je,blockQuote:f(),characterEscapeValue:ce,characterReferenceMarkerHexadecimal:Xe,characterReferenceMarkerNumeric:Xe,characterReferenceValue:Oe,characterReference:Ln,codeFenced:f(M),codeFencedFence:I,codeFencedFenceInfo:y,codeFencedFenceMeta:C,codeFlowValue:ce,codeIndented:f(P),codeText:f(he),codeTextData:ce,data:ce,definition:f(),definitionDestinationString:z,definitionLabelString:$,definitionTitleString:N,emphasis:f(),hardBreakEscape:f(j),hardBreakTrailing:f(j),htmlFlow:f(be),htmlFlowData:ce,htmlText:f(Ae),htmlTextData:ce,image:f(Ce),label:Dt,labelText:Re,lineEnding:Q,link:f(We),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:ut,resourceDestinationString:_,resourceTitleString:Me,resource:Lt,setextHeading:f(G),setextHeadingLineSequence:Y,setextHeadingText:A,strong:f(),thematicBreak:f()}};gf(r,(t||{}).mdastExtensions||[]);const n={};return a;function a(L){let q={type:"root",children:[]};const X={stack:[q],tokenStack:[],config:r,enter:c,exit:h,buffer:l,resume:p,data:n},ae=[];let ge=-1;for(;++ge<L.length;)if(L[ge][1].type==="listOrdered"||L[ge][1].type==="listUnordered")if(L[ge][0]==="enter")ae.push(ge);else{const Ge=ae.pop();ge=o(L,Ge,ge)}for(ge=-1;++ge<L.length;){const Ge=r[L[ge][0]];pf.call(Ge,L[ge][1].type)&&Ge[L[ge][1].type].call(Object.assign({sliceSerialize:L[ge][2].sliceSerialize},X),L[ge][1])}if(X.tokenStack.length>0){const Ge=X.tokenStack[X.tokenStack.length-1];(Ge[1]||dc).call(X,void 0,Ge[0])}for(q.position={start:Pn(L.length>0?L[0][1].start:{line:1,column:1,offset:0}),end:Pn(L.length>0?L[L.length-2][1].end:{line:1,column:1,offset:0})},ge=-1;++ge<r.transforms.length;)q=r.transforms[ge](q)||q;return q}function o(L,q,X){let ae=q-1,ge=-1,Ge=!1,Rt,ft,nn,rn;for(;++ae<=X;){const qe=L[ae];switch(qe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{qe[0]==="enter"?ge++:ge--,rn=void 0;break}case"lineEndingBlank":{qe[0]==="enter"&&(Rt&&!rn&&!ge&&!nn&&(nn=ae),rn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:rn=void 0}if(!ge&&qe[0]==="enter"&&qe[1].type==="listItemPrefix"||ge===-1&&qe[0]==="exit"&&(qe[1].type==="listUnordered"||qe[1].type==="listOrdered")){if(Rt){let Yt=ae;for(ft=void 0;Yt--;){const $t=L[Yt];if($t[1].type==="lineEnding"||$t[1].type==="lineEndingBlank"){if($t[0]==="exit")continue;ft&&(L[ft][1].type="lineEndingBlank",Ge=!0),$t[1].type="lineEnding",ft=Yt}else if(!($t[1].type==="linePrefix"||$t[1].type==="blockQuotePrefix"||$t[1].type==="blockQuotePrefixWhitespace"||$t[1].type==="blockQuoteMarker"||$t[1].type==="listItemIndent"))break}nn&&(!ft||nn<ft)&&(Rt._spread=!0),Rt.end=Object.assign({},ft?L[ft][1].start:qe[1].end),L.splice(ft||ae,0,["exit",Rt,qe[2]]),ae++,X++}if(qe[1].type==="listItemPrefix"){const Yt={type:"listItem",_spread:!1,start:Object.assign({},qe[1].start),end:void 0};Rt=Yt,L.splice(ae,0,["enter",Yt,qe[2]]),ae++,X++,nn=void 0,rn=!0}}}return L[q][1]._spread=Ge,X}function s(L,q){return X;function X(ae){c.call(this,L(ae),ae),q&&q.call(this,ae)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(L,q,X){this.stack[this.stack.length-1].children.push(L),this.stack.push(L),this.tokenStack.push([q,X||void 0]),L.position={start:Pn(q.start),end:void 0}}function f(L){return q;function q(X){L&&L.call(this,X),h.call(this,X)}}function h(L,q){const X=this.stack.pop(),ae=this.tokenStack.pop();if(ae)ae[0].type!==L.type&&(q?q.call(this,L,ae[0]):(ae[1]||dc).call(this,L,ae[0]));else throw new Error("Cannot close `"+L.type+"` ("+Hr({start:L.start,end:L.end})+"): it’s not open");X.position.end=Pn(L.end)}function p(){return rs(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function b(L){if(this.data.expectingFirstListItemValue){const q=this.stack[this.stack.length-2];q.start=Number.parseInt(this.sliceSerialize(L),10),this.data.expectingFirstListItemValue=void 0}}function y(){const L=this.resume(),q=this.stack[this.stack.length-1];q.lang=L}function C(){const L=this.resume(),q=this.stack[this.stack.length-1];q.meta=L}function I(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function M(){const L=this.resume(),q=this.stack[this.stack.length-1];q.value=L.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function P(){const L=this.resume(),q=this.stack[this.stack.length-1];q.value=L.replace(/(\r?\n|\r)$/g,"")}function $(L){const q=this.resume(),X=this.stack[this.stack.length-1];X.label=q,X.identifier=vr(this.sliceSerialize(L)).toLowerCase()}function N(){const L=this.resume(),q=this.stack[this.stack.length-1];q.title=L}function z(){const L=this.resume(),q=this.stack[this.stack.length-1];q.url=L}function F(L){const q=this.stack[this.stack.length-1];if(!q.depth){const X=this.sliceSerialize(L).length;q.depth=X}}function A(){this.data.setextHeadingSlurpLineEnding=!0}function Y(L){const q=this.stack[this.stack.length-1];q.depth=this.sliceSerialize(L).codePointAt(0)===61?1:2}function G(){this.data.setextHeadingSlurpLineEnding=void 0}function ee(L){const X=this.stack[this.stack.length-1].children;let ae=X[X.length-1];(!ae||ae.type!=="text")&&(ae=io(),ae.position={start:Pn(L.start),end:void 0},X.push(ae)),this.stack.push(ae)}function ce(L){const q=this.stack.pop();q.value+=this.sliceSerialize(L),q.position.end=Pn(L.end)}function Q(L){const q=this.stack[this.stack.length-1];if(this.data.atHardBreak){const X=q.children[q.children.length-1];X.position.end=Pn(L.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&r.canContainEols.includes(q.type)&&(ee.call(this,L),ce.call(this,L))}function j(){this.data.atHardBreak=!0}function be(){const L=this.resume(),q=this.stack[this.stack.length-1];q.value=L}function Ae(){const L=this.resume(),q=this.stack[this.stack.length-1];q.value=L}function he(){const L=this.resume(),q=this.stack[this.stack.length-1];q.value=L}function We(){const L=this.stack[this.stack.length-1];if(this.data.inReference){const q=this.data.referenceType||"shortcut";L.type+="Reference",L.referenceType=q,delete L.url,delete L.title}else delete L.identifier,delete L.label;this.data.referenceType=void 0}function Ce(){const L=this.stack[this.stack.length-1];if(this.data.inReference){const q=this.data.referenceType||"shortcut";L.type+="Reference",L.referenceType=q,delete L.url,delete L.title}else delete L.identifier,delete L.label;this.data.referenceType=void 0}function Re(L){const q=this.sliceSerialize(L),X=this.stack[this.stack.length-2];X.label=df(q),X.identifier=vr(q).toLowerCase()}function Dt(){const L=this.stack[this.stack.length-1],q=this.resume(),X=this.stack[this.stack.length-1];if(this.data.inReference=!0,X.type==="link"){const ae=L.children;X.children=ae}else X.alt=q}function _(){const L=this.resume(),q=this.stack[this.stack.length-1];q.url=L}function Me(){const L=this.resume(),q=this.stack[this.stack.length-1];q.title=L}function Lt(){this.data.inReference=void 0}function S(){this.data.referenceType="collapsed"}function ut(L){const q=this.resume(),X=this.stack[this.stack.length-1];X.label=q,X.identifier=vr(this.sliceSerialize(L)).toLowerCase(),this.data.referenceType="full"}function Xe(L){this.data.characterReferenceType=L.type}function Oe(L){const q=this.sliceSerialize(L),X=this.data.characterReferenceType;let ae;X?(ae=nf(q,X==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ae=is(q);const ge=this.stack[this.stack.length-1];ge.value+=ae}function Ln(L){const q=this.stack.pop();q.position.end=Pn(L.end)}function Je(L){ce.call(this,L);const q=this.stack[this.stack.length-1];q.url=this.sliceSerialize(L)}function xt(L){ce.call(this,L);const q=this.stack[this.stack.length-1];q.url="mailto:"+this.sliceSerialize(L)}function yn(){return{type:"blockquote",children:[]}}function tn(){return{type:"code",lang:null,meta:null,value:""}}function Jn(){return{type:"inlineCode",value:""}}function Qr(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function lt(){return{type:"emphasis",children:[]}}function bn(){return{type:"heading",depth:0,children:[]}}function Kr(){return{type:"break"}}function _t(){return{type:"html",value:""}}function Xr(){return{type:"image",title:null,url:"",alt:null}}function Jr(){return{type:"link",title:null,url:"",children:[]}}function wn(L){return{type:"list",ordered:L.type==="listOrdered",start:null,spread:L._spread,children:[]}}function ct(L){return{type:"listItem",spread:L._spread,checked:null,children:[]}}function Rn(){return{type:"paragraph",children:[]}}function Zn(){return{type:"strong",children:[]}}function io(){return{type:"text",value:""}}function $n(){return{type:"thematicBreak"}}}function Pn(t){return{line:t.line,column:t.column,offset:t.offset}}function gf(t,r){let n=-1;for(;++n<r.length;){const a=r[n];Array.isArray(a)?gf(t,a):ix(t,a)}}function ix(t,r){let n;for(n in r)if(pf.call(r,n))switch(n){case"canContainEols":{const a=r[n];a&&t[n].push(...a);break}case"transforms":{const a=r[n];a&&t[n].push(...a);break}case"enter":case"exit":{const a=r[n];a&&Object.assign(t[n],a);break}}}function dc(t,r){throw t?new Error("Cannot close `"+t.type+"` ("+Hr({start:t.start,end:t.end})+"): a different token (`"+r.type+"`, "+Hr({start:r.start,end:r.end})+") is open"):new Error("Cannot close document, a token (`"+r.type+"`, "+Hr({start:r.start,end:r.end})+") is still open")}function mf(t){const r=this;r.parser=n;function n(a){return nx(a,{...r.data("settings"),...t,extensions:r.data("micromarkExtensions")||[],mdastExtensions:r.data("fromMarkdownExtensions")||[]})}}const ss=(function(t){if(t==null)return ux;if(typeof t=="function")return ro(t);if(typeof t=="object")return Array.isArray(t)?ox(t):ax(t);if(typeof t=="string")return sx(t);throw new Error("Expected function, string, or object as test")});function ox(t){const r=[];let n=-1;for(;++n<t.length;)r[n]=ss(t[n]);return ro(a);function a(...o){let s=-1;for(;++s<r.length;)if(r[s].apply(this,o))return!0;return!1}}function ax(t){const r=t;return ro(n);function n(a){const o=a;let s;for(s in t)if(o[s]!==r[s])return!1;return!0}}function sx(t){return ro(r);function r(n){return n&&n.type===t}}function ro(t){return r;function r(n,a,o){return!!(lx(n)&&t.call(this,n,typeof a=="number"?a:void 0,o||void 0))}}function ux(){return!0}function lx(t){return t!==null&&typeof t=="object"&&"type"in t}const yf=[],cx=!0,Qa=!1,fx="skip";function hx(t,r,n,a){let o;typeof r=="function"&&typeof n!="function"?(a=n,n=r):o=r;const s=ss(o),l=a?-1:1;c(t,void 0,[])();function c(f,h,p){const g=f&&typeof f=="object"?f:{};if(typeof g.type=="string"){const y=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(b,"name",{value:"node ("+(f.type+(y?"<"+y+">":""))+")"})}return b;function b(){let y=yf,C,I,M;if((!r||s(f,h,p[p.length-1]||void 0))&&(y=dx(n(f,p)),y[0]===Qa))return y;if("children"in f&&f.children){const P=f;if(P.children&&y[0]!==fx)for(I=(a?P.children.length:-1)+l,M=p.concat(P);I>-1&&I<P.children.length;){const $=P.children[I];if(C=c($,I,M)(),C[0]===Qa)return C;I=typeof C[1]=="number"?C[1]:I+l}}return y}}}function dx(t){return Array.isArray(t)?t:typeof t=="number"?[cx,t]:t==null?yf:[t]}function bf(t,r,n,a){let o,s,l;typeof r=="function"&&typeof n!="function"?(s=void 0,l=r,o=n):(s=r,l=n,o=a),hx(t,s,c,o);function c(f,h){const p=h[h.length-1],g=p?p.children.indexOf(f):void 0;return l(f,g,p)}}const Kn={component:"mdc-component",input:"mdc-input",hiddenValue:"mdc-hidden-value"};class px{constructor(){this.logger=Zt(en.TagsService),this.component={start:r=>{const n={componentId:r};return this.logger.dev("Component start",n),`<span class="$${Kn.component} start" data-meta='${JSON.stringify(n)}' style="display:none"></span>`},end:r=>{const n={componentId:r};return this.logger.dev("Component end",n),`<span class="$${Kn.component} end" data-meta='${JSON.stringify(n)}' style="display:none"></span>`},wrap:(r,n,a=!0)=>{const o=a?`
${n}
`:n;return this.logger.dev("Component wrap",{componentId:r,content:n}),this.component.start(r)+o+this.component.end(r)}},this.input={start:(r,n,a)=>{const o={componentId:r,inputId:n,inputType:a};return this.logger.dev("Input start",o),`<span class="$${Kn.input}" data-meta='${JSON.stringify(o)}' style="display:none"></span>`},end:(r,n,a)=>{const o={componentId:r,inputId:n,inputType:a};return this.logger.dev("Input end",o),`<span class="$${Kn.input} end" data-meta='${JSON.stringify(o)}' style="display:none"></span>`},wrap:r=>{const{componentId:n,inputId:a,inputType:o,content:s,withNewLines:l=!0}=r,c=l?`
${s}
`:s;return this.logger.dev("Input wrap",{componentId:n,inputId:a,content:s}),this.input.start(n,a,o)+c+this.input.end(n,a,o)}},this.hiddenValue=(r,n,a)=>{const o={componentId:r,inputId:n,value:a};return this.logger.dev("Hidden value set",o),`<span class="$${Kn.hiddenValue}" data-meta='${JSON.stringify(o)}' style="display:none"></span>`}}}const Ka=new px,Ma=Zt(en.ValueExtractor);class gx{extract(r){const n=Ua().use(mf).parse(r),a=[],o=[],s={};bf(n,l=>{if(l.type==="html"&&l.position){const c=l.value,f=l.position.start.offset;if(c.includes(Kn.input)){const h=this.getMeta(c);if(h){const p=this.key(h);c.includes('end"')?s[p]?s[p].endPos=l.position.start.offset:s[p]={meta:h,startPos:-1,endPos:l.position.start.offset,hiddenValues:[]}:s[p]?s[p].startPos=l.position.end.offset:s[p]={meta:h,startPos:l.position.end.offset,endPos:-1,hiddenValues:[]}}}else if(c.includes(Kn.hiddenValue)){const h=this.getMeta(c);if(h&&h.value){const p=this.key(h);s[p]||(s[p]={meta:h,startPos:-1,endPos:-1,hiddenValues:[]}),s[p].hiddenValues.push({value:h.value,pos:f})}}}});for(const l in s){const{meta:c,startPos:f,endPos:h,hiddenValues:p}=s[l];if(f===-1||h===-1){Ma.warn(`Input ${l} missing start or end tag, skipping`);continue}const b=r.substring(f,h).trim().replace(/<span[^>]*>.*?<\/span>/gs,"").trim(),y=p.filter(I=>I.pos>=f&&I.pos<h).map(I=>I.value),C=this.extractValue(c.inputType,b,y,c);C.errors.length>0&&o.push(...C.errors),a.push({componentId:c.componentId,inputId:c.inputId,inputType:c.inputType,value:C.value,errors:C.errors})}return Ma.dev("Extracted values",a),o.length>0&&Ma.error("Extraction errors:",o),a}getMeta(r){const n=r.match(/data-meta=(?:'([^']+)'|"([^"]+)")/);if(!n)return null;try{return JSON.parse(n[1]||n[2])}catch{return null}}key(r){return`${r.componentId}::${r.inputId}`}extractValue(r,n,a,o){const s=[];let l=null;switch(r){case"boolean":{n.includes("[x]")||n.includes("[X]")?l=!0:n.includes("[ ]")?l=!1:(s.push("Boolean input must be a markdown checkbox"),l=null);break}case"text":{const c=n.replace(/^>\s?/gm,"").replace(/<[^>]+>/g,"").trim();o.required&&!c&&s.push("Text input is required"),o.placeholder&&c===o.placeholder?l=null:l=c;break}case"richText":{const c=n.replace(/<[^>]+>/g,"").trim();o.required&&!c&&s.push("Rich text input is required"),o.placeholder&&c===o.placeholder?l=null:l=c;break}case"multicheckbox":{const c=[],f=n.split(`
`);let h=0;f.forEach(p=>{p.match(/\[(x|X)\]/)&&h<a.length&&c.push(a[h]),p.match(/\[[ xX]\]/)&&h++}),o.required&&c.length===0&&s.push("At least one option must be selected"),o.singleChoice?(c.length>1&&s.push(`Multiple checked values for singleChoice input: ${o.componentId}::${o.inputId} [${c.join(", ")}]`),l=c[0]??null):l=c;break}case"number":{const c=n.match(new RegExp("(?<!\\d)(\\d+(?:[.,]\\d+)?)"));c?(l=parseFloat(c[1].replace(",",".")),o.required&&(l==null||isNaN(l))&&s.push("Number input is required"),typeof l=="number"&&o.min!==void 0&&l<o.min&&s.push(`Number must be >= ${o.min}`),typeof l=="number"&&o.max!==void 0&&l>o.max&&s.push(`Number must be <= ${o.max}`)):(o.required&&s.push("Number input is required"),l=null);break}default:l=n}return{value:l,errors:s}}}const mx=new gx,jt=Zt(en.InputCollector);class yx{constructor(r){this.getConfig=r}async collectFromYesterday(){jt.dev("Starting collection of inputs from yesterday’s reports");const r={};this.getConfig();for(const[n,{folder:a,name:o}]of Object.entries(ef))try{const s=`${Vr.baseOutput}/${a}`;jt.dev(`Checking folder "${s}" for report: ${n}`);const l=await Vr._listFiles(s);if(!l.length){jt.warn(`No files found in "${s}" for report: ${n}`);continue}const c=l.sort().reverse()[0];if(!c.includes(n)){jt.warn(`Newest file "${c}" in folder "${s}" does not match report type: ${n}`);continue}const f=`${s}/${c}`,h=ke.vault.getAbstractFileByPath(f);if(!h||!("vault"in ke)){jt.error(`Could not load file for report ${n}`,{filePath:f});continue}const p=c.match(/^(\d{8})-(\d{5})-/);let g="",b="";p&&(g=`${p[1].slice(0,4)}-${p[1].slice(4,6)}-${p[1].slice(6,8)}`,b=p[2]),jt.dev(`Reading file: "${f}"`);const y=await ke.vault.read(h),I=mx.extract(y).map(M=>({componentId:M.componentId,inputId:M.inputId,type:M.inputType??"unknown",value:M.value,errors:M.errors&&M.errors.length>0?M.errors:void 0,reportType:n,reportDate:g,reportNumber:b}));r[n]=I,jt.dev(`Parsed ${I.length} inputs for report: ${n}`)}catch(s){jt.error(`Failed collecting inputs for ${n}`,{error:s})}return jt.info(`InputCollector finished. Collected reports: ${Object.keys(r).length}`),jt.dev("Collected inputs summary:",{collectedByReport:r}),r}}const bx=new yx(()=>vt);function wx(t,r){if(t===void 0)throw new Error("lowdb: missing adapter");if(r===void 0)throw new Error("lowdb: missing default data")}class vx{adapter;data;constructor(r,n){wx(r,n),this.adapter=r,this.data=n}async read(){const r=await this.adapter.read();r&&(this.data=r)}async write(){this.data&&await this.adapter.write(this.data)}async update(r){r(this.data),await this.write()}}const it=Zt(en.DbService);class xx{constructor(r){this.dbPath=r}async read(){try{const r=ke.vault.getAbstractFileByPath(this.dbPath);if(r&&"extension"in r){const n=await ke.vault.read(r);return JSON.parse(n)}return null}catch(r){return it.error("Error reading database",{error:r}),null}}async write(r){try{const n=JSON.stringify(r,null,2),a=ke.vault.getAbstractFileByPath(this.dbPath);a&&"extension"in a?(await ke.vault.modify(a,n),it.dev(`Database saved to ${this.dbPath}`)):(await ke.vault.create(this.dbPath,n),it.info(`Database created at ${this.dbPath}`))}catch(n){it.error("Error writing database",{error:n})}}}class _x{constructor(){this.db=null}getDbPath(){return`${vt.projectDir}/${vt.coreDir}/powerjournal-db.json`}async ensureCoreDir(){const r=`${vt.projectDir}/${vt.coreDir}`;ke.vault.getAbstractFileByPath(r)||(it.dev(`Creating core directory: ${r}`),await ke.vault.createFolder(r))}async ensureDb(){if(!this.db){await this.ensureCoreDir();const r=this.getDbPath(),n=new xx(r);this.db=new vx(n,{reports:{}}),it.dev(`Database adapter initialized for ${r}`)}return this.db}async init(){const r=await this.ensureDb();await r.read(),r.data||={reports:{}},it.dev("Database initialized")}async saveReportInputs(r,n){await this.init();const a=await this.ensureDb();a.data.reports[r]=n,await a.write(),it.info(`Saved ${n.length} inputs for report type: ${r}`)}async appendReportInputs(r,n){await this.init();const a=await this.ensureDb();a.data.reports[r]||(a.data.reports[r]=[]),a.data.reports[r].push(...n),await a.write(),it.info(`Appended ${n.length} inputs to report type: ${r}`)}async upsertReportInputs(r,n){await this.init();const a=await this.ensureDb();a.data.reports[r]||(a.data.reports[r]=[]);const o=new Set(n.map(l=>`${l.reportDate}-${l.reportNumber}`)),s=a.data.reports[r].filter(l=>{const c=`${l.reportDate}-${l.reportNumber}`;return!o.has(c)});a.data.reports[r]=[...s,...n],await a.write(),it.info(`Upserted ${n.length} inputs for ${r} (removed duplicates)`)}async getReportInputs(r){await this.init();const a=(await this.ensureDb()).data.reports[r]||[];return it.dev(`Retrieved ${a.length} inputs for report type: ${r}`),a}async getInputsById(r,n,a){await this.init();const s=(await this.ensureDb()).data.reports[r]||[],l=Array.isArray(n)?n:[n],c=s.filter(f=>{const h=l.includes(f.inputId),p=a?f.componentId===a:!0;return h&&p});return it.dev(`Filtered ${c.length} inputs for ${l.join(", ")}${a?` in ${a}`:""}`),c}async getInputsLastNReports(r,n,a,o){const l=(await this.getInputsById(r,n,o)).sort((p,g)=>{const b=(g.reportDate||"").localeCompare(p.reportDate||"");return b!==0?b:(g.reportNumber||"0").localeCompare(p.reportNumber||"0")}),f=Array.from(new Set(l.map(p=>p.reportDate))).slice(0,a),h=l.filter(p=>f.includes(p.reportDate));return it.info(`Retrieved ${h.length} inputs from last ${a} reports`),h}async getInputsInDateRange(r,n,a,o,s){const c=(await this.getInputsById(r,n,s)).filter(f=>{const h=f.reportDate||"";return h>=a&&h<=o});return it.info(`Retrieved ${c.length} inputs between ${a} and ${o}`),c}async getAvailableInputs(r,n){await this.init();const o=(await this.ensureDb()).data.reports[r]||[],s=new Set(o.filter(l=>l.componentId===n).map(l=>l.inputId));return Array.from(s)}}const gn=new _x,pc={}.hasOwnProperty;function kx(t,r){const n=r||{};function a(o,...s){let l=a.invalid;const c=a.handlers;if(o&&pc.call(o,t)){const f=String(o[t]);l=pc.call(c,f)?c[f]:a.unknown}if(l)return l.call(this,o,...s)}return a.handlers=n.handlers||{},a.invalid=n.invalid,a.unknown=n.unknown,a}const Sx={}.hasOwnProperty;function wf(t,r){let n=-1,a;if(r.extensions)for(;++n<r.extensions.length;)wf(t,r.extensions[n]);for(a in r)if(Sx.call(r,a))switch(a){case"extensions":break;case"unsafe":{gc(t[a],r[a]);break}case"join":{gc(t[a],r[a]);break}case"handlers":{Ix(t[a],r[a]);break}default:t.options[a]=r[a]}return t}function gc(t,r){r&&t.push(...r)}function Ix(t,r){r&&Object.assign(t,r)}function Cx(t,r,n,a){const o=n.enter("blockquote"),s=n.createTracker(a);s.move("> "),s.shift(2);const l=n.indentLines(n.containerFlow(t,s.current()),Ex);return o(),l}function Ex(t,r,n){return">"+(n?"":" ")+t}function vf(t,r){return mc(t,r.inConstruct,!0)&&!mc(t,r.notInConstruct,!1)}function mc(t,r,n){if(typeof r=="string"&&(r=[r]),!r||r.length===0)return n;let a=-1;for(;++a<r.length;)if(t.includes(r[a]))return!0;return!1}function yc(t,r,n,a){let o=-1;for(;++o<n.unsafe.length;)if(n.unsafe[o].character===`
`&&vf(n.stack,n.unsafe[o]))return/[ \t]/.test(a.before)?"":" ";return`\\
`}function Tx(t,r){const n=String(t);let a=n.indexOf(r),o=a,s=0,l=0;if(typeof r!="string")throw new TypeError("Expected substring");for(;a!==-1;)a===o?++s>l&&(l=s):s=1,o=a+r.length,a=n.indexOf(r,o);return l}function Xa(t,r){return!!(r.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function Ax(t){const r=t.options.fence||"`";if(r!=="`"&&r!=="~")throw new Error("Cannot serialize code with `"+r+"` for `options.fence`, expected `` ` `` or `~`");return r}function Px(t,r,n,a){const o=Ax(n),s=t.value||"",l=o==="`"?"GraveAccent":"Tilde";if(Xa(t,n)){const g=n.enter("codeIndented"),b=n.indentLines(s,Mx);return g(),b}const c=n.createTracker(a),f=o.repeat(Math.max(Tx(s,o)+1,3)),h=n.enter("codeFenced");let p=c.move(f);if(t.lang){const g=n.enter(`codeFencedLang${l}`);p+=c.move(n.safe(t.lang,{before:p,after:" ",encode:["`"],...c.current()})),g()}if(t.lang&&t.meta){const g=n.enter(`codeFencedMeta${l}`);p+=c.move(" "),p+=c.move(n.safe(t.meta,{before:p,after:`
`,encode:["`"],...c.current()})),g()}return p+=c.move(`
`),s&&(p+=c.move(s+`
`)),p+=c.move(f),h(),p}function Mx(t,r,n){return(n?"":"    ")+t}function us(t){const r=t.options.quote||'"';if(r!=='"'&&r!=="'")throw new Error("Cannot serialize title with `"+r+"` for `options.quote`, expected `\"`, or `'`");return r}function Ox(t,r,n,a){const o=us(n),s=o==='"'?"Quote":"Apostrophe",l=n.enter("definition");let c=n.enter("label");const f=n.createTracker(a);let h=f.move("[");return h+=f.move(n.safe(n.associationId(t),{before:h,after:"]",...f.current()})),h+=f.move("]: "),c(),!t.url||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),h+=f.move("<"),h+=f.move(n.safe(t.url,{before:h,after:">",...f.current()})),h+=f.move(">")):(c=n.enter("destinationRaw"),h+=f.move(n.safe(t.url,{before:h,after:t.title?" ":`
`,...f.current()}))),c(),t.title&&(c=n.enter(`title${s}`),h+=f.move(" "+o),h+=f.move(n.safe(t.title,{before:h,after:o,...f.current()})),h+=f.move(o),c()),l(),h}function Fx(t){const r=t.options.emphasis||"*";if(r!=="*"&&r!=="_")throw new Error("Cannot serialize emphasis with `"+r+"` for `options.emphasis`, expected `*`, or `_`");return r}function Fn(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Zi(t,r,n){const a=Ji(t),o=Ji(r);return a===void 0?o===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:a===1?o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}xf.peek=Dx;function xf(t,r,n,a){const o=Fx(n),s=n.enter("emphasis"),l=n.createTracker(a),c=l.move(o);let f=l.move(n.containerPhrasing(t,{after:o,before:c,...l.current()}));const h=f.charCodeAt(0),p=Zi(a.before.charCodeAt(a.before.length-1),h,o);p.inside&&(f=Fn(h)+f.slice(1));const g=f.charCodeAt(f.length-1),b=Zi(a.after.charCodeAt(0),g,o);b.inside&&(f=f.slice(0,-1)+Fn(g));const y=l.move(o);return s(),n.attentionEncodeSurroundingInfo={after:b.outside,before:p.outside},c+f+y}function Dx(t,r,n){return n.options.emphasis||"*"}function _f(t,r){let n=!1;return bf(t,function(a){if("value"in a&&/\r?\n|\r/.test(a.value)||a.type==="break")return n=!0,Qa}),!!((!t.depth||t.depth<3)&&rs(t)&&(r.options.setext||n))}function Lx(t,r,n,a){const o=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(a);if(_f(t,n)){const p=n.enter("headingSetext"),g=n.enter("phrasing"),b=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return g(),p(),b+`
`+(o===1?"=":"-").repeat(b.length-(Math.max(b.lastIndexOf("\r"),b.lastIndexOf(`
`))+1))}const l="#".repeat(o),c=n.enter("headingAtx"),f=n.enter("phrasing");s.move(l+" ");let h=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(h)&&(h=Fn(h.charCodeAt(0))+h.slice(1)),h=h?l+" "+h:l,n.options.closeAtx&&(h+=" "+l),f(),c(),h}kf.peek=Rx;function kf(t){return t.value||""}function Rx(){return"<"}Sf.peek=$x;function Sf(t,r,n,a){const o=us(n),s=o==='"'?"Quote":"Apostrophe",l=n.enter("image");let c=n.enter("label");const f=n.createTracker(a);let h=f.move("![");return h+=f.move(n.safe(t.alt,{before:h,after:"]",...f.current()})),h+=f.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),h+=f.move("<"),h+=f.move(n.safe(t.url,{before:h,after:">",...f.current()})),h+=f.move(">")):(c=n.enter("destinationRaw"),h+=f.move(n.safe(t.url,{before:h,after:t.title?" ":")",...f.current()}))),c(),t.title&&(c=n.enter(`title${s}`),h+=f.move(" "+o),h+=f.move(n.safe(t.title,{before:h,after:o,...f.current()})),h+=f.move(o),c()),h+=f.move(")"),l(),h}function $x(){return"!"}If.peek=Bx;function If(t,r,n,a){const o=t.referenceType,s=n.enter("imageReference");let l=n.enter("label");const c=n.createTracker(a);let f=c.move("![");const h=n.safe(t.alt,{before:f,after:"]",...c.current()});f+=c.move(h+"]["),l();const p=n.stack;n.stack=[],l=n.enter("reference");const g=n.safe(n.associationId(t),{before:f,after:"]",...c.current()});return l(),n.stack=p,s(),o==="full"||!h||h!==g?f+=c.move(g+"]"):o==="shortcut"?f=f.slice(0,-1):f+=c.move("]"),f}function Bx(){return"!"}Cf.peek=Nx;function Cf(t,r,n){let a=t.value||"",o="`",s=-1;for(;new RegExp("(^|[^`])"+o+"([^`]|$)").test(a);)o+="`";for(/[^ \r\n]/.test(a)&&(/^[ \r\n]/.test(a)&&/[ \r\n]$/.test(a)||/^`|`$/.test(a))&&(a=" "+a+" ");++s<n.unsafe.length;){const l=n.unsafe[s],c=n.compilePattern(l);let f;if(l.atBreak)for(;f=c.exec(a);){let h=f.index;a.charCodeAt(h)===10&&a.charCodeAt(h-1)===13&&h--,a=a.slice(0,h)+" "+a.slice(f.index+1)}}return o+a+o}function Nx(){return"`"}function Ef(t,r){const n=rs(t);return!!(!r.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}Tf.peek=Wx;function Tf(t,r,n,a){const o=us(n),s=o==='"'?"Quote":"Apostrophe",l=n.createTracker(a);let c,f;if(Ef(t,n)){const p=n.stack;n.stack=[],c=n.enter("autolink");let g=l.move("<");return g+=l.move(n.containerPhrasing(t,{before:g,after:">",...l.current()})),g+=l.move(">"),c(),n.stack=p,g}c=n.enter("link"),f=n.enter("label");let h=l.move("[");return h+=l.move(n.containerPhrasing(t,{before:h,after:"](",...l.current()})),h+=l.move("]("),f(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(f=n.enter("destinationLiteral"),h+=l.move("<"),h+=l.move(n.safe(t.url,{before:h,after:">",...l.current()})),h+=l.move(">")):(f=n.enter("destinationRaw"),h+=l.move(n.safe(t.url,{before:h,after:t.title?" ":")",...l.current()}))),f(),t.title&&(f=n.enter(`title${s}`),h+=l.move(" "+o),h+=l.move(n.safe(t.title,{before:h,after:o,...l.current()})),h+=l.move(o),f()),h+=l.move(")"),c(),h}function Wx(t,r,n){return Ef(t,n)?"<":"["}Af.peek=zx;function Af(t,r,n,a){const o=t.referenceType,s=n.enter("linkReference");let l=n.enter("label");const c=n.createTracker(a);let f=c.move("[");const h=n.containerPhrasing(t,{before:f,after:"]",...c.current()});f+=c.move(h+"]["),l();const p=n.stack;n.stack=[],l=n.enter("reference");const g=n.safe(n.associationId(t),{before:f,after:"]",...c.current()});return l(),n.stack=p,s(),o==="full"||!h||h!==g?f+=c.move(g+"]"):o==="shortcut"?f=f.slice(0,-1):f+=c.move("]"),f}function zx(){return"["}function ls(t){const r=t.options.bullet||"*";if(r!=="*"&&r!=="+"&&r!=="-")throw new Error("Cannot serialize items with `"+r+"` for `options.bullet`, expected `*`, `+`, or `-`");return r}function qx(t){const r=ls(t),n=t.options.bulletOther;if(!n)return r==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===r)throw new Error("Expected `bullet` (`"+r+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Hx(t){const r=t.options.bulletOrdered||".";if(r!=="."&&r!==")")throw new Error("Cannot serialize items with `"+r+"` for `options.bulletOrdered`, expected `.` or `)`");return r}function Pf(t){const r=t.options.rule||"*";if(r!=="*"&&r!=="-"&&r!=="_")throw new Error("Cannot serialize rules with `"+r+"` for `options.rule`, expected `*`, `-`, or `_`");return r}function Yx(t,r,n,a){const o=n.enter("list"),s=n.bulletCurrent;let l=t.ordered?Hx(n):ls(n);const c=t.ordered?l==="."?")":".":qx(n);let f=r&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!t.ordered){const p=t.children?t.children[0]:void 0;if((l==="*"||l==="-")&&p&&(!p.children||!p.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(f=!0),Pf(n)===l&&p){let g=-1;for(;++g<t.children.length;){const b=t.children[g];if(b&&b.type==="listItem"&&b.children&&b.children[0]&&b.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(l=c),n.bulletCurrent=l;const h=n.containerFlow(t,a);return n.bulletLastUsed=l,n.bulletCurrent=s,o(),h}function Ux(t){const r=t.options.listItemIndent||"one";if(r!=="tab"&&r!=="one"&&r!=="mixed")throw new Error("Cannot serialize items with `"+r+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return r}function Vx(t,r,n,a){const o=Ux(n);let s=n.bulletCurrent||ls(n);r&&r.type==="list"&&r.ordered&&(s=(typeof r.start=="number"&&r.start>-1?r.start:1)+(n.options.incrementListMarker===!1?0:r.children.indexOf(t))+s);let l=s.length+1;(o==="tab"||o==="mixed"&&(r&&r.type==="list"&&r.spread||t.spread))&&(l=Math.ceil(l/4)*4);const c=n.createTracker(a);c.move(s+" ".repeat(l-s.length)),c.shift(l);const f=n.enter("listItem"),h=n.indentLines(n.containerFlow(t,c.current()),p);return f(),h;function p(g,b,y){return b?(y?"":" ".repeat(l))+g:(y?s:s+" ".repeat(l-s.length))+g}}function Gx(t,r,n,a){const o=n.enter("paragraph"),s=n.enter("phrasing"),l=n.containerPhrasing(t,a);return s(),o(),l}const jx=ss(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Qx(t,r,n,a){return(t.children.some(function(l){return jx(l)})?n.containerPhrasing:n.containerFlow).call(n,t,a)}function Kx(t){const r=t.options.strong||"*";if(r!=="*"&&r!=="_")throw new Error("Cannot serialize strong with `"+r+"` for `options.strong`, expected `*`, or `_`");return r}Mf.peek=Xx;function Mf(t,r,n,a){const o=Kx(n),s=n.enter("strong"),l=n.createTracker(a),c=l.move(o+o);let f=l.move(n.containerPhrasing(t,{after:o,before:c,...l.current()}));const h=f.charCodeAt(0),p=Zi(a.before.charCodeAt(a.before.length-1),h,o);p.inside&&(f=Fn(h)+f.slice(1));const g=f.charCodeAt(f.length-1),b=Zi(a.after.charCodeAt(0),g,o);b.inside&&(f=f.slice(0,-1)+Fn(g));const y=l.move(o+o);return s(),n.attentionEncodeSurroundingInfo={after:b.outside,before:p.outside},c+f+y}function Xx(t,r,n){return n.options.strong||"*"}function Jx(t,r,n,a){return n.safe(t.value,a)}function Zx(t){const r=t.options.ruleRepetition||3;if(r<3)throw new Error("Cannot serialize rules with repetition `"+r+"` for `options.ruleRepetition`, expected `3` or more");return r}function e_(t,r,n){const a=(Pf(n)+(n.options.ruleSpaces?" ":"")).repeat(Zx(n));return n.options.ruleSpaces?a.slice(0,-1):a}const t_={blockquote:Cx,break:yc,code:Px,definition:Ox,emphasis:xf,hardBreak:yc,heading:Lx,html:kf,image:Sf,imageReference:If,inlineCode:Cf,link:Tf,linkReference:Af,list:Yx,listItem:Vx,paragraph:Gx,root:Qx,strong:Mf,text:Jx,thematicBreak:e_},n_=[r_];function r_(t,r,n,a){if(r.type==="code"&&Xa(r,a)&&(t.type==="list"||t.type===r.type&&Xa(t,a)))return!1;if("spread"in n&&typeof n.spread=="boolean")return t.type==="paragraph"&&(t.type===r.type||r.type==="definition"||r.type==="heading"&&_f(r,a))?void 0:n.spread?1:0}const jn=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],i_=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:jn},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:jn},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:jn},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:jn},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:jn},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:jn},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:jn},{atBreak:!0,character:"~"}];function o_(t){return t.label||!t.identifier?t.label||"":df(t.identifier)}function a_(t){if(!t._compiled){const r=(t.atBreak?"[\\r\\n][\\t ]*":"")+(t.before?"(?:"+t.before+")":"");t._compiled=new RegExp((r?"("+r+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(t.character)?"\\":"")+t.character+(t.after?"(?:"+t.after+")":""),"g")}return t._compiled}function s_(t,r,n){const a=r.indexStack,o=t.children||[],s=[];let l=-1,c=n.before,f;a.push(-1);let h=r.createTracker(n);for(;++l<o.length;){const p=o[l];let g;if(a[a.length-1]=l,l+1<o.length){let C=r.handle.handlers[o[l+1].type];C&&C.peek&&(C=C.peek),g=C?C(o[l+1],t,r,{before:"",after:"",...h.current()}).charAt(0):""}else g=n.after;s.length>0&&(c==="\r"||c===`
`)&&p.type==="html"&&(s[s.length-1]=s[s.length-1].replace(/(\r?\n|\r)$/," "),c=" ",h=r.createTracker(n),h.move(s.join("")));let b=r.handle(p,t,r,{...h.current(),after:g,before:c});f&&f===b.slice(0,1)&&(b=Fn(f.charCodeAt(0))+b.slice(1));const y=r.attentionEncodeSurroundingInfo;r.attentionEncodeSurroundingInfo=void 0,f=void 0,y&&(s.length>0&&y.before&&c===s[s.length-1].slice(-1)&&(s[s.length-1]=s[s.length-1].slice(0,-1)+Fn(c.charCodeAt(0))),y.after&&(f=g)),h.move(b),s.push(b),c=b.slice(-1)}return a.pop(),s.join("")}function u_(t,r,n){const a=r.indexStack,o=t.children||[],s=r.createTracker(n),l=[];let c=-1;for(a.push(-1);++c<o.length;){const f=o[c];a[a.length-1]=c,l.push(s.move(r.handle(f,t,r,{before:`
`,after:`
`,...s.current()}))),f.type!=="list"&&(r.bulletLastUsed=void 0),c<o.length-1&&l.push(s.move(l_(f,o[c+1],t,r)))}return a.pop(),l.join("")}function l_(t,r,n,a){let o=a.join.length;for(;o--;){const s=a.join[o](t,r,n,a);if(s===!0||s===1)break;if(typeof s=="number")return`
`.repeat(1+s);if(s===!1)return`

<!---->

`}return`

`}const c_=/\r?\n|\r/g;function f_(t,r){const n=[];let a=0,o=0,s;for(;s=c_.exec(t);)l(t.slice(a,s.index)),n.push(s[0]),a=s.index+s[0].length,o++;return l(t.slice(a)),n.join("");function l(c){n.push(r(c,o,!c))}}function h_(t,r,n){const a=(n.before||"")+(r||"")+(n.after||""),o=[],s=[],l={};let c=-1;for(;++c<t.unsafe.length;){const p=t.unsafe[c];if(!vf(t.stack,p))continue;const g=t.compilePattern(p);let b;for(;b=g.exec(a);){const y="before"in p||!!p.atBreak,C="after"in p,I=b.index+(y?b[1].length:0);o.includes(I)?(l[I].before&&!y&&(l[I].before=!1),l[I].after&&!C&&(l[I].after=!1)):(o.push(I),l[I]={before:y,after:C})}}o.sort(d_);let f=n.before?n.before.length:0;const h=a.length-(n.after?n.after.length:0);for(c=-1;++c<o.length;){const p=o[c];p<f||p>=h||p+1<h&&o[c+1]===p+1&&l[p].after&&!l[p+1].before&&!l[p+1].after||o[c-1]===p-1&&l[p].before&&!l[p-1].before&&!l[p-1].after||(f!==p&&s.push(bc(a.slice(f,p),"\\")),f=p,/[!-/:-@[-`{-~]/.test(a.charAt(p))&&(!n.encode||!n.encode.includes(a.charAt(p)))?s.push("\\"):(s.push(Fn(a.charCodeAt(p))),f++))}return s.push(bc(a.slice(f,h),n.after)),s.join("")}function d_(t,r){return t-r}function bc(t,r){const n=/\\(?=[!-/:-@[-`{-~])/g,a=[],o=[],s=t+r;let l=-1,c=0,f;for(;f=n.exec(s);)a.push(f.index);for(;++l<a.length;)c!==a[l]&&o.push(t.slice(c,a[l])),o.push("\\"),c=a[l];return o.push(t.slice(c)),o.join("")}function p_(t){const r=t||{},n=r.now||{};let a=r.lineShift||0,o=n.line||1,s=n.column||1;return{move:f,current:l,shift:c};function l(){return{now:{line:o,column:s},lineShift:a}}function c(h){a+=h}function f(h){const p=h||"",g=p.split(/\r?\n|\r/g),b=g[g.length-1];return o+=g.length-1,s=g.length===1?s+b.length:1+b.length+a,p}}function g_(t,r){const n=r||{},a={associationId:o_,containerPhrasing:w_,containerFlow:v_,createTracker:p_,compilePattern:a_,enter:s,handlers:{...t_},handle:void 0,indentLines:f_,indexStack:[],join:[...n_],options:{},safe:x_,stack:[],unsafe:[...i_]};wf(a,n),a.options.tightDefinitions&&a.join.push(b_),a.handle=kx("type",{invalid:m_,unknown:y_,handlers:a.handlers});let o=a.handle(t,void 0,a,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return o&&o.charCodeAt(o.length-1)!==10&&o.charCodeAt(o.length-1)!==13&&(o+=`
`),o;function s(l){return a.stack.push(l),c;function c(){a.stack.pop()}}}function m_(t){throw new Error("Cannot handle value `"+t+"`, expected node")}function y_(t){const r=t;throw new Error("Cannot handle unknown node `"+r.type+"`")}function b_(t,r){if(t.type==="definition"&&t.type===r.type)return 0}function w_(t,r){return s_(t,this,r)}function v_(t,r){return u_(t,this,r)}function x_(t,r){return h_(this,t,r)}function __(t){const r=this;r.compiler=n;function n(a){return g_(a,{...r.data("settings"),...t,extensions:r.data("toMarkdownExtensions")||[]})}}const ue={text:"text",boolean:"boolean",multicheckbox:"multicheckbox",richText:"richText",number:"number"};class k_{constructor(){this.logger=Zt(en.InputCreator)}createInput(r){const{componentId:n,inputId:a,type:o}=r;let s="";try{switch(o){case ue.text:case ue.richText:{s=`> ${r.defaultValue??""}`;break}case ue.boolean:{const l=r.defaultValue===!0?"x":" ",c=r.label??"Checkbox";s=`- [${l}] ${c}`;break}case ue.multicheckbox:{const l=r.options??[];if(!l.length)throw this.logger.error("multicheckbox must have non-empty options array",{opts:r}),new Error("multicheckbox must have non-empty options array");s=l.map(c=>`- [ ] ${Ka.hiddenValue(n,a,c.value)} ${c.label}`).join(`
`);break}case ue.number:{s=`> {Number} ${r.defaultValue??""}`;break}default:throw this.logger.error(`Unknown input type: ${o}`,{opts:r}),new Error("Unknown input type: "+o)}}catch(l){throw this.logger.error("Failed to create input",{error:l,opts:r}),l}return Ka.input.wrap({componentId:n,inputId:a,content:s,inputType:o})}parseMarkdown(r){try{return Ua().use(mf).parse(r)}catch(n){throw this.logger.error("Failed to parse Markdown",{error:n,md:r}),n}}stringifyMarkdown(r){try{return Ua().use(__).stringify(r)}catch(n){throw this.logger.error("Failed to stringify Markdown",{error:n,ast:r}),n}}}const Mn=new k_,pe={Day:"day",Week:"week",Month:"month",Quarter:"quarter",Year:"year",Decade:"decade"};class S_{async shouldShowInput(r,n=Xn.ALMOST_DAILY){const{id:a,schedule:o}=r;return o?!(o.active===!1||!this.isWithinTimeBoundaries(o)||!await this.checkDependencies(o,n)||o.condition&&!o.condition()||!this.shouldShowBasedOnPeriodicity(o)||o.target&&!o.target.keepShowing&&await this.isTargetMet(a,o,n)||o.limit&&await this.isLimitReached(a,o,n)):!0}async getInputProgress(r,n=Xn.ALMOST_DAILY){const{id:a,schedule:o}=r,s={};if(!o)return s;if(o.target){const l=this.getPeriodStartDate(o.target.per),c=await this.getCompletionCount(a,l,n);s.targetProgress={current:c,target:o.target.count,isComplete:c>=o.target.count}}if(o.limit){const l=this.getPeriodStartDate(o.limit.per),c=await this.getCompletionCount(a,l,n);s.limitProgress={current:c,limit:o.limit.max,percentage:c/o.limit.max*100}}return s}isWithinTimeBoundaries(r){const a=new Date().toISOString().split("T")[0];return!(r.startDate&&a<r.startDate||r.endDate&&a>r.endDate)}async checkDependencies(r,n){if(r.requiresCompleted&&r.requiresCompleted.length>0){const a=new Date().toISOString().split("T")[0];for(const o of r.requiresCompleted){const l=(await gn.getInputsById(n,o)).find(c=>c.reportDate===a);if(!l||l.value!==!0)return!1}}if(r.hideIfCompleted&&r.hideIfCompleted.length>0){const a=new Date().toISOString().split("T")[0];for(const o of r.hideIfCompleted){const l=(await gn.getInputsById(n,o)).find(c=>c.reportDate===a);if(l&&l.value===!0)return!1}}return!0}shouldShowBasedOnPeriodicity(r){const n=new Date;if(n.toISOString().split("T")[0],r.daysOfWeek&&r.daysOfWeek.length>0){const a=n.getDay();return r.daysOfWeek.map(s=>s===7?0:(s>=1&&s<=6,s)).includes(a)}if(r.datesOfMonth&&r.datesOfMonth.length>0){const a=n.getDate();return r.datesOfMonth.includes(a)}return r.showEvery?this.shouldShowBasedOnShowEvery(r.showEvery.count,r.showEvery.unit):!0}shouldShowBasedOnShowEvery(r,n){if(r===1)return!0;const a=new Date().toISOString().split("T")[0],o=this.getDayNumberFromEpoch(a);switch(n){case pe.Day:return o%r===0;case pe.Week:return Math.floor(o/7)%r===0;case pe.Month:return this.getMonthNumberFromEpoch(a)%r===0;case pe.Quarter:return this.getQuarterNumberFromEpoch(a)%r===0;case pe.Year:return this.getYearNumberFromEpoch(a)%r===0;default:return!0}}async isTargetMet(r,n,a){if(!n.target)return!1;const o=this.getPeriodStartDate(n.target.per);return await this.getCompletionCount(r,o,a)>=n.target.count}async isLimitReached(r,n,a){if(!n.limit)return!1;const o=this.getPeriodStartDate(n.limit.per);return await this.getCompletionCount(r,o,a)>=n.limit.max}async getCompletionCount(r,n,a){return(await gn.getInputsById(a,r)).filter(c=>c.reportDate&&c.reportDate>=n).filter(c=>c.value===!0).length}getPeriodStartDate(r){const n=new Date;switch(r.unit){case pe.Day:if(r.count===1)return n.toISOString().split("T")[0];const a=new Date(n);return a.setDate(n.getDate()-r.count),a.toISOString().split("T")[0];case pe.Week:if(r.count===1){const h=n.getDay(),p=new Date(n);return p.setDate(n.getDate()-(h===0?6:h-1)),p.toISOString().split("T")[0]}const o=new Date(n);return o.setDate(n.getDate()-r.count*7),o.toISOString().split("T")[0];case pe.Month:if(r.count===1)return`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-01`;const s=new Date(n);return s.setMonth(n.getMonth()-r.count),s.toISOString().split("T")[0];case pe.Quarter:if(r.count===1){const p=Math.floor(n.getMonth()/3)*3;return`${n.getFullYear()}-${String(p+1).padStart(2,"0")}-01`}const l=new Date(n);return l.setMonth(n.getMonth()-r.count*3),l.toISOString().split("T")[0];case pe.Year:if(r.count===1)return`${n.getFullYear()}-01-01`;const c=new Date(n);return c.setFullYear(n.getFullYear()-r.count),c.toISOString().split("T")[0];case pe.Decade:return`${Math.floor(n.getFullYear()/10)*10}-01-01`;default:return n.toISOString().split("T")[0]}}getDayNumberFromEpoch(r){const n=new Date("2020-01-01"),o=new Date(r).getTime()-n.getTime();return Math.floor(o/(1e3*60*60*24))}getMonthNumberFromEpoch(r){const n=new Date("2020-01-01"),a=new Date(r),o=a.getFullYear()-n.getFullYear(),s=a.getMonth()-n.getMonth();return o*12+s}getQuarterNumberFromEpoch(r){const n=this.getMonthNumberFromEpoch(r);return Math.floor(n/3)}getYearNumberFromEpoch(r){const n=new Date(r),a=new Date("2020-01-01");return n.getFullYear()-a.getFullYear()}}const Gr=new S_;class st{constructor(r){this.content=[],this.logger=Zt(en.ComponentBuilder),this.componentSchedule=null,this.hasRenderedInputs=!1,this.componentId=r}_md(r){const n=typeof r=="function"?r():r;return this.content.push(n),this}_divider(){return this.content.push(`
***
`),this}_fancyTitle(r,n="⚛︎"){return r?this.content.push(`<center>${n} <strong>${r}</strong> ${n}</center>`):this.content.push("---"),this}_fancyDivider(r,n="⚛︎"){return this._fancyTitle(r,n)}_themedDivider(r,n){return this.content.push(`### ${n} ${r}`),this}_blockquoteDivider(r){return r?this.content.push(`> ${r}`):this.content.push("> ---"),this}_foldable(r,n="Guidance"){const o=r.split(`
`).map(l=>`> ${l}`),s=`> [!note]- ${n}
${o.join(`
`)}`;return this.content.push(s),this.content.push(""),this}schedule(r){return"schedule"in r&&r.schedule?this.componentSchedule=r.schedule:this.componentSchedule=r,this}async _input(r){if("id"in r&&"inputOptions"in r){const a=r;if(a.schedule&&!await Gr.shouldShowInput(a))return this;this.hasRenderedInputs=!0,a.inputOptions.type!==ue.boolean&&this._inputLabel(a.label,a.description);const o={...a.inputOptions,componentId:this.componentId};this.content.push(Mn.createInput(o)),a.inputOptions.type!==ue.boolean&&a.inputOptions.type!==ue.multicheckbox&&this.content.push("")}else{this.hasRenderedInputs=!0;const a={...r,componentId:this.componentId};this.content.push(Mn.createInput(a))}return this}_inputLabel(r,n){const a=n?`**${r}** ${n}`:`**${r}**`;return this.content.push(a),this}_text(r,n,a){const o=Mn.createInput({componentId:this.componentId,type:ue.text,inputId:r,defaultValue:n,placeholder:a});return this.content.push(o),this.content.push(""),this}_richText(r,n,a){this.content.push("<center>· · · · · · · · · · · · · · · ·</center>");const o=Mn.createInput({componentId:this.componentId,type:ue.richText,inputId:r,defaultValue:n,placeholder:a});return this.content.push(o),this.content.push("<center>· · · · · · · · · · · · · · · ·</center>"),this}_boolean(r,n,a){const o=Mn.createInput({componentId:this.componentId,type:ue.boolean,inputId:r,label:n,defaultValue:a});return this.content.push(o),this}_number(r,n){const a=Mn.createInput({componentId:this.componentId,type:ue.number,inputId:r,defaultValue:n});return this.content.push(a),this}_multiCheckbox(r,n,a,o){const s=Mn.createInput({componentId:this.componentId,type:ue.multicheckbox,inputId:r,options:n,defaultValue:a,collapsed:o});return this.content.push(s),this}_multiCheckboxSC(r,n,a,o){const s=Mn.createInput({componentId:this.componentId,type:ue.multicheckbox,inputId:r,options:n,singleChoice:!0,defaultValue:a,collapsed:o});return this.content.push(s),this}_nl(){return this.content.push(`
`),this}async render(){if(this.componentSchedule&&!await Gr.shouldShowInput({id:this.componentId,inputOptions:{inputId:this.componentId,type:ue.text},label:this.componentId,schedule:this.componentSchedule}))return this.logger.dev("Component hidden by explicit schedule",{componentId:this.componentId}),"";if(!this.hasRenderedInputs&&!this.componentSchedule)return this.logger.dev("Component hidden - no inputs rendered",{componentId:this.componentId}),"";const r=Ka.component.wrap(this.componentId,this.content.join(`
`));return this.logger.dev("Component rendered",{outputLength:r.length}),r}}async function I_(){const t=new st("consistencyStats");try{const r=await gn.getReportInputs(Xn.ALMOST_DAILY);if(!r||r.length===0)return t._md("📊 **Consistency Tracker** · 🎯 Starting your journey today!"),t.render();const n=Array.from(new Set(r.map(y=>y.reportDate))).sort().reverse(),a=n[n.length-1],o=new Date(a),s=new Date,l=Dy(s,o)+1,f=[{days:7,label:"7d"},{days:30,label:"30d"},{days:90,label:"90d"}].map(({days:y,label:C})=>{const I=Xi(Db(s,y-1),"yyyy-MM-dd"),M=n.filter(N=>N>=I).length,P=Math.min(y,l),$=Math.round(M/P*100);return{label:C,reports:M,days:P,percentage:$}}),h=n.length,p=Math.round(h/l*100),g=[];for(const y of f){const C=parseInt(y.label.replace("d",""));if(y.days<C)continue;const I=y.percentage>=80?"🎉":y.percentage>=60?"✅":y.percentage>=40?"📈":"🌱";g.push(`${I} ${y.label}: ${y.reports}/${y.days} (${y.percentage}%)`)}const b=p>=80?"🏆":p>=60?"⭐":"🎯";g.push(`${b} All: ${h}/${l} (${p}%)`),t._md(`📊 **Consistency Tracker** · ${g.join(" · ")}`)}catch{t._md("📊 **Consistency Tracker** · Starting fresh!")}return t.render()}const C_=t=>({...t,inputOptions:{inputId:t.id,type:ue.boolean,label:t.label}}),E_=[{id:"dayPlanning",label:"Planning my day",cue:"After breakfast",reward:"More productive and organized day",schedule:{active:!0,target:{count:1,per:{count:1,unit:pe.Day}}}},{id:"exercise",label:"Exercise",cue:"Any suitable time during the day",reward:"Better health, more energy, and improved mood",schedule:{active:!0,target:{count:5,per:{count:1,unit:pe.Week},keepShowing:!0}}},{id:"morningWarmUp",label:"Morning Physical Warm-Up",cue:"After waking up",reward:"Increased energy and readiness for the day",schedule:{active:!0,target:{count:1,per:{count:1,unit:pe.Day}}}},{id:"recreation",label:"Having fun",cue:"In the evening or during free time",reward:"Relaxation, joy, and stress relief",schedule:{active:!0,target:{count:1,per:{count:1,unit:pe.Day}}}},{id:"selfPleasure",label:"FPF",cue:"At free from work personal time",reward:"Better focus and increasing ability to feel joy",schedule:{active:!0,target:{count:7,per:{count:10,unit:pe.Day}}}},{id:"poetryEngaging",label:"Spend time with poetry",cue:"At leisure time",reward:"Happiness and healthy feelings expression from engaging with poetry",schedule:{active:!0,target:{count:3,per:{count:1,unit:pe.Month}}}},{id:"programmingLearning",label:"Programming study",cue:"Dedicated learning time",reward:"Skill development, career growth, and problem-solving mastery",schedule:{active:!0,target:{count:3,per:{count:1,unit:pe.Week}}}},{id:"recreationalCannabis",label:"Getting high",cue:"Day off (if next day is also day off, then) in safe calm well prepared environment and mood",reward:"Self-care routine, relaxation, stress relief",schedule:{active:!0,target:{count:1,per:{count:1,unit:pe.Week}},daysOfWeek:[5,6,7],limit:{max:20,per:{count:6,unit:pe.Month}}}},{id:"fastMorningEveningRoutine",label:"Complete morning & evening routine efficiently",cue:"During morning (breakfast, hygiene) and evening (cleaning teeth, preparing for bed) routines",reward:"Save up to 1 hour daily, more productive day, less stress"},{id:"phoneDetox",label:"No phone for 3 hours",cue:"During focused work or leisure time",reward:"Better focus, reduced distractions, mental clarity, reclaimed time",schedule:{active:!0,target:{count:3,per:{count:1,unit:pe.Week},keepShowing:!0}}}],T_=E_.map(C_),A_=[{label:"3 - Great",value:"3"},{label:"2 - Adequate",value:"2"},{label:"1 - Struggling",value:"1"}],P_=t=>({...t,inputOptions:{inputId:t.id,type:ue.multicheckbox,options:A_,singleChoice:!0}}),M_=[{id:"positiveEmotions",label:"Positive Emotions",description:"Feelings of joy, gratitude, contentment, hope, and pleasure. Includes savoring the moment, reflecting on past positives, and hopeful anticipation of the future."},{id:"engagement",label:"Engagement",description:"Deep involvement in activities; being absorbed, losing sense of time (‘flow’). Doing work or hobbies that challenge your skills just enough that you’re fully present."},{id:"relationships",label:"Relationships",description:"Supportive, meaningful social connections. Feeling loved, valued, belonging; giving and receiving support. Close friendships, family bonds, community ties.",schedule:{showEvery:{count:2,unit:pe.Day}}},{id:"meaning",label:"Meaning",description:"Having a sense of purpose, belonging to something bigger than yourself. Knowing what matters in your life and using your strengths in service of values, causes or goals."},{id:"accomplishment",label:"Accomplishment",description:"Mastery, achievement, working toward goals. Sense of progress, competence, whether or not it brings immediate joy—achieving things that matter to you."},{id:"sleepQuality",label:"Sleep Quality",description:"How well-rested you feel. Quality of sleep, sufficient hours, feeling refreshed upon waking. Sleep is foundational to physical and mental wellbeing."},{id:"embodiment",label:"Embodiment",description:"Body acceptance and feeling at home in your body. Being present in your physical self, body image, self-compassion toward your body, feeling connected rather than disconnected from your physical form.",schedule:{showEvery:{count:3,unit:pe.Day}}},{id:"physicalPleasure",label:"Physical Pleasure",description:"Sensory experiences and bodily comfort. Enjoying food, warmth, movement, relaxation. The simple joys of physical existence—a hot shower, soft blanket, delicious meal, or stretching your body.",schedule:{showEvery:{count:2,unit:pe.Day}}},{id:"touchAndIntimacy",label:"Touch & Intimacy",description:"Physical affection, connection, and love. Hugs, cuddles, holding hands, sexual intimacy. The warmth and safety of physical closeness with loved ones. Human touch is a fundamental need.",schedule:{showEvery:{count:3,unit:pe.Day}}},{id:"physicalCondition",label:"Physical Condition",description:"Your bodily health: exercise, energy levels and how physically capable you feel. General fitness and vitality."},{id:"nutrition",label:"Nutrition",description:"Quality of your food choices and eating patterns. Nourishing your body with balanced meals, adequate hydration, and mindful eating. Good nutrition fuels energy, mood, and long-term health."},{id:"mindset",label:"Mindset",description:"Cultivating optimism, resilience, self-efficacy, and a growth mindset. A positive mindset shapes how you interpret setbacks, sustain motivation, and approach challenges."},{id:"environment",label:"Environment",description:"Living and working in spaces that feel safe, comfortable, and supportive of wellbeing. Includes access to nature, orderliness, and resources that help you thrive.",schedule:{showEvery:{count:3,unit:pe.Day}}},{id:"economicSecurity",label:"Economic Security",description:"Having financial stability, freedom from chronic money stress, and satisfaction with work. Economic security supports autonomy and reduces background stress that erodes wellbeing.",schedule:{showEvery:{count:10,unit:pe.Day}}}],Ja=M_.map(P_),O_=t=>({...t,inputOptions:{inputId:t.id,type:ue.boolean,label:t.label}}),F_=[{id:"dichotomy_of_control_practice",label:"Stoic Practice. The Dichotomy of Control",category:"stoic",component:"morningReflection",description:"Epictetus' core practice and foundational Stoic exercise that eliminates suffering by training you to focus only on what you can control",guide:`**The Core Principle:**
The Stoics discovered that **all suffering comes from desiring things outside your control**. When you stop struggling against the unchangeable and channel your energy into what you CAN control, you gain peace of mind.

**✅ COMPLETELY IN YOUR CONTROL:**
- Your judgments, opinions, and interpretations
- Your responses and reactions to events
- Your character, virtues, and values
- Your effort, attention, and choices
- How you treat others
- What you pursue and avoid

**❌ OUTSIDE YOUR CONTROL:**
- Other people's opinions, actions, and judgments
- Outcomes, results, and consequences
- Past events and future circumstances
- Your reputation and what others think
- External events (weather, traffic, delays)
- Natural processes (aging, sickness, death)

**How to Practice:**
When faced with any situation today, ask yourself: "Is this within my control?" If yes, take action. If no, accept it and focus on your response instead.

_"Make the best use of what is in your power, and take the rest as it happens."_ — Epictetus`},{id:"obstacle_is_way_practice",label:"Stoic Practice. The Obstacle Is The Way",category:"stoic",component:"morningReflection",description:"Marcus Aurelius' teaching: obstacles contain hidden opportunities for growth",guide:`**The Core Principle:**
Marcus Aurelius taught: **"The impediment to action advances action. What stands in the way becomes the way."**

This means every obstacle contains hidden opportunity:
- **Blocked plan?** → Forces you to become more creative and resourceful
- **Frustrating person?** → Opportunity to practice patience and understanding
- **Failure?** → Valuable data for learning and improvement
- **Delay?** → Gift of time to prepare better or rest

**The Reframe:**
Stop seeing obstacles as enemies. Start seeing them as **training equipment** for your character. Each challenge makes you stronger, wiser, more resilient.

**How to Practice:**
When you face a setback today, ask: "What opportunity is hidden in this obstacle? How is this making me better?"

_"The obstacle is not blocking your path – it IS your path. It's revealing where you need to grow."_ — Ryan Holiday`}],D_=F_.map(O_),L_=t=>{let r={id:t.inputOptions.inputId,...t,description:t.description||""};return t.inputOptions.type===ue.boolean&&(r.inputOptions.label=t.label),r},R_=[{label:"What Matters Most (Memento Mori)",inputOptions:{inputId:"memento_mori_focus",type:ue.text},description:"You will die. Your days are numbered. What truly matters? Which pillar deserves your limited time?"},{inputOptions:{inputId:"priority_plan",type:ue.text},label:"My #1 Task Today",description:"ONE concrete action serving what matters. When & where will I do it? What's my first 2-minute step?"},{inputOptions:{inputId:"tomorrow_priority",type:ue.text},label:"Tomorrow's #1 Priority"},{inputOptions:{inputId:"message_for_tomorrow",type:ue.richText},label:"Message for Tomorrow",description:"Short and meaningful message for your future self"},{inputOptions:{inputId:"plan_next_day",type:ue.boolean},label:"Plan next day",description:"Calendar events, tasks, notifications"},{inputOptions:{inputId:"accomplishments",type:ue.text},label:"My Win Today",description:"What was my proudest accomplishment? What effort/virtue made it possible?"},{inputOptions:{inputId:"obstacles",type:ue.text},label:"My Obstacle & Learning",description:"What happened? How did I respond? What did I learn? How will I use this?"},{inputOptions:{inputId:"if_then_plan",type:ue.text},label:"My Implementation Intention",description:"If this happens again, I will... (If [OBSTACLE], then I will [RESPONSE])"},{inputOptions:{inputId:"gratitudes",type:ue.richText,placeholder:" 1. "},label:"Three Good Things",description:"*What good happened? Why was it good? What was your role?*"},{inputOptions:{inputId:"main_distraction",type:ue.text},label:"What distracted me most today?",schedule:{showEvery:{count:2,unit:pe.Day}}},{inputOptions:{inputId:"flow_moments",type:ue.text},label:"What helped me focus?",description:"(Environment, time, task type)",schedule:{showEvery:{count:2,unit:pe.Day}}},{inputOptions:{inputId:"willpower_challenge",type:ue.text},label:"What was my biggest temptation/willpower challenge?",schedule:{showEvery:{count:2,unit:pe.Day}}},{inputOptions:{inputId:"strongest_emotion",type:ue.text},label:"What was my strongest emotion today?"},{inputOptions:{inputId:"emotion_trigger",type:ue.text},label:"What triggered it?",description:"Situation, person, thought"},{inputOptions:{inputId:"emotion_response",type:ue.text},label:"How did I respond?"},{inputOptions:{inputId:"better_emotion_response",type:ue.text},label:"What response would I choose next time?"},{inputOptions:{inputId:"negative_visualization_done",type:ue.boolean},label:"I practiced Negative Visualization",description:"5 min reflection on what I could lose",schedule:{daysOfWeek:[1,3,5]}},{inputOptions:{inputId:"voluntary_discomfort_practice",type:ue.multicheckbox,options:[{label:"Cold shower (30-60 sec)",value:"cold_shower"},{label:"Less heat/AC than comfortable",value:"less_climate_control"},{label:"Skip stimulants (coffee, guarana, etc.)",value:"skip_stimulants"}],singleChoice:!0},label:"Today's Voluntary Discomfort",description:"Choose ONE small discomfort to practice today",schedule:{daysOfWeek:[1,3,5]}},{inputOptions:{inputId:"mindful_pause_taken",type:ue.boolean},label:"I have taken a mindful pause",schedule:{daysOfWeek:[1,3,5]}}],$_=R_.map(L_),Ne=$_.reduce((t,r)=>({...t,[String(r.id)]:r}),{});async function B_(){const t="morningReflection",r=new st(t);return r._md("## 🧘 Morning Reflection (⭐ RECOMMENDED)"),D_.filter(n=>n.component===t).forEach(n=>{r._foldable(n.guide,n.label),r._input(n.inputOptions)}),r.render()}async function N_(){const t="negativeVisualization",r=new st(t);return r._md("## 🪞 Negative Visualization (💡 OPTIONAL - 2 min)"),r._foldable(`**Praemeditatio Malorum** — Ancient Stoic gratitude practice

This is NOT pessimism. This is **appreciation training** that the Stoics practiced daily.

**The Problem** — we take everything for granted. Your health, your home, your loved ones — you stop seeing them. Hedonic adaptation makes you numb to your blessings.

**The Solution** — briefly imagine losing what you value. When you mentally "lose" something, you suddenly SEE it again with fresh eyes.

**What this practice does:**
- **Breaks hedonic adaptation** — stop taking good things for granted
- **Generates genuine gratitude** — feel appreciation, not just think it  
- **Prepares you mentally** — if loss happens, the shock is less severe
- **Increases present joy** — savor what you have RIGHT NOW

**How to practice:**
1. Close your eyes for 10-20 seconds
2. Vividly imagine ONE thing you value being gone (person, health, home, ability)
3. Feel the loss — let it be uncomfortable for a moment
4. Open your eyes and appreciate that you STILL HAVE IT

This isn't dwelling on loss. It's a quick mental exercise to restore wonder.

_"He robs present ills of their power who has perceived their coming beforehand."_ — Seneca`,"Stoic Gratitude Practice"),r._md("**Practice Steps:**"),r._md("1. **Close your eyes** — take a slow breath"),r._md("2. **Imagine the loss** — picture losing someone/something you love (10 seconds)"),r._md("3. **Feel it** — don't rush past the discomfort"),r._md("4. **Open your eyes** — look around. You still have them. Feel that relief."),await r._input(Ne.negative_visualization_done),r.render()}async function W_(){const t="priorityPlanning",r=new st(t);return r._md("## 🎯 Priority Planning (📌 CORE - 3-5 min)"),r._foldable(`**Start with Death, Plan with Clarity**

**Memento Mori** (from Stoicism) — "Remember you will die." This isn't morbid—it's the ultimate focusing tool. When you remember death, trivialities fade and what truly matters becomes crystal clear.

**The Four Pillars of Life:**
1. **Happiness & Peace of Mind** — inner tranquility and joy
2. **Body & Health** — physical wellbeing and vitality  
3. **People & Relationships** — love, connection, community
4. **Meaningful Work** — contributing something valuable

_"You could leave life right now. Let that determine what you do and say and think."_ — Marcus Aurelius

**Implementation Intentions** (from Atomic Habits) — being specific doubles success rates:
"I will [BEHAVIOR] at [TIME] in [LOCATION]."

**The Process:**
1. Remember death → What pillar needs attention?
2. Choose ONE priority that serves that pillar
3. Make a specific plan with when/where
4. Prepare for obstacles`,"Memento Mori + Implementation Intentions"),await r._input(Ne.memento_mori_focus),await r._input(Ne.priority_plan),r.render()}async function z_(){const t="voluntaryDiscomfort",r=new st(t);return r._md("## 🧊 Voluntary Discomfort (💡 OPTIONAL - 2 min)"),r._foldable(`**Practicing Poverty** — Seneca's resilience training

The Stoics deliberately practiced small discomforts. Not to punish themselves, but to build mental strength and appreciation.

**The Problem** — modern life is TOO comfortable. We become weak, dependent on luxuries, and terrified of any discomfort. When hardship comes, we collapse.

**The Stoic Solution** — regularly choose small, voluntary discomforts. This trains your mind that discomfort is survivable—even beneficial.

**What this practice does:**
1. **Builds resilience** — when real hardship comes, you're prepared
2. **Breaks hedonic adaptation** — you stop taking comfort for granted
3. **Strengthens willpower** — you prove you can control urges  
4. **Increases appreciation** — comfort feels AMAZING after voluntary discomfort
5. **Reduces fear** — you learn: "Discomfort won't kill me. I'm stronger than I thought."

**The Science** — your brain predicts suffering based on past experience. If you've never been uncomfortable, small discomforts feel catastrophic. If you practice discomfort, your brain learns: "This is manageable."

**How to practice:**
Choose ONE small discomfort today. Not as punishment — as TRAINING.
- Physical: cold shower, skip a meal, exercise when tired
- Social: have the difficult conversation, say no to someone
- Habitual: skip coffee, no phone for 2 hours, sit in silence

**Key** — the discomfort should be VOLUNTARY and MILD. You're training, not torturing.

_"We suffer more often in imagination than in reality."_ — Seneca
_"Set aside a certain number of days to be content with little and practice poverty."_ — Seneca`,"Stoic Resilience Training"),await r._input(Ne.voluntary_discomfort_practice),r.render()}function Of(t){if(t.length===0)return 0;var r=t[0],n=0,a;if(typeof r!="number")return Number.NaN;for(var o=1;o<t.length;o++){if(typeof t[o]!="number")return Number.NaN;a=r+t[o],Math.abs(r)>=Math.abs(t[o])?n+=r-a+t[o]:n+=t[o]-a+r,r=a}return r+n}function Ff(t){if(t.length===0)throw new Error("mean requires at least one data point");return Of(t)/t.length}function q_(t,r){var n=Ff(t),a=0,o,s;for(s=0;s<t.length;s++)o=t[s]-n,a+=o*o;return a}function Df(t){if(t.length===0)throw new Error("variance requires at least one data point");return q_(t)/t.length}function H_(t){if(t.length===1)return 0;var r=Df(t);return Math.sqrt(r)}function Y_(t){if(t.length===0)throw new Error("mode requires at least one data point");if(t.length===1)return t[0];for(var r=t[0],n=Number.NaN,a=0,o=1,s=1;s<t.length+1;s++)t[s]!==r?(o>a&&(a=o,n=r),o=1,r=t[s]):o++;return n}function U_(t){return t.slice().sort(function(r,n){return r-n})}function V_(t){return Y_(U_(t))}function wc(t){if(t.length===0)throw new Error("min requires at least one data point");for(var r=t[0],n=1;n<t.length;n++)t[n]<r&&(r=t[n]);return r}function vc(t){if(t.length===0)throw new Error("max requires at least one data point");for(var r=t[0],n=1;n<t.length;n++)t[n]>r&&(r=t[n]);return r}function xc(t,r){var n=t.length*r;if(t.length===0)throw new Error("quantile requires at least one data point.");if(r<0||r>1)throw new Error("quantiles must be between 0 and 1");return r===1?t[t.length-1]:r===0?t[0]:n%1!==0?t[Math.ceil(n)-1]:t.length%2===0?(t[n-1]+t[n])/2:t[n]}function ji(t,r,n,a){for(n=n||0,a=a||t.length-1;a>n;){if(a-n>600){var o=a-n+1,s=r-n+1,l=Math.log(o),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(o-c)/o);s-o/2<0&&(f*=-1);var h=Math.max(n,Math.floor(r-s*c/o+f)),p=Math.min(a,Math.floor(r+(o-s)*c/o+f));ji(t,r,h,p)}var g=t[r],b=n,y=a;for(Nr(t,n,r),t[a]>g&&Nr(t,n,a);b<y;){for(Nr(t,b,y),b++,y--;t[b]<g;)b++;for(;t[y]>g;)y--}t[n]===g?Nr(t,n,y):(y++,Nr(t,y,a)),y<=r&&(n=y+1),r<=y&&(a=y-1)}}function Nr(t,r,n){var a=t[r];t[r]=t[n],t[n]=a}function Za(t,r){var n=t.slice();if(Array.isArray(r)){G_(n,r);for(var a=[],o=0;o<r.length;o++)a[o]=xc(n,r[o]);return a}else{var s=Rf(n.length,r);return Lf(n,s,0,n.length-1),xc(n,r)}}function Lf(t,r,n,a){r%1===0?ji(t,r,n,a):(r=Math.floor(r),ji(t,r,n,a),ji(t,r+1,r+1,a))}function G_(t,r){for(var n=[0],a=0;a<r.length;a++)n.push(Rf(t.length,r[a]));n.push(t.length-1),n.sort(j_);for(var o=[0,n.length-1];o.length;){var s=Math.ceil(o.pop()),l=Math.floor(o.pop());if(!(s-l<=1)){var c=Math.floor((l+s)/2);Lf(t,n[c],Math.floor(n[l]),Math.ceil(n[s])),o.push(l,c,c,s)}}}function j_(t,r){return t-r}function Rf(t,r){var n=t*r;return r===1?t-1:r===0?0:n%1!==0?Math.ceil(n)-1:t%2===0?n-.5:n}function Q_(t){return+Za(t,.5)}var Oa={},_c;function K_(){return _c||(_c=1,(function(t){(function(r){r.black="\x1B[30m",r.red="\x1B[31m",r.green="\x1B[32m",r.yellow="\x1B[33m",r.blue="\x1B[34m",r.magenta="\x1B[35m",r.cyan="\x1B[36m",r.lightgray="\x1B[37m",r.default="\x1B[39m",r.darkgray="\x1B[90m",r.lightred="\x1B[91m",r.lightgreen="\x1B[92m",r.lightyellow="\x1B[93m",r.lightblue="\x1B[94m",r.lightmagenta="\x1B[95m",r.lightcyan="\x1B[96m",r.white="\x1B[97m",r.reset="\x1B[0m";function n(a,o){return o===void 0?a:o+a+r.reset}r.colored=n,r.plot=function(a,o=void 0){typeof a[0]=="number"&&(a=[a]),o=typeof o<"u"?o:{};let s=typeof o.min<"u"?o.min:a[0][0],l=typeof o.max<"u"?o.max:a[0][0];for(let F=0;F<a.length;F++)for(let A=0;A<a[F].length;A++)s=Math.min(s,a[F][A]),l=Math.max(l,a[F][A]);let c=["┼","┤","╶","╴","─","╰","╭","╮","╯","│"],f=Math.abs(l-s),h=typeof o.offset<"u"?o.offset:3,p=typeof o.padding<"u"?o.padding:"           ",g=typeof o.height<"u"?o.height:f,b=typeof o.colors<"u"?o.colors:[],y=f!==0?g/f:1,C=Math.round(s*y),I=Math.round(l*y),M=Math.abs(I-C),P=0;for(let F=0;F<a.length;F++)P=Math.max(P,a[F].length);P=P+h;let $=typeof o.symbols<"u"?o.symbols:c,N=typeof o.format<"u"?o.format:function(F){return(p+F.toFixed(2)).slice(-p.length)},z=new Array(M+1);for(let F=0;F<=M;F++){z[F]=new Array(P);for(let A=0;A<P;A++)z[F][A]=" "}for(let F=C;F<=I;++F){let A=N(M>0?l-(F-C)*f/M:F,F-C);z[F-C][Math.max(h-A.length,0)]=A,z[F-C][h-1]=F==0?$[0]:$[1]}for(let F=0;F<a.length;F++){let A=b[F%b.length],Y=Math.round(a[F][0]*y)-C;z[M-Y][h-1]=n($[0],A);for(let G=0;G<a[F].length-1;G++){let ee=Math.round(a[F][G+0]*y)-C,ce=Math.round(a[F][G+1]*y)-C;if(ee==ce)z[M-ee][G+h]=n($[4],A);else{z[M-ce][G+h]=n(ee>ce?$[5]:$[6],A),z[M-ee][G+h]=n(ee>ce?$[7]:$[8],A);let Q=Math.min(ee,ce),j=Math.max(ee,ce);for(let be=Q+1;be<j;be++)z[M-be][G+h]=n($[9],A)}}}return z.map(function(F){return F.join("")}).join(`
`)}})(t)})(Oa)),Oa}var X_=K_(),Qi={exports:{}},Fa,kc;function J_(){return kc||(kc=1,Fa={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),Fa}var Da,Sc;function $f(){if(Sc)return Da;Sc=1;const t=J_(),r={};for(const o of Object.keys(t))r[t[o]]=o;const n={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};Da=n;for(const o of Object.keys(n)){if(!("channels"in n[o]))throw new Error("missing channels property: "+o);if(!("labels"in n[o]))throw new Error("missing channel labels property: "+o);if(n[o].labels.length!==n[o].channels)throw new Error("channel and label counts mismatch: "+o);const{channels:s,labels:l}=n[o];delete n[o].channels,delete n[o].labels,Object.defineProperty(n[o],"channels",{value:s}),Object.defineProperty(n[o],"labels",{value:l})}n.rgb.hsl=function(o){const s=o[0]/255,l=o[1]/255,c=o[2]/255,f=Math.min(s,l,c),h=Math.max(s,l,c),p=h-f;let g,b;h===f?g=0:s===h?g=(l-c)/p:l===h?g=2+(c-s)/p:c===h&&(g=4+(s-l)/p),g=Math.min(g*60,360),g<0&&(g+=360);const y=(f+h)/2;return h===f?b=0:y<=.5?b=p/(h+f):b=p/(2-h-f),[g,b*100,y*100]},n.rgb.hsv=function(o){let s,l,c,f,h;const p=o[0]/255,g=o[1]/255,b=o[2]/255,y=Math.max(p,g,b),C=y-Math.min(p,g,b),I=function(M){return(y-M)/6/C+1/2};return C===0?(f=0,h=0):(h=C/y,s=I(p),l=I(g),c=I(b),p===y?f=c-l:g===y?f=1/3+s-c:b===y&&(f=2/3+l-s),f<0?f+=1:f>1&&(f-=1)),[f*360,h*100,y*100]},n.rgb.hwb=function(o){const s=o[0],l=o[1];let c=o[2];const f=n.rgb.hsl(o)[0],h=1/255*Math.min(s,Math.min(l,c));return c=1-1/255*Math.max(s,Math.max(l,c)),[f,h*100,c*100]},n.rgb.cmyk=function(o){const s=o[0]/255,l=o[1]/255,c=o[2]/255,f=Math.min(1-s,1-l,1-c),h=(1-s-f)/(1-f)||0,p=(1-l-f)/(1-f)||0,g=(1-c-f)/(1-f)||0;return[h*100,p*100,g*100,f*100]};function a(o,s){return(o[0]-s[0])**2+(o[1]-s[1])**2+(o[2]-s[2])**2}return n.rgb.keyword=function(o){const s=r[o];if(s)return s;let l=1/0,c;for(const f of Object.keys(t)){const h=t[f],p=a(o,h);p<l&&(l=p,c=f)}return c},n.keyword.rgb=function(o){return t[o]},n.rgb.xyz=function(o){let s=o[0]/255,l=o[1]/255,c=o[2]/255;s=s>.04045?((s+.055)/1.055)**2.4:s/12.92,l=l>.04045?((l+.055)/1.055)**2.4:l/12.92,c=c>.04045?((c+.055)/1.055)**2.4:c/12.92;const f=s*.4124+l*.3576+c*.1805,h=s*.2126+l*.7152+c*.0722,p=s*.0193+l*.1192+c*.9505;return[f*100,h*100,p*100]},n.rgb.lab=function(o){const s=n.rgb.xyz(o);let l=s[0],c=s[1],f=s[2];l/=95.047,c/=100,f/=108.883,l=l>.008856?l**(1/3):7.787*l+16/116,c=c>.008856?c**(1/3):7.787*c+16/116,f=f>.008856?f**(1/3):7.787*f+16/116;const h=116*c-16,p=500*(l-c),g=200*(c-f);return[h,p,g]},n.hsl.rgb=function(o){const s=o[0]/360,l=o[1]/100,c=o[2]/100;let f,h,p;if(l===0)return p=c*255,[p,p,p];c<.5?f=c*(1+l):f=c+l-c*l;const g=2*c-f,b=[0,0,0];for(let y=0;y<3;y++)h=s+1/3*-(y-1),h<0&&h++,h>1&&h--,6*h<1?p=g+(f-g)*6*h:2*h<1?p=f:3*h<2?p=g+(f-g)*(2/3-h)*6:p=g,b[y]=p*255;return b},n.hsl.hsv=function(o){const s=o[0];let l=o[1]/100,c=o[2]/100,f=l;const h=Math.max(c,.01);c*=2,l*=c<=1?c:2-c,f*=h<=1?h:2-h;const p=(c+l)/2,g=c===0?2*f/(h+f):2*l/(c+l);return[s,g*100,p*100]},n.hsv.rgb=function(o){const s=o[0]/60,l=o[1]/100;let c=o[2]/100;const f=Math.floor(s)%6,h=s-Math.floor(s),p=255*c*(1-l),g=255*c*(1-l*h),b=255*c*(1-l*(1-h));switch(c*=255,f){case 0:return[c,b,p];case 1:return[g,c,p];case 2:return[p,c,b];case 3:return[p,g,c];case 4:return[b,p,c];case 5:return[c,p,g]}},n.hsv.hsl=function(o){const s=o[0],l=o[1]/100,c=o[2]/100,f=Math.max(c,.01);let h,p;p=(2-l)*c;const g=(2-l)*f;return h=l*f,h/=g<=1?g:2-g,h=h||0,p/=2,[s,h*100,p*100]},n.hwb.rgb=function(o){const s=o[0]/360;let l=o[1]/100,c=o[2]/100;const f=l+c;let h;f>1&&(l/=f,c/=f);const p=Math.floor(6*s),g=1-c;h=6*s-p,(p&1)!==0&&(h=1-h);const b=l+h*(g-l);let y,C,I;switch(p){default:case 6:case 0:y=g,C=b,I=l;break;case 1:y=b,C=g,I=l;break;case 2:y=l,C=g,I=b;break;case 3:y=l,C=b,I=g;break;case 4:y=b,C=l,I=g;break;case 5:y=g,C=l,I=b;break}return[y*255,C*255,I*255]},n.cmyk.rgb=function(o){const s=o[0]/100,l=o[1]/100,c=o[2]/100,f=o[3]/100,h=1-Math.min(1,s*(1-f)+f),p=1-Math.min(1,l*(1-f)+f),g=1-Math.min(1,c*(1-f)+f);return[h*255,p*255,g*255]},n.xyz.rgb=function(o){const s=o[0]/100,l=o[1]/100,c=o[2]/100;let f,h,p;return f=s*3.2406+l*-1.5372+c*-.4986,h=s*-.9689+l*1.8758+c*.0415,p=s*.0557+l*-.204+c*1.057,f=f>.0031308?1.055*f**(1/2.4)-.055:f*12.92,h=h>.0031308?1.055*h**(1/2.4)-.055:h*12.92,p=p>.0031308?1.055*p**(1/2.4)-.055:p*12.92,f=Math.min(Math.max(0,f),1),h=Math.min(Math.max(0,h),1),p=Math.min(Math.max(0,p),1),[f*255,h*255,p*255]},n.xyz.lab=function(o){let s=o[0],l=o[1],c=o[2];s/=95.047,l/=100,c/=108.883,s=s>.008856?s**(1/3):7.787*s+16/116,l=l>.008856?l**(1/3):7.787*l+16/116,c=c>.008856?c**(1/3):7.787*c+16/116;const f=116*l-16,h=500*(s-l),p=200*(l-c);return[f,h,p]},n.lab.xyz=function(o){const s=o[0],l=o[1],c=o[2];let f,h,p;h=(s+16)/116,f=l/500+h,p=h-c/200;const g=h**3,b=f**3,y=p**3;return h=g>.008856?g:(h-16/116)/7.787,f=b>.008856?b:(f-16/116)/7.787,p=y>.008856?y:(p-16/116)/7.787,f*=95.047,h*=100,p*=108.883,[f,h,p]},n.lab.lch=function(o){const s=o[0],l=o[1],c=o[2];let f;f=Math.atan2(c,l)*360/2/Math.PI,f<0&&(f+=360);const p=Math.sqrt(l*l+c*c);return[s,p,f]},n.lch.lab=function(o){const s=o[0],l=o[1],f=o[2]/360*2*Math.PI,h=l*Math.cos(f),p=l*Math.sin(f);return[s,h,p]},n.rgb.ansi16=function(o,s=null){const[l,c,f]=o;let h=s===null?n.rgb.hsv(o)[2]:s;if(h=Math.round(h/50),h===0)return 30;let p=30+(Math.round(f/255)<<2|Math.round(c/255)<<1|Math.round(l/255));return h===2&&(p+=60),p},n.hsv.ansi16=function(o){return n.rgb.ansi16(n.hsv.rgb(o),o[2])},n.rgb.ansi256=function(o){const s=o[0],l=o[1],c=o[2];return s===l&&l===c?s<8?16:s>248?231:Math.round((s-8)/247*24)+232:16+36*Math.round(s/255*5)+6*Math.round(l/255*5)+Math.round(c/255*5)},n.ansi16.rgb=function(o){let s=o%10;if(s===0||s===7)return o>50&&(s+=3.5),s=s/10.5*255,[s,s,s];const l=(~~(o>50)+1)*.5,c=(s&1)*l*255,f=(s>>1&1)*l*255,h=(s>>2&1)*l*255;return[c,f,h]},n.ansi256.rgb=function(o){if(o>=232){const h=(o-232)*10+8;return[h,h,h]}o-=16;let s;const l=Math.floor(o/36)/5*255,c=Math.floor((s=o%36)/6)/5*255,f=s%6/5*255;return[l,c,f]},n.rgb.hex=function(o){const l=(((Math.round(o[0])&255)<<16)+((Math.round(o[1])&255)<<8)+(Math.round(o[2])&255)).toString(16).toUpperCase();return"000000".substring(l.length)+l},n.hex.rgb=function(o){const s=o.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!s)return[0,0,0];let l=s[0];s[0].length===3&&(l=l.split("").map(g=>g+g).join(""));const c=parseInt(l,16),f=c>>16&255,h=c>>8&255,p=c&255;return[f,h,p]},n.rgb.hcg=function(o){const s=o[0]/255,l=o[1]/255,c=o[2]/255,f=Math.max(Math.max(s,l),c),h=Math.min(Math.min(s,l),c),p=f-h;let g,b;return p<1?g=h/(1-p):g=0,p<=0?b=0:f===s?b=(l-c)/p%6:f===l?b=2+(c-s)/p:b=4+(s-l)/p,b/=6,b%=1,[b*360,p*100,g*100]},n.hsl.hcg=function(o){const s=o[1]/100,l=o[2]/100,c=l<.5?2*s*l:2*s*(1-l);let f=0;return c<1&&(f=(l-.5*c)/(1-c)),[o[0],c*100,f*100]},n.hsv.hcg=function(o){const s=o[1]/100,l=o[2]/100,c=s*l;let f=0;return c<1&&(f=(l-c)/(1-c)),[o[0],c*100,f*100]},n.hcg.rgb=function(o){const s=o[0]/360,l=o[1]/100,c=o[2]/100;if(l===0)return[c*255,c*255,c*255];const f=[0,0,0],h=s%1*6,p=h%1,g=1-p;let b=0;switch(Math.floor(h)){case 0:f[0]=1,f[1]=p,f[2]=0;break;case 1:f[0]=g,f[1]=1,f[2]=0;break;case 2:f[0]=0,f[1]=1,f[2]=p;break;case 3:f[0]=0,f[1]=g,f[2]=1;break;case 4:f[0]=p,f[1]=0,f[2]=1;break;default:f[0]=1,f[1]=0,f[2]=g}return b=(1-l)*c,[(l*f[0]+b)*255,(l*f[1]+b)*255,(l*f[2]+b)*255]},n.hcg.hsv=function(o){const s=o[1]/100,l=o[2]/100,c=s+l*(1-s);let f=0;return c>0&&(f=s/c),[o[0],f*100,c*100]},n.hcg.hsl=function(o){const s=o[1]/100,c=o[2]/100*(1-s)+.5*s;let f=0;return c>0&&c<.5?f=s/(2*c):c>=.5&&c<1&&(f=s/(2*(1-c))),[o[0],f*100,c*100]},n.hcg.hwb=function(o){const s=o[1]/100,l=o[2]/100,c=s+l*(1-s);return[o[0],(c-s)*100,(1-c)*100]},n.hwb.hcg=function(o){const s=o[1]/100,c=1-o[2]/100,f=c-s;let h=0;return f<1&&(h=(c-f)/(1-f)),[o[0],f*100,h*100]},n.apple.rgb=function(o){return[o[0]/65535*255,o[1]/65535*255,o[2]/65535*255]},n.rgb.apple=function(o){return[o[0]/255*65535,o[1]/255*65535,o[2]/255*65535]},n.gray.rgb=function(o){return[o[0]/100*255,o[0]/100*255,o[0]/100*255]},n.gray.hsl=function(o){return[0,0,o[0]]},n.gray.hsv=n.gray.hsl,n.gray.hwb=function(o){return[0,100,o[0]]},n.gray.cmyk=function(o){return[0,0,0,o[0]]},n.gray.lab=function(o){return[o[0],0,0]},n.gray.hex=function(o){const s=Math.round(o[0]/100*255)&255,c=((s<<16)+(s<<8)+s).toString(16).toUpperCase();return"000000".substring(c.length)+c},n.rgb.gray=function(o){return[(o[0]+o[1]+o[2])/3/255*100]},Da}var La,Ic;function Z_(){if(Ic)return La;Ic=1;const t=$f();function r(){const s={},l=Object.keys(t);for(let c=l.length,f=0;f<c;f++)s[l[f]]={distance:-1,parent:null};return s}function n(s){const l=r(),c=[s];for(l[s].distance=0;c.length;){const f=c.pop(),h=Object.keys(t[f]);for(let p=h.length,g=0;g<p;g++){const b=h[g],y=l[b];y.distance===-1&&(y.distance=l[f].distance+1,y.parent=f,c.unshift(b))}}return l}function a(s,l){return function(c){return l(s(c))}}function o(s,l){const c=[l[s].parent,s];let f=t[l[s].parent][s],h=l[s].parent;for(;l[h].parent;)c.unshift(l[h].parent),f=a(t[l[h].parent][h],f),h=l[h].parent;return f.conversion=c,f}return La=function(s){const l=n(s),c={},f=Object.keys(l);for(let h=f.length,p=0;p<h;p++){const g=f[p];l[g].parent!==null&&(c[g]=o(g,l))}return c},La}var Ra,Cc;function e2(){if(Cc)return Ra;Cc=1;const t=$f(),r=Z_(),n={},a=Object.keys(t);function o(l){const c=function(...f){const h=f[0];return h==null?h:(h.length>1&&(f=h),l(f))};return"conversion"in l&&(c.conversion=l.conversion),c}function s(l){const c=function(...f){const h=f[0];if(h==null)return h;h.length>1&&(f=h);const p=l(f);if(typeof p=="object")for(let g=p.length,b=0;b<g;b++)p[b]=Math.round(p[b]);return p};return"conversion"in l&&(c.conversion=l.conversion),c}return a.forEach(l=>{n[l]={},Object.defineProperty(n[l],"channels",{value:t[l].channels}),Object.defineProperty(n[l],"labels",{value:t[l].labels});const c=r(l);Object.keys(c).forEach(h=>{const p=c[h];n[l][h]=s(p),n[l][h].raw=o(p)})}),Ra=n,Ra}Qi.exports;var Ec;function t2(){return Ec||(Ec=1,(function(t){const r=(p,g)=>(...b)=>`\x1B[${p(...b)+g}m`,n=(p,g)=>(...b)=>{const y=p(...b);return`\x1B[${38+g};5;${y}m`},a=(p,g)=>(...b)=>{const y=p(...b);return`\x1B[${38+g};2;${y[0]};${y[1]};${y[2]}m`},o=p=>p,s=(p,g,b)=>[p,g,b],l=(p,g,b)=>{Object.defineProperty(p,g,{get:()=>{const y=b();return Object.defineProperty(p,g,{value:y,enumerable:!0,configurable:!0}),y},enumerable:!0,configurable:!0})};let c;const f=(p,g,b,y)=>{c===void 0&&(c=e2());const C=y?10:0,I={};for(const[M,P]of Object.entries(c)){const $=M==="ansi16"?"ansi":M;M===g?I[$]=p(b,C):typeof P=="object"&&(I[$]=p(P[g],C))}return I};function h(){const p=new Map,g={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};g.color.gray=g.color.blackBright,g.bgColor.bgGray=g.bgColor.bgBlackBright,g.color.grey=g.color.blackBright,g.bgColor.bgGrey=g.bgColor.bgBlackBright;for(const[b,y]of Object.entries(g)){for(const[C,I]of Object.entries(y))g[C]={open:`\x1B[${I[0]}m`,close:`\x1B[${I[1]}m`},y[C]=g[C],p.set(I[0],I[1]);Object.defineProperty(g,b,{value:y,enumerable:!1})}return Object.defineProperty(g,"codes",{value:p,enumerable:!1}),g.color.close="\x1B[39m",g.bgColor.close="\x1B[49m",l(g.color,"ansi",()=>f(r,"ansi16",o,!1)),l(g.color,"ansi256",()=>f(n,"ansi256",o,!1)),l(g.color,"ansi16m",()=>f(a,"rgb",s,!1)),l(g.bgColor,"ansi",()=>f(r,"ansi16",o,!0)),l(g.bgColor,"ansi256",()=>f(n,"ansi256",o,!0)),l(g.bgColor,"ansi16m",()=>f(a,"rgb",s,!0)),g}Object.defineProperty(t,"exports",{enumerable:!0,get:h})})(Qi)),Qi.exports}var $a,Tc;function n2(){return Tc||(Tc=1,$a={stdout:!1,stderr:!1}),$a}var Ba,Ac;function r2(){return Ac||(Ac=1,Ba={stringReplaceAll:(n,a,o)=>{let s=n.indexOf(a);if(s===-1)return n;const l=a.length;let c=0,f="";do f+=n.substr(c,s-c)+a+o,c=s+l,s=n.indexOf(a,c);while(s!==-1);return f+=n.substr(c),f},stringEncaseCRLFWithFirstIndex:(n,a,o,s)=>{let l=0,c="";do{const f=n[s-1]==="\r";c+=n.substr(l,(f?s-1:s)-l)+a+(f?`\r
`:`
`)+o,l=s+1,s=n.indexOf(`
`,l)}while(s!==-1);return c+=n.substr(l),c}}),Ba}var Na,Pc;function i2(){if(Pc)return Na;Pc=1;const t=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,r=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,n=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,a=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,o=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function s(h){const p=h[0]==="u",g=h[1]==="{";return p&&!g&&h.length===5||h[0]==="x"&&h.length===3?String.fromCharCode(parseInt(h.slice(1),16)):p&&g?String.fromCodePoint(parseInt(h.slice(2,-1),16)):o.get(h)||h}function l(h,p){const g=[],b=p.trim().split(/\s*,\s*/g);let y;for(const C of b){const I=Number(C);if(!Number.isNaN(I))g.push(I);else if(y=C.match(n))g.push(y[2].replace(a,(M,P,$)=>P?s(P):$));else throw new Error(`Invalid Chalk template style argument: ${C} (in style '${h}')`)}return g}function c(h){r.lastIndex=0;const p=[];let g;for(;(g=r.exec(h))!==null;){const b=g[1];if(g[2]){const y=l(b,g[2]);p.push([b].concat(y))}else p.push([b])}return p}function f(h,p){const g={};for(const y of p)for(const C of y.styles)g[C[0]]=y.inverse?null:C.slice(1);let b=h;for(const[y,C]of Object.entries(g))if(Array.isArray(C)){if(!(y in b))throw new Error(`Unknown Chalk style: ${y}`);b=C.length>0?b[y](...C):b[y]}return b}return Na=(h,p)=>{const g=[],b=[];let y=[];if(p.replace(t,(C,I,M,P,$,N)=>{if(I)y.push(s(I));else if(P){const z=y.join("");y=[],b.push(g.length===0?z:f(h,g)(z)),g.push({inverse:M,styles:c(P)})}else if($){if(g.length===0)throw new Error("Found extraneous } in Chalk template literal");b.push(f(h,g)(y.join(""))),y=[],g.pop()}else y.push(N)}),b.push(y.join("")),g.length>0){const C=`Chalk template literal is missing ${g.length} closing bracket${g.length===1?"":"s"} (\`}\`)`;throw new Error(C)}return b.join("")},Na}var Wa,Mc;function o2(){if(Mc)return Wa;Mc=1;const t=t2(),{stdout:r,stderr:n}=n2(),{stringReplaceAll:a,stringEncaseCRLFWithFirstIndex:o}=r2(),{isArray:s}=Array,l=["ansi","ansi","ansi256","ansi16m"],c=Object.create(null),f=(z,F={})=>{if(F.level&&!(Number.isInteger(F.level)&&F.level>=0&&F.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const A=r?r.level:0;z.level=F.level===void 0?A:F.level};class h{constructor(F){return p(F)}}const p=z=>{const F={};return f(F,z),F.template=(...A)=>$(F.template,...A),Object.setPrototypeOf(F,g.prototype),Object.setPrototypeOf(F.template,F),F.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},F.template.Instance=h,F.template};function g(z){return p(z)}for(const[z,F]of Object.entries(t))c[z]={get(){const A=I(this,C(F.open,F.close,this._styler),this._isEmpty);return Object.defineProperty(this,z,{value:A}),A}};c.visible={get(){const z=I(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:z}),z}};const b=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(const z of b)c[z]={get(){const{level:F}=this;return function(...A){const Y=C(t.color[l[F]][z](...A),t.color.close,this._styler);return I(this,Y,this._isEmpty)}}};for(const z of b){const F="bg"+z[0].toUpperCase()+z.slice(1);c[F]={get(){const{level:A}=this;return function(...Y){const G=C(t.bgColor[l[A]][z](...Y),t.bgColor.close,this._styler);return I(this,G,this._isEmpty)}}}}const y=Object.defineProperties(()=>{},{...c,level:{enumerable:!0,get(){return this._generator.level},set(z){this._generator.level=z}}}),C=(z,F,A)=>{let Y,G;return A===void 0?(Y=z,G=F):(Y=A.openAll+z,G=F+A.closeAll),{open:z,close:F,openAll:Y,closeAll:G,parent:A}},I=(z,F,A)=>{const Y=(...G)=>s(G[0])&&s(G[0].raw)?M(Y,$(Y,...G)):M(Y,G.length===1?""+G[0]:G.join(" "));return Object.setPrototypeOf(Y,y),Y._generator=z,Y._styler=F,Y._isEmpty=A,Y},M=(z,F)=>{if(z.level<=0||!F)return z._isEmpty?"":F;let A=z._styler;if(A===void 0)return F;const{openAll:Y,closeAll:G}=A;if(F.indexOf("\x1B")!==-1)for(;A!==void 0;)F=a(F,A.close,A.open),A=A.parent;const ee=F.indexOf(`
`);return ee!==-1&&(F=o(F,G,Y,ee)),Y+F+G};let P;const $=(z,...F)=>{const[A]=F;if(!s(A)||!s(A.raw))return F.join(" ");const Y=F.slice(1),G=[A.raw[0]];for(let ee=1;ee<A.length;ee++)G.push(String(Y[ee-1]).replace(/[{}\\]/g,"\\$&"),String(A.raw[ee]));return P===void 0&&(P=i2()),P(z,G.join(""))};Object.defineProperties(g.prototype,c);const N=g();return N.supportsColor=r,N.stderr=g({level:n?n.level:0}),N.stderr.supportsColor=n,Wa=N,Wa}var a2=o2();const s2=ts(a2);function u2(t,r={}){if(!Array.isArray(t))throw new TypeError("Expected an array");let n=["▁","▂","▃","▄","▅","▆","▇","█"];const a=[[5,5,4],[5,5,3],[5,5,0],[5,4,0],[5,3,0],[5,2,0],[5,1,0],[5,0,0]],o=t.filter(c=>Number.isFinite(c)),s=typeof r.minimum=="number"?r.minimum:typeof r.maximum=="number"?0:Math.min(...o),l=typeof r.maximum=="number"?r.maximum:Math.max(...o);return s===l&&l!==0&&(n=[n[4]]),t.map(c=>{if(!Number.isFinite(c))return" ";let f;return s===l?f=0:f=Math.ceil((c-s)/(l-s)*n.length)-1,f<0&&(f=0),r.style==="fire"?s2.rgb(...a[f])(n[f]):n[f]}).join("")}const Hi=Zt(en.StatisticsService);class l2{descriptiveStatistics(r,n){const a=r.filter(o=>typeof o=="number"&&!isNaN(o));if(a.length===0)return Hi.warn("No valid numeric values found for descriptive statistics"),null;try{const o=Za(a,.25),s=Za(a,.75),l={count:a.length,sum:Of(a),mean:Ff(a),median:Q_(a),mode:V_(a),min:wc(a),max:vc(a),range:vc(a)-wc(a),variance:Df(a),standardDeviation:H_(a),q1:o,q3:s,iqr:s-o};if(n?.includeVisualization){const c=n.chartHeight||10,f=this.createSparkline(a),h=this.createLineChart(a,c);l.visualization=`
**Sparkline:** ${f}

**Trend Chart:**
\`\`\`
${h}
\`\`\`
`.trim()}return Hi.dev("Calculated descriptive statistics",{stats:l}),l}catch(o){return Hi.error("Error calculating descriptive statistics",{error:o}),null}}booleanStatistics(r){const n=r.filter(C=>C===!0).length,a=r.filter(C=>C===!1).length,o=r.filter(C=>C===null).length,s=r.length;let l=0,c=0,f=0,h=null,p=0,g=0;for(const C of r)C===!0?(p++,g=0):C===!1&&(g++,p=0),l=Math.max(l,p),c=Math.max(c,g);const b=r[r.length-1];b===!0?(f=p,h="true"):b===!1&&(f=g,h="false");const y={count:s,trueCount:n,falseCount:a,nullCount:o,truePercentage:s>0?n/s*100:0,falsePercentage:s>0?a/s*100:0,longestTrueStreak:l,longestFalseStreak:c,currentStreak:f,currentStreakType:h};return Hi.dev("Calculated boolean statistics",{stats:y}),y}formatDescriptiveStats(r){return`
**Count:** ${r.count}
**Sum:** ${r.sum.toFixed(2)}
**Mean:** ${r.mean.toFixed(2)}
**Median:** ${r.median.toFixed(2)}
**Mode:** ${Array.isArray(r.mode)?r.mode.join(", "):r.mode}
**Min:** ${r.min.toFixed(2)}
**Max:** ${r.max.toFixed(2)}
**Range:** ${r.range.toFixed(2)}
**Std Dev:** ${r.standardDeviation.toFixed(2)}
**Variance:** ${r.variance.toFixed(2)}
**Q1 (25%):** ${r.q1.toFixed(2)}
**Q3 (75%):** ${r.q3.toFixed(2)}
**IQR:** ${r.iqr.toFixed(2)}
`.trim()}formatBooleanStats(r,n){const a=r.currentStreakType==="true"?"✨":"❄️";return`
**${n} Statistics**
- Total tracked: ${r.count} days
- Success rate: ${r.truePercentage.toFixed(1)}% (${r.trueCount}/${r.count})
- Longest streak: ${r.longestTrueStreak} days 🏆
- Current streak: ${a} ${r.currentStreak} days
`.trim()}createLineChart(r,n=10,a){if(r.length===0)return"No data to display";const o={height:n};return a&&(o.width=a),X_.plot(r,o)}createSparkline(r){return r.length===0?"—":u2(r)}createBooleanBarChart(r,n=30){return r.slice(-n).map(s=>s===!0?"✅":s===!1?"❌":"⬜").join("")}createBooleanPieChart(r,n){return`\`\`\`mermaid
pie title ${n}
    "Completed" : ${r.trueCount}
    "Skipped" : ${r.falseCount}
    ${r.nullCount>0?`"Not Tracked" : ${r.nullCount}`:""}
\`\`\``}createBooleanVisualReport(r,n,a={}){const{showSparkline:o=!0,showBarChart:s=!0,showAsciiChart:l=!0,showPieChart:c=!1,dates:f=[]}=a,h=this.booleanStatistics(r),p=r.map(b=>b===!0?1:0);let g=`## 📊 ${n}

`;if(g+=this.formatBooleanStats(h,n)+`

`,o&&(g+=`**Trend:** ${this.createSparkline(p)}

`),s&&(g+=`**Last ${Math.min(r.length,30)} days:**
`,g+=this.createBooleanBarChart(r,30)+`

`,f.length>0)){const b=f[0],y=f[f.length-1];g+=`*From ${b} to ${y}*

`}return l&&p.length>=3&&(g+="**Trend Chart:**\n```\n",g+=this.createLineChart(p,6),g+="\n```\n\n"),c&&(g+=this.createBooleanPieChart(h,`${n} Distribution`)+`

`),g}createNumericVisualReport(r,n,a={}){const{showSparkline:o=!0,showAsciiChart:s=!0,showStats:l=!0}=a,c=this.descriptiveStatistics(r);if(!c)return`## ${n}

No data available`;let f=`## 📈 ${n}

`;return l&&(f+=this.formatDescriptiveStats(c)+`

`),o&&(f+=`**Trend:** ${this.createSparkline(r)}

`),s&&(f+="**Trend Chart:**\n```\n",f+=this.createLineChart(r,10),f+="\n```\n\n"),f}}const eo=new l2;var gr={},mr={},yr={},Qt={},On={},Yi={},Oc;function c2(){if(Oc)return Yi;Oc=1,Object.defineProperty(Yi,"__esModule",{value:!0});const t={default:{red:[38,5,160],green:32,yellow:[38,5,227],blue:34,purple:35,cyan:96,pink:[38,5,219],orange:[38,5,215],marine:94,white:97,black:30},pastel:{red:31,green:[38,5,49],yellow:[38,5,228],blue:[38,5,39],purple:[38,5,147],cyan:[38,5,159],pink:[38,5,219],orange:[38,5,209]},lush:{red:[38,5,196],green:[38,5,154],yellow:[38,5,226],blue:[38,5,57],purple:[38,5,128],cyan:[38,5,87],pink:[38,5,198],orange:[38,5,202]},standard:{red:[38,5,9],green:[38,5,10],yellow:[38,5,11],blue:[38,5,27],purple:[38,5,105],cyan:[38,5,123],pink:[38,5,200],orange:[38,5,214]},beach:{red:"#fe4a49",green:"#2ab7ca",yellow:"#fed766",blue:"#92C4EE",pink:"#de5285",purple:"#8277f9",cyan:"#00FFFF",orange:"#F77E02"},nature:{red:"#c62828",green:"#194d33",yellow:"#f2C12e",blue:"#04668c",pink:"#85327d",purple:"#553285",cyan:"#0092b2",orange:"#f27649"},neon:{red:"#ff5733",green:"#74ee15",yellow:"#ffe700",blue:"#001eff",pink:"#f000ff",purple:"#ab20fd",cyan:"#4deeea",orange:"#ff5f1f"},spring:{green:"#005f73",cyan:"#0a9396",blue:"#94d2bd",vanilla:"#e9d8a6",gamboge:"#ee9b00",alloy:"#ca6702",rust:"#bb3e03",rufus:"#ae2012",auburn:"#9b2226"},pinkish:{chocolate:"#590d22",claret:"#800f2f",purple:"#a4133c",red:"#c9184a",crayola:"#ff4d6d",pink:"#ff758f",salmon:"#ff8fa3",cherry:"#ffb3c1",pinker:"#ffccd5",lavender:"#fff0f3"},crayons:{red:"#f94144",orange:"#f3722c",carrot:"#f8961e",coral:"#f9844a",saffron:"#f9c74f",pistachio:"#90be6d",zomp:"#43aa8b",cyan:"#4d908e",gray:"#577590",cerulean:"#277da1"},sunset:{tangelo:"#ff4800",cook:"#ff5400",pantone:"#ff6000",pumpkin:"#ff6d00",safety:"#ff7900",uto:"#ff8500",princeton:"#ff9100",peel:"#ff9e00",orange:"#ffaa00",yellow:"#ffb600"},rufus:{green:"#005f73",cyan:"#0a9396",blue:"#94d2bd",vanilla:"#e9d8a6",gamboge:"#ee9b00",orange:"#ca6702",rust:"#bb3e03",rufous:"#ae2012",auburn:"#9b2226"},summer:{green:"#b6c037",yellow:"#f2ff49",orange:"#f9a146",red:"#ff4242",pink:"#fb62f6",purple:"#b060e7",blue:"#645dd7",cyan:"#b3fffc"},autumn:{chocolate:"#370617",rosewood:"#6a040f",penn:"#9d0208",engineering:"#d00000",sinopia:"#dc2f02",persimmon:"#e85d04",princeton:"#f48c06",pride:"#faa307",porridge:"#ffba08"},mint:{nyanza:"#d8f3dc",celadon:"#b7e4c7",celadoner:"#95d5b2",minty:"#74c69d",minter:"#52b788",sea:"#40916c",dartmouth:"#2d6a4f",brunswick:"#1b4332",green:"#081c15"},vintage:{green:"#797d62",moss:"#9b9b7a",khaki:"#baa587",desert:"#d9ae94",peach:"#f1dca7",sunglow:"#ffcb69",yellow:"#e8ac65",orange:"#d08c60",chamoisee:"#b58463",beaver:"#997b66"},sport:{eerie:"#161a1d",blood:"#660708",cornell:"#a4161a",corneller:"#ba181b",imperial:"#e5383b",silver:"#b1a7a6",timberwolf:"#d3d3d3",smoke:"#f5f3f4",white:"#ffffff"},rainbow:{amethyst:"#8e6bc7",tufts:"#018bda",robin:"#00d7eb",forest:"#48933e",apple:"#76ac2f",yellow:"#ffba24",bittersweet:"#fd7268",cmyk:"#eb1d19",crimson:"#df013c",folly:"#ff0561"},pool:{violet:"#7400b8",grape:"#6930c3",slate:"#5e60ce",united:"#5390d9",picton:"#4ea8de",aero:"#48bfe3",sky:"#56cfe1",tiffany:"#64dfdf",turquoise:"#72efdd",aquamarine:"#80ffdb"},champagne:{pink:"#eddcd2",linen:"#fff1e6",misty:"#fde2e4",mimi:"#fad2e1",cyan:"#c5dedd",cream:"#dbe7e4",isabelline:"#f0efeb",alice:"#d6e2e9",columbia:"#bcd4e6",powder:"#99c1de"}};return Yi.default=t,Yi}var Fc;function f2(){if(Fc)return On;Fc=1;var t=On&&On.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(On,"__esModule",{value:!0}),On.RESET=void 0;const r=t(c2()),n={reset:0,red:[38,5,160],green:32,yellow:[38,5,227],blue:34,purple:35,cyan:96,pink:[38,5,219],orange:[38,5,215],marine:94,white:97,black:30,...r.default};return On.RESET="\x1B[0m",On.default=n,On}var wt={},pn={},Dc;function Bf(){if(Dc)return pn;Dc=1,Object.defineProperty(pn,"__esModule",{value:!0}),pn.replaceColor=pn.replaceLast=pn.getValue=void 0;const t=Nf();function r(o,...s){const l=s.filter(c=>c&&c!==void 0);if(Array.isArray(o)&&l.length>0)return o.map((c,f)=>c+(l[f]||"")).join("");if(Array.isArray(o))return o.join("")}pn.getValue=r;function n(o,s,l){const c=o.lastIndexOf(s);return c===-1?o:o.substring(0,c)+l+o.substring(c+s.length)}pn.replaceLast=n;function a(o,s){const[l]=[...s.match(/\[[0-9;]+/gsm)],c=s.replace("m",`;${t.symbolMap[o]}m`);return n(c,l,`${l};${t.symbolResets[o]}`)}return pn.replaceColor=a,pn}var Lc;function Nf(){if(Lc)return wt;Lc=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.symbolsFunctions=wt.decoratorMap=wt.decoratorFunctions=wt.symbolResets=wt.symbolMap=void 0;const t=Bf(),r={bold:"*",dim:"~",italic:"%",underline:"!",blink:"^",invert:"@",hidden:"#",strikeout:"$"};wt.decoratorMap=r,wt.symbolMap={bold:1,dim:2,italic:3,underline:4,blink:5,invert:7,hidden:8,strikeout:9},wt.symbolResets={bold:22,dim:22,italic:23,underline:24,blink:25,invert:27,hidden:28,strikeout:29};const n={bold:o=>(0,t.replaceColor)("bold",o),dim:o=>(0,t.replaceColor)("dim",o),italic:o=>(0,t.replaceColor)("italic",o),underline:o=>(0,t.replaceColor)("underline",o),blink:o=>(0,t.replaceColor)("blink",o),invert:o=>(0,t.replaceColor)("invert",o),hidden:o=>(0,t.replaceColor)("hidden",o),strikeout:o=>(0,t.replaceColor)("strikeout",o)};wt.symbolsFunctions=n;const a={bold:(o,...s)=>n.bold((0,t.getValue)(o,...s)),dim:(o,...s)=>n.dim((0,t.getValue)(o,...s)),italic:(o,...s)=>n.italic((0,t.getValue)(o,...s)),underline:(o,...s)=>n.underline((0,t.getValue)(o,...s)),blink:(o,...s)=>n.blink((0,t.getValue)(o,...s)),invert:(o,...s)=>n.invert((0,t.getValue)(o,...s)),hidden:(o,...s)=>n.hidden((0,t.getValue)(o,...s)),strikeout:(o,...s)=>n.strikeout((0,t.getValue)(o,...s))};return wt.decoratorFunctions=a,wt}var Rc;function h2(){if(Rc)return Qt;Rc=1;var t=Qt&&Qt.__createBinding||(Object.create?(function(I,M,P,$){$===void 0&&($=P);var N=Object.getOwnPropertyDescriptor(M,P);(!N||("get"in N?!M.__esModule:N.writable||N.configurable))&&(N={enumerable:!0,get:function(){return M[P]}}),Object.defineProperty(I,$,N)}):(function(I,M,P,$){$===void 0&&($=P),I[$]=M[P]})),r=Qt&&Qt.__setModuleDefault||(Object.create?(function(I,M){Object.defineProperty(I,"default",{enumerable:!0,value:M})}):function(I,M){I.default=M}),n=Qt&&Qt.__importStar||function(I){if(I&&I.__esModule)return I;var M={};if(I!=null)for(var P in I)P!=="default"&&Object.prototype.hasOwnProperty.call(I,P)&&t(M,I,P);return r(M,I),M};Object.defineProperty(Qt,"__esModule",{value:!0});const a=n(f2()),o=Nf(),s=Bf();function l(I){const M=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(I);return M?{r:parseInt(M[1],16),g:parseInt(M[2],16),b:parseInt(M[3],16)}:null}function c(I,M,P,$){return`\x1B[38;2;${I};${M};${P}m${$||""}${$?a.RESET:""}`}function f(I){return Object.keys(I).reduce((M,P)=>{let $=I[String(P)];if(Array.isArray($)&&($=$.join(";")),typeof $=="string"&&$.toString().includes("#")){const{r:N,g:z,b:F}=l($);return $=c(N,z,F),M[P]=$,M}return typeof $=="object"?(M[P]=f($),M):(M[P]=`\x1B[${$}m`,M)},{})}function h(I,M,P){return Object.keys(I).reduce((N,z)=>{const F=I[z],A=`\\${F}(.*)\\`+F,Y=new RegExp(A,"gsm");if(N&&N.match(Y)){const[G,ee]=Y.exec(N),ce=o.symbolsFunctions[z](P+ee+P);N=N.replace(G,ce)}return N},M)}function p(I,M){return Object.keys(I).reduce((P,$)=>typeof I[$]=="object"?(P[$]=p(I[$],M),P):(P[$]=function(N,...z){const F=I[$],A=typeof N=="string"?N:(0,s.getValue)(N,...z),Y=h(M,A,F);return`${F}${Y}${a.RESET}`},P),{})}function g(I,M,P){return function($,...N){if(typeof $=="string")return c(I,M,P,$);{const z=(0,s.getValue)($,...N);return c(I,M,P,z)}}}function b(I){return function(M,...P){const{r:$,g:N,b:z}=l(I);if(typeof M=="string")return c($,N,z,M);{const F=(0,s.getValue)(M,...P);return c($,N,z,F)}}}function y(I){return function(M,...P){if(typeof M=="string")return`${I}${M}${a.RESET}`;{const $=(0,s.getValue)(M,...P);return`${I}${$}${a.RESET}`}}}function C(I){const{colors:M,theme:P,decorators:$}=I||{decorators:o.decoratorMap,colors:a.default,theme:"default"},N={...a.default,...M},z={...o.decoratorMap,...$},F=f(N),A=P?{...F,...F[P]}:F;if(!A)throw new Error(`no such theme ${P.toString()}`);const Y=p(A,z);return{colors:A,symbols:z,...Y,...o.decoratorFunctions,rgb:g,hex:b,ansi:y}}return Qt.default=C,Qt}var Wr,$c;function d2(){if($c)return Wr;$c=1;var t=Wr&&Wr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};return Wr=t(h2()).default,Wr}var Bc;function Wf(){if(Bc)return yr;Bc=1;var t=yr&&yr.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(yr,"__esModule",{value:!0});const r=t(d2());class n{colors;constructor(o){this.colors=(0,r.default)({theme:o.theme})}colorify(o,s){return s?s.includes("#")?this.colors.hex(s)`${o}`:s.match(/[0-9]/)?this.colors.ansi(s)`${o}`:Array.isArray(s)?this.colors.rgb(...s)`${o}`:this.colors[s]`${o}`:o}stripStyle(o){return o.replace(/\x1b\[[0-9;]*m/g,"")}}return yr.default=n,yr}var Nc;function p2(){if(Nc)return mr;Nc=1;var t=mr&&mr.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(mr,"__esModule",{value:!0});const r=t(Wf());class n extends r.default{options;constructor(o){super(o),this.options=o}pad(o){return" ".repeat(o)}offsetPercentage(){return this.options.labels&&!this.options.percentage?1:0}formatStructure(o,s){if(!this.options.naked){const l=s||this.options.color;if(l){const c=this.colorify(o,l),[f,h]=c.split(o);return h+o+f}return this.colors.colors.reset+o}return""}formatBar(o,s,l,c){const f=o.scaled/this.options.char.length,h=o.color||this.options.color,p=this.options.char?.repeat(f)+this.formatFill(o),g=this.scaleBar(p,o.value,s,h,l,c);return o.color?this.colorify(g,h):g}formatValueWithDecimals(o){let s=o;return this.options.valueLabelsFloatingPoint!==void 0&&(s=o.toFixed(this.options.valueLabelsFloatingPoint)),this.options.valueLabelsPrefix?`${this.options.valueLabelsPrefix}${s}`:String(s)}scaleBar(o,s,l,c,f,h){const p=this.stripStyle(l),g=this.options.naked?0:1,b=p.length-g,y=[];for(let C=0;C<f;C++){const I=this.formatStructure(this.options.structure.axis,c),M=C!==0?this.pad(b)+I:"";if(this.options.valueLabels&&C===0){const P=this.formatValueWithDecimals(s);y.push(M+o+this.pad(1)+P)}else y.push(M+o)}for(let C=0;C<h;C++){const I=this.formatStructure(this.options.structure.axis,c),M=this.options.labels?this.pad(b):"";y.push(M+I)}return y.join(`
`)}formatFill(o){if(this.options.fill){const s=this.options.width-o.scaled;if(this.options.scale){const l=Math.floor(this.options.width-Math.floor(o.scaled));if(l>0)return this.options.fill.repeat(l)}if(s>0)return this.options.fill.repeat(s/this.options.fill.length)}return""}formatPercentage(o){return this.options.percentage?`(${o.percentage.toFixed(2)}%)`:""}formatLabelSpace(o){if(this.options.max.label){const s=this.offsetPercentage(),l=this.options.max.label-o.length+s;return this.pad(l)}return""}formatChartLabel(o=""){return this.options.colorLabels?this.colorify(o,this.options.color):o}formatChartScale(o){const s=this.options.padding!==void 0,l=s?this.options.padding:0,c=Math.floor((this.options.height-l)/o.size),f=this.options.barSize||c||1;return{padding:s?l:c,barHeight:f}}format(o){const s=[];s.push(this.formatChartLabel(this.options.title));const{barHeight:l,padding:c}=this.formatChartScale(o),f=[];return o.forEach((h,p)=>{const g=Number(p)===o.size-1,b=this.formatLine(h,l,c,g);s.push(b),f.push(this.formatLabel(h,this.options.structure.y))}),s.push(this.formatBottom(f)),s.join(`
`)}formatLine(o,s,l,c){const f=this.formatLabel(o,this.options.structure.y),h=this.formatBar(o,f,s,c?0:l);return`${f}${h}`}formatLabel(o,s){const l=this.formatPercentage(o),c=l?`${o.label} ${l}`:o.label,f=o.color||this.options.color,h=this.formatLabelSpace(c),p=this.options.labels?`${c}${h}${this.formatStructure(s)}`:this.formatStructure(this.options.structure.axis);return this.options.colorLabels?this.colorify(p,f):p}formatBottom(o){if(!this.options.naked){const s=o.map(this.stripStyle),l=Math.max(...s.map(c=>c.length-1));return this.pad(l)+this.options.structure.bottomLeft+this.options.structure.x.repeat(this.options.width)}}}return mr.default=n,mr}var br={},Ui={},Wc;function g2(){if(Wc)return Ui;Wc=1,Object.defineProperty(Ui,"__esModule",{value:!0});class t{options;constructor(n){this.options=n}error(n){return new Error(n)}validate(n){if(!Array.isArray(n))throw new Error("Input data must be an array");if(typeof n[0]=="string")throw new Error("Input values must be numbers. e.g [1, 2, 3] or [{value: 1}, {value: 2}]");if(!n.length)throw new Error("No data provided");if(this.options.barSize===0)throw new Error("barSize cannot be 0")}}return Ui.default=t,Ui}var zc;function m2(){if(zc)return br;zc=1;var t=br&&br.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(br,"__esModule",{value:!0});const r=t(g2());class n{options;validator;constructor(o){this.validator=new r.default(o),this.options=o}getPointValue(o){return typeof o=="number"?o:o.value}calculateTotal(o){return o.reduce((s,l)=>{const c=this.getPointValue(l);return s+c},0)}calculateData(o){const s=this.calculateTotal(o);return o.reduce((l,c)=>{const f=this.getPointValue(c),h=typeof c=="number"?c.toString():c.label||c.value.toString(),p=this.percentage(f,s),g=p?p.toFixed(2).length+5:0,b=this.options.percentage?h.length+g:h.length;return this.options.labels&&(this.options.max.label=Math.max(b,this.options.max.label)),this.options.max.value=Math.max(f,this.options.max.value),this.options.max.scaled=Math.max(this.scale(f),this.options.max.scaled),l+f},0)}percentage(o,s){return this.options.percentage?o/s*100:0}scale(o){const s=this.options.orientation==="vertical"?this.options.height:this.options.width,{scale:l,max:c}=this.options;return l==="auto"?Math.ceil(o/c.value*s):typeof l=="number"&&l>0?Math.round(o/l):o}preprocess(o){const s=this.sort(o),l=this.options.structure.y,c=this.calculateData(o);return{processed:this.options.reverse?s.reverse():s,key:l,total:c}}process(o){const{processed:s,total:l}=this.preprocess(o);this.validator.validate(o);const c=new Map;return s.forEach((f,h)=>{const{color:p=this.options.color,label:g,value:b}=typeof f=="number"?{value:f,label:f.toString()}:f,y=Number(this.scale(b).toFixed(2)),C=this.percentage(b,l),M={label:g||b.toString(),value:b,color:p,scaled:y,percentage:C};c.set(h,M)}),[c,this.options]}sort(o){return this.options.sort?o.sort((s,l)=>{const c=this.getPointValue(s),f=this.getPointValue(l);return c-f}):o}}return br.default=n,br}var za={},qc;function y2(){return qc||(qc=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultOptions=void 0,t.defaultOptions={percentage:!1,colorLabels:!1,sort:!1,reverse:!1,color:void 0,title:"",labels:!0,char:"█",naked:!1,width:100,height:10,padding:0,orientation:"horizontal",theme:"",scale:"auto",structure:{x:"═",y:"╢",axis:"║",topLeft:"╔",bottomLeft:"╚"}};class r{constructor(a){return{...t.defaultOptions,...a,max:{label:0,value:0,scaled:0},structure:{...t.defaultOptions.structure,...a?.structure}}}}t.default=r})(za)),za}var wr={},Hc;function b2(){if(Hc)return wr;Hc=1;var t=wr&&wr.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(wr,"__esModule",{value:!0});const r=t(Wf());class n extends r.default{chart;options;constructor(o,s){super(s),this.chart=[...o.values()],this.options=s}format(){const o=this.getMaxHeight(),{barWidth:s,padding:l}=this.formatChartScale(this.chart.length),c=this.buildVerticalChart(o,l);return this.formatChart(c,o,l,s),this.composeFinalChart(c,s,l)}formatChartScale(o){const s=this.options.char.length,l=this.options.barSize||1,c=Math.floor(this.options.width/(l*o)/s)+1,f=this.options.barSize===void 0?c:this.options.barSize,h=Math.round(this.options.width/this.chart.length/s),p=h<=f?0:h-f;return{padding:this.options.padding||p,barWidth:f}}getMaxHeight(){const o=this.options.height+(this.options.valueLabels&&!this.options.fill?1:0);return this.options.scale==="auto"||this.options.scale,o}isLongChar(){return this.options.char.length>1}isFillLonger(){const o=this.options.fill?.length||0;return o&&o>this.options.char.length}getFillChar(){const{fill:o,char:s}=this.getCharLengths();return o>0&&o<s?this.options.fill.repeat(s):this.options.fill}getCharLengths(){const o=this.options.char.length,s=this.options.fill?.length||0;return{char:o,fill:s}}getCharWidth(){return this.isLongChar()?this.options.char.length:this.isFillLonger()?this.options.fill.length:1}getScaledBarSize(o){const{char:s,fill:l}=this.getCharLengths();return l>1&&s>1?o:this.isFillLonger()?Math.round(o/l):o}buildVerticalChart(o,s){return Array(o).fill("").map(()=>Array(this.chart.length).fill("").map(()=>" ".repeat(s)))}formatChart(o,s,l,c){this.chart.forEach((f,h)=>{const p=f.scaled,g=Math.round(p/s*s),b=f.color;for(let y=0;y<s;y++)if(y===s-g-1&&this.options.valueLabels&&!this.options.fill){const C=this.formatValueLabel(f),I=c-this.stripStyle(C).length+l;o[y][h]=C+" ".repeat(I)}else if(y<s-g){const C=this.formatSpace(c,l),I=this.formatFill(c,l,b),M=this.options.fill?I:C;o[y][h]=M}else{const C=this.formatBar(c,l,b);o[y][h]=C}})}formatPercentage(o){return this.options.percentage?`(${o.percentage.toFixed(2)}%)`:""}formatSpace(o,s){const c=this.isLongChar()?o*this.options.char.length:o;return" ".repeat(c)+" ".repeat(s)}formatBar(o,s,l){const c=this.options.char,f=this.isFillLonger()?o+(this.options.fill.length-c.length):this.getScaledBarSize(o),h=c.repeat(f)+" ".repeat(s);return l?this.colorify(h,l):h}formatFill(o,s,l){const c=this.getFillChar();if(c){const f=this.getScaledBarSize(o),h=c.repeat(f)+" ".repeat(s);return l?this.colorify(h,l):h}}formatLabel(o){const s=o.percentage?`${o.label} ${this.formatPercentage(o)}`:o.label;if(this.options.colorLabels){const l=o.color||this.options.color;return l?this.colorify(s,l):s}return s}formatValueLabel(o){const s=this.formatValueWithDecimals(o.value).toString();if(this.options.colorLabels){const l=o.color||this.options.color;return l?this.colorify(s,l):s}return s}formatLabels(o,s){const l=[];return this.chart.forEach((c,f)=>{if(this.options.labels){const h=this.formatLabel(c),p=this.stripStyle(h),g=this.getCharWidth(),b=this.isLongChar()?o*g+s:o+s+Math.floor(g/2),y=Math.abs(b-p.length),C=f===0&&!this.options.naked?1:0;l.push(" ".repeat(C)+h+" ".repeat(y))}}),l.join("")}formatValueLabels(o,s){const l=[];return this.chart.forEach((c,f)=>{if(this.options.labels){const h=this.formatValueLabel(c),p=this.stripStyle(h),g=this.getCharWidth(),b=this.isLongChar()?o*g+s:o+s+Math.floor(g/2),y=Math.abs(b-p.length),C=f===0&&!this.options.naked?1:0;l.push(" ".repeat(C)+h+" ".repeat(y))}}),l.join("")}composeFinalChart(o,s,l){const c=o.map(f=>this.options.naked?f.join(""):this.options.structure.axis+f.join(""));return this.options.title&&c.unshift(this.formatChartTitle()),this.options.naked?this.options.naked&&this.options.labels&&c.push(""):c.push(this.formatBottom(s,l)),this.options.labels&&c.push(this.formatLabels(s,l)),this.options.valueLabels&&this.options.fill&&(c.unshift(""),c.unshift(this.formatValueLabels(s,l))),c.join(`
`)}formatChartTitle(){const o=this.options.color;return this.colorify(this.options.title,o)}formatBottom(o,s){const l=this.getCharWidth(),f=(this.getScaledBarSize(o)*l+s)*this.chart.length-s;return this.options.structure.bottomLeft+this.options.structure.x.repeat(f)}formatValueWithDecimals(o){let s=o;return this.options.valueLabelsFloatingPoint!==void 0&&(s=o.toFixed(this.options.valueLabelsFloatingPoint)),this.options.valueLabelsPrefix?`${this.options.valueLabelsPrefix}${s}`:String(s)}}return wr.default=n,wr}var Yc;function w2(){if(Yc)return gr;Yc=1;var t=gr&&gr.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(gr,"__esModule",{value:!0});const r=t(p2()),n=t(m2()),a=t(y2()),o=t(b2());class s{chart;asciiChart;constructor(c,f){const h=new a.default(f),p=new n.default(h),[g,b]=p.process(c);this.chart=g;const y=h.orientation==="vertical"?new o.default(g,b):new r.default(b);this.asciiChart=y.format(this.chart)}create(){return this.asciiChart}}return gr.default=s,gr}var zr,Uc;function v2(){if(Uc)return zr;Uc=1;var t=zr&&zr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};return zr=t(w2()).default,zr}var x2=v2();const Vc=ts(x2);async function _2(){const t="habitTracking",r=new st(t),n=T_.map(async c=>{if(!await Gr.shouldShowInput(c))return null;const h=await Gr.getInputProgress(c);return{habit:c,completedCount:h.targetProgress?.current||0,targetCount:c.schedule?.target?.count||1,isComplete:h.targetProgress?.isComplete||!1,shouldShow:!0,maxLimitProgress:h.limitProgress?{current:h.limitProgress.current,max:h.limitProgress.limit,percentage:h.limitProgress.percentage}:null}}),o=(await Promise.all(n)).filter(c=>c!==null),s=o.map(c=>c.habit.id);let l=!1;try{const c=await gn.getInputsLastNReports(Xn.ALMOST_DAILY,s,10);if(l=c.length>0,l){r._md("## 📊 Habit Statistics (Last 10 Reports)");const f=[];for(const{habit:h}of o){const p=c.filter(g=>g.inputId===h.id);if(p.length>=2){const g=p.map(C=>C.value),b=eo.booleanStatistics(g),y=eo.createSparkline(g.map(C=>C===!0?1:0));f.push({label:h.label.slice(0,20),value:b.truePercentage}),r._md(`**${h.label}:** ${b.truePercentage.toFixed(0)}% (${b.trueCount}/${b.count}) · ${y} · ${b.currentStreakType==="true"?"✨":"❄️"} ${b.currentStreak} streak`)}}if(f.length>=2){r._md(`
**Completion Rate Comparison:**`);try{const h=new Vc(f,{naked:!0,width:40});r._md("```\n"+h.create()+"\n```")}catch(h){console.error("Failed to create comparison chart:",h)}}r._divider()}}catch(c){console.error("Failed to fetch habit statistics:",c)}return r._md("## ✅ Today's Habits (📌 CORE - 1 min)"),r._foldable(`**Atomic Habits** — every habit = Cue → Craving → Response → Reward.
**Taoist Wu Wei** — not perfection, but flow. Missed habits are okay—just return gently.
**Power of Habit** — the cue and reward make habits stick, not willpower alone.

**Check when complete:**`),o.length>0?(o.forEach(({habit:c,completedCount:f,maxLimitProgress:h,targetCount:p})=>{const g=c.schedule?.target?.per.count||1,b=c.schedule?.target?.per.unit||pe.Day;if(p===1&&g===1&&b===pe.Day)c.label;else{let C;g===1?C=b:C=`${g} ${b}s`,`${c.label}${f}${p}${C}`}if(r._input(c.inputOptions),r._md(`*Cue*: ${c.cue} · *Reward*: ${c.reward}`),h){const{current:C,max:I,percentage:M}=h;let P;const $=c.schedule?.limit?.per.count||1,N=c.schedule?.limit?.per.unit||"day";$===1?P=N:P=`${$} ${N}s`;let z="✅",F="";M>=100?(z="🚫",F=" **LIMIT REACHED**"):M>=80?(z="⚠️",F=" **Approaching limit**"):M>=60&&(z="⚡");try{const A=new Vc([{label:"Used",value:C},{label:"Remaining",value:Math.max(0,I-C)}],{naked:!0,width:30});r._md(`${z} **Limit tracker:** ${C}/${I} times per ${P} (${M.toFixed(0)}%)${F}`),r._md("```\n"+A.create()+"\n```")}catch{const Y="█".repeat(Math.round(C/I*20))+"░".repeat(20-Math.round(C/I*20));r._md(`${z} **Limit tracker:** ${C}/${I} times per ${P} · ${Y} ${M.toFixed(0)}%${F}`)}}}),r._md("**Wisdom** — missing once is an accident. Missing twice is the start of a pattern. Return gently.")):r._md("*🎉 All habits completed for this period! Well done!*"),r.render()}async function k2(){const t="messageFromYesterday",r=new st(t),n=await gn.getInputsLastNReports(Xn.ALMOST_DAILY,["message_for_tomorrow","tomorrow_priority"],1),a=n.find(c=>c.inputId==="message_for_tomorrow"),o=n.find(c=>c.inputId==="tomorrow_priority"),s=a&&a.value?.trim().length>0,l=o&&o.value?.trim().length>0;if(!s&&!l)return"";if(r._md("## 📨 Message from Your Past Self (⭐ RECOMMENDED - 30 sec)"),l){const c=o.value;r._md(`### 🎯 Today's Priority (set ${o.reportDate})`),r._md(`> ${c}`)}if(s){const c=a.value;r._md(`### 💌 Message (from ${a.reportDate})`),r._md(`> ${c}`)}return r._foldable("Your past self sent you guidance! Take a moment to reflect on it.","A Gift from Yesterday"),r.render()}async function S2(){const t="accomplishmentsAndObstacles",r=new st(t);return r._md("## 📊 Wins & Obstacles (⭐ RECOMMENDED)"),r._foldable(`**The Stoic Path** — "The obstacle is the way." Every setback is training.

_"The impediment to action advances action. What stands in the way becomes the way."_ — Marcus Aurelius

**Three Questions for Obstacles:**
1. **What happened?** (The external event—not in your control)
2. **How did I respond?** (Your reaction—entirely in your control)
3. **How will I overcome this?** (Your action plan—growth through adversity)

**Atomic Habits:** Every obstacle reveals a system flaw. Fix the system, not just the symptom.
**Growth Mindset:** You haven't mastered this *yet*. Struggle = growth happening.

Remember: You control your **effort, attitude, and response** — not outcomes.`),r._fancyTitle("Wins & Accomplishments","🏆"),await r._input(Ne.accomplishments),r._fancyTitle("Obstacles & The Way Forward","⚔️"),await r._input(Ne.obstacles),await r._input(Ne.if_then_plan),r._md("**Stoic Wisdom**: This obstacle is not blocking your path—it IS the path. It's revealing where you need to grow."),r.render()}async function I2(){const t="attentionAndWillpower",r=new st(t);return r._md("## 🎯 Attention & Willpower Check (💡 OPTIONAL - 3-5 min)"),r._foldable(`**Hyperfocus** — attention is your most valuable resource. Protect it fiercely.
**The Willpower Instinct** — willpower depletes throughout the day and needs recovery (rest, breaks, nature).
**Atomic Habits** — environment shapes behavior more than motivation.

Track patterns. Design better environments. Restore your willpower.`),r._fancyTitle("Attention Reflection","👁️"),await r._input(Ne.main_distraction),await r._input(Ne.flow_moments),r._fancyTitle("Willpower Reflection","💪"),await r._input(Ne.willpower_challenge),r._md("**Insight** — you can't control urges, but you can control your environment. Make good choices the easy choices."),r.render()}async function C2(){const t="gratitudeAndSavoring",r=new st(t);return r._md("## 🙏 Gratitude & Savoring (⭐ RECOMMENDED)"),r._foldable(`**Three Good Things Intervention** — writing WHY things went well is crucial for wellbeing.
**Stoicism** — negative visualization—appreciate what you have by imagining its loss.
**Positive Psychology** — gratitude is one of the strongest wellbeing predictors.

Savor simple pleasures: friendship, beauty, learning, nature. Your role matters.`),r._md("### Three Good Things Today"),await r._input(Ne.gratitudes),r.render()}async function E2(){const t="mindfulMoment",r=new st(t);return r._md("## 🧘 Mindful Moment (💡 OPTIONAL - 2-3 min)"),r._foldable(`**Present Moment Awareness** — The antidote to anxiety

Anxiety lives in the future (what if?). Regret lives in the past (if only...). Peace lives in NOW.

**The Problem** — your mind is NEVER here. You eat lunch while planning dinner. You're with friends while mentally at work. You miss your ENTIRE LIFE because you're always somewhere else.

**The Solution** — train yourself to return to the present moment—over and over.

**What this practice does:**
- **Reduces anxiety** — the present moment is usually fine. Suffering is in your head.
- **Increases joy** — life's beauty exists NOW, not in memory or anticipation
- **Improves focus** — your attention is your most valuable resource
- **Creates calm** — presence is inherently peaceful
- **Builds gratitude** — you notice what you usually miss

**Why it works** (neuroscience):
Your brain has two modes:
- **Default Mode** (wandering mind) — predicts, plans, worries, ruminates = stress
- **Present Mode** (focused attention) — observes, senses, experiences = calm

This practice trains you to shift from Default to Present mode at will.

**How to practice:**
This is NOT about emptying your mind. It's about NOTICING when you were present today, and appreciating that moment.

When you recall being fully present—even for 5 seconds—you're training your brain to recognize and seek presence.`,"Mindfulness Practice"),r._md("### Practice (2 minutes)"),r._md("**Step 1** — ground yourself"),r._md("Close your eyes or soften your gaze. Take three slow, deep breaths. Feel your body in the chair."),r._md("**Step 2** — recall one present moment"),r._md("Remember ONE moment from today when you were fully HERE — no past, no future, just NOW:"),r._md("- Morning coffee warmth on your hands"),r._md("- A genuine laugh with someone"),r._md("- Sunlight on your skin"),r._md("- The taste of your lunch"),r._md("- Wind in your hair"),r._md("- A moment of quiet"),r._md("**Step 3** — explore the memory"),r._md("Hold that memory. Notice the details:"),r._md("- What did you SEE? (Colors, light, movement)"),r._md("- What did you HEAR? (Sounds, silence, rhythm)"),r._md("- What did you FEEL? (Temperature, texture, sensation)"),r._md("- What did you SMELL? TASTE?"),r._md("**Step 4** — appreciate"),r._md("That simple moment—THAT is life. Not achievements or plans. Just being fully alive, right here, right now."),await r._input(Ne.mindful_pause_taken),r._md('> _"The present moment is all you ever have."_ — Eckhart Tolle'),r._md('> _"When you wash the dishes, wash the dishes."_ — Thích Nhất Hạnh'),r.render()}async function T2(){const t="emotionAwareness",r=new st(t);return r._md("## 💭 Emotion Awareness (💡 OPTIONAL - 3-5 min)"),r._foldable(`**Emotional Intelligence** — recognizing emotions is the first step to managing them.
**Stoicism** — you can't control feelings arising, but you can control your response.
**Neuroscience** — naming emotions reduces their intensity (affect labeling).

No judgment—just awareness and learning.`),r._md("### Today's Emotional Landscape"),await r._input(Ne.strongest_emotion),await r._input(Ne.emotion_trigger),await r._input(Ne.emotion_response),await r._input(Ne.better_emotion_response),r._md(`> **Practice** — when strong emotions arise, pause and label: _"I'm feeling [emotion]."_ This creates space between feeling and reaction.`),r.render()}async function A2(){const t="permaPlus",r=new st(t),n=Ja.map(async g=>await Gr.shouldShowInput(g)?g:null),a=(await Promise.all(n)).filter(g=>g!==null),o=new Map;a.forEach(g=>{g.schedule?.showEvery?.unit===pe.Day&&o.set(g.id,g.schedule.showEvery.count)});const s=Ja.filter(g=>!g.schedule||g.schedule.active!==!1),l=s.map(g=>g.id);let c=new Map,f=new Map,h=new Map,p={first:"",last:"",reportCount:0};try{const g=await gn.getInputsLastNReports(Xn.ALMOST_DAILY,l,20);if(g.length>0){const b=Array.from(new Set(g.map(y=>y.reportDate||""))).sort();p={first:b[0],last:b[b.length-1],reportCount:b.length}}s.forEach(b=>{const y=g.filter(C=>C.inputId===b.id).map(C=>{const I=Array.isArray(C.value)?C.value[0]:C.value;return typeof I=="string"?parseFloat(I):I}).filter(C=>!isNaN(C));if(c.set(b.id,y),y.length>0){const C=y.slice(-5),I=C.reduce((P,$)=>P+$,0)/C.length;f.set(b.id,I);const M=y.reduce((P,$)=>P+$,0)/y.length;h.set(b.id,M)}})}catch(g){console.error("Failed to fetch PERMA historical data:",g)}if(r._md("## 💚 PERMA+8 Wellbeing Check (📌 CORE - 2-3 min)"),r._foldable(`**PERMA+8 Model**: Comprehensive wellbeing framework covering 13 dimensions:

**Core PERMA:**
- Positive Emotions, Engagement, Relationships, Meaning, Accomplishment

**Body & Physical:**
- Sleep Quality, Embodiment (body acceptance), Physical Pleasure, Touch & Intimacy, Physical Condition

**Life Context:**
- Mindset, Environment, Economic Security

Rate honestly—awareness is the first step to change.

**Rate each dimension** (3 = Great, 2 = Adequate, 1 = Struggling):`),a.forEach(g=>{const b=f.get(g.id),y=b!==void 0?` (last 5 reports: ${b.toFixed(1)})`:"",C=g.schedule?.showEvery?` *(shown every ${g.schedule.showEvery.count} ${g.schedule.showEvery.unit}${g.schedule.showEvery.count>1?"s":""})*`:"";r._inputLabel(`${g.label}${y}${C}`,`*${g.description}*`),r._input(g.inputOptions)}),c.size>0&&Array.from(c.values()).some(g=>g.length>=3)){r._themedDivider("Wellbeing Trends","📊");const g=[];if(c.forEach(b=>{g.push(...b)}),g.length>0){const b=g.reduce((I,M)=>I+M,0)/g.length,y=eo.createSparkline(Array.from(c.values())[0]);r._md(`**Overall Wellbeing (last ${p.reportCount} reports): ${b.toFixed(1)}/3.0** ${y}`),p.first&&p.last&&r._md(`*Data from ${p.first} to ${p.last}*`);const C=s.map(I=>({param:I,avg:h.get(I.id)||0,dataPoints:c.get(I.id)?.length||0})).filter(I=>I.dataPoints>=3).sort((I,M)=>I.avg-M.avg);if(C.length>0){const I=C[0],M=C[C.length-1];r._md("**Insights:**"),I.avg<2&&r._md(`- ⚠️ **Needs attention**: ${I.param.label} (avg: ${I.avg.toFixed(1)}) — Consider prioritizing this area`),M.avg>=2.5&&r._md(`- ✨ **Strength area**: ${M.param.label} (avg: ${M.avg.toFixed(1)}) — Keep up the good work!`),r._md(`**Trends (last ${p.reportCount} reports):**`),s.forEach(P=>{const $=c.get(P.id);if($&&$.length>=3){const N=h.get(P.id)||0,z=eo.createSparkline($),F=$.length>=2?$[$.length-1]>$[$.length-2]?"↗":$[$.length-1]<$[$.length-2]?"↘":"→":"→";r._md(`- ${P.label}: ${N.toFixed(1)} ${z} ${F}`)}})}}}return r._divider(),r._inputLabel("Quick Reflection","Which area needs attention tomorrow?"),r._text("perma_focus_tomorrow","","e.g., Relationships, Physical Wellbeing..."),r.render()}async function P2(){const t="messageForTomorrow",r=new st(t);return r._md("## 💌 Message & Intention for Tomorrow (📌 CORE - 2 min)"),r._foldable(`Set yourself up for success tomorrow with clarity and encouragement.

**Tomorrow's Priority**: What's the ONE thing that matters most? When and where will you do it?
**Message to Future Self**: A reminder, encouragement, or lesson you don't want to forget.

What can I prepare tonight to make tomorrow easier?

Keep it short and meaningful. Your future self will thank you.`),await r._input(Ne.tomorrow_priority),await r._input(Ne.message_for_tomorrow),await r._input(Ne.plan_next_day),r.render()}async function M2(){const t=[];t.push(await I_()),t.push(`
---
`),t.push("# 🌅 MORNING: Set the Day"),t.push("*Win the morning, win the day. Start with intention and clarity.*"),t.push(`
---
`),t.push(await k2()),t.push(await B_()),t.push(await N_()),t.push(await E2()),t.push(await W_()),t.push(`
---
`),t.push("# 📋 DAILY HABITS & PRACTICES"),t.push("*Small actions, repeated daily, create remarkable results.*"),t.push(`
---
`),t.push(await _2()),t.push(await z_()),t.push(`
---
`),t.push("# 🌙 EVENING: Reflect & Close the Day"),t.push("*Review your day with honesty and gratitude. Learn, grow, prepare.*"),t.push(`
---
`),t.push(await S2()),t.push(await I2()),t.push(await C2()),t.push(await T2()),t.push(await A2()),t.push(await P2()),Vr.write({type:Xn.ALMOST_DAILY,data:t.join(`
`)})}class O2{async backfillPeriodicParameters(r){const n=[];for(const a of r){const o=Ja.find(f=>f.id===a.inputId&&f.schedule?.active!==!1);if(!o||!o.schedule?.showEvery){n.push(a);continue}const s=o.schedule.showEvery.unit===pe.Day?o.schedule.showEvery.count:1,l=a.reportDate,c=await this.getReportDatesInPast(s,l);for(const f of c)n.push({...a,reportDate:f});n.push(a)}return n}async getReportDatesInPast(r,n){const a=[];try{const o=await gn.getReportInputs("almostDailyReport");for(let s=1;s<r;s++){const l=this.getDateDaysAgo(s,n);o.some(f=>f.reportDate===l)&&a.push(l)}}catch(o){console.error("Error fetching past report dates:",o)}return a}getDateDaysAgo(r,n){const a=new Date(n);return a.setDate(a.getDate()-r),a.toISOString().split("T")[0]}}const F2=new O2,Mt=Zt(en.FileService);async function D2(){try{const t=`${Xi(new Date,"dd.MM.yyyy")}.md`,r=await L2();Mt.dev("Input collection and empty report cleanup completed");const n=ke.workspace.getLeavesOfType("markdown"),a=[];for(const l of n){const f=l.view.file;f&&(a.push(f.path),f.path.endsWith(t)&&(Mt.dev("Closing today's note: "+f.path),await l.detach()))}Mt.dev("Currently open files: "+a.join(", "));const o=`${vt.projectDir}/${vt.coreDir}`,s=ke.vault.getAbstractFileByPath(o);if(s&&"children"in s){const l=/^\d{2}\.\d{2}\.\d{4}\.md$/;for(const c of s.children)"extension"in c&&c.extension==="md"&&l.test(c.name)&&c.name!==t&&(Mt.dev("Deleting old app-triggering note: "+c.path),await ke.vault.delete(c))}if(r){for(const[l,c]of Object.entries(r))if(c&&c.length>0){const f=await F2.backfillPeriodicParameters(c);await gn.upsertReportInputs(l,f),Mt.info(`Saved ${f.length} inputs (${c.length} original + ${f.length-c.length} backfilled) for ${l} to database`)}}await M2(),Mt.info("Daily report built successfully")}catch(t){Mt.error("Failed to run onStart:",t)}}async function L2(){try{Mt.dev("Checking for empty reports from yesterday...");const t=await bx.collectFromYesterday();for(const[r,n]of Object.entries(t)){if(!n||n.length===0){Mt.dev(`No inputs found for report: ${r}`);continue}if(n.every(o=>!!(o.value===null||o.value===void 0||typeof o.value=="string"&&o.value.trim()===""||Array.isArray(o.value)&&o.value.length===0||typeof o.value=="boolean"&&o.value===!1||typeof o.value=="number"&&o.value===0))){const o=Vr.reportFolders[r],s=await Vr._listFiles(o);if(s.length>0){const l=s.sort().reverse()[0],c=n[0];if(c&&l.includes(c.reportDate.replace(/-/g,""))&&l.includes(c.reportNumber)){const f=`${o}/${l}`,h=ke.vault.getAbstractFileByPath(f);h&&"extension"in h&&(Mt.info(`Deleting empty report: ${l}`),await ke.vault.delete(h))}}}else Mt.dev(`Report ${r} has content - keeping it`)}return t}catch(t){return Mt.error("Failed to delete empty reports:",t),{}}}const Vi=Zt(en.FileService);async function R2(t,r){Vi.info("runPowerJournal started");const n=await Ey(r);ky(t,n),Vi.dev("Globals set, config loaded");try{await D2(),Vi.info("Power Journal workflow completed successfully")}catch(a){Vi.error("Error in Power Journal workflow",{error:a})}}module.exports=R2;
